(self.webpackChunkceph_dashboard=self.webpackChunkceph_dashboard||[]).push([[756],{47291:(J,ee,g)=>{"use strict";var R=g(83450),r=g(351),I="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;ee.Buffer=p,ee.SlowBuffer=function P(M){return+M!=M&&(M=0),p.alloc(+M)},ee.INSPECT_MAX_BYTES=50;var b=2147483647;function m(M){if(M>b)throw new RangeError('The value "'+M+'" is invalid for option "size"');var a=new Uint8Array(M);return Object.setPrototypeOf(a,p.prototype),a}function p(M,a,l){if("number"==typeof M){if("string"==typeof a)throw new TypeError('The "string" argument must be of type string. Received type number');return Y(M)}return G(M,a,l)}function G(M,a,l){if("string"==typeof M)return function X(M,a){if(("string"!=typeof a||""===a)&&(a="utf8"),!p.isEncoding(a))throw new TypeError("Unknown encoding: "+a);var l=0|S(M,a),N=m(l),V=N.write(M,a);return V!==l&&(N=N.slice(0,V)),N}(M,a);if(ArrayBuffer.isView(M))return function v(M){if(A(M,Uint8Array)){var a=new Uint8Array(M);return D(a.buffer,a.byteOffset,a.byteLength)}return h(M)}(M);if(null==M)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(A(M,ArrayBuffer)||M&&A(M.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(A(M,SharedArrayBuffer)||M&&A(M.buffer,SharedArrayBuffer)))return D(M,a,l);if("number"==typeof M)throw new TypeError('The "value" argument must not be of type number. Received type number');var N=M.valueOf&&M.valueOf();if(null!=N&&N!==M)return p.from(N,a,l);var V=function $(M){if(p.isBuffer(M)){var a=0|z(M.length),l=m(a);return 0===l.length||M.copy(l,0,0,a),l}return void 0!==M.length?"number"!=typeof M.length||y(M.length)?m(0):h(M):"Buffer"===M.type&&Array.isArray(M.data)?h(M.data):void 0}(M);if(V)return V;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof M[Symbol.toPrimitive])return p.from(M[Symbol.toPrimitive]("string"),a,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}function W(M){if("number"!=typeof M)throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function Y(M){return W(M),m(M<0?0:0|z(M))}function h(M){for(var a=M.length<0?0:0|z(M.length),l=m(a),N=0;N<a;N+=1)l[N]=255&M[N];return l}function D(M,a,l){if(a<0||M.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<a+(l||0))throw new RangeError('"length" is outside of buffer bounds');var N;return N=void 0===a&&void 0===l?new Uint8Array(M):void 0===l?new Uint8Array(M,a):new Uint8Array(M,a,l),Object.setPrototypeOf(N,p.prototype),N}function z(M){if(M>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return 0|M}function S(M,a){if(p.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||A(M,ArrayBuffer))return M.byteLength;if("string"!=typeof M)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);var l=M.length,N=arguments.length>2&&!0===arguments[2];if(!N&&0===l)return 0;for(var V=!1;;)switch(a){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return c(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*l;case"hex":return l>>>1;case"base64":return ue(M).length;default:if(V)return N?-1:c(M).length;a=(""+a).toLowerCase(),V=!0}}function f(M,a,l){var N=!1;if((void 0===a||a<0)&&(a=0),a>this.length||((void 0===l||l>this.length)&&(l=this.length),l<=0)||(l>>>=0)<=(a>>>=0))return"";for(M||(M="utf8");;)switch(M){case"hex":return ae(this,a,l);case"utf8":case"utf-8":return re(this,a,l);case"ascii":return ge(this,a,l);case"latin1":case"binary":return e(this,a,l);case"base64":return ne(this,a,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return We(this,a,l);default:if(N)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),N=!0}}function d(M,a,l){var N=M[a];M[a]=M[l],M[l]=N}function u(M,a,l,N,V){if(0===M.length)return-1;if("string"==typeof l?(N=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),y(l=+l)&&(l=V?0:M.length-1),l<0&&(l=M.length+l),l>=M.length){if(V)return-1;l=M.length-1}else if(l<0){if(!V)return-1;l=0}if("string"==typeof a&&(a=p.from(a,N)),p.isBuffer(a))return 0===a.length?-1:E(M,a,l,N,V);if("number"==typeof a)return a&=255,"function"==typeof Uint8Array.prototype.indexOf?V?Uint8Array.prototype.indexOf.call(M,a,l):Uint8Array.prototype.lastIndexOf.call(M,a,l):E(M,[a],l,N,V);throw new TypeError("val must be string, number or Buffer")}function E(M,a,l,N,V){var je,te=1,_e=M.length,be=a.length;if(void 0!==N&&("ucs2"===(N=String(N).toLowerCase())||"ucs-2"===N||"utf16le"===N||"utf-16le"===N)){if(M.length<2||a.length<2)return-1;te=2,_e/=2,be/=2,l/=2}function De(Ft,Ct){return 1===te?Ft[Ct]:Ft.readUInt16BE(Ct*te)}if(V){var Ke=-1;for(je=l;je<_e;je++)if(De(M,je)===De(a,-1===Ke?0:je-Ke)){if(-1===Ke&&(Ke=je),je-Ke+1===be)return Ke*te}else-1!==Ke&&(je-=je-Ke),Ke=-1}else for(l+be>_e&&(l=_e-be),je=l;je>=0;je--){for(var Be=!0,Rt=0;Rt<be;Rt++)if(De(M,je+Rt)!==De(a,Rt)){Be=!1;break}if(Be)return je}return-1}function B(M,a,l,N){l=Number(l)||0;var V=M.length-l;N?(N=Number(N))>V&&(N=V):N=V;var te=a.length;N>te/2&&(N=te/2);for(var _e=0;_e<N;++_e){var be=parseInt(a.substr(2*_e,2),16);if(y(be))return _e;M[l+_e]=be}return _e}function C(M,a,l,N){return Fe(c(a,M.length-l),M,l,N)}function Z(M,a,l,N){return Fe(function U(M){for(var a=[],l=0;l<M.length;++l)a.push(255&M.charCodeAt(l));return a}(a),M,l,N)}function w(M,a,l,N){return Fe(ue(a),M,l,N)}function K(M,a,l,N){return Fe(function x(M,a){for(var l,N,te=[],_e=0;_e<M.length&&!((a-=2)<0);++_e)N=(l=M.charCodeAt(_e))>>8,te.push(l%256),te.push(N);return te}(a,M.length-l),M,l,N)}function ne(M,a,l){return R.fromByteArray(0===a&&l===M.length?M:M.slice(a,l))}function re(M,a,l){l=Math.min(M.length,l);for(var N=[],V=a;V<l;){var De,je,Ke,Be,te=M[V],_e=null,be=te>239?4:te>223?3:te>191?2:1;if(V+be<=l)switch(be){case 1:te<128&&(_e=te);break;case 2:128==(192&(De=M[V+1]))&&(Be=(31&te)<<6|63&De)>127&&(_e=Be);break;case 3:je=M[V+2],128==(192&(De=M[V+1]))&&128==(192&je)&&(Be=(15&te)<<12|(63&De)<<6|63&je)>2047&&(Be<55296||Be>57343)&&(_e=Be);break;case 4:je=M[V+2],Ke=M[V+3],128==(192&(De=M[V+1]))&&128==(192&je)&&128==(192&Ke)&&(Be=(15&te)<<18|(63&De)<<12|(63&je)<<6|63&Ke)>65535&&Be<1114112&&(_e=Be)}null===_e?(_e=65533,be=1):_e>65535&&(N.push((_e-=65536)>>>10&1023|55296),_e=56320|1023&_e),N.push(_e),V+=be}return function Pe(M){var a=M.length;if(a<=Se)return String.fromCharCode.apply(String,M);for(var l="",N=0;N<a;)l+=String.fromCharCode.apply(String,M.slice(N,N+=Se));return l}(N)}ee.kMaxLength=b,!(p.TYPED_ARRAY_SUPPORT=function j(){try{var M=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(M,a),42===M.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(M,a,l){return G(M,a,l)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(M,a,l){return function L(M,a,l){return W(M),M<=0?m(M):void 0!==a?"string"==typeof l?m(M).fill(a,l):m(M).fill(a):m(M)}(M,a,l)},p.allocUnsafe=function(M){return Y(M)},p.allocUnsafeSlow=function(M){return Y(M)},p.isBuffer=function(a){return null!=a&&!0===a._isBuffer&&a!==p.prototype},p.compare=function(a,l){if(A(a,Uint8Array)&&(a=p.from(a,a.offset,a.byteLength)),A(l,Uint8Array)&&(l=p.from(l,l.offset,l.byteLength)),!p.isBuffer(a)||!p.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===l)return 0;for(var N=a.length,V=l.length,te=0,_e=Math.min(N,V);te<_e;++te)if(a[te]!==l[te]){N=a[te],V=l[te];break}return N<V?-1:V<N?1:0},p.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(a,l){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return p.alloc(0);var N;if(void 0===l)for(l=0,N=0;N<a.length;++N)l+=a[N].length;var V=p.allocUnsafe(l),te=0;for(N=0;N<a.length;++N){var _e=a[N];if(A(_e,Uint8Array))te+_e.length>V.length?p.from(_e).copy(V,te):Uint8Array.prototype.set.call(V,_e,te);else{if(!p.isBuffer(_e))throw new TypeError('"list" argument must be an Array of Buffers');_e.copy(V,te)}te+=_e.length}return V},p.byteLength=S,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var a=this.length;if(a%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var l=0;l<a;l+=2)d(this,l,l+1);return this},p.prototype.swap32=function(){var a=this.length;if(a%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var l=0;l<a;l+=4)d(this,l,l+3),d(this,l+1,l+2);return this},p.prototype.swap64=function(){var a=this.length;if(a%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var l=0;l<a;l+=8)d(this,l,l+7),d(this,l+1,l+6),d(this,l+2,l+5),d(this,l+3,l+4);return this},p.prototype.toLocaleString=p.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?re(this,0,a):f.apply(this,arguments)},p.prototype.equals=function(a){if(!p.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===p.compare(this,a)},p.prototype.inspect=function(){var a="",l=ee.INSPECT_MAX_BYTES;return a=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(a+=" ... "),"<Buffer "+a+">"},I&&(p.prototype[I]=p.prototype.inspect),p.prototype.compare=function(a,l,N,V,te){if(A(a,Uint8Array)&&(a=p.from(a,a.offset,a.byteLength)),!p.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===l&&(l=0),void 0===N&&(N=a?a.length:0),void 0===V&&(V=0),void 0===te&&(te=this.length),l<0||N>a.length||V<0||te>this.length)throw new RangeError("out of range index");if(V>=te&&l>=N)return 0;if(V>=te)return-1;if(l>=N)return 1;if(this===a)return 0;for(var _e=(te>>>=0)-(V>>>=0),be=(N>>>=0)-(l>>>=0),De=Math.min(_e,be),je=this.slice(V,te),Ke=a.slice(l,N),Be=0;Be<De;++Be)if(je[Be]!==Ke[Be]){_e=je[Be],be=Ke[Be];break}return _e<be?-1:be<_e?1:0},p.prototype.includes=function(a,l,N){return-1!==this.indexOf(a,l,N)},p.prototype.indexOf=function(a,l,N){return u(this,a,l,N,!0)},p.prototype.lastIndexOf=function(a,l,N){return u(this,a,l,N,!1)},p.prototype.write=function(a,l,N,V){if(void 0===l)V="utf8",N=this.length,l=0;else if(void 0===N&&"string"==typeof l)V=l,N=this.length,l=0;else{if(!isFinite(l))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");l>>>=0,isFinite(N)?(N>>>=0,void 0===V&&(V="utf8")):(V=N,N=void 0)}var te=this.length-l;if((void 0===N||N>te)&&(N=te),a.length>0&&(N<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");V||(V="utf8");for(var _e=!1;;)switch(V){case"hex":return B(this,a,l,N);case"utf8":case"utf-8":return C(this,a,l,N);case"ascii":case"latin1":case"binary":return Z(this,a,l,N);case"base64":return w(this,a,l,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,a,l,N);default:if(_e)throw new TypeError("Unknown encoding: "+V);V=(""+V).toLowerCase(),_e=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Se=4096;function ge(M,a,l){var N="";l=Math.min(M.length,l);for(var V=a;V<l;++V)N+=String.fromCharCode(127&M[V]);return N}function e(M,a,l){var N="";l=Math.min(M.length,l);for(var V=a;V<l;++V)N+=String.fromCharCode(M[V]);return N}function ae(M,a,l){var N=M.length;(!a||a<0)&&(a=0),(!l||l<0||l>N)&&(l=N);for(var V="",te=a;te<l;++te)V+=Q[M[te]];return V}function We(M,a,l){for(var N=M.slice(a,l),V="",te=0;te<N.length-1;te+=2)V+=String.fromCharCode(N[te]+256*N[te+1]);return V}function Ae(M,a,l){if(M%1!=0||M<0)throw new RangeError("offset is not uint");if(M+a>l)throw new RangeError("Trying to access beyond buffer length")}function Oe(M,a,l,N,V,te){if(!p.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>V||a<te)throw new RangeError('"value" argument is out of bounds');if(l+N>M.length)throw new RangeError("Index out of range")}function Xe(M,a,l,N,V,te){if(l+N>M.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function qe(M,a,l,N,V){return a=+a,l>>>=0,V||Xe(M,0,l,4),r.write(M,a,l,N,23,4),l+4}function Ie(M,a,l,N,V){return a=+a,l>>>=0,V||Xe(M,0,l,8),r.write(M,a,l,N,52,8),l+8}p.prototype.slice=function(a,l){var N=this.length;(a=~~a)<0?(a+=N)<0&&(a=0):a>N&&(a=N),(l=void 0===l?N:~~l)<0?(l+=N)<0&&(l=0):l>N&&(l=N),l<a&&(l=a);var V=this.subarray(a,l);return Object.setPrototypeOf(V,p.prototype),V},p.prototype.readUintLE=p.prototype.readUIntLE=function(a,l,N){a>>>=0,l>>>=0,N||Ae(a,l,this.length);for(var V=this[a],te=1,_e=0;++_e<l&&(te*=256);)V+=this[a+_e]*te;return V},p.prototype.readUintBE=p.prototype.readUIntBE=function(a,l,N){a>>>=0,l>>>=0,N||Ae(a,l,this.length);for(var V=this[a+--l],te=1;l>0&&(te*=256);)V+=this[a+--l]*te;return V},p.prototype.readUint8=p.prototype.readUInt8=function(a,l){return a>>>=0,l||Ae(a,1,this.length),this[a]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(a,l){return a>>>=0,l||Ae(a,2,this.length),this[a]|this[a+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(a,l){return a>>>=0,l||Ae(a,2,this.length),this[a]<<8|this[a+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(a,l){return a>>>=0,l||Ae(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(a,l){return a>>>=0,l||Ae(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},p.prototype.readIntLE=function(a,l,N){a>>>=0,l>>>=0,N||Ae(a,l,this.length);for(var V=this[a],te=1,_e=0;++_e<l&&(te*=256);)V+=this[a+_e]*te;return V>=(te*=128)&&(V-=Math.pow(2,8*l)),V},p.prototype.readIntBE=function(a,l,N){a>>>=0,l>>>=0,N||Ae(a,l,this.length);for(var V=l,te=1,_e=this[a+--V];V>0&&(te*=256);)_e+=this[a+--V]*te;return _e>=(te*=128)&&(_e-=Math.pow(2,8*l)),_e},p.prototype.readInt8=function(a,l){return a>>>=0,l||Ae(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},p.prototype.readInt16LE=function(a,l){a>>>=0,l||Ae(a,2,this.length);var N=this[a]|this[a+1]<<8;return 32768&N?4294901760|N:N},p.prototype.readInt16BE=function(a,l){a>>>=0,l||Ae(a,2,this.length);var N=this[a+1]|this[a]<<8;return 32768&N?4294901760|N:N},p.prototype.readInt32LE=function(a,l){return a>>>=0,l||Ae(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},p.prototype.readInt32BE=function(a,l){return a>>>=0,l||Ae(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},p.prototype.readFloatLE=function(a,l){return a>>>=0,l||Ae(a,4,this.length),r.read(this,a,!0,23,4)},p.prototype.readFloatBE=function(a,l){return a>>>=0,l||Ae(a,4,this.length),r.read(this,a,!1,23,4)},p.prototype.readDoubleLE=function(a,l){return a>>>=0,l||Ae(a,8,this.length),r.read(this,a,!0,52,8)},p.prototype.readDoubleBE=function(a,l){return a>>>=0,l||Ae(a,8,this.length),r.read(this,a,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(a,l,N,V){a=+a,l>>>=0,N>>>=0,V||Oe(this,a,l,N,Math.pow(2,8*N)-1,0);var _e=1,be=0;for(this[l]=255&a;++be<N&&(_e*=256);)this[l+be]=a/_e&255;return l+N},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(a,l,N,V){a=+a,l>>>=0,N>>>=0,V||Oe(this,a,l,N,Math.pow(2,8*N)-1,0);var _e=N-1,be=1;for(this[l+_e]=255&a;--_e>=0&&(be*=256);)this[l+_e]=a/be&255;return l+N},p.prototype.writeUint8=p.prototype.writeUInt8=function(a,l,N){return a=+a,l>>>=0,N||Oe(this,a,l,1,255,0),this[l]=255&a,l+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(a,l,N){return a=+a,l>>>=0,N||Oe(this,a,l,2,65535,0),this[l]=255&a,this[l+1]=a>>>8,l+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(a,l,N){return a=+a,l>>>=0,N||Oe(this,a,l,2,65535,0),this[l]=a>>>8,this[l+1]=255&a,l+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(a,l,N){return a=+a,l>>>=0,N||Oe(this,a,l,4,4294967295,0),this[l+3]=a>>>24,this[l+2]=a>>>16,this[l+1]=a>>>8,this[l]=255&a,l+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(a,l,N){return a=+a,l>>>=0,N||Oe(this,a,l,4,4294967295,0),this[l]=a>>>24,this[l+1]=a>>>16,this[l+2]=a>>>8,this[l+3]=255&a,l+4},p.prototype.writeIntLE=function(a,l,N,V){if(a=+a,l>>>=0,!V){var te=Math.pow(2,8*N-1);Oe(this,a,l,N,te-1,-te)}var _e=0,be=1,De=0;for(this[l]=255&a;++_e<N&&(be*=256);)a<0&&0===De&&0!==this[l+_e-1]&&(De=1),this[l+_e]=(a/be|0)-De&255;return l+N},p.prototype.writeIntBE=function(a,l,N,V){if(a=+a,l>>>=0,!V){var te=Math.pow(2,8*N-1);Oe(this,a,l,N,te-1,-te)}var _e=N-1,be=1,De=0;for(this[l+_e]=255&a;--_e>=0&&(be*=256);)a<0&&0===De&&0!==this[l+_e+1]&&(De=1),this[l+_e]=(a/be|0)-De&255;return l+N},p.prototype.writeInt8=function(a,l,N){return a=+a,l>>>=0,N||Oe(this,a,l,1,127,-128),a<0&&(a=255+a+1),this[l]=255&a,l+1},p.prototype.writeInt16LE=function(a,l,N){return a=+a,l>>>=0,N||Oe(this,a,l,2,32767,-32768),this[l]=255&a,this[l+1]=a>>>8,l+2},p.prototype.writeInt16BE=function(a,l,N){return a=+a,l>>>=0,N||Oe(this,a,l,2,32767,-32768),this[l]=a>>>8,this[l+1]=255&a,l+2},p.prototype.writeInt32LE=function(a,l,N){return a=+a,l>>>=0,N||Oe(this,a,l,4,2147483647,-2147483648),this[l]=255&a,this[l+1]=a>>>8,this[l+2]=a>>>16,this[l+3]=a>>>24,l+4},p.prototype.writeInt32BE=function(a,l,N){return a=+a,l>>>=0,N||Oe(this,a,l,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[l]=a>>>24,this[l+1]=a>>>16,this[l+2]=a>>>8,this[l+3]=255&a,l+4},p.prototype.writeFloatLE=function(a,l,N){return qe(this,a,l,!0,N)},p.prototype.writeFloatBE=function(a,l,N){return qe(this,a,l,!1,N)},p.prototype.writeDoubleLE=function(a,l,N){return Ie(this,a,l,!0,N)},p.prototype.writeDoubleBE=function(a,l,N){return Ie(this,a,l,!1,N)},p.prototype.copy=function(a,l,N,V){if(!p.isBuffer(a))throw new TypeError("argument should be a Buffer");if(N||(N=0),!V&&0!==V&&(V=this.length),l>=a.length&&(l=a.length),l||(l=0),V>0&&V<N&&(V=N),V===N||0===a.length||0===this.length)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(N<0||N>=this.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("sourceEnd out of bounds");V>this.length&&(V=this.length),a.length-l<V-N&&(V=a.length-l+N);var te=V-N;return this===a&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(l,N,V):Uint8Array.prototype.set.call(a,this.subarray(N,V),l),te},p.prototype.fill=function(a,l,N,V){if("string"==typeof a){if("string"==typeof l?(V=l,l=0,N=this.length):"string"==typeof N&&(V=N,N=this.length),void 0!==V&&"string"!=typeof V)throw new TypeError("encoding must be a string");if("string"==typeof V&&!p.isEncoding(V))throw new TypeError("Unknown encoding: "+V);if(1===a.length){var te=a.charCodeAt(0);("utf8"===V&&te<128||"latin1"===V)&&(a=te)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=Number(a));if(l<0||this.length<l||this.length<N)throw new RangeError("Out of range index");if(N<=l)return this;var _e;if(l>>>=0,N=void 0===N?this.length:N>>>0,a||(a=0),"number"==typeof a)for(_e=l;_e<N;++_e)this[_e]=a;else{var be=p.isBuffer(a)?a:p.from(a,V),De=be.length;if(0===De)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(_e=0;_e<N-l;++_e)this[_e+l]=be[_e%De]}return this};var At=/[^+/0-9A-Za-z-_]/g;function c(M,a){a=a||1/0;for(var l,N=M.length,V=null,te=[],_e=0;_e<N;++_e){if((l=M.charCodeAt(_e))>55295&&l<57344){if(!V){if(l>56319){(a-=3)>-1&&te.push(239,191,189);continue}if(_e+1===N){(a-=3)>-1&&te.push(239,191,189);continue}V=l;continue}if(l<56320){(a-=3)>-1&&te.push(239,191,189),V=l;continue}l=65536+(V-55296<<10|l-56320)}else V&&(a-=3)>-1&&te.push(239,191,189);if(V=null,l<128){if((a-=1)<0)break;te.push(l)}else if(l<2048){if((a-=2)<0)break;te.push(l>>6|192,63&l|128)}else if(l<65536){if((a-=3)<0)break;te.push(l>>12|224,l>>6&63|128,63&l|128)}else{if(!(l<1114112))throw new Error("Invalid code point");if((a-=4)<0)break;te.push(l>>18|240,l>>12&63|128,l>>6&63|128,63&l|128)}}return te}function ue(M){return R.toByteArray(function O(M){if((M=(M=M.split("=")[0]).trim().replace(At,"")).length<2)return"";for(;M.length%4!=0;)M+="=";return M}(M))}function Fe(M,a,l,N){for(var V=0;V<N&&!(V+l>=a.length||V>=M.length);++V)a[V+l]=M[V];return V}function A(M,a){return M instanceof a||null!=M&&null!=M.constructor&&null!=M.constructor.name&&M.constructor.name===a.name}function y(M){return M!=M}var Q=function(){for(var M="0123456789abcdef",a=new Array(256),l=0;l<16;++l)for(var N=16*l,V=0;V<16;++V)a[N+V]=M[l]+M[V];return a}()},51979:J=>{"use strict";var R,ee="object"==typeof Reflect?Reflect:null,g=ee&&"function"==typeof ee.apply?ee.apply:function(f,d,u){return Function.prototype.apply.call(f,d,u)};R=ee&&"function"==typeof ee.ownKeys?ee.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};var I=Number.isNaN||function(f){return f!=f};function b(){b.init.call(this)}J.exports=b,J.exports.once=function $(S,f){return new Promise(function(d,u){function E(C){S.removeListener(f,B),u(C)}function B(){"function"==typeof S.removeListener&&S.removeListener("error",E),d([].slice.call(arguments))}P(S,f,B,{once:!0}),"error"!==f&&function z(S,f,d){"function"==typeof S.on&&P(S,"error",f,d)}(S,E,{once:!0})})},b.EventEmitter=b,b.prototype._events=void 0,b.prototype._eventsCount=0,b.prototype._maxListeners=void 0;var j=10;function m(S){if("function"!=typeof S)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}function p(S){return void 0===S._maxListeners?b.defaultMaxListeners:S._maxListeners}function G(S,f,d,u){var E,B,C;if(m(d),void 0===(B=S._events)?(B=S._events=Object.create(null),S._eventsCount=0):(void 0!==B.newListener&&(S.emit("newListener",f,d.listener?d.listener:d),B=S._events),C=B[f]),void 0===C)C=B[f]=d,++S._eventsCount;else if("function"==typeof C?C=B[f]=u?[d,C]:[C,d]:u?C.unshift(d):C.push(d),(E=p(S))>0&&C.length>E&&!C.warned){C.warned=!0;var Z=new Error("Possible EventEmitter memory leak detected. "+C.length+" "+String(f)+" listeners added. Use emitter.setMaxListeners() to increase limit");Z.name="MaxListenersExceededWarning",Z.emitter=S,Z.type=f,Z.count=C.length,function r(S){console&&console.warn&&console.warn(S)}(Z)}return S}function W(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function L(S,f,d){var u={fired:!1,wrapFn:void 0,target:S,type:f,listener:d},E=W.bind(u);return E.listener=d,u.wrapFn=E,E}function Y(S,f,d){var u=S._events;if(void 0===u)return[];var E=u[f];return void 0===E?[]:"function"==typeof E?d?[E.listener||E]:[E]:d?function D(S){for(var f=new Array(S.length),d=0;d<f.length;++d)f[d]=S[d].listener||S[d];return f}(E):h(E,E.length)}function X(S){var f=this._events;if(void 0!==f){var d=f[S];if("function"==typeof d)return 1;if(void 0!==d)return d.length}return 0}function h(S,f){for(var d=new Array(f),u=0;u<f;++u)d[u]=S[u];return d}function P(S,f,d,u){if("function"==typeof S.on)u.once?S.once(f,d):S.on(f,d);else{if("function"!=typeof S.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S);S.addEventListener(f,function E(B){u.once&&S.removeEventListener(f,E),d(B)})}}Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return j},set:function(S){if("number"!=typeof S||S<0||I(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");j=S}}),b.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(f){if("number"!=typeof f||f<0||I(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+f+".");return this._maxListeners=f,this},b.prototype.getMaxListeners=function(){return p(this)},b.prototype.emit=function(f){for(var d=[],u=1;u<arguments.length;u++)d.push(arguments[u]);var E="error"===f,B=this._events;if(void 0!==B)E=E&&void 0===B.error;else if(!E)return!1;if(E){var C;if(d.length>0&&(C=d[0]),C instanceof Error)throw C;var Z=new Error("Unhandled error."+(C?" ("+C.message+")":""));throw Z.context=C,Z}var w=B[f];if(void 0===w)return!1;if("function"==typeof w)g(w,this,d);else{var K=w.length,ne=h(w,K);for(u=0;u<K;++u)g(ne[u],this,d)}return!0},b.prototype.on=b.prototype.addListener=function(f,d){return G(this,f,d,!1)},b.prototype.prependListener=function(f,d){return G(this,f,d,!0)},b.prototype.once=function(f,d){return m(d),this.on(f,L(this,f,d)),this},b.prototype.prependOnceListener=function(f,d){return m(d),this.prependListener(f,L(this,f,d)),this},b.prototype.off=b.prototype.removeListener=function(f,d){var u,E,B,C,Z;if(m(d),void 0===(E=this._events))return this;if(void 0===(u=E[f]))return this;if(u===d||u.listener===d)0==--this._eventsCount?this._events=Object.create(null):(delete E[f],E.removeListener&&this.emit("removeListener",f,u.listener||d));else if("function"!=typeof u){for(B=-1,C=u.length-1;C>=0;C--)if(u[C]===d||u[C].listener===d){Z=u[C].listener,B=C;break}if(B<0)return this;0===B?u.shift():function v(S,f){for(;f+1<S.length;f++)S[f]=S[f+1];S.pop()}(u,B),1===u.length&&(E[f]=u[0]),void 0!==E.removeListener&&this.emit("removeListener",f,Z||d)}return this},b.prototype.removeAllListeners=function(f){var d,u,E;if(void 0===(u=this._events))return this;if(void 0===u.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==u[f]&&(0==--this._eventsCount?this._events=Object.create(null):delete u[f]),this;if(0===arguments.length){var C,B=Object.keys(u);for(E=0;E<B.length;++E)"removeListener"!==(C=B[E])&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(d=u[f]))this.removeListener(f,d);else if(void 0!==d)for(E=d.length-1;E>=0;E--)this.removeListener(f,d[E]);return this},b.prototype.listeners=function(f){return Y(this,f,!0)},b.prototype.rawListeners=function(f){return Y(this,f,!1)},b.listenerCount=function(S,f){return"function"==typeof S.listenerCount?S.listenerCount(f):X.call(S,f)},b.prototype.listenerCount=X,b.prototype.eventNames=function(){return this._eventsCount>0?R(this._events):[]}},51270:J=>{J.exports="function"==typeof Object.create?function(g,R){R&&(g.super_=R,g.prototype=Object.create(R.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,R){if(R){g.super_=R;var r=function(){};r.prototype=R.prototype,g.prototype=new r,g.prototype.constructor=g}}},93716:J=>{"use strict";var g={};function R(m,p,G){G||(G=Error);var L=function(Y){function X(h,v,D){return Y.call(this,function W(Y,X,h){return"string"==typeof p?p:p(Y,X,h)}(h,v,D))||this}return function ee(m,p){m.prototype=Object.create(p.prototype),m.prototype.constructor=m,m.__proto__=p}(X,Y),X}(G);L.prototype.name=G.name,L.prototype.code=m,g[m]=L}function r(m,p){if(Array.isArray(m)){var G=m.length;return m=m.map(function(W){return String(W)}),G>2?"one of ".concat(p," ").concat(m.slice(0,G-1).join(", "),", or ")+m[G-1]:2===G?"one of ".concat(p," ").concat(m[0]," or ").concat(m[1]):"of ".concat(p," ").concat(m[0])}return"of ".concat(p," ").concat(String(m))}R("ERR_INVALID_OPT_VALUE",function(m,p){return'The value "'+p+'" is invalid for option "'+m+'"'},TypeError),R("ERR_INVALID_ARG_TYPE",function(m,p,G){var W,L;if("string"==typeof p&&function I(m,p,G){return m.substr(!G||G<0?0:+G,p.length)===p}(p,"not ")?(W="must not be",p=p.replace(/^not /,"")):W="must be",function b(m,p,G){return(void 0===G||G>m.length)&&(G=m.length),m.substring(G-p.length,G)===p}(m," argument"))L="The ".concat(m," ").concat(W," ").concat(r(p,"type"));else{var Y=function j(m,p,G){return"number"!=typeof G&&(G=0),!(G+p.length>m.length)&&-1!==m.indexOf(p,G)}(m,".")?"property":"argument";L='The "'.concat(m,'" ').concat(Y," ").concat(W," ").concat(r(p,"type"))}return L+". Received type ".concat(typeof G)},TypeError),R("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),R("ERR_METHOD_NOT_IMPLEMENTED",function(m){return"The "+m+" method is not implemented"}),R("ERR_STREAM_PREMATURE_CLOSE","Premature close"),R("ERR_STREAM_DESTROYED",function(m){return"Cannot call "+m+" after a stream was destroyed"}),R("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),R("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),R("ERR_STREAM_WRITE_AFTER_END","write after end"),R("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),R("ERR_UNKNOWN_ENCODING",function(m){return"Unknown encoding: "+m},TypeError),R("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),J.exports.F=g},17570:(J,ee,g)=>{"use strict";var R=Object.keys||function(L){var Y=[];for(var X in L)Y.push(X);return Y};J.exports=p;var r=g(6816),I=g(53888);g(51270)(p,r);for(var b=R(I.prototype),j=0;j<b.length;j++){var m=b[j];p.prototype[m]||(p.prototype[m]=I.prototype[m])}function p(L){if(!(this instanceof p))return new p(L);r.call(this,L),I.call(this,L),this.allowHalfOpen=!0,L&&(!1===L.readable&&(this.readable=!1),!1===L.writable&&(this.writable=!1),!1===L.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",G)))}function G(){this._writableState.ended||process.nextTick(W,this)}function W(L){L.end()}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(Y){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=Y,this._writableState.destroyed=Y)}})},56804:(J,ee,g)=>{"use strict";J.exports=r;var R=g(30062);function r(I){if(!(this instanceof r))return new r(I);R.call(this,I)}g(51270)(r,R),r.prototype._transform=function(I,b,j){j(null,I)}},6816:(J,ee,g)=>{"use strict";var R;J.exports=w,w.ReadableState=Z,g(51979);var L,I=function(y,Q){return y.listeners(Q).length},b=g(20637),j=g(47291).Buffer,m=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},W=g(79838);L=W&&W.debuglog?W.debuglog("stream"):function(){};var f,d,u,Y=g(37077),X=g(80620),v=g(46519).getHighWaterMark,D=g(93716).F,$=D.ERR_INVALID_ARG_TYPE,z=D.ERR_STREAM_PUSH_AFTER_EOF,P=D.ERR_METHOD_NOT_IMPLEMENTED,S=D.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;g(51270)(w,b);var E=X.errorOrDestroy,B=["error","close","destroy","pause","resume"];function Z(A,y,Q){R=R||g(17570),"boolean"!=typeof Q&&(Q=y instanceof R),this.objectMode=!!(A=A||{}).objectMode,Q&&(this.objectMode=this.objectMode||!!A.readableObjectMode),this.highWaterMark=v(this,A,"readableHighWaterMark",Q),this.buffer=new Y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==A.emitClose,this.autoDestroy=!!A.autoDestroy,this.destroyed=!1,this.defaultEncoding=A.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(f||(f=g(95697).I),this.decoder=new f(A.encoding),this.encoding=A.encoding)}function w(A){if(R=R||g(17570),!(this instanceof w))return new w(A);this._readableState=new Z(A,this,this instanceof R),this.readable=!0,A&&("function"==typeof A.read&&(this._read=A.read),"function"==typeof A.destroy&&(this._destroy=A.destroy)),b.call(this)}function K(A,y,Q,M,a){L("readableAddChunk",y);var N,l=A._readableState;if(null===y)l.reading=!1,function e(A,y){if(L("onEofChunk"),!y.ended){if(y.decoder){var Q=y.decoder.end();Q&&Q.length&&(y.buffer.push(Q),y.length+=y.objectMode?1:Q.length)}y.ended=!0,y.sync?ae(A):(y.needReadable=!1,y.emittedReadable||(y.emittedReadable=!0,We(A)))}}(A,l);else if(a||(N=function re(A,y){var Q;return!function G(A){return j.isBuffer(A)||A instanceof m}(y)&&"string"!=typeof y&&void 0!==y&&!A.objectMode&&(Q=new $("chunk",["string","Buffer","Uint8Array"],y)),Q}(l,y)),N)E(A,N);else if(l.objectMode||y&&y.length>0)if("string"!=typeof y&&!l.objectMode&&Object.getPrototypeOf(y)!==j.prototype&&(y=function p(A){return j.from(A)}(y)),M)l.endEmitted?E(A,new S):ne(A,l,y,!0);else if(l.ended)E(A,new z);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!Q?(y=l.decoder.write(y),l.objectMode||0!==y.length?ne(A,l,y,!1):Ae(A,l)):ne(A,l,y,!1)}else M||(l.reading=!1,Ae(A,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function ne(A,y,Q,M){y.flowing&&0===y.length&&!y.sync?(y.awaitDrain=0,A.emit("data",Q)):(y.length+=y.objectMode?1:Q.length,M?y.buffer.unshift(Q):y.buffer.push(Q),y.needReadable&&ae(A)),Ae(A,y)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(y){this._readableState&&(this._readableState.destroyed=y)}}),w.prototype.destroy=X.destroy,w.prototype._undestroy=X.undestroy,w.prototype._destroy=function(A,y){y(A)},w.prototype.push=function(A,y){var M,Q=this._readableState;return Q.objectMode?M=!0:"string"==typeof A&&((y=y||Q.defaultEncoding)!==Q.encoding&&(A=j.from(A,y),y=""),M=!0),K(this,A,y,!1,M)},w.prototype.unshift=function(A){return K(this,A,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(A){f||(f=g(95697).I);var y=new f(A);this._readableState.decoder=y,this._readableState.encoding=this._readableState.decoder.encoding;for(var Q=this._readableState.buffer.head,M="";null!==Q;)M+=y.write(Q.data),Q=Q.next;return this._readableState.buffer.clear(),""!==M&&this._readableState.buffer.push(M),this._readableState.length=M.length,this};var Se=1073741824;function ge(A,y){return A<=0||0===y.length&&y.ended?0:y.objectMode?1:A!=A?y.flowing&&y.length?y.buffer.head.data.length:y.length:(A>y.highWaterMark&&(y.highWaterMark=function Pe(A){return A>=Se?A=Se:(A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++),A}(A)),A<=y.length?A:y.ended?y.length:(y.needReadable=!0,0))}function ae(A){var y=A._readableState;L("emitReadable",y.needReadable,y.emittedReadable),y.needReadable=!1,y.emittedReadable||(L("emitReadable",y.flowing),y.emittedReadable=!0,process.nextTick(We,A))}function We(A){var y=A._readableState;L("emitReadable_",y.destroyed,y.length,y.ended),!y.destroyed&&(y.length||y.ended)&&(A.emit("readable"),y.emittedReadable=!1),y.needReadable=!y.flowing&&!y.ended&&y.length<=y.highWaterMark,c(A)}function Ae(A,y){y.readingMore||(y.readingMore=!0,process.nextTick(Oe,A,y))}function Oe(A,y){for(;!y.reading&&!y.ended&&(y.length<y.highWaterMark||y.flowing&&0===y.length);){var Q=y.length;if(L("maybeReadMore read 0"),A.read(0),Q===y.length)break}y.readingMore=!1}function qe(A){var y=A._readableState;y.readableListening=A.listenerCount("readable")>0,y.resumeScheduled&&!y.paused?y.flowing=!0:A.listenerCount("data")>0&&A.resume()}function Ie(A){L("readable nexttick read 0"),A.read(0)}function O(A,y){L("resume",y.reading),y.reading||A.read(0),y.resumeScheduled=!1,A.emit("resume"),c(A),y.flowing&&!y.reading&&A.read(0)}function c(A){var y=A._readableState;for(L("flow",y.flowing);y.flowing&&null!==A.read(););}function U(A,y){return 0===y.length?null:(y.objectMode?Q=y.buffer.shift():!A||A>=y.length?(Q=y.decoder?y.buffer.join(""):1===y.buffer.length?y.buffer.first():y.buffer.concat(y.length),y.buffer.clear()):Q=y.buffer.consume(A,y.decoder),Q);var Q}function x(A){var y=A._readableState;L("endReadable",y.endEmitted),y.endEmitted||(y.ended=!0,process.nextTick(ue,y,A))}function ue(A,y){if(L("endReadableNT",A.endEmitted,A.length),!A.endEmitted&&0===A.length&&(A.endEmitted=!0,y.readable=!1,y.emit("end"),A.autoDestroy)){var Q=y._writableState;(!Q||Q.autoDestroy&&Q.finished)&&y.destroy()}}function Fe(A,y){for(var Q=0,M=A.length;Q<M;Q++)if(A[Q]===y)return Q;return-1}w.prototype.read=function(A){L("read",A),A=parseInt(A,10);var y=this._readableState,Q=A;if(0!==A&&(y.emittedReadable=!1),0===A&&y.needReadable&&((0!==y.highWaterMark?y.length>=y.highWaterMark:y.length>0)||y.ended))return L("read: emitReadable",y.length,y.ended),0===y.length&&y.ended?x(this):ae(this),null;if(0===(A=ge(A,y))&&y.ended)return 0===y.length&&x(this),null;var a,M=y.needReadable;return L("need readable",M),(0===y.length||y.length-A<y.highWaterMark)&&L("length less than watermark",M=!0),y.ended||y.reading?L("reading or ended",M=!1):M&&(L("do read"),y.reading=!0,y.sync=!0,0===y.length&&(y.needReadable=!0),this._read(y.highWaterMark),y.sync=!1,y.reading||(A=ge(Q,y))),null===(a=A>0?U(A,y):null)?(y.needReadable=y.length<=y.highWaterMark,A=0):(y.length-=A,y.awaitDrain=0),0===y.length&&(y.ended||(y.needReadable=!0),Q!==A&&y.ended&&x(this)),null!==a&&this.emit("data",a),a},w.prototype._read=function(A){E(this,new P("_read()"))},w.prototype.pipe=function(A,y){var Q=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=A;break;case 1:M.pipes=[M.pipes,A];break;default:M.pipes.push(A)}M.pipesCount+=1,L("pipe count=%d opts=%j",M.pipesCount,y);var l=y&&!1===y.end||A===process.stdout||A===process.stderr?Rt:V;function V(){L("onend"),A.end()}M.endEmitted?process.nextTick(l):Q.once("end",l),A.on("unpipe",function N(Ft,Ct){L("onunpipe"),Ft===Q&&Ct&&!1===Ct.hasUnpiped&&(Ct.hasUnpiped=!0,function be(){L("cleanup"),A.removeListener("close",Ke),A.removeListener("finish",Be),A.removeListener("drain",te),A.removeListener("error",je),A.removeListener("unpipe",N),Q.removeListener("end",V),Q.removeListener("end",Rt),Q.removeListener("data",De),_e=!0,M.awaitDrain&&(!A._writableState||A._writableState.needDrain)&&te()}())});var te=function Xe(A){return function(){var Q=A._readableState;L("pipeOnDrain",Q.awaitDrain),Q.awaitDrain&&Q.awaitDrain--,0===Q.awaitDrain&&I(A,"data")&&(Q.flowing=!0,c(A))}}(Q);A.on("drain",te);var _e=!1;function De(Ft){L("ondata");var Ct=A.write(Ft);L("dest.write",Ct),!1===Ct&&((1===M.pipesCount&&M.pipes===A||M.pipesCount>1&&-1!==Fe(M.pipes,A))&&!_e&&(L("false write response, pause",M.awaitDrain),M.awaitDrain++),Q.pause())}function je(Ft){L("onerror",Ft),Rt(),A.removeListener("error",je),0===I(A,"error")&&E(A,Ft)}function Ke(){A.removeListener("finish",Be),Rt()}function Be(){L("onfinish"),A.removeListener("close",Ke),Rt()}function Rt(){L("unpipe"),Q.unpipe(A)}return Q.on("data",De),function C(A,y,Q){if("function"==typeof A.prependListener)return A.prependListener(y,Q);A._events&&A._events[y]?Array.isArray(A._events[y])?A._events[y].unshift(Q):A._events[y]=[Q,A._events[y]]:A.on(y,Q)}(A,"error",je),A.once("close",Ke),A.once("finish",Be),A.emit("pipe",Q),M.flowing||(L("pipe resume"),Q.resume()),A},w.prototype.unpipe=function(A){var y=this._readableState,Q={hasUnpiped:!1};if(0===y.pipesCount)return this;if(1===y.pipesCount)return A&&A!==y.pipes||(A||(A=y.pipes),y.pipes=null,y.pipesCount=0,y.flowing=!1,A&&A.emit("unpipe",this,Q)),this;if(!A){var M=y.pipes,a=y.pipesCount;y.pipes=null,y.pipesCount=0,y.flowing=!1;for(var l=0;l<a;l++)M[l].emit("unpipe",this,{hasUnpiped:!1});return this}var N=Fe(y.pipes,A);return-1===N||(y.pipes.splice(N,1),y.pipesCount-=1,1===y.pipesCount&&(y.pipes=y.pipes[0]),A.emit("unpipe",this,Q)),this},w.prototype.addListener=w.prototype.on=function(A,y){var Q=b.prototype.on.call(this,A,y),M=this._readableState;return"data"===A?(M.readableListening=this.listenerCount("readable")>0,!1!==M.flowing&&this.resume()):"readable"===A&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,L("on readable",M.length,M.reading),M.length?ae(this):M.reading||process.nextTick(Ie,this)),Q},w.prototype.removeListener=function(A,y){var Q=b.prototype.removeListener.call(this,A,y);return"readable"===A&&process.nextTick(qe,this),Q},w.prototype.removeAllListeners=function(A){var y=b.prototype.removeAllListeners.apply(this,arguments);return("readable"===A||void 0===A)&&process.nextTick(qe,this),y},w.prototype.resume=function(){var A=this._readableState;return A.flowing||(L("resume"),A.flowing=!A.readableListening,function At(A,y){y.resumeScheduled||(y.resumeScheduled=!0,process.nextTick(O,A,y))}(this,A)),A.paused=!1,this},w.prototype.pause=function(){return L("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(L("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(A){var y=this,Q=this._readableState,M=!1;for(var a in A.on("end",function(){if(L("wrapped end"),Q.decoder&&!Q.ended){var N=Q.decoder.end();N&&N.length&&y.push(N)}y.push(null)}),A.on("data",function(N){L("wrapped data"),Q.decoder&&(N=Q.decoder.write(N)),Q.objectMode&&null==N||!(Q.objectMode||N&&N.length)||y.push(N)||(M=!0,A.pause())}),A)void 0===this[a]&&"function"==typeof A[a]&&(this[a]=function(V){return function(){return A[V].apply(A,arguments)}}(a));for(var l=0;l<B.length;l++)A.on(B[l],this.emit.bind(this,B[l]));return this._read=function(N){L("wrapped _read",N),M&&(M=!1,A.resume())},this},"function"==typeof Symbol&&(w.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=g(11495)),d(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(y){this._readableState&&(this._readableState.flowing=y)}}),w._fromList=U,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(w.from=function(A,y){return void 0===u&&(u=g(39689)),u(w,A,y)})},30062:(J,ee,g)=>{"use strict";J.exports=G;var R=g(93716).F,r=R.ERR_METHOD_NOT_IMPLEMENTED,I=R.ERR_MULTIPLE_CALLBACK,b=R.ERR_TRANSFORM_ALREADY_TRANSFORMING,j=R.ERR_TRANSFORM_WITH_LENGTH_0,m=g(17570);function p(Y,X){var h=this._transformState;h.transforming=!1;var v=h.writecb;if(null===v)return this.emit("error",new I);h.writechunk=null,h.writecb=null,null!=X&&this.push(X),v(Y);var D=this._readableState;D.reading=!1,(D.needReadable||D.length<D.highWaterMark)&&this._read(D.highWaterMark)}function G(Y){if(!(this instanceof G))return new G(Y);m.call(this,Y),this._transformState={afterTransform:p.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,Y&&("function"==typeof Y.transform&&(this._transform=Y.transform),"function"==typeof Y.flush&&(this._flush=Y.flush)),this.on("prefinish",W)}function W(){var Y=this;"function"!=typeof this._flush||this._readableState.destroyed?L(this,null,null):this._flush(function(X,h){L(Y,X,h)})}function L(Y,X,h){if(X)return Y.emit("error",X);if(null!=h&&Y.push(h),Y._writableState.length)throw new j;if(Y._transformState.transforming)throw new b;return Y.push(null)}g(51270)(G,m),G.prototype.push=function(Y,X){return this._transformState.needTransform=!1,m.prototype.push.call(this,Y,X)},G.prototype._transform=function(Y,X,h){h(new r("_transform()"))},G.prototype._write=function(Y,X,h){var v=this._transformState;if(v.writecb=h,v.writechunk=Y,v.writeencoding=X,!v.transforming){var D=this._readableState;(v.needTransform||D.needReadable||D.length<D.highWaterMark)&&this._read(D.highWaterMark)}},G.prototype._read=function(Y){var X=this._transformState;null===X.writechunk||X.transforming?X.needTransform=!0:(X.transforming=!0,this._transform(X.writechunk,X.writeencoding,X.afterTransform))},G.prototype._destroy=function(Y,X){m.prototype._destroy.call(this,Y,function(h){X(h)})}},53888:(J,ee,g)=>{"use strict";function r(c){var U=this;this.next=null,this.entry=null,this.finish=function(){!function O(c,U,x){var ue=c.entry;for(c.entry=null;ue;){var Fe=ue.callback;U.pendingcb--,Fe(x),ue=ue.next}U.corkedRequestsFree.next=c}(U,c)}}var I;J.exports=Z,Z.WritableState=B;var C,b={deprecate:g(4279)},j=g(20637),m=g(47291).Buffer,p=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},L=g(80620),X=g(46519).getHighWaterMark,h=g(93716).F,v=h.ERR_INVALID_ARG_TYPE,D=h.ERR_METHOD_NOT_IMPLEMENTED,$=h.ERR_MULTIPLE_CALLBACK,z=h.ERR_STREAM_CANNOT_PIPE,P=h.ERR_STREAM_DESTROYED,S=h.ERR_STREAM_NULL_VALUES,f=h.ERR_STREAM_WRITE_AFTER_END,d=h.ERR_UNKNOWN_ENCODING,u=L.errorOrDestroy;function E(){}function B(c,U,x){I=I||g(17570),"boolean"!=typeof x&&(x=U instanceof I),this.objectMode=!!(c=c||{}).objectMode,x&&(this.objectMode=this.objectMode||!!c.writableObjectMode),this.highWaterMark=X(this,c,"writableHighWaterMark",x),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===c.decodeStrings),this.defaultEncoding=c.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Fe){!function e(c,U){var x=c._writableState,ue=x.sync,Fe=x.writecb;if("function"!=typeof Fe)throw new $;if(function ge(c){c.writing=!1,c.writecb=null,c.length-=c.writelen,c.writelen=0}(x),U)!function Pe(c,U,x,ue,Fe){--U.pendingcb,x?(process.nextTick(Fe,ue),process.nextTick(Ie,c,U),c._writableState.errorEmitted=!0,u(c,ue)):(Fe(ue),c._writableState.errorEmitted=!0,u(c,ue),Ie(c,U))}(c,x,ue,U,Fe);else{var A=Oe(x)||c.destroyed;!A&&!x.corked&&!x.bufferProcessing&&x.bufferedRequest&&Ae(c,x),ue?process.nextTick(ae,c,x,A,Fe):ae(c,x,A,Fe)}}(U,Fe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==c.emitClose,this.autoDestroy=!!c.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function Z(c){var U=this instanceof(I=I||g(17570));if(!U&&!C.call(Z,this))return new Z(c);this._writableState=new B(c,this,U),this.writable=!0,c&&("function"==typeof c.write&&(this._write=c.write),"function"==typeof c.writev&&(this._writev=c.writev),"function"==typeof c.destroy&&(this._destroy=c.destroy),"function"==typeof c.final&&(this._final=c.final)),j.call(this)}function Se(c,U,x,ue,Fe,A,y){U.writelen=ue,U.writecb=y,U.writing=!0,U.sync=!0,U.destroyed?U.onwrite(new P("write")):x?c._writev(Fe,U.onwrite):c._write(Fe,A,U.onwrite),U.sync=!1}function ae(c,U,x,ue){x||function We(c,U){0===U.length&&U.needDrain&&(U.needDrain=!1,c.emit("drain"))}(c,U),U.pendingcb--,ue(),Ie(c,U)}function Ae(c,U){U.bufferProcessing=!0;var x=U.bufferedRequest;if(c._writev&&x&&x.next){var Fe=new Array(U.bufferedRequestCount),A=U.corkedRequestsFree;A.entry=x;for(var y=0,Q=!0;x;)Fe[y]=x,x.isBuf||(Q=!1),x=x.next,y+=1;Fe.allBuffers=Q,Se(c,U,!0,U.length,Fe,"",A.finish),U.pendingcb++,U.lastBufferedRequest=null,A.next?(U.corkedRequestsFree=A.next,A.next=null):U.corkedRequestsFree=new r(U),U.bufferedRequestCount=0}else{for(;x;){var M=x.chunk;if(Se(c,U,!1,U.objectMode?1:M.length,M,x.encoding,x.callback),x=x.next,U.bufferedRequestCount--,U.writing)break}null===x&&(U.lastBufferedRequest=null)}U.bufferedRequest=x,U.bufferProcessing=!1}function Oe(c){return c.ending&&0===c.length&&null===c.bufferedRequest&&!c.finished&&!c.writing}function Xe(c,U){c._final(function(x){U.pendingcb--,x&&u(c,x),U.prefinished=!0,c.emit("prefinish"),Ie(c,U)})}function Ie(c,U){var x=Oe(U);if(x&&(function qe(c,U){!U.prefinished&&!U.finalCalled&&("function"!=typeof c._final||U.destroyed?(U.prefinished=!0,c.emit("prefinish")):(U.pendingcb++,U.finalCalled=!0,process.nextTick(Xe,c,U)))}(c,U),0===U.pendingcb&&(U.finished=!0,c.emit("finish"),U.autoDestroy))){var ue=c._readableState;(!ue||ue.autoDestroy&&ue.endEmitted)&&c.destroy()}return x}g(51270)(Z,j),B.prototype.getBuffer=function(){for(var U=this.bufferedRequest,x=[];U;)x.push(U),U=U.next;return x},function(){try{Object.defineProperty(B.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(C=Function.prototype[Symbol.hasInstance],Object.defineProperty(Z,Symbol.hasInstance,{value:function(U){return!!C.call(this,U)||this===Z&&U&&U._writableState instanceof B}})):C=function(U){return U instanceof this},Z.prototype.pipe=function(){u(this,new z)},Z.prototype.write=function(c,U,x){var ue=this._writableState,Fe=!1,A=!ue.objectMode&&function W(c){return m.isBuffer(c)||c instanceof p}(c);return A&&!m.isBuffer(c)&&(c=function G(c){return m.from(c)}(c)),"function"==typeof U&&(x=U,U=null),A?U="buffer":U||(U=ue.defaultEncoding),"function"!=typeof x&&(x=E),ue.ending?function w(c,U){var x=new f;u(c,x),process.nextTick(U,x)}(this,x):(A||function K(c,U,x,ue){var Fe;return null===x?Fe=new S:"string"!=typeof x&&!U.objectMode&&(Fe=new v("chunk",["string","Buffer"],x)),!Fe||(u(c,Fe),process.nextTick(ue,Fe),!1)}(this,ue,c,x))&&(ue.pendingcb++,Fe=function re(c,U,x,ue,Fe,A){if(!x){var y=function ne(c,U,x){return!c.objectMode&&!1!==c.decodeStrings&&"string"==typeof U&&(U=m.from(U,x)),U}(U,ue,Fe);ue!==y&&(x=!0,Fe="buffer",ue=y)}var Q=U.objectMode?1:ue.length;U.length+=Q;var M=U.length<U.highWaterMark;if(M||(U.needDrain=!0),U.writing||U.corked){var a=U.lastBufferedRequest;U.lastBufferedRequest={chunk:ue,encoding:Fe,isBuf:x,callback:A,next:null},a?a.next=U.lastBufferedRequest:U.bufferedRequest=U.lastBufferedRequest,U.bufferedRequestCount+=1}else Se(c,U,!1,Q,ue,Fe,A);return M}(this,ue,A,c,U,x)),Fe},Z.prototype.cork=function(){this._writableState.corked++},Z.prototype.uncork=function(){var c=this._writableState;c.corked&&(c.corked--,!c.writing&&!c.corked&&!c.bufferProcessing&&c.bufferedRequest&&Ae(this,c))},Z.prototype.setDefaultEncoding=function(U){if("string"==typeof U&&(U=U.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((U+"").toLowerCase())>-1))throw new d(U);return this._writableState.defaultEncoding=U,this},Object.defineProperty(Z.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Z.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Z.prototype._write=function(c,U,x){x(new D("_write()"))},Z.prototype._writev=null,Z.prototype.end=function(c,U,x){var ue=this._writableState;return"function"==typeof c?(x=c,c=null,U=null):"function"==typeof U&&(x=U,U=null),null!=c&&this.write(c,U),ue.corked&&(ue.corked=1,this.uncork()),ue.ending||function At(c,U,x){U.ending=!0,Ie(c,U),x&&(U.finished?process.nextTick(x):c.once("finish",x)),U.ended=!0,c.writable=!1}(this,ue,x),this},Object.defineProperty(Z.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Z.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(U){this._writableState&&(this._writableState.destroyed=U)}}),Z.prototype.destroy=L.destroy,Z.prototype._undestroy=L.undestroy,Z.prototype._destroy=function(c,U){U(c)}},11495:(J,ee,g)=>{"use strict";var R;function r(f,d,u){return d=function I(f){var d=function b(f,d){if("object"!=typeof f||null===f)return f;var u=f[Symbol.toPrimitive];if(void 0!==u){var E=u.call(f,d||"default");if("object"!=typeof E)return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===d?String:Number)(f)}(f,"string");return"symbol"==typeof d?d:String(d)}(d),d in f?Object.defineProperty(f,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):f[d]=u,f}var j=g(3602),m=Symbol("lastResolve"),p=Symbol("lastReject"),G=Symbol("error"),W=Symbol("ended"),L=Symbol("lastPromise"),Y=Symbol("handlePromise"),X=Symbol("stream");function h(f,d){return{value:f,done:d}}function v(f){var d=f[m];if(null!==d){var u=f[X].read();null!==u&&(f[L]=null,f[m]=null,f[p]=null,d(h(u,!1)))}}function D(f){process.nextTick(v,f)}var z=Object.getPrototypeOf(function(){}),P=Object.setPrototypeOf((r(R={get stream(){return this[X]},next:function(){var d=this,u=this[G];if(null!==u)return Promise.reject(u);if(this[W])return Promise.resolve(h(void 0,!0));if(this[X].destroyed)return new Promise(function(Z,w){process.nextTick(function(){d[G]?w(d[G]):Z(h(void 0,!0))})});var B,E=this[L];if(E)B=new Promise(function $(f,d){return function(u,E){f.then(function(){d[W]?u(h(void 0,!0)):d[Y](u,E)},E)}}(E,this));else{var C=this[X].read();if(null!==C)return Promise.resolve(h(C,!1));B=new Promise(this[Y])}return this[L]=B,B}},Symbol.asyncIterator,function(){return this}),r(R,"return",function(){var d=this;return new Promise(function(u,E){d[X].destroy(null,function(B){B?E(B):u(h(void 0,!0))})})}),R),z);J.exports=function(d){var u,E=Object.create(P,(r(u={},X,{value:d,writable:!0}),r(u,m,{value:null,writable:!0}),r(u,p,{value:null,writable:!0}),r(u,G,{value:null,writable:!0}),r(u,W,{value:d._readableState.endEmitted,writable:!0}),r(u,Y,{value:function(C,Z){var w=E[X].read();w?(E[L]=null,E[m]=null,E[p]=null,C(h(w,!1))):(E[m]=C,E[p]=Z)},writable:!0}),u));return E[L]=null,j(d,function(B){if(B&&"ERR_STREAM_PREMATURE_CLOSE"!==B.code){var C=E[p];return null!==C&&(E[L]=null,E[m]=null,E[p]=null,C(B)),void(E[G]=B)}var Z=E[m];null!==Z&&(E[L]=null,E[m]=null,E[p]=null,Z(h(void 0,!0))),E[W]=!0}),d.on("readable",D.bind(null,E)),E}},37077:(J,ee,g)=>{"use strict";function R(D,$){var z=Object.keys(D);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(D);$&&(P=P.filter(function(S){return Object.getOwnPropertyDescriptor(D,S).enumerable})),z.push.apply(z,P)}return z}function r(D){for(var $=1;$<arguments.length;$++){var z=null!=arguments[$]?arguments[$]:{};$%2?R(Object(z),!0).forEach(function(P){I(D,P,z[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(z)):R(Object(z)).forEach(function(P){Object.defineProperty(D,P,Object.getOwnPropertyDescriptor(z,P))})}return D}function I(D,$,z){return($=p($))in D?Object.defineProperty(D,$,{value:z,enumerable:!0,configurable:!0,writable:!0}):D[$]=z,D}function j(D,$){for(var z=0;z<$.length;z++){var P=$[z];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(D,p(P.key),P)}}function p(D){var $=function G(D,$){if("object"!=typeof D||null===D)return D;var z=D[Symbol.toPrimitive];if(void 0!==z){var P=z.call(D,$||"default");if("object"!=typeof P)return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===$?String:Number)(D)}(D,"string");return"symbol"==typeof $?$:String($)}var L=g(47291).Buffer,X=g(15340).inspect,h=X&&X.custom||"inspect";function v(D,$,z){L.prototype.copy.call(D,$,z)}J.exports=function(){function D(){(function b(D,$){if(!(D instanceof $))throw new TypeError("Cannot call a class as a function")})(this,D),this.head=null,this.tail=null,this.length=0}return function m(D,$,z){$&&j(D.prototype,$),z&&j(D,z),Object.defineProperty(D,"prototype",{writable:!1})}(D,[{key:"push",value:function(z){var P={data:z,next:null};this.length>0?this.tail.next=P:this.head=P,this.tail=P,++this.length}},{key:"unshift",value:function(z){var P={data:z,next:this.head};0===this.length&&(this.tail=P),this.head=P,++this.length}},{key:"shift",value:function(){if(0!==this.length){var z=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,z}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(z){if(0===this.length)return"";for(var P=this.head,S=""+P.data;P=P.next;)S+=z+P.data;return S}},{key:"concat",value:function(z){if(0===this.length)return L.alloc(0);for(var P=L.allocUnsafe(z>>>0),S=this.head,f=0;S;)v(S.data,P,f),f+=S.data.length,S=S.next;return P}},{key:"consume",value:function(z,P){var S;return z<this.head.data.length?(S=this.head.data.slice(0,z),this.head.data=this.head.data.slice(z)):S=z===this.head.data.length?this.shift():P?this._getString(z):this._getBuffer(z),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(z){var P=this.head,S=1,f=P.data;for(z-=f.length;P=P.next;){var d=P.data,u=z>d.length?d.length:z;if(f+=u===d.length?d:d.slice(0,z),0==(z-=u)){u===d.length?(++S,this.head=P.next?P.next:this.tail=null):(this.head=P,P.data=d.slice(u));break}++S}return this.length-=S,f}},{key:"_getBuffer",value:function(z){var P=L.allocUnsafe(z),S=this.head,f=1;for(S.data.copy(P),z-=S.data.length;S=S.next;){var d=S.data,u=z>d.length?d.length:z;if(d.copy(P,P.length-z,0,u),0==(z-=u)){u===d.length?(++f,this.head=S.next?S.next:this.tail=null):(this.head=S,S.data=d.slice(u));break}++f}return this.length-=f,P}},{key:h,value:function(z,P){return X(this,r(r({},P),{},{depth:0,customInspect:!1}))}}]),D}()},80620:J=>{"use strict";function g(j,m){I(j,m),R(j)}function R(j){j._writableState&&!j._writableState.emitClose||j._readableState&&!j._readableState.emitClose||j.emit("close")}function I(j,m){j.emit("error",m)}J.exports={destroy:function ee(j,m){var p=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(m?m(j):j&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(I,this,j)):process.nextTick(I,this,j)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(j||null,function(L){!m&&L?p._writableState?p._writableState.errorEmitted?process.nextTick(R,p):(p._writableState.errorEmitted=!0,process.nextTick(g,p,L)):process.nextTick(g,p,L):m?(process.nextTick(R,p),m(L)):process.nextTick(R,p)}),this)},undestroy:function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function b(j,m){var p=j._readableState,G=j._writableState;p&&p.autoDestroy||G&&G.autoDestroy?j.destroy(m):j.emit("error",m)}}},3602:(J,ee,g)=>{"use strict";var R=g(93716).F.ERR_STREAM_PREMATURE_CLOSE;function I(){}J.exports=function j(m,p,G){if("function"==typeof p)return j(m,null,p);p||(p={}),G=function r(m){var p=!1;return function(){if(!p){p=!0;for(var G=arguments.length,W=new Array(G),L=0;L<G;L++)W[L]=arguments[L];m.apply(this,W)}}}(G||I);var W=p.readable||!1!==p.readable&&m.readable,L=p.writable||!1!==p.writable&&m.writable,Y=function(){m.writable||h()},X=m._writableState&&m._writableState.finished,h=function(){L=!1,X=!0,W||G.call(m)},v=m._readableState&&m._readableState.endEmitted,D=function(){W=!1,v=!0,L||G.call(m)},$=function(f){G.call(m,f)},z=function(){var f;return W&&!v?((!m._readableState||!m._readableState.ended)&&(f=new R),G.call(m,f)):L&&!X?((!m._writableState||!m._writableState.ended)&&(f=new R),G.call(m,f)):void 0},P=function(){m.req.on("finish",h)};return function b(m){return m.setHeader&&"function"==typeof m.abort}(m)?(m.on("complete",h),m.on("abort",z),m.req?P():m.on("request",P)):L&&!m._writableState&&(m.on("end",Y),m.on("close",Y)),m.on("end",D),m.on("finish",h),!1!==p.error&&m.on("error",$),m.on("close",z),function(){m.removeListener("complete",h),m.removeListener("abort",z),m.removeListener("request",P),m.req&&m.req.removeListener("finish",h),m.removeListener("end",Y),m.removeListener("close",Y),m.removeListener("finish",h),m.removeListener("end",D),m.removeListener("error",$),m.removeListener("close",z)}}},39689:J=>{J.exports=function(){throw new Error("Readable.from is not available in the browser")}},35754:(J,ee,g)=>{"use strict";var R,I=g(93716).F,b=I.ERR_MISSING_ARGS,j=I.ERR_STREAM_DESTROYED;function m(h){if(h)throw h}function W(h){h()}function L(h,v){return h.pipe(v)}J.exports=function X(){for(var h=arguments.length,v=new Array(h),D=0;D<h;D++)v[D]=arguments[D];var $=function Y(h){return h.length&&"function"==typeof h[h.length-1]?h.pop():m}(v);if(Array.isArray(v[0])&&(v=v[0]),v.length<2)throw new b("streams");var z,P=v.map(function(S,f){var d=f<v.length-1;return function G(h,v,D,$){$=function r(h){var v=!1;return function(){v||(v=!0,h.apply(void 0,arguments))}}($);var z=!1;h.on("close",function(){z=!0}),void 0===R&&(R=g(3602)),R(h,{readable:v,writable:D},function(S){if(S)return $(S);z=!0,$()});var P=!1;return function(S){if(!z&&!P){if(P=!0,function p(h){return h.setHeader&&"function"==typeof h.abort}(h))return h.abort();if("function"==typeof h.destroy)return h.destroy();$(S||new j("pipe"))}}}(S,d,f>0,function(E){z||(z=E),E&&P.forEach(W),!d&&(P.forEach(W),$(z))})});return v.reduce(L)}},46519:(J,ee,g)=>{"use strict";var R=g(93716).F.ERR_INVALID_OPT_VALUE;J.exports={getHighWaterMark:function I(b,j,m,p){var G=function r(b,j,m){return null!=b.highWaterMark?b.highWaterMark:j?b[m]:null}(j,p,m);if(null!=G){if(!isFinite(G)||Math.floor(G)!==G||G<0)throw new R(p?m:"highWaterMark",G);return Math.floor(G)}return b.objectMode?16:16384}}},20637:(J,ee,g)=>{J.exports=g(51979).EventEmitter},38809:(J,ee,g)=>{var R=g(47291),r=R.Buffer;function I(j,m){for(var p in j)m[p]=j[p]}function b(j,m,p){return r(j,m,p)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?J.exports=R:(I(R,ee),ee.Buffer=b),b.prototype=Object.create(r.prototype),I(r,b),b.from=function(j,m,p){if("number"==typeof j)throw new TypeError("Argument must not be a number");return r(j,m,p)},b.alloc=function(j,m,p){if("number"!=typeof j)throw new TypeError("Argument must be a number");var G=r(j);return void 0!==m?"string"==typeof p?G.fill(m,p):G.fill(m):G.fill(0),G},b.allocUnsafe=function(j){if("number"!=typeof j)throw new TypeError("Argument must be a number");return r(j)},b.allocUnsafeSlow=function(j){if("number"!=typeof j)throw new TypeError("Argument must be a number");return R.SlowBuffer(j)}},10583:(J,ee,g)=>{!function(R){R.parser=function(O,c){return new I(O,c)},R.SAXParser=I,R.SAXStream=L,R.createStream=function W(O,c){return new L(O,c)},R.MAX_BUFFER_LENGTH=65536;var p,r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function I(O,c){if(!(this instanceof I))return new I(O,c);var U=this;(function j(O){for(var c=0,U=r.length;c<U;c++)O[r[c]]=""})(U),U.q=U.c="",U.bufferCheckPosition=R.MAX_BUFFER_LENGTH,U.opt=c||{},U.opt.lowercase=U.opt.lowercase||U.opt.lowercasetags,U.looseCase=U.opt.lowercase?"toLowerCase":"toUpperCase",U.tags=[],U.closed=U.closedRoot=U.sawRoot=!1,U.tag=U.error=null,U.strict=!!O,U.noscript=!(!O&&!U.opt.noscript),U.state=C.BEGIN,U.strictEntities=U.opt.strictEntities,U.ENTITIES=Object.create(U.strictEntities?R.XML_ENTITIES:R.ENTITIES),U.attribList=[],U.opt.xmlns&&(U.ns=Object.create(D)),U.trackPosition=!1!==U.opt.position,U.trackPosition&&(U.position=U.line=U.column=0),w(U,"onready")}R.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(O){function c(){}return c.prototype=O,new c}),Object.keys||(Object.keys=function(O){var c=[];for(var U in O)O.hasOwnProperty(U)&&c.push(U);return c}),I.prototype={end:function(){Pe(this)},write:function At(O){var c=this;if(this.error)throw this.error;if(c.closed)return Se(c,"Cannot write after close. Assign an onready handler.");if(null===O)return Pe(c);"object"==typeof O&&(O=O.toString());for(var U=0,x="";x=Ie(O,U++),c.c=x,x;)switch(c.trackPosition&&(c.position++,"\n"===x?(c.line++,c.column=0):c.column++),c.state){case C.BEGIN:if(c.state=C.BEGIN_WHITESPACE,"\ufeff"===x)continue;qe(c,x);continue;case C.BEGIN_WHITESPACE:qe(c,x);continue;case C.TEXT:if(c.sawRoot&&!c.closedRoot){for(var ue=U-1;x&&"<"!==x&&"&"!==x;)(x=Ie(O,U++))&&c.trackPosition&&(c.position++,"\n"===x?(c.line++,c.column=0):c.column++);c.textNode+=O.substring(ue,U-1)}"<"!==x||c.sawRoot&&c.closedRoot&&!c.strict?(!f(x)&&(!c.sawRoot||c.closedRoot)&&ge(c,"Text data outside of root node."),"&"===x?c.state=C.TEXT_ENTITY:c.textNode+=x):(c.state=C.OPEN_WAKA,c.startTagPosition=c.position);continue;case C.SCRIPT:"<"===x?c.state=C.SCRIPT_ENDING:c.script+=x;continue;case C.SCRIPT_ENDING:"/"===x?c.state=C.CLOSE_TAG:(c.script+="<"+x,c.state=C.SCRIPT);continue;case C.OPEN_WAKA:"!"===x?(c.state=C.SGML_DECL,c.sgmlDecl=""):f(x)||(E($,x)?(c.state=C.OPEN_TAG,c.tagName=x):"/"===x?(c.state=C.CLOSE_TAG,c.tagName=""):"?"===x?(c.state=C.PROC_INST,c.procInstName=c.procInstBody=""):(ge(c,"Unencoded <"),c.startTagPosition+1<c.position&&(x=new Array(c.position-c.startTagPosition).join(" ")+x),c.textNode+="<"+x,c.state=C.TEXT));continue;case C.SGML_DECL:(c.sgmlDecl+x).toUpperCase()===Y?(K(c,"onopencdata"),c.state=C.CDATA,c.sgmlDecl="",c.cdata=""):c.sgmlDecl+x==="--"?(c.state=C.COMMENT,c.comment="",c.sgmlDecl=""):(c.sgmlDecl+x).toUpperCase()===X?(c.state=C.DOCTYPE,(c.doctype||c.sawRoot)&&ge(c,"Inappropriately located doctype declaration"),c.doctype="",c.sgmlDecl=""):">"===x?(K(c,"onsgmldeclaration",c.sgmlDecl),c.sgmlDecl="",c.state=C.TEXT):(d(x)&&(c.state=C.SGML_DECL_QUOTED),c.sgmlDecl+=x);continue;case C.SGML_DECL_QUOTED:x===c.q&&(c.state=C.SGML_DECL,c.q=""),c.sgmlDecl+=x;continue;case C.DOCTYPE:">"===x?(c.state=C.TEXT,K(c,"ondoctype",c.doctype),c.doctype=!0):(c.doctype+=x,"["===x?c.state=C.DOCTYPE_DTD:d(x)&&(c.state=C.DOCTYPE_QUOTED,c.q=x));continue;case C.DOCTYPE_QUOTED:c.doctype+=x,x===c.q&&(c.q="",c.state=C.DOCTYPE);continue;case C.DOCTYPE_DTD:c.doctype+=x,"]"===x?c.state=C.DOCTYPE:d(x)&&(c.state=C.DOCTYPE_DTD_QUOTED,c.q=x);continue;case C.DOCTYPE_DTD_QUOTED:c.doctype+=x,x===c.q&&(c.state=C.DOCTYPE_DTD,c.q="");continue;case C.COMMENT:"-"===x?c.state=C.COMMENT_ENDING:c.comment+=x;continue;case C.COMMENT_ENDING:"-"===x?(c.state=C.COMMENT_ENDED,c.comment=re(c.opt,c.comment),c.comment&&K(c,"oncomment",c.comment),c.comment=""):(c.comment+="-"+x,c.state=C.COMMENT);continue;case C.COMMENT_ENDED:">"!==x?(ge(c,"Malformed comment"),c.comment+="--"+x,c.state=C.COMMENT):c.state=C.TEXT;continue;case C.CDATA:"]"===x?c.state=C.CDATA_ENDING:c.cdata+=x;continue;case C.CDATA_ENDING:"]"===x?c.state=C.CDATA_ENDING_2:(c.cdata+="]"+x,c.state=C.CDATA);continue;case C.CDATA_ENDING_2:">"===x?(c.cdata&&K(c,"oncdata",c.cdata),K(c,"onclosecdata"),c.cdata="",c.state=C.TEXT):"]"===x?c.cdata+="]":(c.cdata+="]]"+x,c.state=C.CDATA);continue;case C.PROC_INST:"?"===x?c.state=C.PROC_INST_ENDING:f(x)?c.state=C.PROC_INST_BODY:c.procInstName+=x;continue;case C.PROC_INST_BODY:if(!c.procInstBody&&f(x))continue;"?"===x?c.state=C.PROC_INST_ENDING:c.procInstBody+=x;continue;case C.PROC_INST_ENDING:">"===x?(K(c,"onprocessinginstruction",{name:c.procInstName,body:c.procInstBody}),c.procInstName=c.procInstBody="",c.state=C.TEXT):(c.procInstBody+="?"+x,c.state=C.PROC_INST_BODY);continue;case C.OPEN_TAG:E(z,x)?c.tagName+=x:(e(c),">"===x?Ae(c):"/"===x?c.state=C.OPEN_TAG_SLASH:(f(x)||ge(c,"Invalid character in tag name"),c.state=C.ATTRIB));continue;case C.OPEN_TAG_SLASH:">"===x?(Ae(c,!0),Oe(c)):(ge(c,"Forward-slash in opening tag not followed by >"),c.state=C.ATTRIB);continue;case C.ATTRIB:if(f(x))continue;">"===x?Ae(c):"/"===x?c.state=C.OPEN_TAG_SLASH:E($,x)?(c.attribName=x,c.attribValue="",c.state=C.ATTRIB_NAME):ge(c,"Invalid attribute name");continue;case C.ATTRIB_NAME:"="===x?c.state=C.ATTRIB_VALUE:">"===x?(ge(c,"Attribute without value"),c.attribValue=c.attribName,We(c),Ae(c)):f(x)?c.state=C.ATTRIB_NAME_SAW_WHITE:E(z,x)?c.attribName+=x:ge(c,"Invalid attribute name");continue;case C.ATTRIB_NAME_SAW_WHITE:if("="===x)c.state=C.ATTRIB_VALUE;else{if(f(x))continue;ge(c,"Attribute without value"),c.tag.attributes[c.attribName]="",c.attribValue="",K(c,"onattribute",{name:c.attribName,value:""}),c.attribName="",">"===x?Ae(c):E($,x)?(c.attribName=x,c.state=C.ATTRIB_NAME):(ge(c,"Invalid attribute name"),c.state=C.ATTRIB)}continue;case C.ATTRIB_VALUE:if(f(x))continue;d(x)?(c.q=x,c.state=C.ATTRIB_VALUE_QUOTED):(ge(c,"Unquoted attribute value"),c.state=C.ATTRIB_VALUE_UNQUOTED,c.attribValue=x);continue;case C.ATTRIB_VALUE_QUOTED:if(x!==c.q){"&"===x?c.state=C.ATTRIB_VALUE_ENTITY_Q:c.attribValue+=x;continue}We(c),c.q="",c.state=C.ATTRIB_VALUE_CLOSED;continue;case C.ATTRIB_VALUE_CLOSED:f(x)?c.state=C.ATTRIB:">"===x?Ae(c):"/"===x?c.state=C.OPEN_TAG_SLASH:E($,x)?(ge(c,"No whitespace between attributes"),c.attribName=x,c.attribValue="",c.state=C.ATTRIB_NAME):ge(c,"Invalid attribute name");continue;case C.ATTRIB_VALUE_UNQUOTED:if(!u(x)){"&"===x?c.state=C.ATTRIB_VALUE_ENTITY_U:c.attribValue+=x;continue}We(c),">"===x?Ae(c):c.state=C.ATTRIB;continue;case C.CLOSE_TAG:if(c.tagName)">"===x?Oe(c):E(z,x)?c.tagName+=x:c.script?(c.script+="</"+c.tagName,c.tagName="",c.state=C.SCRIPT):(f(x)||ge(c,"Invalid tagname in closing tag"),c.state=C.CLOSE_TAG_SAW_WHITE);else{if(f(x))continue;B($,x)?c.script?(c.script+="</"+x,c.state=C.SCRIPT):ge(c,"Invalid tagname in closing tag."):c.tagName=x}continue;case C.CLOSE_TAG_SAW_WHITE:if(f(x))continue;">"===x?Oe(c):ge(c,"Invalid characters in closing tag");continue;case C.TEXT_ENTITY:case C.ATTRIB_VALUE_ENTITY_Q:case C.ATTRIB_VALUE_ENTITY_U:var A,y;switch(c.state){case C.TEXT_ENTITY:A=C.TEXT,y="textNode";break;case C.ATTRIB_VALUE_ENTITY_Q:A=C.ATTRIB_VALUE_QUOTED,y="attribValue";break;case C.ATTRIB_VALUE_ENTITY_U:A=C.ATTRIB_VALUE_UNQUOTED,y="attribValue"}if(";"===x)if(c.opt.unparsedEntities){var Q=Xe(c);c.entity="",c.state=A,c.write(Q)}else c[y]+=Xe(c),c.entity="",c.state=A;else E(c.entity.length?S:P,x)?c.entity+=x:(ge(c,"Invalid character in entity name"),c[y]+="&"+c.entity+x,c.entity="",c.state=A);continue;default:throw new Error(c,"Unknown state: "+c.state)}return c.position>=c.bufferCheckPosition&&function b(O){for(var c=Math.max(R.MAX_BUFFER_LENGTH,10),U=0,x=0,ue=r.length;x<ue;x++){var Fe=O[r[x]].length;if(Fe>c)switch(r[x]){case"textNode":ne(O);break;case"cdata":K(O,"oncdata",O.cdata),O.cdata="";break;case"script":K(O,"onscript",O.script),O.script="";break;default:Se(O,"Max buffer length exceeded: "+r[x])}U=Math.max(U,Fe)}O.bufferCheckPosition=R.MAX_BUFFER_LENGTH-U+O.position}(c),c},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function m(O){ne(O),""!==O.cdata&&(K(O,"oncdata",O.cdata),O.cdata=""),""!==O.script&&(K(O,"onscript",O.script),O.script="")}(this)}};try{p=g(12186).Stream}catch{p=function(){}}p||(p=function(){});var G=R.EVENTS.filter(function(O){return"error"!==O&&"end"!==O});function L(O,c){if(!(this instanceof L))return new L(O,c);p.apply(this),this._parser=new I(O,c),this.writable=!0,this.readable=!0;var U=this;this._parser.onend=function(){U.emit("end")},this._parser.onerror=function(x){U.emit("error",x),U._parser.error=null},this._decoder=null,G.forEach(function(x){Object.defineProperty(U,"on"+x,{get:function(){return U._parser["on"+x]},set:function(ue){if(!ue)return U.removeAllListeners(x),U._parser["on"+x]=ue,ue;U.on(x,ue)},enumerable:!0,configurable:!1})})}(L.prototype=Object.create(p.prototype,{constructor:{value:L}})).write=function(O){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(O)){if(!this._decoder){var c=g(95697).I;this._decoder=new c("utf8")}O=this._decoder.write(O)}return this._parser.write(O.toString()),this.emit("data",O),!0},L.prototype.end=function(O){return O&&O.length&&this.write(O),this._parser.end(),!0},L.prototype.on=function(O,c){var U=this;return!U._parser["on"+O]&&-1!==G.indexOf(O)&&(U._parser["on"+O]=function(){var x=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);x.splice(0,0,O),U.emit.apply(U,x)}),p.prototype.on.call(U,O,c)};var Y="[CDATA[",X="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/2000/xmlns/",D={xml:h,xmlns:v},$=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,z=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,P=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function f(O){return" "===O||"\n"===O||"\r"===O||"\t"===O}function d(O){return'"'===O||"'"===O}function u(O){return">"===O||f(O)}function E(O,c){return O.test(c)}function B(O,c){return!E(O,c)}var O,c,U,C=0;for(var Z in R.STATE={BEGIN:C++,BEGIN_WHITESPACE:C++,TEXT:C++,TEXT_ENTITY:C++,OPEN_WAKA:C++,SGML_DECL:C++,SGML_DECL_QUOTED:C++,DOCTYPE:C++,DOCTYPE_QUOTED:C++,DOCTYPE_DTD:C++,DOCTYPE_DTD_QUOTED:C++,COMMENT_STARTING:C++,COMMENT:C++,COMMENT_ENDING:C++,COMMENT_ENDED:C++,CDATA:C++,CDATA_ENDING:C++,CDATA_ENDING_2:C++,PROC_INST:C++,PROC_INST_BODY:C++,PROC_INST_ENDING:C++,OPEN_TAG:C++,OPEN_TAG_SLASH:C++,ATTRIB:C++,ATTRIB_NAME:C++,ATTRIB_NAME_SAW_WHITE:C++,ATTRIB_VALUE:C++,ATTRIB_VALUE_QUOTED:C++,ATTRIB_VALUE_CLOSED:C++,ATTRIB_VALUE_UNQUOTED:C++,ATTRIB_VALUE_ENTITY_Q:C++,ATTRIB_VALUE_ENTITY_U:C++,CLOSE_TAG:C++,CLOSE_TAG_SAW_WHITE:C++,SCRIPT:C++,SCRIPT_ENDING:C++},R.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},R.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(R.ENTITIES).forEach(function(O){var c=R.ENTITIES[O],U="number"==typeof c?String.fromCharCode(c):c;R.ENTITIES[O]=U}),R.STATE)R.STATE[R.STATE[Z]]=Z;function w(O,c,U){O[c]&&O[c](U)}function K(O,c,U){O.textNode&&ne(O),w(O,c,U)}function ne(O){O.textNode=re(O.opt,O.textNode),O.textNode&&w(O,"ontext",O.textNode),O.textNode=""}function re(O,c){return O.trim&&(c=c.trim()),O.normalize&&(c=c.replace(/\s+/g," ")),c}function Se(O,c){return ne(O),O.trackPosition&&(c+="\nLine: "+O.line+"\nColumn: "+O.column+"\nChar: "+O.c),c=new Error(c),O.error=c,w(O,"onerror",c),O}function Pe(O){return O.sawRoot&&!O.closedRoot&&ge(O,"Unclosed root tag"),O.state!==C.BEGIN&&O.state!==C.BEGIN_WHITESPACE&&O.state!==C.TEXT&&Se(O,"Unexpected end"),ne(O),O.c="",O.closed=!0,w(O,"onend"),I.call(O,O.strict,O.opt),O}function ge(O,c){if("object"!=typeof O||!(O instanceof I))throw new Error("bad call to strictFail");O.strict&&Se(O,c)}function e(O){O.strict||(O.tagName=O.tagName[O.looseCase]());var c=O.tags[O.tags.length-1]||O,U=O.tag={name:O.tagName,attributes:{}};O.opt.xmlns&&(U.ns=c.ns),O.attribList.length=0,K(O,"onopentagstart",U)}function ae(O,c){var x=O.indexOf(":")<0?["",O]:O.split(":"),ue=x[0],Fe=x[1];return c&&"xmlns"===O&&(ue="xmlns",Fe=""),{prefix:ue,local:Fe}}function We(O){if(O.strict||(O.attribName=O.attribName[O.looseCase]()),-1!==O.attribList.indexOf(O.attribName)||O.tag.attributes.hasOwnProperty(O.attribName))O.attribName=O.attribValue="";else{if(O.opt.xmlns){var c=ae(O.attribName,!0),x=c.local;if("xmlns"===c.prefix)if("xml"===x&&O.attribValue!==h)ge(O,"xml: prefix must be bound to "+h+"\nActual: "+O.attribValue);else if("xmlns"===x&&O.attribValue!==v)ge(O,"xmlns: prefix must be bound to "+v+"\nActual: "+O.attribValue);else{var ue=O.tag,Fe=O.tags[O.tags.length-1]||O;ue.ns===Fe.ns&&(ue.ns=Object.create(Fe.ns)),ue.ns[x]=O.attribValue}O.attribList.push([O.attribName,O.attribValue])}else O.tag.attributes[O.attribName]=O.attribValue,K(O,"onattribute",{name:O.attribName,value:O.attribValue});O.attribName=O.attribValue=""}}function Ae(O,c){if(O.opt.xmlns){var U=O.tag,x=ae(O.tagName);U.prefix=x.prefix,U.local=x.local,U.uri=U.ns[x.prefix]||"",U.prefix&&!U.uri&&(ge(O,"Unbound namespace prefix: "+JSON.stringify(O.tagName)),U.uri=x.prefix),U.ns&&(O.tags[O.tags.length-1]||O).ns!==U.ns&&Object.keys(U.ns).forEach(function(_e){K(O,"onopennamespace",{prefix:_e,uri:U.ns[_e]})});for(var Fe=0,A=O.attribList.length;Fe<A;Fe++){var y=O.attribList[Fe],Q=y[0],M=y[1],a=ae(Q,!0),l=a.prefix,V=""===l?"":U.ns[l]||"",te={name:Q,value:M,prefix:l,local:a.local,uri:V};l&&"xmlns"!==l&&!V&&(ge(O,"Unbound namespace prefix: "+JSON.stringify(l)),te.uri=l),O.tag.attributes[Q]=te,K(O,"onattribute",te)}O.attribList.length=0}O.tag.isSelfClosing=!!c,O.sawRoot=!0,O.tags.push(O.tag),K(O,"onopentag",O.tag),c||(O.state=O.noscript||"script"!==O.tagName.toLowerCase()?C.TEXT:C.SCRIPT,O.tag=null,O.tagName=""),O.attribName=O.attribValue="",O.attribList.length=0}function Oe(O){if(!O.tagName)return ge(O,"Weird empty close tag."),O.textNode+="</>",void(O.state=C.TEXT);if(O.script){if("script"!==O.tagName)return O.script+="</"+O.tagName+">",O.tagName="",void(O.state=C.SCRIPT);K(O,"onscript",O.script),O.script=""}var c=O.tags.length,U=O.tagName;O.strict||(U=U[O.looseCase]());for(var x=U;c--&&O.tags[c].name!==x;)ge(O,"Unexpected close tag");if(c<0)return ge(O,"Unmatched closing tag: "+O.tagName),O.textNode+="</"+O.tagName+">",void(O.state=C.TEXT);O.tagName=U;for(var Fe=O.tags.length;Fe-- >c;){var A=O.tag=O.tags.pop();O.tagName=O.tag.name,K(O,"onclosetag",O.tagName);var y={};for(var Q in A.ns)y[Q]=A.ns[Q];O.opt.xmlns&&A.ns!==(O.tags[O.tags.length-1]||O).ns&&Object.keys(A.ns).forEach(function(a){K(O,"onclosenamespace",{prefix:a,uri:A.ns[a]})})}0===c&&(O.closedRoot=!0),O.tagName=O.attribValue=O.attribName="",O.attribList.length=0,O.state=C.TEXT}function Xe(O){var x,c=O.entity,U=c.toLowerCase(),ue="";return O.ENTITIES[c]?O.ENTITIES[c]:O.ENTITIES[U]?O.ENTITIES[U]:("#"===(c=U).charAt(0)&&("x"===c.charAt(1)?(c=c.slice(2),ue=(x=parseInt(c,16)).toString(16)):(c=c.slice(1),ue=(x=parseInt(c,10)).toString(10))),c=c.replace(/^0+/,""),isNaN(x)||ue.toLowerCase()!==c?(ge(O,"Invalid character entity"),"&"+O.entity+";"):String.fromCodePoint(x))}function qe(O,c){"<"===c?(O.state=C.OPEN_WAKA,O.startTagPosition=O.position):f(c)||(ge(O,"Non-whitespace before first tag."),O.textNode=c,O.state=C.TEXT)}function Ie(O,c){var U="";return c<O.length&&(U=O.charAt(c)),U}C=R.STATE,String.fromCodePoint||(O=String.fromCharCode,c=Math.floor,U=function(){var ue=[],y=-1,Q=arguments.length;if(!Q)return"";for(var M="";++y<Q;){var a=Number(arguments[y]);if(!isFinite(a)||a<0||a>1114111||c(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?ue.push(a):ue.push(55296+((a-=65536)>>10),a%1024+56320),(y+1===Q||ue.length>16384)&&(M+=O.apply(null,ue),ue.length=0)}return M},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:U,configurable:!0,writable:!0}):String.fromCodePoint=U)}(ee)},91811:function(){!function(J){"use strict";if(!J.setImmediate){var b,g=1,R={},r=!1,I=J.document,D=Object.getPrototypeOf&&Object.getPrototypeOf(J);D=D&&D.setTimeout?D:J,"[object process]"==={}.toString.call(J.process)?function W(){b=function($){process.nextTick(function(){G($)})}}():function L(){if(J.postMessage&&!J.importScripts){var $=!0,z=J.onmessage;return J.onmessage=function(){$=!1},J.postMessage("","*"),J.onmessage=z,$}}()?function Y(){var $="setImmediate$"+Math.random()+"$",z=function(P){P.source===J&&"string"==typeof P.data&&0===P.data.indexOf($)&&G(+P.data.slice($.length))};J.addEventListener?J.addEventListener("message",z,!1):J.attachEvent("onmessage",z),b=function(P){J.postMessage($+P,"*")}}():J.MessageChannel?function X(){var $=new MessageChannel;$.port1.onmessage=function(z){G(z.data)},b=function(z){$.port2.postMessage(z)}}():I&&"onreadystatechange"in I.createElement("script")?function h(){var $=I.documentElement;b=function(z){var P=I.createElement("script");P.onreadystatechange=function(){G(z),P.onreadystatechange=null,$.removeChild(P),P=null},$.appendChild(P)}}():function v(){b=function($){setTimeout(G,0,$)}}(),D.setImmediate=function j($){"function"!=typeof $&&($=new Function(""+$));for(var z=new Array(arguments.length-1),P=0;P<z.length;P++)z[P]=arguments[P+1];return R[g]={callback:$,args:z},b(g),g++},D.clearImmediate=m}function m($){delete R[$]}function G($){if(r)setTimeout(G,0,$);else{var z=R[$];if(z){r=!0;try{!function p($){var z=$.callback,P=$.args;switch(P.length){case 0:z();break;case 1:z(P[0]);break;case 2:z(P[0],P[1]);break;case 3:z(P[0],P[1],P[2]);break;default:z.apply(undefined,P)}}(z)}finally{m($),r=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},12186:(J,ee,g)=>{J.exports=I;var R=g(51979).EventEmitter;function I(){R.call(this)}g(51270)(I,R),I.Readable=g(6816),I.Writable=g(53888),I.Duplex=g(17570),I.Transform=g(30062),I.PassThrough=g(56804),I.finished=g(3602),I.pipeline=g(35754),I.Stream=I,I.prototype.pipe=function(b,j){var m=this;function p(v){b.writable&&!1===b.write(v)&&m.pause&&m.pause()}function G(){m.readable&&m.resume&&m.resume()}m.on("data",p),b.on("drain",G),!b._isStdio&&(!j||!1!==j.end)&&(m.on("end",L),m.on("close",Y));var W=!1;function L(){W||(W=!0,b.end())}function Y(){W||(W=!0,"function"==typeof b.destroy&&b.destroy())}function X(v){if(h(),0===R.listenerCount(this,"error"))throw v}function h(){m.removeListener("data",p),b.removeListener("drain",G),m.removeListener("end",L),m.removeListener("close",Y),m.removeListener("error",X),b.removeListener("error",X),m.removeListener("end",h),m.removeListener("close",h),b.removeListener("close",h)}return m.on("error",X),b.on("error",X),m.on("end",h),m.on("close",h),b.on("close",h),b.emit("pipe",m),b}},95697:(J,ee,g)=>{"use strict";var R=g(38809).Buffer,r=R.isEncoding||function(P){switch((P=""+P)&&P.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function j(P){var S;switch(this.encoding=function b(P){var S=function I(P){if(!P)return"utf8";for(var S;;)switch(P){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return P;default:if(S)return;P=(""+P).toLowerCase(),S=!0}}(P);if("string"!=typeof S&&(R.isEncoding===r||!r(P)))throw new Error("Unknown encoding: "+P);return S||P}(P),this.encoding){case"utf16le":this.text=X,this.end=h,S=4;break;case"utf8":this.fillLast=W,S=4;break;case"base64":this.text=v,this.end=D,S=3;break;default:return this.write=$,void(this.end=z)}this.lastNeed=0,this.lastTotal=0,this.lastChar=R.allocUnsafe(S)}function m(P){return P<=127?0:P>>5==6?2:P>>4==14?3:P>>3==30?4:P>>6==2?-1:-2}function W(P){var S=this.lastTotal-this.lastNeed,f=function G(P,S){if(128!=(192&S[0]))return P.lastNeed=0,"\ufffd";if(P.lastNeed>1&&S.length>1){if(128!=(192&S[1]))return P.lastNeed=1,"\ufffd";if(P.lastNeed>2&&S.length>2&&128!=(192&S[2]))return P.lastNeed=2,"\ufffd"}}(this,P);return void 0!==f?f:this.lastNeed<=P.length?(P.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(P.copy(this.lastChar,S,0,P.length),void(this.lastNeed-=P.length))}function X(P,S){if((P.length-S)%2==0){var f=P.toString("utf16le",S);if(f){var d=f.charCodeAt(f.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=P[P.length-2],this.lastChar[1]=P[P.length-1],f.slice(0,-1)}return f}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=P[P.length-1],P.toString("utf16le",S,P.length-1)}function h(P){var S=P&&P.length?this.write(P):"";return this.lastNeed?S+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):S}function v(P,S){var f=(P.length-S)%3;return 0===f?P.toString("base64",S):(this.lastNeed=3-f,this.lastTotal=3,1===f?this.lastChar[0]=P[P.length-1]:(this.lastChar[0]=P[P.length-2],this.lastChar[1]=P[P.length-1]),P.toString("base64",S,P.length-f))}function D(P){var S=P&&P.length?this.write(P):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function $(P){return P.toString(this.encoding)}function z(P){return P&&P.length?this.write(P):""}ee.I=j,j.prototype.write=function(P){if(0===P.length)return"";var S,f;if(this.lastNeed){if(void 0===(S=this.fillLast(P)))return"";f=this.lastNeed,this.lastNeed=0}else f=0;return f<P.length?S?S+this.text(P,f):this.text(P,f):S||""},j.prototype.end=function Y(P){var S=P&&P.length?this.write(P):"";return this.lastNeed?S+"\ufffd":S},j.prototype.text=function L(P,S){var f=function p(P,S,f){var d=S.length-1;if(d<f)return 0;var u=m(S[d]);return u>=0?(u>0&&(P.lastNeed=u-1),u):--d<f||-2===u?0:(u=m(S[d]))>=0?(u>0&&(P.lastNeed=u-2),u):--d<f||-2===u?0:(u=m(S[d]))>=0?(u>0&&(2===u?u=0:P.lastNeed=u-3),u):0}(this,P,S);if(!this.lastNeed)return P.toString("utf8",S);this.lastTotal=f;var d=P.length-(f-this.lastNeed);return P.copy(this.lastChar,0,d),P.toString("utf8",S,d)},j.prototype.fillLast=function(P){if(this.lastNeed<=P.length)return P.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);P.copy(this.lastChar,this.lastTotal-this.lastNeed,0,P.length),this.lastNeed-=P.length}},63443:function(J,ee,g){var R=typeof global<"u"&&global||typeof self<"u"&&self||window,r=Function.prototype.apply;function I(b,j){this._id=b,this._clearFn=j}ee.setTimeout=function(){return new I(r.call(setTimeout,R,arguments),clearTimeout)},ee.setInterval=function(){return new I(r.call(setInterval,R,arguments),clearInterval)},ee.clearTimeout=ee.clearInterval=function(b){b&&b.close()},I.prototype.unref=I.prototype.ref=function(){},I.prototype.close=function(){this._clearFn.call(R,this._id)},ee.enroll=function(b,j){clearTimeout(b._idleTimeoutId),b._idleTimeout=j},ee.unenroll=function(b){clearTimeout(b._idleTimeoutId),b._idleTimeout=-1},ee._unrefActive=ee.active=function(b){clearTimeout(b._idleTimeoutId);var j=b._idleTimeout;j>=0&&(b._idleTimeoutId=setTimeout(function(){b._onTimeout&&b._onTimeout()},j))},g(91811),ee.setImmediate=typeof self<"u"&&self.setImmediate||typeof global<"u"&&global.setImmediate||this&&this.setImmediate,ee.clearImmediate=typeof self<"u"&&self.clearImmediate||typeof global<"u"&&global.clearImmediate||this&&this.clearImmediate},4279:J=>{function g(R){try{if(!global.localStorage)return!1}catch{return!1}var r=global.localStorage[R];return null!=r&&"true"===String(r).toLowerCase()}J.exports=function ee(R,r){if(g("noDeprecation"))return R;var I=!1;return function b(){if(!I){if(g("throwDeprecation"))throw new Error(r);g("traceDeprecation")?console.trace(r):console.warn(r),I=!0}return R.apply(this,arguments)}}},26653:function(J,ee){(function(){"use strict";ee.stripBOM=function(g){return"\ufeff"===g[0]?g.substring(1):g}}).call(this)},81292:function(J,ee,g){(function(){"use strict";var R,r,I,b,j,m={}.hasOwnProperty;R=g(66397),r=g(83901).defaults,b=function(p){return"string"==typeof p&&(p.indexOf("&")>=0||p.indexOf(">")>=0||p.indexOf("<")>=0)},j=function(p){return"<![CDATA["+I(p)+"]]>"},I=function(p){return p.replace("]]>","]]]]><![CDATA[>")},ee.Builder=function(){function p(G){var W,L;for(W in this.options={},L=r[.2])m.call(L,W)&&(this.options[W]=L[W]);for(W in G)m.call(G,W)&&(this.options[W]=G[W])}return p.prototype.buildObject=function(G){var W,L,Y,X,h;return W=this.options.attrkey,L=this.options.charkey,1===Object.keys(G).length&&this.options.rootName===r[.2].rootName?G=G[h=Object.keys(G)[0]]:h=this.options.rootName,Y=function(v){return function(D,$){var z,P,S,f,d;if("object"!=typeof $)v.options.cdata&&b($)?D.raw(j($)):D.txt($);else if(Array.isArray($)){for(f in $)if(m.call($,f))for(d in P=$[f])S=P[d],D=Y(D.ele(d),S).up()}else for(d in $)if(m.call($,d))if(P=$[d],d===W){if("object"==typeof P)for(z in P)D=D.att(z,P[z])}else if(d===L)D=v.options.cdata&&b(P)?D.raw(j(P)):D.txt(P);else if(Array.isArray(P))for(f in P)m.call(P,f)&&(D="string"==typeof(S=P[f])?v.options.cdata&&b(S)?D.ele(d).raw(j(S)).up():D.ele(d,S).up():Y(D.ele(d),S).up());else"object"==typeof P?D=Y(D.ele(d),P).up():"string"==typeof P&&v.options.cdata&&b(P)?D=D.ele(d).raw(j(P)).up():(null==P&&(P=""),D=D.ele(d,P.toString()).up());return D}}(this),X=R.create(h,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),Y(X,G).end(this.options.renderOpts)},p}()}).call(this)},83901:function(J,ee){(function(){ee.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},57020:function(J,ee,g){(function(){"use strict";var R,r,I,b,j,m,p,G,W,L=function(h,v){return function(){return h.apply(v,arguments)}},X={}.hasOwnProperty;G=g(10583),b=g(51979),R=g(26653),p=g(53846),W=g(63443).setImmediate,r=g(83901).defaults,j=function(h){return"object"==typeof h&&null!=h&&0===Object.keys(h).length},m=function(h,v,D){var $,z;for($=0,z=h.length;$<z;$++)v=(0,h[$])(v,D);return v},I=function(h,v,D){var $;return($=Object.create(null)).value=D,$.writable=!0,$.enumerable=!0,$.configurable=!0,Object.defineProperty(h,v,$)},ee.Parser=function(h){function v(D){var $,z;if(this.parseStringPromise=L(this.parseStringPromise,this),this.parseString=L(this.parseString,this),this.reset=L(this.reset,this),this.assignOrPush=L(this.assignOrPush,this),this.processAsync=L(this.processAsync,this),!(this instanceof ee.Parser))return new ee.Parser(D);for($ in this.options={},z=r[.2])X.call(z,$)&&(this.options[$]=z[$]);for($ in D)X.call(D,$)&&(this.options[$]=D[$]);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(p.normalize)),this.reset()}return function(h,v){for(var D in v)X.call(v,D)&&(h[D]=v[D]);function $(){this.constructor=h}$.prototype=v.prototype,h.prototype=new $,h.__super__=v.prototype}(v,h),v.prototype.processAsync=function(){var D,$;try{return this.remaining.length<=this.options.chunkSize?(D=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(D),this.saxParser.close()):(D=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(D),W(this.processAsync))}catch(z){if($=z,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit($)}},v.prototype.assignOrPush=function(D,$,z){return $ in D?(D[$]instanceof Array||I(D,$,[D[$]]),D[$].push(z)):I(D,$,this.options.explicitArray?[z]:z)},v.prototype.reset=function(){var D,$,z,P;return this.removeAllListeners(),this.saxParser=G.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(S){return function(f){if(S.saxParser.resume(),!S.saxParser.errThrown)return S.saxParser.errThrown=!0,S.emit("error",f)}}(this),this.saxParser.onend=function(S){return function(){if(!S.saxParser.ended)return S.saxParser.ended=!0,S.emit("end",S.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,P=[],D=this.options.attrkey,$=this.options.charkey,this.saxParser.onopentag=function(S){return function(f){var d,u,E,B,C;if((E={})[$]="",!S.options.ignoreAttrs)for(d in C=f.attributes)X.call(C,d)&&(!(D in E)&&!S.options.mergeAttrs&&(E[D]={}),u=S.options.attrValueProcessors?m(S.options.attrValueProcessors,f.attributes[d],d):f.attributes[d],B=S.options.attrNameProcessors?m(S.options.attrNameProcessors,d):d,S.options.mergeAttrs?S.assignOrPush(E,B,u):I(E[D],B,u));return E["#name"]=S.options.tagNameProcessors?m(S.options.tagNameProcessors,f.name):f.name,S.options.xmlns&&(E[S.options.xmlnskey]={uri:f.uri,local:f.local}),P.push(E)}}(this),this.saxParser.onclosetag=function(S){return function(){var f,d,u,E,B,C,Z,w,K,ne;if(C=P.pop(),B=C["#name"],(!S.options.explicitChildren||!S.options.preserveChildrenOrder)&&delete C["#name"],!0===C.cdata&&(f=C.cdata,delete C.cdata),K=P[P.length-1],C[$].match(/^\s*$/)&&!f?(d=C[$],delete C[$]):(S.options.trim&&(C[$]=C[$].trim()),S.options.normalize&&(C[$]=C[$].replace(/\s{2,}/g," ").trim()),C[$]=S.options.valueProcessors?m(S.options.valueProcessors,C[$],B):C[$],1===Object.keys(C).length&&$ in C&&!S.EXPLICIT_CHARKEY&&(C=C[$])),j(C)&&(C="function"==typeof S.options.emptyTag?S.options.emptyTag():""!==S.options.emptyTag?S.options.emptyTag:d),null!=S.options.validator&&(ne="/"+function(){var re,Se,Pe;for(Pe=[],re=0,Se=P.length;re<Se;re++)Pe.push((E=P[re])["#name"]);return Pe}().concat(B).join("/"),function(){try{return C=S.options.validator(ne,K&&K[B],C)}catch(Se){return S.emit("error",Se)}}()),S.options.explicitChildren&&!S.options.mergeAttrs&&"object"==typeof C)if(S.options.preserveChildrenOrder){if(K){for(u in K[S.options.childkey]=K[S.options.childkey]||[],Z={},C)X.call(C,u)&&I(Z,u,C[u]);K[S.options.childkey].push(Z),delete C["#name"],1===Object.keys(C).length&&$ in C&&!S.EXPLICIT_CHARKEY&&(C=C[$])}}else E={},S.options.attrkey in C&&(E[S.options.attrkey]=C[S.options.attrkey],delete C[S.options.attrkey]),!S.options.charsAsChildren&&S.options.charkey in C&&(E[S.options.charkey]=C[S.options.charkey],delete C[S.options.charkey]),Object.getOwnPropertyNames(C).length>0&&(E[S.options.childkey]=C),C=E;return P.length>0?S.assignOrPush(K,B,C):(S.options.explicitRoot&&(w=C,I(C={},B,w)),S.resultObject=C,S.saxParser.ended=!0,S.emit("end",S.resultObject))}}(this),this.saxParser.ontext=z=function(S){return function(f){var d,u;if(u=P[P.length-1])return u[$]+=f,S.options.explicitChildren&&S.options.preserveChildrenOrder&&S.options.charsAsChildren&&(S.options.includeWhiteChars||""!==f.replace(/\\n/g,"").trim())&&(u[S.options.childkey]=u[S.options.childkey]||[],(d={"#name":"__text__"})[$]=f,S.options.normalize&&(d[$]=d[$].replace(/\s{2,}/g," ").trim()),u[S.options.childkey].push(d)),u}}(this),this.saxParser.oncdata=function(){return function(f){var d;if(d=z(f))return d.cdata=!0}}()},v.prototype.parseString=function(D,$){var z;null!=$&&"function"==typeof $&&(this.on("end",function(P){return this.reset(),$(null,P)}),this.on("error",function(P){return this.reset(),$(P)}));try{return""===(D=D.toString()).trim()?(this.emit("end",null),!0):(D=R.stripBOM(D),this.options.async?(this.remaining=D,W(this.processAsync),this.saxParser):this.saxParser.write(D).close())}catch(P){if(z=P,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",z),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw z}},v.prototype.parseStringPromise=function(D){return new Promise(function($){return function(z,P){return $.parseString(D,function(S,f){return S?P(S):z(f)})}}(this))},v}(b),ee.parseString=function(h,v,D){var $,z;return null!=D?("function"==typeof D&&($=D),"object"==typeof v&&(z=v)):("function"==typeof v&&($=v),z={}),new ee.Parser(z).parseString(h,$)},ee.parseStringPromise=function(h,v){var D;return"object"==typeof v&&(D=v),new ee.Parser(D).parseStringPromise(h)}}).call(this)},53846:function(J,ee){(function(){"use strict";var g;g=new RegExp(/(?!xmlns)^.*:/),ee.normalize=function(R){return R.toLowerCase()},ee.firstCharLowerCase=function(R){return R.charAt(0).toLowerCase()+R.slice(1)},ee.stripPrefix=function(R){return R.replace(g,"")},ee.parseNumbers=function(R){return isNaN(R)||(R=R%1==0?parseInt(R,10):parseFloat(R)),R},ee.parseBooleans=function(R){return/^(?:true|false)$/i.test(R)&&(R="true"===R.toLowerCase()),R}}).call(this)},23153:function(J,ee,g){(function(){"use strict";var R,r,I,b,m={}.hasOwnProperty;r=g(83901),R=g(81292),I=g(57020),b=g(53846),ee.defaults=r.defaults,ee.processors=b,ee.ValidationError=function(){function G(W){this.message=W}return function(p,G){for(var W in G)m.call(G,W)&&(p[W]=G[W]);function L(){this.constructor=p}L.prototype=G.prototype,p.prototype=new L,p.__super__=G.prototype}(G,Error),G}(),ee.Builder=R.Builder,ee.Parser=I.Parser,ee.parseString=I.parseString,ee.parseStringPromise=I.parseStringPromise}).call(this)},12831:function(J){(function(){J.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},2885:function(J){(function(){J.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},66557:function(J){(function(){var ee,g,R,r,I,b,j,m=[].slice,p={}.hasOwnProperty;ee=function(){var G,W,L,Y,X,h;if(h=arguments[0],X=2<=arguments.length?m.call(arguments,1):[],I(Object.assign))Object.assign.apply(null,arguments);else for(G=0,L=X.length;G<L;G++)if(null!=(Y=X[G]))for(W in Y)p.call(Y,W)&&(h[W]=Y[W]);return h},I=function(G){return!!G&&"[object Function]"===Object.prototype.toString.call(G)},b=function(G){var W;return!!G&&("function"==(W=typeof G)||"object"===W)},R=function(G){return I(Array.isArray)?Array.isArray(G):"[object Array]"===Object.prototype.toString.call(G)},r=function(G){var W;if(R(G))return!G.length;for(W in G)if(p.call(G,W))return!1;return!0},j=function(G){var W,L;return b(G)&&(L=Object.getPrototypeOf(G))&&(W=L.constructor)&&"function"==typeof W&&W instanceof W&&Function.prototype.toString.call(W)===Function.prototype.toString.call(Object)},g=function(G){return I(G.valueOf)?G.valueOf():G},J.exports.assign=ee,J.exports.isFunction=I,J.exports.isObject=b,J.exports.isArray=R,J.exports.isEmpty=r,J.exports.isPlainObject=j,J.exports.getValue=g}).call(this)},9813:function(J){(function(){J.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},77474:function(J,ee,g){(function(){var R;R=g(2885),g(8232),J.exports=function(){function b(j,m,p){if(this.parent=j,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==m)throw new Error("Missing attribute name. "+this.debugInfo(m));this.name=this.stringify.name(m),this.value=this.stringify.attValue(p),this.type=R.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(b.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(b.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(b.prototype,"textContent",{get:function(){return this.value},set:function(j){return this.value=j||""}}),Object.defineProperty(b.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(b.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(b.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(b.prototype,"specified",{get:function(){return!0}}),b.prototype.clone=function(){return Object.create(this)},b.prototype.toString=function(j){return this.options.writer.attribute(this,this.options.writer.filterOptions(j))},b.prototype.debugInfo=function(j){return null==(j=j||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+j+"}, parent: <"+this.parent.name+">"},b.prototype.isEqualNode=function(j){return!(j.namespaceURI!==this.namespaceURI||j.prefix!==this.prefix||j.localName!==this.localName||j.value!==this.value)},b}()}).call(this)},49103:function(J,ee,g){(function(){var R,I,j={}.hasOwnProperty;R=g(2885),I=g(96189),J.exports=function(m){function p(G,W){if(p.__super__.constructor.call(this,G),null==W)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=R.CData,this.value=this.stringify.cdata(W)}return function(m,p){for(var G in p)j.call(p,G)&&(m[G]=p[G]);function W(){this.constructor=m}W.prototype=p.prototype,m.prototype=new W,m.__super__=p.prototype}(p,m),p.prototype.clone=function(){return Object.create(this)},p.prototype.toString=function(G){return this.options.writer.cdata(this,this.options.writer.filterOptions(G))},p}(I)}).call(this)},96189:function(J,ee,g){(function(){var r,b={}.hasOwnProperty;r=g(8232),J.exports=function(j){function m(p){m.__super__.constructor.call(this,p),this.value=""}return function(j,m){for(var p in m)b.call(m,p)&&(j[p]=m[p]);function G(){this.constructor=j}G.prototype=m.prototype,j.prototype=new G,j.__super__=m.prototype}(m,j),Object.defineProperty(m.prototype,"data",{get:function(){return this.value},set:function(p){return this.value=p||""}}),Object.defineProperty(m.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(m.prototype,"textContent",{get:function(){return this.value},set:function(p){return this.value=p||""}}),m.prototype.clone=function(){return Object.create(this)},m.prototype.substringData=function(p,G){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.appendData=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.insertData=function(p,G){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.deleteData=function(p,G){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.replaceData=function(p,G,W){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.isEqualNode=function(p){return!(!m.__super__.isEqualNode.apply(this,arguments).isEqualNode(p)||p.data!==this.data)},m}(r)}).call(this)},33475:function(J,ee,g){(function(){var R,r,j={}.hasOwnProperty;R=g(2885),r=g(96189),J.exports=function(m){function p(G,W){if(p.__super__.constructor.call(this,G),null==W)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=R.Comment,this.value=this.stringify.comment(W)}return function(m,p){for(var G in p)j.call(p,G)&&(m[G]=p[G]);function W(){this.constructor=m}W.prototype=p.prototype,m.prototype=new W,m.__super__=p.prototype}(p,m),p.prototype.clone=function(){return Object.create(this)},p.prototype.toString=function(G){return this.options.writer.comment(this,this.options.writer.filterOptions(G))},p}(r)}).call(this)},38846:function(J,ee,g){(function(){var r,I;r=g(62208),I=g(69595),J.exports=function(){function b(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new r,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(b.prototype,"parameterNames",{get:function(){return new I(Object.keys(this.defaultParams))}}),b.prototype.getParameter=function(j){return this.params.hasOwnProperty(j)?this.params[j]:null},b.prototype.canSetParameter=function(j,m){return!0},b.prototype.setParameter=function(j,m){return null!=m?this.params[j]=m:delete this.params[j]},b}()}).call(this)},62208:function(J){(function(){J.exports=function(){function g(){}return g.prototype.handleError=function(R){throw new Error(R)},g}()}).call(this)},45584:function(J){(function(){J.exports=function(){function g(){}return g.prototype.hasFeature=function(R,r){return!0},g.prototype.createDocumentType=function(R,r,I){throw new Error("This DOM method is not implemented.")},g.prototype.createDocument=function(R,r,I){throw new Error("This DOM method is not implemented.")},g.prototype.createHTMLDocument=function(R){throw new Error("This DOM method is not implemented.")},g.prototype.getFeature=function(R,r){throw new Error("This DOM method is not implemented.")},g}()}).call(this)},69595:function(J){(function(){J.exports=function(){function g(R){this.arr=R||[]}return Object.defineProperty(g.prototype,"length",{get:function(){return this.arr.length}}),g.prototype.item=function(R){return this.arr[R]||null},g.prototype.contains=function(R){return-1!==this.arr.indexOf(R)},g}()}).call(this)},44555:function(J,ee,g){(function(){var R,I,j={}.hasOwnProperty;I=g(8232),R=g(2885),J.exports=function(m){function p(G,W,L,Y,X,h){if(p.__super__.constructor.call(this,G),null==W)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==L)throw new Error("Missing DTD attribute name. "+this.debugInfo(W));if(!Y)throw new Error("Missing DTD attribute type. "+this.debugInfo(W));if(!X)throw new Error("Missing DTD attribute default. "+this.debugInfo(W));if(0!==X.indexOf("#")&&(X="#"+X),!X.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(W));if(h&&!X.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(W));this.elementName=this.stringify.name(W),this.type=R.AttributeDeclaration,this.attributeName=this.stringify.name(L),this.attributeType=this.stringify.dtdAttType(Y),h&&(this.defaultValue=this.stringify.dtdAttDefault(h)),this.defaultValueType=X}return function(m,p){for(var G in p)j.call(p,G)&&(m[G]=p[G]);function W(){this.constructor=m}W.prototype=p.prototype,m.prototype=new W,m.__super__=p.prototype}(p,m),p.prototype.toString=function(G){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(G))},p}(I)}).call(this)},63988:function(J,ee,g){(function(){var R,I,j={}.hasOwnProperty;I=g(8232),R=g(2885),J.exports=function(m){function p(G,W,L){if(p.__super__.constructor.call(this,G),null==W)throw new Error("Missing DTD element name. "+this.debugInfo());L||(L="(#PCDATA)"),Array.isArray(L)&&(L="("+L.join(",")+")"),this.name=this.stringify.name(W),this.type=R.ElementDeclaration,this.value=this.stringify.dtdElementValue(L)}return function(m,p){for(var G in p)j.call(p,G)&&(m[G]=p[G]);function W(){this.constructor=m}W.prototype=p.prototype,m.prototype=new W,m.__super__=p.prototype}(p,m),p.prototype.toString=function(G){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(G))},p}(I)}).call(this)},89517:function(J,ee,g){(function(){var R,I,b,m={}.hasOwnProperty;b=g(66557).isObject,I=g(8232),R=g(2885),J.exports=function(p){function G(W,L,Y,X){if(G.__super__.constructor.call(this,W),null==Y)throw new Error("Missing DTD entity name. "+this.debugInfo(Y));if(null==X)throw new Error("Missing DTD entity value. "+this.debugInfo(Y));if(this.pe=!!L,this.name=this.stringify.name(Y),this.type=R.EntityDeclaration,b(X)){if(!X.pubID&&!X.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(Y));if(X.pubID&&!X.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(Y));if(this.internal=!1,null!=X.pubID&&(this.pubID=this.stringify.dtdPubID(X.pubID)),null!=X.sysID&&(this.sysID=this.stringify.dtdSysID(X.sysID)),null!=X.nData&&(this.nData=this.stringify.dtdNData(X.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(Y))}else this.value=this.stringify.dtdEntityValue(X),this.internal=!0}return function(p,G){for(var W in G)m.call(G,W)&&(p[W]=G[W]);function L(){this.constructor=p}L.prototype=G.prototype,p.prototype=new L,p.__super__=G.prototype}(G,p),Object.defineProperty(G.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(G.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(G.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(G.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(G.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(G.prototype,"xmlVersion",{get:function(){return null}}),G.prototype.toString=function(W){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(W))},G}(I)}).call(this)},83920:function(J,ee,g){(function(){var R,I,j={}.hasOwnProperty;I=g(8232),R=g(2885),J.exports=function(m){function p(G,W,L){if(p.__super__.constructor.call(this,G),null==W)throw new Error("Missing DTD notation name. "+this.debugInfo(W));if(!L.pubID&&!L.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(W));this.name=this.stringify.name(W),this.type=R.NotationDeclaration,null!=L.pubID&&(this.pubID=this.stringify.dtdPubID(L.pubID)),null!=L.sysID&&(this.sysID=this.stringify.dtdSysID(L.sysID))}return function(m,p){for(var G in p)j.call(p,G)&&(m[G]=p[G]);function W(){this.constructor=m}W.prototype=p.prototype,m.prototype=new W,m.__super__=p.prototype}(p,m),Object.defineProperty(p.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(p.prototype,"systemId",{get:function(){return this.sysID}}),p.prototype.toString=function(G){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(G))},p}(I)}).call(this)},30126:function(J,ee,g){(function(){var R,I,b,m={}.hasOwnProperty;b=g(66557).isObject,I=g(8232),R=g(2885),J.exports=function(p){function G(W,L,Y,X){var h;G.__super__.constructor.call(this,W),b(L)&&(L=(h=L).version,Y=h.encoding,X=h.standalone),L||(L="1.0"),this.type=R.Declaration,this.version=this.stringify.xmlVersion(L),null!=Y&&(this.encoding=this.stringify.xmlEncoding(Y)),null!=X&&(this.standalone=this.stringify.xmlStandalone(X))}return function(p,G){for(var W in G)m.call(G,W)&&(p[W]=G[W]);function L(){this.constructor=p}L.prototype=G.prototype,p.prototype=new L,p.__super__=G.prototype}(G,p),G.prototype.toString=function(W){return this.options.writer.declaration(this,this.options.writer.filterOptions(W))},G}(I)}).call(this)},69108:function(J,ee,g){(function(){var R,r,I,b,j,p,G,W,Y={}.hasOwnProperty;W=g(66557).isObject,G=g(8232),R=g(2885),r=g(44555),b=g(89517),I=g(63988),j=g(83920),p=g(83689),J.exports=function(X){function h(v,D,$){var z,P,S,f,d,u;if(h.__super__.constructor.call(this,v),this.type=R.DocType,v.children)for(P=0,S=(f=v.children).length;P<S;P++)if((z=f[P]).type===R.Element){this.name=z.name;break}this.documentObject=v,W(D)&&(D=(d=D).pubID,$=d.sysID),null==$&&($=(u=[D,$])[0],D=u[1]),null!=D&&(this.pubID=this.stringify.dtdPubID(D)),null!=$&&(this.sysID=this.stringify.dtdSysID($))}return function(X,h){for(var v in h)Y.call(h,v)&&(X[v]=h[v]);function D(){this.constructor=X}D.prototype=h.prototype,X.prototype=new D,X.__super__=h.prototype}(h,X),Object.defineProperty(h.prototype,"entities",{get:function(){var v,D,$,z,P;for(z={},D=0,$=(P=this.children).length;D<$;D++)(v=P[D]).type===R.EntityDeclaration&&!v.pe&&(z[v.name]=v);return new p(z)}}),Object.defineProperty(h.prototype,"notations",{get:function(){var v,D,$,z,P;for(z={},D=0,$=(P=this.children).length;D<$;D++)(v=P[D]).type===R.NotationDeclaration&&(z[v.name]=v);return new p(z)}}),Object.defineProperty(h.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(h.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(h.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),h.prototype.element=function(v,D){var $;return $=new I(this,v,D),this.children.push($),this},h.prototype.attList=function(v,D,$,z,P){var S;return S=new r(this,v,D,$,z,P),this.children.push(S),this},h.prototype.entity=function(v,D){var $;return $=new b(this,!1,v,D),this.children.push($),this},h.prototype.pEntity=function(v,D){var $;return $=new b(this,!0,v,D),this.children.push($),this},h.prototype.notation=function(v,D){var $;return $=new j(this,v,D),this.children.push($),this},h.prototype.toString=function(v){return this.options.writer.docType(this,this.options.writer.filterOptions(v))},h.prototype.ele=function(v,D){return this.element(v,D)},h.prototype.att=function(v,D,$,z,P){return this.attList(v,D,$,z,P)},h.prototype.ent=function(v,D){return this.entity(v,D)},h.prototype.pent=function(v,D){return this.pEntity(v,D)},h.prototype.not=function(v,D){return this.notation(v,D)},h.prototype.up=function(){return this.root()||this.documentObject},h.prototype.isEqualNode=function(v){return!(!h.__super__.isEqualNode.apply(this,arguments).isEqualNode(v)||v.name!==this.name||v.publicId!==this.publicId||v.systemId!==this.systemId)},h}(G)}).call(this)},98041:function(J,ee,g){(function(){var R,r,I,j,m,p,G,L={}.hasOwnProperty;G=g(66557).isPlainObject,I=g(45584),r=g(38846),j=g(8232),R=g(2885),p=g(11516),m=g(82066),J.exports=function(Y){function X(h){X.__super__.constructor.call(this,null),this.name="#document",this.type=R.Document,this.documentURI=null,this.domConfig=new r,h||(h={}),h.writer||(h.writer=new m),this.options=h,this.stringify=new p(h)}return function(Y,X){for(var h in X)L.call(X,h)&&(Y[h]=X[h]);function v(){this.constructor=Y}v.prototype=X.prototype,Y.prototype=new v,Y.__super__=X.prototype}(X,Y),Object.defineProperty(X.prototype,"implementation",{value:new I}),Object.defineProperty(X.prototype,"doctype",{get:function(){var h,v,D,$;for(v=0,D=($=this.children).length;v<D;v++)if((h=$[v]).type===R.DocType)return h;return null}}),Object.defineProperty(X.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(X.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(X.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(X.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===R.Declaration?this.children[0].encoding:null}}),Object.defineProperty(X.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===R.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(X.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===R.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(X.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(X.prototype,"origin",{get:function(){return null}}),Object.defineProperty(X.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(X.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(X.prototype,"contentType",{get:function(){return null}}),X.prototype.end=function(h){var v;return v={},h?G(h)&&(v=h,h=this.options.writer):h=this.options.writer,h.document(this,h.filterOptions(v))},X.prototype.toString=function(h){return this.options.writer.document(this,this.options.writer.filterOptions(h))},X.prototype.createElement=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.createTextNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.createComment=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.createCDATASection=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.createProcessingInstruction=function(h,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.createAttribute=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.createEntityReference=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.getElementsByTagName=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.importNode=function(h,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.createElementNS=function(h,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.createAttributeNS=function(h,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.getElementsByTagNameNS=function(h,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.getElementById=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.adoptNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.renameNode=function(h,v,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.getElementsByClassName=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.createEvent=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.createNodeIterator=function(h,v,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},X.prototype.createTreeWalker=function(h,v,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},X}(j)}).call(this)},26079:function(J,ee,g){(function(){var R,r,I,b,j,m,p,G,W,L,Y,X,v,D,$,z,P,S,f,d,u,E,B,C={}.hasOwnProperty;B=g(66557),u=B.isObject,d=B.isFunction,E=B.isPlainObject,f=B.getValue,R=g(2885),X=g(98041),v=g(39878),b=g(49103),j=g(33475),$=g(504),S=g(59651),D=g(72279),L=g(30126),Y=g(69108),m=g(44555),G=g(89517),p=g(63988),W=g(83920),I=g(77474),P=g(11516),z=g(82066),r=g(9813),J.exports=function(){function Z(w,K,ne){var re;this.name="?xml",this.type=R.Document,w||(w={}),re={},w.writer?E(w.writer)&&(re=w.writer,w.writer=new z):w.writer=new z,this.options=w,this.writer=w.writer,this.writerOptions=this.writer.filterOptions(re),this.stringify=new P(w),this.onDataCallback=K||function(){},this.onEndCallback=ne||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return Z.prototype.createChildNode=function(w){var ne,re,Se,Pe,ge,e,ae;switch(w.type){case R.CData:this.cdata(w.value);break;case R.Comment:this.comment(w.value);break;case R.Element:for(ne in re={},e=w.attribs)C.call(e,ne)&&(re[ne]=e[ne].value);this.node(w.name,re);break;case R.Dummy:this.dummy();break;case R.Raw:this.raw(w.value);break;case R.Text:this.text(w.value);break;case R.ProcessingInstruction:this.instruction(w.target,w.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+w.constructor.name)}for(Pe=0,ge=(ae=w.children).length;Pe<ge;Pe++)this.createChildNode(Se=ae[Pe]),Se.type===R.Element&&this.up();return this},Z.prototype.dummy=function(){return this},Z.prototype.node=function(w,K,ne){var re;if(null==w)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(w));return this.openCurrent(),w=f(w),null==K&&(K={}),K=f(K),u(K)||(ne=(re=[K,ne])[0],K=re[1]),this.currentNode=new v(this,w,K),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=ne&&this.text(ne),this},Z.prototype.element=function(w,K,ne){var re,Se,Pe,ge,e,ae;if(this.currentNode&&this.currentNode.type===R.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(w)||u(w)||d(w))for(ge=this.options.noValidation,this.options.noValidation=!0,(ae=new X(this.options).element("TEMP_ROOT")).element(w),this.options.noValidation=ge,Se=0,Pe=(e=ae.children).length;Se<Pe;Se++)this.createChildNode(re=e[Se]),re.type===R.Element&&this.up();else this.node(w,K,ne);return this},Z.prototype.attribute=function(w,K){var ne;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(w));if(null!=w&&(w=f(w)),u(w))for(ne in w)C.call(w,ne)&&this.attribute(ne,w[ne]);else d(K)&&(K=K.apply()),this.options.keepNullAttributes&&null==K?this.currentNode.attribs[w]=new I(this,w,""):null!=K&&(this.currentNode.attribs[w]=new I(this,w,K));return this},Z.prototype.text=function(w){var K;return this.openCurrent(),K=new S(this,w),this.onData(this.writer.text(K,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Z.prototype.cdata=function(w){var K;return this.openCurrent(),K=new b(this,w),this.onData(this.writer.cdata(K,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Z.prototype.comment=function(w){var K;return this.openCurrent(),K=new j(this,w),this.onData(this.writer.comment(K,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Z.prototype.raw=function(w){var K;return this.openCurrent(),K=new $(this,w),this.onData(this.writer.raw(K,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Z.prototype.instruction=function(w,K){var ne,re,Pe,ge;if(this.openCurrent(),null!=w&&(w=f(w)),null!=K&&(K=f(K)),Array.isArray(w))for(ne=0,Pe=w.length;ne<Pe;ne++)this.instruction(re=w[ne]);else if(u(w))for(re in w)C.call(w,re)&&this.instruction(re,w[re]);else d(K)&&(K=K.apply()),ge=new D(this,w,K),this.onData(this.writer.processingInstruction(ge,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},Z.prototype.declaration=function(w,K,ne){var re;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return re=new L(this,w,K,ne),this.onData(this.writer.declaration(re,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Z.prototype.doctype=function(w,K,ne){if(this.openCurrent(),null==w)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new Y(this,K,ne),this.currentNode.rootNodeName=w,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},Z.prototype.dtdElement=function(w,K){var ne;return this.openCurrent(),ne=new p(this,w,K),this.onData(this.writer.dtdElement(ne,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Z.prototype.attList=function(w,K,ne,re,Se){var Pe;return this.openCurrent(),Pe=new m(this,w,K,ne,re,Se),this.onData(this.writer.dtdAttList(Pe,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Z.prototype.entity=function(w,K){var ne;return this.openCurrent(),ne=new G(this,!1,w,K),this.onData(this.writer.dtdEntity(ne,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Z.prototype.pEntity=function(w,K){var ne;return this.openCurrent(),ne=new G(this,!0,w,K),this.onData(this.writer.dtdEntity(ne,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Z.prototype.notation=function(w,K){var ne;return this.openCurrent(),ne=new W(this,w,K),this.onData(this.writer.dtdNotation(ne,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},Z.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},Z.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},Z.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},Z.prototype.openNode=function(w){var ne,re,Se;if(!w.isOpen){if(!this.root&&0===this.currentLevel&&w.type===R.Element&&(this.root=w),ne="",w.type===R.Element){for(re in this.writerOptions.state=r.OpenTag,ne=this.writer.indent(w,this.writerOptions,this.currentLevel)+"<"+w.name,Se=w.attribs)C.call(Se,re)&&(ne+=this.writer.attribute(Se[re],this.writerOptions,this.currentLevel));ne+=(w.children?">":"/>")+this.writer.endline(w,this.writerOptions,this.currentLevel),this.writerOptions.state=r.InsideTag}else this.writerOptions.state=r.OpenTag,ne=this.writer.indent(w,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+w.rootNodeName,w.pubID&&w.sysID?ne+=' PUBLIC "'+w.pubID+'" "'+w.sysID+'"':w.sysID&&(ne+=' SYSTEM "'+w.sysID+'"'),w.children?(ne+=" [",this.writerOptions.state=r.InsideTag):(this.writerOptions.state=r.CloseTag,ne+=">"),ne+=this.writer.endline(w,this.writerOptions,this.currentLevel);return this.onData(ne,this.currentLevel),w.isOpen=!0}},Z.prototype.closeNode=function(w){var K;if(!w.isClosed)return"",this.writerOptions.state=r.CloseTag,K=w.type===R.Element?this.writer.indent(w,this.writerOptions,this.currentLevel)+"</"+w.name+">"+this.writer.endline(w,this.writerOptions,this.currentLevel):this.writer.indent(w,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(w,this.writerOptions,this.currentLevel),this.writerOptions.state=r.None,this.onData(K,this.currentLevel),w.isClosed=!0},Z.prototype.onData=function(w,K){return this.documentStarted=!0,this.onDataCallback(w,K+1)},Z.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},Z.prototype.debugInfo=function(w){return null==w?"":"node: <"+w+">"},Z.prototype.ele=function(){return this.element.apply(this,arguments)},Z.prototype.nod=function(w,K,ne){return this.node(w,K,ne)},Z.prototype.txt=function(w){return this.text(w)},Z.prototype.dat=function(w){return this.cdata(w)},Z.prototype.com=function(w){return this.comment(w)},Z.prototype.ins=function(w,K){return this.instruction(w,K)},Z.prototype.dec=function(w,K,ne){return this.declaration(w,K,ne)},Z.prototype.dtd=function(w,K,ne){return this.doctype(w,K,ne)},Z.prototype.e=function(w,K,ne){return this.element(w,K,ne)},Z.prototype.n=function(w,K,ne){return this.node(w,K,ne)},Z.prototype.t=function(w){return this.text(w)},Z.prototype.d=function(w){return this.cdata(w)},Z.prototype.c=function(w){return this.comment(w)},Z.prototype.r=function(w){return this.raw(w)},Z.prototype.i=function(w,K){return this.instruction(w,K)},Z.prototype.att=function(){return this.currentNode&&this.currentNode.type===R.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},Z.prototype.a=function(){return this.currentNode&&this.currentNode.type===R.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},Z.prototype.ent=function(w,K){return this.entity(w,K)},Z.prototype.pent=function(w,K){return this.pEntity(w,K)},Z.prototype.not=function(w,K){return this.notation(w,K)},Z}()}).call(this)},78926:function(J,ee,g){(function(){var R,I,j={}.hasOwnProperty;I=g(8232),R=g(2885),J.exports=function(m){function p(G){p.__super__.constructor.call(this,G),this.type=R.Dummy}return function(m,p){for(var G in p)j.call(p,G)&&(m[G]=p[G]);function W(){this.constructor=m}W.prototype=p.prototype,m.prototype=new W,m.__super__=p.prototype}(p,m),p.prototype.clone=function(){return Object.create(this)},p.prototype.toString=function(G){return""},p}(I)}).call(this)},39878:function(J,ee,g){(function(){var R,r,b,j,m,p,G,W,Y={}.hasOwnProperty;W=g(66557),G=W.isObject,p=W.isFunction,m=W.getValue,j=g(8232),R=g(2885),r=g(77474),b=g(83689),J.exports=function(X){function h(v,D,$){var z,P,S,f;if(h.__super__.constructor.call(this,v),null==D)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(D),this.type=R.Element,this.attribs={},this.schemaTypeInfo=null,null!=$&&this.attribute($),v.type===R.Document&&(this.isRoot=!0,this.documentObject=v,v.rootObject=this,v.children))for(P=0,S=(f=v.children).length;P<S;P++)if((z=f[P]).type===R.DocType){z.name=this.name;break}}return function(X,h){for(var v in h)Y.call(h,v)&&(X[v]=h[v]);function D(){this.constructor=X}D.prototype=h.prototype,X.prototype=new D,X.__super__=h.prototype}(h,X),Object.defineProperty(h.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(h.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(h.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(h.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(h.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new b(this.attribs)),this.attributeMap}}),h.prototype.clone=function(){var D,$,z;for(D in($=Object.create(this)).isRoot&&($.documentObject=null),$.attribs={},z=this.attribs)Y.call(z,D)&&($.attribs[D]=z[D].clone());return $.children=[],this.children.forEach(function(P){var S;return(S=P.clone()).parent=$,$.children.push(S)}),$},h.prototype.attribute=function(v,D){var $;if(null!=v&&(v=m(v)),G(v))for($ in v)Y.call(v,$)&&this.attribute($,v[$]);else p(D)&&(D=D.apply()),this.options.keepNullAttributes&&null==D?this.attribs[v]=new r(this,v,""):null!=D&&(this.attribs[v]=new r(this,v,D));return this},h.prototype.removeAttribute=function(v){var $,z;if(null==v)throw new Error("Missing attribute name. "+this.debugInfo());if(v=m(v),Array.isArray(v))for($=0,z=v.length;$<z;$++)delete this.attribs[v[$]];else delete this.attribs[v];return this},h.prototype.toString=function(v){return this.options.writer.element(this,this.options.writer.filterOptions(v))},h.prototype.att=function(v,D){return this.attribute(v,D)},h.prototype.a=function(v,D){return this.attribute(v,D)},h.prototype.getAttribute=function(v){return this.attribs.hasOwnProperty(v)?this.attribs[v].value:null},h.prototype.setAttribute=function(v,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNode=function(v){return this.attribs.hasOwnProperty(v)?this.attribs[v]:null},h.prototype.setAttributeNode=function(v){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.removeAttributeNode=function(v){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagName=function(v){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNS=function(v,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setAttributeNS=function(v,D,$){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.removeAttributeNS=function(v,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNodeNS=function(v,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setAttributeNodeNS=function(v){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagNameNS=function(v,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.hasAttribute=function(v){return this.attribs.hasOwnProperty(v)},h.prototype.hasAttributeNS=function(v,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setIdAttribute=function(v,D){return this.attribs.hasOwnProperty(v)?this.attribs[v].isId:D},h.prototype.setIdAttributeNS=function(v,D,$){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setIdAttributeNode=function(v,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagName=function(v){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagNameNS=function(v,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByClassName=function(v){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.isEqualNode=function(v){var D,$,z;if(!h.__super__.isEqualNode.apply(this,arguments).isEqualNode(v)||v.namespaceURI!==this.namespaceURI||v.prefix!==this.prefix||v.localName!==this.localName||v.attribs.length!==this.attribs.length)return!1;for(D=$=0,z=this.attribs.length-1;0<=z?$<=z:$>=z;D=0<=z?++$:--$)if(!this.attribs[D].isEqualNode(v.attribs[D]))return!1;return!0},h}(j)}).call(this)},83689:function(J){(function(){J.exports=function(){function g(R){this.nodes=R}return Object.defineProperty(g.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),g.prototype.clone=function(){return this.nodes=null},g.prototype.getNamedItem=function(R){return this.nodes[R]},g.prototype.setNamedItem=function(R){var r;return r=this.nodes[R.nodeName],this.nodes[R.nodeName]=R,r||null},g.prototype.removeNamedItem=function(R){var r;return r=this.nodes[R],delete this.nodes[R],r||null},g.prototype.item=function(R){return this.nodes[Object.keys(this.nodes)[R]]||null},g.prototype.getNamedItemNS=function(R,r){throw new Error("This DOM method is not implemented.")},g.prototype.setNamedItemNS=function(R){throw new Error("This DOM method is not implemented.")},g.prototype.removeNamedItemNS=function(R,r){throw new Error("This DOM method is not implemented.")},g}()}).call(this)},8232:function(J,ee,g){(function(){var R,r,I,b,j,m,p,G,Y,X,h,v,D,$,z,P,S,f={}.hasOwnProperty;S=g(66557),P=S.isObject,z=S.isFunction,$=S.isEmpty,D=S.getValue,G=null,I=null,b=null,j=null,m=null,h=null,v=null,X=null,p=null,r=null,Y=null,R=null,J.exports=function(){function d(u){this.parent=u,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,G||(G=g(39878),I=g(49103),b=g(33475),j=g(30126),m=g(69108),h=g(504),v=g(59651),X=g(72279),p=g(78926),r=g(2885),Y=g(31216),g(83689),R=g(12831))}return Object.defineProperty(d.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(d.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(d.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(d.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(d.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new Y(this.children)),this.childNodeList}}),Object.defineProperty(d.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(d.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(d.prototype,"previousSibling",{get:function(){var u;return u=this.parent.children.indexOf(this),this.parent.children[u-1]||null}}),Object.defineProperty(d.prototype,"nextSibling",{get:function(){var u;return u=this.parent.children.indexOf(this),this.parent.children[u+1]||null}}),Object.defineProperty(d.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(d.prototype,"textContent",{get:function(){var u,E,B,C,Z;if(this.nodeType===r.Element||this.nodeType===r.DocumentFragment){for(Z="",E=0,B=(C=this.children).length;E<B;E++)(u=C[E]).textContent&&(Z+=u.textContent);return Z}return null},set:function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),d.prototype.setParent=function(u){var B,C,Z,w;for(this.parent=u,u&&(this.options=u.options,this.stringify=u.stringify),w=[],B=0,C=(Z=this.children).length;B<C;B++)w.push(Z[B].setParent(this));return w},d.prototype.element=function(u,E,B){var C,w,K,ne,re,Se,Pe,ge,e,ae;if(re=null,null===E&&null==B&&(E=(ge=[{},null])[0],B=ge[1]),null==E&&(E={}),E=D(E),P(E)||(B=(e=[E,B])[0],E=e[1]),null!=u&&(u=D(u)),Array.isArray(u))for(w=0,Se=u.length;w<Se;w++)re=this.element(u[w]);else if(z(u))re=this.element(u.apply());else if(P(u)){for(ne in u)if(f.call(u,ne))if(z(ae=u[ne])&&(ae=ae.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===ne.indexOf(this.stringify.convertAttKey))re=this.attribute(ne.substr(this.stringify.convertAttKey.length),ae);else if(!this.options.separateArrayItems&&Array.isArray(ae)&&$(ae))re=this.dummy();else if(P(ae)&&$(ae))re=this.element(ne);else if(this.options.keepNullNodes||null!=ae)if(!this.options.separateArrayItems&&Array.isArray(ae))for(K=0,Pe=ae.length;K<Pe;K++)(C={})[ne]=ae[K],re=this.element(C);else P(ae)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===ne.indexOf(this.stringify.convertTextKey)?re=this.element(ae):(re=this.element(ne)).element(ae):re=this.element(ne,ae);else re=this.dummy()}else re=this.options.keepNullNodes||null!==B?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===u.indexOf(this.stringify.convertTextKey)?this.text(B):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===u.indexOf(this.stringify.convertCDataKey)?this.cdata(B):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===u.indexOf(this.stringify.convertCommentKey)?this.comment(B):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===u.indexOf(this.stringify.convertRawKey)?this.raw(B):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===u.indexOf(this.stringify.convertPIKey)?this.instruction(u.substr(this.stringify.convertPIKey.length),B):this.node(u,E,B):this.dummy();if(null==re)throw new Error("Could not create any elements with: "+u+". "+this.debugInfo());return re},d.prototype.insertBefore=function(u,E,B){var C,Z,w,K,ne;if(u?.type)return K=E,(w=u).setParent(this),K?(Z=children.indexOf(K),ne=children.splice(Z),children.push(w),Array.prototype.push.apply(children,ne)):children.push(w),w;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(u));return Z=this.parent.children.indexOf(this),ne=this.parent.children.splice(Z),C=this.parent.element(u,E,B),Array.prototype.push.apply(this.parent.children,ne),C},d.prototype.insertAfter=function(u,E,B){var C,Z,w;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(u));return Z=this.parent.children.indexOf(this),w=this.parent.children.splice(Z+1),C=this.parent.element(u,E,B),Array.prototype.push.apply(this.parent.children,w),C},d.prototype.remove=function(){var u;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return u=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[u,u-u+1].concat([])),this.parent},d.prototype.node=function(u,E,B){var C,Z;return null!=u&&(u=D(u)),E||(E={}),E=D(E),P(E)||(B=(Z=[E,B])[0],E=Z[1]),C=new G(this,u,E),null!=B&&C.text(B),this.children.push(C),C},d.prototype.text=function(u){var E;return P(u)&&this.element(u),E=new v(this,u),this.children.push(E),this},d.prototype.cdata=function(u){var E;return E=new I(this,u),this.children.push(E),this},d.prototype.comment=function(u){var E;return E=new b(this,u),this.children.push(E),this},d.prototype.commentBefore=function(u){var B,C;return B=this.parent.children.indexOf(this),C=this.parent.children.splice(B),this.parent.comment(u),Array.prototype.push.apply(this.parent.children,C),this},d.prototype.commentAfter=function(u){var B,C;return B=this.parent.children.indexOf(this),C=this.parent.children.splice(B+1),this.parent.comment(u),Array.prototype.push.apply(this.parent.children,C),this},d.prototype.raw=function(u){var E;return E=new h(this,u),this.children.push(E),this},d.prototype.dummy=function(){return new p(this)},d.prototype.instruction=function(u,E){var B,Z,w,K;if(null!=u&&(u=D(u)),null!=E&&(E=D(E)),Array.isArray(u))for(w=0,K=u.length;w<K;w++)this.instruction(B=u[w]);else if(P(u))for(B in u)f.call(u,B)&&this.instruction(B,u[B]);else z(E)&&(E=E.apply()),Z=new X(this,u,E),this.children.push(Z);return this},d.prototype.instructionBefore=function(u,E){var C,Z;return C=this.parent.children.indexOf(this),Z=this.parent.children.splice(C),this.parent.instruction(u,E),Array.prototype.push.apply(this.parent.children,Z),this},d.prototype.instructionAfter=function(u,E){var C,Z;return C=this.parent.children.indexOf(this),Z=this.parent.children.splice(C+1),this.parent.instruction(u,E),Array.prototype.push.apply(this.parent.children,Z),this},d.prototype.declaration=function(u,E,B){var C,Z;return C=this.document(),Z=new j(C,u,E,B),0===C.children.length?C.children.unshift(Z):C.children[0].type===r.Declaration?C.children[0]=Z:C.children.unshift(Z),C.root()||C},d.prototype.dtd=function(u,E){var C,Z,w,K,ne,re,Se,Pe,ge;for(C=this.document(),Z=new m(C,u,E),w=K=0,re=(Pe=C.children).length;K<re;w=++K)if(Pe[w].type===r.DocType)return C.children[w]=Z,Z;for(w=ne=0,Se=(ge=C.children).length;ne<Se;w=++ne)if(ge[w].isRoot)return C.children.splice(w,0,Z),Z;return C.children.push(Z),Z},d.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},d.prototype.root=function(){var u;for(u=this;u;){if(u.type===r.Document)return u.rootObject;if(u.isRoot)return u;u=u.parent}},d.prototype.document=function(){var u;for(u=this;u;){if(u.type===r.Document)return u;u=u.parent}},d.prototype.end=function(u){return this.document().end(u)},d.prototype.prev=function(){var u;if((u=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[u-1]},d.prototype.next=function(){var u;if(-1===(u=this.parent.children.indexOf(this))||u===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[u+1]},d.prototype.importDocument=function(u){var E;return(E=u.root().clone()).parent=this,E.isRoot=!1,this.children.push(E),this},d.prototype.debugInfo=function(u){var E,B;return null!=(u=u||this.name)||null!=(E=this.parent)&&E.name?null==u?"parent: <"+this.parent.name+">":null!=(B=this.parent)&&B.name?"node: <"+u+">, parent: <"+this.parent.name+">":"node: <"+u+">":""},d.prototype.ele=function(u,E,B){return this.element(u,E,B)},d.prototype.nod=function(u,E,B){return this.node(u,E,B)},d.prototype.txt=function(u){return this.text(u)},d.prototype.dat=function(u){return this.cdata(u)},d.prototype.com=function(u){return this.comment(u)},d.prototype.ins=function(u,E){return this.instruction(u,E)},d.prototype.doc=function(){return this.document()},d.prototype.dec=function(u,E,B){return this.declaration(u,E,B)},d.prototype.e=function(u,E,B){return this.element(u,E,B)},d.prototype.n=function(u,E,B){return this.node(u,E,B)},d.prototype.t=function(u){return this.text(u)},d.prototype.d=function(u){return this.cdata(u)},d.prototype.c=function(u){return this.comment(u)},d.prototype.r=function(u){return this.raw(u)},d.prototype.i=function(u,E){return this.instruction(u,E)},d.prototype.u=function(){return this.up()},d.prototype.importXMLBuilder=function(u){return this.importDocument(u)},d.prototype.replaceChild=function(u,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.removeChild=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.appendChild=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.hasChildNodes=function(){return 0!==this.children.length},d.prototype.cloneNode=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.isSupported=function(u,E){return!0},d.prototype.hasAttributes=function(){return 0!==this.attribs.length},d.prototype.compareDocumentPosition=function(u){var E,B;return(E=this)===u?0:this.document()!==u.document()?(B=R.Disconnected|R.ImplementationSpecific,Math.random()<.5?B|=R.Preceding:B|=R.Following,B):E.isAncestor(u)?R.Contains|R.Preceding:E.isDescendant(u)?R.Contains|R.Following:E.isPreceding(u)?R.Preceding:R.Following},d.prototype.isSameNode=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.lookupPrefix=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.isDefaultNamespace=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.lookupNamespaceURI=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.isEqualNode=function(u){var E,B,C;if(u.nodeType!==this.nodeType||u.children.length!==this.children.length)return!1;for(E=B=0,C=this.children.length-1;0<=C?B<=C:B>=C;E=0<=C?++B:--B)if(!this.children[E].isEqualNode(u.children[E]))return!1;return!0},d.prototype.getFeature=function(u,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.setUserData=function(u,E,B){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getUserData=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.contains=function(u){return!!u&&(u===this||this.isDescendant(u))},d.prototype.isDescendant=function(u){var E,C,Z,w;for(C=0,Z=(w=this.children).length;C<Z;C++)if(u===(E=w[C])||E.isDescendant(u))return!0;return!1},d.prototype.isAncestor=function(u){return u.isDescendant(this)},d.prototype.isPreceding=function(u){var E,B;return E=this.treePosition(u),B=this.treePosition(this),-1!==E&&-1!==B&&E<B},d.prototype.isFollowing=function(u){var E,B;return E=this.treePosition(u),B=this.treePosition(this),-1!==E&&-1!==B&&E>B},d.prototype.treePosition=function(u){var E,B;return B=0,E=!1,this.foreachTreeNode(this.document(),function(C){if(B++,!E&&C===u)return E=!0}),E?B:-1},d.prototype.foreachTreeNode=function(u,E){var B,C,Z,w,K;for(u||(u=this.document()),C=0,Z=(w=u.children).length;C<Z;C++){if(K=E(B=w[C]))return K;if(K=this.foreachTreeNode(B,E))return K}},d}()}).call(this)},31216:function(J){(function(){J.exports=function(){function g(R){this.nodes=R}return Object.defineProperty(g.prototype,"length",{get:function(){return this.nodes.length||0}}),g.prototype.clone=function(){return this.nodes=null},g.prototype.item=function(R){return this.nodes[R]||null},g}()}).call(this)},72279:function(J,ee,g){(function(){var R,r,j={}.hasOwnProperty;R=g(2885),r=g(96189),J.exports=function(m){function p(G,W,L){if(p.__super__.constructor.call(this,G),null==W)throw new Error("Missing instruction target. "+this.debugInfo());this.type=R.ProcessingInstruction,this.target=this.stringify.insTarget(W),this.name=this.target,L&&(this.value=this.stringify.insValue(L))}return function(m,p){for(var G in p)j.call(p,G)&&(m[G]=p[G]);function W(){this.constructor=m}W.prototype=p.prototype,m.prototype=new W,m.__super__=p.prototype}(p,m),p.prototype.clone=function(){return Object.create(this)},p.prototype.toString=function(G){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(G))},p.prototype.isEqualNode=function(G){return!(!p.__super__.isEqualNode.apply(this,arguments).isEqualNode(G)||G.target!==this.target)},p}(r)}).call(this)},504:function(J,ee,g){(function(){var R,r,j={}.hasOwnProperty;R=g(2885),r=g(8232),J.exports=function(m){function p(G,W){if(p.__super__.constructor.call(this,G),null==W)throw new Error("Missing raw text. "+this.debugInfo());this.type=R.Raw,this.value=this.stringify.raw(W)}return function(m,p){for(var G in p)j.call(p,G)&&(m[G]=p[G]);function W(){this.constructor=m}W.prototype=p.prototype,m.prototype=new W,m.__super__=p.prototype}(p,m),p.prototype.clone=function(){return Object.create(this)},p.prototype.toString=function(G){return this.options.writer.raw(this,this.options.writer.filterOptions(G))},p}(r)}).call(this)},70443:function(J,ee,g){(function(){var R,r,b,m={}.hasOwnProperty;R=g(2885),b=g(22690),r=g(9813),J.exports=function(p){function G(W,L){this.stream=W,G.__super__.constructor.call(this,L)}return function(p,G){for(var W in G)m.call(G,W)&&(p[W]=G[W]);function L(){this.constructor=p}L.prototype=G.prototype,p.prototype=new L,p.__super__=G.prototype}(G,p),G.prototype.endline=function(W,L,Y){return W.isLastRootNode&&L.state===r.CloseTag?"":G.__super__.endline.call(this,W,L,Y)},G.prototype.document=function(W,L){var X,h,v,D,$,z,P,S;for(X=h=0,D=(z=W.children).length;h<D;X=++h)z[X].isLastRootNode=X===W.children.length-1;for(L=this.filterOptions(L),S=[],v=0,$=(P=W.children).length;v<$;v++)S.push(this.writeChildNode(P[v],L,0));return S},G.prototype.attribute=function(W,L,Y){return this.stream.write(G.__super__.attribute.call(this,W,L,Y))},G.prototype.cdata=function(W,L,Y){return this.stream.write(G.__super__.cdata.call(this,W,L,Y))},G.prototype.comment=function(W,L,Y){return this.stream.write(G.__super__.comment.call(this,W,L,Y))},G.prototype.declaration=function(W,L,Y){return this.stream.write(G.__super__.declaration.call(this,W,L,Y))},G.prototype.docType=function(W,L,Y){var h,v,D;if(Y||(Y=0),this.openNode(W,L,Y),L.state=r.OpenTag,this.stream.write(this.indent(W,L,Y)),this.stream.write("<!DOCTYPE "+W.root().name),W.pubID&&W.sysID?this.stream.write(' PUBLIC "'+W.pubID+'" "'+W.sysID+'"'):W.sysID&&this.stream.write(' SYSTEM "'+W.sysID+'"'),W.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(W,L,Y)),L.state=r.InsideTag,h=0,v=(D=W.children).length;h<v;h++)this.writeChildNode(D[h],L,Y+1);L.state=r.CloseTag,this.stream.write("]")}return L.state=r.CloseTag,this.stream.write(L.spaceBeforeSlash+">"),this.stream.write(this.endline(W,L,Y)),L.state=r.None,this.closeNode(W,L,Y)},G.prototype.element=function(W,L,Y){var v,D,$,z,P,f,d;for(P in Y||(Y=0),this.openNode(W,L,Y),L.state=r.OpenTag,this.stream.write(this.indent(W,L,Y)+"<"+W.name),f=W.attribs)m.call(f,P)&&this.attribute(f[P],L,Y);if(D=0===(v=W.children.length)?null:W.children[0],0===v||W.children.every(function(u){return(u.type===R.Text||u.type===R.Raw)&&""===u.value}))L.allowEmpty?(this.stream.write(">"),L.state=r.CloseTag,this.stream.write("</"+W.name+">")):(L.state=r.CloseTag,this.stream.write(L.spaceBeforeSlash+"/>"));else if(!L.pretty||1!==v||D.type!==R.Text&&D.type!==R.Raw||null==D.value){for(this.stream.write(">"+this.endline(W,L,Y)),L.state=r.InsideTag,$=0,z=(d=W.children).length;$<z;$++)this.writeChildNode(d[$],L,Y+1);L.state=r.CloseTag,this.stream.write(this.indent(W,L,Y)+"</"+W.name+">")}else this.stream.write(">"),L.state=r.InsideTag,L.suppressPrettyCount++,this.writeChildNode(D,L,Y+1),L.suppressPrettyCount--,L.state=r.CloseTag,this.stream.write("</"+W.name+">");return this.stream.write(this.endline(W,L,Y)),L.state=r.None,this.closeNode(W,L,Y)},G.prototype.processingInstruction=function(W,L,Y){return this.stream.write(G.__super__.processingInstruction.call(this,W,L,Y))},G.prototype.raw=function(W,L,Y){return this.stream.write(G.__super__.raw.call(this,W,L,Y))},G.prototype.text=function(W,L,Y){return this.stream.write(G.__super__.text.call(this,W,L,Y))},G.prototype.dtdAttList=function(W,L,Y){return this.stream.write(G.__super__.dtdAttList.call(this,W,L,Y))},G.prototype.dtdElement=function(W,L,Y){return this.stream.write(G.__super__.dtdElement.call(this,W,L,Y))},G.prototype.dtdEntity=function(W,L,Y){return this.stream.write(G.__super__.dtdEntity.call(this,W,L,Y))},G.prototype.dtdNotation=function(W,L,Y){return this.stream.write(G.__super__.dtdNotation.call(this,W,L,Y))},G}(b)}).call(this)},82066:function(J,ee,g){(function(){var r,b={}.hasOwnProperty;r=g(22690),J.exports=function(j){function m(p){m.__super__.constructor.call(this,p)}return function(j,m){for(var p in m)b.call(m,p)&&(j[p]=m[p]);function G(){this.constructor=j}G.prototype=m.prototype,j.prototype=new G,j.__super__=m.prototype}(m,j),m.prototype.document=function(p,G){var L,Y,X,h;for(G=this.filterOptions(G),X="",L=0,Y=(h=p.children).length;L<Y;L++)X+=this.writeChildNode(h[L],G,0);return G.pretty&&X.slice(-G.newline.length)===G.newline&&(X=X.slice(0,-G.newline.length)),X},m}(r)}).call(this)},11516:function(J){(function(){var g=function(r,I){return function(){return r.apply(I,arguments)}},R={}.hasOwnProperty;J.exports=function(){function r(I){var b,j;for(b in this.assertLegalName=g(this.assertLegalName,this),this.assertLegalChar=g(this.assertLegalChar,this),I||(I={}),this.options=I,this.options.version||(this.options.version="1.0"),j=I.stringify||{})R.call(j,b)&&(this[b]=j[b])}return r.prototype.name=function(I){return this.options.noValidation?I:this.assertLegalName(""+I||"")},r.prototype.text=function(I){return this.options.noValidation?I:this.assertLegalChar(this.textEscape(""+I||""))},r.prototype.cdata=function(I){return this.options.noValidation?I:(I=(I=""+I||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(I))},r.prototype.comment=function(I){if(this.options.noValidation)return I;if((I=""+I||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+I);return this.assertLegalChar(I)},r.prototype.raw=function(I){return this.options.noValidation?I:""+I||""},r.prototype.attValue=function(I){return this.options.noValidation?I:this.assertLegalChar(this.attEscape(I=""+I||""))},r.prototype.insTarget=function(I){return this.options.noValidation?I:this.assertLegalChar(""+I||"")},r.prototype.insValue=function(I){if(this.options.noValidation)return I;if((I=""+I||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+I);return this.assertLegalChar(I)},r.prototype.xmlVersion=function(I){if(this.options.noValidation)return I;if(!(I=""+I||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+I);return I},r.prototype.xmlEncoding=function(I){if(this.options.noValidation)return I;if(!(I=""+I||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+I);return this.assertLegalChar(I)},r.prototype.xmlStandalone=function(I){return this.options.noValidation?I:I?"yes":"no"},r.prototype.dtdPubID=function(I){return this.options.noValidation?I:this.assertLegalChar(""+I||"")},r.prototype.dtdSysID=function(I){return this.options.noValidation?I:this.assertLegalChar(""+I||"")},r.prototype.dtdElementValue=function(I){return this.options.noValidation?I:this.assertLegalChar(""+I||"")},r.prototype.dtdAttType=function(I){return this.options.noValidation?I:this.assertLegalChar(""+I||"")},r.prototype.dtdAttDefault=function(I){return this.options.noValidation?I:this.assertLegalChar(""+I||"")},r.prototype.dtdEntityValue=function(I){return this.options.noValidation?I:this.assertLegalChar(""+I||"")},r.prototype.dtdNData=function(I){return this.options.noValidation?I:this.assertLegalChar(""+I||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(I){var j;if(this.options.noValidation)return I;if("1.0"===this.options.version){if(j=I.match(/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+I+" at index "+j.index)}else if("1.1"===this.options.version&&(j=I.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/)))throw new Error("Invalid character in string: "+I+" at index "+j.index);return I},r.prototype.assertLegalName=function(I){if(this.options.noValidation)return I;if(this.assertLegalChar(I),!I.match(/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/))throw new Error("Invalid character in name");return I},r.prototype.textEscape=function(I){return this.options.noValidation?I:I.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},r.prototype.attEscape=function(I){return this.options.noValidation?I:I.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},r}()}).call(this)},59651:function(J,ee,g){(function(){var R,r,j={}.hasOwnProperty;R=g(2885),r=g(96189),J.exports=function(m){function p(G,W){if(p.__super__.constructor.call(this,G),null==W)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=R.Text,this.value=this.stringify.text(W)}return function(m,p){for(var G in p)j.call(p,G)&&(m[G]=p[G]);function W(){this.constructor=m}W.prototype=p.prototype,m.prototype=new W,m.__super__=p.prototype}(p,m),Object.defineProperty(p.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(p.prototype,"wholeText",{get:function(){var G,W,L;for(L="",W=this.previousSibling;W;)L=W.data+L,W=W.previousSibling;for(L+=this.data,G=this.nextSibling;G;)L+=G.data,G=G.nextSibling;return L}}),p.prototype.clone=function(){return Object.create(this)},p.prototype.toString=function(G){return this.options.writer.text(this,this.options.writer.filterOptions(G))},p.prototype.splitText=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.replaceWholeText=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},p}(r)}).call(this)},22690:function(J,ee,g){(function(){var R,r,z,P={}.hasOwnProperty;z=g(66557).assign,R=g(2885),g(30126),g(69108),g(49103),g(33475),g(39878),g(504),g(59651),g(72279),g(78926),g(44555),g(63988),g(89517),g(83920),r=g(9813),J.exports=function(){function S(f){var d,u,E;for(d in f||(f={}),this.options=f,u=f.writer||{})P.call(u,d)&&(E=u[d],this["_"+d]=this[d],this[d]=E)}return S.prototype.filterOptions=function(f){var d,u,E,B,C,Z,w,K;return f||(f={}),f=z({},this.options,f),(d={writer:this}).pretty=f.pretty||!1,d.allowEmpty=f.allowEmpty||!1,d.indent=null!=(u=f.indent)?u:"  ",d.newline=null!=(E=f.newline)?E:"\n",d.offset=null!=(B=f.offset)?B:0,d.dontPrettyTextNodes=null!=(C=null!=(Z=f.dontPrettyTextNodes)?Z:f.dontprettytextnodes)?C:0,d.spaceBeforeSlash=null!=(w=null!=(K=f.spaceBeforeSlash)?K:f.spacebeforeslash)?w:"",!0===d.spaceBeforeSlash&&(d.spaceBeforeSlash=" "),d.suppressPrettyCount=0,d.user={},d.state=r.None,d},S.prototype.indent=function(f,d,u){var E;return!d.pretty||d.suppressPrettyCount?"":d.pretty&&(E=(u||0)+d.offset+1)>0?new Array(E).join(d.indent):""},S.prototype.endline=function(f,d,u){return!d.pretty||d.suppressPrettyCount?"":d.newline},S.prototype.attribute=function(f,d,u){var E;return this.openAttribute(f,d,u),E=" "+f.name+'="'+f.value+'"',this.closeAttribute(f,d,u),E},S.prototype.cdata=function(f,d,u){var E;return this.openNode(f,d,u),d.state=r.OpenTag,E=this.indent(f,d,u)+"<![CDATA[",d.state=r.InsideTag,E+=f.value,d.state=r.CloseTag,E+="]]>"+this.endline(f,d,u),d.state=r.None,this.closeNode(f,d,u),E},S.prototype.comment=function(f,d,u){var E;return this.openNode(f,d,u),d.state=r.OpenTag,E=this.indent(f,d,u)+"\x3c!-- ",d.state=r.InsideTag,E+=f.value,d.state=r.CloseTag,E+=" --\x3e"+this.endline(f,d,u),d.state=r.None,this.closeNode(f,d,u),E},S.prototype.declaration=function(f,d,u){var E;return this.openNode(f,d,u),d.state=r.OpenTag,E=this.indent(f,d,u)+"<?xml",d.state=r.InsideTag,E+=' version="'+f.version+'"',null!=f.encoding&&(E+=' encoding="'+f.encoding+'"'),null!=f.standalone&&(E+=' standalone="'+f.standalone+'"'),d.state=r.CloseTag,E+=d.spaceBeforeSlash+"?>",E+=this.endline(f,d,u),d.state=r.None,this.closeNode(f,d,u),E},S.prototype.docType=function(f,d,u){var B,C,Z,w;if(u||(u=0),this.openNode(f,d,u),d.state=r.OpenTag,Z=this.indent(f,d,u),Z+="<!DOCTYPE "+f.root().name,f.pubID&&f.sysID?Z+=' PUBLIC "'+f.pubID+'" "'+f.sysID+'"':f.sysID&&(Z+=' SYSTEM "'+f.sysID+'"'),f.children.length>0){for(Z+=" [",Z+=this.endline(f,d,u),d.state=r.InsideTag,B=0,C=(w=f.children).length;B<C;B++)Z+=this.writeChildNode(w[B],d,u+1);d.state=r.CloseTag,Z+="]"}return d.state=r.CloseTag,Z+=d.spaceBeforeSlash+">",Z+=this.endline(f,d,u),d.state=r.None,this.closeNode(f,d,u),Z},S.prototype.element=function(f,d,u){var B,C,Z,w,K,ne,re,Se,Pe,ge,e,ae,We;for(Se in u||(u=0),Pe=!1,ge="",this.openNode(f,d,u),d.state=r.OpenTag,ge+=this.indent(f,d,u)+"<"+f.name,e=f.attribs)P.call(e,Se)&&(ge+=this.attribute(e[Se],d,u));if(Z=0===(C=f.children.length)?null:f.children[0],0===C||f.children.every(function(Ae){return(Ae.type===R.Text||Ae.type===R.Raw)&&""===Ae.value}))d.allowEmpty?(ge+=">",d.state=r.CloseTag,ge+="</"+f.name+">"+this.endline(f,d,u)):(d.state=r.CloseTag,ge+=d.spaceBeforeSlash+"/>"+this.endline(f,d,u));else if(!d.pretty||1!==C||Z.type!==R.Text&&Z.type!==R.Raw||null==Z.value){if(d.dontPrettyTextNodes)for(w=0,ne=(ae=f.children).length;w<ne;w++)if(((B=ae[w]).type===R.Text||B.type===R.Raw)&&null!=B.value){d.suppressPrettyCount++,Pe=!0;break}for(ge+=">"+this.endline(f,d,u),d.state=r.InsideTag,K=0,re=(We=f.children).length;K<re;K++)ge+=this.writeChildNode(B=We[K],d,u+1);d.state=r.CloseTag,ge+=this.indent(f,d,u)+"</"+f.name+">",Pe&&d.suppressPrettyCount--,ge+=this.endline(f,d,u),d.state=r.None}else ge+=">",d.state=r.InsideTag,d.suppressPrettyCount++,Pe=!0,ge+=this.writeChildNode(Z,d,u+1),d.suppressPrettyCount--,Pe=!1,d.state=r.CloseTag,ge+="</"+f.name+">"+this.endline(f,d,u);return this.closeNode(f,d,u),ge},S.prototype.writeChildNode=function(f,d,u){switch(f.type){case R.CData:return this.cdata(f,d,u);case R.Comment:return this.comment(f,d,u);case R.Element:return this.element(f,d,u);case R.Raw:return this.raw(f,d,u);case R.Text:return this.text(f,d,u);case R.ProcessingInstruction:return this.processingInstruction(f,d,u);case R.Dummy:return"";case R.Declaration:return this.declaration(f,d,u);case R.DocType:return this.docType(f,d,u);case R.AttributeDeclaration:return this.dtdAttList(f,d,u);case R.ElementDeclaration:return this.dtdElement(f,d,u);case R.EntityDeclaration:return this.dtdEntity(f,d,u);case R.NotationDeclaration:return this.dtdNotation(f,d,u);default:throw new Error("Unknown XML node type: "+f.constructor.name)}},S.prototype.processingInstruction=function(f,d,u){var E;return this.openNode(f,d,u),d.state=r.OpenTag,E=this.indent(f,d,u)+"<?",d.state=r.InsideTag,E+=f.target,f.value&&(E+=" "+f.value),d.state=r.CloseTag,E+=d.spaceBeforeSlash+"?>",E+=this.endline(f,d,u),d.state=r.None,this.closeNode(f,d,u),E},S.prototype.raw=function(f,d,u){var E;return this.openNode(f,d,u),d.state=r.OpenTag,E=this.indent(f,d,u),d.state=r.InsideTag,E+=f.value,d.state=r.CloseTag,E+=this.endline(f,d,u),d.state=r.None,this.closeNode(f,d,u),E},S.prototype.text=function(f,d,u){var E;return this.openNode(f,d,u),d.state=r.OpenTag,E=this.indent(f,d,u),d.state=r.InsideTag,E+=f.value,d.state=r.CloseTag,E+=this.endline(f,d,u),d.state=r.None,this.closeNode(f,d,u),E},S.prototype.dtdAttList=function(f,d,u){var E;return this.openNode(f,d,u),d.state=r.OpenTag,E=this.indent(f,d,u)+"<!ATTLIST",d.state=r.InsideTag,E+=" "+f.elementName+" "+f.attributeName+" "+f.attributeType,"#DEFAULT"!==f.defaultValueType&&(E+=" "+f.defaultValueType),f.defaultValue&&(E+=' "'+f.defaultValue+'"'),d.state=r.CloseTag,E+=d.spaceBeforeSlash+">"+this.endline(f,d,u),d.state=r.None,this.closeNode(f,d,u),E},S.prototype.dtdElement=function(f,d,u){var E;return this.openNode(f,d,u),d.state=r.OpenTag,E=this.indent(f,d,u)+"<!ELEMENT",d.state=r.InsideTag,E+=" "+f.name+" "+f.value,d.state=r.CloseTag,E+=d.spaceBeforeSlash+">"+this.endline(f,d,u),d.state=r.None,this.closeNode(f,d,u),E},S.prototype.dtdEntity=function(f,d,u){var E;return this.openNode(f,d,u),d.state=r.OpenTag,E=this.indent(f,d,u)+"<!ENTITY",d.state=r.InsideTag,f.pe&&(E+=" %"),E+=" "+f.name,f.value?E+=' "'+f.value+'"':(f.pubID&&f.sysID?E+=' PUBLIC "'+f.pubID+'" "'+f.sysID+'"':f.sysID&&(E+=' SYSTEM "'+f.sysID+'"'),f.nData&&(E+=" NDATA "+f.nData)),d.state=r.CloseTag,E+=d.spaceBeforeSlash+">"+this.endline(f,d,u),d.state=r.None,this.closeNode(f,d,u),E},S.prototype.dtdNotation=function(f,d,u){var E;return this.openNode(f,d,u),d.state=r.OpenTag,E=this.indent(f,d,u)+"<!NOTATION",d.state=r.InsideTag,E+=" "+f.name,f.pubID&&f.sysID?E+=' PUBLIC "'+f.pubID+'" "'+f.sysID+'"':f.pubID?E+=' PUBLIC "'+f.pubID+'"':f.sysID&&(E+=' SYSTEM "'+f.sysID+'"'),d.state=r.CloseTag,E+=d.spaceBeforeSlash+">"+this.endline(f,d,u),d.state=r.None,this.closeNode(f,d,u),E},S.prototype.openNode=function(f,d,u){},S.prototype.closeNode=function(f,d,u){},S.prototype.openAttribute=function(f,d,u){},S.prototype.closeAttribute=function(f,d,u){},S}()}).call(this)},66397:function(J,ee,g){(function(){var R,r,I,b,j,m,p,G,W,L;L=g(66557),G=L.assign,W=L.isFunction,I=g(45584),b=g(98041),j=g(26079),p=g(82066),m=g(70443),R=g(2885),r=g(9813),J.exports.create=function(Y,X,h,v){var D,$;if(null==Y)throw new Error("Root element needs a name.");return v=G({},X,h,v),$=(D=new b(v)).element(Y),v.headless||(D.declaration(v),(null!=v.pubID||null!=v.sysID)&&D.dtd(v)),$},J.exports.begin=function(Y,X,h){var v;return W(Y)&&(X=(v=[Y,X])[0],h=v[1],Y={}),X?new j(Y,X,h):new b(Y)},J.exports.stringWriter=function(Y){return new p(Y)},J.exports.streamWriter=function(Y,X){return new m(Y,X)},J.exports.implementation=new I,J.exports.nodeType=R,J.exports.writerState=r}).call(this)},91756:(J,ee,g)=>{"use strict";g.r(ee),g.d(ee,{RgwModule:()=>Qo,RoutedRgwModule:()=>Fm});var R=g(56610),r=g(37222),I=g(19102),b=g(95819),j=g(13421),m=g(54372),p=g(19907),G=g(1811),W=g(6955),L=g(93887),Y=g(44128),X=g(36651),h=g.n(X),v=g(35629),D=g(23153),$=g(29729),z=g(59876),P=g(28284),S=g(46045),f=g(88285),d=g(74902),u=g(43808),E=g(3687),B=g(88701),C=function(n){return n.VAULT="vault",n.KMIP="kmip",n}(C||{}),Z=function(n){return n.Token="token",n.Agent="agent",n}(Z||{}),w=function(n){return n.KV="kv",n.Transit="transit",n}(w||{}),K=function(n){return n.SSE_S3="s3",n.SSE_KMS="kms",n}(K||{});const ne={kmsProviders:[C.VAULT,C.KMIP],authMethods:[Z.Token,Z.Agent],secretEngines:[w.KV,w.Transit]};var re=function(n){return n.ENABLED="Enabled",n.DISABLED="Disabled",n}(re||{}),Se=function(n){return n.Read="Read",n.Write="Write",n.All="Read and write",n.FullControl="Full control",n}(Se||{}),Pe=function(n){return n.Owner="Owner",n.Everyone="Everyone",n.AuthenticatedUsers="Authenticated Users",n}(Pe||{}),ge=function(n){return n.ENABLED="Enabled",n.SUSPENDED="Suspended",n}(ge||{}),e=g(23279),ae=g(95269),We=g(59781),Ae=g(23603),Oe=g(90476),Xe=g(37966),qe=g(51862),Ie=g(96930);function At(n,_){1&n&&(e.j41(0,"span",21),e.pXf(1,4),e.k0s())}function O(n,_){1&n&&(e.j41(0,"span",21),e.pXf(1,5),e.k0s())}function c(n,_){1&n&&(e.j41(0,"span",21),e.pXf(1,6),e.k0s())}function U(n,_){if(1&n&&e.DNE(0,At,2,0,"span",20)(1,O,2,0,"span",20)(2,c,2,0,"span",20),2&n){const t=e.XpG(),o=e.sdS(5);e.Y8G("ngIf",t.form.showError("key",o,"required")),e.R7$(),e.Y8G("ngIf",t.form.showError("key",o,"unique")),e.R7$(),e.Y8G("ngIf",t.form.showError("key",o,"maxLength"))}}function x(n,_){1&n&&(e.j41(0,"span",21),e.pXf(1,7),e.k0s())}function ue(n,_){1&n&&(e.j41(0,"span",21),e.pXf(1,8),e.k0s())}function Fe(n,_){if(1&n&&e.DNE(0,x,2,0,"span",20)(1,ue,2,0,"span",20),2&n){const t=e.XpG(),o=e.sdS(5);e.Y8G("ngIf",t.form.showError("value",o,"required")),e.R7$(),e.Y8G("ngIf",t.form.showError("value",o,"maxLength"))}}let A=(()=>{class n extends ae.dW{formBuilder;actionLabels;submitAction=new e.bkB;form;editMode=!1;currentKeyTags;storedKey;constructor(t,o){super(),this.formBuilder=t,this.actionLabels=o,this.createForm()}createForm(){this.form=this.formBuilder.group({key:[null,[r.k0.required,E.xQ.custom("unique",t=>!(h().isEmpty(t)&&!this.currentKeyTags)&&this.storedKey!==t&&this.currentKeyTags.includes(t)),E.xQ.custom("maxLength",t=>!h().isEmpty(t)&&t.length>128)]],value:[null,[r.k0.required,E.xQ.custom("maxLength",t=>!h().isEmpty(t)&&t.length>128)]]})}onSubmit(){this.submitAction.emit(this.form.value),this.closeModal()}getMode(){return this.editMode?this.actionLabels.EDIT:this.actionLabels.ADD}fillForm(t){this.form.setValue(t)}static \u0275fac=function(o){return new(o||n)(e.rXU(u.$),e.rXU(m.Ss))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-bucket-tag-modal"]],outputs:{submitAction:"submitAction"},features:[e.Vt3],decls:20,vars:14,consts:()=>{let t,o,i,s,T,F;return t="" + "\ufffd0\ufffd" + " Tag",o="Pole jest wymagane.",i="This key must be unique.",s="Length of the key must be maximum of 128 characters",T="Pole jest wymagane.",F="Length of the value must be a maximum of 128 characters",[["formDir","ngForm"],["keyError",""],["valueError",""],t,o,i,s,T,F,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[1,"form",3,"formGroup"],["cdsModalContent",""],[1,"form-item"],["label","Key","for","key","cdRequiredField","Key",3,"invalid","invalidText"],["cdsText","","type","text","id","key","name","key","formControlName","key","modal-primary-focus","",3,"invalid","autofocus"],["label","Value","for","value","cdRequiredField","Value",3,"invalid","invalidText"],["cdsText","","type","text","id","value","name","value","formControlName","value",3,"invalid"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"cds-modal",9),e.bIt("overlaySelected",function(){return e.eBV(s),e.Njj(i.closeModal())}),e.j41(1,"cds-modal-header",10),e.bIt("closeSelect",function(){return e.eBV(s),e.Njj(i.closeModal())}),e.j41(2,"h3",11),e.pXf(3,3),e.k0s()(),e.j41(4,"form",12,0)(6,"div",13)(7,"div",14)(8,"cds-text-label",15),e.EFF(9,"Key "),e.nrm(10,"input",16),e.k0s(),e.DNE(11,U,3,3,"ng-template",null,1,e.C5r),e.k0s(),e.j41(13,"div",14)(14,"cds-text-label",17),e.EFF(15,"Value "),e.nrm(16,"input",18),e.k0s(),e.DNE(17,Fe,2,2,"ng-template",null,2,e.C5r),e.k0s()(),e.j41(19,"cd-form-button-panel",19),e.bIt("submitActionEvent",function(){return e.eBV(s),e.Njj(i.onSubmit())}),e.k0s()()()}if(2&o){const s=e.sdS(12),T=e.sdS(18);e.Y8G("open",i.open)("hasScrollingContent",!1),e.R7$(3),e.uP7(i.getMode()),e.nnv(3),e.R7$(),e.Y8G("formGroup",i.form),e.R7$(4),e.Y8G("invalid",i.form.controls.key.invalid&&i.form.controls.key.dirty)("invalidText",s),e.R7$(2),e.Y8G("invalid",i.form.controls.key.invalid&&i.form.controls.key.dirty)("autofocus",!0),e.R7$(4),e.Y8G("invalid",i.form.controls.value.invalid&&i.form.controls.value.dirty)("invalidText",T),e.R7$(2),e.Y8G("invalid",i.form.controls.value.invalid&&i.form.controls.value.dirty),e.R7$(3),e.Y8G("form",i.form)("submitText",i.getMode())("modalForm",!0)}},dependencies:[R.bT,We.e,Ae.B,Oe.S,Xe.E,qe.P,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,ae.aF,ae.rQ,ae.$m,ae.hN,Ie.Zt,Ie.ks]})}return n})();var y=g(46459),Q=g(92919),M=g(48707),a=g(92123),l=g(12540),N=g(92805),V=g(64333),te=g(33488);let _e=(()=>{class n{elementRef;control;dimlessBinaryPerMinutePipe;formatter;ngModelChange=new e.bkB;ngDataReady;minBytes;maxBytes;roundPower;defaultUnit;el;constructor(t,o,i,s){this.elementRef=t,this.control=o,this.dimlessBinaryPerMinutePipe=i,this.formatter=s,this.el=this.elementRef.nativeElement}ngOnInit(){this.setValue(this.el.value),this.ngDataReady&&this.ngDataReady.subscribe(()=>this.setValue(this.el.value))}setValue(t){if(""===t)return this.ngModelChange.emit(t),void this.control.control.setValue(t);/^[\d.]+$/.test(t)&&(t+=this.defaultUnit||"m");const o=this.formatter.toBytes(t,0),i=this.round(o);this.el.value=this.dimlessBinaryPerMinutePipe.transform(i),null!==o?(this.ngModelChange.emit(this.el.value),this.control.control.setValue(this.el.value)):(this.ngModelChange.emit(null),this.control.control.setValue(null))}round(t){if(null!==t&&0!==t){if(!h().isUndefined(this.minBytes)&&t<this.minBytes)return this.minBytes;if(!h().isUndefined(this.maxBytes)&&t>this.maxBytes)return this.maxBytes;if(!h().isUndefined(this.roundPower)){const o=Math.round(Math.log(t)/Math.log(this.roundPower));return Math.pow(this.roundPower,o)}}return t}onBlur(t){this.setValue(t)}static \u0275fac=function(o){return new(o||n)(e.rXU(e.aKT),e.rXU(r.vO),e.rXU(te.E),e.rXU(l.k))};static \u0275dir=e.FsC({type:n,selectors:[["","cdDimlessBinaryPerMinute",""]],hostBindings:function(o,i){1&o&&e.bIt("blur",function(T){return i.onBlur(T.target.value)})},inputs:{ngDataReady:"ngDataReady",minBytes:"minBytes",maxBytes:"maxBytes",roundPower:"roundPower",defaultUnit:"defaultUnit"},outputs:{ngModelChange:"ngModelChange"}})}return n})();var be=g(65645),De=g(34878);function je(n,_){1&n&&(e.PLo(0,5,1),e.nrm(1,"cd-help-text"),e.YFu())}function Ke(n,_){1&n&&(e.PLo(0,5,2),e.nrm(1,"cd-help-text"),e.YFu())}function Be(n,_){if(1&n&&(e.j41(0,"div",36),e.nrm(1,"div",37),e.j41(2,"div",38)(3,"div")(4,"cd-alert-panel",39),e.PLo(5,8),e.j41(6,"div"),e.nrm(7,"span",40)(8,"br"),e.nI1(9,"dimlessBinaryPerMinute"),e.nrm(10,"br")(11,"br"),e.nI1(12,"dimlessBinaryPerMinute"),e.nrm(13,"br"),e.k0s(),e.YFu(),e.k0s()()()()),2&n){const t=e.XpG(2);e.R7$(13),e.uP7(e.bMT(9,4,t.globalRateLimit.max_read_bytes))(t.globalRateLimit.max_read_ops)(e.bMT(12,6,t.globalRateLimit.max_write_bytes))(t.globalRateLimit.max_write_ops),e.nnv(5)}}function Rt(n,_){1&n&&(e.j41(0,"div",33)(1,"cds-checkbox",41),e.qex(2),e.pXf(3,9),e.bVm(),e.j41(4,"cd-help-text"),e.pXf(5,10),e.k0s()()())}function Ft(n,_){1&n&&(e.j41(0,"span",44),e.pXf(1,11),e.k0s())}function Ct(n,_){1&n&&(e.j41(0,"span",44),e.pXf(1,12),e.k0s())}function ei(n,_){1&n&&(e.j41(0,"span",44),e.pXf(1,13),e.k0s())}function ti(n,_){if(1&n&&e.DNE(0,Ft,2,0,"span",43)(1,Ct,2,0,"span",43)(2,ei,2,0,"span",43),2&n){e.XpG(2);const t=e.sdS(6),o=e.XpG();e.Y8G("ngIf",o.form.showError("rate_limit_max_readOps",t,"required")),e.R7$(),e.Y8G("ngIf",o.form.showError("rate_limit_max_readOps",t,"rateOpsMaxSize")),e.R7$(),e.Y8G("ngIf",o.form.showError("rate_limit_max_readOps",t,"min"))}}function ni(n,_){if(1&n&&(e.j41(0,"div",33),e.nrm(1,"cds-number",42),e.DNE(2,ti,3,3,"ng-template",null,1,e.C5r),e.k0s()),2&n){const t=e.sdS(3),o=e.XpG(2);e.R7$(),e.Y8G("invalid",o.form.controls.rate_limit_max_readOps.invalid&&o.form.controls.rate_limit_max_readOps.dirty)("invalidText",t)}}function oi(n,_){1&n&&(e.j41(0,"div",33)(1,"cds-checkbox",45),e.qex(2),e.pXf(3,14),e.bVm(),e.j41(4,"cd-help-text"),e.pXf(5,15),e.k0s()()())}function ii(n,_){1&n&&(e.j41(0,"span",44),e.pXf(1,16),e.k0s())}function _i(n,_){1&n&&(e.j41(0,"span",44),e.pXf(1,17),e.k0s())}function si(n,_){1&n&&(e.j41(0,"span",44),e.pXf(1,18),e.k0s())}function ri(n,_){if(1&n&&e.DNE(0,ii,2,0,"span",43)(1,_i,2,0,"span",43)(2,si,2,0,"span",43),2&n){e.XpG(2);const t=e.sdS(6),o=e.XpG();e.Y8G("ngIf",o.form.showError("rate_limit_max_writeOps",t,"required")),e.R7$(),e.Y8G("ngIf",o.form.showError("rate_limit_max_writeOps",t,"rateOpsMaxSize")),e.R7$(),e.Y8G("ngIf",o.form.showError("rate_limit_max_writeOps",t,"min"))}}function ai(n,_){if(1&n&&(e.j41(0,"div",33),e.nrm(1,"cds-number",46),e.DNE(2,ri,3,3,"ng-template",null,2,e.C5r),e.k0s()),2&n){const t=e.sdS(3),o=e.XpG(2);e.R7$(),e.Y8G("invalid",o.form.controls.rate_limit_max_writeOps.invalid&&o.form.controls.rate_limit_max_writeOps.dirty)("invalidText",t)}}function li(n,_){1&n&&(e.j41(0,"div",33)(1,"cds-checkbox",47),e.qex(2),e.pXf(3,19),e.bVm(),e.j41(4,"cd-help-text"),e.pXf(5,20),e.k0s()()())}function ci(n,_){1&n&&(e.j41(0,"span",44),e.pXf(1,21),e.k0s())}function ui(n,_){1&n&&(e.j41(0,"span",44),e.pXf(1,22),e.k0s())}function di(n,_){1&n&&(e.j41(0,"span",44),e.pXf(1,23),e.k0s())}function fi(n,_){if(1&n&&e.DNE(0,ci,2,0,"span",43)(1,ui,2,0,"span",43)(2,di,2,0,"span",43),2&n){e.XpG(2);const t=e.sdS(6),o=e.XpG();e.Y8G("ngIf",o.form.showError("rate_limit_max_readBytes",t,"required")),e.R7$(),e.Y8G("ngIf",o.form.showError("rate_limit_max_readBytes",t,"rateByteMaxSize")),e.R7$(),e.Y8G("ngIf",o.form.showError("rate_limit_max_readBytes",t,"min"))}}function pi(n,_){if(1&n&&(e.j41(0,"div",33)(1,"cds-text-label",48),e.nrm(2,"input",49),e.k0s(),e.DNE(3,fi,3,3,"ng-template",null,3,e.C5r),e.k0s()),2&n){const t=e.sdS(4),o=e.XpG(2);e.R7$(),e.Y8G("invalid",o.form.controls.rate_limit_max_readBytes.invalid&&o.form.controls.rate_limit_max_readBytes.dirty)("invalidText",t),e.R7$(),e.Y8G("invalid",o.form.controls.rate_limit_max_readBytes.invalid&&o.form.controls.rate_limit_max_readBytes.dirty)}}function gi(n,_){1&n&&(e.j41(0,"div",33)(1,"cds-checkbox",50),e.qex(2),e.pXf(3,24),e.bVm(),e.j41(4,"cd-help-text"),e.pXf(5,25),e.k0s()()())}function Ti(n,_){1&n&&(e.j41(0,"span",44),e.pXf(1,26),e.k0s())}function Ri(n,_){1&n&&(e.j41(0,"span",44),e.pXf(1,27),e.k0s())}function mi(n,_){1&n&&(e.j41(0,"span",44),e.pXf(1,28),e.k0s())}function Ei(n,_){if(1&n&&e.DNE(0,Ti,2,0,"span",43)(1,Ri,2,0,"span",43)(2,mi,2,0,"span",43),2&n){e.XpG(2);const t=e.sdS(6),o=e.XpG();e.Y8G("ngIf",o.form.showError("rate_limit_max_readBytes",t,"required")),e.R7$(),e.Y8G("ngIf",o.form.showError("rate_limit_max_readBytes",t,"rateByteMaxSize")),e.R7$(),e.Y8G("ngIf",o.form.showError("rate_limit_max_readBytes",t,"min"))}}function Si(n,_){if(1&n&&(e.j41(0,"div",33)(1,"cds-text-label",51),e.nrm(2,"input",52),e.k0s(),e.DNE(3,Ei,3,3,"ng-template",null,4,e.C5r),e.k0s()),2&n){const t=e.sdS(4),o=e.XpG(2);e.R7$(),e.Y8G("invalid",o.form.controls.rate_limit_max_writeBytes.invalid&&o.form.controls.rate_limit_max_writeBytes.dirty)("invalidText",t),e.R7$(),e.Y8G("invalid",o.form.controls.rate_limit_max_writeBytes.invalid&&o.form.controls.rate_limit_max_writeBytes.dirty)}}function Fi(n,_){if(1&n&&(e.j41(0,"fieldset")(1,"legend",30),e.PLo(2,5),e.DNE(3,je,2,0,"cd-help-text",29)(4,Ke,2,0,"cd-help-text",29),e.YFu(),e.k0s(),e.j41(5,"form",31,0),e.DNE(7,Be,14,8,"div",32),e.j41(8,"div",33)(9,"cds-checkbox",34),e.qex(10),e.pXf(11,6),e.bVm(),e.j41(12,"cd-help-text"),e.pXf(13,7),e.k0s()()(),e.DNE(14,Rt,6,0,"div",35)(15,ni,4,2,"div",35)(16,oi,6,0,"div",35)(17,ai,4,2,"div",35)(18,li,6,0,"div",35)(19,pi,5,3,"div",35)(20,gi,6,0,"div",35)(21,Si,5,3,"div",35),e.k0s()()),2&n){const t=e.XpG();e.R7$(3),e.Y8G("ngIf","user"===t.type),e.R7$(),e.Y8G("ngIf","bucket"===t.type),e.R7$(),e.Y8G("formGroup",t.form),e.R7$(2),e.Y8G("ngIf",!!t.globalRateLimit&&t.globalRateLimit.enabled),e.R7$(7),e.Y8G("ngIf",t.form.controls.rate_limit_enabled.value),e.R7$(),e.Y8G("ngIf",t.form.controls.rate_limit_enabled.value&&!t.form.getValue("rate_limit_max_readOps_unlimited")),e.R7$(),e.Y8G("ngIf",t.form.controls.rate_limit_enabled.value),e.R7$(),e.Y8G("ngIf",t.form.controls.rate_limit_enabled.value&&!t.form.getValue("rate_limit_max_writeOps_unlimited")),e.R7$(),e.Y8G("ngIf",t.form.controls.rate_limit_enabled.value),e.R7$(),e.Y8G("ngIf",t.form.controls.rate_limit_enabled.value&&!t.form.getValue("rate_limit_max_readBytes_unlimited")),e.R7$(),e.Y8G("ngIf",t.form.controls.rate_limit_enabled.value),e.R7$(),e.Y8G("ngIf",t.form.controls.rate_limit_enabled.value&&!t.form.getValue("rate_limit_max_writeBytes_unlimited"))}}let Mn=(()=>{class n{formBuilder;rgwUserService;rgwBucketService;notificationService;globalRateLimit;form;type;formValue=new e.bkB;rateLimitFormGroup=new e.bkB;isEditing;id;bid;set allowBid(t){this.bid=t,this.isEditing&&this.bid&&"bucket"==this.type&&this.getRateLimitFormValues()}constructor(t,o,i,s){this.formBuilder=t,this.rgwUserService=o,this.rgwBucketService=i,this.notificationService=s}ngOnInit(){"user"===this.type?(this.rgwUserService.getGlobalUserRateLimit().subscribe(t=>{t&&void 0!==t.user_ratelimit&&(this.globalRateLimit=t.user_ratelimit)},t=>{this.notificationService.show(f._.error,t)}),this.isEditing&&this.getRateLimitFormValues()):this.rgwBucketService.getGlobalBucketRateLimit().subscribe(t=>{t&&void 0!==t.bucket_ratelimit&&(this.globalRateLimit=t.bucket_ratelimit)},t=>{this.notificationService.show(f._.error,t)}),this.form=this.formBuilder.group({rate_limit_enabled:[!1],rate_limit_max_readOps_unlimited:[!0],rate_limit_max_readOps:[null,[E.xQ.composeIf({rate_limit_enabled:!0,rate_limit_max_readOps_unlimited:!1},[r.k0.required,this.rateLimitIopmMaxSizeValidator])]],rate_limit_max_writeOps_unlimited:[!0],rate_limit_max_writeOps:[null,[E.xQ.composeIf({rate_limit_enabled:!0,rate_limit_max_writeOps_unlimited:!1},[r.k0.required,this.rateLimitIopmMaxSizeValidator])]],rate_limit_max_readBytes_unlimited:[!0],rate_limit_max_readBytes:[null,[E.xQ.composeIf({rate_limit_enabled:!0,rate_limit_max_readBytes_unlimited:!1},[r.k0.required,this.rateLimitBytesMaxSizeValidator])]],rate_limit_max_writeBytes_unlimited:[!0],rate_limit_max_writeBytes:[null,[E.xQ.composeIf({rate_limit_enabled:!0,rate_limit_max_writeBytes_unlimited:!1},[r.k0.required,this.rateLimitBytesMaxSizeValidator])]]})}populateFormValues(t){this.form.get("rate_limit_enabled").setValue(t.enabled),this._setRateLimitProperty("rate_limit_max_readBytes","rate_limit_max_readBytes_unlimited",t.max_read_bytes),this._setRateLimitProperty("rate_limit_max_writeBytes","rate_limit_max_writeBytes_unlimited",t.max_write_bytes),this._setRateLimitProperty("rate_limit_max_readOps","rate_limit_max_readOps_unlimited",t.max_read_ops),this._setRateLimitProperty("rate_limit_max_writeOps","rate_limit_max_writeOps_unlimited",t.max_write_ops)}getRateLimitFormValues(){"user"===this.type?this.rgwUserService.getUserRateLimit(this.id).subscribe(t=>{this.populateFormValues(t.user_ratelimit)},t=>{this.notificationService.show(f._.error,t)}):this.rgwBucketService.getBucketRateLimit(this.bid).subscribe(t=>{this.populateFormValues(t.bucket_ratelimit)},t=>{this.notificationService.show(f._.error,t)})}rateLimitBytesMaxSizeValidator(t){return(new l.k).performValidation(t,"^(\\d+(\\.\\d+)?)\\s*(B/m|K(B|iB/m)?|M(B|iB/m)?|G(B|iB/m)?|T(B|iB/m)?|P(B|iB/m)?)?$",{rateByteMaxSize:!0})}rateLimitIopmMaxSizeValidator(t){return(new l.k).iopmMaxSizeValidator(t)}getRateLimitFormValue(){return this._isRateLimitFormDirty()?this._getRateLimitArgs():null}ngAfterViewInit(){this.rateLimitFormGroup.emit(this.form)}_isRateLimitFormDirty(){return["rate_limit_enabled","rate_limit_max_readOps_unlimited","rate_limit_max_readOps","rate_limit_max_writeOps_unlimited","rate_limit_max_writeOps","rate_limit_max_readBytes_unlimited","rate_limit_max_readBytes","rate_limit_max_writeBytes_unlimited","rate_limit_max_writeBytes"].some(t=>this.form.get(t).dirty)}_getRateLimitArgs(){const t={enabled:this.form.getValue("rate_limit_enabled"),max_read_ops:0,max_write_ops:0,max_read_bytes:0,max_write_bytes:0};return this.form.getValue("rate_limit_max_readOps_unlimited")||(t.max_read_ops=this.form.getValue("rate_limit_max_readOps")),this.form.getValue("rate_limit_max_writeOps_unlimited")||(t.max_write_ops=this.form.getValue("rate_limit_max_writeOps")),this.form.getValue("rate_limit_max_readBytes_unlimited")||(t.max_read_bytes=(new l.k).toBytes(this.form.getValue("rate_limit_max_readBytes"))),this.form.getValue("rate_limit_max_writeBytes_unlimited")||(t.max_write_bytes=(new l.k).toBytes(this.form.getValue("rate_limit_max_writeBytes"))),t}_setRateLimitProperty(t,o,i){0===i?(this.form.get(o).setValue(!0),this.form.get(t).setValue("")):(this.form.get(o).setValue(!1),this.form.get(t).setValue(i))}static \u0275fac=function(o){return new(o||n)(e.rXU(u.$),e.rXU(P.p),e.rXU($.c),e.rXU(B.J))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-rate-limit"]],inputs:{type:"type",isEditing:"isEditing",id:"id",allowBid:"allowBid"},outputs:{formValue:"formValue",rateLimitFormGroup:"rateLimitFormGroup"},decls:1,vars:1,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de,pe,He,Ye,ze,Ve;return t=" Rate Limit " + "\ufffd*3:1\ufffd\ufffd#1:1\ufffd" + " The User Rate Limit controls the max read/write operations and data per minute for each user. " + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd]" + "" + "\ufffd*4:2\ufffd\ufffd#1:2\ufffd" + " The Bucket Rate Limit controls the max read/write operations and data per minute for each bucket. " + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd]" + "",t=e.k04(t),o="Uaktywniony",i="Toggle to enable or disable the rate limit settings.",s="" + "\ufffd#6\ufffd" + "" + "\ufffd#7\ufffd" + "Global Rate Limit" + "\ufffd/#7\ufffd" + "" + "[\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#10\ufffd\ufffd/#10\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#13\ufffd\ufffd/#13\ufffd]" + "Max. read bytes : " + "\ufffd0\ufffd" + " " + "[\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#10\ufffd\ufffd/#10\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#13\ufffd\ufffd/#13\ufffd]" + "Max. read ops : " + "\ufffd1\ufffd" + " " + "[\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#10\ufffd\ufffd/#10\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#13\ufffd\ufffd/#13\ufffd]" + "Max. write bytes : " + "\ufffd2\ufffd" + " " + "[\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#10\ufffd\ufffd/#10\ufffd|\ufffd#11\ufffd\ufffd/#11\ufffd|\ufffd#13\ufffd\ufffd/#13\ufffd]" + "Max. write ops : " + "\ufffd3\ufffd" + " " + "\ufffd/#6\ufffd" + "",s=e.k04(s),T="Unlimited read ops",F="Select this box to allow unlimited read operations.",k="Maximum read ops",H="Limits the number of read operations per minute for a user.",q="Pole jest wymagane.",oe="Warto\u015B\u0107 nie jest poprawna.",le="Enter a positive number.",Re="Unlimited write ops",ce="Select this box to allow unlimited write operations.",Te="Maximum write ops",se="Limits the number of write operations per minute for a user.",Ce="Pole jest wymagane.",he="Warto\u015B\u0107 nie jest poprawna.",ye="Enter a positive number.",$e="Unlimited read bytes",Ge="Select this box to allow unlimited read bytes.",Ue="Limits the number of read bytes per minute for a user.",xe="Pole jest wymagane.",ke="Warto\u015B\u0107 nie jest poprawna.",ve="Enter a positive number.",de="Unlimited write bytes",pe="Select this box to allow unlimited write bytes.",He="Limits the number of write bytes per minute for a user.",Ye="Pole jest wymagane.",ze="Warto\u015B\u0107 nie jest poprawna.",Ve="Enter a positive number.",[["frm","ngForm"],["rateLimitMaxReadOpsError",""],["rateLimitMaxWriteOpsError",""],["maxReadBytesError",""],["maxWriteBytesError",""],t,o,i,s,T,F,q,oe,le,Re,ce,Ce,he,ye,$e,Ge,xe,ke,ve,de,pe,Ye,ze,Ve,[4,"ngIf"],[1,"cd-header"],["name","form","novalidate","",3,"formGroup"],["class","row",4,"ngIf"],[1,"form-item"],["id","rate_limit_enabled","formControlName","rate_limit_enabled"],["class","form-item",4,"ngIf"],[1,"row"],[1,"col-3"],[1,"col-9"],["type","info","id","global-ratelimit-info",1,"me-1"],[1,"bold"],["id","rate_limit_max_readOps_unlimited","formControlName","rate_limit_max_readOps_unlimited"],["id","rate_limit_max_readOps","formControlName","rate_limit_max_readOps","label",k,"cdRequiredField","Maximum read ops","helperText",H,3,"invalid","invalidText"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["id","rate_limit_max_writeOps_unlimited","formControlName","rate_limit_max_writeOps_unlimited"],["id","rate_limit_max_writeOps","formControlName","rate_limit_max_writeOps","label",Te,"cdRequiredField","Maximum write ops","helperText",se,3,"invalid","invalidText"],["id","rate_limit_max_readBytes_unlimited","formControlName","rate_limit_max_readBytes_unlimited"],["labelInputID","rate_limit_max_readBytes","cdRequiredField","Maximum read bytes","helperText",Ue,3,"invalid","invalidText"],["cdsText","","id","rate_limit_max_readBytes","formControlName","rate_limit_max_readBytes","defaultUnit","b","cdDimlessBinaryPerMinute","",3,"invalid"],["id","rate_limit_max_writeBytes_unlimited","formControlName","rate_limit_max_writeBytes_unlimited"],["labelInputID","rate_limit_max_writeBytes","cdRequiredField","Maximum write bytes","helperText",He,3,"invalid","invalidText"],["cdsText","","id","rate_limit_max_writeBytes","formControlName","rate_limit_max_writeBytes","defaultUnit","b","cdDimlessBinaryPerMinute","",3,"invalid"]]},template:function(o,i){1&o&&e.DNE(0,Fi,22,12,"fieldset",29),2&o&&e.Y8G("ngIf",i.type)},dependencies:[R.bT,N.m,V.O,Oe.S,Xe.E,qe.P,_e,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,Ie.Zt,Ie.ks,be.Sc,De.jM,te.E]})}return n})();var Nn=g(26409);let Kt=(()=>{class n{http;rgwDaemonService;url="api/rgw/accounts";constructor(t,o){this.http=t,this.rgwDaemonService=o}list(t){return this.rgwDaemonService.request(o=>(t&&(o=o.append("detailed",t)),this.http.get(this.url,{params:o})))}get(t){return this.rgwDaemonService.request(o=>(t&&(o=o.append("account_id",t)),this.http.get(`${this.url}/get`,{params:o})))}create(t){return this.rgwDaemonService.request(o=>this.http.post(this.url,t,{params:o}))}modify(t){return this.rgwDaemonService.request(o=>this.http.put(`${this.url}/set`,t,{params:o}))}remove(t){return this.rgwDaemonService.request(o=>this.http.delete(`${this.url}/${t}`,{params:o}))}setQuota(t,o){return this.http.put(`${this.url}/${t}/quota`,o)}static \u0275fac=function(o){return new(o||n)(e.KVO(Nn.Qq),e.KVO(Q.y))};static \u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Mt=g(94254),Ci=g(11145);let Mi=(()=>{class n{constructor(){}format(t){if(!t.nativeElement?.value)return;const o=t.nativeElement.value,s=(new DOMParser).parseFromString(o,"application/xml"),k=20*s.getElementsByTagName("*").length;t.nativeElement.style.height=k+"px",s.querySelector("parsererror")}static \u0275fac=function(o){return new(o||n)};static \u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var hi=g(23589),zn=g(95131),Xt=g(56677),et=g(12342),mt=g(43074),jt=g(13313),Ze=g(34382),hn=g(43719),qt=g(8415),pt=g(37353);const Gi=["bucketPolicyTextArea"],Pi=["lifecycleTextArea"],Ii=()=>({md:4}),Oi=(n,_)=>({status:n,isDefaultZg:_}),Ni=(n,_)=>({index:n,tag:_});function bi(n,_){1&n&&(e.j41(0,"div",84)(1,"cds-text-label",114),e.PLo(2,32),e.nrm(3,"input",115),e.YFu(),e.k0s()())}function Ai(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,33),e.k0s())}function Li(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,34),e.k0s())}function Di(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,35),e.k0s())}function yi(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,36),e.k0s())}function $i(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,37),e.k0s())}function vi(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,38),e.k0s())}function Wi(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,39),e.k0s())}function wi(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,40),e.k0s())}function Ui(n,_){if(1&n&&e.DNE(0,Ai,2,0,"span",116)(1,Li,2,0,"span",116)(2,Di,2,0,"span",116)(3,yi,2,0,"span",116)(4,$i,2,0,"span",116)(5,vi,2,0,"span",116)(6,Wi,2,0,"span",116)(7,wi,2,0,"span",116),2&n){e.XpG();const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.bucketForm.showError("bid",t,"required")),e.R7$(),e.Y8G("ngIf",o.bucketForm.showError("bid",t,"bucketNameInvalid")),e.R7$(),e.Y8G("ngIf",o.bucketForm.showError("bid",t,"bucketNameNotAllowed")),e.R7$(),e.Y8G("ngIf",o.bucketForm.showError("bid",t,"containsUpperCase")),e.R7$(),e.Y8G("ngIf",o.bucketForm.showError("bid",t,"lowerCaseOrNumber")),e.R7$(),e.Y8G("ngIf",o.bucketForm.showError("bid",t,"ipAddress")),e.R7$(),e.Y8G("ngIf",o.bucketForm.showError("bid",t,"onlyLowerCaseAndNumbers")),e.R7$(),e.Y8G("ngIf",o.bucketForm.showError("bid",t,"shouldBeInRange"))}}function xi(n,_){1&n&&(e.j41(0,"cds-checkbox",87),e.pXf(1,41),e.k0s())}function ki(n,_){1&n&&(e.PLo(0,42,1),e.nrm(1,"option",122),e.YFu()),2&n&&(e.R7$(),e.Y8G("ngValue",null))}function Xi(n,_){1&n&&(e.PLo(0,42,2),e.nrm(1,"option",123),e.YFu())}function ji(n,_){if(1&n&&(e.PLo(0,42,3),e.nrm(1,"option",124),e.YFu()),2&n){const t=_.$implicit;e.R7$(),e.Y8G("value",t.uid),e.uP7(t.uid),e.nnv(0)}}function Bi(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,43),e.k0s())}function zi(n,_){if(1&n&&e.DNE(0,Bi,2,0,"span",116),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.bucketForm.showError("accountUser",t,"required"))}}function Hi(n,_){1&n&&(e.j41(0,"cd-alert-panel",125),e.pXf(1,44),e.k0s())}function Yi(n,_){if(1&n&&(e.j41(0,"div",84)(1,"cds-select",118),e.PLo(2,42),e.DNE(3,ki,2,1,"option",119)(4,Xi,2,0,"option",120)(5,ji,2,2,"option",110),e.YFu(),e.k0s(),e.DNE(6,zi,1,1,"ng-template",null,8,e.C5r)(8,Hi,2,0,"cd-alert-panel",121),e.k0s()),2&n){const t=e.sdS(7),o=e.XpG(2);e.R7$(),e.Y8G("invalidText",t)("invalid",!o.bucketForm.controls.accountUser.valid&&o.bucketForm.controls.accountUser.dirty),e.R7$(2),e.Y8G("ngIf",null===o.accountusers),e.R7$(),e.Y8G("ngIf",null!==o.accountusers),e.R7$(),e.Y8G("ngForOf",o.accountUsers),e.R7$(3),e.Y8G("ngIf",o.bucketForm.get("accountUser").disabled)}}function Vi(n,_){1&n&&(e.PLo(0,45,1),e.nrm(1,"option",122),e.YFu()),2&n&&(e.R7$(),e.Y8G("ngValue",null))}function Zi(n,_){1&n&&(e.PLo(0,45,2),e.nrm(1,"option",123),e.YFu())}function Ki(n,_){if(1&n&&(e.PLo(0,45,3),e.nrm(1,"option",124),e.YFu()),2&n){const t=_.$implicit;e.R7$(),e.Y8G("value",t.uid),e.uP7(t.uid),e.nnv(0)}}function qi(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,46),e.k0s())}function Ji(n,_){if(1&n&&e.DNE(0,qi,2,0,"span",116),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.bucketForm.showError("owner",t,"required"))}}function Qi(n,_){if(1&n&&(e.j41(0,"div",84)(1,"cds-select",126),e.PLo(2,45),e.DNE(3,Vi,2,1,"option",119)(4,Zi,2,0,"option",120)(5,Ki,2,2,"option",110),e.YFu(),e.k0s(),e.DNE(6,Ji,1,1,"ng-template",null,9,e.C5r),e.k0s()),2&n){const t=e.sdS(7),o=e.XpG(2);e.R7$(),e.Y8G("invalidText",t)("invalid",!o.bucketForm.controls.owner.valid&&o.bucketForm.controls.owner.dirty),e.R7$(2),e.Y8G("ngIf",null===o.owners),e.R7$(),e.Y8G("ngIf",null!==o.owners),e.R7$(),e.Y8G("ngForOf",o.owners)}}function e_(n,_){if(1&n){const t=e.RV6();e.j41(0,"fieldset")(1,"div",84)(2,"legend",89),e.pXf(3,47),e.k0s(),e.j41(4,"cds-checkbox",127),e.bIt("checkedChange",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.setMfaDeleteValidators())}),e.PLo(5,48),e.j41(6,"cd-help-text"),e.nrm(7,"span"),e.k0s(),e.YFu(),e.k0s()()()}}function t_(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,52),e.k0s())}function n_(n,_){if(1&n&&e.DNE(0,t_,2,0,"span",116),2&n){e.XpG(3);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.bucketForm.showError("mfa-token-serial",t,"required"))}}function o_(n,_){if(1&n&&(e.j41(0,"div",84)(1,"cds-text-label",129),e.PLo(2,51),e.nrm(3,"input",130),e.YFu(),e.k0s(),e.DNE(4,n_,1,1,"ng-template",null,10,e.C5r),e.k0s()),2&n){const t=e.sdS(5),o=e.XpG(3);e.R7$(),e.Y8G("invalid",!o.bucketForm.controls["mfa-token-serial"].valid&&o.bucketForm.controls["mfa-token-serial"].dirty)("invalidText",t),e.R7$(2),e.Y8G("invalid",!o.bucketForm.controls["mfa-token-serial"].valid&&o.bucketForm.controls["mfa-token-serial"].dirty)}}function i_(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,54),e.k0s())}function __(n,_){if(1&n&&e.DNE(0,i_,2,0,"span",116),2&n){e.XpG(3);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.bucketForm.showError("mfa-token-pin",t,"required"))}}function s_(n,_){if(1&n&&(e.j41(0,"div",84)(1,"cds-text-label",131),e.PLo(2,53),e.nrm(3,"input",132),e.YFu(),e.k0s(),e.DNE(4,__,1,1,"ng-template",null,11,e.C5r),e.k0s()),2&n){const t=e.sdS(5),o=e.XpG(3);e.R7$(),e.Y8G("invalid",!o.bucketForm.controls["mfa-token-pin"].valid&&o.bucketForm.controls["mfa-token-pin"].dirty)("invalidText",t),e.R7$(2),e.Y8G("invalid",!o.bucketForm.controls["mfa-token-pin"].valid&&o.bucketForm.controls["mfa-token-pin"].dirty)}}function r_(n,_){if(1&n){const t=e.RV6();e.j41(0,"fieldset")(1,"div",84)(2,"legend",89),e.pXf(3,49),e.k0s(),e.j41(4,"cds-checkbox",128),e.bIt("checkedChange",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.setMfaDeleteValidators())}),e.pXf(5,50),e.k0s()(),e.DNE(6,o_,6,3,"div",83)(7,s_,6,3,"div",83),e.k0s()}if(2&n){const t=e.XpG(2);e.R7$(6),e.Y8G("ngIf",t.areMfaCredentialsRequired()),e.R7$(),e.Y8G("ngIf",t.areMfaCredentialsRequired())}}function a_(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,58),e.k0s())}function l_(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,59),e.k0s())}function c_(n,_){if(1&n&&e.DNE(0,a_,2,0,"span",88)(1,l_,2,0,"span",88),2&n){const t=e.XpG(4);e.Y8G("ngIf","COMPLIANCE"===t.bucketForm.getValue("lock_mode")),e.R7$(),e.Y8G("ngIf","GOVERNANCE"===t.bucketForm.getValue("lock_mode"))}}function u_(n,_){if(1&n&&(e.j41(0,"div",84)(1,"cds-select",136),e.PLo(2,57),e.nrm(3,"option",137)(4,"option",138),e.YFu(),e.k0s(),e.DNE(5,c_,2,2,"ng-template",null,12,e.C5r),e.k0s()),2&n){const t=e.sdS(6);e.R7$(),e.Y8G("helperText",t)}}function d_(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,60),e.k0s())}function f_(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,61),e.k0s())}function p_(n,_){if(1&n&&e.DNE(0,d_,2,0,"span",116)(1,f_,2,0,"span",116),2&n){e.XpG(3);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.bucketForm.showError("lock_retention_period_days",t,"pattern")),e.R7$(),e.Y8G("ngIf",o.bucketForm.showError("lock_retention_period_days",t,"lockDays"))}}function g_(n,_){if(1&n&&(e.j41(0,"div",84),e.nrm(1,"cds-number",139),e.DNE(2,p_,2,2,"ng-template",null,13,e.C5r),e.k0s()),2&n){const t=e.sdS(3),o=e.XpG(3);e.R7$(),e.Y8G("invalid",o.bucketForm.controls.lock_retention_period_days.invalid&&o.bucketForm.controls.lock_retention_period_days.dirty)("invalidText",t)}}function T_(n,_){1&n&&(e.j41(0,"cd-alert-panel",140),e.EFF(1," Bucket Versioning can't be disabled when Object Locking is enabled. "),e.k0s())}function R_(n,_){1&n&&(e.j41(0,"cd-alert-panel",141),e.EFF(1," Enabling Object Locking will allow the configuration of GOVERNANCE or COMPLIANCE modes, which will help ensure that an object version cannot be overwritten or deleted for the specified period. "),e.k0s())}function m_(n,_){if(1&n&&(e.j41(0,"fieldset")(1,"div",84)(2,"legend",89),e.PLo(3,55),e.nrm(4,"cd-help-text"),e.YFu(),e.k0s(),e.j41(5,"cds-checkbox",133),e.PLo(6,56),e.j41(7,"cd-help-text"),e.nrm(8,"span"),e.k0s(),e.YFu(),e.k0s()(),e.DNE(9,u_,7,1,"div",83)(10,g_,4,2,"div",83)(11,T_,2,0,"cd-alert-panel",134)(12,R_,2,0,"cd-alert-panel",135),e.k0s()),2&n){const t=e.XpG(2);e.R7$(5),e.Y8G("disabled",t.editing),e.R7$(4),e.Y8G("ngIf",t.bucketForm.getValue("lock_enabled")),e.R7$(),e.Y8G("ngIf",t.bucketForm.getValue("lock_enabled")),e.R7$(),e.Y8G("ngIf",t.bucketForm.getValue("lock_enabled")),e.R7$(),e.Y8G("ngIf",t.bucketForm.getValue("lock_enabled"))}}function E_(n,_){1&n&&(e.PLo(0,62,1),e.nrm(1,"option",122),e.YFu()),2&n&&(e.R7$(),e.Y8G("ngValue",null))}function S_(n,_){1&n&&(e.PLo(0,62,2),e.nrm(1,"option",122),e.YFu()),2&n&&(e.R7$(),e.Y8G("ngValue",null))}function F_(n,_){if(1&n&&(e.PLo(0,62,3),e.nrm(1,"option",124),e.YFu()),2&n){const t=_.$implicit;e.R7$(),e.Y8G("value",t),e.uP7(t),e.nnv(0)}}function C_(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,64),e.k0s())}function M_(n,_){if(1&n&&e.DNE(0,C_,2,0,"span",116),2&n){e.XpG(3);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.bucketForm.showError("kms_provider",t,"required"))}}function h_(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,65),e.k0s())}function G_(n,_){if(1&n&&e.DNE(0,h_,2,0,"span",116),2&n){e.XpG(3);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.bucketForm.showError("keyId",t,"required"))}}function P_(n,_){if(1&n&&(e.j41(0,"div")(1,"div",84)(2,"cds-select",145),e.PLo(3,62),e.DNE(4,E_,2,1,"option",119)(5,S_,2,1,"option",119)(6,F_,2,2,"option",110),e.YFu(),e.k0s(),e.DNE(7,M_,1,1,"ng-template",null,14,e.C5r),e.k0s(),e.j41(9,"div",84)(10,"cds-text-label",146),e.PLo(11,63),e.nrm(12,"input",147),e.YFu(),e.k0s(),e.DNE(13,G_,1,1,"ng-template",null,15,e.C5r),e.k0s()()),2&n){const t=e.sdS(8),o=e.sdS(14),i=e.XpG(3);e.R7$(2),e.Y8G("invalidText",t)("invalid",!i.bucketForm.controls.kms_provider.valid&&i.bucketForm.controls.kms_provider.dirty),e.R7$(2),e.Y8G("ngIf",null===i.kmsProviders),e.R7$(),e.Y8G("ngIf",null!==i.kmsProviders),e.R7$(),e.Y8G("ngForOf",i.kmsProviders),e.R7$(4),e.Y8G("invalid",!i.bucketForm.controls.keyId.valid&&i.bucketForm.controls.keyId.dirty)("invalidText",o),e.R7$(2),e.Y8G("invalid",!i.bucketForm.controls.keyId.valid&&i.bucketForm.controls.keyId.dirty)}}function I_(n,_){if(1&n&&(e.j41(0,"div")(1,"div",84)(2,"cds-radio-group",142)(3,"cds-radio",143),e.EFF(4,"SSE-S3"),e.k0s(),e.j41(5,"cds-radio",144),e.EFF(6,"Connect to an external key management service"),e.k0s()()(),e.DNE(7,P_,15,8,"div",88),e.k0s()),2&n){const t=e.XpG(2);e.R7$(3),e.Y8G("disabled",!t.s3Configured),e.R7$(2),e.Y8G("disabled",!t.kmsConfigured),e.R7$(2),e.Y8G("ngIf","aws:kms"===t.bucketForm.getValue("encryption_type"))}}function O_(n,_){1&n&&(e.j41(0,"cd-alert-panel",150),e.pXf(1,67),e.k0s())}function N_(n,_){if(1&n&&(e.qex(0),e.j41(1,"cds-checkbox",148),e.PLo(2,66),e.nrm(3,"cd-help-text"),e.YFu(),e.k0s(),e.DNE(4,O_,2,0,"cd-alert-panel",149),e.bVm()),2&n){const t=_.ngIf,o=e.XpG(2);e.R7$(),e.Y8G("disabled",!t.isDefaultZg&&!t.status.available),e.R7$(3),e.Y8G("ngIf",!o.editing)}}function b_(n,_){1&n&&e.eu8(0)}function A_(n,_){if(1&n&&(e.j41(0,"span"),e.DNE(1,b_,1,0,"ng-container",151),e.k0s()),2&n){const t=_.$implicit,o=_.index;e.XpG(2);const i=e.sdS(2);e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.l_i(2,Ni,o,t))}}function L_(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,68),e.k0s())}function D_(n,_){if(1&n&&e.DNE(0,L_,2,0,"span",116),2&n){e.XpG();const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.bucketForm.showError("bucket_policy",t,"invalidJson"))}}function y_(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,72),e.k0s())}function $_(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,73),e.k0s())}function v_(n,_){if(1&n&&e.DNE(0,y_,2,0,"span",116)(1,$_,2,0,"span",116),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.bucketForm.showError("lifecycle",t,"invalidJson")),e.R7$(),e.Y8G("ngIf",o.bucketForm.showError("lifecycle",t,"invalidXml"))}}function W_(n,_){if(1&n){const t=e.RV6();e.j41(0,"div",84)(1,"cds-textarea-label",100),e.PLo(2,69),e.j41(3,"textarea",152,16),e.bIt("change",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.textAreaOnChange("lifecycle"))}),e.k0s(),e.nrm(5,"cd-help-text"),e.YFu(),e.k0s(),e.DNE(6,v_,2,2,"ng-template",null,17,e.C5r),e.j41(8,"div",95)(9,"div",96)(10,"cds-button-set",102)(11,"button",153),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.openUrl("https://docs.aws.amazon.com/cli/latest/reference/s3api/put-bucket-lifecycle.html#examples"))}),e.PLo(12,70),e.qSk(),e.nrm(13,"svg",104),e.YFu(),e.k0s()()(),e.joV(),e.j41(14,"div",96)(15,"cds-button-set",105)(16,"button",154),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.clearTextArea("lifecycle","{}"))}),e.PLo(17,71),e.qSk(),e.nrm(18,"svg",107),e.YFu(),e.k0s()()()()()}if(2&n){const t=e.sdS(7),o=e.XpG(2);e.R7$(),e.Y8G("invalid",!o.bucketForm.controls.lifecycle.valid&&o.bucketForm.controls.lifecycle.dirty)("invalidText",t)}}function w_(n,_){if(1&n&&(e.PLo(0,31,1),e.nrm(1,"option",124),e.YFu()),2&n){const t=_.$implicit;e.R7$(),e.Y8G("value",t),e.uP7(t),e.nnv(0)}}function U_(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,74),e.k0s())}function x_(n,_){if(1&n&&e.DNE(0,U_,2,0,"span",116),2&n){e.XpG();const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.bucketForm.showError("grantee",t,"required"))}}function k_(n,_){if(1&n&&(e.j41(0,"option",124),e.pXf(1,75),e.k0s()),2&n){const t=_.$implicit;e.Y8G("value",t),e.R7$(),e.uP7(t),e.nnv(1)}}function X_(n,_){1&n&&(e.j41(0,"span",117),e.pXf(1,76),e.k0s())}function j_(n,_){if(1&n&&e.DNE(0,X_,2,0,"span",116),2&n){e.XpG();const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.bucketForm.showError("aclPermission",t,"required"))}}function B_(n,_){1&n&&(e.PLo(0,77,1),e.nrm(1,"option",122),e.YFu()),2&n&&(e.R7$(),e.Y8G("ngValue",null))}function z_(n,_){1&n&&(e.PLo(0,77,2),e.nrm(1,"option",122),e.YFu()),2&n&&(e.R7$(),e.Y8G("ngValue",null))}function H_(n,_){if(1&n&&(e.PLo(0,77,3),e.nrm(1,"option",124),e.YFu()),2&n){const t=_.$implicit;e.R7$(),e.Y8G("value",t.name),e.uP7(t.description),e.nnv(0)}}function Y_(n,_){if(1&n&&(e.j41(0,"div",84)(1,"cds-select",155),e.PLo(2,77),e.DNE(3,B_,2,1,"option",119)(4,z_,2,1,"option",119)(5,H_,2,2,"option",110),e.YFu(),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(3),e.Y8G("ngIf",null===t.placementTargets),e.R7$(),e.Y8G("ngIf",null!==t.placementTargets),e.R7$(),e.Y8G("ngForOf",t.placementTargets)}}function V_(n,_){if(1&n){const t=e.RV6();e.j41(0,"div",80)(1,"form",81,2)(3,"div",82),e.pXf(4,18),e.nI1(5,"titlecase"),e.nI1(6,"upperFirst"),e.k0s(),e.DNE(7,bi,4,0,"div",83),e.j41(8,"div",84)(9,"cds-text-label",85),e.PLo(10,19),e.nrm(11,"input",86),e.YFu(),e.k0s(),e.DNE(12,Ui,8,8,"ng-template",null,3,e.C5r),e.k0s(),e.DNE(14,xi,2,0,"cds-checkbox",87)(15,Yi,9,6,"div",84)(16,Qi,8,5,"div",84)(17,e_,8,0,"fieldset",88)(18,r_,8,2,"fieldset",88)(19,m_,13,5,"fieldset",88),e.j41(20,"fieldset")(21,"div",84)(22,"legend",89),e.pXf(23,20),e.k0s(),e.j41(24,"cds-checkbox",90),e.PLo(25,21),e.j41(26,"cd-help-text",91)(27,"span"),e.nrm(28,"a",92),e.k0s()(),e.YFu(),e.k0s()(),e.DNE(29,I_,8,3,"div",88),e.k0s(),e.j41(30,"fieldset")(31,"div",84)(32,"legend",89),e.pXf(33,22),e.k0s(),e.DNE(34,N_,5,2,"ng-container",93),e.nI1(35,"async"),e.k0s()(),e.j41(36,"fieldset")(37,"legend",89),e.PLo(38,23),e.nrm(39,"cd-help-text"),e.YFu(),e.k0s(),e.DNE(40,A_,2,5,"span",94),e.j41(41,"div",95)(42,"div",96)(43,"cds-tooltip",97)(44,"button",98),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.showTagModal())}),e.qex(45),e.pXf(46,24),e.bVm(),e.qSk(),e.nrm(47,"svg",99),e.k0s()()()()(),e.joV(),e.j41(48,"fieldset")(49,"div",84)(50,"legend",89),e.pXf(51,25),e.k0s(),e.j41(52,"cds-textarea-label",100),e.PLo(53,26),e.j41(54,"textarea",101,4),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.textAreaOnChange("bucket_policy"))}),e.k0s(),e.YFu(),e.k0s(),e.DNE(56,D_,1,1,"ng-template",null,5,e.C5r),e.j41(58,"div",95)(59,"div",96)(60,"cds-button-set",102)(61,"button",103),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.openUrl("https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-bucket-policies.html?icmpid=docs_amazons3_console"))}),e.PLo(62,27),e.qSk(),e.nrm(63,"svg",104),e.YFu(),e.k0s(),e.joV(),e.j41(64,"button",103),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.openUrl("https://awspolicygen.s3.amazonaws.com/policygen.html"))}),e.PLo(65,28),e.qSk(),e.nrm(66,"svg",104),e.YFu(),e.k0s()()(),e.joV(),e.j41(67,"div",96)(68,"cds-button-set",105)(69,"button",106),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.clearTextArea("bucket_policy","{}"))}),e.PLo(70,29),e.qSk(),e.nrm(71,"svg",107),e.YFu(),e.k0s()()()()(),e.DNE(72,W_,19,2,"div",83),e.joV(),e.j41(73,"div",84)(74,"cds-text-label"),e.PLo(75,30),e.nrm(76,"cd-help-text"),e.YFu(),e.k0s(),e.j41(77,"div",108)(78,"div",96)(79,"cds-select",109),e.bIt("valueChange",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSelectionFilter())}),e.PLo(80,31),e.DNE(81,w_,2,2,"option",110),e.YFu(),e.k0s(),e.DNE(82,x_,1,1,"ng-template",null,6,e.C5r),e.k0s(),e.j41(84,"div",96)(85,"cds-select",111),e.DNE(86,k_,2,2,"option",110),e.k0s(),e.DNE(87,j_,1,1,"ng-template",null,7,e.C5r),e.k0s()()()(),e.j41(89,"cd-form-advanced-fieldset"),e.DNE(90,Y_,6,3,"div",83),e.j41(91,"cd-rgw-rate-limit",112),e.bIt("rateLimitFormGroup",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.rateLimitFormInit(i))}),e.k0s()(),e.j41(92,"cd-form-button-panel",113),e.nI1(93,"titlecase"),e.nI1(94,"upperFirst"),e.bIt("submitActionEvent",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.submit())}),e.k0s()()()}if(2&n){const t=e.sdS(13),o=e.sdS(57),i=e.sdS(83),s=e.sdS(88),T=e.XpG(),F=e.sdS(4);e.Y8G("columnNumbers",e.lJ4(49,Ii)),e.R7$(),e.Y8G("formGroup",T.bucketForm),e.R7$(5),e.uP7(e.bMT(5,39,T.action))(e.bMT(6,41,T.resource)),e.nnv(4),e.R7$(),e.Y8G("ngIf",T.editing),e.R7$(2),e.Y8G("invalid",!T.bucketForm.controls.bid.valid&&T.bucketForm.controls.bid.dirty)("invalidText",t),e.R7$(2),e.Y8G("readonly",T.editing)("autofocus",!T.editing)("invalid",!T.bucketForm.controls.bid.valid&&T.bucketForm.controls.bid.dirty),e.R7$(3),e.vxM(T.accounts.length&&T.accountUsers.length>0?14:-1),e.R7$(),e.vxM(T.bucketForm.get("isAccountOwner").value?15:16),e.R7$(2),e.Y8G("ngIf",T.editing),e.R7$(),e.Y8G("ngIf",T.editing),e.R7$(),e.Y8G("ngIf",!T.editing||T.editing&&T.bucketForm.getValue("lock_enabled")),e.R7$(5),e.Y8G("disabled",!T.kmsConfigured&&!T.s3Configured),e.R7$(5),e.Y8G("ngIf",T.bucketForm.getValue("encryption_enabled")),e.R7$(5),e.Y8G("ngIf",e.l_i(50,Oi,T.multisiteStatus$,e.bMT(35,43,T.isDefaultZoneGroup$)))("ngIfElse",F),e.R7$(6),e.Y8G("ngForOf",T.tags),e.R7$(3),e.Y8G("description",T.tags.length>19?"Maximum of 20 tags reached":"")("highContrast",!0)("caret",!0),e.R7$(),e.Y8G("disabled",T.tags.length>19),e.R7$(8),e.Y8G("invalid",!T.bucketForm.controls.bucket_policy.valid&&T.bucketForm.controls.bucket_policy.dirty)("invalidText",o),e.R7$(20),e.Y8G("ngIf",T.editing),e.R7$(7),e.Y8G("invalid",!T.bucketForm.controls.grantee.valid&&T.bucketForm.controls.grantee.dirty)("invalidText",i),e.R7$(2),e.Y8G("ngForOf",T.grantees),e.R7$(4),e.Y8G("invalid",!T.bucketForm.controls.aclPermission.valid&&T.bucketForm.controls.aclPermission.dirty)("invalidText",s),e.R7$(),e.Y8G("ngForOf",T.aclPermissions),e.R7$(4),e.Y8G("ngIf",!T.editing),e.R7$(),e.Y8G("type","bucket")("isEditing",T.editing)("allowBid",T.bucketForm.getValue("bid")),e.R7$(),e.Y8G("form",T.bucketForm)("submitText",e.bMT(93,45,T.action)+" "+e.bMT(94,47,T.resource))}}function Z_(n,_){if(1&n&&(e.qex(0),e.nrm(1,"input",161),e.bVm()),2&n){const t=_.$implicit,o=e.XpG(),i=o.tag,s=o.index;e.R7$(),e.FCK("id","tag-",t.attribute,"-",s,""),e.Y8G("ngbTooltip",t.attribute)("value",i[t.attribute])}}function K_(n,_){if(1&n){const t=e.RV6();e.j41(0,"div",156),e.DNE(1,Z_,2,5,"ng-container",94),e.j41(2,"cds-icon-button",157),e.bIt("click",function(){const i=e.eBV(t).index,s=e.XpG();return e.Njj(s.showTagModal(i))}),e.qSk(),e.nrm(3,"svg",158),e.k0s(),e.joV(),e.j41(4,"cds-icon-button",159),e.bIt("click",function(){const i=e.eBV(t).index,s=e.XpG();return e.Njj(s.deleteTag(i))}),e.qSk(),e.nrm(5,"svg",160),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.tagConfig)}}function q_(n,_){1&n&&(e.j41(0,"cd-loading-panel"),e.pXf(1,78),e.k0s())}let Hn=(()=>{class n extends d.g{route;router;formBuilder;rgwBucketService;rgwSiteService;modalService;rgwUserService;notificationService;textAreaJsonFormatterService;textAreaXmlFormatterService;actionLabels;changeDetectorRef;rgwMultisiteService;rgwDaemonService;rgwAccountsService;bucketPolicyTextArea;lifecycleTextArea;bucketForm;editing=!1;owners=null;accounts=[];accountUsers=[];kmsProviders=null;action;resource;zonegroup;placementTargets=[];isVersioningAlreadyEnabled=!1;isMfaDeleteAlreadyEnabled=!1;icons=S.F;kmsConfigured=!1;s3Configured=!1;tags=[];dirtyTags=!1;tagConfig=[{attribute:"key"},{attribute:"value"}];grantees=[Pe.Owner,Pe.Everyone,Pe.AuthenticatedUsers];aclPermissions=[Se.FullControl];multisiteStatus$;isDefaultZoneGroup$;get isVersioningEnabled(){return this.bucketForm.getValue("versioning")}get isMfaDeleteEnabled(){return this.bucketForm.getValue("mfa-delete")}rateLimitComponent;constructor(t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se){super(),this.route=t,this.router=o,this.formBuilder=i,this.rgwBucketService=s,this.rgwSiteService=T,this.modalService=F,this.rgwUserService=k,this.notificationService=H,this.textAreaJsonFormatterService=q,this.textAreaXmlFormatterService=oe,this.actionLabels=le,this.changeDetectorRef=Re,this.rgwMultisiteService=ce,this.rgwDaemonService=Te,this.rgwAccountsService=se,this.editing=this.router.url.startsWith(`/rgw/bucket/${m.Qp.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource="wiadro",this.createForm()}ngAfterViewChecked(){this.changeDetectorRef.detectChanges(),this.textAreaOnChange(this.bucketPolicyTextArea),this.textAreaOnChange(this.lifecycleTextArea)}createForm(){const t=this,o=E.xQ.custom("lockDays",()=>{if(!t.bucketForm||!h().get(t.bucketForm.getRawValue(),"lock_enabled"))return!1;const i=Number(t.bucketForm.getValue("lock_retention_period_days"));return!Number.isInteger(i)||0===i});this.bucketForm=this.formBuilder.group({id:[null],bid:[null,[r.k0.required],this.editing?[]:[E.xQ.bucketName(),E.xQ.bucketExistence(!1,this.rgwBucketService)]],owner:[null,[E.xQ.requiredIf({isAccountOwner:!1})]],kms_provider:["vault"],"placement-target":[null],versioning:[null],"mfa-delete":[null],"mfa-token-serial":[""],"mfa-token-pin":[""],lock_enabled:[{value:!1,disabled:this.editing}],encryption_enabled:[null],encryption_type:[null,[E.xQ.requiredIf({encryption_enabled:!0})]],keyId:[null,[E.xQ.requiredIf({encryption_type:"aws:kms",encryption_enabled:!0})]],lock_mode:["COMPLIANCE"],lock_retention_period_days:[10,[E.xQ.number(!1),o]],bucket_policy:["{}",E.xQ.json()],lifecycle:["{}",E.xQ.jsonOrXml()],grantee:[Pe.Owner,[r.k0.required]],aclPermission:[[Se.FullControl],[r.k0.required]],replication:[!1],isAccountOwner:[!1],accountUser:[null,[E.xQ.requiredIf({isAccountOwner:!0})]]})}ngOnInit(){const t={owners:this.rgwUserService.enumerate(!0),accounts:this.rgwAccountsService.list()};this.multisiteStatus$=this.rgwMultisiteService.status(),this.isDefaultZoneGroup$=this.rgwDaemonService.selectedDaemon$.pipe((0,M.n)(o=>this.rgwSiteService.get("default-zonegroup").pipe((0,a.T)(i=>o.zonegroup_id===i)))),this.kmsProviders=ne.kmsProviders,this.rgwBucketService.getEncryptionConfig().subscribe(o=>{this.s3Configured=o.s3&&Object.keys(o.s3).length>0,this.kmsConfigured=o.kms&&Object.keys(o.kms).length>0,this.kmsConfigured&&this.s3Configured?this.bucketForm.get("encryption_type").setValue(""):this.kmsConfigured?this.bucketForm.get("encryption_type").setValue("aws:kms"):this.s3Configured?this.bucketForm.get("encryption_type").setValue("AES256"):this.bucketForm.get("encryption_type").setValue("")}),this.editing||(t.getPlacementTargets=this.rgwSiteService.get("placement-targets")),this.route.params.subscribe(o=>{if(o.hasOwnProperty("bid")){const i=decodeURIComponent(o.bid);t.getBid=this.rgwBucketService.get(i)}(0,v.p)(t).subscribe(i=>{if(this.accounts=i.accounts,this.accountUsers=i.owners.filter(s=>s.account_id),this.owners=i.owners.filter(s=>!s.account_id),i.getPlacementTargets){const s=i.getPlacementTargets;this.zonegroup=s.zonegroup,h().forEach(s.placement_targets,T=>{T.description=`${T.name} (${"pool"}: ${T.data_pool})`,this.placementTargets.push(T)}),1===this.placementTargets.length&&this.bucketForm.get("placement-target").setValue(this.placementTargets[0].name)}if(i.getBid){const s=i.getBid,T=h().clone(this.bucketForm.getRawValue());let F=h().pick(s,h().keys(T));if(F.lock_retention_period_days=this.rgwBucketService.getLockDays(s),F["placement-target"]=s.placement_rule,F.versioning=s.versioning===ge.ENABLED,F["mfa-delete"]=s.mfa_delete===re.ENABLED,F.encryption_enabled="Enabled"===s.encryption,s.tagset)for(const[k,H]of Object.entries(s.tagset))this.tags.push({key:k,value:H.toString()});if(F=h().merge(T,F),this.editing&&([F.grantee,F.aclPermission]=this.aclXmlToFormValues(s.acl,s.owner),F.lifecycle=JSON.stringify(s.lifecycle||{})),this.bucketForm.setValue(F),this.editing){const k=i.owners.map(H=>H.uid);if(!k.includes(F.owner)){const H=Object.assign({uid:F.owner},k.find(q=>q.uid===m.D5.defaultUser));this.accountUsers.push(H),this.bucketForm.get("isAccountOwner").setValue(!0),this.bucketForm.get("isAccountOwner").disable(),this.bucketForm.get("accountUser").setValue(F.owner),this.bucketForm.get("accountUser").disable()}this.isVersioningAlreadyEnabled=this.isVersioningEnabled,this.isMfaDeleteAlreadyEnabled=this.isMfaDeleteEnabled,this.setMfaDeleteValidators(),F.lock_enabled&&this.bucketForm.controls.versioning.disable(),F.bucket_policy&&this.bucketForm.get("bucket_policy").setValue(JSON.stringify(F.bucket_policy,null,2)),F.replication&&("Enabled"===F.replication?.Rule?.Status?this.bucketForm.get("replication").setValue(!0):this.bucketForm.get("replication").setValue(!1)),this.filterAclPermissions()}}this.loadingReady()})})}goToListView(){this.router.navigate(["/rgw/bucket"])}rateLimitFormInit(t){this.bucketForm.addControl("rateLimit",t)}submit(){if(this.bucketForm.pristine&&this.rateLimitComponent.form.pristine)return void this.goToListView();if(this.bucketForm.pending)return void this.bucketForm.setErrors({cdSubmitButton:!0});null==this.bucketForm.getValue("encryption_enabled")&&(this.bucketForm.get("encryption_enabled").setValue(!1),this.bucketForm.get("encryption_type").setValue(null));const t=this.bucketForm.value,o=this.tagsToXML(this.tags),i=this.getBucketPolicy(),s=this.permissionToCannedAcl();if(this.editing){const T=this.getVersioningStatus(),F=this.getMfaDeleteStatus();let k;k=this.bucketForm.get("accountUser").disabled?"":t.isAccountOwner?this.accountUsers.filter(q=>t.accountUser===q.uid)[0]?.account_id??t.owner:t.owner,this.rgwBucketService.update(t.bid,t.id,k,T,t.encryption_enabled,t.encryption_type,t.keyId,F,t["mfa-token-serial"],t["mfa-token-pin"],t.lock_mode,t.lock_retention_period_days,o,i,s,t.replication,t.lifecycle).subscribe(()=>{this.notificationService.show(f._.success,"Updated Object Gateway bucket '" + t.bid + "'."),this.updateBucketRateLimit(),this.goToListView()},()=>{this.bucketForm.setErrors({cdSubmitButton:!0})})}else this.rgwBucketService.create(t.bid,t.isAccountOwner?t.accountUser:t.owner,this.zonegroup,t["placement-target"],t.lock_enabled,t.lock_mode,t.lock_retention_period_days,t.encryption_enabled,t.encryption_type,t.keyId,o,i,s,t.replication).subscribe(()=>{this.notificationService.show(f._.success,"Created Object Gateway bucket '" + t.bid + "'"),this.goToListView(),this.updateBucketRateLimit()},()=>{this.bucketForm.setErrors({cdSubmitButton:!0})})}updateBucketRateLimit(){const t=this.bucketForm.getValue("owner")||"",o=this.bucketForm.getValue("bid");let i;const s=t.includes("$"),T=o.includes("/");i=T&&s?o:s?`${t.split("$")[0]}/${o}`:T?o.split("/")[1]:o;const F=this.rateLimitComponent.getRateLimitFormValue();F&&this.rgwBucketService.updateBucketRateLimit(i,F).subscribe(()=>{},k=>{this.notificationService.show(f._.error,k)})}areMfaCredentialsRequired(){return this.isMfaDeleteEnabled!==this.isMfaDeleteAlreadyEnabled||this.isMfaDeleteAlreadyEnabled&&this.isVersioningEnabled!==this.isVersioningAlreadyEnabled}setMfaDeleteValidators(){const t=this.bucketForm.get("mfa-token-serial"),o=this.bucketForm.get("mfa-token-pin");this.areMfaCredentialsRequired()?(t.setValidators(r.k0.required),o.setValidators(r.k0.required)):(t.setValidators(null),o.setValidators(null)),t.updateValueAndValidity(),o.updateValueAndValidity()}getVersioningStatus(){return this.isVersioningEnabled?ge.ENABLED:ge.SUSPENDED}getMfaDeleteStatus(){return this.isMfaDeleteEnabled?re.ENABLED:re.DISABLED}getBucketPolicy(){return this.bucketForm.getValue("bucket_policy")||"{}"}fileUpload(t,o){const i=t[0];(new FileReader).addEventListener("load",()=>{const T=this.bucketForm.get(o);T.setValue(i),T.markAsDirty(),T.markAsTouched(),T.updateValueAndValidity()})}textAreaOnChange(t){t?.nativeElement?.value?.startsWith?.("<")?this.textAreaXmlFormatterService.format(t):this.textAreaJsonFormatterService.format(t)}openUrl(t){window.open(t,"_blank")}clearTextArea(t,o=""){this.bucketForm.get(t).setValue(o),this.bucketForm.markAsDirty(),this.bucketForm.updateValueAndValidity()}showTagModal(t){const i=this.modalService.show(A);i.currentKeyTags=this.tags.map(s=>s.key),h().isNumber(t)&&(i.editMode=!0,i.fillForm(this.tags[t]),i.storedKey=this.tags[t].key),i.submitAction.subscribe(s=>{this.setTag(s,t)})}deleteTag(t){this.tags.splice(t,1),this.dirtyTags=!0,this.bucketForm.markAsDirty(),this.bucketForm.updateValueAndValidity()}setTag(t,o){h().isNumber(o)?this.tags[o]=t:this.tags.push(t),this.dirtyTags=!0,this.bucketForm.markAsDirty(),this.bucketForm.updateValueAndValidity()}tagsToXML(t){if(!this.dirtyTags&&0===t.length)return"";let o="<Tagging><TagSet>";for(const i of t){o+="<Tag>";for(const s in i)"key"===s?o+=`<Key>${i[s]}</Key>`:"value"===s&&(o+=`<Value>${i[s]}</Value>`);o+="</Tag>"}return o+="</TagSet></Tagging>",o}aclXmlToFormValues(t,o){const i=new D.Parser({explicitArray:!1,trim:!0});let s=Se.FullControl,T=Pe.Owner;return i.parseString(t,(F,k)=>{if(F)return null;const H=k.AccessControlPolicy.AccessControlList.Grant;for(let q=0;q<H.length;q++)H[q].Grantee.ID!==o&&(H[q].Grantee.URI&&H[q].Grantee.URI.includes("AllUsers")?(T=Pe.Everyone,s="READ"===H[q].Permission&&s!==Se.Write?Se.Read:" WRITE"===H[q].Permission&&s!==Se.Read?Se.Write:Se.All):H[q].Grantee.URI&&H[q].Grantee.URI.includes("AuthenticatedUsers")&&(T=Pe.AuthenticatedUsers,s=Se.Read))}),[T,s]}onSelectionFilter(){this.filterAclPermissions(),this.bucketForm.get("aclPermission").setValue(this.aclPermissions[0])}filterAclPermissions(){switch(this.bucketForm.get("grantee").value){case Pe.Owner:this.aclPermissions=[Se.FullControl];break;case Pe.Everyone:this.aclPermissions=[Se.Read,Se.All];break;case Pe.AuthenticatedUsers:this.aclPermissions=[Se.Read]}}permissionToCannedAcl(){const t=this.bucketForm.get("grantee").value,o=this.bucketForm.get("aclPermission").value;switch(t){case Pe.Everyone:return o===Se.Read?"public-read":"public-read-write";case Pe.AuthenticatedUsers:return"authenticated-read";default:return"private"}}static \u0275fac=function(o){return new(o||n)(e.rXU(I.nX),e.rXU(I.Ix),e.rXU(u.$),e.rXU($.c),e.rXU(z.B),e.rXU(Mt.V),e.rXU(P.p),e.rXU(B.J),e.rXU(Ci.C),e.rXU(Mi),e.rXU(m.Ss),e.rXU(e.gRc),e.rXU(y.A),e.rXU(Q.y),e.rXU(Kt))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-bucket-form"]],viewQuery:function(o,i){if(1&o&&(e.GBs(Gi,5),e.GBs(Pi,5),e.GBs(Mn,5)),2&o){let s;e.mGM(s=e.lsd())&&(i.bucketPolicyTextArea=s.first),e.mGM(s=e.lsd())&&(i.lifecycleTextArea=s.first),e.mGM(s=e.lsd())&&(i.rateLimitComponent=s.first)}},features:[e.Vt3],decls:5,vars:1,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de,pe,He,Ye,ze,Ve,Ne,fe,nt,ot,it,_t,st,rt,at,lt,ct,Qe,ut,dt,ft,Me,ie,sn,xt,rn,an,ln,cn,un,dn,fn,pn,gn,Tn,Rn,mn,En,Sn,Fn,kt,Cn;return t="Nazwa...",o="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",i="Name " + "\ufffd#11\ufffd\ufffd/#11\ufffd" + "",s="Encryption",T="Enable " + "\ufffd#26\ufffd" + "" + "\ufffd#27\ufffd" + "Enables encryption for the objects in the bucket. To enable encryption on a bucket you need to set the configuration values for SSE-S3 or SSE-KMS. To set the configuration values " + "\ufffd#28\ufffd" + "Click here" + "\ufffd/#28\ufffd" + "" + "\ufffd/#27\ufffd" + "" + "\ufffd/#26\ufffd" + "",F="Replication",k="Tags " + "\ufffd#39\ufffd" + "Tagging provides a way to categorize storage" + "\ufffd/#39\ufffd" + "",H="Add tag",q="Policies ",oe="Bucket Policy " + "\ufffd#54\ufffd" + "" + "\ufffd/#54\ufffd" + "",le="Policy examples " + "\ufffd#63\ufffd" + "" + "\ufffd/#63\ufffd" + "",Re="Policy generator " + "\ufffd#66\ufffd" + "" + "\ufffd/#66\ufffd" + "",ce="Clear " + "\ufffd#71\ufffd" + "" + "\ufffd/#71\ufffd" + "",Te="ACL " + "\ufffd#76\ufffd" + "Any changes to the ACL will overwrite previous one. You can choose any of the available options to modify the spcified user group." + "\ufffd/#76\ufffd" + "",se="Grantee " + "\ufffd*81:1\ufffd\ufffd#1:1\ufffd" + "" + "\ufffd0:1\ufffd" + "" + "\ufffd/#1:1\ufffd\ufffd/*81:1\ufffd" + "",Ce="Id " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",he="Pole jest wymagane.",ye="Bucket names can only contain lowercase letters, numbers, periods and hyphens.",$e="Wybrana nazwa ju\u017C jest u\u017Cyta.",Ge="Bucket names must not contain uppercase characters or underscores.",Ue="Each label must start and end with a lowercase letter or a number.",xe="Bucket names cannot be formatted as IP address.",ke="Bucket labels cannot be empty and can only contain lowercase letters, numbers and hyphens.",ve="Bucket names must be 3 to 63 characters long.",de="Select account user ",pe="Account user " + "\ufffd*3:1\ufffd\ufffd#1:1\ufffd" + "Loading..." + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "" + "\ufffd*4:2\ufffd\ufffd#1:2\ufffd" + "-- Select a user --" + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "" + "\ufffd*5:3\ufffd\ufffd#1:3\ufffd" + "" + "\ufffd0:3\ufffd" + "" + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "",pe=e.k04(pe),He="Pole jest wymagane.",Ye=" The bucket is owned by an account. UI does not support changing the ownership of bucket owned by an account. ",ze="Owner " + "\ufffd*3:1\ufffd\ufffd#1:1\ufffd" + "Loading..." + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "" + "\ufffd*4:2\ufffd\ufffd#1:2\ufffd" + "-- Select a user --" + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "" + "\ufffd*5:3\ufffd\ufffd#1:3\ufffd" + "" + "\ufffd0:3\ufffd" + "" + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "",ze=e.k04(ze),Ve="Pole jest wymagane.",Ne="Versioning",fe="Enabled " + "\ufffd#6\ufffd" + "" + "\ufffd#7\ufffd" + "Enables versioning for the objects in the bucket." + "\ufffd/#7\ufffd" + "" + "\ufffd/#6\ufffd" + "",nt="Enables MFA (multi-factor authentication) Delete, which requires additional authentication for changing the bucket versioning state.",ot="Multi-Factor Authentication",it="Delete enabled ",_t="Token Serial Number " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",st="Pole jest wymagane.",rt="Token PIN " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",at="Pole jest wymagane.",lt=" Object Locking " + "\ufffd#4\ufffd" + " Store objects using a write-once-read-many (WORM) model to prevent objects from being deleted or overwritten for a fixed amount of time or indefinitely. Object Locking works only in versioned buckets. " + "\ufffd/#4\ufffd" + "",ct="Enable " + "\ufffd#7\ufffd" + "" + "\ufffd#8\ufffd" + "Enables locking for the objects in the bucket. Locking can only be enabled while creating a bucket." + "\ufffd/#8\ufffd" + "" + "\ufffd/#7\ufffd" + "",Qe="" + "\ufffd#3\ufffd" + "Compliance" + "[\ufffd/#3\ufffd|\ufffd/#4\ufffd]" + "" + "\ufffd#4\ufffd" + "Governance" + "[\ufffd/#3\ufffd|\ufffd/#4\ufffd]" + "",Qe=e.k04(Qe),ut=" In COMPLIANCE an object version cannot be overwritten or deleted for the duration of the period. ",dt=" In GOVERNANCE mode, users cannot overwrite or delete an object version or alter its lock settings unless they have special permissions. ",ft="Retention period (days)",Me="The number of days that you want to specify for the default retention period that will be applied to new objects placed in this bucket.",ie="The entered value must be a positive integer.",sn="Retention Days must be a positive integer.",xt="KMS Provider " + "\ufffd*4:1\ufffd\ufffd#1:1\ufffd" + "Loading..." + "[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd]" + "" + "\ufffd*5:2\ufffd\ufffd#1:2\ufffd" + "-- Select a provider --" + "[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd]" + "" + "\ufffd*6:3\ufffd\ufffd#1:3\ufffd" + "" + "\ufffd0:3\ufffd" + "" + "[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*6:3\ufffd]" + "",xt=e.k04(xt),rn="Key Id " + "\ufffd#12\ufffd\ufffd/#12\ufffd" + "",an="Pole jest wymagane.",ln="Pole jest wymagane.",cn="Enable " + "\ufffd#3\ufffd" + "Enables replication for the objects in the bucket." + "\ufffd/#3\ufffd" + "",un=" A bi-directional sync policy group will be created by the dashboard along with flows and pipes. The pipe id will then be used for applying the replication policy to the bucket. ",dn="Invalid json text.",fn="Lifecycle " + "\ufffd#3\ufffd" + "" + "\ufffd/#3\ufffd" + "" + "\ufffd#5\ufffd" + "JSON or XML formatted document" + "\ufffd/#5\ufffd" + "",pn="Policy examples " + "\ufffd#13\ufffd" + "" + "\ufffd/#13\ufffd" + "",gn="Clear " + "\ufffd#18\ufffd" + "" + "\ufffd/#18\ufffd" + "",Tn="Invalid json text.",Rn="Invalid xml text.",mn="Pole jest wymagane.",En="" + "\ufffd0\ufffd" + "",Sn="Pole jest wymagane.",Fn="When creating a bucket, a placement target can be provided as part of the LocationConstraint to override the default placement targets from the user and zonegroup.",kt="Placement target " + "\ufffd*3:1\ufffd\ufffd#1:1\ufffd" + "Loading..." + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "" + "\ufffd*4:2\ufffd\ufffd#1:2\ufffd" + "-- Select a placement target --" + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "" + "\ufffd*5:3\ufffd\ufffd#1:3\ufffd" + "" + "\ufffd0:3\ufffd" + "" + "[\ufffd/#1:1\ufffd\ufffd/*3:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*4:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*5:3\ufffd]" + "",kt=e.k04(kt),Cn="Checking multi-site status...",[["tagTpl",""],["loadingTpl",""],["frm","ngForm"],["nameError",""],["bucketPolicyTextArea",""],["bucketPolicyError",""],["granteeError",""],["aclPermissionError",""],["accountUserError",""],["ownerError",""],["mfaSerialError",""],["mfaPinError",""],["lockModeHelper",""],["retentionPeriodError",""],["kmsProviderError",""],["keyIdError",""],["lifecycleTextArea",""],["lifecycleError",""],o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de,pe,He,Ye,ze,Ve,Ne,fe,ot,it,_t,st,rt,at,lt,ct,Qe,ut,dt,ie,sn,xt,rn,an,ln,cn,un,dn,fn,pn,gn,Tn,Rn,mn,En,Sn,kt,Cn,["cdsCol","",3,"columnNumbers",4,"cdFormLoading"],["cdsCol","",3,"columnNumbers"],["name","bucketForm","novalidate","",3,"formGroup"],[1,"form-header"],["class","form-item",4,"ngIf"],[1,"form-item"],["for","bid","cdRequiredField","Name",3,"invalid","invalidText"],["cdsText","","placeholder",t,"id","bid","name","bid","formControlName","bid",3,"readonly","autofocus","invalid"],["formControlName","isAccountOwner"],[4,"ngIf"],[1,"cd-header"],["name","encryption_enabled","formControlName","encryption_enabled","id","encryption_enabled",3,"disabled"],["aria-label","encryption helper"],["href","#/rgw/configuration"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["cdsRow",""],["cdsCol",""],[3,"description","highContrast","caret"],["cdsButton","tertiary","id","add-tag",3,"click","disabled"],["cdsIcon","add","size","32",1,"cds--btn__icon"],["for","id",3,"invalid","invalidText"],["cdsTextArea","","id","bucket_policy","formControlName","bucket_policy","cols","200",1,"textarea-field",3,"change"],[1,"mt-1"],["cdsButton","tertiary","id","example-generator-button",3,"click"],["cdsIcon","launch","size","16",1,"cds--btn__icon"],[1,"float-end","mt-1"],["cdsButton","tertiary","id","clear-bucket-policy",3,"click"],["cdsIcon","close","size","32",1,"cds--btn__icon"],["cdsRow","",1,"form-item-append"],["id","grantee","name","grantee","label","Grantee","formControlName","grantee","helperText","Select a grantee (user group) to modify it's permisions",3,"valueChange","invalid","invalidText"],[3,"value",4,"ngFor","ngForOf"],["id","aclPermission","name","aclPermission","label","Permissions","helperText","Select the permision to give to the selected grantee. Regardless, the owner of the bucket will always have FULL CONTROL access","formControlName","aclPermission",3,"invalid","invalidText"],[3,"rateLimitFormGroup","type","isEditing","allowBid"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["for","id"],["cdsText","","id","id","name","id","formControlName","id","readonly",""],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["label","Account user","id","acc_user","formControlName","accountUser","cdRequiredField","Account user",3,"invalidText","invalid"],[3,"ngValue",4,"ngIf"],["value","",4,"ngIf"],["type","info",4,"ngIf"],[3,"ngValue"],["value",""],[3,"value"],["type","info"],["label","Owner","formControlName","owner","id","owner","cdRequiredField","Owner",3,"invalidText","invalid"],["name","versioning","formControlName","versioning","id","versioning",3,"checkedChange"],["name","mfa-delete","formControlName","mfa-delete","id","mfa-delete","helperText",nt,3,"checkedChange"],["for","mfa-token-serial","cdRequiredField","MFA Serial Number",3,"invalid","invalidText"],["cdsText","","id","mfa-token-serial","name","mfa-token-serial","formControlName","mfa-token-serial",3,"invalid"],["for","mfa-token-pin","cdRequiredField","MFA Token PIN",3,"invalid","invalidText"],["cdsText","","id","mfa-token-pin","name","mfa-token-pin","formControlName","mfa-token-pin",3,"invalid"],["name","lock_enabled","formControlName","lock_enabled","id","lock_enabled",3,"disabled"],["type","info","class","me-1",4,"ngIf"],["type","warning",4,"ngIf"],["label","Mode","for","lock_mode","formControlName","lock_mode","name","lock_mode","id","lock_mode",3,"helperText"],["value","COMPLIANCE"],["value","GOVERNANCE"],["name","lock_retention_period_days","formControlName","lock_retention_period_days","id","lock_retention_period_days","min","1","label",ft,"helperText",Me,3,"invalid","invalidText"],["type","info",1,"me-1"],["type","warning"],["formControlName","encryption_type"],["value","AES256",3,"disabled"],["value","aws:kms",3,"disabled"],["label","KMS Provider","for","kms_provider","formControlName","kms_provider","name","kms_provider","id","kms_provider","cdRequiredField","KMS Provider",3,"invalidText","invalid"],["for","keyId","cdRequiredField","Key Id",3,"invalid","invalidText"],["cdsText","","id","keyId","name","keyId","formControlName","keyId",3,"invalid"],["name","replication","formControlName","replication","id","replication",3,"disabled"],["type","info","class","me-1","id","replication-info","spacingClass","mt-1",4,"ngIf"],["type","info","id","replication-info","spacingClass","mt-1",1,"me-1"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cdsTextArea","","id","lifecycle","formControlName","lifecycle","cols","200",1,"textarea-field",3,"change"],["cdsButton","tertiary","id","lifecycle-examples-button",3,"click"],["cdsButton","tertiary","id","clear-lifecycle",3,"click"],["label","Placement target","for","placement-target","formControlName","placement-target","name","placement-target","id","placement-target","helperText",Fn],[1,"form-item","form-item-append"],["kind","tertiary","size","md",3,"click"],["cdsIcon","edit","size","32",1,"cds--btn__icon"],["kind","danger","size","md",3,"click"],["cdsIcon","trash-can","size","32",1,"cds--btn__icon"],["type","text","cdsText","","readonly","",3,"id","ngbTooltip","value"]]},template:function(o,i){1&o&&e.DNE(0,V_,95,53,"div",79)(1,K_,6,1,"ng-template",null,0,e.C5r)(3,q_,2,0,"ng-template",null,1,e.C5r),2&o&&e.Y8G("cdFormLoading",i.loading)},dependencies:[R.Sq,R.bT,R.T3,hi.e,N.m,We.e,V.O,zn.e,Ae.B,Xt.G,Oe.S,Xe.E,qe.P,r.qT,r.xH,r.y7,r.me,r.BC,r.cb,r.j4,r.JD,b.md,et.ee,et.YP,mt.$n,mt.Te,mt.K0,jt.LJ,Ie._P,Ie.Zt,Ie.ks,Ie.fs,be.Sc,Ze.l6,Ze.c$,De.jM,hn.m_,qt.sx,qt.z6,Mn,R.Jj,R.PV,pt.r]})}return n})();var bn=g(66313),Bt=g(68556),Dt=g(25947),Lt=g(84821),Je=g(62847),gt=g(19380),zt=g(85481),Jt=g(73651),Yn=g(18457),Qt=g(50813),Tt=g(2361),Vn=g(22453),ht=g(3140);const J_=["region","target_endpoint","access_key","secret_key","target_path"],Zn=["region","target_endpoint","access_key","secret_key","target_path","glacier_restore_tier_type","restore_storage_class"],we={LOCAL:"local",CLOUD_TIER:"cloud-s3",GLACIER:"cloud-s3-glacier"},yt={LOCAL:"Local",CLOUD_TIER:"Cloud S3",GLACIER:"Cloud S3 Glacier"},Kn="Enables fetching objects from remote cloud S3 if not found locally.",qn="It specifies that objects this size or larger are transitioned to the cloud using multipart upload.",Jn="It specifies the minimum part size to use when transitioning objects using multipart upload.",Qn="Target Path refers to the storage location (e.g., bucket or container) in the cloud where data will be stored.",eo="To view or copy your access key, go to your cloud service's user management or credentials section, find your user profile, and locate the access key. You can view and copy the key by following the instructions provided.",to="To view or copy your secret key, go to your cloud service's user management or credentials section, find your user profile, and locate the secret key. You can view and copy the key by following the instructions provided.",no="Retain object metadata after transition to the cloud.",oo="Local storage uses on-premises or directly attached devices for data storage.",os="Cloud S3 storage uses Amazon S3-compatible cloud services for tiering.",is="Glacier storage uses Amazon S3 Glacier for low-cost, long-term archival data storage.",io="Refers to number of days to the object will be restored on glacier/tape endpoint.",_o="Restore retrieval type.",so="Standard glacier restore tier type restores data in 3\u20135 hours.",_s="Expedited glacier restore tier type restores in 1\u20135 minutes (faster but costlier).",ro="Refers to number of days to the object will be restored on glacier/tape endpoint.",ao="The days for which objects restored via read-through are retained.",lo="The storage class to which object data is to be restored.",ss="A Zone Group is a logical grouping of one or more zones that share the same data\n                  and metadata, allowing for multi-site replication and geographic distribution of\n                  data.";class co{static filterAndMapTierTargets(_){return _.zonegroups.flatMap(t=>t.placement_targets.flatMap(o=>{const i=new Set((o.tier_targets||[]).map(F=>F.key));return[...(o.tier_targets||[]).map(F=>this.getTierTargets(F,t.name,o.name)),...(o.storage_classes||[]).filter(F=>"STANDARD"!==F&&!i.has(F)).map(F=>({zonegroup_name:t.name,placement_target:o.name,storage_class:F,tier_type:we.LOCAL}))]}))}static getTierTargets(_,t,o){const i=_.val,s=i.tier_type,T={zonegroup_name:t,placement_target:o,storage_class:i.storage_class,tier_type:s},F={...T,retain_head_object:i.retain_head_object,allow_read_through:i.allow_read_through,restore_storage_class:i.restore_storage_class,read_through_restore_days:i.read_through_restore_days,...i.s3};return s&&s!==we.LOCAL?s===we.GLACIER?{...F,...i["s3-glacier"]}:F:T}}const rs=()=>({lg:2,md:2});function as(n,_){if(1&n){const t=e.RV6();e.j41(0,"cd-alert-panel",55),e.bIt("action",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.enableSnapshotSchedule())}),e.pXf(1,16),e.k0s()}}function ls(n,_){if(1&n){const t=e.RV6();e.j41(0,"cd-alert-panel",56),e.bIt("action",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.goToCreateStorageClass())}),e.pXf(1,17),e.k0s()}}function cs(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,18),e.k0s())}function us(n,_){1&n&&(e.j41(0,"span",58),e.qex(1),e.pXf(2,19),e.bVm(),e.k0s())}function ds(n,_){1&n&&(e.j41(0,"span",58),e.qex(1),e.pXf(2,20),e.bVm(),e.k0s())}function fs(n,_){if(1&n&&e.DNE(0,us,3,0,"span",57)(1,ds,3,0,"span",57),2&n){e.XpG();const t=e.sdS(6),o=e.XpG();e.Y8G("ngIf",o.tieringForm.showError("name",t,"required")),e.R7$(),e.Y8G("ngIf",o.tieringForm.showError("name",t,"duplicate"))}}function ps(n,_){1&n&&(e.j41(0,"option",59),e.EFF(1,"Loading..."),e.k0s())}function gs(n,_){1&n&&(e.j41(0,"option",59),e.EFF(1,"-- No storage class available --"),e.k0s())}function Ts(n,_){1&n&&(e.j41(0,"option",59),e.EFF(1,"-- Select the storage class --"),e.k0s())}function Rs(n,_){if(1&n&&(e.j41(0,"option",50),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.Y8G("value",t.storage_class),e.R7$(),e.SpI(" ",t.storage_class," ")}}function ms(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,21),e.k0s())}function Es(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,23),e.k0s())}function Ss(n,_){1&n&&(e.j41(0,"span",58),e.qex(1),e.pXf(2,24),e.bVm(),e.k0s())}function Fs(n,_){if(1&n&&e.DNE(0,Ss,3,0,"span",57),2&n){e.XpG(2);const t=e.sdS(6),o=e.XpG();e.Y8G("ngIf",o.tieringForm.showError("prefix",t,"required"))}}function Cs(n,_){if(1&n&&(e.j41(0,"div",42)(1,"cds-text-label",60),e.PLo(2,22),e.nrm(3,"input",61),e.YFu(),e.k0s(),e.DNE(4,Es,2,0,"ng-template",null,6,e.C5r)(6,Fs,1,1,"ng-template",null,7,e.C5r),e.k0s()),2&n){const t=e.sdS(5),o=e.sdS(7),i=e.XpG(2);e.R7$(),e.Y8G("invalid",!i.tieringForm.controls.prefix.valid&&i.tieringForm.controls.prefix.dirty)("invalidText",o)("helperText",t)}}function Ms(n,_){1&n&&(e.qex(0),e.pXf(1,28),e.bVm())}function hs(n,_){1&n&&(e.qex(0),e.pXf(1,29),e.bVm())}function Gs(n,_){if(1&n){const t=e.RV6();e.qex(0,66)(1,67),e.j41(2,"div",68)(3,"div",69)(4,"cds-text-label",70),e.PLo(5,26),e.nrm(6,"input",71),e.YFu(),e.k0s(),e.DNE(7,Ms,2,0,"ng-template",null,8,e.C5r),e.k0s(),e.j41(9,"div",69)(10,"cds-text-label",72),e.PLo(11,27),e.nrm(12,"input",73),e.YFu(),e.k0s(),e.DNE(13,hs,2,0,"ng-template",null,9,e.C5r),e.k0s(),e.j41(15,"div",74)(16,"cds-icon-button",75),e.bIt("click",function(){const i=e.eBV(t).index,s=e.XpG(3);return e.Njj(s.removeTags(i))}),e.qSk(),e.nrm(17,"svg",76),e.k0s()()(),e.bVm()()}if(2&n){const t=_.index,o=e.sdS(8),i=e.sdS(14),s=e.XpG(3);e.R7$(),e.Y8G("formGroupName",t),e.R7$(3),e.Y8G("invalid",!s.tieringForm.controls.tags.controls[t].controls.Key.valid&&s.tieringForm.controls.tags.controls[t].controls.Key.dirty)("invalidText",o),e.R7$(2),e.Y8G("invalid",s.tieringForm.controls.tags.controls[t].controls.Key.invalid&&s.tieringForm.controls.tags.controls[t].controls.Key.dirty),e.R7$(4),e.Y8G("invalid",!s.tieringForm.controls.tags.controls[t].controls.Value.valid&&s.tieringForm.controls.tags.controls[t].controls.Value.dirty)("invalidText",i),e.R7$(2),e.Y8G("invalid",s.tieringForm.controls.tags.controls[t].controls.Value.invalid&&s.tieringForm.controls.tags.controls[t].controls.Value.dirty),e.R7$(3),e.Y8G("columnNumbers",e.lJ4(8,rs))}}function Ps(n,_){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",62),e.EFF(2,"Tags"),e.k0s(),e.j41(3,"div"),e.EFF(4,"All the tags must exist in the object's tag set for the rule to apply."),e.k0s(),e.DNE(5,Gs,18,9,"ng-container",63),e.j41(6,"div",42)(7,"button",64),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.addTags())}),e.PLo(8,25),e.qSk(),e.nrm(9,"svg",65),e.YFu(),e.k0s()()()}if(2&n){const t=e.XpG(2);e.R7$(5),e.Y8G("ngForOf",t.tags.controls)}}function Is(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,30),e.k0s())}function Os(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,31),e.k0s())}function Ns(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,32),e.k0s())}function bs(n,_){if(1&n&&e.DNE(0,Os,2,0,"span",52)(1,Ns,2,0,"span",52),2&n){e.XpG();const t=e.sdS(6),o=e.XpG();e.Y8G("ngIf",o.tieringForm.showError("days",t,"required")),e.R7$(),e.Y8G("ngIf",o.tieringForm.showError("days",t,"pattern"))}}function As(n,_){if(1&n&&(e.qex(0),e.j41(1,"section",38),e.DNE(2,as,2,0,"cd-alert-panel",39),e.nI1(3,"async"),e.DNE(4,ls,2,0,"cd-alert-panel",40),e.j41(5,"form",41,0)(7,"div",42)(8,"cds-text-label",43),e.PLo(9,11),e.nrm(10,"input",44),e.YFu(),e.k0s(),e.DNE(11,cs,2,0,"ng-template",null,1,e.C5r)(13,fs,2,2,"ng-template",null,2,e.C5r),e.k0s(),e.j41(15,"div",42)(16,"cds-select",45),e.DNE(17,ps,2,0,"option",46)(18,gs,2,0,"option",46)(19,Ts,2,0,"option",46)(20,Rs,2,2,"option",47),e.k0s(),e.DNE(21,ms,2,0,"ng-template",null,3,e.C5r),e.k0s(),e.j41(23,"legend",48),e.EFF(24,"Choose a configuration scope"),e.k0s(),e.j41(25,"div")(26,"cds-radio-group",49)(27,"cds-radio",50),e.pXf(28,12),e.k0s(),e.j41(29,"cds-radio",50),e.pXf(30,13),e.k0s()()(),e.DNE(31,Cs,8,3,"div",51)(32,Ps,10,1,"div",52),e.j41(33,"legend",48),e.EFF(34,"Status"),e.k0s(),e.j41(35,"div")(36,"cds-radio-group",53)(37,"cds-radio",50),e.pXf(38,14),e.k0s(),e.j41(39,"cds-radio",50),e.pXf(40,15),e.k0s()()(),e.j41(41,"div",42),e.nrm(42,"cds-number",54),e.DNE(43,Is,2,0,"ng-template",null,4,e.C5r)(45,bs,2,2,"ng-template",null,5,e.C5r),e.k0s()()(),e.bVm()),2&n){const t=e.sdS(12),o=e.sdS(14),i=e.sdS(22),s=e.sdS(44),T=e.sdS(46),F=e.XpG();e.R7$(2),e.Y8G("ngIf",!1===e.bMT(3,23,F.snapScheduleModuleStatus$)),e.R7$(2),e.Y8G("ngIf",0===(null==F.storageClassList?null:F.storageClassList.length)&&F.isStorageClassFetched),e.R7$(),e.Y8G("formGroup",F.tieringForm),e.R7$(3),e.Y8G("invalid",!F.tieringForm.controls.name.valid&&F.tieringForm.controls.name.dirty)("invalidText",o)("helperText",t),e.R7$(8),e.Y8G("helperText",i),e.R7$(),e.Y8G("ngIf",null===F.storageClassList),e.R7$(),e.Y8G("ngIf",null!==F.storageClassList&&0===F.storageClassList.length),e.R7$(),e.Y8G("ngIf",null!==F.storageClassList&&F.storageClassList.length>0),e.R7$(),e.Y8G("ngForOf",F.storageClassList),e.R7$(7),e.Y8G("value",!1),e.R7$(),e.uP7("Apply to all objects in the bucket"),e.nnv(28),e.R7$(),e.Y8G("value",!0),e.R7$(),e.uP7("Limit the scope of this rule to selected filter criteria"),e.nnv(30),e.R7$(),e.Y8G("ngIf",F.tieringForm.controls.hasPrefix.value),e.R7$(),e.Y8G("ngIf",F.tieringForm.controls.hasPrefix.value),e.R7$(5),e.Y8G("value","Enabled"),e.R7$(2),e.Y8G("value","Disabled"),e.R7$(3),e.Y8G("min",1)("invalid",!F.tieringForm.controls.days.valid&&F.tieringForm.controls.days.dirty)("invalidText",T)("helperText",s)}}let uo=(()=>{class n extends d.g{bucket;selectedLifecycle;editing;actionLabels;rgwBucketService;fb;cd;rgwZonegroupService;notificationService;router;tieringForm;tagsToRemove=[];storageClassList=null;configuredLifecycle;isStorageClassFetched=!1;constructor(t,o,i=!1,s,T,F,k,H,q,oe){super(),this.bucket=t,this.selectedLifecycle=o,this.editing=i,this.actionLabels=s,this.rgwBucketService=T,this.fb=F,this.cd=k,this.rgwZonegroupService=H,this.notificationService=q,this.router=oe}ngOnInit(){this.rgwBucketService.getLifecycle(this.bucket.bucket,this.bucket.owner,this.bucket.tenant).subscribe(t=>{if(null===t&&(t={LifecycleConfiguration:{Rule:[]}}),t.LifecycleConfiguration.Rule=t.LifecycleConfiguration.Rule.map(o=>(o?.Filter?.Tag&&!Array.isArray(o?.Filter?.Tag)&&(o.Filter.Tag=[o.Filter.Tag]),o?.Filter?.And?.Tag&&!Array.isArray(o?.Filter?.And?.Tag)&&(o.Filter.And.Tag=[o.Filter.And.Tag]),o)),this.configuredLifecycle=t,this.editing){const o=this.configuredLifecycle?.LifecycleConfiguration?.Rule.filter(i=>i?.ID===this.selectedLifecycle?.ID)[0];this.tieringForm.patchValue({name:o?.ID,hasPrefix:this.checkIfRuleHasFilters(o),prefix:o?.Prefix||o?.Filter?.Prefix||o?.Filter?.And?.Prefix||"",status:o?.Status,days:o?.Transition?.Days}),this.setTags(o),this.tieringForm.get("name").disable()}}),this.tieringForm=this.fb.group({name:[null,[r.k0.required,this.duplicateConfigName.bind(this)]],storageClass:[null,r.k0.required],hasPrefix:[!1,[r.k0.required]],prefix:[null,[E.xQ.composeIf({hasPrefix:!0},[r.k0.required])]],tags:this.fb.array([]),status:["Enabled",[r.k0.required]],days:[60,[r.k0.required,E.xQ.number(!1)]]}),this.loadStorageClass()}checkIfRuleHasFilters(t){return!!(this.isValidPrefix(t?.Prefix)||this.isValidPrefix(t?.Filter?.Prefix)||this.isValidArray(t?.Filter?.Tag)||this.isValidPrefix(t?.Filter?.And?.Prefix)||this.isValidArray(t?.Filter?.And?.Tag))}isValidPrefix(t){return!!t}isValidArray(t){return Array.isArray(t)&&t.length>0}setTags(t){Array.isArray(t?.Filter?.Tag)&&t?.Filter?.Tag?.length>0&&t?.Filter?.Tag?.forEach(o=>this.addTags(o.Key,o.Value)),Array.isArray(t?.Filter?.And?.Tag)&&t?.Filter?.And?.Tag?.length>0&&t?.Filter?.And?.Tag?.forEach(o=>this.addTags(o.Key,o.Value))}get tags(){return this.tieringForm.get("tags")}addTags(t,o){this.tags.push(new r.gE({Key:new r.MJ(t||"",r.k0.required),Value:new r.MJ(o||"",r.k0.required)})),this.cd.detectChanges()}duplicateConfigName(t){return this.configuredLifecycle?.LifecycleConfiguration?.Rule?.length>0&&this.configuredLifecycle.LifecycleConfiguration.Rule.map(i=>i.ID).includes(t.value)?{duplicate:!0}:null}removeTags(t){this.tags.removeAt(t),this.cd.detectChanges()}loadStorageClass(){return new Promise((t,o)=>{this.rgwZonegroupService.getAllZonegroupsInfo().subscribe(i=>{this.storageClassList=[];const s=co.filterAndMapTierTargets(i);this.isStorageClassFetched=!0,this.storageClassList.push(...s),this.editing&&this.tieringForm.get("storageClass").setValue(this.selectedLifecycle?.Transition?.StorageClass),this.loadingReady(),t()},i=>{o(i)})})}submitTieringConfig(){const t=this.tieringForm.value;if(!this.tieringForm.valid)return;let o={ID:this.tieringForm.getRawValue().name,Status:t.status,Transition:{Days:t.days,StorageClass:t.storageClass}};if(Object.assign(o,t.hasPrefix?this.tags.length>0?{Filter:{And:{Prefix:t.prefix,Tag:this.tags.value}}}:{Filter:{Prefix:t.prefix}}:{Prefix:""}),this.editing){const i=this.configuredLifecycle.LifecycleConfiguration.Rule,s=i.findIndex(T=>T?.ID===this.selectedLifecycle?.ID);i.splice(s,1,o),this.rgwBucketService.setLifecycle(this.bucket.bucket,JSON.stringify(this.configuredLifecycle.LifecycleConfiguration),this.bucket.owner,this.bucket.tenant).subscribe({next:()=>{this.notificationService.show(f._.success,"Bucket lifecycle modified succesfully")},error:T=>{this.notificationService.show(f._.error,T),this.tieringForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}else this.configuredLifecycle.LifecycleConfiguration.Rule.push(o),this.rgwBucketService.setLifecycle(this.bucket.bucket,JSON.stringify(this.configuredLifecycle.LifecycleConfiguration),this.bucket.owner,this.bucket.tenant).subscribe({next:()=>{this.notificationService.show(f._.success,"Bucket lifecycle created succesfully")},error:i=>{this.notificationService.show(f._.error,i),this.tieringForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.closeModal()}})}goToCreateStorageClass(){this.router.navigate(["rgw/tiering/create"]),this.closeModal()}static \u0275fac=function(o){return new(o||n)(e.rXU("bucket"),e.rXU("selectedLifecycle",8),e.rXU("editing",8),e.rXU(m.Ss),e.rXU($.c),e.rXU(u.$),e.rXU(e.gRc),e.rXU(ht.Z),e.rXU(B.J),e.rXU(I.Ix))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-bucket-tiering"]],features:[e.Vt3],decls:6,vars:8,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de;return t="" + "\ufffd0\ufffd" + " Tiering configuration " + "\ufffd#3\ufffd" + "" + "\ufffd/#3\ufffd" + "",o="Rule Name " + "\ufffd#10\ufffd\ufffd/#10\ufffd" + "",i=" " + "\ufffd0\ufffd" + " ",s=" " + "\ufffd0\ufffd" + " ",T="Enabled ",F="Disabled ",k=" In order to access the snapshot scheduler feature, the snap_scheduler module must be enabled ",H=" No storage class found. Consider creating it first to proceed. ",q="Unique identifier for the rule. The value cannot be longer than 255 characters. ",oe="Pole jest wymagane.",le="Please enter a unique name.",Re="The storage class to which you want the object to transition. ",ce="Prefix " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",Te=" Prefix identifying one or more objects to which the rule applies ",se="Pole jest wymagane.",Ce="Add tags " + "\ufffd#9\ufffd" + "" + "\ufffd/#9\ufffd" + "",he="Enter name of the object key",ye="Enter value of the tag",$e="Name of the object key " + "\ufffd#6\ufffd\ufffd/#6\ufffd" + "",Ge="Value of the tag " + "\ufffd#12\ufffd\ufffd/#12\ufffd" + "",Ue="Pole jest wymagane.",xe="Pole jest wymagane.",ke="Select the number of days to transition the objects to the specified storage class. The value must be a positive integer. ",ve="Pole jest wymagane.",de="Enter a valid positive number",[["formDir","ngForm"],["ruleHelper",""],["ruleNameError",""],["storageClassHelper",""],["daysHelper",""],["daysError",""],["prefixHelper",""],["prefixError",""],["tagKeyError",""],["tagValueError",""],t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,$e,Ge,Ue,xe,ke,ve,de,["size","md",3,"overlaySelected","open"],[3,"closeSelect"],[3,"formAllFieldsRequired"],[4,"cdFormLoading"],[3,"submitActionEvent","form","submitText","modalForm","disabled"],["cdsModalContent",""],["type","info","spacingClass","mb-3","class","align-items-center","actionName","Enable",3,"action",4,"ngIf"],["type","info","spacingClass","mb-3","class","align-items-center","actionName","Create",3,"action",4,"ngIf"],["name","tieringForm","novalidate","",3,"formGroup"],[1,"form-item"],["labelInputID","rule_name",3,"invalid","invalidText","helperText"],["cdsText","","type","text","id","rule_name","maxlength","255","formControlName","name"],["id","storageClass","formControlName","storageClass","label","Storage Class",3,"helperText"],["value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"cds--label"],["formControlName","hasPrefix"],[3,"value"],["class","form-item",4,"ngIf"],[4,"ngIf"],["formControlName","status"],["formControlName","days","label","Number of days",3,"min","invalid","invalidText","helperText"],["type","info","spacingClass","mb-3","actionName","Enable",1,"align-items-center",3,"action"],["type","info","spacingClass","mb-3","actionName","Create",1,"align-items-center",3,"action"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["value",""],["labelInputID","prefix",3,"invalid","invalidText","helperText"],["cdsText","","type","text","id","prefix","formControlName","prefix"],[1,"form-group-header"],["formArrayName","tags",4,"ngFor","ngForOf"],["cdsButton","tertiary","type","button",3,"click"],["cdsIcon","add","size","32","icon","",1,"cds--btn__icon"],["formArrayName","tags"],[3,"formGroupName"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],["labelInputID","Key",3,"invalid","invalidText"],["cdsText","","type","text","placeholder",he,"formControlName","Key",3,"invalid"],["labelInputID","Value",3,"invalid","invalidText"],["cdsText","","type","text","placeholder",ye,"formControlName","Value",3,"invalid"],["cdsCol","",1,"item-action-btn",3,"columnNumbers"],["kind","tertiary","size","sm",3,"click"],["cdsIcon","trash-can","size","32",1,"cds--btn__icon"]]},template:function(o,i){1&o&&(e.j41(0,"cds-modal",33),e.bIt("overlaySelected",function(){return i.closeModal()}),e.j41(1,"cds-modal-header",34),e.bIt("closeSelect",function(){return i.closeModal()}),e.PLo(2,10),e.nrm(3,"cd-help-text",35),e.YFu(),e.k0s(),e.DNE(4,As,47,25,"ng-container",36),e.j41(5,"cd-form-button-panel",37),e.bIt("submitActionEvent",function(){return i.submitTieringConfig()}),e.k0s()()),2&o&&(e.Y8G("open",i.open),e.R7$(3),e.Y8G("formAllFieldsRequired",!0),e.uP7(i.editing?"Edit":"Create"),e.nnv(2),e.R7$(),e.Y8G("cdFormLoading",i.loading),e.R7$(),e.Y8G("form",i.tieringForm)("submitText",i.editing?i.actionLabels.EDIT:i.actionLabels.CREATE)("modalForm",!0)("disabled",0===(null==i.storageClassList?null:i.storageClassList.length)&&i.isStorageClassFetched))},dependencies:[R.Sq,R.bT,N.m,We.e,V.O,Xt.G,Oe.S,Xe.E,r.qT,r.xH,r.y7,r.me,r.BC,r.cb,r.tU,r.j4,r.JD,r.$R,r.v8,ae.aF,ae.rQ,ae.$m,et.ee,et.YP,mt.$n,mt.K0,jt.LJ,Ie.Zt,Ie.ks,Ze.l6,Ze.c$,De.jM,qt.sx,qt.z6,R.Jj]})}return n})();var Et=g(82254),fo=g(40837),Ot=g(32295),$t=g(45843),Gn=g(62988),po=g(7032),go=g(25745);const Ls=["code"],Ds=["codeContent"],ys=["codeContainer"],$s=["*"],vs=n=>({"cds--snippet--light":n}),Ws=(n,_,t,o,i,s,T)=>({"cds--snippet--light":n,"cds--snippet--inline":_,"cds--btn--icon-only":t,"cds--copy-btn":o,"cds--copy-btn--animating":i,"cds--copy-btn--fade-in":s,"cds--copy-btn--fade-out":T,"cds--snippet cds--copy":!0}),ws=n=>({"aria-label":n,"aria-live":"polite",tabindex:"0"});function Us(n,_){1&n&&e.eu8(0)}function xs(n,_){if(1&n&&(e.qex(0),e.DNE(1,Us,1,0,"ng-container",9),e.bVm()),2&n){e.XpG(2);const t=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function ks(n,_){1&n&&e.eu8(0)}function Xs(n,_){if(1&n&&(e.j41(0,"span",10)(1,"code",null,4),e.DNE(3,ks,1,0,"ng-container",9),e.k0s()()),2&n){const t=e.XpG(2),o=e.sdS(6);e.Y8G("ngClass",e.eq3(2,vs,"light"===t.theme)),e.R7$(3),e.Y8G("ngTemplateOutlet",o)}}function js(n,_){if(1&n&&(e.qex(0),e.DNE(1,xs,2,1,"ng-container",8)(2,Xs,4,4,"ng-template",null,3,e.C5r),e.bVm()),2&n){const t=e.sdS(3),o=e.XpG();e.R7$(),e.Y8G("ngIf",!o.hideCopyButton)("ngIfElse",t)}}function Bs(n,_){1&n&&e.nrm(0,"span")}function zs(n,_){1&n&&e.nrm(0,"span")(1,"span")(2,"span")}function Hs(n,_){if(1&n&&(e.qex(0),e.DNE(1,Bs,1,0,"span",8)(2,zs,3,0,"ng-template",null,6,e.C5r),e.bVm()),2&n){const t=e.sdS(3),o=e.XpG(2);e.R7$(),e.Y8G("ngIf","single"===o.display)("ngIfElse",t)}}function Ys(n,_){1&n&&e.eu8(0)}function Vs(n,_){if(1&n){const t=e.RV6();e.j41(0,"pre",17,7),e.bIt("scroll",function(){e.eBV(t);const i=e.XpG(2);return e.Njj("multi"===i.display?i.handleScroll():null)}),e.j41(2,"code",null,4),e.DNE(4,Ys,1,0,"ng-container",9),e.k0s()()}if(2&n){e.XpG(2);const t=e.sdS(6);e.R7$(4),e.Y8G("ngTemplateOutlet",t)}}function Zs(n,_){1&n&&e.nrm(0,"div",18)}function Ks(n,_){1&n&&e.nrm(0,"div",19)}function qs(n,_){1&n&&e.eu8(0)}function Js(n,_){if(1&n&&(e.qex(0),e.DNE(1,qs,1,0,"ng-container",9),e.bVm()),2&n){e.XpG(2);const t=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function Qs(n,_){if(1&n){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.toggleSnippetExpansion())}),e.j41(1,"span",21),e.EFF(2),e.k0s(),e.qSk(),e.nrm(3,"svg",22),e.k0s()}if(2&n){const t=e.XpG(2);e.R7$(2),e.JRh(t.expanded?t.translations.SHOW_LESS:t.translations.SHOW_MORE),e.R7$(),e.BMQ("aria-label",t.translations.SHOW_MORE_ICON)}}function er(n,_){if(1&n){const t=e.RV6();e.j41(0,"div",11,5),e.bIt("scroll",function(){e.eBV(t);const i=e.XpG();return e.Njj("single"===i.display?i.handleScroll():null)}),e.DNE(2,Hs,4,2,"ng-container",12)(3,Vs,5,1,"pre",13),e.k0s(),e.DNE(4,Zs,1,0,"div",14)(5,Ks,1,0,"div",15)(6,Js,2,1,"ng-container",12)(7,Qs,4,2,"button",16)}if(2&n){const t=e.XpG();e.Y8G("ngStyle",t.styles),e.BMQ("aria-label",t.translations.CODE_SNIPPET_TEXT)("tabindex","single"!==t.display||t.disabled?null:"0")("role","single"===t.display?"textarea":null),e.R7$(2),e.Y8G("ngIf",t.skeleton),e.R7$(),e.Y8G("ngIf",!t.skeleton),e.R7$(),e.Y8G("ngIf",t.hasLeft),e.R7$(),e.Y8G("ngIf",t.hasRight),e.R7$(),e.Y8G("ngIf",!t.hideCopyButton),e.R7$(),e.Y8G("ngIf",t.isExpandable)}}function tr(n,_){1&n&&e.eu8(0)}function nr(n,_){if(1&n&&(e.qex(0),e.j41(1,"code",null,4),e.DNE(3,tr,1,0,"ng-container",9),e.k0s(),e.bVm()),2&n){e.XpG(3);const t=e.sdS(6);e.R7$(3),e.Y8G("ngTemplateOutlet",t)}}function or(n,_){1&n&&(e.qex(0),e.qSk(),e.nrm(1,"svg",25),e.bVm())}function ir(n,_){if(1&n){const t=e.RV6();e.j41(0,"cds-icon-button",24),e.bIt("click",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.onCopyButtonClicked(i))}),e.DNE(1,nr,4,1,"ng-container",12)(2,or,2,0,"ng-container",12),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("description",t.showFeedback?t.feedbackText:t.copyButtonDescription)("align",t.align)("dropShadow",t.dropShadow)("caret",t.caret)("highContrast",t.highContrast)("isOpen",t.isOpen)("enterDelayMs",t.enterDelayMs)("leaveDelayMs",t.leaveDelayMs)("buttonNgClass",e.sGs(12,Ws,"light"===t.theme,"inline"===t.display,"inline"!==t.display,"inline"!==t.display,t.animating,t.showFeedback,!t.showFeedback&&t.animating))("buttonAttributes",e.eq3(20,ws,t.translations.COPY_CODE)),e.R7$(),e.Y8G("ngIf","inline"===t.display),e.R7$(),e.Y8G("ngIf","inline"!==t.display)}}function _r(n,_){if(1&n&&e.DNE(0,ir,3,22,"cds-icon-button",23),2&n){const t=e.XpG();e.Y8G("ngIf",!t.skeleton)}}function sr(n,_){1&n&&e.SdG(0)}var en=function(n){return n.single="single",n.multi="multi",n.inline="inline",n}(en||{});let rr=(()=>{class n extends mt.TV{constructor(t,o){super(),this.i18n=t,this.eventService=o,this.rowHeightInPixel=16,this.display=en.single,this.translations=this.i18n.get().CODE_SNIPPET,this.hideCopyButton=!1,this.disabled=!1,this.maxCollapsedNumberOfRows=15,this.minCollapsedNumberOfRows=3,this.maxExpandedNumberOfRows=0,this.minExpandedNumberOfRows=16,this.wrapText=!1,this.theme="dark",this.feedbackText=this.translations.COPIED,this.feedbackTimeout=2e3,this.expanded=!1,this.skeleton=!1,this.styles={},this.showFeedback=!1,this.animating=!1,this.hasExpandButton=null,this.isExpandable=!1,this.hasRightOverflow=!1,this.hasRight=!1,this.hasLeft=!1,this.dropShadow=!1}get snippetClass(){return this.display!==en.inline}get snippetSingleClass(){return this.display===en.single}get snippetMultiClass(){return this.display===en.multi}get snippetDisabledClass(){return"inline"!==this.display&&this.disabled}get snippetInlineLightClass(){return"light"===this.theme}handleScroll(){if(this.skeleton)return;let t;switch(this.display){case"multi":t=this.codeContent.nativeElement;break;case"single":t=this.codeContainer.nativeElement;break;default:return}if(t){const{scrollWidth:o,clientWidth:i,scrollLeft:s}=t,T=o>i;this.hasLeft=T&&!!s,this.hasRight=T&&s+i!==o}}toggleSnippetExpansion(){this.expanded=!this.expanded,this.calculateContainerHeight()}onCopyButtonClicked(){this.disabled||window.navigator.clipboard.writeText(this.code.nativeElement.innerText||this.code.nativeElement.textContent).then(()=>{this.showFeedback=!0,this.animating=!0,setTimeout(()=>{this.showFeedback=!1,this.animating=!1},this.feedbackTimeout)})}ngOnInit(){this.calculateContainerHeight()}ngAfterViewInit(){this.canExpand(),this.handleScroll(),window&&this.eventService.on(window,"resize",()=>{this.canExpand(),this.handleScroll()})}calculateContainerHeight(){"multi"===this.display&&!this.skeleton&&(this.styles={},this.expanded?(this.maxExpandedNumberOfRows>0&&(this.styles["max-height"]=this.maxExpandedNumberOfRows*this.rowHeightInPixel+"px"),this.minExpandedNumberOfRows>0&&(this.styles["min-height"]=this.minExpandedNumberOfRows*this.rowHeightInPixel+"px")):(this.maxCollapsedNumberOfRows>0&&(this.styles["max-height"]=this.maxCollapsedNumberOfRows*this.rowHeightInPixel+"px"),this.minCollapsedNumberOfRows>0&&(this.styles["min-height"]=this.minCollapsedNumberOfRows*this.rowHeightInPixel+"px")))}canExpand(){if("multi"===this.display&&!this.skeleton){const t=this.codeContent.nativeElement.getBoundingClientRect().height;this.isExpandable=this.maxCollapsedNumberOfRows>0&&(this.maxExpandedNumberOfRows<=0||this.maxExpandedNumberOfRows>this.maxCollapsedNumberOfRows)&&t>this.maxCollapsedNumberOfRows*this.rowHeightInPixel,this.expanded&&this.minExpandedNumberOfRows>0&&t<=this.minExpandedNumberOfRows*this.rowHeightInPixel&&(this.isExpandable=!1)}}}return n.\u0275fac=function(t){return new(t||n)(e.rXU(po.F2),e.rXU(go.US))},n.\u0275cmp=e.VBU({type:n,selectors:[["cds-code-snippet"],["ibm-code-snippet"]],viewQuery:function(t,o){if(1&t&&(e.GBs(Ls,5),e.GBs(Ds,5),e.GBs(ys,5)),2&t){let i;e.mGM(i=e.lsd())&&(o.code=i.first),e.mGM(i=e.lsd())&&(o.codeContent=i.first),e.mGM(i=e.lsd())&&(o.codeContainer=i.first)}},hostVars:16,hostBindings:function(t,o){2&t&&e.AVh("cds--snippet",o.snippetClass)("cds--snippet--single",o.snippetSingleClass)("cds--snippet--multi",o.snippetMultiClass)("cds--snippet--disabled",o.snippetDisabledClass)("cds--snippet--light",o.snippetInlineLightClass)("cds--snippet--wraptext",o.wrapText)("cds--snippet--expand",o.expanded)("cds--skeleton",o.skeleton)},inputs:{display:"display",translations:"translations",copyButtonDescription:"copyButtonDescription",hideCopyButton:"hideCopyButton",disabled:"disabled",maxCollapsedNumberOfRows:"maxCollapsedNumberOfRows",minCollapsedNumberOfRows:"minCollapsedNumberOfRows",maxExpandedNumberOfRows:"maxExpandedNumberOfRows",minExpandedNumberOfRows:"minExpandedNumberOfRows",wrapText:"wrapText",theme:"theme",feedbackText:"feedbackText",feedbackTimeout:"feedbackTimeout",expanded:"expanded",skeleton:"skeleton"},features:[e.Vt3],ngContentSelectors:$s,decls:7,vars:2,consts:[["notInline",""],["buttonTemplate",""],["codeTemplate",""],["noBtnInline",""],["code",""],["codeContainer",""],["multiSkeleton",""],["codeContent",""],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],[1,"cds--snippet","cds--snippet--inline","cds--snippet--no-copy",3,"ngClass"],[1,"cds--snippet-container",3,"scroll","ngStyle"],[4,"ngIf"],[3,"scroll",4,"ngIf"],["class","cds--snippet__overflow-indicator--left",4,"ngIf"],["class","cds--snippet__overflow-indicator--right",4,"ngIf"],["class","cds--btn cds--btn--ghost cds--btn--sm cds--snippet-btn--expand","type","button",3,"click",4,"ngIf"],[3,"scroll"],[1,"cds--snippet__overflow-indicator--left"],[1,"cds--snippet__overflow-indicator--right"],["type","button",1,"cds--btn","cds--btn--ghost","cds--btn--sm","cds--snippet-btn--expand",3,"click"],[1,"cds--snippet-btn--text"],["cdsIcon","chevron--down","size","16",1,"cds--icon-chevron--down"],["type","button","kind","primary","size","md",3,"description","align","dropShadow","caret","highContrast","isOpen","enterDelayMs","leaveDelayMs","buttonNgClass","buttonAttributes","click",4,"ngIf"],["type","button","kind","primary","size","md",3,"click","description","align","dropShadow","caret","highContrast","isOpen","enterDelayMs","leaveDelayMs","buttonNgClass","buttonAttributes"],["cdsIcon","copy","size","16",1,"cds--snippet__icon"]],template:function(t,o){if(1&t&&(e.NAR(),e.DNE(0,js,4,2,"ng-container",8)(1,er,8,10,"ng-template",null,0,e.C5r)(3,_r,1,1,"ng-template",null,1,e.C5r)(5,sr,1,0,"ng-template",null,2,e.C5r)),2&t){const i=e.sdS(2);e.Y8G("ngIf","inline"===o.display)("ngIfElse",i)}},dependencies:[R.YU,R.bT,R.T3,R.B3,mt.K0,jt.LJ],encapsulation:2}),n})(),ar=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[R.MD,mt.tm,po.LP,go.uh,jt.op]}),n})();var To=g(26310),Nt=g(15416),Ro=g(37480),Ht=g(874);let lr=(()=>{class n{rgwBucketService;authStorageService;actionLabels;modalService;notificationService;bucket;updateBucketDetails=new e.bkB;table;permission;tableActions;columns=[];selection=new gt.y;filteredLifecycleRules$;lifecycleRuleList=[];modalRef;constructor(t,o,i,s,T){this.rgwBucketService=t,this.authStorageService=o,this.actionLabels=i,this.modalService=s,this.notificationService=T}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:"Nazwa",prop:"ID",flexGrow:2},{name:"Days",prop:"Transition.Days",flexGrow:1},{name:"Storage class",prop:"Transition.StorageClass",flexGrow:1},{name:"Status",prop:"Status",flexGrow:1}],this.tableActions=[{permission:"create",icon:S.F.add,click:()=>this.openTieringModal(this.actionLabels.CREATE),name:this.actionLabels.CREATE},{permission:"update",icon:S.F.edit,disable:()=>this.selection.hasMultiSelection,click:()=>this.openTieringModal(this.actionLabels.EDIT),name:this.actionLabels.EDIT},{permission:"delete",icon:S.F.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:s=>s.hasMultiSelection}]}loadLifecyclePolicies(t){const o=this.rgwBucketService.getLifecycle(this.bucket.bucket,this.bucket.owner,this.bucket.tenant).pipe((0,Ro.M)(i=>{this.lifecycleRuleList=i}),(0,Ht.W)(()=>(t.error(),(0,Nt.of)(null))));this.filteredLifecycleRules$=o.pipe((0,a.T)(i=>i?.LifecycleConfiguration?.Rule?.filter(s=>s.hasOwnProperty("Transition"))||[]))}openTieringModal(t){this.modalService.show(uo,{bucket:this.bucket,selectedLifecycle:this.selection.first(),editing:t===this.actionLabels.EDIT})?.close?.subscribe(()=>this.updateBucketDetails.emit())}updateSelection(t){this.selection=t}deleteAction(){const t=this.selection.selected.map(s=>s.ID),o=this.lifecycleRuleList.LifecycleConfiguration.Rule.filter(s=>!t.includes(s.ID)),i=o.length>0?{Rule:o}:{};this.modalRef=this.modalService.show(Lt.D,{itemDescription:"Rule",itemNames:t,actionDescription:"remove",submitAction:()=>this.submitLifecycleConfig(i)})}submitLifecycleConfig(t){this.rgwBucketService.setLifecycle(this.bucket.bucket,JSON.stringify(t),this.bucket.owner,this.bucket.tenant).subscribe({next:()=>{this.notificationService.show(f._.success,"Lifecycle rule deleted successfully"),this.updateBucketDetails.emit()},error:()=>{this.modalRef.componentInstance.stopLoadingSpinner()},complete:()=>{this.modalService.dismissAll()}})}static \u0275fac=function(o){return new(o||n)(e.rXU($.c),e.rXU(Et.v),e.rXU(m.Ss),e.rXU(Mt.V),e.rXU(B.J))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-bucket-lifecycle-list"]],viewQuery:function(o,i){if(1&o&&e.GBs(Je.O,7),2&o){let s;e.mGM(s=e.lsd())&&(i.table=s.first)}},inputs:{bucket:"bucket"},outputs:{updateBucketDetails:"updateBucketDetails"},decls:7,vars:7,consts:()=>{let t;return t=" Tiering Configuration " + "\ufffd#2\ufffd" + " Configure a bucket tiering rule to automatically transition objects between storage classes after a specified number of days. Define the scope of the rule by applying it globally or to objects with specific prefixes and tags. " + "\ufffd/#2\ufffd" + "",[["table",""],t,["columnMode","flex","selectionType","multiClick","identifier","ID",3,"updateSelection","fetchData","data","columns"],[1,"table-actions",3,"permission","selection","tableActions"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"legend"),e.PLo(1,1),e.nrm(2,"cd-help-text"),e.YFu(),e.k0s(),e.j41(3,"cd-table",2,0),e.nI1(5,"async"),e.bIt("updateSelection",function(F){return e.eBV(s),e.Njj(i.updateSelection(F))})("fetchData",function(F){return e.eBV(s),e.Njj(i.loadLifecyclePolicies(F))}),e.nrm(6,"cd-table-actions",3),e.k0s()}2&o&&(e.R7$(3),e.Y8G("data",e.bMT(5,5,i.filteredLifecycleRules$))("columns",i.columns),e.R7$(3),e.Y8G("permission",i.permission)("selection",i.selection)("tableActions",i.tableActions))},dependencies:[V.O,Je.O,Ot.j,R.Jj]})}return n})();var An=g(91822);function cr(n,_){1&n&&(e.j41(0,"td"),e.EFF(1,"-"),e.k0s())}function ur(n,_){1&n&&(e.j41(0,"td"),e.pXf(1,6),e.k0s())}function dr(n,_){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",t.rateLimitConfig.max_read_ops," ")}}function fr(n,_){1&n&&(e.j41(0,"td"),e.EFF(1,"-"),e.k0s())}function pr(n,_){1&n&&(e.j41(0,"td"),e.pXf(1,7),e.k0s())}function gr(n,_){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",t.rateLimitConfig.max_write_ops," ")}}function Tr(n,_){1&n&&(e.j41(0,"td"),e.EFF(1,"-"),e.k0s())}function Rr(n,_){1&n&&(e.j41(0,"td"),e.pXf(1,8),e.k0s())}function mr(n,_){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.nI1(2,"dimlessBinaryPerMinute"),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,1,t.rateLimitConfig.max_read_bytes)," ")}}function Er(n,_){1&n&&(e.j41(0,"td"),e.EFF(1,"-"),e.k0s())}function Sr(n,_){1&n&&(e.j41(0,"td"),e.pXf(1,9),e.k0s())}function Fr(n,_){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.nI1(2,"dimlessBinaryPerMinute"),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,1,t.rateLimitConfig.max_write_bytes)," ")}}let mo=(()=>{class n{rateLimitConfig;type;static \u0275fac=function(o){return new(o||n)};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-rate-limit-details"]],inputs:{rateLimitConfig:"rateLimitConfig",type:"type"},decls:34,vars:16,consts:()=>{let t,o,i,s,T,F,k,H,q,oe;return t="" + "\ufffd0\ufffd" + "",o="Uaktywniony",i="Maximum Read Ops",s="Maximum Write Ops",T="Maximum Read Bytes",F="Maximum Write Bytes",k="Nielimitowany",H="Nielimitowany",q="Nielimitowany",oe="Nielimitowany",[t,o,i,s,T,F,k,H,q,oe,[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold","w-25"],[1,"w-75"],[1,"bold"],[4,"ngIf"]]},template:function(o,i){1&o&&(e.j41(0,"legend"),e.pXf(1,0),e.k0s(),e.j41(2,"table",10)(3,"tbody")(4,"tr")(5,"td",11),e.pXf(6,1),e.k0s(),e.j41(7,"td",12),e.EFF(8),e.nI1(9,"booleanText"),e.k0s()(),e.j41(10,"tr")(11,"td",13),e.pXf(12,2),e.k0s(),e.DNE(13,cr,2,0,"td",14)(14,ur,2,0,"td",14)(15,dr,2,1,"td",14),e.k0s(),e.j41(16,"tr")(17,"td",13),e.pXf(18,3),e.k0s(),e.DNE(19,fr,2,0,"td",14)(20,pr,2,0,"td",14)(21,gr,2,1,"td",14),e.k0s(),e.j41(22,"tr")(23,"td",13),e.pXf(24,4),e.k0s(),e.DNE(25,Tr,2,0,"td",14)(26,Rr,2,0,"td",14)(27,mr,3,3,"td",14),e.k0s(),e.j41(28,"tr")(29,"td",13),e.pXf(30,5),e.k0s(),e.DNE(31,Er,2,0,"td",14)(32,Sr,2,0,"td",14)(33,Fr,3,3,"td",14),e.k0s()()()),2&o&&(e.R7$(),e.uP7("user"===i.type?"User Rate Limit":"Bucket Rate Limit"),e.nnv(1),e.R7$(7),e.JRh(e.bMT(9,14,i.rateLimitConfig.enabled)),e.R7$(5),e.Y8G("ngIf",!i.rateLimitConfig.enabled),e.R7$(),e.Y8G("ngIf",i.rateLimitConfig.enabled&&i.rateLimitConfig.max_read_ops<=0),e.R7$(),e.Y8G("ngIf",i.rateLimitConfig.enabled&&i.rateLimitConfig.max_read_ops>0),e.R7$(4),e.Y8G("ngIf",!i.rateLimitConfig.enabled),e.R7$(),e.Y8G("ngIf",i.rateLimitConfig.enabled&&i.rateLimitConfig.max_write_ops<=0),e.R7$(),e.Y8G("ngIf",i.rateLimitConfig.enabled&&i.rateLimitConfig.max_write_ops>0),e.R7$(4),e.Y8G("ngIf",!i.rateLimitConfig.enabled),e.R7$(),e.Y8G("ngIf",i.rateLimitConfig.enabled&&i.rateLimitConfig.max_read_bytes<=0),e.R7$(),e.Y8G("ngIf",i.rateLimitConfig.enabled&&i.rateLimitConfig.max_read_bytes>0),e.R7$(4),e.Y8G("ngIf",!i.rateLimitConfig.enabled),e.R7$(),e.Y8G("ngIf",i.rateLimitConfig.enabled&&i.rateLimitConfig.max_write_bytes<=0),e.R7$(),e.Y8G("ngIf",i.rateLimitConfig.enabled&&i.rateLimitConfig.max_write_bytes>0))},dependencies:[R.bT,An.s,te.E]})}return n})();var Cr=g(71138);let Mr=(()=>{class n{constructor(){}format(t,o=null,i=2,s=0){if(!t)return null;let T="";"string"==typeof t&&(t=JSON.parse(t));for(let F in t)if(t.hasOwnProperty(F)){const k=t[F],H=" ".repeat(s);if(o){const[q,oe]=Object.entries(o)[0];F===q&&(F=oe)}Array.isArray(k)?k.forEach(q=>{T+=`${H}<${F}>\n`+this.format(q,o,i,s+i)+`${H}</${F}>\n`}):T+="object"==typeof k?`${H}<${F}>\n`+this.format(k,o,i,s+i)+`${H}</${F}>\n`:`${H}<${F}>${k}</${F}>\n`}return T}static \u0275fac=function(o){return new(o||n)};static \u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hr=(()=>{class n{jsonToXmlService;constructor(t){this.jsonToXmlService=t}transform(t,o={},i="json"){return"json"===i&&(t=this.jsonToXmlService.format(t,o)),t}static \u0275fac=function(o){return new(o||n)(e.rXU(Mr,16))};static \u0275pipe=e.EJ8({name:"xml",type:n,pure:!0})}return n})();const Eo=n=>({active:n}),Gr=()=>({Rules:"Rule"});function Pr(n,_){1&n&&(e.j41(0,"td"),e.pXf(1,17),e.k0s())}function Ir(n,_){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.nI1(2,"dimless"),e.k0s()),2&n){const t=e.XpG(4);e.R7$(),e.SpI(" ",e.bMT(2,1,t.selection.bucket_quota.max_size)," ")}}function Or(n,_){1&n&&(e.j41(0,"td"),e.pXf(1,18),e.k0s())}function Nr(n,_){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const t=e.XpG(4);e.R7$(),e.SpI(" ",t.selection.bucket_quota.max_objects," ")}}function br(n,_){if(1&n&&(e.qex(0),e.j41(1,"tr")(2,"td",43),e.pXf(3,15),e.k0s(),e.DNE(4,Pr,2,0,"td",32)(5,Ir,3,3,"td",32),e.k0s(),e.j41(6,"tr")(7,"td",43),e.pXf(8,16),e.k0s(),e.DNE(9,Or,2,0,"td",32)(10,Nr,2,1,"td",32),e.k0s(),e.bVm()),2&n){const t=e.XpG(3);e.R7$(4),e.Y8G("ngIf",t.selection.bucket_quota.max_size<=-1),e.R7$(),e.Y8G("ngIf",t.selection.bucket_quota.max_size>-1),e.R7$(4),e.Y8G("ngIf",t.selection.bucket_quota.max_objects<=-1),e.R7$(),e.Y8G("ngIf",t.selection.bucket_quota.max_objects>-1)}}function Ar(n,_){if(1&n&&(e.qex(0),e.j41(1,"tr")(2,"td",43),e.pXf(3,19),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s()(),e.j41(6,"tr")(7,"td",43),e.pXf(8,20),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s()(),e.bVm()),2&n){const t=e.XpG(3);e.R7$(5),e.JRh(t.selection.lock_mode),e.R7$(5),e.JRh(t.selection.lock_retention_period_days)}}function Lr(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",41),e.pXf(2,22),e.k0s(),e.j41(3,"td",42),e.EFF(4),e.k0s()()),2&n){const t=_.$implicit;e.R7$(2),e.uP7(t.key),e.nnv(2),e.R7$(2),e.JRh(t.value)}}function Dr(n,_){if(1&n&&(e.qex(0),e.j41(1,"legend"),e.pXf(2,21),e.k0s(),e.j41(3,"table",46)(4,"tbody"),e.DNE(5,Lr,5,2,"tr",47),e.nI1(6,"keyvalue"),e.k0s()(),e.bVm()),2&n){const t=e.XpG(3);e.R7$(5),e.Y8G("ngForOf",e.bMT(6,1,t.selection.tagset))}}function yr(n,_){if(1&n&&(e.qex(0),e.nrm(1,"cd-rgw-rate-limit-details",48),e.bVm()),2&n){const t=e.XpG(3);e.R7$(),e.Y8G("rateLimitConfig",t.bucketRateLimit)("type","bucket")}}function $r(n,_){if(1&n&&(e.j41(0,"table",40)(1,"tbody")(2,"tr")(3,"td",41),e.pXf(4,4),e.k0s(),e.j41(5,"td",42),e.EFF(6),e.k0s()(),e.j41(7,"tr")(8,"td",43),e.pXf(9,5),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s()(),e.j41(12,"tr")(13,"td",43),e.pXf(14,6),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s()(),e.j41(17,"tr")(18,"td",43),e.pXf(19,7),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s()(),e.j41(22,"tr")(23,"td",43),e.pXf(24,8),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s()(),e.j41(27,"tr")(28,"td",43),e.pXf(29,9),e.k0s(),e.j41(30,"td"),e.EFF(31),e.k0s()(),e.j41(32,"tr")(33,"td",43),e.pXf(34,10),e.k0s(),e.j41(35,"td"),e.EFF(36),e.nI1(37,"cdDate"),e.k0s()()()(),e.j41(38,"div")(39,"legend"),e.pXf(40,11),e.k0s(),e.j41(41,"table",44)(42,"tbody")(43,"tr")(44,"td",41),e.pXf(45,12),e.k0s(),e.j41(46,"td",42),e.EFF(47),e.nI1(48,"booleanText"),e.k0s()(),e.DNE(49,br,11,4,"ng-container",32),e.k0s()()(),e.j41(50,"legend"),e.pXf(51,13),e.k0s(),e.j41(52,"table",45)(53,"tbody")(54,"tr")(55,"td",41),e.pXf(56,14),e.k0s(),e.j41(57,"td",42),e.EFF(58),e.nI1(59,"booleanText"),e.k0s()(),e.DNE(60,Ar,11,2,"ng-container",32),e.k0s()(),e.DNE(61,Dr,7,3,"ng-container",32),e.nI1(62,"keyvalue"),e.DNE(63,yr,2,2,"ng-container",32)),2&n){let t;const o=e.XpG(2);e.R7$(6),e.JRh(o.selection.versioning),e.R7$(5),e.JRh(o.selection.encryption),e.R7$(5),e.JRh(o.replicationStatus),e.R7$(5),e.JRh(o.selection.mfa_delete),e.R7$(5),e.JRh(o.selection.index_type),e.R7$(5),e.JRh(o.selection.placement_rule),e.R7$(5),e.JRh(e.bMT(37,13,o.selection.mtime)),e.R7$(11),e.JRh(e.bMT(48,15,o.selection.bucket_quota.enabled)),e.R7$(2),e.Y8G("ngIf",o.selection.bucket_quota.enabled),e.R7$(9),e.JRh(e.bMT(59,17,o.selection.lock_enabled)),e.R7$(2),e.Y8G("ngIf",o.selection.lock_enabled),e.R7$(),e.Y8G("ngIf",null==(t=e.bMT(62,19,o.selection.tagset))?null:t.length),e.R7$(2),e.Y8G("ngIf",!!o.bucketRateLimit)}}function vr(n,_){if(1&n){const t=e.RV6();e.PLo(0,24,1),e.j41(1,"div",53)(2,"button",54),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.updateLifecycleFormatTo("json"))}),e.k0s(),e.j41(3,"button",54),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.updateLifecycleFormatTo("xml"))}),e.k0s()(),e.YFu()}if(2&n){const t=e.XpG(3);e.R7$(2),e.Y8G("ngClass",e.eq3(2,Eo,"json"===t.lifecycleFormat)),e.R7$(),e.Y8G("ngClass",e.eq3(4,Eo,"xml"===t.lifecycleFormat))}}function Wr(n,_){if(1&n&&(e.j41(0,"cds-code-snippet",55),e.EFF(1),e.nI1(2,"json"),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",e.bMT(2,1,t.selection.lifecycle)," ")}}function wr(n,_){if(1&n&&(e.j41(0,"cds-code-snippet",55),e.EFF(1),e.nI1(2,"xml"),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",e.i5U(2,1,t.selection.lifecycle,e.lJ4(4,Gr))||"-"," ")}}function Ur(n,_){if(1&n&&(e.j41(0,"div",59),e.EFF(1),e.k0s()),2&n){const t=e.XpG(4);e.R7$(),e.JRh(null==t.lifecycleProgress?null:t.lifecycleProgress.started)}}function xr(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",41),e.pXf(2,31),e.k0s(),e.j41(3,"td")(4,"cds-tooltip",56)(5,"cds-tag",57),e.EFF(6),e.k0s()(),e.DNE(7,Ur,2,1,"div",58),e.k0s()()),2&n){let t,o;const i=e.XpG(3);e.R7$(4),e.Y8G("description",null==(t=i.lifecycleProgressMap.get(i.lifecycleProgress.status))?null:t.description)("align","top"),e.R7$(),e.Y8G("type",null==(o=i.lifecycleProgressMap.get(i.lifecycleProgress.status))?null:o.color),e.R7$(),e.SpI(" ",i.lifecycleProgress.status," "),e.R7$(),e.Y8G("ngIf","UNINITIAL"!==(null==i.lifecycleProgress?null:i.lifecycleProgress.status))}}function kr(n,_){if(1&n&&(e.j41(0,"div",49)(1,"table",46)(2,"tbody")(3,"tr")(4,"td",41),e.pXf(5,23),e.k0s(),e.j41(6,"td")(7,"pre"),e.EFF(8),e.nI1(9,"json"),e.k0s()()(),e.j41(10,"tr")(11,"td",41),e.PLo(12,24),e.DNE(13,vr,4,6,"div",50),e.nI1(14,"json"),e.YFu(),e.k0s(),e.j41(15,"td"),e.DNE(16,Wr,3,3,"cds-code-snippet",51)(17,wr,3,5,"cds-code-snippet",51),e.k0s()(),e.DNE(18,xr,8,5,"tr",32),e.j41(19,"tr")(20,"td",41),e.pXf(21,25),e.k0s(),e.j41(22,"td")(23,"pre"),e.EFF(24),e.nI1(25,"json"),e.k0s()()(),e.j41(26,"tr")(27,"td",41),e.pXf(28,26),e.k0s(),e.j41(29,"td")(30,"table",52)(31,"thead")(32,"tr"),e.PLo(33,27),e.nrm(34,"th")(35,"th"),e.YFu(),e.k0s()(),e.j41(36,"tbody")(37,"tr"),e.PLo(38,28),e.nrm(39,"td")(40,"td"),e.YFu(),e.k0s(),e.j41(41,"tr"),e.PLo(42,29),e.nrm(43,"td")(44,"td"),e.YFu(),e.k0s(),e.j41(45,"tr"),e.PLo(46,30),e.nrm(47,"td")(48,"td"),e.YFu(),e.k0s()()()()()()()()),2&n){const t=e.XpG(2);e.R7$(8),e.JRh(e.bMT(9,9,t.selection.bucket_policy)),e.R7$(5),e.Y8G("ngIf","{}"!==e.bMT(14,11,t.selection.lifecycle)),e.R7$(3),e.Y8G("ngIf","json"===t.lifecycleFormat),e.R7$(),e.Y8G("ngIf","xml"===t.lifecycleFormat),e.R7$(),e.Y8G("ngIf",(null==t.selection.lifecycle_progress?null:t.selection.lifecycle_progress.length)>0),e.R7$(6),e.JRh(e.bMT(25,13,t.selection.replication)),e.R7$(16),e.uP7(t.aclPermissions.Owner||"-"),e.nnv(38),e.R7$(4),e.uP7(t.aclPermissions.AllUsers||"-"),e.nnv(42),e.R7$(4),e.uP7(t.aclPermissions.AuthenticatedUsers||"-"),e.nnv(46)}}function Xr(n,_){if(1&n){const t=e.RV6();e.j41(0,"cd-rgw-bucket-lifecycle-list",60),e.bIt("updateBucketDetails",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.updateBucketDetails(i.extractLifecycleDetails.bind(i)))}),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("bucket",t.selection)}}function jr(n,_){if(1&n&&(e.qex(0),e.j41(1,"nav",33,0),e.qex(3,34),e.j41(4,"a",35),e.pXf(5,1),e.k0s(),e.DNE(6,$r,64,21,"ng-template",36),e.bVm(),e.qex(7,37),e.j41(8,"a",35),e.pXf(9,2),e.k0s(),e.DNE(10,kr,49,15,"ng-template",36),e.bVm(),e.qex(11,38),e.j41(12,"a",35),e.pXf(13,3),e.k0s(),e.DNE(14,Xr,1,1,"ng-template",36),e.bVm(),e.k0s(),e.nrm(15,"div",39),e.bVm()),2&n){const t=e.sdS(2);e.R7$(15),e.Y8G("ngbNavOutlet",t)}}let Br=(()=>{class n{rgwBucketService;cd;selection;lifecycleProgress;lifecycleProgressMap=new Map([["UNINITIAL",{description:"The process has not run yet",color:"cool-gray"}],["PROCESSING",{description:"The process is currently running",color:"cyan"}],["COMPLETE",{description:"The process has completed",color:"green"}]]);lifecycleFormat="json";aclPermissions={};replicationStatus="Wy\u0142\u0105czony";bucketRateLimit;constructor(t,o){this.rgwBucketService=t,this.cd=o}ngOnChanges(){this.updateBucketDetails(this.extraxtDetailsfromResponse.bind(this))}parseXmlAcl(t,o){const i=new D.Parser({explicitArray:!1,trim:!0});let s={Owner:["-"],AllUsers:["-"],AuthenticatedUsers:["-"]};return i.parseString(t,(T,F)=>{if(T)return null;const k=F.AccessControlPolicy.AccessControlList.Grant;if(Array.isArray(k))for(let H=0;H<k.length;H++){const q=k[H];if(q?.Grantee?.URI){const oe=q.Grantee.URI.split("/").pop();s[oe].includes("-")?s[oe]=[q?.Permission]:s[oe].push(q?.Permission)}q?.Grantee?.ID&&o===q?.Grantee?.ID&&(s.Owner=q?.Permission)}else k?.Grantee?.ID&&o===k?.Grantee?.ID&&(s.Owner=k?.Permission)}),s}updateBucketDetails(t){this.selection&&this.rgwBucketService.get(this.selection.bid).subscribe(o=>{o.lock_retention_period_days=this.rgwBucketService.getLockDays(o),this.selection=o,t()})}extraxtDetailsfromResponse(){this.aclPermissions=this.parseXmlAcl(this.selection.acl,this.selection.owner),this.selection.replication?.Rule?.Status&&(this.replicationStatus=this.selection.replication?.Rule?.Status),this.rgwBucketService.getBucketRateLimit(this.selection.bid).subscribe(t=>{t&&void 0!==t.bucket_ratelimit&&(this.bucketRateLimit=t.bucket_ratelimit)}),this.extractLifecycleDetails()}extractLifecycleDetails(){"json"===this.lifecycleFormat&&!this.selection.lifecycle&&(this.selection.lifecycle={}),this.selection.lifecycle_progress?.length>0&&this.selection.lifecycle_progress.forEach(t=>{t.bucket.includes(this.selection.bucket)&&(this.lifecycleProgress=t)})}updateLifecycleFormatTo(t){this.lifecycleFormat=t,this.cd.detectChanges()}static \u0275fac=function(o){return new(o||n)(e.rXU($.c),e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-bucket-details"]],inputs:{selection:"selection"},features:[e.OA$],decls:1,vars:1,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de,pe,He,Ye,ze,Ve,Ne;return t="Szczeg\xF3\u0142y",o="Policies",i="Tiering",s="Versioning",T="Encryption",F="Replication",k="MFA Delete",H="Typ indeksu",q="Zasada umieszczania",oe="Last modification time",le="kontyngent wiadra",Re="Uaktywniony",ce="Locking",Te="Uaktywniony",se="Maksymalny rozmiar",Ce="Maksimum obiekt\xF3w",he="Nielimitowany",ye="Nielimitowany",$e="Tryb",Ge="Days",Ue="Tagi",xe="" + "\ufffd0\ufffd" + "",ke="Bucket policy",ve="Lifecycle " + "\ufffd*13:1\ufffd\ufffd#1:1\ufffd" + "" + "\ufffd#2:1\ufffd" + " JSON " + "[\ufffd/#2:1\ufffd|\ufffd/#3:1\ufffd]" + "" + "\ufffd#3:1\ufffd" + " XML " + "[\ufffd/#2:1\ufffd|\ufffd/#3:1\ufffd]" + "" + "\ufffd/#1:1\ufffd\ufffd/*13:1\ufffd" + "",ve=e.k04(ve),de="Replication policy",pe="ACL",He="" + "[\ufffd#34\ufffd|\ufffd#35\ufffd]" + "Grantee" + "[\ufffd/#34\ufffd|\ufffd/#35\ufffd]" + "" + "[\ufffd#34\ufffd|\ufffd#35\ufffd]" + "Permissions" + "[\ufffd/#34\ufffd|\ufffd/#35\ufffd]" + "",He=e.k04(He),Ye="" + "[\ufffd#39\ufffd|\ufffd#40\ufffd]" + "Bucket Owner" + "[\ufffd/#39\ufffd|\ufffd/#40\ufffd]" + "" + "[\ufffd#39\ufffd|\ufffd#40\ufffd]" + "" + "\ufffd0\ufffd" + "" + "[\ufffd/#39\ufffd|\ufffd/#40\ufffd]" + "",Ye=e.k04(Ye),ze="" + "[\ufffd#43\ufffd|\ufffd#44\ufffd]" + "Everyone" + "[\ufffd/#43\ufffd|\ufffd/#44\ufffd]" + "" + "[\ufffd#43\ufffd|\ufffd#44\ufffd]" + "" + "\ufffd0\ufffd" + "" + "[\ufffd/#43\ufffd|\ufffd/#44\ufffd]" + "",ze=e.k04(ze),Ve="" + "[\ufffd#47\ufffd|\ufffd#48\ufffd]" + "Authenticated users group" + "[\ufffd/#47\ufffd|\ufffd/#48\ufffd]" + "" + "[\ufffd#47\ufffd|\ufffd#48\ufffd]" + "" + "\ufffd0\ufffd" + "" + "[\ufffd/#47\ufffd|\ufffd/#48\ufffd]" + "",Ve=e.k04(Ve),Ne=" Lifecycle progress ",[["nav","ngbNav"],t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de,pe,He,Ye,ze,Ve,Ne,[4,"ngIf"],["ngbNav","","cdStatefulTab","rgw-bucket-details",1,"nav-tabs"],["ngbNavItem","details"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","permissions"],["ngbNavItem","tiering"],[3,"ngbNavOutlet"],["data-testid","rgw-bucket-details",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold","w-25"],[1,"w-75"],[1,"bold"],["data-testid","rgw-bucket-quota-details",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],["data-testid","rgw-bucket-locking-details",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[4,"ngFor","ngForOf"],[3,"rateLimitConfig","type"],[1,"table-scroller"],["class","input-group",4,"ngIf"],["display","multi",4,"ngIf"],[1,"table"],[1,"input-group"],["type","button",1,"btn","btn-light",3,"click","ngClass"],["display","multi"],[3,"description","align"],["size","md",3,"type"],["class","spacing-left",4,"ngIf"],[1,"spacing-left"],[3,"updateBucketDetails","bucket"]]},template:function(o,i){1&o&&e.DNE(0,jr,16,1,"ng-container",32),2&o&&e.Y8G("ngIf",i.selection)},dependencies:[R.YU,R.Sq,R.bT,Gn.B,Oe.S,b.Um,b.X9,b.sy,b.Ri,b.WA,b.m_,rr,To.vw,hn.m_,lr,mo,R.TG,R.lG,An.s,Yn.u,Cr.Q,hr],styles:["table[_ngcontent-%COMP%]{table-layout:fixed}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{word-wrap:break-word}.table-scroller[_ngcontent-%COMP%]{height:100%;max-height:50vh;overflow:auto}.spacing-left[_ngcontent-%COMP%]{margin-left:.5rem}"]})}return n})();const zr=["bucketSizeTpl"],Hr=["bucketObjectTpl"],Yr=["deleteTpl"];function Vr(n,_){if(1&n&&e.nrm(0,"cd-rgw-bucket-details",12),2&n){const t=e.XpG();e.Y8G("selection",t.expandedRow)}}function Zr(n,_){if(1&n&&e.nrm(0,"cd-usage-bar",14),2&n){const t=e.XpG().data.row;e.Y8G("total",t.bucket_quota.max_size)("used",t.bucket_size)}}function Kr(n,_){1&n&&e.pXf(0,6)}function qr(n,_){if(1&n&&e.DNE(0,Zr,1,2,"cd-usage-bar",13)(1,Kr,1,0,"ng-template",null,4,e.C5r),2&n){const t=_.data.row,o=e.sdS(2);e.Y8G("ngIf",t.bucket_quota.max_size>0&&t.bucket_quota.enabled)("ngIfElse",o)}}function Jr(n,_){if(1&n&&e.nrm(0,"cd-usage-bar",16),2&n){const t=e.XpG().data.row;e.Y8G("total",t.bucket_quota.max_objects)("used",t.num_objects)("isBinary",!1)}}function Qr(n,_){1&n&&e.pXf(0,7)}function ea(n,_){if(1&n&&e.DNE(0,Jr,1,3,"cd-usage-bar",15)(1,Qr,1,0,"ng-template",null,5,e.C5r),2&n){const t=_.data.row,o=e.sdS(2);e.Y8G("ngIf",t.bucket_quota.max_objects>0&&t.bucket_quota.enabled)("ngIfElse",o)}}function ta(n,_){1&n&&(e.j41(0,"cd-alert-panel",17),e.pXf(1,8),e.k0s())}let oa=(()=>{class n extends Dt.D{authStorageService;dimlessBinaryPipe;dimlessPipe;rgwBucketService;modalService;urlBuilder;actionLabels;ngZone;taskWrapper;table;bucketSizeTpl;bucketObjectTpl;deleteTpl;permission;tableActions;columns=[];buckets=[];selection=new gt.y;staleTimeout;subs=new bn.y;constructor(t,o,i,s,T,F,k,H,q){super(H),this.authStorageService=t,this.dimlessBinaryPipe=o,this.dimlessPipe=i,this.rgwBucketService=s,this.modalService=T,this.urlBuilder=F,this.actionLabels=k,this.ngZone=H,this.taskWrapper=q}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:"Nazwa",prop:"bid",flexGrow:2},{name:"W\u0142a\u015Bciciel",prop:"owner",flexGrow:2.5},{name:"Used Capacity",prop:"bucket_size",flexGrow:.6,pipe:this.dimlessBinaryPipe},{name:"Capacity Limit %",prop:"size_usage",cellTemplate:this.bucketSizeTpl,flexGrow:.8},{name:"Obiekty",prop:"num_objects",flexGrow:.6,pipe:this.dimlessPipe},{name:"Object Limit %",prop:"object_usage",cellTemplate:this.bucketObjectTpl,flexGrow:.8},{name:"Number of Shards",prop:"num_shards",flexGrow:.8}];const t=()=>this.selection.first()&&`${encodeURIComponent(this.selection.first().bid)}`,s={permission:"delete",icon:S.F.destroy,title:"Bucket is not empty. Remove all objects before deletion.",click:()=>this.deleteAction(),disable:()=>this.selection.first()?.num_objects>0,name:this.actionLabels.DELETE};this.tableActions=[{permission:"create",icon:S.F.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE,canBePrimary:F=>!F.hasSelection},{permission:"update",icon:S.F.edit,routerLink:()=>this.urlBuilder.getEdit(t()),name:this.actionLabels.EDIT},{permission:"update",icon:S.F.edit,click:()=>this.openTieringModal(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.TIERING},s],this.setTableRefreshTimeout()}getBucketList(t){this.setTableRefreshTimeout(),this.subs.add(this.rgwBucketService.fetchAndTransformBuckets().pipe((0,M.n)(()=>this.rgwBucketService.buckets$)).subscribe({next:o=>{this.buckets=o},error:()=>t.error()}))}updateSelection(t){this.selection=t}openTieringModal(){this.modalService.show(uo,{bucket:this.selection.first()})}deleteAction(){const t=this.selection.selected.map(o=>o.bid);this.modalService.show(Lt.D,{itemDescription:"wiadro",impact:Vn.r.high,itemNames:t,bodyTemplate:this.deleteTpl,submitActionObservable:()=>new Bt.c(o=>{this.taskWrapper.wrapTaskAroundCall({task:new zt.O("rgw/bucket/delete",{bucket_names:t}),call:(0,v.p)(this.selection.selected.map(i=>this.rgwBucketService.delete(i.bid)))}).subscribe({error:i=>{o.error(i),this.table.refreshBtn()},complete:()=>{o.complete(),this.table.refreshBtn()}})})})}ngOnDestroy(){this.subs.unsubscribe()}static \u0275fac=function(o){return new(o||n)(e.rXU(Et.v),e.rXU(Jt.l),e.rXU(Yn.u),e.rXU($.c),e.rXU(Mt.V),e.rXU(Tt.E),e.rXU(m.Ss),e.rXU(e.SKi),e.rXU(Qt.a))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-bucket-list"]],viewQuery:function(o,i){if(1&o&&(e.GBs(Je.O,7),e.GBs(zr,7),e.GBs(Hr,7),e.GBs(Yr,7)),2&o){let s;e.mGM(s=e.lsd())&&(i.table=s.first),e.mGM(s=e.lsd())&&(i.bucketSizeTpl=s.first),e.mGM(s=e.lsd())&&(i.bucketObjectTpl=s.first),e.mGM(s=e.lsd())&&(i.deleteTpl=s.first)}},features:[e.Jv_([{provide:Tt.E,useValue:new Tt.E("rgw/bucket")}]),e.Vt3],decls:10,vars:8,consts:()=>{let t,o,i;return t="No Limit",o="No Limit",i=" Buckets might still have underlying data depending on your bucket configuration ",[["table",""],["bucketSizeTpl",""],["bucketObjectTpl",""],["deleteTpl",""],["noSizeQuota",""],["noObjectQuota",""],t,o,i,["columnMode","flex","selectionType","single","identifier","bid",3,"setExpandedRow","updateSelection","fetchData","autoReload","data","columns","hasDetails","status"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"],[3,"total","used",4,"ngIf","ngIfElse"],[3,"total","used"],[3,"total","used","isBinary",4,"ngIf","ngIfElse"],[3,"total","used","isBinary"],["type","danger"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"cd-table",9,0),e.bIt("setExpandedRow",function(F){return e.eBV(s),e.Njj(i.setExpandedRow(F))})("updateSelection",function(F){return e.eBV(s),e.Njj(i.updateSelection(F))})("fetchData",function(F){return e.eBV(s),e.Njj(i.getBucketList(F))}),e.nrm(2,"cd-table-actions",10),e.DNE(3,Vr,1,1,"cd-rgw-bucket-details",11),e.k0s(),e.DNE(4,qr,3,2,"ng-template",null,1,e.C5r)(6,ea,3,2,"ng-template",null,2,e.C5r)(8,ta,2,0,"ng-template",null,3,e.C5r)}2&o&&(e.Y8G("autoReload",!1)("data",i.buckets)("columns",i.columns)("hasDetails",!0)("status",i.tableStatus),e.R7$(2),e.Y8G("permission",i.permission)("selection",i.selection)("tableActions",i.tableActions))},dependencies:[R.bT,fo.o,N.m,Je.O,Ot.j,$t.N,Br]})}return n})();var ia=g(16748),So=g(1505),Pn=g(37823),_a=g(85770);function sa(n,_){if(1&n){const t=e.RV6();e.j41(0,"cd-table-key-value",12),e.bIt("fetchData",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.getMetaData())}),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("data",t.metadata)}}function ra(n,_){if(1&n&&e.nrm(0,"cd-table-performance-counter",13),2&n){const t=e.XpG(2);e.Y8G("serviceId",t.serviceMapId)}}function aa(n,_){if(1&n&&e.nrm(0,"cd-grafana",15),2&n){const t=e.XpG(3);e.Y8G("grafanaPath","rgw-instance-detail?var-rgw_servers=rgw."+t.serviceId)("type","metrics")}}function la(n,_){1&n&&(e.qex(0,14),e.j41(1,"a",7),e.pXf(2,3),e.k0s(),e.DNE(3,aa,1,2,"ng-template",8),e.bVm())}function ca(n,_){if(1&n&&(e.qex(0),e.j41(1,"nav",5,0),e.qex(3,6),e.j41(4,"a",7),e.pXf(5,1),e.k0s(),e.DNE(6,sa,1,1,"ng-template",8),e.bVm(),e.qex(7,9),e.j41(8,"a",7),e.pXf(9,2),e.k0s(),e.DNE(10,ra,1,1,"ng-template",8),e.bVm(),e.DNE(11,la,4,0,"ng-container",10),e.k0s(),e.nrm(12,"div",11),e.bVm()),2&n){const t=e.sdS(2),o=e.XpG();e.R7$(11),e.Y8G("ngIf",o.grafanaPermission.read),e.R7$(),e.Y8G("ngbNavOutlet",t)}}let ua=(()=>{class n{rgwDaemonService;authStorageService;metadata;serviceId="";serviceMapId="";grafanaPermission;selection;constructor(t,o){this.rgwDaemonService=t,this.authStorageService=o,this.grafanaPermission=this.authStorageService.getPermissions().grafana}ngOnChanges(){this.selection&&(this.serviceId=this.selection.id,this.serviceMapId=this.selection.service_map_id)}getMetaData(){h().isEmpty(this.serviceId)||this.rgwDaemonService.get(this.serviceId).subscribe(t=>{this.metadata=t.rgw_metadata})}static \u0275fac=function(o){return new(o||n)(e.rXU(Q.y),e.rXU(Et.v))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-daemon-details"]],inputs:{selection:"selection"},features:[e.OA$],decls:1,vars:1,consts:()=>{let t,o,i,s;return t="Szczeg\xF3\u0142y",o="Liczniki wydajno\u015Bci",i="Szczeg\xF3\u0142y wydajno\u015Bci",s="RGW instance details",[["nav","ngbNav"],t,o,i,[4,"ngIf"],["ngbNav","","cdStatefulTab","rgw-daemon-details",1,"nav-tabs"],["ngbNavItem","details"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","performance-counters"],["ngbNavItem","performance-details",4,"ngIf"],[3,"ngbNavOutlet"],[3,"fetchData","data"],["serviceType","rgw",3,"serviceId"],["ngbNavItem","performance-details"],["title",s,"uid","x5ARzZtmk","grafanaStyle","one",3,"grafanaPath","type"]]},template:function(o,i){1&o&&e.DNE(0,ca,13,2,"ng-container",4),2&o&&e.Y8G("ngIf",i.selection)},dependencies:[R.bT,So.c,Pn.i,Gn.B,_a.Y,b.Um,b.X9,b.sy,b.Ri,b.WA,b.m_]})}return n})();function da(n,_){if(1&n&&e.nrm(0,"cd-rgw-daemon-details",12),2&n){const t=e.XpG(2);e.Y8G("selection",t.expandedRow)}}function fa(n,_){if(1&n){const t=e.RV6();e.j41(0,"cd-table",10),e.bIt("setExpandedRow",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.setExpandedRow(i))})("fetchData",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.getDaemonList(i))}),e.DNE(1,da,1,1,"cd-rgw-daemon-details",11),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("data",t.daemons)("columns",t.columns)("hasDetails",!0)}}function pa(n,_){1&n&&e.nrm(0,"cd-grafana",13),2&n&&e.Y8G("grafanaPath","rgw-overview?")("type","metrics")}function ga(n,_){1&n&&(e.qex(0,5),e.j41(1,"a",6),e.pXf(2,2),e.k0s(),e.DNE(3,pa,1,2,"ng-template",7),e.bVm())}function Ta(n,_){1&n&&e.nrm(0,"cd-grafana",14),2&n&&e.Y8G("grafanaPath","radosgw-sync-overview?")("type","metrics")}function Ra(n,_){1&n&&(e.qex(0,5),e.j41(1,"a",6),e.pXf(2,3),e.k0s(),e.DNE(3,Ta,1,2,"ng-template",7),e.bVm())}let ma=(()=>{class n extends Dt.D{rgwDaemonService;authStorageService;cephShortVersionPipe;rgwSiteService;columns=[];daemons=[];grafanaPermission;isMultiSite;constructor(t,o,i,s){super(),this.rgwDaemonService=t,this.authStorageService=o,this.cephShortVersionPipe=i,this.rgwSiteService=s}ngOnInit(){this.grafanaPermission=this.authStorageService.getPermissions().grafana,this.columns=[{name:"ID",prop:"id",flexGrow:2},{name:"Nazwa hosta",prop:"server_hostname",flexGrow:2},{name:"Port",prop:"port",flexGrow:1},{name:"Realm",prop:"realm_name",flexGrow:2},{name:"Zone Group",prop:"zonegroup_name",flexGrow:2},{name:"Zone",prop:"zone_name",flexGrow:2},{name:"Wersja",prop:"version",flexGrow:1,pipe:this.cephShortVersionPipe}],this.rgwSiteService.get("realms").subscribe(t=>this.isMultiSite=t.length>0)}getDaemonList(t){this.rgwDaemonService.list().subscribe(this.updateDaemons,()=>{t.error()})}updateDaemons=t=>{this.daemons=t};static \u0275fac=function(o){return new(o||n)(e.rXU(Q.y),e.rXU(Et.v),e.rXU(ia.Z),e.rXU(z.B))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-daemon-list"]],features:[e.Vt3],decls:9,vars:3,consts:()=>{let t,o,i,s,T;return t="Gateways List",o="Ca\u0142kowita wydajno\u015B\u0107",i="RGW overview",s="Sync Performance",T="Radosgw sync overview",[["nav","ngbNav"],t,o,s,["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","",4,"ngIf"],[3,"ngbNavOutlet"],["columnMode","flex",3,"setExpandedRow","fetchData","data","columns","hasDetails"],[3,"selection",4,"cdTableDetail"],[3,"selection"],["title",i,"uid","WAkugZpiz","grafanaStyle","two",3,"grafanaPath","type"],["title",T,"uid","rgw-sync-overview","grafanaStyle","two",3,"grafanaPath","type"]]},template:function(o,i){if(1&o&&(e.j41(0,"nav",4,0),e.qex(2,5),e.j41(3,"a",6),e.pXf(4,1),e.k0s(),e.DNE(5,fa,2,3,"ng-template",7),e.bVm(),e.DNE(6,ga,4,0,"ng-container",8)(7,Ra,4,0,"ng-container",8),e.k0s(),e.nrm(8,"div",9)),2&o){const s=e.sdS(1);e.R7$(6),e.Y8G("ngIf",i.grafanaPermission.read),e.R7$(),e.Y8G("ngIf",i.grafanaPermission.read&&i.isMultiSite),e.R7$(),e.Y8G("ngbNavOutlet",s)}},dependencies:[R.bT,So.c,Je.O,$t.N,b.Um,b.X9,b.sy,b.Ri,b.WA,b.m_,ua]})}return n})();var Fo=g(91151),Co=function(n){return n.USERS="users",n.BUCKETS="buckets",n.METADATA="metadata",n.USAGE="usage",n.ZONE="zone",n}(Co||{});let Mo=(()=>{class n{static capabilities=Co;static getAll(){return Object.values(n.capabilities)}}return n})();const Ea=()=>["read","write","*"];function Sa(n,_){if(1&n&&(e.j41(0,"cds-text-label",20),e.PLo(1,4),e.nrm(2,"input",21),e.YFu(),e.k0s()),2&n){const t=e.XpG(),o=e.sdS(14);e.Y8G("invalid",t.formGroup.controls.type.invalid&&t.formGroup.controls.type.dirty)("invalidText",o),e.R7$(2),e.Y8G("readonly",!0)}}function Fa(n,_){if(1&n&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function Ca(n,_){if(1&n&&(e.j41(0,"cds-select",22)(1,"option",17),e.EFF(2,"--- Select a type ---"),e.k0s(),e.DNE(3,Fa,2,2,"option",18),e.k0s()),2&n){const t=e.XpG(),o=e.sdS(14);e.Y8G("invalid",t.formGroup.controls.type.invalid&&t.formGroup.controls.type.dirty)("invalidText",o),e.R7$(3),e.Y8G("ngForOf",t.types)}}function Ma(n,_){1&n&&(e.j41(0,"span",25),e.pXf(1,5),e.k0s())}function ha(n,_){if(1&n&&e.DNE(0,Ma,2,0,"span",24),2&n){const t=e.XpG(),o=e.sdS(8);e.Y8G("ngIf",t.formGroup.showError("type",o,"required"))}}function Ga(n,_){if(1&n&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function Pa(n,_){1&n&&(e.j41(0,"span",25),e.pXf(1,6),e.k0s())}function Ia(n,_){if(1&n&&e.DNE(0,Pa,2,0,"span",24),2&n){const t=e.XpG(),o=e.sdS(8);e.Y8G("ngIf",t.formGroup.showError("perm",o,"required"))}}let Oa=(()=>{class n extends ae.dW{formBuilder;actionLabels;submitAction=new e.bkB;formGroup;editing=!0;types=[];resource;action;constructor(t,o){super(),this.formBuilder=t,this.actionLabels=o,this.resource="capability",this.createForm()}createForm(){this.formGroup=this.formBuilder.group({type:[null,[r.k0.required]],perm:[null,[r.k0.required]]})}setEditing(t=!0){this.editing=t,this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.ADD}setValues(t,o){this.formGroup.setValue({type:t,perm:o})}setCapabilities(t){const o=[];t.forEach(i=>{o.push(i.type)}),this.types=[],Mo.getAll().forEach(i=>{-1===h().indexOf(o,i)&&this.types.push(i)})}onSubmit(){this.submitAction.emit(this.formGroup.value),this.closeModal()}static \u0275fac=function(o){return new(o||n)(e.rXU(u.$),e.rXU(m.Ss))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-user-capability-modal"]],outputs:{submitAction:"submitAction"},features:[e.Vt3],decls:25,vars:23,consts:()=>{let t,o,i,s,T,F;return t="Typ",o="Pozwolenie ",i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",s="Type " + "\ufffd#2\ufffd\ufffd/#2\ufffd" + "",T="Pole jest wymagane.",F="Pole jest wymagane.",[["frm","ngForm"],["typeError",""],["permError",""],i,s,T,F,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[3,"formAllFieldsRequired"],["novalidate","",3,"formGroup"],["cdsModalContent",""],[1,"form-item"],["for","type",3,"invalid","invalidText",4,"ngIf"],["label",t,"for","type","formControlName","type",3,"invalid","invalidText",4,"ngIf"],["label",o,"for","perm","formControlName","perm",3,"invalid","invalidText"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"submitActionEvent","form","submitText","modalForm"],["for","type",3,"invalid","invalidText"],["cdsText","","id","type","name","type","formControlName","type","modal-primary-focus","",3,"readonly"],["label",t,"for","type","formControlName","type",3,"invalid","invalidText"],[3,"value"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"cds-modal",7),e.bIt("overlaySelected",function(){return e.eBV(s),e.Njj(i.closeModal())}),e.j41(1,"cds-modal-header",8),e.bIt("closeSelect",function(){return e.eBV(s),e.Njj(i.closeModal())}),e.j41(2,"h3",9),e.pXf(3,3),e.nI1(4,"titlecase"),e.nI1(5,"upperFirst"),e.k0s(),e.nrm(6,"cd-help-text",10),e.k0s(),e.j41(7,"form",11,0)(9,"div",12)(10,"div",13),e.DNE(11,Sa,3,3,"cds-text-label",14)(12,Ca,4,3,"cds-select",15)(13,ha,1,1,"ng-template",null,1,e.C5r),e.k0s(),e.j41(15,"div",13)(16,"cds-select",16)(17,"option",17),e.EFF(18,"--- Select a permission ---"),e.k0s(),e.DNE(19,Ga,2,2,"option",18),e.k0s(),e.DNE(20,Ia,1,1,"ng-template",null,2,e.C5r),e.k0s()(),e.j41(22,"cd-form-button-panel",19),e.nI1(23,"titlecase"),e.nI1(24,"upperFirst"),e.bIt("submitActionEvent",function(){return e.eBV(s),e.Njj(i.onSubmit())}),e.k0s()()()}if(2&o){const s=e.sdS(21);e.Y8G("open",i.open)("hasScrollingContent",!1),e.R7$(5),e.uP7(e.bMT(4,14,i.action))(e.bMT(5,16,i.resource)),e.nnv(3),e.R7$(),e.Y8G("formAllFieldsRequired",!0),e.R7$(),e.Y8G("formGroup",i.formGroup),e.R7$(4),e.Y8G("ngIf",i.editing),e.R7$(),e.Y8G("ngIf",!i.editing),e.R7$(4),e.Y8G("invalid",i.formGroup.controls.perm.invalid&&i.formGroup.controls.perm.dirty)("invalidText",s),e.R7$(3),e.Y8G("ngForOf",e.lJ4(22,Ea)),e.R7$(3),e.Y8G("form",i.formGroup)("submitText",e.bMT(23,18,i.action)+" "+e.bMT(24,20,i.resource))("modalForm",!0)}},dependencies:[R.Sq,R.bT,We.e,V.O,Oe.S,Xe.E,r.qT,r.xH,r.y7,r.me,r.BC,r.cb,r.j4,r.JD,ae.aF,ae.rQ,ae.$m,ae.hN,Ie.Zt,Ie.ks,Ze.l6,Ze.c$,R.PV,pt.r]})}return n})();var vt=g(50889);function Na(n,_){if(1&n&&(e.j41(0,"cds-text-label",24),e.PLo(1,5),e.nrm(2,"input",25),e.YFu(),e.k0s()),2&n){const t=e.XpG(),o=e.sdS(14);e.Y8G("invalid",t.formGroup.controls.user.invalid&&t.formGroup.controls.user.dirty)("invalidText",o),e.R7$(2),e.Y8G("readonly",!0)}}function ba(n,_){if(1&n&&(e.j41(0,"option",29),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function Aa(n,_){if(1&n&&(e.j41(0,"cds-select",26)(1,"option",27),e.EFF(2,"--- Select a username ---"),e.k0s(),e.DNE(3,ba,2,2,"option",28),e.k0s()),2&n){const t=e.XpG(),o=e.sdS(14);e.Y8G("invalid",t.formGroup.controls.user.invalid&&t.formGroup.controls.user.dirty)("invalidText",o),e.R7$(3),e.Y8G("ngForOf",t.userCandidates)}}function La(n,_){1&n&&(e.j41(0,"span",31),e.pXf(1,6),e.k0s())}function Da(n,_){if(1&n&&e.DNE(0,La,2,0,"span",30),2&n){const t=e.XpG(),o=e.sdS(8);e.Y8G("ngIf",t.formGroup.showError("user",o,"required"))}}function ya(n,_){1&n&&(e.j41(0,"div",18)(1,"cds-checkbox",32),e.pXf(2,7),e.k0s()())}function $a(n,_){1&n&&(e.j41(0,"span",31),e.pXf(1,9),e.k0s())}function va(n,_){if(1&n&&e.DNE(0,$a,2,0,"span",30),2&n){const t=e.XpG(2),o=e.sdS(8);e.Y8G("ngIf",t.formGroup.showError("access_key",o,"required"))}}function Wa(n,_){if(1&n&&(e.j41(0,"div",33)(1,"cds-password-label",34),e.PLo(2,8),e.nrm(3,"input",35),e.YFu(),e.k0s(),e.nrm(4,"cd-copy-2-clipboard-button",36),e.DNE(5,va,1,1,"ng-template",null,2,e.C5r),e.k0s()),2&n){const t=e.sdS(6),o=e.XpG();e.R7$(),e.Y8G("invalid",o.formGroup.controls.access_key.invalid&&o.formGroup.controls.access_key.dirty)("invalidText",t),e.R7$(2),e.Y8G("readonly",o.viewing)}}function wa(n,_){1&n&&(e.j41(0,"span",31),e.pXf(1,11),e.k0s())}function Ua(n,_){if(1&n&&e.DNE(0,wa,2,0,"span",30),2&n){const t=e.XpG(2),o=e.sdS(8);e.Y8G("ngIf",t.formGroup.showError("secret_key",o,"required"))}}function xa(n,_){if(1&n&&(e.j41(0,"div",33)(1,"cds-password-label",37),e.PLo(2,10),e.nrm(3,"input",38),e.YFu(),e.k0s(),e.nrm(4,"cd-copy-2-clipboard-button",39),e.DNE(5,Ua,1,1,"ng-template",null,3,e.C5r),e.k0s()),2&n){const t=e.sdS(6),o=e.XpG();e.R7$(),e.Y8G("invalid",o.formGroup.controls.secret_key.invalid&&o.formGroup.controls.secret_key.dirty)("invalidText",t),e.R7$(2),e.Y8G("invalid",o.formGroup.controls.secret_key.invalid&&o.formGroup.controls.secret_key.dirty)("readonly",o.viewing)}}let ho=(()=>{class n extends ae.dW{formBuilder;actionLabels;submitAction=new e.bkB;formGroup;viewing=!0;userCandidates=[];resource;action;constructor(t,o){super(),this.formBuilder=t,this.actionLabels=o,this.resource="S3 Key",this.createForm()}createForm(){this.formGroup=this.formBuilder.group({user:[null,[r.k0.required]],generate_key:[!0],access_key:[null,[E.xQ.requiredIf({generate_key:!1})]],secret_key:[null,[E.xQ.requiredIf({generate_key:!1})]]})}setViewing(t=!0){this.viewing=t,this.action=this.viewing?this.actionLabels.SHOW:this.actionLabels.CREATE}setValues(t,o,i){this.formGroup.setValue({user:t,generate_key:h().isEmpty(o),access_key:o,secret_key:i})}setUserCandidates(t){this.userCandidates=t}onSubmit(){this.submitAction.emit(this.formGroup.value),this.closeModal()}static \u0275fac=function(o){return new(o||n)(e.rXU(u.$),e.rXU(m.Ss))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-user-s3-key-modal"]],outputs:{submitAction:"submitAction"},features:[e.Vt3],decls:21,vars:23,consts:()=>{let t,o,i,s,T,F,k,H,q;return t="Nazwa u\u017Cytkownika",o="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",i="Username " + "\ufffd#2\ufffd\ufffd/#2\ufffd" + "",s="Pole jest wymagane.",T="Auto-generate key ",F="Access key " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",k="Pole jest wymagane.",H="Secret key " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",q="Pole jest wymagane.",[["frm","ngForm"],["userError",""],["accessKeyError",""],["secretKeyError",""],o,i,s,T,F,k,H,q,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],[1,"modal-title"],[3,"formAllFieldsRequired"],["novalidate","",3,"formGroup"],["cdsModalContent",""],[1,"form-item"],["for","user",3,"invalid","invalidText",4,"ngIf"],["label",t,"for","user","formControlName","user",3,"invalid","invalidText",4,"ngIf"],["class","form-item",4,"ngIf"],["class","form-item form-item-append",4,"ngIf"],[3,"submitActionEvent","form","submitText","showSubmit","modalForm"],["for","user",3,"invalid","invalidText"],["cdsText","","id","user","name","user","formControlName","user","readonly","","modal-primary-focus","",3,"readonly"],["label",t,"for","user","formControlName","user",3,"invalid","invalidText"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["id","generate_key","formControlName","generate_key"],[1,"form-item","form-item-append"],["for","access_key",3,"invalid","invalidText"],["cdsPassword","","id","access_key","name","access_key","formControlName","access_key",3,"readonly"],["source","access_key",1,"mt-4"],["for","secret_key",3,"invalid","invalidText"],["cdsPassword","","id","secret_key","name","secret_key","formControlName","secret_key",3,"invalid","readonly"],["source","secret_key",1,"mt-4"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"cds-modal",12),e.bIt("overlaySelected",function(){return e.eBV(s),e.Njj(i.closeModal())}),e.j41(1,"cds-modal-header",13),e.bIt("closeSelect",function(){return e.eBV(s),e.Njj(i.closeModal())}),e.qex(2,14),e.pXf(3,4),e.nI1(4,"titlecase"),e.nI1(5,"upperFirst"),e.bVm(),e.nrm(6,"cd-help-text",15),e.k0s(),e.j41(7,"form",16,0)(9,"div",17)(10,"div",18),e.DNE(11,Na,3,3,"cds-text-label",19)(12,Aa,4,3,"cds-select",20)(13,Da,1,1,"ng-template",null,1,e.C5r),e.k0s(),e.DNE(15,ya,3,0,"div",21)(16,Wa,7,3,"div",22)(17,xa,7,4,"div",22),e.k0s(),e.j41(18,"cd-form-button-panel",23),e.nI1(19,"titlecase"),e.nI1(20,"upperFirst"),e.bIt("submitActionEvent",function(){return e.eBV(s),e.Njj(i.onSubmit())}),e.k0s()()()}2&o&&(e.Y8G("open",i.open)("hasScrollingContent",!1),e.R7$(5),e.uP7(e.bMT(4,15,i.action))(e.bMT(5,17,i.resource)),e.nnv(3),e.R7$(),e.Y8G("formAllFieldsRequired",!0),e.R7$(),e.Y8G("formGroup",i.formGroup),e.R7$(4),e.Y8G("ngIf",i.viewing),e.R7$(),e.Y8G("ngIf",!i.viewing),e.R7$(3),e.Y8G("ngIf",!i.viewing),e.R7$(),e.Y8G("ngIf",!i.formGroup.getValue("generate_key")),e.R7$(),e.Y8G("ngIf",!i.formGroup.getValue("generate_key")),e.R7$(),e.Y8G("form",i.formGroup)("submitText",e.bMT(19,19,i.action)+" "+e.bMT(20,21,i.resource))("showSubmit",!i.viewing)("modalForm",!0))},dependencies:[R.Sq,R.bT,vt.N,We.e,V.O,Oe.S,Xe.E,r.qT,r.xH,r.y7,r.me,r.BC,r.cb,r.j4,r.JD,ae.aF,ae.rQ,ae.$m,Ie.Zt,Ie.LP,Ie.ks,Ie.yA,be.Sc,Ze.l6,Ze.c$,R.PV,pt.r]})}return n})();class ka{id;permissions;generate_secret;secret_key}const Xa=()=>["read","write"];function ja(n,_){1&n&&(e.j41(0,"span",34),e.pXf(1,8),e.k0s())}function Ba(n,_){1&n&&(e.j41(0,"span",34),e.pXf(1,9),e.k0s())}function za(n,_){if(1&n&&e.DNE(0,ja,2,0,"span",33)(1,Ba,2,0,"span",33),2&n){const t=e.XpG(),o=e.sdS(8);e.Y8G("ngIf",t.formGroup.showError("subuid",o,"required")),e.R7$(),e.Y8G("ngIf",t.formGroup.showError("subuid",o,"subuserIdExists"))}}function Ha(n,_){if(1&n&&(e.j41(0,"option",35),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function Ya(n,_){1&n&&(e.j41(0,"span",34),e.pXf(1,10),e.k0s())}function Va(n,_){if(1&n&&e.DNE(0,Ya,2,0,"span",33),2&n){const t=e.XpG(),o=e.sdS(8);e.Y8G("ngIf",t.formGroup.showError("perm",o,"required"))}}function Za(n,_){1&n&&(e.j41(0,"span",34),e.pXf(1,14),e.k0s())}function Ka(n,_){if(1&n&&e.DNE(0,Za,2,0,"span",33),2&n){const t=e.XpG(3),o=e.sdS(8);e.Y8G("ngIf",t.formGroup.showError("secret_key",o,"required"))}}function qa(n,_){if(1&n&&(e.j41(0,"div",38)(1,"cds-password-label",39),e.PLo(2,13),e.nrm(3,"input",40),e.YFu(),e.k0s(),e.nrm(4,"cd-copy-2-clipboard-button",41),e.DNE(5,Ka,1,1,"ng-template",null,3,e.C5r),e.k0s()),2&n){const t=e.sdS(6),o=e.XpG(2);e.R7$(),e.Y8G("invalid",o.formGroup.controls.secret_key.invalid&&o.formGroup.controls.secret_key.dirty)("invalidText",t),e.R7$(2),e.Y8G("invalid",o.formGroup.controls.secret_key.invalid&&o.formGroup.controls.secret_key.dirty)("autofocus",!0)}}function Ja(n,_){if(1&n&&(e.j41(0,"fieldset")(1,"legend"),e.pXf(2,11),e.k0s(),e.j41(3,"div",21)(4,"cds-checkbox",36),e.pXf(5,12),e.k0s()(),e.DNE(6,qa,7,4,"div",37),e.k0s()),2&n){const t=e.XpG();e.R7$(6),e.Y8G("ngIf",!t.editing&&!t.formGroup.getValue("generate_secret"))}}let Qa=(()=>{class n extends ae.dW{formBuilder;actionLabels;submitAction=new e.bkB;formGroup;editing=!0;subusers=[];resource;action;constructor(t,o){super(),this.formBuilder=t,this.actionLabels=o,this.resource="pod-u\u017Cytkownik",this.createForm()}createForm(){this.formGroup=this.formBuilder.group({uid:[null],subuid:[null,[r.k0.required,this.subuserValidator()]],perm:["full-control",[r.k0.required]],generate_secret:[!0],secret_key:[null,[E.xQ.requiredIf({generate_secret:!1})]]})}subuserValidator(){const t=this;return o=>t.editing||(0,E.xF)(o.value)?null:t.subusers.some(s=>h().isEqual(t.getSubuserName(s.id),o.value))?{subuserIdExists:!0}:null}getSubuserName(t){if(h().isEmpty(t))return t;const o=t.match(/([^:]+)(:(.+))?/);return h().isUndefined(o[3])?o[1]:o[3]}setEditing(t=!0){this.editing=t,this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE}setValues(t,o="",i=""){this.formGroup.setValue({uid:t,subuid:this.getSubuserName(o),perm:i,generate_secret:!0,secret_key:null})}setSubusers(t){this.subusers=t}onSubmit(){const t=this.formGroup.value,o=new ka;o.id=`${t.uid}:${t.subuid}`,o.permissions=t.perm,o.generate_secret=t.generate_secret,o.secret_key=t.secret_key,this.submitAction.emit(o),this.closeModal()}static \u0275fac=function(o){return new(o||n)(e.rXU(u.$),e.rXU(m.Ss))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-user-subuser-modal"]],outputs:{submitAction:"submitAction"},features:[e.Vt3],decls:35,vars:25,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re;return t="Pozwolenie ",o="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",i="Username " + "\ufffd#13\ufffd\ufffd/#13\ufffd" + "",s="odczyt, zapis",T="pe\u0142ny",F="Pole jest wymagane.",k="Wybrane ID pod-u\u017Cytkownika jest ju\u017C u\u017Cyte.",H="Pole jest wymagane.",q="Szybki klucz",oe="Auto-generate key ",le="Secret key " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",Re="Pole jest wymagane.",[["frm","ngForm"],["subuserHelper",""],["permError",""],["secretKeyError",""],o,i,s,T,F,k,H,q,oe,le,Re,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],[3,"formAllFieldsRequired"],["novalidate","",3,"formGroup"],["cdsModalContent",""],[1,"form-item"],["for","uid"],["cdsText","","id","uid","name","uid","formControlName","uid","readonly","","modal-primary-focus",""],["for","subuid",3,"invalid","invalidText"],["cdsText","","id","subuid","name","subuid","formControlName","subuid","autofocus","",3,"readonly"],["label",t,"for","perm","formControlName","perm",3,"invalid","invalidText"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","read-write"],["value","full-control"],[4,"ngIf"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"value"],["id","generate_secret","formControlName","generate_secret"],["class","form-item form-item-append",4,"ngIf"],[1,"form-item","form-item-append"],["for","secret_key",3,"invalid","invalidText"],["cdsPassword","","id","secret_key","name","secret_key","formControlName","secret_key",3,"invalid","autofocus"],["source","secret_key",1,"mt-4"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"cds-modal",15),e.bIt("overlaySelected",function(){return e.eBV(s),e.Njj(i.closeModal())}),e.j41(1,"cds-modal-header",16),e.bIt("closeSelect",function(){return e.eBV(s),e.Njj(i.closeModal())}),e.j41(2,"h3",17),e.pXf(3,4),e.nI1(4,"titlecase"),e.nI1(5,"upperFirst"),e.k0s(),e.nrm(6,"cd-help-text",18),e.k0s(),e.j41(7,"form",19,0)(9,"div",20)(10,"div",21)(11,"cds-text-label",22),e.PLo(12,5),e.nrm(13,"input",23),e.YFu(),e.k0s()(),e.j41(14,"div",21)(15,"cds-text-label",24),e.EFF(16,"Subuser "),e.nrm(17,"input",25),e.k0s(),e.DNE(18,za,2,2,"ng-template",null,1,e.C5r),e.k0s(),e.j41(20,"div",21)(21,"cds-select",26)(22,"option",27),e.EFF(23,"--- Select a permission ---"),e.k0s(),e.DNE(24,Ha,2,2,"option",28),e.j41(25,"option",29),e.pXf(26,6),e.k0s(),e.j41(27,"option",30),e.pXf(28,7),e.k0s()(),e.DNE(29,Va,1,1,"ng-template",null,2,e.C5r),e.k0s(),e.DNE(31,Ja,7,1,"fieldset",31),e.k0s(),e.j41(32,"cd-form-button-panel",32),e.nI1(33,"titlecase"),e.nI1(34,"upperFirst"),e.bIt("submitActionEvent",function(){return e.eBV(s),e.Njj(i.onSubmit())}),e.k0s()()()}if(2&o){const s=e.sdS(19),T=e.sdS(30);e.Y8G("open",i.open)("hasScrollingContent",!1),e.R7$(5),e.uP7(e.bMT(4,16,i.action))(e.bMT(5,18,i.resource)),e.nnv(3),e.R7$(),e.Y8G("formAllFieldsRequired",!0),e.R7$(),e.Y8G("formGroup",i.formGroup),e.R7$(8),e.Y8G("invalid",i.formGroup.controls.subuid.invalid&&i.formGroup.controls.subuid.dirty)("invalidText",s),e.R7$(2),e.Y8G("readonly",i.editing),e.R7$(4),e.Y8G("invalid",i.formGroup.controls.perm.invalid&&i.formGroup.controls.perm.dirty)("invalidText",T),e.R7$(3),e.Y8G("ngForOf",e.lJ4(24,Xa)),e.R7$(7),e.Y8G("ngIf",!i.editing),e.R7$(),e.Y8G("form",i.formGroup)("submitText",e.bMT(33,20,i.action)+" "+e.bMT(34,22,i.resource))("modalForm",!0)}},dependencies:[R.Sq,R.bT,vt.N,We.e,V.O,Ae.B,Oe.S,Xe.E,r.qT,r.xH,r.y7,r.me,r.BC,r.cb,r.j4,r.JD,ae.aF,ae.rQ,ae.$m,ae.hN,Ie.Zt,Ie.LP,Ie.ks,Ie.yA,be.Sc,Ze.l6,Ze.c$,R.PV,pt.r]})}return n})(),Go=(()=>{class n extends ae.dW{actionLabels;user;secret_key;resource;action;constructor(t){super(),this.actionLabels=t,this.resource="Swift Key",this.action=this.actionLabels.SHOW}setValues(t,o){this.user=t,this.secret_key=o}static \u0275fac=function(o){return new(o||n)(e.rXU(m.Ss))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-user-swift-key-modal"]],features:[e.Vt3],decls:18,vars:12,consts:()=>{let t,o,i;return t="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",o="Username " + "\ufffd#11\ufffd\ufffd/#11\ufffd" + "",i="Secret key " + "\ufffd#15\ufffd\ufffd/#15\ufffd" + "",[t,o,i,["size","md",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],["novalidate",""],["cdsModalContent",""],[1,"form-item"],["for","user"],["cdsText","","id","user","name","user","readonly","","modal-primary-focus","",3,"ngModelChange","ngModel"],[1,"form-item","form-item-append"],["for","secret_key"],["cdsPassword","","id","secret_key","name","secret_key","readonly","",3,"ngModelChange","ngModel"],["source","secret_key",1,"mt-4"],[3,"cancel","showSubmit","modalForm"]]},template:function(o,i){1&o&&(e.j41(0,"cds-modal",3),e.bIt("overlaySelected",function(){return i.closeModal()}),e.j41(1,"cds-modal-header",4),e.bIt("closeSelect",function(){return i.closeModal()}),e.j41(2,"h3",5),e.pXf(3,0),e.nI1(4,"titlecase"),e.nI1(5,"upperFirst"),e.k0s()(),e.j41(6,"form",6)(7,"div",7)(8,"div",8)(9,"cds-text-label",9),e.PLo(10,1),e.j41(11,"input",10),e.mxI("ngModelChange",function(T){return e.DH7(i.user,T)||(i.user=T),T}),e.k0s(),e.YFu(),e.k0s()(),e.j41(12,"div",11)(13,"cds-password-label",12),e.PLo(14,2),e.j41(15,"input",13),e.mxI("ngModelChange",function(T){return e.DH7(i.secret_key,T)||(i.secret_key=T),T}),e.k0s(),e.YFu(),e.k0s(),e.nrm(16,"cd-copy-2-clipboard-button",14),e.k0s()(),e.j41(17,"cd-form-button-panel",15),e.bIt("cancel",function(){return i.closeModal()}),e.k0s()()()),2&o&&(e.Y8G("open",i.open)("hasScrollingContent",!1),e.R7$(5),e.uP7(e.bMT(4,8,i.action))(e.bMT(5,10,i.resource)),e.nnv(3),e.R7$(6),e.R50("ngModel",i.user),e.R7$(4),e.R50("ngModel",i.secret_key),e.R7$(2),e.Y8G("showSubmit",!1)("modalForm",!0))},dependencies:[vt.N,We.e,Oe.S,r.qT,r.me,r.BC,r.cb,r.vS,r.cV,ae.aF,ae.rQ,ae.$m,ae.hN,Ie.Zt,Ie.LP,Ie.ks,Ie.yA,R.PV,pt.r]})}return n})();var Ln=g(42865),el=g(45757);const tl=()=>({md:4}),Io=n=>({"form-item":n});function nl(n,_){1&n&&(e.j41(0,"option",107),e.pXf(1,27),e.k0s()),2&n&&e.Y8G("ngValue",null)}function ol(n,_){1&n&&(e.j41(0,"option",107),e.pXf(1,28),e.k0s()),2&n&&e.Y8G("ngValue",null)}function il(n,_){if(1&n&&(e.j41(0,"option",108),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.Y8G("value",t.id),e.R7$(),e.Lme("",t.name," ",t.tenant?"- "+t.tenant:"","")}}function _l(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,29),e.k0s())}function sl(n,_){if(1&n&&e.DNE(0,_l,2,0,"span",109),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.userForm.showError("account_id",t,"tenantedAccount"))}}function rl(n,_){1&n&&(e.j41(0,"div"),e.pXf(1,30),e.k0s(),e.j41(2,"div"),e.pXf(3,31),e.k0s())}function al(n,_){1&n&&(e.j41(0,"div",83)(1,"cds-checkbox",111),e.PLo(2,32),e.nrm(3,"cd-help-text"),e.YFu(),e.k0s()())}function ll(n,_){if(1&n&&(e.j41(0,"div",83)(1,"cds-select",104),e.DNE(2,nl,2,1,"option",105)(3,ol,2,1,"option",105)(4,il,2,3,"option",106),e.k0s(),e.DNE(5,sl,1,1,"ng-template",null,4,e.C5r)(7,rl,4,0,"ng-template",null,5,e.C5r),e.k0s(),e.DNE(9,al,4,0,"div",87)),2&n){const t=e.sdS(6),o=e.sdS(8),i=e.XpG(2);e.R7$(),e.Y8G("invalid",i.userForm.controls.account_id.invalid&&i.userForm.controls.account_id.dirty)("invalidText",t)("helperText",o),e.R7$(),e.Y8G("ngIf",null===i.accounts),e.R7$(),e.Y8G("ngIf",null!==i.accounts),e.R7$(),e.Y8G("ngForOf",i.accounts),e.R7$(5),e.Y8G("ngIf",i.userForm.getValue("account_id"))}}function cl(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,33),e.k0s())}function ul(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,34),e.k0s())}function dl(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,35),e.k0s())}function fl(n,_){if(1&n&&e.DNE(0,cl,2,0,"span",109)(1,ul,2,0,"span",109)(2,dl,2,0,"span",109),2&n){e.XpG();const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.userForm.showError("user_id",t,"required")),e.R7$(),e.Y8G("ngIf",o.userForm.showError("user_id",t,"pattern")),e.R7$(),e.Y8G("ngIf",!o.userForm.getValue("show_tenant")&&o.userForm.showError("user_id",t,"notUnique"))}}function pl(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,37),e.k0s())}function gl(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,38),e.k0s())}function Tl(n,_){if(1&n&&e.DNE(0,pl,2,0,"span",109)(1,gl,2,0,"span",109),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.userForm.showError("tenant",t,"pattern")),e.R7$(),e.Y8G("ngIf",o.userForm.showError("tenant",t,"notUnique"))}}function Rl(n,_){if(1&n&&(e.j41(0,"div",83)(1,"cds-text-label",112),e.PLo(2,36),e.nrm(3,"input",113),e.YFu(),e.k0s(),e.DNE(4,Tl,2,2,"ng-template",null,6,e.C5r),e.k0s()),2&n){const t=e.sdS(5),o=e.XpG(2);e.R7$(),e.Y8G("invalid",o.userForm.controls.tenant.invalid&&o.userForm.controls.tenant.dirty)("invalidText",t),e.R7$(2),e.Y8G("invalid",o.userForm.controls.tenant.invalid&&o.userForm.controls.tenant.dirty)("readonly",o.editing)}}function ml(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,39),e.k0s())}function El(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,40),e.k0s())}function Sl(n,_){if(1&n&&e.DNE(0,ml,2,0,"span",109)(1,El,2,0,"span",109),2&n){e.XpG();const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.userForm.showError("display_name",t,"required")),e.R7$(),e.Y8G("ngIf",o.userForm.showError("display_name",t,"pattern"))}}function Fl(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,41),e.k0s())}function Cl(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,42),e.k0s())}function Ml(n,_){if(1&n&&e.DNE(0,Fl,2,0,"span",109)(1,Cl,2,0,"span",109),2&n){e.XpG();const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.userForm.showError("email",t,"email")),e.R7$(),e.Y8G("ngIf",o.userForm.showError("email",t,"notUnique"))}}function hl(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,44),e.k0s())}function Gl(n,_){if(1&n&&(e.DNE(0,hl,2,0,"span",109),e.j41(1,"span",110),e.pXf(2,43),e.k0s()),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.userForm.showError("max_buckets",t,"required"))}}function Pl(n,_){if(1&n&&(e.j41(0,"div",83),e.nrm(1,"cds-number",114),e.DNE(2,Gl,3,1,"ng-template",null,7,e.C5r),e.k0s()),2&n){const t=e.sdS(3),o=e.XpG(2);e.R7$(),e.Y8G("invalid",o.userForm.controls.max_buckets.invalid&&o.userForm.controls.max_buckets.dirty)("invalidText",t)}}function Il(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,48),e.k0s())}function Ol(n,_){if(1&n&&e.DNE(0,Il,2,0,"span",109),2&n){e.XpG(3);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.userForm.showError("access_key",t,"required"))}}function Nl(n,_){if(1&n&&(e.j41(0,"div",117)(1,"cds-password-label",118),e.PLo(2,47),e.nrm(3,"input",119),e.YFu(),e.k0s(),e.nrm(4,"cd-copy-2-clipboard-button",120),e.DNE(5,Ol,1,1,"ng-template",null,8,e.C5r),e.k0s()),2&n){const t=e.sdS(6),o=e.XpG(3);e.R7$(),e.Y8G("invalid",o.userForm.controls.access_key.invalid&&o.userForm.controls.access_key.dirty)("invalidText",t),e.R7$(2),e.Y8G("invalid",o.userForm.controls.access_key.invalid&&o.userForm.controls.access_key.dirty)}}function bl(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,50),e.k0s())}function Al(n,_){if(1&n&&e.DNE(0,bl,2,0,"span",109),2&n){e.XpG(3);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.userForm.showError("secret_key",t,"required"))}}function Ll(n,_){if(1&n&&(e.j41(0,"div",117)(1,"cds-password-label",121),e.PLo(2,49),e.nrm(3,"input",122),e.YFu(),e.k0s(),e.nrm(4,"cd-copy-2-clipboard-button",123),e.DNE(5,Al,1,1,"ng-template",null,9,e.C5r),e.k0s()),2&n){const t=e.sdS(6),o=e.XpG(3);e.R7$(),e.Y8G("invalid",o.userForm.controls.secret_key.invalid&&o.userForm.controls.secret_key.dirty)("invalidText",t),e.R7$(2),e.Y8G("invalid",o.userForm.controls.secret_key.invalid&&o.userForm.controls.secret_key.dirty)}}function Dl(n,_){if(1&n&&(e.j41(0,"fieldset")(1,"legend",99),e.pXf(2,45),e.k0s(),e.j41(3,"div",83)(4,"cds-checkbox",115),e.pXf(5,46),e.k0s()(),e.DNE(6,Nl,7,3,"div",116)(7,Ll,7,3,"div",116),e.k0s()),2&n){const t=e.XpG(2);e.R7$(6),e.Y8G("ngIf",!t.editing&&!t.userForm.getValue("generate_key")),e.R7$(),e.Y8G("ngIf",!t.editing&&!t.userForm.getValue("generate_key"))}}function yl(n,_){1&n&&(e.j41(0,"span",130)(1,"span",131),e.pXf(2,53),e.k0s()())}function $l(n,_){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",132)(2,"div",127)(3,"cds-text-label"),e.EFF(4,"Subuser id "),e.nrm(5,"input",133),e.k0s()(),e.j41(6,"div",127)(7,"cds-text-label"),e.EFF(8,"Permissions "),e.nrm(9,"input",133),e.k0s()(),e.j41(10,"cds-icon-button",134),e.bIt("click",function(){const i=e.eBV(t).index,s=e.XpG(3);return e.Njj(s.showSubuserModal(i))}),e.qSk(),e.nrm(11,"svg",135),e.k0s(),e.joV(),e.j41(12,"cds-icon-button",136),e.bIt("click",function(){const i=e.eBV(t).index,s=e.XpG(3);return e.Njj(s.deleteSubuser(i))}),e.qSk(),e.nrm(13,"svg",137),e.k0s()(),e.bVm()}if(2&n){const t=_.$implicit,o=_.index;e.R7$(),e.Y8G("ngClass",e.eq3(3,Io,o>0)),e.R7$(4),e.Y8G("value",t.id),e.R7$(4),e.Y8G("value","full-control"===t.permissions?"full":t.permissions)}}function vl(n,_){if(1&n){const t=e.RV6();e.j41(0,"fieldset")(1,"div",83)(2,"legend",99),e.pXf(3,51),e.k0s(),e.DNE(4,yl,3,0,"span",124)(5,$l,14,5,"ng-container",125),e.j41(6,"div",126)(7,"div",127)(8,"button",128),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.showSubuserModal())}),e.qex(9),e.pXf(10,52),e.nI1(11,"titlecase"),e.nI1(12,"upperFirst"),e.bVm(),e.qSk(),e.nrm(13,"svg",129),e.k0s()()()()()}if(2&n){const t=e.XpG(2);e.R7$(4),e.Y8G("ngIf",0===t.subusers.length),e.R7$(),e.Y8G("ngForOf",t.subusers),e.R7$(7),e.uP7(e.bMT(11,4,t.actionLabels.CREATE))(e.bMT(12,6,t.subuserLabel)),e.nnv(10)}}function Wl(n,_){1&n&&(e.j41(0,"span",130)(1,"span",131),e.pXf(2,56),e.k0s()())}function wl(n,_){if(1&n){const t=e.RV6();e.j41(0,"span")(1,"div",139)(2,"div",127)(3,"cds-text-label"),e.nrm(4,"input",133),e.k0s()(),e.j41(5,"cds-icon-button",140),e.bIt("click",function(){const i=e.eBV(t).index,s=e.XpG(3);return e.Njj(s.showS3KeyModal(i))}),e.qSk(),e.nrm(6,"svg",141),e.k0s(),e.joV(),e.j41(7,"cds-icon-button",142),e.bIt("click",function(){const i=e.eBV(t).index,s=e.XpG(3);return e.Njj(s.deleteS3Key(i))}),e.qSk(),e.nrm(8,"svg",137),e.k0s()(),e.joV(),e.nrm(9,"span",131),e.k0s()}if(2&n){const t=_.$implicit;e.R7$(4),e.Y8G("value",t.user)}}function Ul(n,_){1&n&&(e.j41(0,"span",130)(1,"span",131),e.pXf(2,57),e.k0s()())}function xl(n,_){if(1&n){const t=e.RV6();e.j41(0,"span")(1,"div",139)(2,"div",127)(3,"cds-text-label"),e.nrm(4,"input",133),e.k0s()(),e.j41(5,"cds-icon-button",143),e.bIt("click",function(){const i=e.eBV(t).index,s=e.XpG(3);return e.Njj(s.showSwiftKeyModal(i))}),e.qSk(),e.nrm(6,"svg",141),e.k0s()()()}if(2&n){const t=_.$implicit;e.R7$(4),e.Y8G("value",t.user)}}function kl(n,_){if(1&n){const t=e.RV6();e.j41(0,"fieldset")(1,"div",83)(2,"legend",99),e.pXf(3,54),e.k0s(),e.j41(4,"h6"),e.EFF(5,"S3"),e.k0s(),e.DNE(6,Wl,3,0,"span",124)(7,wl,10,1,"span",125),e.j41(8,"div",126)(9,"div",127)(10,"button",138),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.showS3KeyModal())}),e.qex(11),e.pXf(12,55),e.nI1(13,"titlecase"),e.nI1(14,"upperFirst"),e.bVm(),e.qSk(),e.nrm(15,"svg",129),e.k0s()()(),e.joV(),e.nrm(16,"hr"),e.k0s(),e.j41(17,"div",83)(18,"h6"),e.EFF(19,"Swift"),e.k0s(),e.DNE(20,Ul,3,0,"span",124)(21,xl,7,1,"span",125),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(6),e.Y8G("ngIf",0===t.s3Keys.length),e.R7$(),e.Y8G("ngForOf",t.s3Keys),e.R7$(7),e.uP7(e.bMT(13,6,t.actionLabels.CREATE))(e.bMT(14,8,t.s3keyLabel)),e.nnv(12),e.R7$(6),e.Y8G("ngIf",0===t.swiftKeys.length),e.R7$(),e.Y8G("ngForOf",t.swiftKeys)}}function Xl(n,_){1&n&&(e.j41(0,"span",130)(1,"span",131),e.pXf(2,60),e.k0s()())}function jl(n,_){if(1&n){const t=e.RV6();e.j41(0,"span")(1,"div",132)(2,"div",127)(3,"cds-text-label"),e.PLo(4,61),e.nrm(5,"input",133),e.YFu(),e.k0s()(),e.j41(6,"div",127)(7,"cds-text-label"),e.PLo(8,62),e.nrm(9,"input",133),e.YFu(),e.k0s()(),e.j41(10,"cds-icon-button",145),e.bIt("click",function(){const i=e.eBV(t).index,s=e.XpG(3);return e.Njj(s.showCapabilityModal(i))}),e.qSk(),e.nrm(11,"svg",135),e.k0s(),e.joV(),e.j41(12,"cds-icon-button",146),e.bIt("click",function(){const i=e.eBV(t).index,s=e.XpG(3);return e.Njj(s.deleteCapability(i))}),e.qSk(),e.nrm(13,"svg",137),e.k0s()(),e.joV(),e.nrm(14,"span",131),e.k0s()}if(2&n){const t=_.$implicit,o=_.index;e.R7$(),e.Y8G("ngClass",e.eq3(3,Io,o>0)),e.R7$(4),e.Y8G("value",t.type),e.R7$(4),e.Y8G("value",t.perm)}}function Bl(n,_){if(1&n){const t=e.RV6();e.j41(0,"fieldset")(1,"div",83)(2,"legend",99),e.pXf(3,58),e.k0s(),e.DNE(4,Xl,3,0,"span",124)(5,jl,15,5,"span",125),e.j41(6,"div",126)(7,"div",127)(8,"button",144),e.nI1(9,"pipeFunction"),e.nI1(10,"pipeFunction"),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.showCapabilityModal())}),e.qex(11),e.pXf(12,59),e.nI1(13,"titlecase"),e.nI1(14,"upperFirst"),e.bVm(),e.qSk(),e.nrm(15,"svg",129),e.k0s()()()()()}if(2&n){const t=e.XpG(2);e.R7$(4),e.Y8G("ngIf",0===t.capabilities.length),e.R7$(),e.Y8G("ngForOf",t.capabilities),e.R7$(3),e.Y8G("disabled",e.i5U(9,6,t.capabilities,t.hasAllCapabilities))("disableTooltip",!e.i5U(10,9,t.capabilities,t.hasAllCapabilities)),e.R7$(6),e.uP7(e.bMT(13,12,t.actionLabels.ADD))(e.bMT(14,14,t.capabilityLabel)),e.nnv(12)}}function zl(n,_){1&n&&(e.j41(0,"div",83)(1,"cds-checkbox",147),e.pXf(2,63),e.k0s()())}function Hl(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,65),e.k0s())}function Yl(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,66),e.k0s())}function Vl(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,67),e.k0s())}function Zl(n,_){if(1&n&&e.DNE(0,Hl,2,0,"span",109)(1,Yl,2,0,"span",109)(2,Vl,2,0,"span",109),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.userForm.showError("user_quota_max_size",t,"required")),e.R7$(),e.Y8G("ngIf",o.userForm.showError("user_quota_max_size",t,"quotaMaxSize")),e.R7$(),e.Y8G("ngIf",o.userForm.showError("user_quota_max_size",o.formDir,"pattern"))}}function Kl(n,_){if(1&n&&(e.j41(0,"div",83)(1,"cds-text-label",148),e.PLo(2,64),e.nrm(3,"input",149),e.YFu(),e.k0s(),e.DNE(4,Zl,3,3,"ng-template",null,10,e.C5r),e.k0s()),2&n){const t=e.sdS(5),o=e.XpG(2);e.R7$(),e.Y8G("invalid",o.userForm.controls.user_quota_max_size.invalid&&o.userForm.controls.user_quota_max_size.dirty)("invalidText",t),e.R7$(2),e.Y8G("invalid",o.userForm.controls.user_quota_max_size.invalid&&o.userForm.controls.user_quota_max_size.dirty)}}function ql(n,_){1&n&&(e.j41(0,"div",83)(1,"cds-checkbox",150),e.pXf(2,68),e.k0s()())}function Jl(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,69),e.k0s())}function Ql(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,70),e.k0s())}function ec(n,_){if(1&n&&e.DNE(0,Jl,2,0,"span",109)(1,Ql,2,0,"span",109),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.userForm.showError("user_quota_max_objects",t,"required")),e.R7$(),e.Y8G("ngIf",o.userForm.showError("user_quota_max_objects",t,"min"))}}function tc(n,_){if(1&n&&(e.j41(0,"div",83),e.nrm(1,"cds-number",151),e.DNE(2,ec,2,2,"ng-template",null,11,e.C5r),e.k0s()),2&n){const t=e.sdS(3),o=e.XpG(2);e.R7$(),e.Y8G("min",0)("invalid",o.userForm.controls.user_quota_max_objects.invalid&&o.userForm.controls.user_quota_max_objects.dirty)("invalidText",t)}}function nc(n,_){1&n&&(e.j41(0,"div",83)(1,"cds-checkbox",152),e.pXf(2,71),e.k0s()())}function oc(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,73),e.k0s())}function ic(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,74),e.k0s())}function _c(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,75),e.k0s())}function sc(n,_){if(1&n&&e.DNE(0,oc,2,0,"span",109)(1,ic,2,0,"span",109)(2,_c,2,0,"span",109),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.userForm.showError("bucket_quota_max_size",t,"required")),e.R7$(),e.Y8G("ngIf",o.userForm.showError("bucket_quota_max_size",t,"quotaMaxSize")),e.R7$(),e.Y8G("ngIf",o.userForm.showError("bucket_quota_max_size",o.formDir,"pattern"))}}function rc(n,_){if(1&n&&(e.j41(0,"div",83)(1,"cds-text-label",153),e.PLo(2,72),e.nrm(3,"input",154),e.YFu(),e.k0s(),e.DNE(4,sc,3,3,"ng-template",null,12,e.C5r),e.k0s()),2&n){const t=e.sdS(5),o=e.XpG(2);e.R7$(),e.Y8G("invalid",o.userForm.controls.bucket_quota_max_size.invalid&&o.userForm.controls.bucket_quota_max_size.dirty)("invalidText",t),e.R7$(2),e.Y8G("invalid",o.userForm.controls.bucket_quota_max_size.invalid&&o.userForm.controls.bucket_quota_max_size.dirty)}}function ac(n,_){1&n&&(e.j41(0,"div",83)(1,"cds-checkbox",155),e.pXf(2,76),e.k0s()())}function lc(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,77),e.k0s())}function cc(n,_){1&n&&(e.j41(0,"span",110),e.pXf(1,78),e.k0s())}function uc(n,_){if(1&n&&e.DNE(0,lc,2,0,"span",109)(1,cc,2,0,"span",109),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.userForm.showError("bucket_quota_max_objects",t,"required")),e.R7$(),e.Y8G("ngIf",o.userForm.showError("bucket_quota_max_objects",t,"min"))}}function dc(n,_){if(1&n&&(e.j41(0,"div",83),e.nrm(1,"cds-number",156),e.DNE(2,uc,2,2,"ng-template",null,13,e.C5r),e.k0s()),2&n){const t=e.sdS(3),o=e.XpG(2);e.R7$(),e.Y8G("min",0)("invalid",o.userForm.controls.bucket_quota_max_objects.invalid&&o.userForm.controls.bucket_quota_max_objects.dirty)("invalidText",t)}}function fc(n,_){if(1&n){const t=e.RV6();e.j41(0,"div",80)(1,"form",81,0)(3,"div",82),e.pXf(4,14),e.nI1(5,"titlecase"),e.nI1(6,"upperFirst"),e.k0s(),e.DNE(7,ll,10,7),e.j41(8,"div",83)(9,"cds-text-label",84),e.PLo(10,15),e.nrm(11,"input",85),e.YFu(),e.k0s(),e.DNE(12,fl,3,3,"ng-template",null,1,e.C5r),e.k0s(),e.j41(14,"div",83)(15,"cds-checkbox",86),e.bIt("checkedChange",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.updateFieldsWhenTenanted())}),e.EFF(16,"Show Tenant "),e.k0s()(),e.DNE(17,Rl,6,4,"div",87),e.j41(18,"div",83)(19,"cds-text-label",88),e.PLo(20,16),e.nrm(21,"input",89),e.YFu(),e.k0s(),e.DNE(22,Sl,2,2,"ng-template",null,2,e.C5r),e.k0s(),e.j41(24,"div",83)(25,"cds-text-label",90),e.PLo(26,17),e.nrm(27,"input",91),e.YFu(),e.k0s(),e.DNE(28,Ml,2,2,"ng-template",null,3,e.C5r),e.k0s(),e.j41(30,"div",83)(31,"cds-select",92),e.bIt("valueChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.onMaxBucketsModeChange(i))}),e.j41(32,"option",93),e.pXf(33,18),e.k0s(),e.j41(34,"option",94),e.pXf(35,19),e.k0s(),e.j41(36,"option",95),e.pXf(37,20),e.k0s()()(),e.DNE(38,Pl,4,2,"div",87),e.j41(39,"div",83)(40,"cds-checkbox",96),e.PLo(41,21),e.nrm(42,"cd-help-text"),e.YFu(),e.k0s()(),e.j41(43,"div",83)(44,"cds-checkbox",97),e.PLo(45,22),e.nrm(46,"cd-help-text"),e.YFu(),e.k0s()(),e.DNE(47,Dl,8,2,"fieldset",98)(48,vl,14,8,"fieldset",98)(49,kl,22,10,"fieldset",98)(50,Bl,16,16,"fieldset",98),e.j41(51,"fieldset")(52,"div",83)(53,"legend",99),e.pXf(54,23),e.k0s(),e.j41(55,"cds-checkbox",100),e.pXf(56,24),e.k0s()(),e.DNE(57,zl,3,0,"div",87)(58,Kl,6,3,"div",87)(59,ql,3,0,"div",87)(60,tc,4,3,"div",87),e.k0s(),e.j41(61,"fieldset")(62,"div",83)(63,"legend",99),e.pXf(64,25),e.k0s(),e.j41(65,"cds-checkbox",101),e.pXf(66,26),e.k0s()(),e.DNE(67,nc,3,0,"div",87)(68,rc,6,3,"div",87)(69,ac,3,0,"div",87)(70,dc,4,3,"div",87),e.k0s(),e.j41(71,"cd-form-advanced-fieldset")(72,"cd-rgw-rate-limit",102),e.bIt("rateLimitFormGroup",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.rateLimitFormInit(i))}),e.k0s()(),e.j41(73,"cd-form-button-panel",103),e.nI1(74,"titlecase"),e.nI1(75,"upperFirst"),e.bIt("submitActionEvent",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSubmit())}),e.k0s()()()}if(2&n){const t=e.sdS(13),o=e.sdS(23),i=e.sdS(29),s=e.XpG();e.Y8G("columnNumbers",e.lJ4(44,tl)),e.R7$(),e.Y8G("formGroup",s.userForm),e.R7$(5),e.uP7(e.bMT(5,36,s.action))(e.bMT(6,38,s.resource)),e.nnv(4),e.R7$(),e.vxM(s.accounts.length>0?7:-1),e.R7$(2),e.Y8G("invalid",s.userForm.controls.user_id.invalid&&s.userForm.controls.user_id.dirty)("invalidText",t),e.R7$(2),e.Y8G("invalid",s.userForm.controls.user_id.invalid&&s.userForm.controls.user_id.dirty)("readonly",s.editing)("autofocus",!s.editing),e.R7$(4),e.Y8G("readonly",!0),e.R7$(2),e.Y8G("ngIf",s.userForm.getValue("show_tenant")),e.R7$(2),e.Y8G("invalid",s.userForm.controls.display_name.invalid&&s.userForm.controls.display_name.dirty)("invalidText",o),e.R7$(2),e.Y8G("invalid",s.userForm.showError("display_name",s.formDir)),e.R7$(4),e.Y8G("invalid",s.userForm.controls.email.invalid&&s.userForm.controls.email.dirty)("invalidText",i),e.R7$(2),e.Y8G("invalid",s.userForm.controls.email.invalid&&s.userForm.controls.email.dirty),e.R7$(11),e.Y8G("ngIf",1==s.userForm.get("max_buckets_mode").value),e.R7$(9),e.Y8G("ngIf",!s.editing),e.R7$(),e.Y8G("ngIf",s.editing),e.R7$(),e.Y8G("ngIf",s.editing),e.R7$(),e.Y8G("ngIf",s.editing),e.R7$(7),e.Y8G("ngIf",s.userForm.controls.user_quota_enabled.value),e.R7$(),e.Y8G("ngIf",s.userForm.controls.user_quota_enabled.value&&!s.userForm.getValue("user_quota_max_size_unlimited")),e.R7$(),e.Y8G("ngIf",s.userForm.controls.user_quota_enabled.value),e.R7$(),e.Y8G("ngIf",s.userForm.controls.user_quota_enabled.value&&!s.userForm.getValue("user_quota_max_objects_unlimited")),e.R7$(7),e.Y8G("ngIf",s.userForm.controls.bucket_quota_enabled.value),e.R7$(),e.Y8G("ngIf",s.userForm.controls.bucket_quota_enabled.value&&!s.userForm.getValue("bucket_quota_max_size_unlimited")),e.R7$(),e.Y8G("ngIf",s.userForm.controls.bucket_quota_enabled.value),e.R7$(),e.Y8G("ngIf",s.userForm.controls.bucket_quota_enabled.value&&!s.userForm.getValue("bucket_quota_max_objects_unlimited")),e.R7$(2),e.Y8G("type","user")("isEditing",s.editing)("id",s.uid),e.R7$(),e.Y8G("form",s.userForm)("submitText",e.bMT(74,40,s.action)+" "+e.bMT(75,42,s.resource))}}let Oo=(()=>{class n extends d.g{formBuilder;route;router;rgwUserService;modalService;notificationService;actionLabels;rgwUserAccountService;userForm;editing=!1;submitObservables=[];icons=S.F;subusers=[];s3Keys=[];swiftKeys=[];capabilities=[];uid;action;resource;subuserLabel;s3keyLabel;capabilityLabel;usernameExists;showTenant=!1;previousTenant=null;rateLimitComponent;accounts=[];constructor(t,o,i,s,T,F,k,H){super(),this.formBuilder=t,this.route=o,this.router=i,this.rgwUserService=s,this.modalService=T,this.notificationService=F,this.actionLabels=k,this.rgwUserAccountService=H,this.resource="u\u017Cytkownik",this.subuserLabel="subuser",this.s3keyLabel="S3 Key",this.capabilityLabel="capability",this.editing=this.router.url.startsWith(`/rgw/user/${m.Qp.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.createForm()}createForm(){this.userForm=this.formBuilder.group({user_id:[null,[r.k0.required,r.k0.pattern(/^[a-zA-Z0-9!@#%^&*()._-]+$/)],this.editing?[]:[E.xQ.unique(this.rgwUserService.exists,this.rgwUserService,()=>this.userForm.getValue("tenant"))]],show_tenant:[this.editing],tenant:[null,[r.k0.pattern(/^[a-zA-Z0-9_]+$/)],this.editing?[]:[E.xQ.unique(this.rgwUserService.exists,this.rgwUserService,()=>this.userForm.getValue("user_id"),!0)]],display_name:[null,[r.k0.required,r.k0.pattern(/^[a-zA-Z0-9!@#%^&*()._ -]+$/)]],email:[null,[E.xQ.email],[E.xQ.unique(this.rgwUserService.emailExists,this.rgwUserService)]],account_id:[null,[this.tenantedAccountValidator.bind(this)]],account_root_user:[!1],max_buckets_mode:[1],max_buckets:[1e3,[E.xQ.requiredIf({max_buckets_mode:"1"}),E.xQ.number(!1)]],system:[!1],suspended:[!1],generate_key:[!0],access_key:[null,[E.xQ.requiredIf({generate_key:!1})]],secret_key:[null,[E.xQ.requiredIf({generate_key:!1})]],user_quota_enabled:[!1],user_quota_max_size_unlimited:[!0],user_quota_max_size:[null,[E.xQ.composeIf({user_quota_enabled:!0,user_quota_max_size_unlimited:!1},[r.k0.required,this.quotaMaxSizeValidator])]],user_quota_max_objects_unlimited:[!0],user_quota_max_objects:[null,[E.xQ.requiredIf({user_quota_enabled:!0,user_quota_max_objects_unlimited:!1})]],bucket_quota_enabled:[!1],bucket_quota_max_size_unlimited:[!0],bucket_quota_max_size:[null,[E.xQ.composeIf({bucket_quota_enabled:!0,bucket_quota_max_size_unlimited:!1},[r.k0.required,this.quotaMaxSizeValidator])]],bucket_quota_max_objects_unlimited:[!0],bucket_quota_max_objects:[null,[E.xQ.requiredIf({bucket_quota_enabled:!0,bucket_quota_max_objects_unlimited:!1})]]})}ngOnInit(){this.route.params.subscribe(t=>{if(!t.hasOwnProperty("uid"))return;const o=decodeURIComponent(t.uid),i=[];i.push(this.rgwUserService.get(o)),i.push(this.rgwUserService.getQuota(o)),i.push(this.rgwUserService.getUserRateLimit(o)),(0,v.p)(i).subscribe(s=>{const T=h().clone(this.userForm.value);let F=h().pick(s[0],h().keys(this.userForm.value));switch(F.max_buckets){case-1:F.max_buckets_mode=-1,F.max_buckets="";break;case 0:F.max_buckets_mode=0,F.max_buckets="";break;default:F.max_buckets_mode=1}["user","bucket"].forEach(q=>{const oe=s[1][q+"_quota"];F[q+"_quota_enabled"]=oe.enabled,oe.max_size<0?(F[q+"_quota_max_size_unlimited"]=!0,F[q+"_quota_max_size"]=null):(F[q+"_quota_max_size_unlimited"]=!1,F[q+"_quota_max_size"]=`${oe.max_size} B`),oe.max_objects<0?(F[q+"_quota_max_objects_unlimited"]=!0,F[q+"_quota_max_objects"]=null):(F[q+"_quota_max_objects_unlimited"]=!1,F[q+"_quota_max_objects"]=oe.max_objects)}),F=h().merge(T,F),this.userForm.setValue(F),this.userForm.getValue("account_id")?this.userForm.get("account_id").disable():this.userForm.get("account_id").setValue(null);const k="rgw"!==s[0].type;this.userForm.get("account_root_user").setValue(k),this.subusers=s[0].subusers,this.s3Keys=s[0].keys,this.swiftKeys=s[0].swift_keys;const H={"read, write":"*"};s[0].caps.forEach(q=>{q.perm in H&&(q.perm=H[q.perm])}),this.capabilities=s[0].caps,this.uid=this.getUID()},()=>{this.loadingError()})}),this.rgwUserAccountService.list(!0).subscribe(t=>{this.accounts=t,this.editing||this.userForm.get("account_id").reset(),this.loadingReady()},()=>{this.loadingError()}),this.userForm.get("account_id").valueChanges.subscribe(t=>{t?(this.userForm.get("display_name").setValidators([r.k0.pattern(/^[\w+=,.@-]+$/),r.k0.required]),this.userForm.get("display_name").updateValueAndValidity(),this.userForm.get("account_root_user").enable()):(this.userForm.get("display_name").setValidators([r.k0.pattern(/^[a-zA-Z0-9!@#%^&*()._ -]+$/),r.k0.required]),this.userForm.get("display_name").updateValueAndValidity(),this.userForm.get("account_root_user").disable())})}tenantedAccountValidator(t){if(this?.userForm?.getValue("tenant")&&this.accounts.length>0){const o=this.accounts.findIndex(i=>i.id===t.value);if(-1!==o)return this.userForm.getValue("tenant")!==this.accounts[o].tenant?{tenantedAccount:!0}:null}return null}rateLimitFormInit(t){this.userForm.addControl("rateLimit",t)}goToListView(){this.router.navigate(["/rgw/user"])}onSubmit(){let t;if(this.uid=this.getUID(),this.userForm.pristine&&this.rateLimitComponent.form.pristine)return void this.goToListView();if(this.editing){if(this._isGeneralDirty()){const i=this._getUpdateArgs();this.submitObservables.push(this.rgwUserService.update(this.uid,i))}t="Updated Object Gateway user '" + this.uid + "'"}else{const i=this._getCreateArgs();this.submitObservables.push(this.rgwUserService.create(i)),t="Created Object Gateway user '" + this.uid + "'"}if(this._isUserQuotaDirty()){const i=this._getUserQuotaArgs();this.submitObservables.push(this.rgwUserService.updateQuota(this.uid,i))}if(this._isBucketQuotaDirty()){const i=this._getBucketQuotaArgs();this.submitObservables.push(this.rgwUserService.updateQuota(this.uid,i))}const o=this.rateLimitComponent.getRateLimitFormValue();o&&this.submitObservables.push(this.rgwUserService.updateUserRateLimit(this.userForm.getValue("user_id"),o)),(0,Fo.x)(...this.submitObservables).subscribe({error:()=>{this.userForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.notificationService.show(f._.success,t),this.goToListView()}})}updateFieldsWhenTenanted(){this.showTenant=this.userForm.getValue("show_tenant"),this.showTenant?(this.userForm.get("user_id").markAsTouched(),this.previousTenant=this.userForm.get("tenant").value,this.userForm.get("tenant").patchValue(null)):(this.userForm.get("user_id").markAsUntouched(),this.userForm.get("tenant").patchValue(this.previousTenant))}getUID(){let t=this.userForm.getValue("user_id");const o=this.userForm?.getValue("tenant");return o&&o.length>0&&(t=`${this.userForm.getValue("tenant")}$${t}`),t}quotaMaxSizeValidator(t){return(new l.k).performValidation(t,"^(\\d+(\\.\\d+)?)\\s*(B|K(B|iB)?|M(B|iB)?|G(B|iB)?|T(B|iB)?)?$",{quotaMaxSize:!0},"quota")}setSubuser(t,o){const i={"full-control":"full","read-write":"readwrite"},s=this.getUID();this.submitObservables.push(this.rgwUserService.createSubuser(s,{subuser:t.id,access:t.permissions in i?i[t.permissions]:t.permissions,key_type:"swift",secret_key:t.secret_key,generate_secret:t.generate_secret?"true":"false"})),h().isNumber(o)?this.subusers[o]=t:(this.subusers.push(t),this.swiftKeys.push({user:t.id,secret_key:t.generate_secret?"Apply your changes first...":t.secret_key})),this.userForm.markAsDirty()}deleteSubuser(t){const o=this.subusers[t];this.submitObservables.push(this.rgwUserService.deleteSubuser(this.getUID(),o.id)),this.s3Keys=this.s3Keys.filter(i=>i.user!==o.id),this.swiftKeys=this.swiftKeys.filter(i=>i.user!==o.id),this.subusers.splice(t,1),this.userForm.markAsDirty()}setCapability(t,o){const i=this.getUID();if(h().isNumber(o)){const s=this.capabilities[o];this.submitObservables.push(this.rgwUserService.deleteCapability(i,s.type,s.perm)),this.submitObservables.push(this.rgwUserService.addCapability(i,t.type,t.perm)),this.capabilities[o]=t}else this.submitObservables.push(this.rgwUserService.addCapability(i,t.type,t.perm)),this.capabilities=[...this.capabilities,t];this.userForm.markAsDirty()}deleteCapability(t){const o=this.capabilities[t];this.submitObservables.push(this.rgwUserService.deleteCapability(this.getUID(),o.type,o.perm)),this.capabilities.splice(t,1),this.capabilities=[...this.capabilities],this.userForm.markAsDirty()}hasAllCapabilities(t){return!h().difference(Mo.getAll(),h().map(t,"type")).length}setS3Key(t,o){if(!h().isNumber(o)){const i=t.user.match(/([^:]+)(:(.+))?/),s=i[1],T={subuser:i[2]?i[3]:"",generate_key:t.generate_key?"true":"false"};"false"===T.generate_key&&(h().isNil(t.access_key)||(T.access_key=t.access_key),h().isNil(t.secret_key)||(T.secret_key=t.secret_key)),this.submitObservables.push(this.rgwUserService.addS3Key(s,T)),this.s3Keys.push({user:t.user,access_key:t.generate_key?"Apply your changes first...":t.access_key,secret_key:t.generate_key?"Apply your changes first...":t.secret_key})}this.userForm.markAsDirty()}deleteS3Key(t){const o=this.s3Keys[t];this.submitObservables.push(this.rgwUserService.deleteS3Key(this.getUID(),o.access_key)),this.s3Keys.splice(t,1),this.userForm.markAsDirty()}showSubuserModal(t){const o=this.getUID(),i=this.modalService.show(Qa);if(h().isNumber(t)){const s=this.subusers[t];i.setEditing(),i.setValues(o,s.id,s.permissions)}else i.setEditing(!1),i.setValues(o),i.setSubusers(this.subusers);i.submitAction.subscribe(s=>{this.setSubuser(s,t)})}showS3KeyModal(t){const o=this.modalService.show(ho);if(h().isNumber(t)){const i=this.s3Keys[t];o.setViewing(),o.setValues(i.user,i.access_key,i.secret_key)}else{const i=this._getS3KeyUserCandidates();o.setViewing(!1),o.setUserCandidates(i),o.submitAction.subscribe(s=>{this.setS3Key(s)})}}showSwiftKeyModal(t){const o=this.modalService.show(Go),i=this.swiftKeys[t];o.setValues(i.user,i.secret_key)}showCapabilityModal(t){const o=this.modalService.show(Oa);if(h().isNumber(t)){const i=this.capabilities[t];o.setEditing(),o.setValues(i.type,i.perm)}else o.setEditing(!1),o.setCapabilities(this.capabilities);o.submitAction.subscribe(i=>{this.setCapability(i,t)})}_isGeneralDirty(){return["display_name","email","max_buckets_mode","max_buckets","system","suspended","account_id","account_root_user"].some(t=>this.userForm.get(t).dirty)}_isUserQuotaDirty(){return["user_quota_enabled","user_quota_max_size_unlimited","user_quota_max_size","user_quota_max_objects_unlimited","user_quota_max_objects"].some(t=>this.userForm.get(t).dirty)}_isBucketQuotaDirty(){return["bucket_quota_enabled","bucket_quota_max_size_unlimited","bucket_quota_max_size","bucket_quota_max_objects_unlimited","bucket_quota_max_objects"].some(t=>this.userForm.get(t).dirty)}_getCreateArgs(){const t={uid:this.getUID(),account_id:this.userForm.getValue("account_id")?this.userForm.getValue("account_id"):"",account_root_user:this.userForm.getValue("account_root_user"),display_name:this.userForm.getValue("display_name"),system:this.userForm.getValue("system"),suspended:this.userForm.getValue("suspended"),email:"",max_buckets:this.userForm.getValue("max_buckets"),generate_key:this.userForm.getValue("generate_key"),access_key:"",secret_key:""},o=this.userForm.getValue("email");h().isString(o)&&o.length>0&&h().merge(t,{email:o}),this.userForm.getValue("generate_key")||h().merge(t,{generate_key:!1,access_key:this.userForm.getValue("access_key"),secret_key:this.userForm.getValue("secret_key")});const s=parseInt(this.userForm.getValue("max_buckets_mode"),10);return h().includes([-1,0],s)&&h().merge(t,{max_buckets:s}),t}_getUpdateArgs(){const t={},o=["display_name","email","max_buckets","system","suspended","account_root_user"];for(const s of o)t[s]=this.userForm.getValue(s);this.userForm.getValue("account_id")&&(t.account_id=this.userForm.getValue("account_id"));const i=parseInt(this.userForm.getValue("max_buckets_mode"),10);return h().includes([-1,0],i)&&(t.max_buckets=i),t}_getUserQuotaArgs(){const t={quota_type:"user",enabled:this.userForm.getValue("user_quota_enabled"),max_size_kb:-1,max_objects:-1};if(!this.userForm.getValue("user_quota_max_size_unlimited")){const o=(new l.k).toBytes(this.userForm.getValue("user_quota_max_size"));t.max_size_kb=(o/1024).toFixed(0)}return this.userForm.getValue("user_quota_max_objects_unlimited")||(t.max_objects=this.userForm.getValue("user_quota_max_objects")),t}_getBucketQuotaArgs(){const t={quota_type:"bucket",enabled:this.userForm.getValue("bucket_quota_enabled"),max_size_kb:-1,max_objects:-1};if(!this.userForm.getValue("bucket_quota_max_size_unlimited")){const o=(new l.k).toBytes(this.userForm.getValue("bucket_quota_max_size"));t.max_size_kb=(o/1024).toFixed(0)}return this.userForm.getValue("bucket_quota_max_objects_unlimited")||(t.max_objects=this.userForm.getValue("bucket_quota_max_objects")),t}_getS3KeyUserCandidates(){let t=[];const o=this.getUID();return h().isString(o)&&!h().isEmpty(o)&&t.push(o),this.subusers.forEach(i=>{t.push(i.id)}),this.s3Keys.forEach(i=>{t.push(i.user)}),t=h().uniq(t),t}onMaxBucketsModeChange(t){"1"===t&&(this.userForm.get("max_buckets").valid||this.userForm.patchValue({max_buckets:1e3}))}goToCreateAccountForm(){this.router.navigate(["rgw/accounts/create"])}static \u0275fac=function(o){return new(o||n)(e.rXU(u.$),e.rXU(I.nX),e.rXU(I.Ix),e.rXU(P.p),e.rXU(Mt.V),e.rXU(B.J),e.rXU(m.Ss),e.rXU(Kt))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-user-form"]],viewQuery:function(o,i){if(1&o&&e.GBs(Mn,5),2&o){let s;e.mGM(s=e.lsd())&&(i.rateLimitComponent=s.first)}},features:[e.Vt3],decls:1,vars:1,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de,pe,He,Ye,ze,Ve,Ne,fe,nt,ot,it,_t,st,rt,at,lt,ct,Qe,ut,dt,ft,Me,ie,sn,xt,rn,an,ln,cn,un,dn,fn,pn,gn,Tn,Rn,mn,En,Sn,Fn,kt,Cn,me;return t="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",o="User ID " + "\ufffd#11\ufffd\ufffd/#11\ufffd" + "",i="Full name " + "\ufffd#21\ufffd\ufffd/#21\ufffd" + "",s="Email address " + "\ufffd#27\ufffd\ufffd/#27\ufffd" + "",T="Wy\u0142\u0105czony",F="Nielimitowany",k="Zwyczaj",H="Suspended " + "\ufffd#42\ufffd" + "Suspending the user disables the user and subuser." + "\ufffd/#42\ufffd" + "",q="System user " + "\ufffd#46\ufffd" + "System users are distinct from regular users, they are used by the RGW service to perform administrative tasks, manage buckets and objects" + "\ufffd/#46\ufffd" + "",oe="Limit u\u017Cytkownika",le="Enabled ",Re="kontyngent wiadra",ce="Uaktywniony",Te="Link Account",se="\u0141adowanie...",Ce="-- Select an Account --",he="Only accounts with the same tenant name can be linked to a tenanted user.",ye="Account membership is permanent. Once added, users cannot be removed from their account.",$e="Ownership of all of the user's buckets will be transferred to the account.",Ge="Account Root user " + "\ufffd#3\ufffd" + "The account root user has full access to all resources and manages the account. It's recommended to use this account for management tasks only and create additional users with specific permissions. " + "\ufffd/#3\ufffd" + "",Ue="Pole jest wymagane.",xe="Warto\u015B\u0107 nie jest poprawna.",ke="Wybrane ID u\u017Cytkownika jest ju\u017C u\u017Cyte.",ve="Tenant " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",de="Warto\u015B\u0107 nie jest poprawna.",pe="The chosen user ID exists in this tenant.",He="Pole jest wymagane.",Ye="Warto\u015B\u0107 nie jest poprawna.",ze="Ten adres email nie jest poprawny.",Ve="Wybrany adres email jest ju\u017C u\u017Cyty.",Ne="The entered value must be >= 1.",fe="Pole jest wymagane.",nt="klucz S3",ot="Auto-generowany klucz",it="Access key " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",_t="Pole jest wymagane.",st="Secret key " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",rt="Pole jest wymagane.",at="pod-u\u017Cytkownicy",lt="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",ct="Nie ma pod-u\u017Cytkownik\xF3w.",Qe="Klucze",ut="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",dt="Nie ma kluczy.",ft="Nie ma kluczy.",Me="All capabilities are already added.",ie="Zdolno\u015Bci",sn="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",xt="Nie ma zdolno\u015Bci. ",rn="Type " + "\ufffd#5\ufffd\ufffd/#5\ufffd" + "",an="Permission " + "\ufffd#9\ufffd\ufffd/#9\ufffd" + "",ln="Nielimitowany rozmiar",cn="Maximum size " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",un="Pole jest wymagane.",dn="Warto\u015B\u0107 nie jest poprawna.",fn="Size must be a number or in a valid format. eg: 5 GiB",pn="Nielimitowane obiekty",gn="Pole jest wymagane.",Tn="Podana warto\u015B\u0107 musi by\u0107 >= 0",Rn="Nielimitowany rozmiar",mn="Maximum size " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",En="Pole jest wymagane.",Sn="Warto\u015B\u0107 nie jest poprawna.",Fn="Size must be a number or in a valid format. eg: 5 GiB",kt="Nielimitowane obiekty",Cn="Pole jest wymagane.",me="Podana warto\u015B\u0107 musi by\u0107 >= 0",[["frm","ngForm"],["userError",""],["displayNameError",""],["emailError",""],["accountError",""],["accountsHelper",""],["tenantError",""],["maxBucketsError",""],["accessKeyError",""],["secretKeyError",""],["quotaMaxSizeError",""],["maxObjectsError",""],["bucketQuotaMaxSizeError",""],["bucketMaxObjectsError",""],t,o,i,s,T,F,k,H,q,oe,le,Re,ce,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de,pe,He,Ye,ze,Ve,Ne,fe,nt,ot,it,_t,st,rt,at,lt,ct,Qe,ut,dt,ft,ie,sn,xt,rn,an,ln,cn,un,dn,fn,pn,gn,Tn,Rn,mn,En,Sn,Fn,kt,Cn,me,["cdsCol","",3,"columnNumbers",4,"cdFormLoading"],["cdsCol","",3,"columnNumbers"],["novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["for","user_id","cdRequiredField","User ID",3,"invalid","invalidText"],["cdsText","","formControlName","user_id","name","user_id","id","user_id",3,"invalid","readonly","autofocus"],["formControlName","show_tenant","id","show_tenant",3,"checkedChange","readonly"],["class","form-item",4,"ngIf"],["for","display_name","cdRequiredField","Full name",3,"invalid","invalidText"],["cdsText","","formControlName","display_name","name","display_name","id","display_name",3,"invalid"],["for","email",3,"invalid","invalidText"],["cdsText","","formControlName","email","name","email","id","email",3,"invalid"],["label","Maximum buckets","for","max_buckets_mode","formControlName","max_buckets_mode","id","max_buckets_mode",3,"valueChange"],["value","-1"],["value","0"],["value","1"],["formControlName","suspended","id","suspended"],["formControlName","system","id","system"],[4,"ngIf"],[1,"cd-header"],["formControlName","user_quota_enabled","id","user_quota_enabled"],["formControlName","bucket_quota_enabled","id","bucket_quota_enabled"],[3,"rateLimitFormGroup","type","isEditing","id"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["label",Te,"id","link_account","for","link_account","formControlName","account_id",3,"invalid","invalidText","helperText"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"value"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],["formControlName","account_root_user","id","account_root_user"],["for","tenant",3,"invalid","invalidText"],["cdsText","","formControlName","tenant","name","tenant","id","tenant","autofocus","",3,"invalid","readonly"],["for","max_buckets","formControlName","max_buckets","id","max_buckets","min","1",3,"invalid","invalidText"],["formControlName","generate_key","id","generate_key"],["class","form-item form-item-append",4,"ngIf"],[1,"form-item","form-item-append"],["for","access_key","cdRequiredField","Access key",3,"invalid","invalidText"],["cdsPassword","","type","password","formControlName","access_key","name","access_key","id","access_key",3,"invalid"],["source","access_key",1,"mt-4"],["for","secret","cdRequiredField","Secret key",3,"invalid","invalidText"],["cdsPassword","","type","password","formControlName","secret_key","name","secret_key","id","secret_key",3,"invalid"],["source","secret_key",1,"mt-4"],["class","no-border",4,"ngIf"],[4,"ngFor","ngForOf"],["cdsRow","",1,"form-item"],["cdsCol",""],["cdsButton","tertiary","type","button",1,"tc_addSubuserButton",3,"click"],["cdsIcon","add","size","32",1,"cds--btn__icon"],[1,"no-border"],[1,"form-text","text-muted"],["cdsRow","",1,"form-item-append",3,"ngClass"],["cdsText","","readonly","",3,"value"],["kind","tertiary","size","md","title","Edit",1,"mt-4","tc_showSubuserButton",3,"click"],["cdsIcon","edit","size","32",1,"cds--btn__icon"],["kind","danger","size","md","title","Delete",1,"mt-4","tc_deleteSubuserButton",3,"click"],["cdsIcon","trash-can","size","32",1,"cds--btn__icon"],["type","button","cdsButton","tertiary",1,"tc_addS3KeyButton",3,"click"],["cdsRow","",1,"form-item-append"],["kind","tertiary","size","md","title","Show",1,"mt-2","tc_showS3KeyButton",3,"click"],["cdsIcon","view","size","16",1,"cds--btn__icon"],["kind","danger","size","md","title","Delete",1,"mt-2","tc_deleteS3KeyButton",3,"click"],["kind","tertiary","size","md","title","Show",1,"mt-2","tc_showSwiftKeyButton",3,"click"],["type","button","cdsButton","tertiary","ngbTooltip",Me,"triggers","pointerenter:pointerleave",1,"tc_addCapButton",3,"click","disabled","disableTooltip"],["kind","tertiary","size","md","title","Edit",1,"mt-4","tc_editCapButton",3,"click"],["kind","danger","size","md","title","Delete",1,"mt-4","tc_deleteCapButton",3,"click"],["formControlName","user_quota_max_size_unlimited","id","user_quota_max_size_unlimited"],["for","user_quota_max_size","cdRequiredField","Maximum size",3,"invalid","invalidText"],["cdsText","","formControlName","user_quota_max_size","name","user_quota_max_size","id","user_quota_max_size","cdDimlessBinary","",3,"invalid"],["formControlName","user_quota_max_objects_unlimited","id","user_quota_max_objects_unlimited"],["for","user_quota_max_objects","formControlName","user_quota_max_objects","id","user_quota_max_objects","label","Maximum Objects","cdRequiredField","Maximum Objects",3,"min","invalid","invalidText"],["formControlName","bucket_quota_max_size_unlimited","id","bucket_quota_max_size_unlimited"],["for","bucket_quota_max_size","cdRequiredField","Maximum size",3,"invalid","invalidText"],["cdsText","","formControlName","bucket_quota_max_size","name","bucket_quota_max_size","id","bucket_quota_max_size","cdDimlessBinary","",3,"invalid"],["formControlName","bucket_quota_max_objects_unlimited","id","bucket_quota_max_objects_unlimited"],["for","bucket_quota_max_objects","formControlName","bucket_quota_max_objects","id","bucket_quota_max_objects","label","Maximum objects","cdRequiredField","Maximum objects",3,"min","invalid","invalidText"]]},template:function(o,i){1&o&&e.DNE(0,fc,76,45,"div",79),2&o&&e.Y8G("cdFormLoading",i.loading)},dependencies:[R.YU,R.Sq,R.bT,vt.N,We.e,V.O,zn.e,Ae.B,Ln.Y,Xt.G,Oe.S,Xe.E,qe.P,r.qT,r.xH,r.y7,r.me,r.BC,r.cb,r.j4,r.JD,b.md,et.ee,et.YP,mt.$n,mt.K0,jt.LJ,Ie.Zt,Ie.LP,Ie.ks,Ie.yA,be.Sc,Ze.l6,Ze.c$,De.jM,Mn,R.PV,pt.r,el.N]})}return n})();var Dn=g(96343),bt=g(2148),pc=g(47782),gc=g(72358);const Tc=["accessKeyTpl"],Rc=["secretKeyTpl"],mc=()=>({read:!0});function Ec(n,_){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"legend"),e.pXf(2,8),e.k0s(),e.j41(3,"cd-table",36),e.bIt("updateSelection",function(i){e.eBV(t);const s=e.XpG(3);return e.Njj(s.updateKeysSelection(i))}),e.nrm(4,"cd-table-actions",37),e.k0s()()}if(2&n){const t=e.XpG(3);e.R7$(3),e.Y8G("data",t.keys)("columns",t.keysColumns),e.R7$(),e.Y8G("permission",e.lJ4(5,mc))("selection",t.selection)("tableActions",t.tableAction)}}function Sc(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",35),e.pXf(2,9),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(4),e.JRh(t.user.email)}}function Fc(n,_){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.R7$(),e.Lme(" ",t.id," (",t.permissions,") ")}}function Cc(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",35),e.pXf(2,10),e.k0s(),e.j41(3,"td"),e.DNE(4,Fc,2,2,"div",38),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(4),e.Y8G("ngForOf",t.user.subusers)}}function Mc(n,_){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.R7$(),e.Lme("",t.type," (",t.perm,")")}}function hc(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",35),e.pXf(2,11),e.k0s(),e.j41(3,"td"),e.DNE(4,Mc,2,2,"div",38),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(4),e.Y8G("ngForOf",t.user.caps)}}function Gc(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",35),e.pXf(2,12),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"join"),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(4),e.JRh(e.bMT(5,1,t.user.mfa_ids))}}function Pc(n,_){if(1&n&&(e.qex(0),e.j41(1,"legend"),e.pXf(2,13),e.k0s(),e.j41(3,"table",39)(4,"tbody")(5,"tr")(6,"td",33),e.pXf(7,14),e.k0s(),e.j41(8,"td",34),e.EFF(9),e.k0s()(),e.j41(10,"tr")(11,"td",33),e.pXf(12,15),e.k0s(),e.j41(13,"td",34),e.EFF(14),e.k0s()(),e.j41(15,"tr")(16,"td",33),e.pXf(17,16),e.k0s(),e.j41(18,"td",34),e.EFF(19),e.k0s()(),e.j41(20,"tr")(21,"td",33),e.pXf(22,17),e.k0s(),e.j41(23,"td",34),e.pXf(24,18),e.k0s()()()(),e.bVm()),2&n){const t=e.XpG(3);e.R7$(9),e.JRh(null==t.selection.account?null:t.selection.account.id),e.R7$(5),e.JRh(null==t.selection.account?null:t.selection.account.name),e.R7$(5),e.JRh((null==t.selection.account?null:t.selection.account.tenant)||"-"),e.R7$(5),e.uP7("root"===(null==t.user?null:t.user.type)?"Account root user":"rgw user"),e.nnv(24)}}function Ic(n,_){1&n&&(e.j41(0,"td"),e.EFF(1,"-"),e.k0s())}function Oc(n,_){1&n&&(e.j41(0,"td"),e.pXf(1,23),e.k0s())}function Nc(n,_){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.nI1(2,"dimlessBinary"),e.k0s()),2&n){const t=e.XpG(4);e.R7$(),e.SpI(" ",e.bMT(2,1,t.user.user_quota.max_size)," ")}}function bc(n,_){1&n&&(e.j41(0,"td"),e.EFF(1,"-"),e.k0s())}function Ac(n,_){1&n&&(e.j41(0,"td"),e.pXf(1,24),e.k0s())}function Lc(n,_){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const t=e.XpG(4);e.R7$(),e.SpI(" ",t.user.user_quota.max_objects," ")}}function Dc(n,_){if(1&n&&(e.j41(0,"div")(1,"legend"),e.pXf(2,19),e.k0s(),e.j41(3,"table",32)(4,"tbody")(5,"tr")(6,"td",33),e.pXf(7,20),e.k0s(),e.j41(8,"td",34),e.EFF(9),e.nI1(10,"booleanText"),e.k0s()(),e.j41(11,"tr")(12,"td",35),e.pXf(13,21),e.k0s(),e.DNE(14,Ic,2,0,"td",31)(15,Oc,2,0,"td",31)(16,Nc,3,3,"td",31),e.k0s(),e.j41(17,"tr")(18,"td",35),e.pXf(19,22),e.k0s(),e.DNE(20,bc,2,0,"td",31)(21,Ac,2,0,"td",31)(22,Lc,2,1,"td",31),e.k0s()()()()),2&n){const t=e.XpG(3);e.R7$(9),e.JRh(e.bMT(10,7,t.user.user_quota.enabled)),e.R7$(5),e.Y8G("ngIf",!t.user.user_quota.enabled),e.R7$(),e.Y8G("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_size<=-1),e.R7$(),e.Y8G("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_size>-1),e.R7$(4),e.Y8G("ngIf",!t.user.user_quota.enabled),e.R7$(),e.Y8G("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_objects<=-1),e.R7$(),e.Y8G("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_objects>-1)}}function yc(n,_){1&n&&(e.j41(0,"td"),e.EFF(1,"-"),e.k0s())}function $c(n,_){1&n&&(e.j41(0,"td"),e.pXf(1,29),e.k0s())}function vc(n,_){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.nI1(2,"dimlessBinary"),e.k0s()),2&n){const t=e.XpG(4);e.R7$(),e.SpI(" ",e.bMT(2,1,t.user.bucket_quota.max_size)," ")}}function Wc(n,_){1&n&&(e.j41(0,"td"),e.EFF(1,"-"),e.k0s())}function wc(n,_){1&n&&(e.j41(0,"td"),e.pXf(1,30),e.k0s())}function Uc(n,_){if(1&n&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&n){const t=e.XpG(4);e.R7$(),e.SpI(" ",t.user.bucket_quota.max_objects," ")}}function xc(n,_){if(1&n&&(e.j41(0,"div")(1,"legend"),e.pXf(2,25),e.k0s(),e.j41(3,"table",32)(4,"tbody")(5,"tr")(6,"td",33),e.pXf(7,26),e.k0s(),e.j41(8,"td",34),e.EFF(9),e.nI1(10,"booleanText"),e.k0s()(),e.j41(11,"tr")(12,"td",35),e.pXf(13,27),e.k0s(),e.DNE(14,yc,2,0,"td",31)(15,$c,2,0,"td",31)(16,vc,3,3,"td",31),e.k0s(),e.j41(17,"tr")(18,"td",35),e.pXf(19,28),e.k0s(),e.DNE(20,Wc,2,0,"td",31)(21,wc,2,0,"td",31)(22,Uc,2,1,"td",31),e.k0s()()()()),2&n){const t=e.XpG(3);e.R7$(9),e.JRh(e.bMT(10,7,t.user.bucket_quota.enabled)),e.R7$(5),e.Y8G("ngIf",!t.user.bucket_quota.enabled),e.R7$(),e.Y8G("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_size<=-1),e.R7$(),e.Y8G("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_size>-1),e.R7$(4),e.Y8G("ngIf",!t.user.bucket_quota.enabled),e.R7$(),e.Y8G("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_objects<=-1),e.R7$(),e.Y8G("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_objects>-1)}}function kc(n,_){if(1&n&&(e.j41(0,"div"),e.nrm(1,"cd-rgw-rate-limit-details",40),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.Y8G("rateLimitConfig",t.user.user_ratelimit)("type","user")}}function Xc(n,_){if(1&n&&(e.j41(0,"div"),e.DNE(1,Ec,5,6,"div",31),e.j41(2,"legend"),e.pXf(3,0),e.k0s(),e.j41(4,"table",32)(5,"tbody")(6,"tr")(7,"td",33),e.pXf(8,1),e.k0s(),e.j41(9,"td",34),e.EFF(10),e.k0s()(),e.j41(11,"tr")(12,"td",33),e.pXf(13,2),e.k0s(),e.j41(14,"td",34),e.EFF(15),e.k0s()(),e.j41(16,"tr")(17,"td",33),e.pXf(18,3),e.k0s(),e.j41(19,"td",34),e.EFF(20),e.k0s()(),e.j41(21,"tr")(22,"td",35),e.pXf(23,4),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s()(),e.DNE(26,Sc,5,1,"tr",31),e.j41(27,"tr")(28,"td",35),e.pXf(29,5),e.k0s(),e.j41(30,"td"),e.EFF(31),e.nI1(32,"booleanText"),e.k0s()(),e.j41(33,"tr")(34,"td",35),e.pXf(35,6),e.k0s(),e.j41(36,"td"),e.EFF(37),e.nI1(38,"booleanText"),e.k0s()(),e.j41(39,"tr")(40,"td",35),e.pXf(41,7),e.k0s(),e.j41(42,"td"),e.EFF(43),e.nI1(44,"map"),e.k0s()(),e.DNE(45,Cc,5,1,"tr",31)(46,hc,5,1,"tr",31)(47,Gc,6,3,"tr",31),e.k0s()(),e.DNE(48,Pc,25,4,"ng-container",31)(49,Dc,23,9,"div",31)(50,xc,23,9,"div",31)(51,kc,2,2,"div",31),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.keys.length),e.R7$(9),e.JRh(t.user.tenant),e.R7$(5),e.JRh(t.user.uid),e.R7$(5),e.JRh(t.user.uid),e.R7$(5),e.JRh(t.user.display_name),e.R7$(),e.Y8G("ngIf",null==t.user.email?null:t.user.email.length),e.R7$(5),e.JRh(e.bMT(32,16,t.user.suspended)),e.R7$(6),e.JRh(e.bMT(38,18,t.user.system)),e.R7$(6),e.JRh(e.i5U(44,20,t.user.max_buckets,t.maxBucketsMap)),e.R7$(2),e.Y8G("ngIf",t.user.subusers&&t.user.subusers.length),e.R7$(),e.Y8G("ngIf",t.user.caps&&t.user.caps.length),e.R7$(),e.Y8G("ngIf",null==t.user.mfa_ids?null:t.user.mfa_ids.length),e.R7$(),e.Y8G("ngIf",t.selection.account&&(null==t.selection.account?null:t.selection.account.id)),e.R7$(),e.Y8G("ngIf",t.user.user_quota),e.R7$(),e.Y8G("ngIf",t.user.bucket_quota),e.R7$(),e.Y8G("ngIf",t.user.user_ratelimit)}}function jc(n,_){if(1&n&&(e.qex(0),e.DNE(1,Xc,52,23,"div",31),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.user)}}let Bc=(()=>{class n{rgwUserService;cdsModalService;accessKeyTpl;secretKeyTpl;selection;user;maxBucketsMap;keys=[];keysColumns=[];keysSelection=new gt.y;tableAction=[];permissions;icons=S.F;constructor(t,o){this.rgwUserService=t,this.cdsModalService=o}ngOnInit(){this.keysColumns=[{name:"Nazwa u\u017Cytkownika",prop:"username",flexGrow:1},{name:"Typ",prop:"type",flexGrow:1}],this.maxBucketsMap={"-1":"Wy\u0142\u0105czony",0:"Nielimitowany"}}ngOnChanges(){this.tableAction=[{name:"Poka\u017C",permission:"read",click:()=>this.showKeyModal(),icon:S.F.show}],this.selection&&(this.user=this.selection,this.user.subusers=h().sortBy(this.user.subusers,"id"),this.user.caps=h().sortBy(this.user.caps,"type"),this.rgwUserService.getQuota(this.user.uid).subscribe(t=>{h().extend(this.user,t)}),this.rgwUserService.getUserRateLimit(this.user.uid).subscribe(t=>{h().extend(this.user,t)}),this.keys=[],this.user.keys&&this.user.keys.forEach(t=>{this.keys.push({id:this.keys.length+1,type:"S3",username:t.user,ref:t})}),this.user.swift_keys&&this.user.swift_keys.forEach(t=>{this.keys.push({id:this.keys.length+1,type:"Swift",username:t.user,ref:t})}),this.keys=h().sortBy(this.keys,"user"))}updateKeysSelection(t){this.keysSelection=t}showKeyModal(){const t=this.keysSelection.first(),o=this.cdsModalService.show("S3"===t.type?ho:Go);switch(t.type){case"S3":o.setViewing(),o.setValues(t.ref.user,t.ref.access_key,t.ref.secret_key);break;case"Swift":o.setValues(t.ref.user,t.ref.secret_key)}}static \u0275fac=function(o){return new(o||n)(e.rXU(P.p),e.rXU(Mt.V))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-user-details"]],viewQuery:function(o,i){if(1&o&&(e.GBs(Tc,5),e.GBs(Rc,5)),2&o){let s;e.mGM(s=e.lsd())&&(i.accessKeyTpl=s.first),e.mGM(s=e.lsd())&&(i.secretKeyTpl=s.first)}},inputs:{selection:"selection"},features:[e.OA$],decls:1,vars:1,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de,pe,He,Ye,ze,Ve,Ne;return t="Szczeg\xF3\u0142y",o="Tenant",i="User ID",s="Nazwa u\u017Cytkownika",T="Pe\u0142ne imi\u0119 ",F="Zawieszony",k="System user",H="Maksimum wiader",q="Klucze",oe="Adres email",le="pod-u\u017Cytkownicy",Re="Zdolno\u015Bci",ce="MFAs(Id)",Te="Account Details",se="Account ID",Ce="Nazwa",he="Tenant",ye="User type",$e="" + "\ufffd0\ufffd" + "",Ge="Limit u\u017Cytkownika",Ue="Uaktywniony",xe="Maksymalny rozmiar",ke="Maksimum obiekt\xF3w",ve=" Unlimited ",de=" Unlimited ",pe="kontyngent wiadra",He="Uaktywniony",Ye="Maksymalny rozmiar",ze="Maksimum obiekt\xF3w",Ve=" Unlimited ",Ne=" Unlimited ",[t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de,pe,He,Ye,ze,Ve,Ne,[4,"ngIf"],[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold","w-25"],[1,"w-75"],[1,"bold"],["columnMode","flex","selectionType","single","forceIdentifier","true",3,"updateSelection","data","columns"],[1,"table-actions",3,"permission","selection","tableActions"],[4,"ngFor","ngForOf"],["id","accountsDetails",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[3,"rateLimitConfig","type"]]},template:function(o,i){1&o&&e.DNE(0,jc,2,1,"ng-container",31),2&o&&e.Y8G("ngIf",i.selection)},dependencies:[R.Sq,R.bT,Je.O,Ot.j,mo,An.s,Jt.l,pc.r,gc.r]})}return n})();const yn=()=>({exact:!0});let No=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-user-tabs"]],decls:10,vars:6,consts:()=>{let t,o,i;return t="U\u017Cytkownicy",o="Accounts",i="Role",[t,o,i,[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/rgw/user","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/rgw/accounts","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/rgw/roles","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"]]},template:function(o,i){1&o&&(e.j41(0,"ul",3)(1,"li",4)(2,"a",5),e.pXf(3,0),e.k0s()(),e.j41(4,"li",4)(5,"a",6),e.pXf(6,1),e.k0s()(),e.j41(7,"li",4)(8,"a",7),e.pXf(9,2),e.k0s()()()),2&o&&(e.R7$(2),e.Y8G("routerLinkActiveOptions",e.lJ4(3,yn)),e.R7$(3),e.Y8G("routerLinkActiveOptions",e.lJ4(4,yn)),e.R7$(3),e.Y8G("routerLinkActiveOptions",e.lJ4(5,yn)))},dependencies:[I.Wk,I.wQ]})}return n})();const zc=["userSizeTpl"],Hc=["userObjectTpl"],Yc=["accountTmpl"];function Vc(n,_){if(1&n&&e.nrm(0,"cd-rgw-user-details",12),2&n){const t=e.XpG();e.Y8G("selection",t.expandedRow)}}function Zc(n,_){if(1&n&&e.nrm(0,"cd-usage-bar",14),2&n){const t=e.XpG().data.row;e.Y8G("total",t.user_quota.max_size)("used",t.stats.size_actual)}}function Kc(n,_){1&n&&e.pXf(0,6)}function qc(n,_){if(1&n&&e.DNE(0,Zc,1,2,"cd-usage-bar",13)(1,Kc,1,0,"ng-template",null,4,e.C5r),2&n){const t=_.data.row,o=e.sdS(2);e.Y8G("ngIf",t.user_quota.max_size>0&&t.user_quota.enabled)("ngIfElse",o)}}function Jc(n,_){if(1&n&&e.nrm(0,"cd-usage-bar",16),2&n){const t=e.XpG().data.row;e.Y8G("total",t.user_quota.max_objects)("used",t.stats.num_objects)("isBinary",!1)}}function Qc(n,_){1&n&&e.pXf(0,7)}function eu(n,_){if(1&n&&e.DNE(0,Jc,1,3,"cd-usage-bar",15)(1,Qc,1,0,"ng-template",null,5,e.C5r),2&n){const t=_.data.row,o=e.sdS(2);e.Y8G("ngIf",t.user_quota.max_objects>0&&t.user_quota.enabled)("ngIfElse",o)}}function tu(n,_){if(1&n&&(e.j41(0,"cds-tooltip",17),e.pXf(1,8),e.k0s()),2&n){const t=_.data.row;e.Y8G("description",null!=t.account&&t.account.name&&"root"===t.type?"Account root user":"")("align","top"),e.R7$(),e.uP7(null==t.account?null:t.account.name),e.nnv(1)}}let ou=(()=>{class n extends Dt.D{authStorageService;rgwUserService;modalService;urlBuilder;actionLabels;ngZone;rgwUserAccountService;table;userSizeTpl;userObjectTpl;accountTmpl;permission;tableActions;columns=[];users=[];userAccounts;selection=new gt.y;userDataSubject=new Dn.B7;staleTimeout;constructor(t,o,i,s,T,F,k){super(F),this.authStorageService=t,this.rgwUserService=o,this.modalService=i,this.urlBuilder=s,this.actionLabels=T,this.ngZone=F,this.rgwUserAccountService=k}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:"Nazwa u\u017Cytkownika",prop:"uid",flexGrow:1},{name:"Tenant",prop:"tenant",flexGrow:1},{name:"Account name",prop:"account.name",flexGrow:1,cellTemplate:this.accountTmpl},{name:"Pe\u0142ne imi\u0119 ",prop:"display_name",flexGrow:1},{name:"Adres email",prop:"email",flexGrow:1},{name:"Zawieszony",prop:"suspended",flexGrow:1,cellClass:"text-center",cellTransformation:bt.x.checkIcon},{name:"Max. wiader ",prop:"max_buckets",flexGrow:1,cellTransformation:bt.x.map,customTemplateConfig:{"-1":"Wy\u0142\u0105czony",0:"Nielimitowany"}},{name:"Capacity Limit %",prop:"size_usage",cellTemplate:this.userSizeTpl,flexGrow:.8},{name:"Object Limit %",prop:"object_usage",cellTemplate:this.userObjectTpl,flexGrow:.8}],this.userDataSubject.pipe((0,M.n)(T=>this.rgwUserAccountService.list(!0))).subscribe(T=>{this.userAccounts=T,this.mapUsersWithAccount()});const t=()=>this.selection.first()&&`${encodeURIComponent(this.selection.first().uid)}`;this.tableActions=[{permission:"create",icon:S.F.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE,canBePrimary:T=>!T.hasSelection},{permission:"update",icon:S.F.edit,routerLink:()=>this.urlBuilder.getEdit(t()),name:this.actionLabels.EDIT},{permission:"delete",icon:S.F.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE}],this.setTableRefreshTimeout()}getUserList(t){this.setTableRefreshTimeout(),this.rgwUserService.list().subscribe(o=>{this.users=o,this.userDataSubject.next(o)},()=>{t.error()})}mapUsersWithAccount(){this.users=this.users.map(t=>({account:this.userAccounts.find(i=>i.id===t.account_id)||{name:""},...t}))}updateSelection(t){this.selection=t}deleteAction(){this.modalService.show(Lt.D,{impact:Vn.r.high,itemDescription:this.selection.hasSingleSelection?"u\u017Cytkownik":"u\u017Cytkownicy",itemNames:this.selection.selected.map(t=>t.uid),submitActionObservable:()=>new Bt.c(t=>{(0,v.p)(this.selection.selected.map(o=>this.rgwUserService.delete(o.uid))).subscribe({error:o=>{t.error(o),this.table.refreshBtn()},complete:()=>{t.complete(),this.table.refreshBtn()}})})})}static \u0275fac=function(o){return new(o||n)(e.rXU(Et.v),e.rXU(P.p),e.rXU(Mt.V),e.rXU(Tt.E),e.rXU(m.Ss),e.rXU(e.SKi),e.rXU(Kt))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-user-list"]],viewQuery:function(o,i){if(1&o&&(e.GBs(Je.O,7),e.GBs(zc,7),e.GBs(Hc,7),e.GBs(Yc,7)),2&o){let s;e.mGM(s=e.lsd())&&(i.table=s.first),e.mGM(s=e.lsd())&&(i.userSizeTpl=s.first),e.mGM(s=e.lsd())&&(i.userObjectTpl=s.first),e.mGM(s=e.lsd())&&(i.accountTmpl=s.first)}},features:[e.Jv_([{provide:Tt.E,useValue:new Tt.E("rgw/user")}]),e.Vt3],decls:11,vars:8,consts:()=>{let t,o,i;return t="No Limit",o="No Limit",i="" + "\ufffd0\ufffd" + "",[["table",""],["userSizeTpl",""],["userObjectTpl",""],["accountTmpl",""],["noSizeQuota",""],["noObjectQuota",""],t,o,i,["columnMode","flex","selectionType","single","identifier","uid",3,"setExpandedRow","updateSelection","fetchData","autoReload","data","columns","hasDetails","status"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"],[3,"total","used",4,"ngIf","ngIfElse"],[3,"total","used"],[3,"total","used","isBinary",4,"ngIf","ngIfElse"],[3,"total","used","isBinary"],[3,"description","align"]]},template:function(o,i){if(1&o){const s=e.RV6();e.nrm(0,"cd-rgw-user-tabs"),e.j41(1,"cd-table",9,0),e.bIt("setExpandedRow",function(F){return e.eBV(s),e.Njj(i.setExpandedRow(F))})("updateSelection",function(F){return e.eBV(s),e.Njj(i.updateSelection(F))})("fetchData",function(F){return e.eBV(s),e.Njj(i.getUserList(F))}),e.nrm(3,"cd-table-actions",10),e.DNE(4,Vc,1,1,"cd-rgw-user-details",11),e.k0s(),e.DNE(5,qc,3,2,"ng-template",null,1,e.C5r)(7,eu,3,2,"ng-template",null,2,e.C5r)(9,tu,2,3,"ng-template",null,3,e.C5r)}2&o&&(e.R7$(),e.Y8G("autoReload",!1)("data",i.users)("columns",i.columns)("hasDetails",!0)("status",i.tableStatus),e.R7$(2),e.Y8G("permission",i.permission)("selection",i.selection)("tableActions",i.tableActions))},dependencies:[R.bT,fo.o,Je.O,Ot.j,$t.N,hn.m_,Bc,No]})}return n})();var Yt=g(19830),Vt=g(43342),tt=g(58384),Le=g(24192),tn=g(77867),wt=g(39403),Pt=g(69081),It=g(10142),St=g(78708);function iu(n,_){1&n&&(e.j41(0,"span",42),e.pXf(1,9),e.k0s())}function _u(n,_){1&n&&(e.j41(0,"span",42),e.pXf(1,10),e.k0s())}function su(n,_){1&n&&(e.j41(0,"span",42),e.pXf(1,11),e.k0s())}function ru(n,_){1&n&&(e.j41(0,"span",42),e.pXf(1,12),e.k0s())}function au(n,_){1&n&&(e.j41(0,"span",42),e.pXf(1,13),e.k0s())}function lu(n,_){1&n&&(e.j41(0,"span",42),e.pXf(1,14),e.k0s())}function cu(n,_){1&n&&(e.j41(0,"span",42),e.pXf(1,15),e.k0s())}function uu(n,_){1&n&&(e.j41(0,"span",42),e.pXf(1,16),e.k0s())}function du(n,_){1&n&&(e.j41(0,"span",42),e.pXf(1,17),e.k0s())}function fu(n,_){1&n&&(e.j41(0,"span",42),e.pXf(1,18),e.k0s())}function pu(n,_){1&n&&(e.j41(0,"span",42),e.pXf(1,19),e.k0s())}let gu=(()=>{class n{activeModal;actionLabels;rgwMultisiteService;rgwZoneService;notificationService;rgwZonegroupService;rgwRealmService;rgwDaemonService;modalService;submitAction=new e.bkB;multisiteMigrateForm;zoneNames;realmList;multisiteInfo=[];realmNames;zonegroupList;zonegroupNames;zoneList;realm;zonegroup;zone;newZonegroupName;newZoneName;bsModalRef;users;constructor(t,o,i,s,T,F,k,H,q){this.activeModal=t,this.actionLabels=o,this.rgwMultisiteService=i,this.rgwZoneService=s,this.notificationService=T,this.rgwZonegroupService=F,this.rgwRealmService=k,this.rgwDaemonService=H,this.modalService=q,this.createForm()}createForm(){this.multisiteMigrateForm=new tt.$({realmName:new r.hs(null,{validators:[r.k0.required,E.xQ.custom("uniqueName",t=>this.realmNames&&-1!==this.zoneNames.indexOf(t))]}),zonegroupName:new r.hs(null,{validators:[r.k0.required,E.xQ.custom("uniqueName",t=>this.zonegroupNames&&-1!==this.zoneNames.indexOf(t))]}),zoneName:new r.hs(null,{validators:[r.k0.required,E.xQ.custom("uniqueName",t=>this.zoneNames&&-1!==this.zoneNames.indexOf(t))]}),zone_endpoints:new r.hs(null,{validators:[E.xQ.url,r.k0.required]}),zonegroup_endpoints:new r.hs(null,{validators:[E.xQ.url,r.k0.required]}),username:new r.hs(null,{validators:[r.k0.required]})})}ngOnInit(){this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.realmNames=this.realmList.map(t=>t.name),this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zonegroupNames=this.zonegroupList.map(t=>t.name),this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zoneNames=this.zoneList.map(t=>t.name)}submit(){const t=this.multisiteMigrateForm.value;this.realm=new Le.SX,this.realm.name=t.realmName,this.zonegroup=new Le.Oe,this.zonegroup.name=t.zonegroupName,this.zonegroup.endpoints=t.zonegroup_endpoints,this.zone=new Le.$H,this.zone.name=t.zoneName,this.zone.endpoints=t.zone_endpoints,this.rgwMultisiteService.migrate(this.realm,this.zonegroup,this.zone,t.username).subscribe(()=>{this.rgwMultisiteService.setRestartGatewayMessage(!1),this.notificationService.show(f._.success,"Migration done successfully"),this.submitAction.emit(),this.activeModal.close()},()=>{this.notificationService.show(f._.error,"Migration failed")})}static \u0275fac=function(o){return new(o||n)(e.rXU(b.Lw),e.rXU(m.Ss),e.rXU(y.A),e.rXU(Vt.w),e.rXU(B.J),e.rXU(ht.Z),e.rXU(Yt.$),e.rXU(Q.y),e.rXU(tn.B))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-multisite-migrate"]],outputs:{submitAction:"submitAction"},decls:55,vars:15,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e;return t="Migrate Single Site to Multi-site " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + "Migrate from a single-site deployment with a default zone group and zone to a multi-site system" + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",o="Realm Name",i="Rename default zone group",s="Zone group Endpoints ",T="Rename default zone",F="Zone Endpoints ",k="Nazwa u\u017Cytkownika",H="Specify the username for the system user. This user will be created automatically as part of the process.",q="Pole jest wymagane.",oe="The chosen realm name is already in use.",le="Pole jest wymagane.",Re="The chosen zone group name is already in use.",ce="Pole jest wymagane.",Te="Please enter a valid URL.",se="Pole jest wymagane.",Ce="The chosen zone name is already in use.",he="Pole jest wymagane.",ye="Please enter a valid URL.",$e="Pole jest wymagane.",[["formDir","ngForm"],t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","multisiteMigrateForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","realmName",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["type","text","placeholder","Realm name...","id","realmName","name","realmName","formControlName","realmName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","zonegroupName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone group name...","id","zonegroupName","name","zonegroupName","formControlName","zonegroupName",1,"form-control"],["for","zonegroup_endpoints",1,"cd-col-form-label","required"],["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zonegroup_endpoints","name","zonegroup_endpoints","formControlName","zonegroup_endpoints",1,"form-control"],["for","zoneName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],["for","zone_endpoints",1,"cd-col-form-label","required"],["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zone_endpoints","name","zone_endpoints","formControlName","zone_endpoints",1,"form-control"],["for","username",1,"cd-col-form-label","required"],["type","text","placeholder","username","id","username","name","username","formControlName","username",1,"form-control"],[1,"modal-footer"],[3,"submitActionEvent","submitText","form"],[1,"invalid-feedback"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"cd-modal",20),e.qex(1,21),e.PLo(2,1),e.j41(3,"cd-helper"),e.nrm(4,"span"),e.k0s(),e.YFu(),e.bVm(),e.qex(5,22),e.j41(6,"form",23,0)(8,"div",24)(9,"div",25)(10,"label",26),e.pXf(11,2),e.k0s(),e.j41(12,"div",27),e.nrm(13,"input",28),e.DNE(14,iu,2,0,"span",29)(15,_u,2,0,"span",29),e.k0s()(),e.j41(16,"div",25)(17,"label",30),e.pXf(18,3),e.k0s(),e.j41(19,"div",27),e.nrm(20,"input",31),e.DNE(21,su,2,0,"span",29)(22,ru,2,0,"span",29),e.k0s()(),e.j41(23,"div",25)(24,"label",32),e.pXf(25,4),e.k0s(),e.j41(26,"div",27),e.nrm(27,"input",33),e.DNE(28,au,2,0,"span",29)(29,lu,2,0,"span",29),e.k0s()(),e.j41(30,"div",25)(31,"label",34),e.pXf(32,5),e.k0s(),e.j41(33,"div",27),e.nrm(34,"input",35),e.DNE(35,cu,2,0,"span",29)(36,uu,2,0,"span",29),e.k0s()(),e.j41(37,"div",25)(38,"label",36),e.pXf(39,6),e.k0s(),e.j41(40,"div",27),e.nrm(41,"input",37),e.DNE(42,du,2,0,"span",29)(43,fu,2,0,"span",29),e.k0s()(),e.j41(44,"div",25)(45,"label",38),e.pXf(46,7),e.k0s(),e.j41(47,"div",27),e.nrm(48,"input",39),e.j41(49,"cd-help-text")(50,"span"),e.pXf(51,8),e.k0s()(),e.DNE(52,pu,2,0,"span",29),e.k0s()()(),e.j41(53,"div",40)(54,"cd-form-button-panel",41),e.bIt("submitActionEvent",function(){return e.eBV(s),e.Njj(i.submit())}),e.k0s()()(),e.bVm(),e.k0s()}if(2&o){const s=e.sdS(7);e.Y8G("modalRef",i.activeModal),e.R7$(6),e.Y8G("formGroup",i.multisiteMigrateForm),e.R7$(8),e.Y8G("ngIf",i.multisiteMigrateForm.showError("realmName",s,"required")),e.R7$(),e.Y8G("ngIf",i.multisiteMigrateForm.showError("realmName",s,"uniqueName")),e.R7$(6),e.Y8G("ngIf",i.multisiteMigrateForm.showError("zonegroupName",s,"required")),e.R7$(),e.Y8G("ngIf",i.multisiteMigrateForm.showError("zonegroupName",s,"uniqueName")),e.R7$(6),e.Y8G("ngIf",i.multisiteMigrateForm.showError("zonegroup_endpoints",s,"required")),e.R7$(),e.Y8G("ngIf",i.multisiteMigrateForm.showError("zonegroup_endpoints",s,"invalidURL")),e.R7$(6),e.Y8G("ngIf",i.multisiteMigrateForm.showError("zoneName",s,"required")),e.R7$(),e.Y8G("ngIf",i.multisiteMigrateForm.showError("zoneName",s,"uniqueName")),e.R7$(6),e.Y8G("ngIf",i.multisiteMigrateForm.showError("zone_endpoints",s,"required")),e.R7$(),e.Y8G("ngIf",i.multisiteMigrateForm.showError("zone_endpoints",s,"invalidURL")),e.R7$(9),e.Y8G("ngIf",i.multisiteMigrateForm.showError("username",s,"required")),e.R7$(2),e.Y8G("submitText",i.actionLabels.MIGRATE+" to Multi-site")("form",i.multisiteMigrateForm)}},dependencies:[R.bT,wt.m,Pt.z,We.e,V.O,Oe.S,It.a,St.C,Xe.E,r.qT,r.me,r.BC,r.cb,r.j4,r.JD]})}return n})();var bo=g(59870);function Tu(n,_){if(1&n&&(e.j41(0,"strong",22),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.R7$(),e.JRh(t)}}function Ru(n,_){1&n&&(e.j41(0,"div",23)(1,"cd-alert-panel",24),e.pXf(2,5),e.k0s()())}function mu(n,_){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"label",14),e.PLo(2,2),e.nrm(3,"strong"),e.YFu(),e.k0s(),e.j41(4,"label",15),e.pXf(5,3),e.k0s(),e.DNE(6,Tu,2,1,"strong",16),e.j41(7,"div",17)(8,"div",18)(9,"input",19),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.showDangerText())}),e.k0s(),e.j41(10,"label",20),e.pXf(11,4),e.k0s()(),e.DNE(12,Ru,3,0,"div",21),e.k0s(),e.bVm()}if(2&n){const t=e.XpG();e.R7$(3),e.uP7(null==t.zone?null:t.zone.name),e.nnv(2),e.R7$(3),e.Y8G("ngForOf",t.includedPools),e.R7$(6),e.Y8G("ngIf",t.displayText)}}let Eu=(()=>{class n{activeModal;actionLabels;notificationService;rgwZoneService;poolService;zoneData$;poolList$;zone;zoneForm;displayText=!1;includedPools=new Set;constructor(t,o,i,s,T){this.activeModal=t,this.actionLabels=o,this.notificationService=i,this.rgwZoneService=s,this.poolService=T,this.createForm()}ngOnInit(){this.zoneData$=this.rgwZoneService.get(this.zone),this.poolList$=this.poolService.getList()}ngAfterViewInit(){this.updateIncludedPools()}createForm(){this.zoneForm=new tt.$({deletePools:new r.hs(!1)})}submit(){this.rgwZoneService.delete(this.zone.name,this.zoneForm.value.deletePools,this.includedPools,this.zone.parent).subscribe(()=>{this.notificationService.show(f._.success,"Zone: '" + this.zone.name + "' deleted successfully"),this.activeModal.close()},()=>{this.zoneForm.setErrors({cdSubmitButton:!0})})}showDangerText(){this.displayText=!this.displayText}updateIncludedPools(){!this.zoneData$||!this.poolList$||this.zoneData$.subscribe(t=>{this.poolList$.subscribe(o=>{for(const i of o)for(const s of Object.values(t))if("string"==typeof s&&s.includes(i.pool_name))this.includedPools.add(i.pool_name);else if(Array.isArray(s)&&s[0].val)for(const T of s){const F=T.val;F.storage_classes.STANDARD.data_pool===i.pool_name&&this.includedPools.add(F.storage_classes.STANDARD.data_pool),F.data_extra_pool===i.pool_name&&this.includedPools.add(F.data_extra_pool),F.index_pool===i.pool_name&&this.includedPools.add(F.index_pool)}})})}static \u0275fac=function(o){return new(o||n)(e.rXU(b.Lw),e.rXU(m.Ss),e.rXU(B.J),e.rXU(Vt.w),e.rXU(bo.m))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-multisite-zone-deletion-form"]],decls:12,vars:6,consts:()=>{let t,o,i,s,T,F;return t="Delete Zone",o=" This will delete your " + "\ufffd#8\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#8\ufffd" + " Zone. ",i=" Do you want to delete the associated pools with the " + "\ufffd#3\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#3\ufffd" + " Zone?",s=" This will delete the following pools and any data stored in these pools:",T="Yes, I want to delete the pools.",F=" This will delete all the data in the pools! ",[t,o,i,s,T,F,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","zoneForm","novalidate","",3,"formGroup"],[1,"modal-body","ms-4"],[4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[1,"mt-3"],[1,"mb-4"],["class","block",4,"ngFor","ngForOf"],[1,"form-group"],[1,"custom-control","custom-checkbox","mt-2"],["type","checkbox","name","deletePools","id","deletePools","formControlName","deletePools",1,"custom-control-input",3,"change"],["for","deletePools",1,"custom-control-label"],["class","me-4",4,"ngIf"],[1,"block"],[1,"me-4"],["type","danger"]]},template:function(o,i){1&o&&(e.j41(0,"cd-modal",6),e.qex(1,7),e.pXf(2,0),e.bVm(),e.qex(3,8),e.j41(4,"form",9)(5,"div",10)(6,"label"),e.PLo(7,1),e.nrm(8,"strong"),e.YFu(),e.k0s(),e.DNE(9,mu,13,3,"ng-container",11),e.k0s(),e.j41(10,"div",12)(11,"cd-form-button-panel",13),e.bIt("submitActionEvent",function(){return i.submit()}),e.k0s()()(),e.bVm(),e.k0s()),2&o&&(e.Y8G("modalRef",i.activeModal),e.R7$(4),e.Y8G("formGroup",i.zoneForm),e.R7$(4),e.uP7(null==i.zone?null:i.zone.name),e.nnv(7),e.R7$(),e.Y8G("ngIf",i.includedPools.size),e.R7$(2),e.Y8G("form",i.zoneForm)("submitText",i.actionLabels.DELETE))},dependencies:[R.Sq,R.bT,Pt.z,N.m,We.e,Oe.S,It.a,St.C,Xe.E,r.qT,r.Zm,r.BC,r.cb,r.j4,r.JD],styles:[".block[_ngcontent-%COMP%]{display:block}#scroll[_ngcontent-%COMP%]{height:100%;max-height:10rem;overflow:auto}"]})}return n})();function Su(n,_){1&n&&(e.qex(0),e.j41(1,"label"),e.pXf(2,4),e.k0s(),e.bVm())}function Fu(n,_){if(1&n&&(e.j41(0,"strong",25),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.R7$(),e.JRh(t)}}function Cu(n,_){if(1&n&&(e.j41(0,"strong",25),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.R7$(),e.JRh(t)}}function Mu(n,_){if(1&n&&(e.qex(0),e.j41(1,"strong",17),e.EFF(2,"Pools:"),e.k0s(),e.j41(3,"div",26),e.DNE(4,Cu,2,1,"strong",19),e.k0s(),e.bVm()),2&n){const t=e.XpG(2);e.R7$(4),e.Y8G("ngForOf",t.includedPools)}}function hu(n,_){1&n&&(e.qex(0),e.j41(1,"label",27),e.pXf(2,5),e.k0s(),e.bVm())}function Gu(n,_){1&n&&(e.j41(0,"div",28)(1,"cd-alert-panel",29),e.pXf(2,6),e.k0s()())}function Pu(n,_){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"label",16),e.PLo(2,3),e.nrm(3,"strong"),e.YFu(),e.k0s(),e.DNE(4,Su,3,0,"ng-container",13),e.j41(5,"strong",17),e.EFF(6,"Zones:"),e.k0s(),e.j41(7,"div",18),e.DNE(8,Fu,2,1,"strong",19),e.k0s(),e.DNE(9,Mu,5,1,"ng-container",13),e.j41(10,"div",20)(11,"div",21)(12,"input",22),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.showDangerText())}),e.k0s(),e.DNE(13,hu,3,0,"ng-container",23),e.k0s(),e.DNE(14,Gu,3,0,"div",24),e.k0s(),e.bVm()}if(2&n){const t=e.XpG(),o=e.sdS(13);e.R7$(3),e.uP7(null==t.zonegroup?null:t.zonegroup.name),e.nnv(2),e.R7$(),e.Y8G("ngIf",t.includedPools.size>0),e.R7$(4),e.Y8G("ngForOf",t.zonesList),e.R7$(),e.Y8G("ngIf",t.includedPools.size>0),e.R7$(4),e.Y8G("ngIf",t.includedPools.size>0)("ngIfElse",o),e.R7$(),e.Y8G("ngIf",t.displayText)}}function Iu(n,_){1&n&&(e.j41(0,"label",27),e.pXf(1,7),e.k0s())}let Ou=(()=>{class n{activeModal;actionLabels;notificationService;rgwZonegroupService;poolService;rgwZoneService;zonegroupData$;poolList$;zonesPools=[];zonegroup;zonesList=[];zonegroupForm;displayText=!1;includedPools=new Set;constructor(t,o,i,s,T,F){this.activeModal=t,this.actionLabels=o,this.notificationService=i,this.rgwZonegroupService=s,this.poolService=T,this.rgwZoneService=F,this.createForm()}ngOnInit(){this.zonegroupData$=this.rgwZonegroupService.get(this.zonegroup),this.poolList$=this.poolService.getList()}ngAfterViewInit(){this.updateIncludedPools()}createForm(){this.zonegroupForm=new tt.$({deletePools:new r.hs(!1)})}submit(){this.rgwZonegroupService.delete(this.zonegroup.name,this.zonegroupForm.value.deletePools,this.includedPools).subscribe(()=>{this.notificationService.show(f._.success,"Zonegroup: '" + this.zonegroup.name + "' deleted successfully"),this.activeModal.close()})}showDangerText(){this.includedPools.size>0&&(this.displayText=!this.displayText)}updateIncludedPools(){!this.zonegroupData$||!this.poolList$||this.zonegroupData$.subscribe(t=>{for(const o of t.zones)this.zonesList.push(o.name),this.rgwZoneService.get(o).subscribe(i=>{this.poolList$.subscribe(s=>{for(const T of Object.values(i))for(const F of s)if("string"==typeof T&&T.includes(F.pool_name))this.includedPools.add(F.pool_name);else if(Array.isArray(T)&&T[0].val)for(const k of T){const H=k.val;H.storage_classes.STANDARD.data_pool===F.pool_name&&this.includedPools.add(H.storage_classes.STANDARD.data_pool),H.data_extra_pool===F.pool_name&&this.includedPools.add(H.data_extra_pool),H.index_pool===F.pool_name&&this.includedPools.add(H.index_pool)}})})})}static \u0275fac=function(o){return new(o||n)(e.rXU(b.Lw),e.rXU(m.Ss),e.rXU(B.J),e.rXU(ht.Z),e.rXU(bo.m),e.rXU(Vt.w))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-multisite-zonegroup-deletion-form"]],decls:14,vars:6,consts:()=>{let t,o,i,s,T,F,k;return t="Delete Zone Group",o=" This will delete your " + "\ufffd#8\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#8\ufffd" + " Zone Group. ",i=" Do you want to delete the associated zones and pools with the " + "\ufffd#3\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#3\ufffd" + " Zone Group?",s=" This will delete the following:",T="Yes, I want to delete the zones and their pools.",F=" This will delete all the data in the pools! ",k="Yes, I want to delete the zones.",[["noPoolsConfirmation",""],t,o,i,s,T,F,k,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","zonegroupForm","novalidate","",3,"formGroup"],[1,"modal-body","ms-4"],[4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[1,"mt-3"],[1,"mt-3","mb-2","h5","block"],["id","scroll"],["class","block",4,"ngFor","ngForOf"],[1,"form-group"],[1,"custom-control","custom-checkbox","mt-2"],["type","checkbox","name","deletePools","id","deletePools","formControlName","deletePools",1,"custom-control-input",3,"change"],[4,"ngIf","ngIfElse"],["class","me-4",4,"ngIf"],[1,"block"],["id","scroll",1,"mb-2"],["for","deletePools",1,"custom-control-label"],[1,"me-4"],["type","danger"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"cd-modal",8),e.qex(1,9),e.pXf(2,1),e.bVm(),e.qex(3,10),e.j41(4,"form",11)(5,"div",12)(6,"label"),e.PLo(7,2),e.nrm(8,"strong"),e.YFu(),e.k0s(),e.DNE(9,Pu,15,7,"ng-container",13),e.k0s(),e.j41(10,"div",14)(11,"cd-form-button-panel",15),e.bIt("submitActionEvent",function(){return e.eBV(s),e.Njj(i.submit())}),e.k0s()()(),e.bVm(),e.k0s(),e.DNE(12,Iu,2,0,"ng-template",null,0,e.C5r)}2&o&&(e.Y8G("modalRef",i.activeModal),e.R7$(4),e.Y8G("formGroup",i.zonegroupForm),e.R7$(4),e.uP7(null==i.zonegroup?null:i.zonegroup.name),e.nnv(7),e.R7$(),e.Y8G("ngIf",i.zonesList.length>0),e.R7$(2),e.Y8G("form",i.zonegroupForm)("submitText",i.actionLabels.DELETE))},dependencies:[R.Sq,R.bT,Pt.z,N.m,We.e,Oe.S,It.a,St.C,Xe.E,r.qT,r.Zm,r.BC,r.cb,r.j4,r.JD],styles:[".block[_ngcontent-%COMP%]{display:block}#scroll[_ngcontent-%COMP%]{height:100%;max-height:10rem;overflow:auto}"]})}return n})();var Nu=g(33117);const bu=(n,_,t)=>[n,_,t];function Au(n,_){if(1&n&&(e.j41(0,"span",13),e.nrm(1,"i",14),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.sMw(1,bu,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function Lu(n,_){if(1&n&&(e.PLo(0,2,1),e.j41(1,"div"),e.nrm(2,"b"),e.k0s(),e.YFu()),2&n){const t=_.$implicit;e.R7$(2),e.uP7(t.realm)(t.token),e.nnv(0)}}function Du(n,_){if(1&n&&(e.j41(0,"cd-alert-panel",18),e.PLo(1,2),e.DNE(2,Lu,3,2,"div",17),e.YFu(),e.k0s()),2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",t.realms)}}function yu(n,_){1&n&&e.nrm(0,"hr")}function $u(n,_){if(1&n&&(e.j41(0,"div")(1,"div",19)(2,"label",20),e.pXf(3,3),e.k0s(),e.j41(4,"div",21),e.nrm(5,"input",22),e.k0s()(),e.j41(6,"div",19)(7,"label",23),e.pXf(8,4),e.k0s(),e.j41(9,"div",21),e.nrm(10,"input",24)(11,"cd-copy-2-clipboard-button",25),e.k0s(),e.DNE(12,yu,1,0,"hr",26),e.k0s()()),2&n){const t=_.$implicit,o=e.XpG(2);e.R7$(5),e.FS9("value",t.realm),e.R7$(5),e.FS9("value",t.token),e.R7$(),e.FS9("source",t.token),e.Y8G("byId",!1),e.R7$(),e.Y8G("ngIf",o.realms.length>1)}}function vu(n,_){if(1&n&&(e.j41(0,"div",15),e.DNE(1,Du,3,1,"cd-alert-panel",16)(2,$u,13,5,"div",17),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.tokenValid),e.R7$(),e.Y8G("ngForOf",t.realms)}}let Wu=(()=>{class n{activeModal;rgwRealmService;actionLabels;notificationService;changeDetectorRef;exportTokenForm;realms;realmList;multisiteInfo;tokenValid=!1;loading=!0;icons=S.F;constructor(t,o,i,s,T){this.activeModal=t,this.rgwRealmService=o,this.actionLabels=i,this.notificationService=s,this.changeDetectorRef=T,this.createForm()}createForm(){this.exportTokenForm=new tt.$({})}onSubmit(){this.activeModal.close()}ngOnInit(){this.rgwRealmService.getRealmTokens().subscribe(t=>{this.loading=!1,this.realms=t;var o=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$");this.realms.forEach(i=>{this.tokenValid=!!o.test(i.token)})})}ngAfterViewChecked(){this.changeDetectorRef.detectChanges()}static \u0275fac=function(o){return new(o||n)(e.rXU(b.Lw),e.rXU(Yt.$),e.rXU(m.Ss),e.rXU(B.J),e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-multisite-export"]],decls:10,vars:4,consts:()=>{let t,o,i,s;return t="Export Multi-site Realm Token",o="" + "\ufffd*2:1\ufffd\ufffd#1:1\ufffd" + "" + "\ufffd#2:1\ufffd" + "" + "\ufffd0:1\ufffd" + "" + "\ufffd/#2:1\ufffd" + " - " + "\ufffd1:1\ufffd" + " " + "\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd" + "",i="Realm Name ",s="Token ",[["frm","ngForm"],t,o,i,s,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","exportTokenForm",3,"formGroup"],["class","d-flex justify-content-center",4,"ngIf"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["aria-label","Close",1,"m-2","float-end",3,"backAction"],[1,"d-flex","justify-content-center"],[3,"ngClass"],[1,"modal-body"],["type","warning","class","mx-3",4,"ngIf"],[4,"ngFor","ngForOf"],["type","warning",1,"mx-3"],[1,"form-group","row"],["for","realmName",1,"cd-col-form-label"],[1,"cd-col-form-input"],["id","realmName","name","realmName","type","text","readonly","",3,"value"],["for","token",1,"cd-col-form-label"],["id","realmToken","name","realmToken","type","text","readonly","",1,"me-2","mb-4",3,"value"],[3,"source","byId"],[4,"ngIf"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"cd-modal",5),e.qex(1,6),e.pXf(2,1),e.bVm(),e.qex(3,7),e.j41(4,"form",8,0),e.DNE(6,Au,2,5,"span",9)(7,vu,3,2,"div",10),e.j41(8,"div",11)(9,"cd-back-button",12),e.bIt("backAction",function(){return e.eBV(s),e.Njj(i.activeModal.close())}),e.k0s()()(),e.bVm(),e.k0s()}2&o&&(e.Y8G("modalRef",i.activeModal),e.R7$(4),e.Y8G("formGroup",i.exportTokenForm),e.R7$(2),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",!i.loading))},dependencies:[R.YU,R.Sq,R.bT,Nu.X,Pt.z,N.m,vt.N,Oe.S,St.C,Xe.E,r.qT,r.cb,r.j4]})}return n})();var $n=g(66668),wu=g(7466),Zt=g(31345),Uu=g(8373),Ao=g(36995),Lo=g(22789),xu=g(10683),nn=g(48693);function ku(n,_){1&n&&(e.j41(0,"span",46),e.pXf(1,8),e.k0s())}function Xu(n,_){1&n&&(e.j41(0,"span",46),e.pXf(1,9),e.k0s())}function ju(n,_){1&n&&(e.j41(0,"span",46),e.pXf(1,10),e.k0s())}function Bu(n,_){1&n&&(e.j41(0,"div",31)(1,"label",47),e.pXf(2,11),e.k0s(),e.j41(3,"div",33)(4,"select",48)(5,"option",49),e.pXf(6,12),e.k0s(),e.j41(7,"option",50),e.pXf(8,13),e.k0s()()()())}function zu(n,_){1&n&&(e.j41(0,"span",46),e.pXf(1,15),e.k0s())}function Hu(n,_){if(1&n){const t=e.RV6();e.j41(0,"div",31)(1,"label",51),e.pXf(2,14),e.k0s(),e.j41(3,"div",33)(4,"input",52),e.bIt("focus",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.labelFocus.next(i.target.value))})("click",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.labelClick.next(i.target.value))}),e.k0s(),e.DNE(5,zu,2,0,"span",35),e.k0s()()}if(2&n){const t=e.XpG(),o=e.sdS(5);e.R7$(4),e.Y8G("ngbTypeahead",t.searchLabels),e.R7$(),e.Y8G("ngIf",t.importTokenForm.showError("label",o,"required"))}}function Yu(n,_){if(1&n&&(e.j41(0,"div",31)(1,"label",53),e.pXf(2,16),e.k0s(),e.j41(3,"div",33),e.nrm(4,"cd-select-badges",54),e.k0s()()),2&n){const t=e.XpG();e.R7$(4),e.Y8G("data",t.importTokenForm.controls.hosts.value)("options",t.hosts.options)("messages",t.hosts.messages)}}function Vu(n,_){1&n&&(e.j41(0,"span",46),e.pXf(1,19),e.k0s())}function Zu(n,_){1&n&&(e.j41(0,"span",46),e.pXf(1,20),e.k0s())}function Ku(n,_){if(1&n&&(e.j41(0,"div",31)(1,"label",55)(2,"span"),e.pXf(3,17),e.k0s(),e.j41(4,"cd-helper"),e.pXf(5,18),e.k0s()(),e.j41(6,"div",33),e.nrm(7,"input",56),e.DNE(8,Vu,2,0,"span",35)(9,Zu,2,0,"span",35),e.k0s()()),2&n){const t=e.XpG(),o=e.sdS(5);e.R7$(8),e.Y8G("ngIf",t.importTokenForm.showError("count",o,"min")),e.R7$(),e.Y8G("ngIf",t.importTokenForm.showError("count",o,"pattern"))}}function qu(n,_){1&n&&(e.j41(0,"span",46),e.pXf(1,22),e.k0s())}function Ju(n,_){1&n&&(e.j41(0,"span",46),e.pXf(1,23),e.k0s())}function Qu(n,_){1&n&&(e.j41(0,"span",46),e.pXf(1,24),e.k0s())}function ed(n,_){if(1&n&&(e.qex(0),e.j41(1,"div",31)(2,"label",57),e.pXf(3,21),e.k0s(),e.j41(4,"div",33),e.nrm(5,"input",58),e.DNE(6,qu,2,0,"span",35)(7,Ju,2,0,"span",35)(8,Qu,2,0,"span",35),e.k0s()(),e.bVm()),2&n){const t=e.XpG(),o=e.sdS(5);e.R7$(6),e.Y8G("ngIf",t.importTokenForm.showError("rgw_frontend_port",o,"pattern")),e.R7$(),e.Y8G("ngIf",t.importTokenForm.showError("rgw_frontend_port",o,"min")),e.R7$(),e.Y8G("ngIf",t.importTokenForm.showError("rgw_frontend_port",o,"max"))}}let td=(()=>{class n{activeModal;hostService;rgwRealmService;actionLabels;notificationService;endpoints=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{2,4}$/;ipv4Rgx=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i;ipv6Rgx=/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i;typeahead;importTokenForm;multisiteInfo=[];zoneList=[];zoneNames;hosts;labels;labelClick=new Dn.B7;labelFocus=new Dn.B7;constructor(t,o,i,s,T){this.activeModal=t,this.hostService=o,this.rgwRealmService=i,this.actionLabels=s,this.notificationService=T,this.hosts={options:[],messages:new $n.z({empty:"There are no hosts.",filter:"Filter hosts"})},this.createForm()}ngOnInit(){this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zoneNames=this.zoneList.map(t=>t.name),this.hostService.getAllHosts().subscribe(t=>{const o=[];h().forEach(t,i=>{if(h().get(i,"sources.orchestrator",!1)){const s=new Zt.O(!1,h().get(i,"hostname"),"");o.push(s)}}),this.hosts.options=[...o]}),this.hostService.getLabels().subscribe(t=>{this.labels=t})}createForm(){this.importTokenForm=new tt.$({realmToken:new r.MJ("",{validators:[r.k0.required]}),zoneName:new r.MJ(null,{validators:[r.k0.required,E.xQ.custom("uniqueName",t=>this.zoneNames&&-1!==this.zoneNames.indexOf(t))]}),rgw_frontend_port:new r.MJ(null,{validators:[r.k0.required,r.k0.pattern("^[0-9]*$")]}),placement:new r.MJ("hosts"),label:new r.MJ(null,[E.xQ.requiredIf({placement:"label",unmanaged:!1})]),hosts:new r.MJ([]),count:new r.MJ(null,[E.xQ.number(!1)]),unmanaged:new r.MJ(!1)})}onSubmit(){const t=this.importTokenForm.value,o={placement:{}};if(!t.unmanaged){switch(t.placement){case"hosts":t.hosts.length>0&&(o.placement.hosts=t.hosts);break;case"label":o.placement.label=t.label}h().isNumber(t.count)&&t.count>0&&(o.placement.count=t.count)}this.rgwRealmService.importRealmToken(t.realmToken,t.zoneName,t.rgw_frontend_port,o).subscribe(()=>{this.notificationService.show(f._.success,"Realm token import successfull"),this.activeModal.close()},()=>{this.importTokenForm.setErrors({cdSubmitButton:!0})})}searchLabels=t=>(0,Uu.h)(t.pipe((0,Ao.B)(200),(0,Lo.F)()),this.labelFocus,this.labelClick.pipe((0,xu.p)(()=>!this.typeahead.isPopupOpen()))).pipe((0,a.T)(o=>this.labels.filter(i=>i.toLowerCase().indexOf(o.toLowerCase())>-1).slice(0,10)));static \u0275fac=function(o){return new(o||n)(e.rXU(b.Lw),e.rXU(wu.I),e.rXU(Yt.$),e.rXU(m.Ss),e.rXU(B.J))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-multisite-import"]],viewQuery:function(o,i){if(1&o&&e.GBs(b.$n,5),2&o){let s;e.mGM(s=e.lsd())&&(i.typeahead=s.first)}},decls:47,vars:12,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve;return t="Import Multi-site Token",o="Zone Details",i="Token ",s="Secondary Zone Name",T="Service Details",F="Unmanaged",k="If set to true, the orchestrator will not start nor stop any daemon associated with this service. Placement and all other properties will be ignored.",H="Pole jest wymagane.",q="Pole jest wymagane.",oe="The chosen zone name is already in use.",le="Placement",Re="Hosty",ce="Label",Te="Label",se="Pole jest wymagane.",Ce="Hosty",he="Count",ye="Only that number of daemons will be created.",$e="The value must be at least 1.",Ge="Podana warto\u015B\u0107 musi by\u0107 liczb\u0105",Ue="Port",xe="Podana warto\u015B\u0107 musi by\u0107 liczb\u0105",ke="The value must be at least 1.",ve="The value cannot exceed 65535.",[["frm","ngForm"],t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","importTokenForm",3,"formGroup"],[1,"modal-body"],["type","info","spacingClass","mb-3"],[1,"form-group","row"],["for","realmToken",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["id","realmToken","name","realmToken","type","text","formControlName","realmToken",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","zoneName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","unmanaged","type","checkbox","formControlName","unmanaged",1,"custom-control-input"],["for","unmanaged",1,"custom-control-label"],["class","form-group row",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","submitText","form"],[1,"invalid-feedback"],["for","placement",1,"cd-col-form-label"],["id","placement","formControlName","placement",1,"form-select"],["value","hosts"],["value","label"],["for","label",1,"cd-col-form-label"],["id","label","type","text","formControlName","label",1,"form-control",3,"focus","click","ngbTypeahead"],["for","hosts",1,"cd-col-form-label"],["id","hosts",3,"data","options","messages"],["for","count",1,"cd-col-form-label"],["id","count","type","number","formControlName","count","min","1",1,"form-control"],["for","rgw_frontend_port",1,"cd-col-form-label"],["id","rgw_frontend_port","type","number","formControlName","rgw_frontend_port","min","1","max","65535",1,"form-control"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"cd-modal",25),e.qex(1,26),e.pXf(2,1),e.bVm(),e.qex(3,27),e.j41(4,"form",28,0)(6,"div",29)(7,"cd-alert-panel",30)(8,"ul")(9,"li"),e.EFF(10,"This feature allows you to configure a connection between your primary and secondary Ceph clusters for data replication. By importing a token, you establish a link between the clusters, enabling data synchronization."),e.k0s(),e.j41(11,"li"),e.EFF(12,"To obtain the token, generate it from your primary Ceph cluster. This token includes encoded information about the primary cluster's endpoint, access key, and secret key."),e.k0s(),e.j41(13,"li"),e.EFF(14,"The secondary zone represents the destination cluster where your data will be replicated."),e.k0s()()(),e.j41(15,"legend"),e.pXf(16,2),e.k0s(),e.j41(17,"div",31)(18,"label",32),e.pXf(19,3),e.k0s(),e.j41(20,"div",33),e.nrm(21,"input",34),e.DNE(22,ku,2,0,"span",35),e.k0s()(),e.j41(23,"div",31)(24,"label",36),e.pXf(25,4),e.k0s(),e.j41(26,"div",33),e.nrm(27,"input",37),e.DNE(28,Xu,2,0,"span",35)(29,ju,2,0,"span",35),e.k0s()(),e.j41(30,"legend"),e.pXf(31,5),e.k0s(),e.j41(32,"div",31)(33,"div",38)(34,"div",39),e.nrm(35,"input",40),e.j41(36,"label",41),e.pXf(37,6),e.k0s(),e.j41(38,"cd-helper"),e.pXf(39,7),e.k0s()()()(),e.DNE(40,Bu,9,0,"div",42)(41,Hu,6,2,"div",42)(42,Yu,5,3,"div",42)(43,Ku,10,2,"div",42)(44,ed,9,3,"ng-container",43),e.k0s(),e.j41(45,"div",44)(46,"cd-form-button-panel",45),e.bIt("submitActionEvent",function(){return e.eBV(s),e.Njj(i.onSubmit())}),e.k0s()()(),e.bVm(),e.k0s()}if(2&o){const s=e.sdS(5);e.Y8G("modalRef",i.activeModal),e.R7$(4),e.Y8G("formGroup",i.importTokenForm),e.R7$(18),e.Y8G("ngIf",i.importTokenForm.showError("realmToken",s,"required")),e.R7$(6),e.Y8G("ngIf",i.importTokenForm.showError("zoneName",s,"required")),e.R7$(),e.Y8G("ngIf",i.importTokenForm.showError("zoneName",s,"uniqueName")),e.R7$(11),e.Y8G("ngIf",!i.importTokenForm.controls.unmanaged.value),e.R7$(),e.Y8G("ngIf",!i.importTokenForm.controls.unmanaged.value&&"label"===i.importTokenForm.controls.placement.value),e.R7$(),e.Y8G("ngIf",!i.importTokenForm.controls.unmanaged.value&&"hosts"===i.importTokenForm.controls.placement.value),e.R7$(),e.Y8G("ngIf",!i.importTokenForm.controls.unmanaged.value),e.R7$(),e.Y8G("ngIf",!i.importTokenForm.controls.unmanaged.value),e.R7$(2),e.Y8G("submitText",i.actionLabels.IMPORT)("form",i.importTokenForm)}},dependencies:[R.bT,wt.m,nn.U,Pt.z,N.m,We.e,Oe.S,It.a,St.C,Xe.E,r.qT,r.xH,r.y7,r.me,r.Q0,r.Zm,r.wz,r.BC,r.cb,r.VZ,r.zX,r.j4,r.JD,b.$n,Ze.c$]})}return n})();var nd=g(16615);function od(n,_){1&n&&(e.j41(0,"span",19),e.pXf(1,5),e.k0s())}function id(n,_){1&n&&(e.j41(0,"span",19),e.pXf(1,6),e.k0s())}function _d(n,_){if(1&n&&e.DNE(0,od,2,0,"span",18)(1,id,2,0,"span",18),2&n){const t=e.XpG(),o=e.sdS(8);e.Y8G("ngIf",t.multisiteRealmForm.showError("realmName",o,"required")),e.R7$(),e.Y8G("ngIf",t.multisiteRealmForm.showError("realmName",o,"uniqueName"))}}function sd(n,_){1&n&&(e.PLo(0,4,1),e.j41(1,"cd-help-text"),e.nrm(2,"span"),e.k0s(),e.YFu())}function rd(n,_){if(1&n&&(e.PLo(0,4,2),e.j41(1,"cd-help-text")(2,"span"),e.nrm(3,"a",20),e.k0s()(),e.YFu()),2&n){const t=e.XpG();e.R7$(3),e.FS9("href",t.docUrl,e.B4B)}}function ad(n,_){1&n&&(e.PLo(0,4,3),e.j41(1,"cd-help-text"),e.nrm(2,"span"),e.k0s(),e.YFu())}let ld=(()=>{class n extends ae.dW{activeModal;actionLabels;rgwRealmService;notificationService;docService;action;resource;info;multisiteInfo;defaultsInfo;editing;multisiteRealmForm;realm;realmList=[];zonegroupList=[];realmNames;newRealmName;isMaster;defaultRealmDisabled=!1;docUrl;constructor(t,o,i,s,T,F,k,H,q,oe,le){super(),this.activeModal=t,this.actionLabels=o,this.rgwRealmService=i,this.notificationService=s,this.docService=T,this.action=F,this.resource=k,this.info=H,this.multisiteInfo=q,this.defaultsInfo=oe,this.editing=le,this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.createForm()}createForm(){this.multisiteRealmForm=new tt.$({realmName:new r.hs(null,{validators:[r.k0.required,E.xQ.custom("uniqueName",t=>this.action===this.actionLabels.CREATE&&this.realmNames&&-1!==this.realmNames.indexOf(t))]}),default_realm:new r.hs(!1)})}ngOnInit(){this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.realmNames=this.realmList.map(t=>t.name),this.action===this.actionLabels.EDIT&&(this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.multisiteRealmForm.get("realmName").setValue(this.info.data.name),this.multisiteRealmForm.get("default_realm").setValue(this.info.data.is_default),this.info.data.is_default&&this.multisiteRealmForm.get("default_realm").disable()),this.zonegroupList.forEach(t=>{!0===t.is_master&&t.realm_id===this.info.data.id&&(this.isMaster=!0)}),this.defaultsInfo&&null!==this.defaultsInfo.defaultRealmName&&(this.multisiteRealmForm.get("default_realm").disable(),this.defaultRealmDisabled=!0),this.docUrl=this.docService.urlGenerator("rgw-multisite"),this.action===this.actionLabels?.EDIT?this.multisiteRealmForm.get("default_realm").disable():this.multisiteRealmForm.get("default_realm").enable()}submit(){const t=this.multisiteRealmForm.getRawValue();this.realm=new Le.SX,this.action===this.actionLabels.CREATE?(this.realm.name=t.realmName,this.rgwRealmService.create(this.realm,t.default_realm).subscribe(()=>{this.notificationService.show(f._.success,"Realm: '" + t.realmName + "' created successfully"),this.closeModal()},()=>{this.multisiteRealmForm.setErrors({cdSubmitButton:!0})})):(this.realm.name=this.info.data.name,this.newRealmName=t.realmName,this.rgwRealmService.update(this.realm,t.default_realm,this.newRealmName).subscribe(()=>{this.notificationService.show(f._.success,"Realm: '" + t.realmName + "' updated successfully"),this.closeModal()},()=>{this.multisiteRealmForm.setErrors({cdSubmitButton:!0})}))}static \u0275fac=function(o){return new(o||n)(e.rXU(b.Lw),e.rXU(m.Ss),e.rXU(Yt.$),e.rXU(B.J),e.rXU(nd.s),e.rXU("action",8),e.rXU("resource",8),e.rXU("info",8),e.rXU("multisiteInfo",8),e.rXU("defaultsInfo",8),e.rXU("editing",8))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-multisite-realm-form"]],features:[e.Vt3],decls:24,vars:23,consts:()=>{let t,o,i,s,T;return t="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",o="Realm Name " + "\ufffd#12\ufffd\ufffd/#12\ufffd" + "",i="Default " + "\ufffd*18:1\ufffd\ufffd#1:1\ufffd" + "" + "[\ufffd#2:1\ufffd|\ufffd#2:2\ufffd|\ufffd#2:3\ufffd]" + "You cannot unset the default flag." + "[\ufffd/#2:1\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:3\ufffd]" + "" + "[\ufffd/#1:1\ufffd\ufffd/*18:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*19:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*20:3\ufffd]" + "" + "\ufffd*19:2\ufffd\ufffd#1:2\ufffd" + "" + "[\ufffd#2:1\ufffd|\ufffd#2:2\ufffd|\ufffd#2:3\ufffd]" + "Please consult the " + "\ufffd#3:2\ufffd" + "documentation" + "\ufffd/#3:2\ufffd" + " to follow the failover mechanism" + "[\ufffd/#2:1\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:3\ufffd]" + "" + "[\ufffd/#1:1\ufffd\ufffd/*18:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*19:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*20:3\ufffd]" + "" + "\ufffd*20:3\ufffd\ufffd#1:3\ufffd" + "" + "[\ufffd#2:1\ufffd|\ufffd#2:2\ufffd|\ufffd#2:3\ufffd]" + "Default realm already exists." + "[\ufffd/#2:1\ufffd|\ufffd/#2:2\ufffd|\ufffd/#2:3\ufffd]" + "" + "[\ufffd/#1:1\ufffd\ufffd/*18:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*19:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*20:3\ufffd]" + "",i=e.k04(i),s="Pole jest wymagane.",T="The chosen realm name is already in use.",[["formDir","ngForm"],["realmNameError",""],t,o,i,s,T,["size","sm",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading",""],["cdsModalContent",""],["name","multisiteRealmForm","novalidate","",3,"formGroup"],[1,"form-item"],["labelInputID","realmName","cdRequiredField","Realm Name",3,"invalid","invalidText"],["cdsText","","type","text","placeholder","Realm name...","id","realmName","name","realmName","formControlName","realmName","modal-primary-focus","",3,"invalid","autofocus"],["label","Default","for","default_realm","formControlName","default_realm","name","default_realm"],[4,"ngIf"],[3,"submitActionEvent","form","submitText","modalForm"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"href"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"cds-modal",7),e.bIt("overlaySelected",function(){return e.eBV(s),e.Njj(i.closeModal())}),e.j41(1,"cds-modal-header",8),e.bIt("closeSelect",function(){return e.eBV(s),e.Njj(i.closeModal())}),e.j41(2,"h3",9),e.pXf(3,2),e.nI1(4,"titlecase"),e.nI1(5,"upperFirst"),e.k0s()(),e.j41(6,"div",10)(7,"form",11,0)(9,"div",12)(10,"cds-text-label",13),e.PLo(11,3),e.nrm(12,"input",14),e.YFu(),e.k0s(),e.DNE(13,_d,2,2,"ng-template",null,1,e.C5r),e.k0s(),e.j41(15,"div",12)(16,"cds-checkbox",15),e.PLo(17,4),e.DNE(18,sd,3,0,"cd-help-text",16)(19,rd,4,1,"cd-help-text",16)(20,ad,3,0,"cd-help-text",16),e.YFu(),e.k0s()()()(),e.j41(21,"cd-form-button-panel",17),e.nI1(22,"titlecase"),e.nI1(23,"upperFirst"),e.bIt("submitActionEvent",function(){return e.eBV(s),e.Njj(i.submit())}),e.k0s()()}if(2&o){const s=e.sdS(14);e.Y8G("open",i.open)("hasScrollingContent",!1),e.R7$(5),e.uP7(e.bMT(4,15,i.action))(e.bMT(5,17,i.resource)),e.nnv(3),e.R7$(2),e.Y8G("formGroup",i.multisiteRealmForm),e.R7$(3),e.Y8G("invalid",i.multisiteRealmForm.controls.realmName.invalid&&(i.multisiteRealmForm.controls.realmName.touched||i.multisiteRealmForm.controls.realmName.dirty))("invalidText",s),e.R7$(2),e.Y8G("invalid",i.multisiteRealmForm.controls.realmName.invalid&&(i.multisiteRealmForm.controls.realmName.touched||i.multisiteRealmForm.controls.realmName.dirty))("autofocus",!0),e.R7$(6),e.Y8G("ngIf",i.action===i.actionLabels.EDIT&&i.info.data.is_default),e.R7$(),e.Y8G("ngIf",i.action===i.actionLabels.EDIT&&!i.info.data.is_default),e.R7$(),e.Y8G("ngIf",i.defaultRealmDisabled&&i.action===i.actionLabels.CREATE),e.R7$(),e.Y8G("form",i.multisiteRealmForm)("submitText",e.bMT(22,19,i.action)+" "+e.bMT(23,21,i.resource))("modalForm",!0)}},dependencies:[R.bT,We.e,V.O,Ae.B,Oe.S,Xe.E,qe.P,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,ae.aF,ae.rQ,ae.$m,ae.hN,Ie.Zt,Ie.ks,be.Sc,R.PV,pt.r]})}return n})();var vn=g(87837),Do=g(12302);function cd(n,_){if(1&n&&(e.j41(0,"option",57),e.EFF(1),e.k0s()),2&n){const t=_.$implicit,o=e.XpG();e.Y8G("value",t.name)("selected",t.name===o.multisiteZoneForm.getValue("selectedZonegroup")),e.R7$(),e.SpI(" ",t.name," ")}}function ud(n,_){1&n&&(e.j41(0,"span",58),e.pXf(1,9),e.k0s())}function dd(n,_){1&n&&(e.j41(0,"span",58),e.pXf(1,10),e.k0s())}function fd(n,_){1&n&&(e.j41(0,"span")(1,"cd-helper"),e.pXf(2,11),e.k0s()())}function pd(n,_){1&n&&(e.j41(0,"span")(1,"cd-helper"),e.pXf(2,12),e.k0s()())}function gd(n,_){1&n&&(e.j41(0,"cd-helper")(1,"span"),e.PLo(2,13),e.nrm(3,"cd-doc",59),e.YFu(),e.k0s()())}function Td(n,_){1&n&&(e.j41(0,"span")(1,"cd-helper"),e.pXf(2,14),e.k0s()())}function Rd(n,_){1&n&&(e.j41(0,"span")(1,"cd-helper"),e.pXf(2,15),e.k0s()())}function md(n,_){if(1&n&&(e.j41(0,"cd-helper")(1,"span"),e.PLo(2,16),e.nrm(3,"a",60),e.YFu(),e.k0s()()),2&n){const t=e.XpG();e.R7$(3),e.FS9("href",t.docUrl,e.B4B)}}function Ed(n,_){1&n&&(e.j41(0,"span",58),e.pXf(1,17),e.k0s())}function Sd(n,_){1&n&&(e.j41(0,"span",58),e.pXf(1,18),e.k0s())}function Fd(n,_){if(1&n&&(e.j41(0,"option",57),e.EFF(1),e.k0s()),2&n){const t=_.$implicit,o=e.XpG(3);e.Y8G("value",t.name)("selected",t.name===o.multisiteZoneForm.getValue("placementTarget")),e.R7$(),e.SpI(" ",t.name," ")}}function Cd(n,_){if(1&n&&(e.j41(0,"option",57),e.EFF(1),e.k0s()),2&n){const t=_.$implicit,o=e.XpG(3);e.Y8G("value",t.poolname)("selected",t.poolname===o.multisiteZoneForm.getValue("placementDataPool")),e.R7$(),e.SpI(" ",t.poolname," ")}}function Md(n,_){if(1&n&&(e.j41(0,"option",57),e.EFF(1),e.k0s()),2&n){const t=_.$implicit,o=e.XpG(3);e.Y8G("value",t.poolname)("selected",t.poolname===o.multisiteZoneForm.getValue("placementIndexPool")),e.R7$(),e.SpI(" ",t.poolname," ")}}function hd(n,_){if(1&n&&(e.j41(0,"option",57),e.EFF(1),e.k0s()),2&n){const t=_.$implicit,o=e.XpG(3);e.Y8G("value",t.poolname)("selected",t.poolname===o.multisiteZoneForm.getValue("placementDataExtraPool")),e.R7$(),e.SpI(" ",t.poolname," ")}}function Gd(n,_){if(1&n&&(e.j41(0,"option",76),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.Y8G("value",t.key),e.R7$(),e.SpI(" ",t.key," ")}}function Pd(n,_){if(1&n&&(e.j41(0,"option",57),e.EFF(1),e.k0s()),2&n){const t=_.$implicit,o=e.XpG(3);e.Y8G("value",t.poolname)("selected",t.poolname===o.multisiteZoneForm.getValue("storageDataPool")),e.R7$(),e.SpI(" ",t.poolname," ")}}function Id(n,_){if(1&n&&(e.j41(0,"option",76),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function Od(n,_){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"legend"),e.EFF(2,"Placement Targets"),e.k0s(),e.j41(3,"div",31)(4,"label",61),e.pXf(5,19),e.k0s(),e.j41(6,"div",33)(7,"select",62),e.bIt("change",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.getZonePlacementData(i.target.value))}),e.DNE(8,Fd,2,3,"option",35),e.k0s()()(),e.j41(9,"div",31)(10,"label",63),e.pXf(11,20),e.k0s(),e.j41(12,"div",33)(13,"select",64),e.DNE(14,Cd,2,3,"option",35),e.k0s()()(),e.j41(15,"div",31)(16,"label",65),e.pXf(17,21),e.k0s(),e.j41(18,"div",33)(19,"select",66),e.DNE(20,Md,2,3,"option",35),e.k0s()()(),e.j41(21,"div",31)(22,"label",67),e.pXf(23,22),e.k0s(),e.j41(24,"div",33)(25,"select",68),e.DNE(26,hd,2,3,"option",35),e.k0s()()(),e.j41(27,"div")(28,"legend"),e.EFF(29,"Storage Classes"),e.k0s(),e.j41(30,"div",31)(31,"label",69),e.pXf(32,23),e.k0s(),e.j41(33,"div",33)(34,"select",70),e.bIt("change",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.getStorageClassData(i.target.value))}),e.DNE(35,Gd,2,2,"option",71),e.k0s()()(),e.j41(36,"div",31)(37,"label",72),e.pXf(38,24),e.k0s(),e.j41(39,"div",33)(40,"select",73),e.DNE(41,Pd,2,3,"option",35),e.k0s()()(),e.j41(42,"div",31)(43,"label",74),e.pXf(44,25),e.k0s(),e.j41(45,"div",33)(46,"select",75),e.DNE(47,Id,2,2,"option",71),e.k0s()()()()()}if(2&n){const t=e.XpG(2);e.R7$(8),e.Y8G("ngForOf",t.placementTargets),e.R7$(5),e.Y8G("value",t.placementDataPool),e.R7$(),e.Y8G("ngForOf",t.poolList),e.R7$(6),e.Y8G("ngForOf",t.poolList),e.R7$(6),e.Y8G("ngForOf",t.poolList),e.R7$(9),e.Y8G("ngForOf",t.storageClassList),e.R7$(6),e.Y8G("ngForOf",t.poolList),e.R7$(6),e.Y8G("ngForOf",t.compressionTypes)}}function Nd(n,_){if(1&n&&(e.j41(0,"div",31),e.DNE(1,Od,48,8,"div",42),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf","edit"===t.action)}}let bd=(()=>{class n{activeModal;actionLabels;rgwMultisiteService;rgwZoneService;rgwZoneGroupService;notificationService;rgwUserService;modalService;action;info;multisiteZoneForm;editing=!1;resource;realm;zonegroup;zone;defaultsInfo=[];multisiteInfo=[];zonegroupList=[];zoneList=[];zoneNames;users;placementTargets;zoneInfo;poolList=[];storageClassList=[];disableDefault=!1;disableMaster=!1;isMetadataSync=!1;isMasterZone;isDefaultZone;syncStatusTimedOut=!1;bsModalRef;createSystemUser=!1;master_zone_of_master_zonegroup;masterZoneUser;access_key;master_zonegroup_of_realm;compressionTypes=["lz4","zlib","snappy"];userListReady=!1;constructor(t,o,i,s,T,F,k,H){this.activeModal=t,this.actionLabels=o,this.rgwMultisiteService=i,this.rgwZoneService=s,this.rgwZoneGroupService=T,this.notificationService=F,this.rgwUserService=k,this.modalService=H,this.action=this.editing?this.actionLabels.EDIT+this.resource:this.actionLabels.CREATE+this.resource,this.createForm()}createForm(){this.multisiteZoneForm=new tt.$({zoneName:new r.hs(null,{validators:[r.k0.required,E.xQ.custom("uniqueName",t=>"create"===this.action&&this.zoneNames&&-1!==this.zoneNames.indexOf(t))]}),default_zone:new r.hs(!1),master_zone:new r.hs(!1),selectedZonegroup:new r.hs(null),zone_endpoints:new r.hs(null,{validators:[E.xQ.url,r.k0.required]}),access_key:new r.hs("",{}),secret_key:new r.hs("",{}),placementTarget:new r.hs(null),placementDataPool:new r.hs(""),placementIndexPool:new r.hs(null),placementDataExtraPool:new r.hs(null),storageClass:new r.hs(null),storageDataPool:new r.hs(null),storageCompression:new r.hs(null)})}onZoneGroupChange(t){let o=new Le.Oe;o.name=t,this.rgwZoneGroupService.get(o).subscribe(i=>{h().isEmpty(i.master_zone)?(this.multisiteZoneForm.get("master_zone").setValue(!0),this.multisiteZoneForm.get("master_zone").disable(),this.disableMaster=!1):!h().isEmpty(i.master_zone)&&"create"===this.action&&(this.multisiteZoneForm.get("master_zone").setValue(!1),this.multisiteZoneForm.get("master_zone").disable(),this.disableMaster=!0)}),this.multisiteZoneForm.getValue("selectedZonegroup")!==this.defaultsInfo.defaultZonegroupName&&(this.disableDefault=!0,this.multisiteZoneForm.get("default_zone").disable())}ngOnInit(){this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zoneNames=this.zoneList.map(t=>t.name),"create"===this.action&&void 0!==this.defaultsInfo.defaultZonegroupName&&(this.multisiteZoneForm.get("selectedZonegroup").setValue(this.defaultsInfo.defaultZonegroupName),this.onZoneGroupChange(this.defaultsInfo.defaultZonegroupName)),"edit"===this.action&&(this.placementTargets=this.info.data?.parent||this.info.parent?(this.info.data?.parentNode||this.info.parent.data)?.placement_targets:[],this.rgwZoneService.getPoolNames().subscribe(o=>{this.poolList=o}),this.multisiteZoneForm.get("zoneName").setValue(this.info.data.name),this.multisiteZoneForm.get("selectedZonegroup").setValue(this.info.data.parent),this.multisiteZoneForm.get("default_zone").setValue(this.info.data.is_default),this.multisiteZoneForm.get("master_zone").setValue(this.info.data.is_master),this.multisiteZoneForm.get("zone_endpoints").setValue(this.info.data.endpoints.toString()),this.multisiteZoneForm.get("access_key").setValue(this.info.data.access_key),this.multisiteZoneForm.get("secret_key").setValue(this.info.data.secret_key),this.multisiteZoneForm.get("placementTarget").setValue((this.info.data?.parentNode||this.info.parent.data)?.default_placement),this.getZonePlacementData(this.multisiteZoneForm.getValue("placementTarget")),this.info.data.is_default&&(this.isDefaultZone=!0,this.multisiteZoneForm.get("default_zone").disable()),this.info.data.is_master&&(this.isMasterZone=!0,this.multisiteZoneForm.get("master_zone").disable()),(new Le.$H).name=this.info.data.name,this.onZoneGroupChange(this.info.data.parent)),this.multisiteZoneForm.getValue("selectedZonegroup")!==this.defaultsInfo.defaultZonegroupName&&(this.disableDefault=!0,this.multisiteZoneForm.get("default_zone").disable())}getZonePlacementData(t){this.zone=new Le.$H,this.zone.name=this.info.data.name,this.rgwZoneService.get(this.zone).subscribe(o=>{if(this.zoneInfo=o,this.zoneInfo&&this.zoneInfo.placement_pools){const i=this.zoneInfo.placement_pools.map(s=>s.key);this.placementTargets=this.placementTargets.filter(s=>i.includes(s.name)),this.zoneInfo.placement_pools.forEach(s=>{if(s.key===t){let T=s.val.storage_classes;this.storageClassList=Object.entries(T).map(([q,oe])=>({key:q,value:oe}));let F=T.STANDARD?T.STANDARD.data_pool:"",k=s.val.index_pool,H=s.val.data_extra_pool;this.poolList.push({poolname:F}),this.poolList.push({poolname:k}),this.poolList.push({poolname:H}),this.multisiteZoneForm.get("storageClass").setValue(this.storageClassList[0].key),this.getStorageClassData(this.storageClassList[0].key),this.multisiteZoneForm.get("placementDataPool").setValue(F),this.multisiteZoneForm.get("placementIndexPool").setValue(k),this.multisiteZoneForm.get("placementDataExtraPool").setValue(H)}})}})}getStorageClassData(t){let o=this.storageClassList.find(i=>i.key===t);this.poolList.push({poolname:o.value.data_pool}),this.multisiteZoneForm.get("storageDataPool").setValue(o.value.data_pool),this.multisiteZoneForm.get("storageCompression").setValue(o.value.compression_type)}submit(){const t=this.multisiteZoneForm.getRawValue();"create"===this.action?(this.zonegroup=new Le.Oe,this.zonegroup.name=t.selectedZonegroup,this.zone=new Le.$H,this.zone.name=t.zoneName,this.zone.endpoints=t.zone_endpoints,this.zone.system_key=new Le.B5,this.zone.system_key.access_key=t.access_key,this.zone.system_key.secret_key=t.secret_key,this.rgwZoneService.create(this.zone,this.zonegroup,t.default_zone,t.master_zone,this.zone.endpoints).subscribe(()=>{this.notificationService.show(f._.success,"Zone: '" + t.zoneName + "' created successfully"),this.activeModal.close()},()=>{this.multisiteZoneForm.setErrors({cdSubmitButton:!0})})):"edit"===this.action&&(this.zonegroup=new Le.Oe,this.zonegroup.name=t.selectedZonegroup,this.zone=new Le.$H,this.zone.name=this.info.data.name,this.zone.endpoints=t.zone_endpoints,this.zone.system_key=new Le.B5,this.zone.system_key.access_key=t.access_key,this.zone.system_key.secret_key=t.secret_key,this.rgwZoneService.update(this.zone,this.zonegroup,t.zoneName,t.default_zone,t.master_zone,this.zone.endpoints,t.placementTarget,t.placementDataPool,t.placementIndexPool,t.placementDataExtraPool,t.storageClass,t.storageDataPool,t.storageCompression).subscribe(()=>{this.notificationService.show(f._.success,"Zone: '" + t.zoneName + "' updated successfully"),this.activeModal.close()},()=>{this.multisiteZoneForm.setErrors({cdSubmitButton:!0})}))}static \u0275fac=function(o){return new(o||n)(e.rXU(b.Lw),e.rXU(m.Ss),e.rXU(y.A),e.rXU(Vt.w),e.rXU(ht.Z),e.rXU(B.J),e.rXU(P.p),e.rXU(tn.B))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-multisite-zone-form"]],decls:75,vars:29,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de;return t="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",o="Select Zone Group",i="Zone Name",s="Domy\u015Blna",T="Master",F="Endpoints",k="S3 access key " + "\ufffd#47\ufffd" + "" + "\ufffd#48\ufffd" + "To see or copy your S3 access key, go to " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Object Gateway > Users" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + " and click on your user name. In " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Keys" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + ", click " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Show" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + ". View the access key by clicking Show and copy the key by clicking " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Copy to Clipboard" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + "." + "\ufffd/#48\ufffd" + "" + "\ufffd/#47\ufffd" + "",k=e.k04(k),H="S3 secret key " + "\ufffd#60\ufffd" + "" + "\ufffd#61\ufffd" + "To see or copy your S3 access key, go to " + "[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]" + "Object Gateway > Users" + "[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]" + " and click on your user name. In " + "[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]" + "Keys" + "[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]" + ", click " + "[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]" + "Show" + "[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]" + ". View the secret key by clicking Show and copy the key by clicking " + "[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]" + "Copy to Clipboard" + "[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]" + "." + "\ufffd/#61\ufffd" + "" + "\ufffd/#60\ufffd" + "",H=e.k04(H),q="Pole jest wymagane.",oe="The chosen zone name is already in use.",le="Default zone can only exist in a default zone group. ",Re="You cannot unset the default flag. ",ce="Please consult the\xA0" + "\ufffd#3\ufffd" + "" + "\ufffd/#3\ufffd" + "\xA0to follow the failover mechanism",Te="Master zone already exists for the selected zone group. ",se="You cannot unset the master flag. ",Ce="Please consult the\xA0" + "\ufffd#3\ufffd" + "documentation" + "\ufffd/#3\ufffd" + "\xA0to follow the failover mechanism",he="Pole jest wymagane.",ye="Please enter a valid URL.",$e="Placement target",Ge="Dane pul",Ue="Index pool",xe="Data extra pool",ke="Storage Class",ve="Dane pul",de="Kompresja",[["formDir","ngForm"],t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","multisiteZoneForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","selectedZonegroup",1,"cd-col-form-label"],[1,"cd-col-form-input"],["id","selectedZonegroup","formControlName","selectedZonegroup","name","selectedZonegroup",1,"form-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],["for","zonegroupName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"custom-control","custom-checkbox"],["id","default_zone","name","default_zone","formControlName","default_zone","type","checkbox",1,"form-check-input"],["for","default_zone",1,"form-check-label"],[4,"ngIf"],["id","master_zone","name","master_zone","formControlName","master_zone","type","checkbox",1,"form-check-input"],["for","master_zone",1,"form-check-label"],["for","zone_endpoints",1,"cd-col-form-label","required"],["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zone_endpoints","name","zone_endpoints","formControlName","zone_endpoints",1,"form-control"],["for","access_key",1,"cd-col-form-label"],[1,"input-group"],["type","password","placeholder","DiPt4V7WWvy2njL1z6aC","id","access_key","name","access_key","formControlName","access_key",1,"form-control"],["type","button","cdPasswordButton","access_key",1,"btn","btn-light"],["for","secret_key",1,"cd-col-form-label"],["type","password","placeholder","xSZUdYky0bTctAdCEEW8ikhfBVKsBV5LFYL82vvh","id","secret_key","name","secret_key","formControlName","secret_key",1,"form-control"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[3,"value","selected"],[1,"invalid-feedback"],["section","rgw-multisite"],[3,"href"],["for","placementTarget",1,"cd-col-form-label"],["id","placementTarget","formControlName","placementTarget","name","placementTarget",1,"form-select",3,"change"],["for","placementDataPool",1,"cd-col-form-label"],["id","placementDataPool","formControlName","placementDataPool","name","placementDataPool",1,"form-select",3,"value"],["for","placementIndexPool",1,"cd-col-form-label"],["id","placementIndexPool","formControlName","placementIndexPool","name","placementIndexPool",1,"form-select"],["for","placementDataExtraPool",1,"cd-col-form-label"],["id","placementDataExtraPool","formControlName","placementDataExtraPool","name","placementDataExtraPool",1,"form-select"],["for","storageClass",1,"cd-col-form-label"],["id","storageClass","formControlName","storageClass","name","storageClass",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],["for","storageDataPool",1,"cd-col-form-label"],["id","storageDataPool","formControlName","storageDataPool","name","storageDataPool",1,"form-select"],["for","storageCompression",1,"cd-col-form-label"],["id","storageCompression","formControlName","storageCompression","name","storageCompression",1,"form-select"],[3,"value"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"cd-modal",26),e.qex(1,27),e.pXf(2,1),e.nI1(3,"titlecase"),e.nI1(4,"upperFirst"),e.bVm(),e.qex(5,28),e.j41(6,"form",29,0)(8,"div",30)(9,"div",31)(10,"label",32),e.pXf(11,2),e.k0s(),e.j41(12,"div",33)(13,"select",34),e.bIt("change",function(F){return e.eBV(s),e.Njj(i.onZoneGroupChange(F.target.value))}),e.DNE(14,cd,2,3,"option",35),e.k0s()()(),e.j41(15,"div",31)(16,"label",36),e.pXf(17,3),e.k0s(),e.j41(18,"div",33),e.nrm(19,"input",37),e.DNE(20,ud,2,0,"span",38)(21,dd,2,0,"span",38),e.j41(22,"div",39),e.nrm(23,"input",40),e.j41(24,"label",41),e.pXf(25,4),e.k0s(),e.DNE(26,fd,3,0,"span",42)(27,pd,3,0,"span",42)(28,gd,4,0,"cd-helper",42),e.nrm(29,"br"),e.k0s(),e.j41(30,"div",39),e.nrm(31,"input",43),e.j41(32,"label",44),e.pXf(33,5),e.k0s(),e.DNE(34,Td,3,0,"span",42)(35,Rd,3,0,"span",42)(36,md,4,1,"cd-helper",42),e.k0s()()(),e.j41(37,"div",31)(38,"label",45),e.pXf(39,6),e.k0s(),e.j41(40,"div",33),e.nrm(41,"input",46),e.DNE(42,Ed,2,0,"span",38)(43,Sd,2,0,"span",38),e.k0s()(),e.j41(44,"div",31)(45,"label",47),e.PLo(46,7),e.j41(47,"cd-helper")(48,"span"),e.nrm(49,"b")(50,"b")(51,"b")(52,"b"),e.k0s()(),e.YFu(),e.k0s(),e.j41(53,"div",33)(54,"div",48),e.nrm(55,"input",49)(56,"button",50),e.k0s()()(),e.j41(57,"div",31)(58,"label",51),e.PLo(59,8),e.j41(60,"cd-helper")(61,"span"),e.nrm(62,"b")(63,"b")(64,"b")(65,"b"),e.k0s()(),e.YFu(),e.k0s(),e.j41(66,"div",33)(67,"div",48),e.nrm(68,"input",52)(69,"button",53),e.k0s()()(),e.DNE(70,Nd,2,1,"div",54),e.k0s(),e.j41(71,"div",55)(72,"cd-form-button-panel",56),e.nI1(73,"titlecase"),e.nI1(74,"upperFirst"),e.bIt("submitActionEvent",function(){return e.eBV(s),e.Njj(i.submit())}),e.k0s()()(),e.bVm(),e.k0s()}if(2&o){const s=e.sdS(7);e.Y8G("modalRef",i.activeModal),e.R7$(4),e.uP7(e.bMT(3,21,i.action))(e.bMT(4,23,i.resource)),e.nnv(2),e.R7$(2),e.Y8G("formGroup",i.multisiteZoneForm),e.R7$(7),e.BMQ("disabled","edit"===i.action||null),e.R7$(),e.Y8G("ngForOf",i.zonegroupList),e.R7$(6),e.Y8G("ngIf",i.multisiteZoneForm.showError("zoneName",s,"required")),e.R7$(),e.Y8G("ngIf",i.multisiteZoneForm.showError("zoneName",s,"uniqueName")),e.R7$(2),e.BMQ("disabled","edit"===i.action||null),e.R7$(3),e.Y8G("ngIf",i.disableDefault&&"create"===i.action),e.R7$(),e.Y8G("ngIf",i.isDefaultZone),e.R7$(),e.Y8G("ngIf","edit"===i.action&&!i.isDefaultZone),e.R7$(3),e.BMQ("disabled","edit"===i.action||null),e.R7$(3),e.Y8G("ngIf",i.disableMaster),e.R7$(),e.Y8G("ngIf",i.isMasterZone),e.R7$(),e.Y8G("ngIf","edit"===i.action&&!i.isMasterZone),e.R7$(6),e.Y8G("ngIf",i.multisiteZoneForm.showError("zone_endpoints",s,"required")),e.R7$(),e.Y8G("ngIf",i.multisiteZoneForm.showError("zone_endpoints",s,"invalidURL")),e.R7$(27),e.Y8G("ngIf","edit"===i.action),e.R7$(2),e.Y8G("form",i.multisiteZoneForm)("submitText",e.bMT(73,25,i.action)+" "+e.bMT(74,27,i.resource))}},dependencies:[R.Sq,R.bT,wt.m,Pt.z,vn.C,We.e,Do.h,Oe.S,It.a,St.C,Xe.E,r.qT,r.xH,r.y7,r.me,r.Zm,r.wz,r.BC,r.cb,r.j4,r.JD,Ze.c$,R.PV,pt.r]})}return n})();var Ad=g(2475);const Ld=n=>[n];function Dd(n,_){if(1&n&&(e.j41(0,"option",50),e.EFF(1),e.k0s()),2&n){const t=_.$implicit,o=e.XpG();e.Y8G("value",t.name)("selected",t.name===o.multisiteZonegroupForm.getValue("selectedRealm")),e.R7$(),e.SpI(" ",t.name," ")}}function yd(n,_){1&n&&(e.j41(0,"span",51),e.pXf(1,8),e.k0s())}function $d(n,_){1&n&&(e.j41(0,"span",51),e.pXf(1,9),e.k0s())}function vd(n,_){1&n&&(e.j41(0,"span")(1,"cd-helper"),e.pXf(2,10),e.k0s()())}function Wd(n,_){1&n&&(e.j41(0,"cd-helper")(1,"span"),e.PLo(2,11),e.nrm(3,"cd-doc",52),e.YFu(),e.k0s()())}function wd(n,_){1&n&&(e.j41(0,"cd-helper")(1,"span"),e.pXf(2,12),e.k0s()())}function Ud(n,_){1&n&&(e.j41(0,"span")(1,"cd-helper"),e.pXf(2,13),e.k0s()())}function xd(n,_){1&n&&(e.j41(0,"cd-helper")(1,"span"),e.PLo(2,14),e.nrm(3,"cd-doc",52),e.YFu(),e.k0s()())}function kd(n,_){1&n&&(e.j41(0,"cd-helper")(1,"span"),e.pXf(2,15),e.k0s()())}function Xd(n,_){1&n&&(e.j41(0,"span",51),e.pXf(1,16),e.k0s())}function jd(n,_){1&n&&(e.j41(0,"span",51),e.pXf(1,17),e.k0s())}function Bd(n,_){1&n&&(e.j41(0,"span",51),e.pXf(1,19),e.k0s())}function zd(n,_){if(1&n&&(e.j41(0,"div",30)(1,"label",53),e.pXf(2,18),e.k0s(),e.j41(3,"div",32),e.nrm(4,"cd-select-badges",54)(5,"br"),e.DNE(6,Bd,2,0,"span",38),e.k0s()()),2&n){const t=e.XpG();e.R7$(4),e.Y8G("data",t.zonegroupZoneNames)("options",t.labelsOption)("customBadges",!0),e.R7$(2),e.Y8G("ngIf",t.isRemoveMasterZone)}}function Hd(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,24),e.k0s())}function Yd(n,_){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",59)(2,"div",60),e.EFF(3),e.nI1(4,"ordinal"),e.j41(5,"span",61),e.bIt("click",function(){const i=e.eBV(t).index,s=e.XpG(2);return e.Njj(s.removePlacementTarget(i))}),e.EFF(6,"\xd7"),e.k0s()(),e.j41(7,"div",62)(8,"div",30)(9,"label",63),e.pXf(10,21),e.k0s(),e.j41(11,"div",32),e.nrm(12,"input",64),e.j41(13,"span",51),e.DNE(14,Hd,2,0,"span",42),e.k0s()()(),e.j41(15,"div",30)(16,"label",65),e.pXf(17,22),e.k0s(),e.j41(18,"div",32),e.nrm(19,"input",66),e.k0s()(),e.j41(20,"div",30)(21,"label",67),e.pXf(22,23),e.k0s(),e.j41(23,"div",32),e.nrm(24,"input",68),e.k0s()()()()()}if(2&n){const t=_.$implicit,o=_.index,i=e.XpG(2),s=e.sdS(6);e.R7$(),e.Y8G("formGroup",t),e.R7$(2),e.SpI(" ",e.bMT(4,3,o+1)," "),e.R7$(11),e.Y8G("ngIf",i.showError(o,"placement_id",s,"required"))}}function Vd(n,_){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"legend"),e.EFF(2,"Placement targets"),e.k0s(),e.qex(3,55),e.DNE(4,Yd,25,5,"div",56),e.bVm(),e.j41(5,"button",57),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.addPlacementTarget())}),e.nrm(6,"i",58),e.qex(7),e.pXf(8,20),e.bVm(),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",t.placementTargets.controls)("ngForTrackBy",t.trackByFn),e.R7$(2),e.Y8G("ngClass",e.eq3(3,Ld,t.icons.add))}}let Zd=(()=>{class n{activeModal;actionLabels;rgwZonegroupService;notificationService;formBuilder;action;icons=S.F;multisiteZonegroupForm;editing=!1;resource;realm;zonegroup;info;defaultsInfo=[];multisiteInfo=[];realmList=[];zonegroupList=[];zonegroupNames;isMaster=!1;placementTargets;newZonegroupName;zonegroupZoneNames;labelsOption=[];zoneList=[];allZoneNames;zgZoneNames;zgZoneIds;removedZones;isRemoveMasterZone=!1;addedZones;disableDefault=!1;disableMaster=!1;constructor(t,o,i,s,T){this.activeModal=t,this.actionLabels=o,this.rgwZonegroupService=i,this.notificationService=s,this.formBuilder=T,this.action=this.editing?this.actionLabels.EDIT+this.resource:this.actionLabels.CREATE+this.resource,this.createForm()}createForm(){this.multisiteZonegroupForm=new tt.$({default_zonegroup:new r.hs(!1),zonegroupName:new r.hs(null,{validators:[r.k0.required,E.xQ.custom("uniqueName",t=>"create"===this.action&&this.zonegroupNames&&-1!==this.zonegroupNames.indexOf(t))]}),master_zonegroup:new r.hs(!1),selectedRealm:new r.hs(null),zonegroup_endpoints:new r.hs(null,{validators:[E.xQ.url,r.k0.required]}),placementTargets:this.formBuilder.array([])})}ngOnInit(){h().forEach(this.multisiteZonegroupForm.get("placementTargets"),s=>{this.addPlacementTarget().patchValue(s)}),this.placementTargets=this.multisiteZonegroupForm.get("placementTargets"),this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zonegroupList.forEach(s=>{!0===s.is_master&&!h().isEmpty(s.realm_id)&&(this.isMaster=!0,this.disableMaster=!0)}),this.isMaster||(this.multisiteZonegroupForm.get("master_zonegroup").setValue(!0),this.multisiteZonegroupForm.get("master_zonegroup").disable()),this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zonegroupNames=this.zonegroupList.map(s=>s.name);const i=this.zonegroupList.map(s=>s.zones).reduce((s,T)=>s.concat(T),[]).map(s=>s.name);if(this.allZoneNames=this.zoneList.map(s=>s.name),this.allZoneNames=h().difference(this.allZoneNames,i),"create"===this.action&&null!==this.defaultsInfo.defaultRealmName&&(this.multisiteZonegroupForm.get("selectedRealm").setValue(this.defaultsInfo.defaultRealmName),this.disableMaster&&this.multisiteZonegroupForm.get("master_zonegroup").disable()),"edit"===this.action){this.multisiteZonegroupForm.get("zonegroupName").setValue(this.info.data.name),this.multisiteZonegroupForm.get("selectedRealm").setValue(this.info.data.parent),this.multisiteZonegroupForm.get("default_zonegroup").setValue(this.info.data.is_default),this.multisiteZonegroupForm.get("master_zonegroup").setValue(this.info.data.is_master),this.multisiteZonegroupForm.get("zonegroup_endpoints").setValue(this.info.data.endpoints.toString()),this.info.data.is_default&&this.multisiteZonegroupForm.get("default_zonegroup").disable(),!this.info.data.is_default&&this.multisiteZonegroupForm.getValue("selectedRealm")!==this.defaultsInfo.defaultRealmName&&(this.multisiteZonegroupForm.get("default_zonegroup").disable(),this.disableDefault=!0),(this.info.data.is_master||this.disableMaster)&&this.multisiteZonegroupForm.get("master_zonegroup").disable(),this.zonegroupZoneNames=this.info.data.zones.map(T=>T.name),this.zgZoneNames=this.info.data.zones.map(T=>T.name),this.zgZoneIds=this.info.data.zones.map(T=>T.id);const s=new Set(this.allZoneNames);this.labelsOption=Array.from(s).map(T=>({enabled:!0,name:T,selected:!1,description:null})),this.info.data.placement_targets.forEach(T=>{const F=this.addPlacementTarget();let k={placement_id:T.name,tags:T.tags.join(","),storage_class:"string"==typeof T.storage_classes?T.storage_classes:T.storage_classes.join(",")};F.patchValue(k)})}}submit(){const t=this.multisiteZonegroupForm.getRawValue();if("create"===this.action)this.realm=new Le.SX,this.realm.name=t.selectedRealm,this.zonegroup=new Le.Oe,this.zonegroup.name=t.zonegroupName,this.zonegroup.endpoints=t.zonegroup_endpoints,this.rgwZonegroupService.create(this.realm,this.zonegroup,t.default_zonegroup,t.master_zonegroup).subscribe(()=>{this.notificationService.show(f._.success,"Zonegroup: '" + t.zonegroupName + "' created successfully"),this.activeModal.close()},()=>{this.multisiteZonegroupForm.setErrors({cdSubmitButton:!0})});else if("edit"===this.action){this.removedZones=h().difference(this.zgZoneNames,this.zonegroupZoneNames);const o=this.info.data.zones.filter(i=>i.id===this.info.data.master_zone);if(this.isRemoveMasterZone=this.removedZones.includes(o[0].name),this.isRemoveMasterZone)return void this.multisiteZonegroupForm.setErrors({cdSubmitButton:!0});this.addedZones=h().difference(this.zonegroupZoneNames,this.zgZoneNames),this.realm=new Le.SX,this.realm.name=t.selectedRealm,this.zonegroup=new Le.Oe,this.zonegroup.name=this.info.data.name,this.newZonegroupName=t.zonegroupName,this.zonegroup.endpoints=t.zonegroup_endpoints.toString(),this.zonegroup.placement_targets=t.placementTargets,this.rgwZonegroupService.update(this.realm,this.zonegroup,this.newZonegroupName,t.default_zonegroup,t.master_zonegroup,this.removedZones,this.addedZones).subscribe(()=>{this.notificationService.show(f._.success,"Zonegroup: '" + t.zonegroupName + "' updated successfully"),this.activeModal.close()},()=>{this.multisiteZonegroupForm.setErrors({cdSubmitButton:!0})})}}addPlacementTarget(){this.placementTargets=this.multisiteZonegroupForm.get("placementTargets");const t=new tt.$({placement_id:new r.hs("",{validators:[r.k0.required]}),tags:new r.hs(""),storage_class:new r.hs([])});return this.placementTargets.push(t),t}trackByFn(t){return t}removePlacementTarget(t){this.placementTargets=this.multisiteZonegroupForm.get("placementTargets"),this.placementTargets.removeAt(t)}showError(t,o,i,s){return this.multisiteZonegroupForm.controls.placementTargets.controls[t].showError(o,i,s)}static \u0275fac=function(o){return new(o||n)(e.rXU(b.Lw),e.rXU(m.Ss),e.rXU(ht.Z),e.rXU(B.J),e.rXU(r.ze))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-multisite-zonegroup-form"]],decls:49,vars:24,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve;return t="" + "\ufffd0\ufffd" + " Zone Group",o="Select Realm",i="-- Select a realm --",s="Zone Group Name",T="Domy\u015Blna",F="Master",k="Endpoints",H="Pole jest wymagane.",q="The chosen zone group name is already in use.",oe="Zone group doesn't belong to the default realm.",le="Please consult the\xA0" + "\ufffd#3\ufffd" + "" + "\ufffd/#3\ufffd" + "\xA0to follow the failover mechanism",Re="You cannot unset the default flag.",ce="Multiple master zone groups can't be configured. If you want to create a new zone group and make it the master zone group, you must delete the default zone group.",Te="Please consult the\xA0" + "\ufffd#3\ufffd" + "" + "\ufffd/#3\ufffd" + "\xA0to follow the failover mechanism",se="You cannot unset the master flag.",Ce="Pole jest wymagane.",he="Please enter a valid URL.",ye="Zones",$e="Cannot remove master zone.",Ge="Add placement target",Ue="Placement Id",xe="Tagi",ke="Storage Class",ve="Pole jest wymagane.",[["formDir","ngForm"],t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","multisiteZonegroupForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","selectedRealm",1,"cd-col-form-label"],[1,"cd-col-form-input"],["id","selectedRealm","formControlName","selectedRealm","name","selectedRealm",1,"form-select"],["ngValue",""],[3,"value","selected",4,"ngFor","ngForOf"],["for","zonegroupName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone group name...","id","zonegroupName","name","zonegroupName","formControlName","zonegroupName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"custom-control","custom-checkbox"],["id","default_zonegroup","name","default_zonegroup","formControlName","default_zonegroup","type","checkbox",1,"form-check-input"],["for","default_zonegroup",1,"form-check-label"],[4,"ngIf"],["id","master_zonegroup","name","master_zonegroup","formControlName","master_zonegroup","type","checkbox",1,"form-check-input"],["for","master_zonegroup",1,"form-check-label"],["for","zonegroup_endpoints",1,"cd-col-form-label","required"],["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zonegroup_endpoints","name","zonegroup_endpoints","formControlName","zonegroup_endpoints",1,"form-control"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[3,"value","selected"],[1,"invalid-feedback"],["section","rgw-multisite"],["for","zones",1,"cd-col-form-label"],["id","zones",3,"data","options","customBadges"],["formArrayName","placementTargets"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","button","id","add-plc",1,"btn","btn-light","float-end","my-3",3,"click"],[3,"ngClass"],[1,"card",3,"formGroup"],[1,"card-header"],["name","remove_placement_target","ngbTooltip","Remove",1,"float-end","clickable",3,"click"],[1,"card-body"],["for","placement_id",1,"cd-col-form-label","required"],["type","text","name","placement_id","id","placement_id","formControlName","placement_id","placeholder","eg. default-placement",1,"form-control"],["for","tags",1,"cd-col-form-label"],["type","text","name","tags","id","tags","formControlName","tags","placeholder","comma separated tags, eg. default-placement, ssd",1,"form-control"],["for","storage_class",1,"cd-col-form-label"],["type","text","name","storage_class","id","storage_class","formControlName","storage_class","placeholder","eg. Standard-tier",1,"form-control"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"cd-modal",25),e.qex(1,26),e.pXf(2,1),e.nI1(3,"titlecase"),e.bVm(),e.qex(4,27),e.j41(5,"form",28,0)(7,"div",29)(8,"div",30)(9,"label",31),e.pXf(10,2),e.k0s(),e.j41(11,"div",32)(12,"select",33)(13,"option",34),e.pXf(14,3),e.k0s(),e.DNE(15,Dd,2,3,"option",35),e.k0s()()(),e.j41(16,"div",30)(17,"label",36),e.pXf(18,4),e.k0s(),e.j41(19,"div",32),e.nrm(20,"input",37),e.DNE(21,yd,2,0,"span",38)(22,$d,2,0,"span",38),e.j41(23,"div",39),e.nrm(24,"input",40),e.j41(25,"label",41),e.pXf(26,5),e.k0s(),e.DNE(27,vd,3,0,"span",42)(28,Wd,4,0,"cd-helper",42)(29,wd,3,0,"cd-helper",42),e.nrm(30,"br")(31,"input",43),e.j41(32,"label",44),e.pXf(33,6),e.k0s(),e.DNE(34,Ud,3,0,"span",42)(35,xd,4,0,"cd-helper",42)(36,kd,3,0,"cd-helper",42),e.k0s()()(),e.j41(37,"div",30)(38,"label",45),e.pXf(39,7),e.k0s(),e.j41(40,"div",32),e.nrm(41,"input",46),e.DNE(42,Xd,2,0,"span",38)(43,jd,2,0,"span",38),e.k0s()(),e.DNE(44,zd,7,4,"div",47)(45,Vd,9,5,"div",42),e.k0s(),e.j41(46,"div",48)(47,"cd-form-button-panel",49),e.nI1(48,"titlecase"),e.bIt("submitActionEvent",function(){return e.eBV(s),e.Njj(i.submit())}),e.k0s()()(),e.bVm(),e.k0s()}if(2&o){const s=e.sdS(6);e.Y8G("modalRef",i.activeModal),e.R7$(3),e.uP7(e.bMT(3,20,i.action)),e.nnv(2),e.R7$(2),e.Y8G("formGroup",i.multisiteZonegroupForm),e.R7$(10),e.Y8G("ngForOf",i.realmList),e.R7$(6),e.Y8G("ngIf",i.multisiteZonegroupForm.showError("zonegroupName",s,"required")),e.R7$(),e.Y8G("ngIf",i.multisiteZonegroupForm.showError("zonegroupName",s,"uniqueName")),e.R7$(2),e.BMQ("disabled","edit"===i.action||null),e.R7$(3),e.Y8G("ngIf",i.disableDefault&&"create"===i.action),e.R7$(),e.Y8G("ngIf","edit"===i.action&&!i.info.data.is_default),e.R7$(),e.Y8G("ngIf","edit"===i.action&&i.info.data.is_default),e.R7$(2),e.BMQ("disabled","edit"===i.action||null),e.R7$(3),e.Y8G("ngIf",i.disableMaster&&"create"===i.action),e.R7$(),e.Y8G("ngIf","edit"===i.action&&!i.info.data.is_master),e.R7$(),e.Y8G("ngIf","edit"===i.action&&i.info.data.is_master),e.R7$(6),e.Y8G("ngIf",i.multisiteZonegroupForm.showError("zonegroup_endpoints",s,"required")),e.R7$(),e.Y8G("ngIf",i.multisiteZonegroupForm.showError("zonegroup_endpoints",s,"invalidURL")),e.R7$(),e.Y8G("ngIf","edit"===i.action),e.R7$(),e.Y8G("ngIf","edit"===i.action),e.R7$(2),e.Y8G("form",i.multisiteZonegroupForm)("submitText",e.bMT(48,22,i.action)+" Zone Group")}},dependencies:[R.YU,R.Sq,R.bT,wt.m,nn.U,Pt.z,vn.C,We.e,Oe.S,It.a,St.C,Xe.E,r.qT,r.xH,r.y7,r.me,r.Zm,r.wz,r.BC,r.cb,r.j4,r.JD,r.v8,b.md,Ze.c$,R.PV,Ad.i]})}return n})();var Kd=g(20009),qd=g(53075),Jd=g(42706),Qd=g(63882),Wt=function(n){return n.CreateRealmAndZonegroup="Create Realm & Zonegroup",n.CreateZone="Create Zone",n.SelectCluster="Select Cluster",n.Review="Review",n}(Wt||{});const e1=[Wt.CreateRealmAndZonegroup,Wt.CreateZone,Wt.SelectCluster,Wt.Review],t1=[Wt.CreateRealmAndZonegroup,Wt.CreateZone,Wt.Review];var n1=g(80893),o1=g(55989),i1=g(70946),yo=g(60602);const _1=()=>({lg:2,md:2,sm:2}),s1=()=>({lg:14,md:14,sm:14});function r1(n,_){1&n&&(e.j41(0,"span",78),e.pXf(1,16),e.k0s())}function a1(n,_){1&n&&(e.j41(0,"span",78),e.pXf(1,17),e.k0s())}function l1(n,_){1&n&&(e.j41(0,"span",78),e.pXf(1,18),e.k0s())}function c1(n,_){1&n&&(e.j41(0,"span",78),e.pXf(1,19),e.k0s())}function u1(n,_){if(1&n&&(e.j41(0,"div",67)(1,"cd-alert-panel",68),e.EFF(2," This wizard enables you to set up multi-site replication within your Ceph environment.If you have already added another cluster to your multi-cluster setup, you can select that cluster in the wizard to automate the replication process.If no additional cluster is currently added, the wizard will guide you through creating the necessary realm, zonegroup, and zone, and provide a realm token.This token can be used later to manually import into a desired cluster to establish replication between the clusters. "),e.k0s(),e.j41(3,"div",69)(4,"label",70),e.pXf(5,10),e.k0s(),e.j41(6,"div",71),e.nrm(7,"input",72),e.j41(8,"cd-help-text")(9,"span"),e.pXf(10,11),e.k0s()(),e.DNE(11,r1,2,0,"span",73)(12,a1,2,0,"span",73),e.k0s()(),e.j41(13,"div",69)(14,"label",74),e.pXf(15,12),e.k0s(),e.j41(16,"div",71),e.nrm(17,"input",75),e.j41(18,"cd-help-text")(19,"span"),e.pXf(20,13),e.k0s()(),e.DNE(21,l1,2,0,"span",73)(22,c1,2,0,"span",73),e.k0s()(),e.j41(23,"div",69)(24,"label",76),e.pXf(25,14),e.k0s(),e.j41(26,"div",71),e.nrm(27,"cd-select-badges",77),e.j41(28,"cd-help-text")(29,"span"),e.pXf(30,15),e.k0s()()()()()),2&n){const t=e.XpG(),o=e.sdS(10);e.R7$(11),e.Y8G("ngIf",t.multisiteSetupForm.showError("realmName",o,"required")),e.R7$(),e.Y8G("ngIf",t.multisiteSetupForm.showError("realmName",o,"uniqueName")),e.R7$(9),e.Y8G("ngIf",t.multisiteSetupForm.showError("zonegroupName",o,"required")),e.R7$(),e.Y8G("ngIf",t.multisiteSetupForm.showError("zonegroupName",o,"uniqueName")),e.R7$(5),e.Y8G("data",t.rgwEndpoints.value)("options",t.rgwEndpoints.options)("customBadges",!0)}}function d1(n,_){1&n&&(e.j41(0,"span",78),e.pXf(1,27),e.k0s())}function f1(n,_){1&n&&(e.j41(0,"span",78),e.pXf(1,28),e.k0s())}function p1(n,_){1&n&&(e.j41(0,"span",78),e.pXf(1,29),e.k0s())}function g1(n,_){1&n&&(e.j41(0,"span",78),e.pXf(1,30),e.k0s())}function T1(n,_){if(1&n&&(e.j41(0,"div",67)(1,"div",69)(2,"label",74),e.pXf(3,20),e.k0s(),e.j41(4,"div",71),e.nrm(5,"input",79),e.j41(6,"cd-help-text")(7,"span"),e.pXf(8,21),e.k0s()(),e.DNE(9,d1,2,0,"span",73)(10,f1,2,0,"span",73),e.k0s()(),e.j41(11,"div",69)(12,"label",80),e.pXf(13,22),e.k0s(),e.j41(14,"div",71),e.nrm(15,"cd-select-badges",81),e.j41(16,"cd-help-text")(17,"span"),e.pXf(18,23),e.k0s()()()(),e.j41(19,"div",69)(20,"label",82),e.pXf(21,24),e.k0s(),e.j41(22,"div",71),e.nrm(23,"input",83),e.j41(24,"cd-help-text")(25,"span"),e.pXf(26,25),e.k0s()(),e.j41(27,"cd-alert-panel",84)(28,"span"),e.pXf(29,26),e.k0s()(),e.DNE(30,p1,2,0,"span",73)(31,g1,2,0,"span",73),e.k0s()()()),2&n){const t=e.XpG(),o=e.sdS(10);e.R7$(9),e.Y8G("ngIf",t.multisiteSetupForm.showError("zoneName",o,"required")),e.R7$(),e.Y8G("ngIf",t.multisiteSetupForm.showError("zoneName",o,"uniqueName")),e.R7$(5),e.Y8G("data",t.rgwEndpoints.value)("options",t.rgwEndpoints.options)("customBadges",!0),e.R7$(12),e.Y8G("showTitle",!1),e.R7$(3),e.Y8G("ngIf",t.multisiteSetupForm.showError("username",o,"required")),e.R7$(),e.Y8G("ngIf",t.multisiteSetupForm.showError("username",o,"notUnique"))}}function R1(n,_){if(1&n&&(e.j41(0,"option",91),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.Y8G("value",t.name),e.R7$(),e.Lme(" ",t.cluster_alias," - ",t.name," ")}}function m1(n,_){1&n&&(e.j41(0,"span",78),e.pXf(1,36),e.k0s())}function E1(n,_){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",69)(2,"label",87),e.pXf(3,31),e.k0s(),e.j41(4,"div",71)(5,"select",88),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.DH7(s.selectedCluster,i)||(s.selectedCluster=i),e.Njj(i)}),e.DNE(6,R1,2,3,"option",89),e.k0s(),e.j41(7,"cd-help-text")(8,"span"),e.pXf(9,32),e.k0s()(),e.j41(10,"cd-alert-panel",84)(11,"span"),e.pXf(12,33),e.k0s()()()(),e.j41(13,"div",69)(14,"label",74),e.pXf(15,34),e.k0s(),e.j41(16,"div",71),e.nrm(17,"input",90),e.j41(18,"cd-help-text")(19,"span"),e.pXf(20,35),e.k0s()(),e.DNE(21,m1,2,0,"span",73),e.k0s()()()}if(2&n){const t=e.XpG(2),o=e.sdS(10);e.R7$(5),e.R50("ngModel",t.selectedCluster),e.R7$(),e.Y8G("ngForOf",t.clusterDetailsArray),e.R7$(4),e.Y8G("showTitle",!1),e.R7$(11),e.Y8G("ngIf",t.multisiteSetupForm.showError("replicationZoneName",o,"required"))}}function S1(n,_){if(1&n&&(e.j41(0,"div",85),e.DNE(1,E1,22,4,"div",86),e.k0s()),2&n){const t=e.XpG(),o=e.sdS(24);e.R7$(),e.Y8G("ngIf",t.isMultiClusterConfigured)("ngIfElse",o)}}function F1(n,_){1&n&&e.eu8(0)}function C1(n,_){if(1&n&&(e.qex(0),e.DNE(1,F1,1,0,"ng-container",93),e.bVm()),2&n){e.XpG(4);const t=e.sdS(34);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function M1(n,_){if(1&n&&(e.qex(0),e.DNE(1,C1,2,1,"ng-container",86),e.bVm()),2&n){const t=e.XpG(3),o=e.sdS(28);e.R7$(),e.Y8G("ngIf",!t.setupCompleted)("ngIfElse",o)}}function h1(n,_){if(1&n&&(e.j41(0,"div"),e.DNE(1,M1,2,2,"ng-container",86),e.k0s()),2&n){const t=e.XpG(2),o=e.sdS(26);e.R7$(),e.Y8G("ngIf",!t.loading)("ngIfElse",o)}}function G1(n,_){if(1&n&&(e.j41(0,"div",67),e.DNE(1,h1,2,2,"div",92),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.isMultiClusterConfigured)}}function P1(n,_){if(1&n){const t=e.RV6();e.j41(0,"button",94),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSkip())}),e.pXf(1,37),e.k0s()}}function I1(n,_){if(1&n&&(e.PLo(0,9,1),e.nrm(1,"cds-loading",95),e.YFu()),2&n){const t=e.XpG();e.R7$(),e.Y8G("isActive",t.loading)("overlay",!1)}}function O1(n,_){1&n&&e.eu8(0)}function N1(n,_){if(1&n&&(e.qex(0),e.DNE(1,O1,1,0,"ng-container",93),e.bVm()),2&n){e.XpG(3);const t=e.sdS(34);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function b1(n,_){if(1&n&&(e.qex(0),e.DNE(1,N1,2,1,"ng-container",86),e.bVm()),2&n){const t=e.XpG(2),o=e.sdS(32);e.R7$(),e.Y8G("ngIf",!t.setupCompleted)("ngIfElse",o)}}function A1(n,_){if(1&n&&e.DNE(0,b1,2,2,"ng-container",86),2&n){const t=e.XpG(),o=e.sdS(26);e.Y8G("ngIf",!t.loading)("ngIfElse",o)}}function L1(n,_){1&n&&e.eu8(0)}function D1(n,_){if(1&n&&e.DNE(0,L1,1,0,"ng-container",93),2&n){e.XpG();const t=e.sdS(30);e.Y8G("ngTemplateOutlet",t)}}function y1(n,_){1&n&&(e.j41(0,"div")(1,"div",96),e.pXf(2,38),e.k0s()())}function $1(n,_){if(1&n&&e.DNE(0,y1,3,0,"div",86),2&n){const t=e.XpG(),o=e.sdS(32);e.Y8G("ngIf",t.isMultiClusterConfigured&&!t.stepsToSkip["Select Cluster"])("ngIfElse",o)}}function v1(n,_){if(1&n&&e.nrm(0,"cd-progress",97),2&n){const t=e.XpG();e.Y8G("value",null==t.executingTask?null:t.executingTask.progress)("description",null==t.executingTask||null==t.executingTask.name?null:t.executingTask.name.replace("progress/Multisite-Setup:",""))}}function W1(n,_){1&n&&e.nrm(0,"hr")}function w1(n,_){if(1&n&&(e.j41(0,"div")(1,"div",69)(2,"label",99),e.pXf(3,39),e.k0s(),e.j41(4,"div",71),e.nrm(5,"input",100),e.j41(6,"cd-help-text")(7,"span"),e.pXf(8,40),e.k0s()()()(),e.j41(9,"div",69)(10,"label",101),e.pXf(11,41),e.k0s(),e.j41(12,"div",71),e.nrm(13,"input",102)(14,"cd-copy-2-clipboard-button",103),e.j41(15,"cd-help-text")(16,"span"),e.pXf(17,42),e.k0s()()()(),e.DNE(18,W1,1,0,"hr",92),e.k0s()),2&n){const t=_.$implicit,o=e.XpG(2);e.R7$(5),e.Y8G("value",t.realm),e.R7$(8),e.Y8G("value",t.token),e.R7$(),e.Y8G("source",t.token)("byId",!1),e.R7$(4),e.Y8G("ngIf",o.realms.length>1)}}function U1(n,_){if(1&n&&e.DNE(0,w1,19,5,"div",98),2&n){const t=e.XpG();e.Y8G("ngForOf",t.realms)}}function x1(n,_){if(1&n&&(e.j41(0,"div")(1,"div",69)(2,"label",104),e.pXf(3,49),e.k0s(),e.j41(4,"div",107)(5,"b"),e.EFF(6),e.k0s()()(),e.j41(7,"div",69)(8,"label",104),e.pXf(9,50),e.k0s(),e.j41(10,"div",107)(11,"b"),e.EFF(12),e.k0s()()()()),2&n){const t=e.XpG(2);e.R7$(6),e.JRh(t.selectedCluster),e.R7$(6),e.JRh(t.multisiteSetupForm.get("replicationZoneName").value)}}function k1(n,_){if(1&n&&(e.j41(0,"div",69)(1,"label",104),e.pXf(2,43),e.k0s(),e.j41(3,"div",105)(4,"b"),e.EFF(5),e.k0s()()(),e.j41(6,"div",69)(7,"label",104),e.pXf(8,44),e.k0s(),e.j41(9,"div",106)(10,"b"),e.EFF(11),e.k0s()()(),e.j41(12,"div",69)(13,"label",104),e.pXf(14,45),e.k0s(),e.j41(15,"div",107)(16,"b"),e.EFF(17),e.k0s()()(),e.j41(18,"div",69)(19,"label",104),e.pXf(20,46),e.k0s(),e.j41(21,"div",108)(22,"b"),e.EFF(23),e.k0s()()(),e.j41(24,"div",69)(25,"label",104),e.pXf(26,47),e.k0s(),e.j41(27,"div",107)(28,"b"),e.EFF(29),e.k0s()()(),e.j41(30,"div",69)(31,"label",104),e.pXf(32,48),e.k0s(),e.j41(33,"div",107)(34,"b"),e.EFF(35),e.k0s()()(),e.DNE(36,x1,13,2,"div",92)),2&n){const t=e.XpG();e.R7$(5),e.JRh(t.multisiteSetupForm.get("realmName").value),e.R7$(6),e.JRh(t.multisiteSetupForm.get("zonegroupName").value),e.R7$(6),e.JRh(t.rgwEndpoints.value.join(", ")),e.R7$(6),e.JRh(t.multisiteSetupForm.get("zoneName").value),e.R7$(6),e.JRh(t.rgwEndpoints.value.join(", ")),e.R7$(6),e.JRh(t.multisiteSetupForm.get("username").value),e.R7$(),e.Y8G("ngIf",t.isMultiClusterConfigured&&!t.stepsToSkip["Select Cluster"])}}let $o=(()=>{class n extends ae.dW{wizardStepsService;activeModal;actionLabels;rgwDaemonService;multiClusterService;rgwMultisiteService;notificationService;route;summaryService;location;multisiteSetupForm;currentStep;currentStepSub;permissions;stepTitles=e1.map(t=>({label:t}));stepsToSkip={};daemons=[];selectedCluster="";clusterDetailsArray;isMultiClusterConfigured=!1;exportTokenForm;realms;loading=!1;pageURL;icons=S.F;rgwEndpoints;executingTask;setupCompleted=!1;constructor(t,o,i,s,T,F,k,H,q,oe){super(),this.wizardStepsService=t,this.activeModal=o,this.actionLabels=i,this.rgwDaemonService=s,this.multiClusterService=T,this.rgwMultisiteService=F,this.notificationService=k,this.route=H,this.summaryService=q,this.location=oe,this.pageURL="rgw/multisite/configuration",this.currentStepSub=this.wizardStepsService.getCurrentStep().subscribe(le=>{this.currentStep=le}),this.currentStep.stepIndex=0,this.createForm(),this.rgwEndpoints={value:[],options:[],messages:new $n.z({empty:"There are no endpoints.",filter:"Select endpoints"})}}ngOnInit(){this.open="modal"===this.route.outlet,this.rgwDaemonService.list().pipe((0,M.n)(t=>{this.daemons=t;const o=t.map(i=>this.rgwDaemonService.get(i.id).pipe((0,a.T)(s=>({hostname:i.server_hostname,port:i.port,frontendConfig:s.rgw_metadata["frontend_config#0"]}))));return(0,v.p)(o)})).subscribe(t=>{this.rgwEndpoints.value=t.map(i=>`${i.frontendConfig.includes("ssl_port")?"https":"http"}://${i.hostname}:${i.port}`);const o=this.rgwEndpoints.value.map(i=>new Zt.O(!1,i,""));this.rgwEndpoints.options=[...o]}),this.multiClusterService.getCluster().subscribe(t=>{this.clusterDetailsArray=Object.values(t.config).flat().filter(o=>o.url!==t.current_url),this.isMultiClusterConfigured=this.clusterDetailsArray.length>0,this.isMultiClusterConfigured?this.selectedCluster=this.clusterDetailsArray[0].name:(this.stepTitles=t1.map(o=>({label:o})),this.stepTitles.forEach((o,i)=>{o.onClick=()=>this.currentStep.stepIndex=i})),this.wizardStepsService.setTotalSteps(this.stepTitles.length)}),this.summaryService.subscribe(t=>{this.executingTask=t.executing_tasks.filter(o=>o.name.includes("progress/Multisite-Setup"))[0]}),this.stepTitles.forEach(t=>{this.stepsToSkip[t.label]=!1})}createForm(){this.multisiteSetupForm=new tt.$({realmName:new r.hs("default_realm",{validators:[r.k0.required]}),zonegroupName:new r.hs("default_zonegroup",{validators:[r.k0.required]}),zonegroup_endpoints:new r.hs(null,[r.k0.required]),zoneName:new r.hs("default_zone",{validators:[r.k0.required]}),zone_endpoints:new r.hs(null,{validators:[r.k0.required]}),username:new r.hs("default_system_user",{validators:[r.k0.required]}),cluster:new r.hs(null,{validators:[r.k0.required]}),replicationZoneName:new r.hs("new_replicated_zone",{validators:[r.k0.required]})}),this.isMultiClusterConfigured||(this.exportTokenForm=new tt.$({}))}showSubmitButtonLabel(){return this.wizardStepsService.isLastStep()?this.setupCompleted?"Zamknij":this.isMultiClusterConfigured?"Configure Multi-Site":"Export Multi-Site token":"Next"}showCancelButtonLabel(){return this.wizardStepsService.isFirstStep()?this.actionLabels.CANCEL:this.actionLabels.BACK}onNextStep(){this.wizardStepsService.isLastStep()?this.setupCompleted?this.closeModal():this.onSubmit():this.wizardStepsService.moveToNextStep(),this.wizardStepsService.getCurrentStep().subscribe(t=>{this.currentStep=t,2===this.currentStep.stepIndex&&this.isMultiClusterConfigured&&(this.stepsToSkip["Select Cluster"]=!1)})}onSubmit(){this.loading=!0;const t=this.multisiteSetupForm.getRawValue(),o=t.realmName,i=t.zonegroupName,s=this.rgwEndpoints.value.join(","),T=t.zoneName,F=this.rgwEndpoints.value.join(","),k=t.username;!this.isMultiClusterConfigured||this.stepsToSkip["Select Cluster"]?this.rgwMultisiteService.setUpMultisiteReplication(o,i,s,T,F,k).subscribe(H=>{this.setupCompleted=!0,this.rgwMultisiteService.setRestartGatewayMessage(!1),this.loading=!1,this.realms=H,this.showSuccessNotification()}):this.rgwMultisiteService.setUpMultisiteReplication(o,i,s,T,F,k,t.cluster,t.replicationZoneName,this.clusterDetailsArray).subscribe(()=>{this.setupCompleted=!0,this.rgwMultisiteService.setRestartGatewayMessage(!1),this.loading=!1,this.showSuccessNotification()},()=>{this.multisiteSetupForm.setErrors({cdSubmitButton:!0})})}showSuccessNotification(){this.notificationService.show(f._.success,"Multi-site setup completed successfully.")}onPreviousStep(){this.wizardStepsService.isFirstStep()?this.location.back():this.wizardStepsService.moveToPreviousStep()}onSkip(){this.stepsToSkip[this.stepTitles[this.currentStep.stepIndex].label]=!0,this.onNextStep()}closeModal(){this.location.back()}static \u0275fac=function(o){return new(o||n)(e.rXU(qd.m),e.rXU(b.Lw),e.rXU(m.Ss),e.rXU(Q.y),e.rXU(Jd.J),e.rXU(y.A),e.rXU(B.J),e.rXU(I.nX),e.rXU(Qd.E),e.rXU(R.aZ))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-multisite-wizard"]],features:[e.Vt3],decls:35,vars:20,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de,pe,He,Ye,ze,Ve,Ne,fe,nt,ot,it,_t,st,rt,at,lt,ct,Qe,ut,dt,ft;return t="Set up Multi-site Replication",o="" + "\ufffd0\ufffd" + "",i="" + "\ufffd0\ufffd" + " " + "\ufffd*22:1\ufffd\ufffd#1:1\ufffd" + "" + "\ufffd/#1:1\ufffd\ufffd/*22:1\ufffd" + "",s="Realm Name",T="Enter a unique name for the Realm. The Realm is a logical grouping of all your Zonegroups.",F="Zone Group Name",k="Enter a name for the Zonegroup. Zonegroup will help you identify and manage the group of zones.",H="Zonegroup Endpoints",q="Select the endpoints for the Zonegroup. Endpoints are the URLs or IP addresses from which the rgw gateways in that zonegroup can be accessed. You can select multiple endpoints in case you have multiple rgw gateways in a zonegroup",oe="Pole jest wymagane.",le="The chosen realm name is already in use.",Re="Pole jest wymagane.",ce="The chosen zone group name is already in use.",Te="White spaces at the beginning and end will be trimmed",se="Zone Name",Ce="Enter a unique name for the Zone. A Zone represents a distinct data center or geographical location within a Zonegroup.",he="Zone Endpoints",ye="Select the endpoints for the Zone. Endpoints are the URLs or IP addresses from which the rgw gateways in that zone can be accessed. You can select multiple endpoints in case you have multiple rgw gateways in a zone",$e="Nazwa u\u017Cytkownika",Ge="Specify the username for the system user.",Ue="This user will be created automatically as part of the process, and it will have the necessary permissions to manage and synchronize resources across zones.",xe="Pole jest wymagane.",ke="The chosen zone name is already in use.",ve="Pole jest wymagane.",de="The username already exists.",pe="Replication Cluster",He="Choose the cluster where you want to apply this multisite configuration. The selected cluster will integrate the defined Realm, Zonegroup, and Zones, enabling data synchronization and management across the multisite setup.",Ye="Before submitting this form, please verify that the selected cluster has an active RGW (Rados Gateway) service running.",ze="Replication Zone Name",Ve="Replication zone represents the zone to be created in the replication cluster where your data will be replicated.",Ne="Pole jest wymagane.",fe="Skip",nt=" Multi-site replication setup is complete. ",ot="Realm Name",it="Name of the realm that will be involved in replication.",_t="Token",st="This field displays the token needed to import the multisite configuration into a secondary cluster. Copy this token securely and use it on the secondary cluster to replicate the current multisite setup. Ensure that the token is handled securely to prevent unauthorized access.",rt="Realm Name:",at="Zonegroup Name:",lt="Zonegroup Endpoints:",ct="Zone Name:",Qe="Zone Endpoints:",ut="Username:",dt="Selected Replication Cluster:",ft="Replication Zone Name:",[["formDir","ngForm"],["nonMultiClusterTemplate",""],["loadingTemplate",""],["progressCompleteTemplate",""],["progressTemplate",""],["exportTokenTemplate",""],["reviewTemplate",""],t,o,i,s,T,F,k,H,q,oe,le,Re,ce,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de,pe,He,Ye,ze,Ve,Ne,fe,nt,ot,it,_t,st,rt,at,lt,ct,Qe,ut,dt,ft,["size","lg",3,"overlaySelected","open","hasScrollingContent"],[3,"closeSelect"],["cdsModalHeaderHeading","","data-testid","rgw-multisite-wizard-header"],["cdsModalContent",""],["cdsRow",""],["cdsCol","",1,"indicator-wrapper",3,"columnNumbers"],[3,"stepsTitle"],["cdsCol","",3,"columnNumbers"],["novalidate","",3,"formGroup"],[3,"ngSwitch"],["class","ms-5",4,"ngSwitchCase"],["cass","ms-5",4,"ngSwitchCase"],["cdsButton","secondary","name","skip-cluster-selection","aria-label","Skip",3,"click",4,"ngIf"],["cdsButton","secondary",3,"click","disabled"],["cdsButton","primary","aria-label","Next",3,"click","disabled"],["size","sm",3,"isActive","overlay",4,"ngIf"],[1,"ms-5"],["type","info","spacingClass","mb-3"],[1,"form-group","row"],["for","realmName",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["type","text","placeholder","Realm name...","id","realmName","name","realmName","formControlName","realmName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","zonegroupName",1,"cd-col-form-label","required"],["type","text","placeholder","Zone group name...","id","zonegroupName","name","zonegroupName","formControlName","zonegroupName",1,"form-control"],["for","zonegroup_endpoints",1,"cd-col-form-label","required"],["id","zonegroup_endpoints",3,"data","options","customBadges"],[1,"invalid-feedback"],["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],["for","zone_endpoints",1,"cd-col-form-label","required"],["id","zone_endpoints",3,"data","options","customBadges"],["for","username",1,"cd-col-form-label","required"],["type","text","placeholder","Username...","id","username","name","username","formControlName","username","ngbTooltip",Te,"cdTrim","",1,"form-control"],["type","info",3,"showTitle"],["cass","ms-5"],[4,"ngIf","ngIfElse"],["for","cluster",1,"cd-col-form-label","required"],["id","cluster","formControlName","cluster","name","cluster",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Zone name...","id","replicationZoneName","name","replicationZoneName","formControlName","replicationZoneName",1,"form-control"],[3,"value"],[4,"ngIf"],[4,"ngTemplateOutlet"],["cdsButton","secondary","name","skip-cluster-selection","aria-label","Skip",3,"click"],["size","sm",3,"isActive","overlay"],[1,"text-center","text-success"],[3,"value","description"],[4,"ngFor","ngForOf"],["for","realmName",1,"cd-col-form-label"],["id","realmName","name","realmName","type","text","readonly","",3,"value"],["for","token",1,"cd-col-form-label"],["id","realmToken","name","realmToken","type","text","readonly","",1,"me-2","mb-4",3,"value"],[3,"source","byId"],[1,"cd-col-form-label"],["id","realmName",1,"cd-col-form-input","mt-2","text-muted"],["id","zonegroupName",1,"cd-col-form-input","mt-2","text-muted"],[1,"cd-col-form-input","mt-2","text-muted"],["id","zoneName",1,"cd-col-form-input","mt-2","text-muted"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"cds-modal",51),e.bIt("overlaySelected",function(){return e.eBV(s),e.Njj(i.closeModal())}),e.j41(1,"cds-modal-header",52),e.bIt("closeSelect",function(){return e.eBV(s),e.Njj(i.closeModal())}),e.j41(2,"h3",53),e.pXf(3,7),e.k0s()(),e.j41(4,"div",54)(5,"div",55)(6,"div",56),e.nrm(7,"cd-wizard",57),e.k0s(),e.j41(8,"div",58)(9,"form",59,0),e.qex(11,60),e.DNE(12,u1,31,7,"div",61)(13,T1,32,8,"div",61)(14,S1,2,2,"div",62)(15,G1,2,1,"div",61),e.bVm(),e.k0s()()()(),e.j41(16,"cds-modal-footer"),e.DNE(17,P1,2,0,"button",63),e.j41(18,"button",64),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onPreviousStep())}),e.pXf(19,8),e.k0s(),e.j41(20,"button",65),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onNextStep())}),e.PLo(21,9),e.DNE(22,I1,2,2,"cds-loading",66),e.YFu(),e.k0s()()(),e.DNE(23,A1,1,2,"ng-template",null,1,e.C5r)(25,D1,1,1,"ng-template",null,2,e.C5r)(27,$1,1,2,"ng-template",null,3,e.C5r)(29,v1,1,2,"ng-template",null,4,e.C5r)(31,U1,1,1,"ng-template",null,5,e.C5r)(33,k1,37,7,"ng-template",null,6,e.C5r)}2&o&&(e.Y8G("open",i.open)("hasScrollingContent",!0),e.R7$(6),e.Y8G("columnNumbers",e.lJ4(18,_1)),e.R7$(),e.Y8G("stepsTitle",i.stepTitles),e.R7$(),e.Y8G("columnNumbers",e.lJ4(19,s1)),e.R7$(),e.Y8G("formGroup",i.multisiteSetupForm),e.R7$(2),e.Y8G("ngSwitch",null==i.currentStep?null:i.currentStep.stepIndex),e.R7$(),e.Y8G("ngSwitchCase",0),e.R7$(),e.Y8G("ngSwitchCase",1),e.R7$(),e.Y8G("ngSwitchCase",2),e.R7$(),e.Y8G("ngSwitchCase",3),e.R7$(2),e.Y8G("ngIf","Select Cluster"===i.stepTitles[i.currentStep.stepIndex].label),e.R7$(),e.Y8G("disabled",i.loading),e.BMQ("aria-label",i.showCancelButtonLabel()),e.R7$(),e.uP7(i.showCancelButtonLabel()),e.nnv(19),e.R7$(),e.Y8G("disabled",i.loading),e.R7$(2),e.Y8G("ngIf",i.loading),e.uP7(i.showSubmitButtonLabel()),e.nnv(21))},dependencies:[R.Sq,R.bT,R.T3,R.ux,R.e1,nn.U,N.m,vt.N,n1.t,V.O,o1.X,i1.c,Oe.S,It.a,St.C,Xe.E,r.qT,r.xH,r.y7,r.me,r.wz,r.BC,r.cb,r.j4,r.JD,b.md,ae.aF,ae.rQ,ae.jl,ae.$m,ae.hN,et.ee,et.YP,mt.$n,yo.R,Ze.c$],styles:["cds-loading[_ngcontent-%COMP%]{margin-left:.5rem}"]})}return n})();var vo=g(73308);class Wn{data;customBadges;constructor(_=!1,t){this.customBadges=_,this.data={selected:[],available:[],validators:[r.k0.pattern("[A-Za-z0-9_-]+|\\*"),r.k0.maxLength(50)],messages:new $n.z({empty:"No zones added",customValidations:{pattern:"Allowed characters '-_a-zA-Z0-9|*'",maxlength:"Maximum length is 50 characters"},filter:"" + t + "",add:"Add zone"})}}}const X1=n=>({name:"zones",zone:n}),j1=n=>({name:"source_zone",zones:n}),B1=n=>({name:"destination_zone",zones:n});function z1(n,_){1&n&&(e.j41(0,"span",32),e.pXf(1,7),e.k0s())}function H1(n,_){1&n&&e.eu8(0)}function Y1(n,_){if(1&n&&(e.qex(0),e.j41(1,"div",22)(2,"label",33),e.qex(3),e.pXf(4,8),e.bVm(),e.j41(5,"cd-helper")(6,"span"),e.pXf(7,9),e.k0s()()(),e.j41(8,"div",24),e.DNE(9,H1,1,0,"ng-container",34),e.k0s()(),e.bVm()),2&n){const t=e.XpG(),o=e.sdS(28);e.R7$(9),e.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",e.eq3(2,X1,t.zones))}}function V1(n,_){1&n&&e.eu8(0)}function Z1(n,_){1&n&&e.eu8(0)}function K1(n,_){if(1&n&&(e.j41(0,"div",22)(1,"label",35),e.pXf(2,10),e.k0s(),e.j41(3,"div",24),e.DNE(4,V1,1,0,"ng-container",34),e.k0s()(),e.j41(5,"div",22)(6,"label",36),e.pXf(7,11),e.k0s(),e.j41(8,"div",24),e.DNE(9,Z1,1,0,"ng-container",34),e.k0s()()),2&n){const t=e.XpG(),o=e.sdS(30);e.R7$(4),e.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",e.eq3(4,j1,t.zones)),e.R7$(5),e.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",e.eq3(6,B1,t.zones))}}function q1(n,_){if(1&n&&(e.j41(0,"i",39),e.ehv(1,16),e.k0s()),2&n){const t=e.XpG().name,o=e.XpG();e.ZvI("",o.icons.warning," icon-warning-color"),e.uP7(null==t?null:t.split("_").join(" ")),e.nnv(1)}}function J1(n,_){if(1&n&&(e.j41(0,"span",32),e.pXf(1,12),e.k0s()),2&n){const t=e.XpG().name;e.R7$(),e.uP7(null==t?null:t.split("_").join(" ")),e.nnv(1)}}function Q1(n,_){if(1&n){const t=e.RV6();e.j41(0,"cd-select-badges",37),e.bIt("selection",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.zoneSelection())}),e.k0s(),e.DNE(1,q1,2,4,"i",38)(2,J1,2,1,"span",28)}if(2&n){const t=_.name,o=_.zone,i=e.XpG(),s=e.sdS(7);e.Y8G("id",t)("name",t)("customBadges",o.customBadges)("customBadgeValidators",o.data.validators)("messages",o.data.messages)("data",o.data.selected)("options",o.data.available),e.R7$(),e.Y8G("ngIf",o.data.selected.length<=0),e.R7$(),e.Y8G("ngIf",i.currentFormGroupContext.showError(t,s,"required"))}}function ef(n,_){1&n&&(e.j41(0,"option",43),e.pXf(1,13),e.k0s()),2&n&&e.Y8G("ngValue",null)}function tf(n,_){if(1&n&&(e.j41(0,"option",43),e.pXf(1,14),e.k0s()),2&n){const t=e.XpG().name;e.Y8G("ngValue",null),e.R7$(),e.uP7(t.split("_").join(" ")),e.nnv(1)}}function nf(n,_){if(1&n&&(e.j41(0,"option",44),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.Y8G("value",t.name),e.R7$(),e.JRh(t.name)}}function of(n,_){1&n&&(e.j41(0,"span",32),e.pXf(1,15),e.k0s())}function _f(n,_){if(1&n){const t=e.RV6();e.j41(0,"select",40),e.bIt("change",function(i){const s=e.eBV(t).name,T=e.XpG();return e.Njj(T.onChangeZoneDropdown(s,i))}),e.DNE(1,ef,2,1,"option",41)(2,tf,2,2,"option",41)(3,nf,2,2,"option",42),e.k0s(),e.DNE(4,of,2,0,"span",28)}if(2&n){const t=_.name,o=_.zones,i=e.XpG(),s=e.sdS(7);e.Y8G("id",t)("name",t)("autofocus",i.editing),e.R7$(),e.Y8G("ngIf",0==o.data.available.length),e.R7$(),e.Y8G("ngIf",o.data.available.length>0),e.R7$(),e.Y8G("ngForOf",o.data.available),e.R7$(),e.Y8G("ngIf",i.currentFormGroupContext.showError(t,s,"required"))}}let sf=(()=>{class n{activeModal;actionLabels;notificationService;rgwDaemonService;rgwZonegroupService;rgwMultisiteService;succeededLabels;action;editing=!1;groupType;groupExpandedRow;flowSelectedRow;syncPolicyDirectionalFlowForm;syncPolicySymmetricalFlowForm;syncPolicyPipeForm;currentFormGroupContext;flowType=Le.do;icons=S.F;zones=new Wn(!1,"Filter Zones");constructor(t,o,i,s,T,F,k){this.activeModal=t,this.actionLabels=o,this.notificationService=i,this.rgwDaemonService=s,this.rgwZonegroupService=T,this.rgwMultisiteService=F,this.succeededLabels=k}ngOnInit(){"edit"===this.action&&(this.editing=!0),this.groupType===Le.do.symmetrical?(this.createSymmetricalFlowForm(),this.currentFormGroupContext=h().cloneDeep(this.syncPolicySymmetricalFlowForm)):this.groupType===Le.do.directional&&(this.createDirectionalFlowForm(),this.currentFormGroupContext=h().cloneDeep(this.syncPolicyDirectionalFlowForm)),this.currentFormGroupContext.get("bucket_name").disable(),this.editing&&(this.currentFormGroupContext.patchValue({flow_id:this.flowSelectedRow.id,bucket_name:this.groupExpandedRow.bucket||""}),this.currentFormGroupContext.get("flow_id").disable()),this.rgwDaemonService.selectedDaemon$.pipe((0,M.n)(t=>{if(t){const o=new Le.Oe;return o.name=t?.zonegroup_name,this.rgwZonegroupService.get(o).pipe((0,Ht.W)(()=>(0,Nt.of)([])))}return(0,Nt.of)([])})).subscribe(t=>{if(t&&t?.zones?.length>0){const o=[];t.zones.forEach(i=>{o.push(new Zt.O(!1,i.name,""))}),this.zones.data.available=[...o],this.editing&&(this.groupType===Le.do.symmetrical&&(this.zones.data.selected=[...this.flowSelectedRow.zones]),this.zoneSelection())}})}createSymmetricalFlowForm(){this.syncPolicySymmetricalFlowForm=new tt.$({...this.commonFormControls(Le.do.symmetrical),zones:new r.hs([],{validators:[r.k0.required]})})}createDirectionalFlowForm(){this.syncPolicyDirectionalFlowForm=new tt.$({...this.commonFormControls(Le.do.directional),source_zone:new r.hs("",{validators:[r.k0.required]}),destination_zone:new r.hs("",{validators:[r.k0.required]})})}onChangeZoneDropdown(t,o){const i=o.target.value;this.currentFormGroupContext.get(t).setValue(i)}commonFormControls(t){return{bucket_name:new r.hs(this.groupExpandedRow?.bucket),group_id:new r.hs(this.groupExpandedRow?.groupName,{validators:[r.k0.required]}),flow_id:new r.hs("",{validators:[r.k0.required]}),flow_type:new r.hs(t,{validators:[r.k0.required]})}}zoneSelection(){this.groupType===Le.do.symmetrical&&this.currentFormGroupContext.patchValue({zones:this.zones.data.selected})}getZoneData(t,o){return t.filter(i=>!o.includes(i))}assignZoneValue(t,o){return t.length>0?t:o}submit(){const t={added:[],removed:[]};if(!this.currentFormGroupContext.invalid){if(this.currentFormGroupContext.pending)return void this.currentFormGroupContext.setErrors({cdSubmitButton:!0});this.groupType==Le.do.symmetrical&&(this.editing&&(t.removed=this.getZoneData(this.flowSelectedRow.zones,this.zones.data.selected),t.added=this.getZoneData(this.zones.data.selected,this.flowSelectedRow.zones)),t.added=this.assignZoneValue(t.added,this.zones.data.selected)),this.rgwMultisiteService.createEditSyncFlow({...this.currentFormGroupContext.getRawValue(),zones:t}).subscribe(()=>{this.notificationService.show(f._.success,"" + (this.editing ? this.succeededLabels.EDITED : this.succeededLabels.CREATED) + " Sync Flow '" + this.currentFormGroupContext.getValue("flow_id") + "'"),this.activeModal.close(f._.success)},()=>{this.currentFormGroupContext.setErrors({cdSubmitButton:!0}),this.activeModal.dismiss()})}}static \u0275fac=function(o){return new(o||n)(e.rXU(b.Lw),e.rXU(m.Ss),e.rXU(B.J),e.rXU(Q.y),e.rXU(ht.Z),e.rXU(y.A),e.rXU(m.Vv))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-multisite-sync-flow-modal"]],decls:31,vars:17,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te;return t="Bucket Name...",o="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + " Flow",i="Nazwa",s="Bucket Name",T="The bucket with chosen name does not exist.",F="Zones",k="Flow need to be associated with atleast one zone",H="Source Zone ",q="Destination Zone",oe="Flow should be associated with " + "\ufffd0\ufffd" + "",le="" + "\ufffd0\ufffd" + " selection is required! ",Re="\u0141adowanie...",ce="-- Select " + "\ufffd0\ufffd" + " --",Te="Pole jest wymagane.",[["frm","ngForm"],["directionalFlow",""],["zoneMultiSelect",""],["sourceAndDestZone",""],o,i,s,T,F,k,H,q,le,Re,ce,Te,["title",oe],[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","flowForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","flow_id",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["type","text","placeholder","Flow Name...","id","flow_id","name","flow_id","formControlName","flow_id",1,"form-control"],["for","bucket",1,"cd-col-form-label"],["id","bucket","name","bucket","type","text","placeholder",t,"formControlName","bucket_name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[1,"invalid-feedback"],["for","zones",1,"cd-col-form-label","required"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","source_zone",1,"cd-col-form-label","required"],["for","destination_zone",1,"cd-col-form-label","required"],[3,"selection","id","name","customBadges","customBadgeValidators","messages","data","options"],[3,"title","class",4,"ngIf"],[6,"title"],[1,"form-select",3,"change","id","name","autofocus"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"value"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"cd-modal",17),e.qex(1,18),e.pXf(2,4),e.nI1(3,"titlecase"),e.nI1(4,"upperFirst"),e.bVm(),e.qex(5,19),e.j41(6,"form",20,0)(8,"div",21)(9,"div",22)(10,"label",23),e.pXf(11,5),e.k0s(),e.j41(12,"div",24),e.nrm(13,"input",25),e.k0s()(),e.j41(14,"div",22)(15,"label",26),e.pXf(16,6),e.k0s(),e.j41(17,"div",24),e.nrm(18,"input",27),e.DNE(19,z1,2,0,"span",28),e.k0s()(),e.DNE(20,Y1,10,4,"ng-container",29)(21,K1,10,8,"ng-template",null,1,e.C5r),e.k0s(),e.j41(23,"div",30)(24,"cd-form-button-panel",31),e.nI1(25,"titlecase"),e.nI1(26,"upperFirst"),e.bIt("submitActionEvent",function(){return e.eBV(s),e.Njj(i.submit())}),e.k0s()()(),e.bVm(),e.k0s(),e.DNE(27,Q1,3,9,"ng-template",null,2,e.C5r)(29,_f,5,7,"ng-template",null,3,e.C5r)}if(2&o){const s=e.sdS(7),T=e.sdS(22);e.Y8G("modalRef",i.activeModal),e.R7$(4),e.uP7(e.bMT(3,9,i.action))(e.bMT(4,11,i.groupType)),e.nnv(2),e.R7$(2),e.Y8G("formGroup",i.currentFormGroupContext),e.R7$(13),e.Y8G("ngIf",i.currentFormGroupContext.showError("bucket_name",s,"bucketNameNotAllowed")),e.R7$(),e.Y8G("ngIf",i.groupType==i.flowType.symmetrical)("ngIfElse",T),e.R7$(4),e.Y8G("form",i.currentFormGroupContext)("submitText",e.bMT(25,13,i.action)+" "+e.bMT(26,15,i.groupType)+" Flow")}},dependencies:[R.Sq,R.bT,R.T3,wt.m,nn.U,Pt.z,We.e,Ae.B,Oe.S,It.a,St.C,Xe.E,r.qT,r.xH,r.y7,r.me,r.BC,r.cb,r.j4,r.JD,Ze.c$,R.PV,pt.r]})}return n})();const rf=n=>({name:"source_zones",zone:n}),af=n=>({name:"destination_zones",zone:n});function lf(n,_){1&n&&e.eu8(0)}function cf(n,_){1&n&&e.eu8(0)}function uf(n,_){if(1&n&&(e.j41(0,"i",36),e.ehv(1,12),e.k0s()),2&n){const t=e.XpG().name,o=e.XpG();e.ZvI("",o.icons.warning," icon-warning-color"),e.uP7(null==t?null:t.split("_").join(" ")),e.nnv(1)}}function df(n,_){if(1&n&&(e.j41(0,"span",37),e.pXf(1,11),e.k0s()),2&n){const t=e.XpG().name;e.R7$(),e.uP7(null==t?null:t.split("_").join(" ")),e.nnv(1)}}function ff(n,_){if(1&n){const t=e.RV6();e.j41(0,"cd-select-badges",33),e.bIt("selection",function(){const i=e.eBV(t).name,s=e.XpG();return e.Njj(s.onZoneSelection(i))}),e.k0s(),e.DNE(1,uf,2,4,"i",34)(2,df,2,1,"span",35)}if(2&n){const t=_.name,o=_.zone,i=e.XpG(),s=e.sdS(6);e.FS9("id",t),e.FS9("name",t),e.Y8G("customBadges",o.customBadges)("customBadgeValidators",o.data.validators)("messages",o.data.messages)("data",o.data.selected)("options",o.data.available),e.R7$(),e.Y8G("ngIf",o.data.selected.length<=0),e.R7$(),e.Y8G("ngIf",i.pipeForm.showError(t,s,"required"))}}const wn="All zones (*)";let gf=(()=>{class n{activeModal;rgwDaemonService;rgwZonegroupService;rgwMultisiteService;notificationService;succeededLabels;groupExpandedRow;pipeSelectedRow;pipeForm;action;editing;sourceZones=new Wn(!1,"Filter Zones");destZones=new Wn(!1,"Filter Zones");icons=S.F;allBucketSelectedHelpText="If no value is provided, all the buckets in the zone group will be selected.";constructor(t,o,i,s,T,F){this.activeModal=t,this.rgwDaemonService=o,this.rgwZonegroupService=i,this.rgwMultisiteService=s,this.notificationService=T,this.succeededLabels=F}ngOnInit(){this.pipeSelectedRow&&(this.pipeSelectedRow.source.zones=this.replaceAsteriskWithString(this.pipeSelectedRow.source.zones),this.pipeSelectedRow.dest.zones=this.replaceAsteriskWithString(this.pipeSelectedRow.dest.zones)),this.editing="create"!==this.action,this.pipeForm=new tt.$({pipe_id:new r.hs("",{validators:[r.k0.required]}),group_id:new r.hs(this.groupExpandedRow?.groupName||"",{validators:[r.k0.required]}),bucket_name:new r.hs(this.groupExpandedRow?.bucket||""),source_bucket:new r.hs(""),source_zones:new r.hs("",{validators:[r.k0.required]}),destination_bucket:new r.hs(""),destination_zones:new r.hs("",{validators:[r.k0.required]})}),this.pipeForm.get("bucket_name").disable(),this.rgwDaemonService.selectedDaemon$.pipe((0,M.n)(t=>{if(t){const o=new Le.Oe;return o.name=t.zonegroup_name,this.rgwZonegroupService.get(o).pipe((0,Ht.W)(()=>(0,Nt.of)([])))}return(0,Nt.of)([])})).subscribe(t=>{if(t&&t?.zones?.length>0){let o=[];if(o.push(new Zt.O(!1,wn,"")),t.zones.forEach(i=>{o.push(new Zt.O(!1,i.name,""))}),this.sourceZones.data.available=JSON.parse(JSON.stringify(o)),this.destZones.data.available=JSON.parse(JSON.stringify(o)),this.editing){this.pipeForm.get("pipe_id").disable(),this.sourceZones.data.selected=[...this.pipeSelectedRow.source.zones],this.destZones.data.selected=[...this.pipeSelectedRow.dest.zones];const i=[];this.pipeSelectedRow.dest.zones.forEach(s=>{i.push(new Zt.O(!0,s,""))}),this.pipeForm.patchValue({pipe_id:this.pipeSelectedRow.id,source_zones:this.pipeSelectedRow.source.zones,destination_zones:this.pipeSelectedRow.dest.zones,source_bucket:this.pipeSelectedRow.source.bucket,destination_bucket:this.pipeSelectedRow.dest.bucket})}}})}replaceWithAsterisk(t){return t.map(o=>o.replace(wn,"*"))}replaceAsteriskWithString(t){return t.map(o=>o.replace("*",wn))}onZoneSelection(t){this.pipeForm.patchValue("source_zones"===t?{source_zones:this.sourceZones.data.selected}:{destination_zones:this.destZones.data.selected})}getZoneData(t,o){return t.filter(i=>!o.includes(i))}assignZoneValue(t,o){return this.replaceWithAsterisk(t.length>0?t:o)}submit(){const t={added:[],removed:[]},o={added:[],removed:[]};if(!this.pipeForm.invalid){if(this.pipeForm.pending)return void this.pipeForm.setErrors({cdSubmitButton:!0});this.editing&&(o.removed=this.getZoneData(this.pipeSelectedRow.dest.zones,this.destZones.data.selected),o.added=this.getZoneData(this.destZones.data.selected,this.pipeSelectedRow.dest.zones),t.removed=this.getZoneData(this.pipeSelectedRow.source.zones,this.sourceZones.data.selected),t.added=this.getZoneData(this.sourceZones.data.selected,this.pipeSelectedRow.source.zones)),t.added=this.assignZoneValue(t.added,this.sourceZones.data.selected),o.added=this.assignZoneValue(o.added,this.destZones.data.selected),t.removed=this.replaceWithAsterisk(t.removed),o.removed=this.replaceWithAsterisk(o.removed),this.rgwMultisiteService.createEditSyncPipe({...this.pipeForm.getRawValue(),source_zones:t,destination_zones:o,user:this.editing?this.pipeSelectedRow?.params?.user:"",mode:this.editing?this.pipeSelectedRow?.params?.mode:""}).subscribe(()=>{this.notificationService.show(f._.success,"" + (this.editing ? this.succeededLabels.EDITED : this.succeededLabels.CREATED) + " Sync Pipe '" + this.pipeForm.getValue("pipe_id") + "'"),this.activeModal.close(f._.success)},()=>{this.pipeForm.setErrors({cdSubmitButton:!0}),this.activeModal.dismiss()})}}static \u0275fac=function(o){return new(o||n)(e.rXU(b.Lw),e.rXU(Q.y),e.rXU(ht.Z),e.rXU(y.A),e.rXU(B.J),e.rXU(m.Vv))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-multisite-sync-pipe-modal"]],decls:49,vars:20,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te;return t="Bucket Name...",o="Source Bucket Name...",i="Destination Bucket Name...",s="" + "\ufffd0\ufffd" + " Pipe",T="Nazwa",F="Source Zone ",k="Destination Zone",H="Bucket Name",q="Source Bucket",oe="" + "\ufffd0\ufffd" + "",le="Destination Bucket",Re="" + "\ufffd0\ufffd" + "",ce="Pipe should be associated with " + "\ufffd0\ufffd" + "",Te="" + "\ufffd0\ufffd" + " selection is required! ",[["frm","ngForm"],["zoneMultiSelect",""],s,T,F,k,H,q,oe,le,Re,Te,["title",ce],[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","pipeForm","novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","pipe_id",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["type","text","placeholder","Pipe Name...","id","pipe_id","name","pipe_id","formControlName","pipe_id",1,"form-control",3,"readonly"],["for","source_zone",1,"cd-col-form-label","required"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","destination_zone",1,"cd-col-form-label","required"],["for","bucket",1,"cd-col-form-label"],["id","bucket","name","bucket","type","text","placeholder",t,"formControlName","bucket_name",1,"form-control"],["for","source_bucket",1,"cd-col-form-label"],["id","source_bucket","name","source_bucket","type","text","placeholder",o,"formControlName","source_bucket",1,"form-control"],["for","dest_bucket",1,"cd-col-form-label"],["id","dest_bucket","name","dest_bucket","type","text","placeholder",i,"formControlName","destination_bucket",1,"form-control"],[1,"modal-footer"],[3,"submitActionEvent","form","submitText"],[3,"selection","id","name","customBadges","customBadgeValidators","messages","data","options"],[3,"title","class",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],[6,"title"],[1,"invalid-feedback"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"cd-modal",13),e.qex(1,14),e.pXf(2,2),e.nI1(3,"titlecase"),e.bVm(),e.qex(4,15),e.j41(5,"form",16,0)(7,"div",17)(8,"div",18)(9,"label",19),e.pXf(10,3),e.k0s(),e.j41(11,"div",20),e.nrm(12,"input",21),e.k0s()(),e.j41(13,"div",18)(14,"label",22),e.pXf(15,4),e.k0s(),e.j41(16,"div",20),e.DNE(17,lf,1,0,"ng-container",23),e.k0s()(),e.j41(18,"div",18)(19,"label",24),e.pXf(20,5),e.k0s(),e.j41(21,"div",20),e.DNE(22,cf,1,0,"ng-container",23),e.k0s()(),e.j41(23,"div",18)(24,"label",25),e.pXf(25,6),e.k0s(),e.j41(26,"div",20),e.nrm(27,"input",26),e.k0s()(),e.j41(28,"div",18)(29,"label",27),e.pXf(30,7),e.k0s(),e.j41(31,"div",20),e.nrm(32,"input",28),e.j41(33,"cd-help-text")(34,"span"),e.pXf(35,8),e.k0s()()()(),e.j41(36,"div",18)(37,"label",29),e.pXf(38,9),e.k0s(),e.j41(39,"div",20),e.nrm(40,"input",30),e.j41(41,"cd-help-text")(42,"span"),e.pXf(43,10),e.k0s()()()()(),e.j41(44,"div",31)(45,"cd-form-button-panel",32),e.nI1(46,"titlecase"),e.bIt("submitActionEvent",function(){return e.eBV(s),e.Njj(i.submit())}),e.k0s()()(),e.bVm(),e.k0s(),e.DNE(47,ff,3,9,"ng-template",null,1,e.C5r)}if(2&o){const s=e.sdS(48);e.Y8G("modalRef",i.activeModal),e.R7$(3),e.uP7(e.bMT(3,12,i.action)),e.nnv(2),e.R7$(2),e.Y8G("formGroup",i.pipeForm),e.R7$(7),e.Y8G("readonly",i.editing),e.R7$(5),e.Y8G("ngTemplateOutlet",s)("ngTemplateOutletContext",e.eq3(16,rf,i.sourceZones)),e.R7$(5),e.Y8G("ngTemplateOutlet",s)("ngTemplateOutletContext",e.eq3(18,af,i.destZones)),e.R7$(13),e.uP7(i.allBucketSelectedHelpText),e.nnv(35),e.R7$(8),e.uP7(i.allBucketSelectedHelpText),e.nnv(43),e.R7$(2),e.Y8G("form",i.pipeForm)("submitText",e.bMT(46,14,i.action)+" Pipe")}},dependencies:[R.bT,R.T3,nn.U,Pt.z,We.e,V.O,Oe.S,It.a,St.C,Xe.E,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,R.PV]})}return n})();const Tf=["deleteTpl"];function Rf(n,_){if(1&n){const t=e.RV6();e.j41(0,"legend"),e.EFF(1," Symmetrical "),e.j41(2,"cd-help-text"),e.EFF(3," It can define symmetrical data flow, in which multiple zones sync data from each other. "),e.k0s()(),e.j41(4,"cd-table",14,2),e.bIt("updateSelection",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.updateSelection(i,s.flowType.symmetrical))})("fetchData",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.loadData(i))}),e.j41(6,"div",15),e.nrm(7,"cd-table-actions",16),e.k0s()(),e.j41(8,"legend"),e.EFF(9," Directional "),e.j41(10,"cd-help-text"),e.EFF(11," It can define directional data flow, in which the data moves in one way, from one zone to another. "),e.k0s()(),e.j41(12,"cd-table",14,2),e.bIt("updateSelection",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.updateSelection(i,s.flowType.directional))})("fetchData",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.loadData(i))}),e.j41(14,"div",15),e.nrm(15,"cd-table-actions",16),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(4),e.Y8G("autoReload",!1)("data",t.symmetricalFlowData)("columns",t.symmetricalFlowCols)("searchableObjects",!0)("hasDetails",!1)("serverSide",!1)("count",0)("maxLimit",25)("toolHeader",!0),e.R7$(3),e.Y8G("permission",t.permission)("selection",t.symFlowSelection)("tableActions",t.symFlowTableActions),e.R7$(5),e.Y8G("autoReload",!1)("data",t.directionalFlowData)("columns",t.directionalFlowCols)("searchableObjects",!0)("hasDetails",!1)("serverSide",!1)("count",0)("maxLimit",25)("toolHeader",!0),e.R7$(3),e.Y8G("permission",t.permission)("selection",t.dirFlowSelection)("tableActions",t.dirFlowTableActions)}}function mf(n,_){if(1&n){const t=e.RV6();e.j41(0,"legend"),e.PLo(1,5),e.nrm(2,"cd-help-text"),e.YFu(),e.k0s(),e.j41(3,"cd-table",17,2),e.bIt("updateSelection",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.pipeSelection=i)})("fetchData",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.loadData(i))}),e.j41(5,"div",15),e.nrm(6,"cd-table-actions",16),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(3),e.Y8G("data",t.pipeData)("columns",t.pipeCols)("searchableObjects",!0)("hasDetails",!1)("serverSide",!1)("toolHeader",!0),e.R7$(3),e.Y8G("permission",t.permission)("selection",t.pipeSelection)("tableActions",t.pipeTableActions)}}function Ef(n,_){if(1&n&&(e.qex(0),e.j41(1,"nav",8,1),e.qex(3,9),e.j41(4,"a",10),e.pXf(5,3),e.k0s(),e.DNE(6,Rf,16,24,"ng-template",11),e.bVm(),e.qex(7,12),e.j41(8,"a",10),e.pXf(9,4),e.k0s(),e.DNE(10,mf,7,9,"ng-template",11),e.bVm(),e.k0s(),e.nrm(11,"div",13),e.bVm()),2&n){const t=e.sdS(2);e.R7$(11),e.Y8G("ngbNavOutlet",t)}}function Sf(n,_){if(1&n&&(e.j41(0,"cd-alert-panel",18),e.pXf(1,6),e.nI1(2,"upperFirst"),e.k0s()),2&n){const t=e.XpG();e.R7$(2),e.uP7(e.bMT(2,1,t.resourceType)),e.nnv(1)}}var In=function(n){return n.flow="flow",n.pipe="pipe",n}(In||{});let Ff=(()=>{class n{actionLabels;modalService;rgwMultisiteService;taskWrapper;cdsModalService;expandedRow;permission;table;deleteTpl;resourceType=In.flow;flowType=Le.do;modalRef;symmetricalFlowData=[];directionalFlowData=[];pipeData=[];symmetricalFlowCols;directionalFlowCols;pipeCols;symFlowTableActions;dirFlowTableActions;pipeTableActions;symFlowSelection=new gt.y;dirFlowSelection=new gt.y;pipeSelection=new gt.y;constructor(t,o,i,s,T){this.actionLabels=t,this.modalService=o,this.rgwMultisiteService=i,this.taskWrapper=s,this.cdsModalService=T,this.symmetricalFlowCols=[{name:"Name",prop:"id",flexGrow:1},{name:"Zones",prop:"zones",flexGrow:1}],this.directionalFlowCols=[{name:"Source Zone",prop:"source_zone",flexGrow:1},{name:"Destination Zone",prop:"dest_zone",flexGrow:1}],this.pipeCols=[{name:"Name",prop:"id",flexGrow:1},{name:"Source Zone",prop:"source.zones",flexGrow:1},{name:"Destination Zone",prop:"dest.zones",flexGrow:1},{name:"Source Bucket",prop:"source.bucket",flexGrow:1},{name:"Destination Bucket",prop:"dest.bucket",flexGrow:1}],this.symFlowTableActions=[{permission:"create",icon:S.F.add,name:this.actionLabels.CREATE,click:()=>this.openModal(Le.do.symmetrical),canBePrimary:Te=>!Te.hasSelection},{permission:"update",icon:S.F.edit,name:this.actionLabels.EDIT,click:()=>this.openModal(Le.do.symmetrical,!0)},{permission:"delete",icon:S.F.destroy,disable:()=>!this.symFlowSelection.hasSelection,name:this.actionLabels.DELETE,click:()=>this.deleteFlow(Le.do.symmetrical),canBePrimary:Te=>Te.hasMultiSelection}],this.dirFlowTableActions=[{permission:"create",icon:S.F.add,name:this.actionLabels.CREATE,click:()=>this.openModal(Le.do.directional),canBePrimary:Te=>!Te.hasSelection},{permission:"delete",icon:S.F.destroy,disable:()=>"Deleting the directional flow is disabled in the UI. Please use CLI to delete the directional flow",name:this.actionLabels.DELETE,click:()=>this.deleteFlow(Le.do.directional),canBePrimary:Te=>Te.hasSelection}],this.pipeTableActions=[{permission:"create",icon:S.F.add,name:this.actionLabels.CREATE,click:()=>this.openPipeModal(),canBePrimary:Te=>!Te.hasSelection},{permission:"update",icon:S.F.edit,name:this.actionLabels.EDIT,click:()=>this.openPipeModal(!0)},{permission:"delete",icon:S.F.destroy,disable:()=>!this.pipeSelection.hasSelection,name:this.actionLabels.DELETE,click:()=>this.deletePipe(),canBePrimary:Te=>Te.hasMultiSelection}]}ngOnChanges(t){t.expandedRow.currentValue&&t.expandedRow.currentValue.groupName&&(this.symmetricalFlowData=[],this.directionalFlowData=[],this.loadData())}loadData(t){this.expandedRow&&this.rgwMultisiteService.getSyncPolicyGroup(this.expandedRow.groupName,this.expandedRow.bucket).subscribe(o=>{this.symmetricalFlowData=o.data_flow[Le.do.symmetrical]||[],this.directionalFlowData=o.data_flow[Le.do.directional]||[],this.pipeData=o.pipes||[]},()=>{t&&t.error()})}updateSelection(t,o){o===Le.do.directional?this.dirFlowSelection=t:this.symFlowSelection=t}openModal(t,o=!1){var i=this;return(0,vo.A)(function*(){const s=o?"edit":"create",T={groupType:t,groupExpandedRow:i.expandedRow,flowSelectedRow:t===Le.do.symmetrical?i.symFlowSelection.first():i.dirFlowSelection.first(),action:s};i.modalRef=i.modalService.show(sf,T,{size:"lg"});try{(yield i.modalRef.result)===f._.success&&i.loadData()}catch{}})()}deleteFlow(t){this.resourceType=In.flow;let o=this.symFlowSelection;t===Le.do.directional&&(o=this.dirFlowSelection);const i=o.selected.map(s=>s.id);this.cdsModalService.show(Lt.D,{itemDescription:o.hasSingleSelection?"Flow":"Flows",itemNames:i,bodyTemplate:this.deleteTpl,submitActionObservable:()=>new Bt.c(s=>{this.taskWrapper.wrapTaskAroundCall({task:new zt.O("rgw/multisite/sync-flow/delete",{flow_ids:i}),call:(0,v.p)(o.selected.map(T=>this.rgwMultisiteService.removeSyncFlow(T.id,t,this.expandedRow.groupName,this.expandedRow.bucket)))}).subscribe({error:T=>{s.error(T),this.table.refreshBtn()},complete:()=>{s.complete(),this.table.refreshBtn()}})})})}openPipeModal(t=!1){var o=this;return(0,vo.A)(function*(){const i=t?"edit":"create",s={groupExpandedRow:o.expandedRow,pipeSelectedRow:o.pipeSelection.first(),action:i};o.modalRef=o.modalService.show(gf,s,{size:"lg"});try{(yield o.modalRef.result)===f._.success&&o.loadData()}catch{}})()}deletePipe(){this.resourceType=In.pipe;const t=this.pipeSelection.selected.map(o=>o.id);this.cdsModalService.show(Lt.D,{itemDescription:this.pipeSelection.hasSingleSelection?"Pipe":"Pipes",itemNames:t,bodyTemplate:this.deleteTpl,submitActionObservable:()=>new Bt.c(o=>{this.taskWrapper.wrapTaskAroundCall({task:new zt.O("rgw/multisite/sync-pipe/delete",{pipe_ids:t}),call:(0,v.p)(this.pipeSelection.selected.map(i=>this.rgwMultisiteService.removeSyncPipe(i.id,this.expandedRow.groupName,this.expandedRow.bucket)))}).subscribe({error:i=>{o.error(i),this.table.refreshBtn()},complete:()=>{o.complete(),this.table.refreshBtn()}})})})}static \u0275fac=function(o){return new(o||n)(e.rXU(m.Ss),e.rXU(tn.B),e.rXU(y.A),e.rXU(Qt.a),e.rXU(Mt.V))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-multisite-sync-policy-details"]],viewQuery:function(o,i){if(1&o&&(e.GBs(Je.O,5),e.GBs(Tf,7)),2&o){let s;e.mGM(s=e.lsd())&&(i.table=s.first),e.mGM(s=e.lsd())&&(i.deleteTpl=s.first)}},inputs:{expandedRow:"expandedRow",permission:"permission"},features:[e.OA$],decls:3,vars:1,consts:()=>{let t,o,i,s;return t="Flow",o="Pipe",i=" Pipe " + "\ufffd#2\ufffd" + " A pipe defines the actual buckets that can use these data flows, and the properties that are associated with it. " + "\ufffd/#2\ufffd" + "",s=" Deleting " + "\ufffd0\ufffd" + " may disrupt data synchronization ",[["deleteTpl",""],["nav","ngbNav"],["table",""],t,o,i,s,[4,"ngIf"],["ngbNav","","cdStatefulTab","sync-policy-details",1,"nav-tabs"],["ngbNavItem","flow"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","pipe"],[3,"ngbNavOutlet"],["columnMode","flex","selectionType","multiClick",3,"updateSelection","fetchData","autoReload","data","columns","searchableObjects","hasDetails","serverSide","count","maxLimit","toolHeader"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"],["selectionType","multiClick",3,"updateSelection","fetchData","data","columns","searchableObjects","hasDetails","serverSide","toolHeader"],["type","danger"]]},template:function(o,i){1&o&&e.DNE(0,Ef,12,1,"ng-container",7)(1,Sf,3,3,"ng-template",null,0,e.C5r),2&o&&e.Y8G("ngIf",i.expandedRow)},dependencies:[R.bT,N.m,V.O,Je.O,Ot.j,Gn.B,b.Um,b.X9,b.sy,b.Ri,b.WA,b.m_,pt.r],styles:["datatable-scroller{width:100%!important}"]})}return n})(),Wo=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-multisite-tabs"]],decls:7,vars:0,consts:()=>{let t,o;return t="Konfiguracja",o="Sync Policy",[t,o,[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/rgw/multisite/configuration","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link"],["routerLink","//rgw/multisite/sync-policy","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link"]]},template:function(o,i){1&o&&(e.j41(0,"ul",2)(1,"li",3)(2,"a",4),e.pXf(3,0),e.k0s()(),e.j41(4,"li",3)(5,"a",5),e.pXf(6,1),e.k0s()()())},dependencies:[I.Wk,I.wQ]})}return n})();const Cf=["deleteTpl"];function Mf(n,_){if(1&n&&e.nrm(0,"cd-rgw-multisite-sync-policy-details",9),2&n){const t=e.XpG();e.Y8G("expandedRow",t.expandedRow)("permission",t.permission)}}function hf(n,_){1&n&&(e.j41(0,"cd-alert-panel",10),e.pXf(1,3),e.k0s())}const Un="rgw/multisite/sync-policy";let wo=(()=>{class n extends Dt.D{rgwMultisiteService;titleCasePipe;actionLabels;authStorageService;modalService;taskWrapper;router;rgwDaemonService;table;deleteTpl;columns=[];syncPolicyData=[];tableActions;selection=new gt.y;permission;constructor(t,o,i,s,T,F,k,H){super(),this.rgwMultisiteService=t,this.titleCasePipe=o,this.actionLabels=i,this.authStorageService=s,this.modalService=T,this.taskWrapper=F,this.router=k,this.rgwDaemonService=H}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{prop:"uniqueId",isInvisible:!0,isHidden:!0},{name:"Group Name",prop:"groupName",flexGrow:1},{name:"Status",prop:"status",flexGrow:1,cellTransformation:bt.x.tooltip,customTemplateConfig:{map:{Enabled:{class:"badge-success",tooltip:"sync is allowed and enabled"},Allowed:{class:"badge-info",tooltip:"sync is allowed"},Forbidden:{class:"badge-warning",tooltip:"sync (as defined by this group) is not allowed and can override other groups"}}},pipe:this.titleCasePipe},{name:"Strefa ",prop:"zonegroup",flexGrow:1,cellTransformation:bt.x.map,customTemplateConfig:{undefined:"-","":"-"}},{name:"Bucket",prop:"bucket",flexGrow:1,cellTransformation:bt.x.map,customTemplateConfig:{undefined:"-","":"-"}}],this.rgwDaemonService.list().subscribe();const t=()=>this.selection.first().groupName&&this.selection.first().bucket?`${m.Qp.EDIT}/${this.selection.first().groupName}/${this.selection.first().bucket}`:`${m.Qp.EDIT}/${this.selection.first().groupName}`;this.tableActions=[{permission:"create",icon:S.F.add,click:()=>this.router.navigate([Un,{outlets:{modal:m.Qp.CREATE}}]),name:this.actionLabels.CREATE,canBePrimary:T=>!T.hasSelection},{permission:"update",icon:S.F.edit,click:()=>this.router.navigate([Un,{outlets:{modal:t()}}]),name:this.actionLabels.EDIT},{permission:"delete",icon:S.F.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:T=>T.hasMultiSelection}]}transformSyncPolicyData(t){t&&t.length>0&&(t.forEach(o=>{this.syncPolicyData.push({uniqueId:o.id+(o.bucketName?o.bucketName:""),groupName:o.id,status:o.status,bucket:o.bucketName,zonegroup:o.zonegroup})}),this.syncPolicyData=[...this.syncPolicyData])}updateSelection(t){this.selection=t}getPolicyList(t){this.rgwMultisiteService.getSyncPolicy("","",!0).subscribe(o=>{this.syncPolicyData=[],this.transformSyncPolicyData(o)},()=>{t&&t.error()})}deleteAction(){const t=this.selection.selected.map(o=>o.groupName);this.modalService.show(Lt.D,{itemDescription:this.selection.hasSingleSelection?"Policy Group":"Policy Groups",itemNames:t,bodyTemplate:this.deleteTpl,submitActionObservable:()=>new Bt.c(o=>{this.taskWrapper.wrapTaskAroundCall({task:new zt.O("rgw/multisite/sync-policy/delete",{group_names:t}),call:(0,v.p)(this.selection.selected.map(i=>this.rgwMultisiteService.removeSyncPolicyGroup(i.groupName,i.bucket)))}).subscribe({error:i=>{o.error(i),this.table.refreshBtn()},complete:()=>{o.complete(),this.table.refreshBtn()}})})})}static \u0275fac=function(o){return new(o||n)(e.rXU(y.A),e.rXU(R.PV),e.rXU(m.Ss),e.rXU(Et.v),e.rXU(Mt.V),e.rXU(Qt.a),e.rXU(I.Ix),e.rXU(Q.y))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-multisite-sync-policy"]],viewQuery:function(o,i){if(1&o&&(e.GBs(Je.O,7),e.GBs(Cf,7)),2&o){let s;e.mGM(s=e.lsd())&&(i.table=s.first),e.mGM(s=e.lsd())&&(i.deleteTpl=s.first)}},features:[e.Jv_([{provide:Tt.E,useValue:new Tt.E(Un)}]),e.Vt3],decls:12,vars:10,consts:()=>{let t,o;return t=" Multisite Sync Policy " + "\ufffd#3\ufffd" + " Multisite bucket-granularity sync policy provides fine grained control of data movement between buckets in different zones. Leveraging the bucket-granularity sync policy is possible for buckets to diverge, and a bucket can pull data from other buckets (ones that don\u2019t share its name or its ID) in different zone. " + "\ufffd/#3\ufffd" + "",o=" Are you sure you want to delete these policy groups? ",[["table",""],["deleteTpl",""],t,o,["identifier","uniqueId","selectionType","multiClick",3,"setExpandedRow","fetchData","updateSelection","autoReload","data","columns","forceIdentifier","searchableObjects","hasDetails","toolHeader"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"],[3,"expandedRow","permission",4,"cdTableDetail"],["name","modal",3,"deactivate"],[3,"expandedRow","permission"],["type","danger"]]},template:function(o,i){if(1&o){const s=e.RV6();e.nrm(0,"cd-rgw-multisite-tabs"),e.j41(1,"legend"),e.PLo(2,2),e.nrm(3,"cd-help-text"),e.YFu(),e.k0s(),e.j41(4,"cd-table",4,0),e.bIt("setExpandedRow",function(F){return e.eBV(s),e.Njj(i.setExpandedRow(F))})("fetchData",function(F){return e.eBV(s),e.Njj(i.getPolicyList(F))})("updateSelection",function(F){return e.eBV(s),e.Njj(i.updateSelection(F))}),e.j41(6,"div",5),e.nrm(7,"cd-table-actions",6),e.k0s(),e.DNE(8,Mf,1,2,"cd-rgw-multisite-sync-policy-details",7),e.k0s(),e.DNE(9,hf,2,0,"ng-template",null,1,e.C5r),e.j41(11,"router-outlet",8),e.bIt("deactivate",function(){return e.eBV(s),e.Njj(i.getPolicyList())}),e.k0s()}2&o&&(e.R7$(4),e.Y8G("autoReload",!1)("data",i.syncPolicyData)("columns",i.columns)("forceIdentifier",!0)("searchableObjects",!0)("hasDetails",!0)("toolHeader",!0),e.R7$(3),e.Y8G("permission",i.permission)("selection",i.selection)("tableActions",i.tableActions))},dependencies:[N.m,V.O,Je.O,Ot.j,$t.N,I.n3,Ff,Wo]})}return n})();var Gf=g(15643),xn=g(45269);const Pf=["treeNodeTemplate"],If=(n,_,t)=>[n,_,t],Of=(n,_)=>({node:n,depth:_}),Nf=n=>({visibility:n}),Uo=n=>[n],bf=n=>({node:n,depth:0});function Af(n,_){if(1&n){const t=e.RV6();e.j41(0,"cd-alert-panel",21),e.bIt("action",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.enableRgwModule())}),e.pXf(1,4),e.k0s()}}function Lf(n,_){1&n&&(e.j41(0,"cd-alert-panel",22),e.PLo(1,5),e.nrm(2,"a",23),e.YFu(),e.k0s())}function Df(n,_){if(1&n&&e.nrm(0,"cd-table-actions",24),2&n){const t=e.XpG();e.Y8G("permission",t.permissions.rgw)("btnColor","light")("selection",t.selection)("tableActions",t.migrateTableAction)}}function yf(n,_){if(1&n&&e.nrm(0,"cd-table-actions",25),2&n){const t=e.XpG();e.Y8G("permission",t.permissions.rgw)("selection",t.selection)("tableActions",t.createTableActions)("primaryDropDown",!0)}}function $f(n,_){if(1&n&&e.nrm(0,"i",26),2&n){const t=e.XpG();e.Y8G("ngClass",e.sMw(1,If,t.icons.large,t.icons.spinner,t.icons.spin))}}function vf(n,_){1&n&&e.eu8(0)}function Wf(n,_){if(1&n&&(e.qex(0),e.DNE(1,vf,1,0,"ng-container",29),e.bVm()),2&n){const t=_.$implicit,o=e.XpG(2).depth;e.XpG();const i=e.sdS(18);e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.l_i(2,Of,t,o+1))}}function wf(n,_){if(1&n&&(e.qex(0),e.DNE(1,Wf,2,5,"ng-container",18),e.bVm()),2&n){const t=e.XpG().node;e.R7$(),e.Y8G("ngForOf",t.children)}}function Uf(n,_){if(1&n&&(e.j41(0,"cds-tree-node",27),e.DNE(1,wf,2,1,"ng-container",28),e.k0s()),2&n){const t=_.node,o=_.depth;e.Y8G("node",t)("depth",o),e.R7$(),e.Y8G("ngIf",(null==t?null:t.children)&&(null==t||null==t.children?null:t.children.length))}}function xf(n,_){if(1&n&&(e.j41(0,"span"),e.nrm(1,"i",38),e.k0s()),2&n){const t=e.XpG(2).$implicit,o=e.XpG();e.R7$(),e.Y8G("title",null==t||null==t.data?null:t.data.warning_message)("ngClass",o.icons.danger)}}function kf(n,_){if(1&n&&(e.j41(0,"span",37),e.DNE(1,xf,2,2,"span",28),e.nrm(2,"i",26),e.EFF(3),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",null==t||null==t.data?null:t.data.show_warning),e.R7$(),e.Y8G("ngClass",null==t||null==t.data?null:t.data.icon),e.R7$(),e.SpI(" ",null==t||null==t.data?null:t.data.name," ")}}function Xf(n,_){1&n&&(e.j41(0,"span",39),e.EFF(1," default "),e.k0s())}function jf(n,_){1&n&&(e.j41(0,"span",40),e.EFF(1," master "),e.k0s())}function Bf(n,_){1&n&&(e.j41(0,"span",40),e.EFF(1," secondary-zone "),e.k0s())}function zf(n,_){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",35)(2,"button",41),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG();return e.Njj(s.delete(i))}),e.nrm(3,"i",26),e.k0s()(),e.bVm()}if(2&n){const t=_.ngIf,o=e.XpG().$implicit,i=e.XpG();e.R7$(),e.Y8G("title",t.deleteTitle),e.R7$(),e.Y8G("disabled",t.isDisabled||(null==o||null==o.data?null:o.data.secondary_zone)),e.R7$(),e.Y8G("ngClass",e.eq3(3,Uo,i.icons.destroy))}}function Hf(n,_){if(1&n){const t=e.RV6();e.j41(0,"div",30)(1,"div"),e.DNE(2,kf,4,3,"span",31)(3,Xf,2,0,"span",32)(4,jf,2,0,"span",33)(5,Bf,2,0,"span",33),e.k0s(),e.j41(6,"div",34)(7,"div",35)(8,"button",36),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.openModal(i,!0))}),e.nrm(9,"i",26),e.k0s()(),e.DNE(10,zf,4,5,"ng-container",28),e.k0s()()}if(2&n){const t=_.$implicit,o=e.XpG();e.R7$(2),e.Y8G("ngIf",null==t||null==t.data?null:t.data.name),e.R7$(),e.Y8G("ngIf",null==t||null==t.data?null:t.data.is_default),e.R7$(),e.Y8G("ngIf",null==t||null==t.data?null:t.data.is_master),e.R7$(),e.Y8G("ngIf",null==t||null==t.data?null:t.data.secondary_zone),e.R7$(),e.Y8G("ngStyle",e.eq3(9,Nf,o.activeNodeId===(null==t||null==t.data?null:t.data.id)?"visible":"hidden")),e.R7$(),e.Y8G("title",o.editTitle),e.R7$(),e.Y8G("disabled",o.getDisable()||(null==t||null==t.data?null:t.data.secondary_zone)),e.R7$(),e.Y8G("ngClass",e.eq3(11,Uo,o.icons.edit)),e.R7$(),e.Y8G("ngIf",o.isDeleteDisabled(t))}}function Yf(n,_){1&n&&e.eu8(0)}function Vf(n,_){if(1&n&&(e.qex(0),e.DNE(1,Yf,1,0,"ng-container",29),e.bVm()),2&n){const t=_.$implicit;e.XpG();const o=e.sdS(18);e.R7$(),e.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",e.eq3(2,bf,t))}}function Zf(n,_){if(1&n&&(e.j41(0,"div",42)(1,"legend"),e.EFF(2),e.k0s(),e.j41(3,"div"),e.nrm(4,"cd-table-key-value",43),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.JRh(t.metadataTitle),e.R7$(2),e.Y8G("data",t.metadata)}}let qf=(()=>{class n{modalService;timerService;authStorageService;actionLabels;timerServiceVariable;router;rgwRealmService;rgwZonegroupService;rgwZoneService;rgwDaemonService;mgrModuleService;notificationService;cdsModalService;rgwMultisiteService;changeDetectionRef;sub=new bn.y;labelTpl;syncPolicyComp;messages={noDefaultRealm:"Please create a default realm first to enable this feature",noMasterZone:"Please create a master zone for each zone group to enable this feature",noRealmExists:"No realm exists",disableExport:"Please create master zone group and master zone for each of the realms"};icons=S.F;permissions;selection=new gt.y;createTableActions;migrateTableAction;importAction;exportAction;multisiteReplicationActions;loadingIndicator=!0;toNode(t){return t.map(o=>({label:this.labelTpl,labelContext:{data:{...o}},id:o.id,value:{...o},expanded:!0,name:o.name,children:o?.children?this.toNode(o.children):[]}))}set nodes(t){this._nodes=this.toNode(t),this.changeDetectionRef.detectChanges()}get nodes(){return this._nodes}_nodes=[];modalRef;realms=[];zonegroups=[];zones=[];metadata;metadataTitle;bsModalRef;realmIds=[];zoneIds=[];defaultRealmId="";defaultZonegroupId="";defaultZoneId="";multisiteInfo=[];defaultsInfo=[];showMigrateAndReplicationActions=!1;editTitle="Edit";deleteTitle="Delete";disableExport=!0;rgwModuleStatus;restartGatewayMessage=!1;rgwModuleData=[];activeId;activeNodeId;MODULE_NAME="rgw";NAVIGATE_TO="/rgw/multisite";constructor(t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se){this.modalService=t,this.timerService=o,this.authStorageService=i,this.actionLabels=s,this.timerServiceVariable=T,this.router=F,this.rgwRealmService=k,this.rgwZonegroupService=H,this.rgwZoneService=q,this.rgwDaemonService=oe,this.mgrModuleService=le,this.notificationService=Re,this.cdsModalService=ce,this.rgwMultisiteService=Te,this.changeDetectionRef=se,this.permissions=this.authStorageService.getPermissions()}openModal(t,o=!1){const i=o?t?.data?.type:t,T={resource:i,action:o?"edit":"create",info:t,defaultsInfo:this.defaultsInfo,multisiteInfo:this.multisiteInfo};this.bsModalRef="realm"===i?this.cdsModalService.show(ld,T):this.modalService.show("zonegroup"===i?Zd:bd,T,{size:"lg"})}openMultisiteSetupWizard(){this.bsModalRef=this.cdsModalService.show($o)}openMigrateModal(){this.bsModalRef=this.modalService.show(gu,{multisiteInfo:this.multisiteInfo},{size:"lg"})}openImportModal(){this.bsModalRef=this.modalService.show(td,{multisiteInfo:this.multisiteInfo},{size:"lg"})}openExportModal(){this.bsModalRef=this.modalService.show(Wu,{defaultsInfo:this.defaultsInfo,multisiteInfo:this.multisiteInfo},{size:"lg"})}getDisableExport(){return this.realms.forEach(t=>{this.zonegroups.forEach(o=>{t.id===o.realm_id&&o.is_master&&""!==o.master_zone&&(this.disableExport=!1)})}),!this.rgwModuleStatus||(this.realms.length<1?this.messages.noRealmExists:!!this.disableExport&&this.messages.disableExport)}getDisableImport(){return!this.rgwModuleStatus}ngOnInit(){this.createTableActions=[{permission:"create",icon:S.F.add,name:this.actionLabels.CREATE+" Realm",click:()=>this.openModal("realm")},{permission:"create",icon:S.F.add,name:this.actionLabels.CREATE+" Zone Group",click:()=>this.openModal("zonegroup"),disable:()=>this.getDisable()},{permission:"create",icon:S.F.add,name:this.actionLabels.CREATE+" Zone",click:()=>this.openModal("zone")}],this.migrateTableAction=[{permission:"create",icon:S.F.wrench,name:this.actionLabels.MIGRATE,click:()=>this.openMigrateModal()}],this.importAction=[{permission:"create",icon:S.F.download,name:this.actionLabels.IMPORT,click:()=>this.openImportModal(),disable:()=>this.getDisableImport()}],this.exportAction=[{permission:"create",icon:S.F.upload,name:this.actionLabels.EXPORT,click:()=>this.openExportModal(),disable:()=>this.getDisableExport()}],this.multisiteReplicationActions=[{permission:"create",icon:S.F.wrench,name:this.actionLabels.SETUP_MULTISITE_REPLICATION,click:()=>this.router.navigate(["rgw/multisite/configuration",{outlets:{modal:"setup-multisite-replication"}}])}];const t=[this.rgwRealmService.getAllRealmsInfo(),this.rgwZonegroupService.getAllZonegroupsInfo(),this.rgwZoneService.getAllZonesInfo()];this.sub=this.timerService.get(()=>(0,v.p)(t),2*this.timerServiceVariable.TIMER_SERVICE_PERIOD).subscribe(o=>{this.multisiteInfo=o,this.loadingIndicator=!1,this.nodes=this.abstractTreeData(o)},o=>{}),this.permissions.configOpt.read&&this.getRgwModuleStatus()}ngOnDestroy(){this.sub.unsubscribe()}getRgwModuleStatus(){this.mgrModuleService.list().subscribe(t=>{this.rgwModuleData=t.filter(o=>"rgw"===o.name),this.rgwModuleData.length>0&&(this.rgwModuleStatus=this.rgwModuleData[0].enabled)})}abstractTreeData(t){let o=[],i={},s={},T=[],F={},k=[];if(this.realms=t[0].realms,this.zonegroups=t[1].zonegroups,this.zones=t[2].zones,this.defaultRealmId=t[0].default_realm,this.defaultZonegroupId=t[1].default_zonegroup,this.defaultZoneId=t[2].default_zone,this.defaultsInfo=this.getDefaultsEntities(this.defaultRealmId,this.defaultZonegroupId,this.defaultZoneId),this.realms.length>0)for(const H of this.realms){const q=this.rgwRealmService.getRealmTree(H,this.defaultRealmId);i=q.nodes,this.realmIds=this.realmIds.concat(q.realmIds);for(const oe of this.zonegroups)if(oe.realm_id===H.id){s=this.rgwZonegroupService.getZonegroupTree(oe,this.defaultZonegroupId,H);for(const le of oe.zones){const Re=this.rgwZoneService.getZoneTree(le,this.defaultZoneId,this.zones,oe,H);F=Re.nodes,this.zoneIds=this.zoneIds.concat(Re.zoneIds),k.push(F),F={}}k=k.map(le=>({...le,parentNode:s})),s.children=k,k=[],T.push(s),s={}}T=T.map(oe=>({...oe,parentNode:i})),i.children=T,o.push({...i,label:i?.name||i?.id}),s={},F={},i={},T=[],k=[]}if(this.zonegroups.length>0)for(const H of this.zonegroups)if(!this.realmIds.includes(H.realm_id)){i=this.rgwZonegroupService.getZonegroupTree(H,this.defaultZonegroupId);for(const q of H.zones){const oe=this.rgwZoneService.getZoneTree(q,this.defaultZoneId,this.zones,H);s=oe.nodes,this.zoneIds=this.zoneIds.concat(oe.zoneIds),T.push(s),s={}}T=T.map(q=>({...q,parentNode:i})),i.children=T,o.push({...i,label:i?.name||i?.id}),s={},i={},T=[]}if(this.zones.length>0)for(const H of this.zones)this.zoneIds.length>0&&!this.zoneIds.includes(H.id)&&(i=this.rgwZoneService.getZoneTree(H,this.defaultZoneId,this.zones).nodes,o.push({...i,label:i?.name||i?.id}),i={});return this.realms.length<1&&this.zonegroups.length<1&&this.zones.length<1?[{name:"No nodes!",label:"No nodes!"}]:(this.realmIds=[],this.zoneIds=[],this.evaluateMigrateAndReplicationActions(),this.rgwMultisiteService.restartGatewayMessage$.subscribe(H=>{null!==H?this.restartGatewayMessage=H:this.checkRestartGatewayMessage()}),o)}checkRestartGatewayMessage(){this.rgwDaemonService.list().subscribe(t=>{const o=t.map(i=>i.realm_name);this.restartGatewayMessage=!(""===this.defaultRealmId||""===this.defaultZonegroupId||""===this.defaultZoneId||!o.includes(""))})}getDefaultsEntities(t,o,i){const s=this.realms?.find(k=>k.id===t),T=this.zonegroups?.find(k=>k.id===o),F=this.zones?.find(k=>k.id===i);return{defaultRealmName:s?.name,defaultZonegroupName:T?.name,defaultZoneName:F?.name}}onNodeSelected(t){this.metadataTitle=t?.value?.name,this.metadata=t?.value?.info,this.activeNodeId=t?.value?.id,t.expanded=!0}getDisable(){let t=!0;return""===this.defaultRealmId?this.messages.noDefaultRealm:(this.zonegroups.forEach(o=>{h().isEmpty(o.master_zone)&&(t=!1)}),t?(setTimeout(()=>{this.editTitle="Edit"},1),!1):(setTimeout(()=>{this.editTitle="Please create a master zone for each existing zonegroup to enable this feature"},1),this.messages.noMasterZone))}evaluateMigrateAndReplicationActions(){return this.showMigrateAndReplicationActions=0===this.realms.length&&1===this.zonegroups.length&&"default"===this.zonegroups[0].name&&1===this.zones.length&&"default"===this.zones[0].name,this.showMigrateAndReplicationActions}isDeleteDisabled(t){let o=!1,i=this.deleteTitle,s=0;if("realm"===t?.value?.type&&t?.data?.is_default&&this.realms.length<2&&(o=!0),"zonegroup"===t?.data?.type)if(this.zonegroups.length<2)i="You can not delete the only zonegroup available",o=!0;else if(t?.data?.is_default)i="You can not delete the default zonegroup",o=!0;else if(t?.data?.is_master){for(let T of this.zonegroups)if(!0===T.is_master&&(s++,s>1))break;s<2&&(i="You can not delete the only master zonegroup available",o=!0)}return"zone"===t?.data?.type&&(this.zones.length<2?(i="You can not delete the only zone available",o=!0):t?.data?.is_default?(i="You can not delete the default zone",o=!0):t?.data?.is_master&&t?.data?.zone_zonegroup.zones.length<2&&(i="You can not delete the master zone as there are no more zones in this zonegroup",o=!0)),o||(this.deleteTitle="Delete"),{isDisabled:o,deleteTitle:i}}delete(t){if("realm"===t?.data?.type){const o=this.cdsModalService.show(Lt.D,{itemDescription:"" + t?.data?.type + " " + t?.data?.name + "",itemNames:[`${t?.data?.name}`],submitAction:()=>{this.rgwRealmService.delete(t?.data?.name).subscribe(()=>{this.notificationService.show(f._.success,"Realm: '" + t?.data?.name + "' deleted successfully"),this.cdsModalService.dismissAll()},()=>{this.cdsModalService.stopLoadingSpinner(o.deletionForm)})}})}else"zonegroup"===t?.data?.type?this.modalRef=this.modalService.show(Ou,{zonegroup:t.data}):"zone"===t?.data?.type&&(this.modalRef=this.modalService.show(Eu,{zone:t.data}))}enableRgwModule(){this.mgrModuleService.updateModuleState(this.MODULE_NAME,!1,null,this.NAVIGATE_TO,"Enabled RGW Module",!0)}static \u0275fac=function(o){return new(o||n)(e.rXU(tn.B),e.rXU(Gf.H),e.rXU(Et.v),e.rXU(m.Ss),e.rXU(m.YV),e.rXU(I.Ix),e.rXU(Yt.$),e.rXU(ht.Z),e.rXU(Vt.w),e.rXU(Q.y),e.rXU(Kd.a),e.rXU(B.J),e.rXU(Mt.V),e.rXU(y.A),e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-multisite-details"]],viewQuery:function(o,i){if(1&o&&(e.GBs(Pf,5),e.GBs(wo,5)),2&o){let s;e.mGM(s=e.lsd())&&(i.labelTpl=s.first),e.mGM(s=e.lsd())&&(i.syncPolicyComp=s.first)}},decls:24,vars:19,consts:()=>{let t,o,i;return t="Topology Viewer",o=" In order to access the import/export/Setup Multi-site Replication feature, the rgw module must be enabled. ",i="Please restart all Ceph Object Gateway instances in all zones to ensure consistent multisite configuration updates. " + "\ufffd#2\ufffd" + " Cluster->Services" + "\ufffd/#2\ufffd" + "",[["tree",""],["nodeTemplateRef",""],["treeNodeTemplate",""],t,o,i,["type","info","spacingClass","mb-3","class","align-items-center","actionName","Enable",3,"action",4,"ngIf"],["type","warning","spacingClass","mb-3",4,"ngIf"],[1,"btn-group","mb-4","me-2",3,"permission","selection","tableActions"],["class","btn-group mb-4 me-2 secondary",3,"permission","btnColor","selection","tableActions",4,"ngIf"],["class","btn-group mb-4 me-2",3,"permission","selection","tableActions","primaryDropDown",4,"ngIf"],[1,"btn-group","mb-4","me-2",3,"permission","btnColor","selection","tableActions"],[1,"card"],["data-testid","rgw-multisite-details-header",1,"card-header"],[1,"row"],[1,"col-sm-6","col-lg-6","tree-container"],[3,"ngClass",4,"ngIf"],[3,"select","isMultiSelect"],[4,"ngFor","ngForOf"],["class","col-sm-6 col-lg-6 metadata",4,"ngIf"],["name","modal"],["type","info","spacingClass","mb-3","actionName","Enable",1,"align-items-center",3,"action"],["type","warning","spacingClass","mb-3"],["routerLink","/services",1,"text-decoration-underline"],[1,"btn-group","mb-4","me-2","secondary",3,"permission","btnColor","selection","tableActions"],[1,"btn-group","mb-4","me-2",3,"permission","selection","tableActions","primaryDropDown"],[3,"ngClass"],[3,"node","depth"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"w-100","d-flex","justify-content-between","align-items-center","pe-1"],["class","me-3",4,"ngIf"],["class","badge badge-success me-2",4,"ngIf"],["class","badge badge-warning me-2",4,"ngIf"],["role","group",1,"btn-group","align-inline-btns",3,"ngStyle"],[3,"title"],["type","button",1,"btn","btn-light","dropdown-toggle-split","ms-1",3,"click","disabled"],[1,"me-3"],[1,"text-danger",3,"title","ngClass"],[1,"badge","badge-success","me-2"],[1,"badge","badge-warning","me-2"],["type","button",1,"btn","btn-light","ms-1",3,"click","disabled"],[1,"col-sm-6","col-lg-6","metadata"],[3,"data"]]},template:function(o,i){if(1&o){const s=e.RV6();e.nrm(0,"cd-rgw-multisite-tabs"),e.j41(1,"div"),e.DNE(2,Af,2,0,"cd-alert-panel",6)(3,Lf,3,0,"cd-alert-panel",7),e.nrm(4,"cd-table-actions",8),e.DNE(5,Df,1,4,"cd-table-actions",9)(6,yf,1,4,"cd-table-actions",10),e.nrm(7,"cd-table-actions",11)(8,"cd-table-actions",11),e.k0s(),e.j41(9,"div",12)(10,"div",13),e.pXf(11,3),e.k0s(),e.j41(12,"div",14)(13,"div",15),e.DNE(14,$f,1,5,"i",16),e.j41(15,"cds-tree-view",17,0),e.bIt("select",function(F){return e.eBV(s),e.Njj(i.onNodeSelected(F))}),e.DNE(17,Uf,2,3,"ng-template",null,1,e.C5r)(19,Hf,11,13,"ng-template",null,2,e.C5r)(21,Vf,2,4,"ng-container",18),e.k0s()(),e.DNE(22,Zf,5,2,"div",19),e.k0s()(),e.nrm(23,"router-outlet",20)}2&o&&(e.R7$(2),e.Y8G("ngIf",i.permissions.configOpt.create&&!i.rgwModuleStatus),e.R7$(),e.Y8G("ngIf",i.restartGatewayMessage),e.R7$(),e.Y8G("permission",i.permissions.rgw)("selection",i.selection)("tableActions",i.multisiteReplicationActions),e.R7$(),e.Y8G("ngIf",i.showMigrateAndReplicationActions),e.R7$(),e.Y8G("ngIf",!i.showMigrateAndReplicationActions),e.R7$(),e.Y8G("permission",i.permissions.rgw)("btnColor","light")("selection",i.selection)("tableActions",i.importAction),e.R7$(),e.Y8G("permission",i.permissions.rgw)("btnColor","light")("selection",i.selection)("tableActions",i.exportAction),e.R7$(6),e.Y8G("ngIf",i.loadingIndicator),e.R7$(),e.Y8G("isMultiSelect",!1),e.R7$(6),e.Y8G("ngForOf",i.nodes),e.R7$(),e.Y8G("ngIf",i.metadata))},dependencies:[R.YU,R.Sq,R.bT,R.T3,R.B3,N.m,Pn.i,Ot.j,Oe.S,I.n3,I.Wk,xn.xf,xn.kv,Wo],styles:[".tree-container[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow-y:auto}.align-inline-btns[_ngcontent-%COMP%]{margin-left:5em}.btn[_ngcontent-%COMP%]:disabled{pointer-events:none}  .cds--tree-node__label__details{padding-block:.5rem;width:100%}"],changeDetection:0})}return n})();var Jf=g(29168),xo=g(9300),Qf=g(40598),ep=g(79075),tp=g(32380),np=g(67344),ko=g(24713),op=g(37344),ip=g(29947),_p=g(78845),sp=g(11378),rp=g(47830);const on=(n,_)=>[n,_];let ap=(()=>{class n{icons=S.F;realm;zonegroup;zone;constructor(){}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-sync-primary-zone"]],inputs:{realm:"realm",zonegroup:"zonegroup",zone:"zone"},decls:17,vars:23,consts:[[1,"pb-5"],[1,"pt-2",3,"ngClass"],[1,"badge","badge-info","mt-2"],[1,"mt-2",3,"ngClass"]],template:function(o,i){1&o&&(e.j41(0,"ul",0)(1,"li"),e.nrm(2,"i",1),e.k0s(),e.j41(3,"li",2),e.EFF(4),e.k0s(),e.j41(5,"li"),e.nrm(6,"i",3),e.k0s(),e.j41(7,"li"),e.nrm(8,"i",3),e.k0s(),e.j41(9,"p",2),e.EFF(10),e.k0s(),e.j41(11,"li"),e.nrm(12,"i",3),e.k0s(),e.j41(13,"li"),e.nrm(14,"i",3),e.k0s(),e.j41(15,"li",2),e.EFF(16),e.k0s()()),2&o&&(e.R7$(2),e.Y8G("ngClass",e.l_i(8,on,i.icons.large2x,i.icons.reweight)),e.R7$(2),e.JRh(i.realm),e.R7$(2),e.Y8G("ngClass",e.l_i(11,on,i.icons.large2x,i.icons.down)),e.R7$(2),e.Y8G("ngClass",e.l_i(14,on,i.icons.large2x,i.icons.cubes)),e.R7$(2),e.JRh(i.zonegroup),e.R7$(2),e.Y8G("ngClass",e.l_i(17,on,i.icons.large2x,i.icons.down)),e.R7$(2),e.Y8G("ngClass",e.l_i(20,on,i.icons.large2x,i.icons.deploy)),e.R7$(2),e.JRh(i.zone))},dependencies:[R.YU],styles:["ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}.align-primary-zone[_ngcontent-%COMP%]{padding-left:4em}"]})}return n})();var Ut=g(54965),Xo=g(39113);const lp=n=>[n];function cp(n,_){1&n&&(e.j41(0,"span")(1,"ul",11)(2,"li")(3,"b"),e.pXf(4,2),e.k0s()(),e.j41(5,"li"),e.EFF(6,"No Sync"),e.k0s()()())}function up(n,_){1&n&&(e.j41(0,"li",20),e.pXf(1,6),e.k0s())}function dp(n,_){if(1&n&&(e.j41(0,"a",23),e.pXf(1,7),e.nI1(2,"titlecase"),e.k0s()),2&n){const t=e.XpG(3);e.R7$(2),e.uP7(e.bMT(2,1,t.metadataSyncInfo.syncstatus)),e.nnv(1)}}function fp(n,_){1&n&&(e.j41(0,"a",24),e.pXf(1,8),e.k0s())}function pp(n,_){if(1&n&&e.DNE(0,dp,3,3,"a",21)(1,fp,2,0,"a",22),2&n){const t=e.XpG(2);e.Y8G("ngIf","Not Syncing From Zone"!==t.metadataSyncInfo.syncstatus),e.R7$(),e.Y8G("ngIf","Not Syncing From Zone"===t.metadataSyncInfo.syncstatus)}}function gp(n,_){if(1&n&&(e.j41(0,"li"),e.nrm(1,"i",25),e.j41(2,"a",26),e.pXf(3,9),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.eq3(1,lp,t.icons.danger))}}function Tp(n,_){if(1&n&&(e.j41(0,"span")(1,"b"),e.EFF(2),e.nI1(3,"titlecase"),e.k0s(),e.EFF(4),e.nI1(5,"titlecase"),e.k0s()),2&n){const t=e.XpG(2).$implicit;e.R7$(2),e.JRh(e.bMT(3,2,t.split(":")[0])),e.R7$(2),e.SpI(":",e.bMT(5,4,t.split(":")[1])," ")}}function Rp(n,_){if(1&n&&(e.j41(0,"span")(1,"b"),e.EFF(2),e.nI1(3,"titlecase"),e.k0s()()),2&n){const t=e.XpG(2).$implicit;e.R7$(2),e.JRh(e.bMT(3,1,t))}}function mp(n,_){if(1&n&&(e.j41(0,"span"),e.DNE(1,Tp,6,6,"span",10)(2,Rp,4,3,"span",10),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",null==t?null:t.includes(":")),e.R7$(),e.Y8G("ngIf",!(null!=t&&t.includes(":")))}}function Ep(n,_){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"titlecase"),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.bMT(2,1,t)," ")}}function Sp(n,_){if(1&n&&(e.j41(0,"li"),e.DNE(1,mp,3,2,"span",10)(2,Ep,3,3,"span",10),e.k0s()),2&n){const t=_.$implicit,o=e.XpG(2);e.R7$(),e.Y8G("ngIf",!(null!=t&&t.includes(o.metadataSyncInfo.syncstatus)||null!=t&&t.includes("failed")||null!=t&&t.includes("error"))),e.R7$(),e.Y8G("ngIf",(null==t?null:t.includes("failed"))||(null==t?null:t.includes("error")))}}function Fp(n,_){if(1&n&&(e.j41(0,"li",27),e.EFF(1),e.nI1(2,"relativeDate"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.JRh(e.bMT(2,1,t.metadataSyncInfo.timestamp))}}function Cp(n,_){if(1&n&&(e.j41(0,"span")(1,"ul",11),e.DNE(2,up,2,0,"ng-template",null,0,e.C5r),e.j41(4,"cds-toggletip",12)(5,"div",13),e.DNE(6,pp,2,2,"ng-template",null,1,e.C5r),e.j41(8,"li")(9,"b"),e.pXf(10,3),e.k0s()(),e.DNE(11,gp,4,3,"li",14),e.k0s(),e.j41(12,"div",15)(13,"ul",16)(14,"li")(15,"h5")(16,"b"),e.pXf(17,4),e.k0s()()(),e.DNE(18,Sp,3,2,"li",17),e.k0s()()(),e.j41(19,"li",18),e.pXf(20,5),e.k0s(),e.DNE(21,Fp,3,3,"li",19),e.k0s()()),2&n){const t=e.sdS(3),o=e.sdS(7),i=e.XpG();e.R7$(4),e.Y8G("dropShadow",!0)("align",i.align),e.R7$(7),e.Y8G("ngIf",(null==i.metadataSyncInfo.syncstatus?null:i.metadataSyncInfo.syncstatus.includes("failed"))||(null==i.metadataSyncInfo.syncstatus?null:i.metadataSyncInfo.syncstatus.includes("error")))("ngIfElse",o),e.R7$(7),e.Y8G("ngForOf",i.metadataSyncInfo.fullSyncStatus),e.R7$(3),e.Y8G("ngIf",i.metadataSyncInfo.timestamp)("ngIfElse",t)}}let Mp=(()=>{class n{icons=S.F;align="top";metadataSyncInfo={};constructor(){}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-sync-metadata-info"]],inputs:{metadataSyncInfo:"metadataSyncInfo"},decls:2,vars:2,consts:()=>{let t,o,i,s,T,F,k,H;return t="Status:",o="Status:",i="Metadata Sync Status:",s=" Last Synced: ",T="Up to Date",F="" + "\ufffd0\ufffd" + "",k="Not Syncing",H="Error",[["upToDateTpl",""],["showMetadataStatus",""],t,o,i,s,T,F,k,H,[4,"ngIf"],[1,"me-2"],[3,"dropShadow","align"],["cdsToggletipButton","",1,"toggleTipBtn"],[4,"ngIf","ngIfElse"],["cdsToggletipContent",""],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"mt-4","fw-bold"],["class","badge badge-info",4,"ngIf","ngIfElse"],[1,"badge","badge-success"],["class","lead text-primary","popoverClass","rgw-overview-card-popover",4,"ngIf"],["class","lead text-primary",4,"ngIf"],["popoverClass","rgw-overview-card-popover",1,"lead","text-primary"],[1,"lead","text-primary"],[1,"text-danger",3,"ngClass"],[1,"lead","text-danger"],[1,"badge","badge-info"]]},template:function(o,i){1&o&&e.DNE(0,cp,7,0,"span",10)(1,Cp,22,7,"span",10),2&o&&(e.Y8G("ngIf","no sync (zone is master)"===i.metadataSyncInfo),e.R7$(),e.Y8G("ngIf","no sync (zone is master)"!==i.metadataSyncInfo))},dependencies:[R.YU,R.Sq,R.bT,Ut.Gf,Ut.yv,Ut.pN,R.PV,Xo.D],styles:["ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}.toggleTipBtn[_ngcontent-%COMP%]{flex-direction:column}"]})}return n})();const hp=n=>[n];function Gp(n,_){1&n&&(e.j41(0,"li",17),e.pXf(1,4),e.k0s())}function Pp(n,_){if(1&n&&(e.j41(0,"a",19),e.pXf(1,5),e.nI1(2,"titlecase"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(2),e.uP7(e.bMT(2,1,t.zone.syncstatus)),e.nnv(1)}}function Ip(n,_){1&n&&(e.j41(0,"a",19),e.pXf(1,6),e.k0s())}function Op(n,_){if(1&n&&e.DNE(0,Pp,3,3,"a",18)(1,Ip,2,0,"a",18),2&n){const t=e.XpG();e.Y8G("ngIf","Not Syncing From Zone"!==t.zone.syncstatus),e.R7$(),e.Y8G("ngIf","Not Syncing From Zone"===t.zone.syncstatus)}}function Np(n,_){if(1&n&&(e.j41(0,"li"),e.nrm(1,"i",20),e.j41(2,"a",21),e.pXf(3,7),e.k0s()()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(1,hp,t.icons.danger))}}function bp(n,_){if(1&n&&(e.j41(0,"span")(1,"b"),e.EFF(2),e.nI1(3,"titlecase"),e.k0s(),e.EFF(4),e.nI1(5,"titlecase"),e.k0s()),2&n){const t=e.XpG(2).$implicit;e.R7$(2),e.JRh(e.bMT(3,2,t.split(": ")[0])),e.R7$(2),e.SpI(":",e.bMT(5,4,t.split(": ")[1])," ")}}function Ap(n,_){if(1&n&&(e.j41(0,"span")(1,"b"),e.EFF(2),e.nI1(3,"titlecase"),e.k0s()()),2&n){const t=e.XpG(2).$implicit;e.R7$(2),e.JRh(e.bMT(3,1,t))}}function Lp(n,_){if(1&n&&(e.j41(0,"span"),e.DNE(1,bp,6,6,"span",22)(2,Ap,4,3,"span",22),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",null==t?null:t.includes(":")),e.R7$(),e.Y8G("ngIf",!(null!=t&&t.includes(":")))}}function Dp(n,_){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"titlecase"),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.bMT(2,1,t)," ")}}function yp(n,_){if(1&n&&(e.j41(0,"li"),e.DNE(1,Lp,3,2,"span",22)(2,Dp,3,3,"span",22),e.k0s()),2&n){const t=_.$implicit,o=e.XpG();e.R7$(),e.Y8G("ngIf",!(null!=t&&t.includes(o.zone.name)||null!=t&&t.includes(o.zone.syncstatus)||null!=t&&t.includes("failed")||null!=t&&t.includes("error"))),e.R7$(),e.Y8G("ngIf",(null==t?null:t.includes("failed"))||(null==t?null:t.includes("error")))}}function $p(n,_){if(1&n&&(e.j41(0,"li",23),e.EFF(1),e.nI1(2,"relativeDate"),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.JRh(e.bMT(2,1,t.zone.timestamp))}}let vp=(()=>{class n{icons=S.F;align="top";zone={};constructor(){}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-sync-data-info"]],inputs:{zone:"zone"},decls:21,vars:7,consts:()=>{let t,o,i,s,T,F;return t="Sync Status:",o=" Last Synced: ",i="Up to Date",s="" + "\ufffd0\ufffd" + "",T="Not Syncing",F="Error",[["upToDateTpl",""],["showStatus",""],t,o,i,s,T,F,[1,"me-2"],[3,"dropShadow","align"],["cdsToggletipButton","",1,"toggleTipBtn"],[4,"ngIf","ngIfElse"],["cdsToggletipContent",""],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"mt-4","fw-bold"],["class","badge badge-info",4,"ngIf","ngIfElse"],[1,"badge","badge-success"],["class","lead text-primary",4,"ngIf"],[1,"lead","text-primary"],[1,"text-danger",3,"ngClass"],[1,"lead","text-danger"],[4,"ngIf"],[1,"badge","badge-info"]]},template:function(o,i){if(1&o&&(e.j41(0,"ul",8),e.DNE(1,Gp,2,0,"ng-template",null,0,e.C5r),e.j41(3,"cds-toggletip",9)(4,"div",10),e.DNE(5,Op,2,2,"ng-template",null,1,e.C5r),e.j41(7,"li")(8,"b"),e.EFF(9,"Status:"),e.k0s()(),e.DNE(10,Np,4,3,"li",11),e.k0s(),e.j41(11,"div",12)(12,"ul",13)(13,"li")(14,"h5")(15,"b"),e.pXf(16,2),e.k0s()()(),e.DNE(17,yp,3,2,"li",14),e.k0s()()(),e.j41(18,"li",15),e.pXf(19,3),e.k0s(),e.DNE(20,$p,3,3,"li",16),e.k0s()),2&o){const s=e.sdS(2),T=e.sdS(6);e.R7$(3),e.Y8G("dropShadow",!0)("align",i.align),e.R7$(7),e.Y8G("ngIf",(null==i.zone.syncstatus?null:i.zone.syncstatus.includes("failed"))||(null==i.zone.syncstatus?null:i.zone.syncstatus.includes("error")))("ngIfElse",T),e.R7$(7),e.Y8G("ngForOf",i.zone.fullSyncStatus),e.R7$(3),e.Y8G("ngIf",i.zone.timestamp)("ngIfElse",s)}},dependencies:[R.YU,R.Sq,R.bT,Ut.Gf,Ut.yv,Ut.pN,R.PV,Xo.D],styles:["ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}.toggle-tip-btn[_ngcontent-%COMP%]{flex-direction:column}"]})}return n})();const Wp=()=>["Requests/sec"],wp=n=>[n],jo=()=>["GET","PUT"],Bo=(n,_)=>[n,_],kn=(n,_,t)=>[n,_,t],Up=n=>({"border-left":n});function xp(n,_){if(1&n&&e.nrm(0,"cd-card-row",26),2&n){const t=e.XpG();e.Y8G("data",t.rgwDaemonCount)}}function kp(n,_){if(1&n&&e.nrm(0,"cd-card-row",27),2&n){const t=e.XpG();e.Y8G("data",t.rgwRealmCount)}}function Xp(n,_){if(1&n&&e.nrm(0,"cd-card-row",28),2&n){const t=e.XpG();e.Y8G("data",t.rgwZonegroupCount)}}function jp(n,_){if(1&n&&e.nrm(0,"cd-card-row",29),2&n){const t=e.XpG();e.Y8G("data",t.rgwZoneCount)}}function Bp(n,_){if(1&n&&e.nrm(0,"cd-card-row",30),2&n){const t=e.XpG();e.Y8G("data",t.rgwBucketCount)}}function zp(n,_){if(1&n&&e.nrm(0,"cd-card-row",31),2&n){const t=e.XpG();e.Y8G("data",t.UserCount)}}function Hp(n,_){if(1&n&&e.nrm(0,"cd-card-row",32),2&n){const t=e.XpG();e.Y8G("data",t.objectCount)}}function Yp(n,_){1&n&&(e.j41(0,"span",33)(1,"cd-alert-panel",34),e.PLo(2,1),e.nrm(3,"cd-doc",35),e.YFu(),e.k0s()())}function Vp(n,_){if(1&n&&(e.j41(0,"span",36),e.nrm(1,"i",37),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.sMw(1,kn,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function Zp(n,_){if(1&n&&(e.j41(0,"span",36),e.nrm(1,"i",37),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.Y8G("ngClass",e.sMw(1,kn,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function Kp(n,_){if(1&n&&(e.j41(0,"span",36),e.nrm(1,"cd-rgw-sync-primary-zone",43),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.Y8G("realm",t.realm)("zonegroup",t.zonegroup)("zone",t.zone)}}function qp(n,_){if(1&n&&(e.j41(0,"span",36),e.nrm(1,"i",37),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.Y8G("ngClass",e.sMw(1,kn,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function Jp(n,_){if(1&n&&(e.j41(0,"span",51),e.nrm(1,"cd-rgw-sync-metadata-info",52),e.k0s()),2&n){const t=e.XpG(6);e.R7$(),e.Y8G("metadataSyncInfo",t.metadataSyncInfo)}}function Qp(n,_){if(1&n&&(e.j41(0,"span",53),e.nrm(1,"cd-rgw-sync-data-info",54),e.k0s()),2&n){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("zone",t)}}function eg(n,_){if(1&n&&(e.j41(0,"cd-card",48),e.DNE(1,Jp,2,1,"span",49)(2,Qp,2,1,"span",50),e.k0s()),2&n){const t=_.$implicit;e.Y8G("cardTitle",t)("ngClass",e.eq3(6,Up,"Data Sync"===t))("alignItemsCenter",!0)("justifyContentCenter",!0),e.R7$(),e.Y8G("ngIf","Metadata Sync"===t),e.R7$(),e.Y8G("ngIf","Data Sync"===t)}}function tg(n,_){if(1&n&&(e.j41(0,"cd-card",45)(1,"div",46),e.DNE(2,eg,3,8,"cd-card",47),e.k0s()()),2&n){const t=_.$implicit,o=e.XpG(4);e.FS9("cardTitle",t.name),e.R7$(2),e.Y8G("ngForOf",o.chartTitles)}}function ng(n,_){if(1&n&&(e.j41(0,"div",3),e.DNE(1,tg,3,2,"cd-card",44),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.Y8G("ngForOf",t.replicaZonesInfo)("ngForTrackBy",t.trackByFn)}}function og(n,_){if(1&n&&(e.j41(0,"div",39)(1,"cd-card",40),e.DNE(2,Zp,2,5,"span",24)(3,Kp,2,3,"span",24),e.k0s(),e.j41(4,"div",41)(5,"cd-card",42),e.DNE(6,qp,2,5,"span",24)(7,ng,2,2,"div",25),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("alignItemsCenter",!0)("justifyContentCenter",!0),e.R7$(),e.Y8G("ngIf",t.loading),e.R7$(),e.Y8G("ngIf",!t.loading),e.R7$(3),e.Y8G("ngIf",t.loading),e.R7$(),e.Y8G("ngIf",!t.loading)}}function ig(n,_){if(1&n&&(e.j41(0,"div",3),e.DNE(1,og,8,6,"div",38),e.k0s()),2&n){const t=e.XpG(),o=e.sdS(30);e.R7$(),e.Y8G("ngIf",t.showMultisiteCard)("ngIfElse",o)}}let _g=(()=>{class n{authStorageService;refreshIntervalService;rgwDaemonService;rgwRealmService;rgwZonegroupService;rgwZoneService;rgwBucketService;prometheusService;rgwMultisiteService;icons=S.F;interval=new bn.y;permissions;rgwDaemonCount=0;rgwRealmCount=0;rgwZonegroupCount=0;rgwZoneCount=0;rgwBucketCount=0;objectCount=0;UserCount=0;totalPoolUsedBytes=0;averageObjectSize=0;realmData;realmSub;multisiteInfo=[];ZonegroupSub;ZoneSUb;queriesResults={RGW_REQUEST_PER_SECOND:[],BANDWIDTH:[],AVG_GET_LATENCY:[],AVG_PUT_LATENCY:[]};timerGetPrometheusDataSub;chartTitles=["Metadata Sync","Data Sync"];realm;zonegroup;zone;metadataSyncInfo;replicaZonesInfo=[];metadataSyncData;showMultisiteCard=!0;loading=!0;multisiteSyncStatus$;subject=new Qf.m;syncCardLoading=!0;fetchDataSub;constructor(t,o,i,s,T,F,k,H,q){this.authStorageService=t,this.refreshIntervalService=o,this.rgwDaemonService=i,this.rgwRealmService=s,this.rgwZonegroupService=T,this.rgwZoneService=F,this.rgwBucketService=k,this.prometheusService=H,this.rgwMultisiteService=q,this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.interval=this.refreshIntervalService.intervalData$.subscribe(()=>{this.fetchDataSub=(0,ep.zV)([this.rgwDaemonService.list(),this.rgwBucketService.fetchAndTransformBuckets(),this.rgwBucketService.totalNumObjects$,this.rgwBucketService.totalUsedCapacity$,this.rgwBucketService.averageObjectSize$,this.rgwBucketService.getTotalBucketsAndUsersLength()]).subscribe(([t,o,i,s,T,F])=>{this.rgwDaemonCount=t.length,this.objectCount=i,this.totalPoolUsedBytes=s,this.averageObjectSize=T,this.rgwBucketCount=F.buckets_count,this.UserCount=F.users_count,this.getSyncStatus()})}),this.realmSub=this.rgwRealmService.list().subscribe(t=>{this.rgwRealmCount=t.realms.length}),this.ZonegroupSub=this.rgwZonegroupService.list().subscribe(t=>{this.rgwZonegroupCount=t.zonegroups.length}),this.ZoneSUb=this.rgwZoneService.list().subscribe(t=>{this.rgwZoneCount=t.zones.length}),this.getPrometheusData(this.prometheusService.lastHourDateObject),this.multisiteSyncStatus$=this.subject.pipe((0,M.n)(()=>this.rgwMultisiteService.getSyncStatus().pipe((0,Ro.M)(t=>{this.loading=!1,this.replicaZonesInfo=t.dataSyncInfo,this.metadataSyncInfo=t.metadataSyncInfo,0===this.replicaZonesInfo.length&&(this.showMultisiteCard=!1,this.syncCardLoading=!1,this.loading=!1),[this.realm,this.zonegroup,this.zone]=t.primaryZoneData}),(0,Ht.W)(t=>(this.showMultisiteCard=!1,this.syncCardLoading=!1,this.loading=!1,t.preventDefault(),(0,Nt.of)(!0))))),(0,ko.t)(1))}ngOnDestroy(){this.interval?.unsubscribe(),this.realmSub?.unsubscribe(),this.ZonegroupSub?.unsubscribe(),this.ZoneSUb?.unsubscribe(),this.fetchDataSub?.unsubscribe(),this.prometheusService?.unsubscribe()}getPrometheusData(t){this.queriesResults=this.prometheusService.getPrometheusQueriesData(t,np.xg,this.queriesResults,!0)}getSyncStatus(){this.subject.next()}trackByFn(t){return t}static \u0275fac=function(o){return new(o||n)(e.rXU(Et.v),e.rXU(op.s),e.rXU(Q.y),e.rXU(Yt.$),e.rXU(ht.Z),e.rXU(Vt.w),e.rXU($.c),e.rXU(tp.o),e.rXU(y.A))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-overview-dashboard"]],decls:34,vars:38,consts:()=>{let t;return t=" Multi-site needs to be configured in order to see the multi-site sync status. Please consult the\xA0" + "\ufffd#3\ufffd" + "" + "\ufffd/#3\ufffd" + "\xA0on how to configure and enable the multi-site functionality. ",[["notConfigured",""],t,[1,"container-fluid"],[1,"row"],["cardTitle","Inventory","aria-label","Inventory card",1,"col-sm-3","px-3","d-flex"],["link","/rgw/daemon","title","Gateway","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/multisite","title","Realm","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/multisite","title","Zone Group","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/multisite","title","Zone","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/bucket","title","Bucket","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/user","title","User","summaryType","simplified",3,"data",4,"ngIf"],["title","Object","summaryType","simplified",3,"data",4,"ngIf"],["cardTitle","Performance Statistics","ria-label","Performance Statistics card",1,"col-sm-6","d-flex"],[1,"ms-4","me-4","mt-0"],[3,"selectedTime"],["chartTitle","Requests/sec","dataUnits","",3,"labelsArray","dataArray"],["chartTitle","Latency","dataUnits","ms","decimals","2",3,"labelsArray","dataArray"],["chartTitle","Bandwidth","dataUnits","B",3,"labelsArray","dataArray"],[1,"col-lg-3"],["cardTitle","Used Capacity","aria-label","Used Capacity",1,"col-sm-2","d-flex","w-100","h-50","pb-3",3,"alignItemsCenter","justifyContentCenter"],[1,"ms-4","me-4","text-center"],["cardTitle","Average Object Size","aria-label","Avg Object Size",1,"col-sm-2","d-flex","w-100","h-50","pt-3",3,"alignItemsCenter","justifyContentCenter"],[1,"row","pt-4","pb-4"],["cardTitle","Multi-Site Sync Status"],["class","d-flex justify-content-center",4,"ngIf"],["class","row",4,"ngIf"],["link","/rgw/daemon","title","Gateway","summaryType","simplified",3,"data"],["link","/rgw/multisite","title","Realm","summaryType","simplified",3,"data"],["link","/rgw/multisite","title","Zone Group","summaryType","simplified",3,"data"],["link","/rgw/multisite","title","Zone","summaryType","simplified",3,"data"],["link","/rgw/bucket","title","Bucket","summaryType","simplified",3,"data"],["link","/rgw/user","title","User","summaryType","simplified",3,"data"],["title","Object","summaryType","simplified",3,"data"],[1,"pe-5","ps-5"],["type","info"],["section","multisite"],[1,"d-flex","justify-content-center"],[3,"ngClass"],["class","row pt-2",4,"ngIf","ngIfElse"],[1,"row","pt-2"],["cardTitle","Primary Source Zone",1,"col-lg-3","d-flex","justify-content-center","align-primary-zone",3,"alignItemsCenter","justifyContentCenter"],[1,"col-lg-9"],["cardTitle","Source Zones",1,"d-flex","h-100"],[3,"realm","zonegroup","zone"],["cardType","zone","shadowClass","true","class","col-sm-9 col-lg-6 align-replica-zones d-flex pt-4","aria-label","Source Zones Card",3,"cardTitle",4,"ngFor","ngForOf","ngForTrackBy"],["cardType","zone","shadowClass","true","aria-label","Source Zones Card",1,"col-sm-9","col-lg-6","align-replica-zones","d-flex","pt-4",3,"cardTitle"],[1,"row","pb-4","ps-3","pe-3"],["cardType","syncCards","removeBorder","true","class","col-sm-9 col-lg-6","aria-label","Charts Card",3,"cardTitle","ngClass","alignItemsCenter","justifyContentCenter",4,"ngFor","ngForOf"],["cardType","syncCards","removeBorder","true","aria-label","Charts Card",1,"col-sm-9","col-lg-6",3,"cardTitle","ngClass","alignItemsCenter","justifyContentCenter"],["class","me-2 text-center",4,"ngIf"],["class","me-2",4,"ngIf"],[1,"me-2","text-center"],[3,"metadataSyncInfo"],[1,"me-2"],[3,"zone"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"cd-card",4),e.DNE(3,xp,1,1,"cd-card-row",5)(4,kp,1,1,"cd-card-row",6)(5,Xp,1,1,"cd-card-row",7)(6,jp,1,1,"cd-card-row",8)(7,Bp,1,1,"cd-card-row",9)(8,zp,1,1,"cd-card-row",10)(9,Hp,1,1,"cd-card-row",11),e.k0s(),e.j41(10,"cd-card",12)(11,"div",13)(12,"cd-dashboard-time-selector",14),e.bIt("selectedTime",function(F){return e.eBV(s),e.Njj(i.getPrometheusData(F))}),e.k0s(),e.nrm(13,"cd-dashboard-area-chart",15)(14,"cd-dashboard-area-chart",16)(15,"cd-dashboard-area-chart",17),e.k0s()(),e.j41(16,"div",18)(17,"cd-card",19)(18,"span",20)(19,"h1"),e.EFF(20),e.nI1(21,"dimlessBinary"),e.k0s()()(),e.j41(22,"cd-card",21)(23,"span",20)(24,"h1"),e.EFF(25),e.nI1(26,"dimlessBinary"),e.k0s()()()()(),e.j41(27,"div",22)(28,"cd-card",23),e.DNE(29,Yp,4,0,"ng-template",null,0,e.C5r)(31,Vp,2,5,"span",24)(32,ig,2,2,"div",25),e.nI1(33,"async"),e.k0s()()()}2&o&&(e.R7$(3),e.Y8G("ngIf",null!=i.rgwDaemonCount),e.R7$(),e.Y8G("ngIf",null!=i.rgwRealmCount),e.R7$(),e.Y8G("ngIf",null!=i.rgwZonegroupCount),e.R7$(),e.Y8G("ngIf",null!=i.rgwZoneCount),e.R7$(),e.Y8G("ngIf",null!=i.rgwBucketCount),e.R7$(),e.Y8G("ngIf",null!=i.UserCount),e.R7$(),e.Y8G("ngIf",null!=i.objectCount),e.R7$(4),e.Y8G("labelsArray",e.lJ4(27,Wp))("dataArray",e.eq3(28,wp,i.queriesResults.RGW_REQUEST_PER_SECOND)),e.R7$(),e.Y8G("labelsArray",e.lJ4(30,jo))("dataArray",e.l_i(31,Bo,i.queriesResults.AVG_GET_LATENCY,i.queriesResults.AVG_PUT_LATENCY)),e.R7$(),e.Y8G("labelsArray",e.lJ4(34,jo))("dataArray",e.l_i(35,Bo,i.queriesResults.GET_BANDWIDTH,i.queriesResults.PUT_BANDWIDTH)),e.R7$(2),e.Y8G("alignItemsCenter",!0)("justifyContentCenter",!0),e.R7$(3),e.JRh(e.bMT(21,21,i.totalPoolUsedBytes)),e.R7$(2),e.Y8G("alignItemsCenter",!0)("justifyContentCenter",!0),e.R7$(3),e.JRh(e.bMT(26,23,i.averageObjectSize)),e.R7$(6),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",e.bMT(33,25,i.multisiteSyncStatus$)))},dependencies:[R.YU,R.Sq,R.bT,N.m,vn.C,ip.i,_p.C,sp.P,rp.M,ap,Mp,vp,R.Jj,Jt.l],styles:["hr[_ngcontent-%COMP%]{margin-bottom:2px;margin-top:2px}.list-group-item[_ngcontent-%COMP%]{border:0}.align-replica-zones[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;padding-left:2em;padding-right:2em}ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}.align-primary-zone[_ngcontent-%COMP%]{padding-left:4em}.border-left[_ngcontent-%COMP%]{border-left:1px solid rgba(0,0,0,.1254901961)}"]})}return n})();var sg=g(45518),zo=g(80299),rg=g(92696),ag=g(41483),lg=g(1158);function cg(n,_){1&n&&(e.j41(0,"span",30),e.pXf(1,8),e.k0s())}function ug(n,_){1&n&&(e.j41(0,"span",30),e.pXf(1,9),e.k0s())}function dg(n,_){1&n&&(e.j41(0,"span",30),e.pXf(1,10),e.k0s())}function fg(n,_){if(1&n){const t=e.RV6();e.j41(0,"form",15,0)(2,"div",16)(3,"div",17)(4,"label",18),e.pXf(5,2),e.k0s(),e.j41(6,"div",19),e.nrm(7,"input",20),e.DNE(8,cg,2,0,"span",21),e.k0s()(),e.j41(9,"div",17)(10,"label",22),e.pXf(11,3),e.k0s(),e.j41(12,"div",19)(13,"select",23)(14,"option",24),e.pXf(15,4),e.nI1(16,"upperFirst"),e.k0s(),e.j41(17,"option",24),e.pXf(18,5),e.nI1(19,"upperFirst"),e.k0s(),e.j41(20,"option",24),e.pXf(21,6),e.nI1(22,"upperFirst"),e.k0s()(),e.DNE(23,ug,2,0,"span",21),e.k0s()(),e.j41(24,"div",17)(25,"label",25),e.pXf(26,7),e.k0s(),e.j41(27,"div",19),e.nrm(28,"input",26),e.DNE(29,dg,2,0,"span",21),e.k0s()()(),e.j41(30,"div",27)(31,"div",28)(32,"cd-form-button-panel",29),e.nI1(33,"titlecase"),e.nI1(34,"upperFirst"),e.bIt("submitActionEvent",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.submit())}),e.k0s()()()()}if(2&n){const t=e.sdS(1),o=e.XpG();e.Y8G("formGroup",o.syncPolicyForm),e.R7$(7),e.Y8G("readonly",o.editing),e.R7$(),e.Y8G("ngIf",o.syncPolicyForm.showError("group_id",t,"required")),e.R7$(6),e.FS9("value",o.syncPolicyStatus.ENABLED),e.R7$(2),e.uP7(e.bMT(16,15,o.syncPolicyStatus.ENABLED)),e.nnv(15),e.R7$(),e.FS9("value",o.syncPolicyStatus.ALLOWED),e.R7$(2),e.uP7(e.bMT(19,17,o.syncPolicyStatus.ALLOWED)),e.nnv(18),e.R7$(),e.FS9("value",o.syncPolicyStatus.FORBIDDEN),e.R7$(2),e.uP7(e.bMT(22,19,o.syncPolicyStatus.FORBIDDEN)),e.nnv(21),e.R7$(),e.Y8G("ngIf",o.syncPolicyForm.showError("status",t,"required")),e.R7$(5),e.Y8G("ngbTypeahead",o.bucketDataSource),e.R7$(),e.Y8G("ngIf",o.syncPolicyForm.showError("bucket_name",t,"bucketNameNotAllowed")),e.R7$(3),e.Y8G("form",o.syncPolicyForm)("disabled",o.syncPolicyForm.pending||o.syncPolicyForm.pristine||o.syncPolicyForm.invalid)("submitText",e.bMT(33,21,o.action)+" "+e.bMT(34,23,o.resource))}}let Xn=(()=>{class n extends d.g{router;route;actionLabels;fb;rgwMultisiteService;notificationService;rgwBucketService;syncPolicyForm;editing=!1;action;resource;syncPolicyStatus=Le._4;pageURL;bucketDataSource=t=>t.pipe((0,Ao.B)(200),(0,Lo.F)(),(0,ag.ZZ)(o=>this.getBucketTypeahead(o)));constructor(t,o,i,s,T,F,k){super(),this.router=t,this.route=o,this.actionLabels=i,this.fb=s,this.rgwMultisiteService=T,this.notificationService=F,this.rgwBucketService=k,this.editing=this.router.url.includes("(modal:edit"),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource="Sync Policy Group",this.createForm(),this.loadingReady(),this.pageURL="rgw/multisite/sync-policy"}ngOnInit(){this.editing&&this.route.paramMap.subscribe(t=>{const o=t.get("groupName");if(o){const i=t.get("bucketName");this.loadingStart(),this.rgwMultisiteService.getSyncPolicyGroup(o,i).subscribe(s=>{this.loadingReady(),s?(this.syncPolicyForm.get("bucket_name").disable(),this.syncPolicyForm.patchValue({group_id:s.id,status:s.status,bucket_name:i})):this.goToListView()})}})}goToListView(){this.router.navigate([this.pageURL,{outlets:{modal:null},state:{reload:!0}}])}createForm(){this.syncPolicyForm=this.fb.group({group_id:["",r.k0.required],status:[`${this.syncPolicyStatus.ENABLED}`,r.k0.required],bucket_name:["",,this.bucketExistence(!0)]})}submit(){this.syncPolicyForm.pristine?this.goToListView():this.syncPolicyForm.pending?this.syncPolicyForm.setErrors({cdSubmitButton:!0}):this.editing?this.rgwMultisiteService.modifySyncPolicyGroup(this.syncPolicyForm.getRawValue()).subscribe(()=>{this.notificationService.show(f._.success,"Modified Sync Policy Group '" + this.syncPolicyForm.getValue("group_id") + "'"),this.goToListView()},()=>{this.syncPolicyForm.setErrors({cdSubmitButton:!0})}):this.rgwMultisiteService.createSyncPolicyGroup(this.syncPolicyForm.getRawValue()).subscribe(()=>{this.notificationService.show(f._.success,"Created Sync Policy Group '" + this.syncPolicyForm.getValue("group_id") + "'"),this.goToListView()},()=>{this.syncPolicyForm.setErrors({cdSubmitButton:!0})})}bucketExistence(t){return o=>o.dirty?(0,rg.O)(500).pipe((0,lg.K)(this.rgwBucketService.exists(o.value)),(0,a.T)(i=>i===t?null:{bucketNameNotAllowed:!0})):(0,Nt.of)(null)}getBucketTypeahead(t){return h().isString(t)&&"/"!==t&&""!==t?this.rgwBucketService.list().pipe((0,a.T)(o=>o.filter(i=>i.toLowerCase().includes(t)).slice(0,15)),(0,Ht.W)(()=>(0,Nt.of)(["Error while retrieving bucket names."]))):(0,Nt.of)([])}static \u0275fac=function(o){return new(o||n)(e.rXU(I.Ix),e.rXU(I.nX),e.rXU(m.Ss),e.rXU(u.$),e.rXU(y.A),e.rXU(B.J),e.rXU($.c))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-multisite-sync-policy-form"]],features:[e.Vt3],decls:7,vars:8,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re;return t="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",o="Group Name...",i="Bucket Name...",s="Group Name",T="Status",F="" + "\ufffd0\ufffd" + "",k="" + "\ufffd0\ufffd" + "",H="" + "\ufffd0\ufffd" + "",q="Bucket Name",oe="Pole jest wymagane.",le="Pole jest wymagane.",Re="The bucket with chosen name does not exist.",[["frm","ngForm"],t,s,T,F,k,H,q,oe,le,Re,[3,"pageURL"],[1,"modal-title"],[1,"modal-content"],["novalidate","",3,"formGroup",4,"cdFormLoading"],["novalidate","",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","group_id",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["id","group_id","name","group_id","type","text","placeholder",o,"formControlName","group_id",1,"form-control",3,"readonly"],["class","invalid-feedback",4,"ngIf"],["for","status",1,"cd-col-form-label","required"],["id","status","name","status","formControlName","status",1,"form-select"],[3,"value"],["for","bucket_name",1,"cd-col-form-label"],["id","bucket_name","name","bucket_name","type","text","placeholder",i,"formControlName","bucket_name",1,"form-control",3,"ngbTypeahead"],[1,"modal-footer"],[1,"text-right"],[3,"submitActionEvent","form","disabled","submitText"],[1,"invalid-feedback"]]},template:function(o,i){1&o&&(e.j41(0,"cd-modal",11)(1,"span",12),e.pXf(2,1),e.nI1(3,"titlecase"),e.nI1(4,"upperFirst"),e.k0s(),e.qex(5,13),e.DNE(6,fg,35,25,"form",14),e.bVm(),e.k0s()),2&o&&(e.Y8G("pageURL",i.pageURL),e.R7$(4),e.uP7(e.bMT(3,4,i.action))(e.bMT(4,6,i.resource)),e.nnv(2),e.R7$(2),e.Y8G("cdFormLoading",i.loading))},dependencies:[R.bT,Pt.z,We.e,Xt.G,Oe.S,It.a,St.C,Xe.E,r.qT,r.xH,r.y7,r.me,r.wz,r.BC,r.cb,r.j4,r.JD,b.$n,Ze.c$,R.PV,pt.r]})}return n})();const Ho=n=>({"text-muted":n});function pg(n,_){1&n&&(e.j41(0,"option",70),e.pXf(1,7),e.k0s())}function gg(n,_){1&n&&(e.j41(0,"option",71),e.pXf(1,8),e.k0s())}function Tg(n,_){if(1&n&&(e.j41(0,"option",72),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function Rg(n,_){1&n&&(e.j41(0,"span",73),e.pXf(1,9),e.k0s())}function mg(n,_){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",52)(2,"label",63),e.pXf(3,5),e.k0s(),e.j41(4,"div",64)(5,"select",65),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setKmsProvider())}),e.DNE(6,pg,2,0,"option",66)(7,gg,2,0,"option",67)(8,Tg,2,2,"option",68),e.k0s(),e.j41(9,"cd-help-text")(10,"span"),e.pXf(11,6),e.k0s()(),e.DNE(12,Rg,2,0,"span",69),e.k0s()()()}if(2&n){const t=e.XpG(),o=e.sdS(6);e.R7$(6),e.Y8G("ngIf",null!==t.kmsProviders&&0===t.kmsProviders.length),e.R7$(),e.Y8G("ngIf",null!==t.kmsProviders&&t.kmsProviders.length>0),e.R7$(),e.Y8G("ngForOf",t.kmsProviders),e.R7$(4),e.Y8G("ngIf",t.configForm.showError("kms_provider",o,"required"))}}function Eg(n,_){if(1&n&&(e.j41(0,"option",72),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function Sg(n,_){1&n&&(e.j41(0,"span",73),e.pXf(1,12),e.k0s())}function Fg(n,_){if(1&n&&(e.j41(0,"div")(1,"div",52)(2,"label",74),e.pXf(3,10),e.k0s(),e.j41(4,"div",64)(5,"select",75),e.DNE(6,Eg,2,2,"option",68),e.k0s(),e.j41(7,"cd-help-text")(8,"span"),e.pXf(9,11),e.k0s()(),e.DNE(10,Sg,2,0,"span",69),e.k0s()()()),2&n){const t=e.XpG(2),o=e.sdS(6);e.R7$(6),e.Y8G("ngForOf",t.authMethods),e.R7$(4),e.Y8G("ngIf",t.configForm.showError("auth",o,"required"))}}function Cg(n,_){if(1&n&&(e.j41(0,"option",72),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function Mg(n,_){1&n&&(e.j41(0,"span",73),e.pXf(1,15),e.k0s())}function hg(n,_){if(1&n&&(e.j41(0,"div")(1,"div",52)(2,"label",76),e.pXf(3,13),e.k0s(),e.j41(4,"div",64)(5,"select",77),e.DNE(6,Cg,2,2,"option",68),e.k0s(),e.j41(7,"cd-help-text")(8,"span"),e.pXf(9,14),e.k0s()(),e.DNE(10,Mg,2,0,"span",69),e.k0s()()()),2&n){const t=e.XpG(2),o=e.sdS(6);e.R7$(6),e.Y8G("ngForOf",t.secretEngines),e.R7$(4),e.Y8G("ngIf",t.configForm.showError("secret_engine",o,"required"))}}function Gg(n,_){1&n&&(e.j41(0,"span",73),e.pXf(1,18),e.k0s())}function Pg(n,_){if(1&n&&(e.j41(0,"div")(1,"div",52)(2,"label",78),e.pXf(3,16),e.k0s(),e.j41(4,"div",64),e.nrm(5,"input",79),e.j41(6,"cd-help-text")(7,"span"),e.pXf(8,17),e.k0s()(),e.DNE(9,Gg,2,0,"span",69),e.k0s()()()),2&n){const t=e.XpG(2),o=e.sdS(6);e.R7$(9),e.Y8G("ngIf",t.configForm.showError("secret_path",o,"required"))}}function Ig(n,_){1&n&&(e.j41(0,"div")(1,"div",52)(2,"label",80),e.pXf(3,19),e.k0s(),e.j41(4,"div",64),e.nrm(5,"input",81),e.j41(6,"cd-help-text")(7,"span"),e.pXf(8,20),e.k0s()()()()())}function Og(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,21),e.k0s())}function Ng(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,22),e.k0s())}function bg(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,23),e.k0s())}function Ag(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,24),e.k0s())}function Lg(n,_){1&n&&(e.j41(0,"span",73),e.pXf(1,25),e.k0s())}function Dg(n,_){if(1&n&&(e.j41(0,"div")(1,"div",52)(2,"label",82),e.DNE(3,Og,2,0,"span",60)(4,Ng,2,0,"span",60),e.k0s(),e.j41(5,"div",64),e.nrm(6,"input",83),e.j41(7,"cd-help-text"),e.DNE(8,bg,2,0,"span",60)(9,Ag,2,0,"span",60),e.k0s(),e.DNE(10,Lg,2,0,"span",69),e.k0s()()()),2&n){const t=e.XpG(2),o=e.sdS(6);e.R7$(3),e.Y8G("ngIf",t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT),e.R7$(),e.Y8G("ngIf",t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.KMIP),e.R7$(4),e.Y8G("ngIf",t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT),e.R7$(),e.Y8G("ngIf",t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.KMIP),e.R7$(),e.Y8G("ngIf",t.configForm.showError("addr",o,"required"))}}function yg(n,_){1&n&&(e.j41(0,"span",73),e.pXf(1,29),e.k0s())}function $g(n,_){if(1&n){const t=e.RV6();e.j41(0,"div",52)(1,"label",85)(2,"span"),e.pXf(3,26),e.k0s(),e.j41(4,"cd-helper"),e.pXf(5,27),e.k0s()(),e.j41(6,"div",64)(7,"input",86),e.bIt("change",function(i){e.eBV(t);const s=e.XpG(3);return e.Njj(s.fileUpload(i.target.files,"token"))}),e.k0s(),e.j41(8,"cd-help-text")(9,"span"),e.pXf(10,28),e.k0s()(),e.DNE(11,yg,2,0,"span",69),e.k0s()()}if(2&n){const t=e.XpG(3),o=e.sdS(6);e.R7$(11),e.Y8G("ngIf",t.configForm.showError("token",o,"required"))}}function vg(n,_){if(1&n&&(e.j41(0,"div"),e.DNE(1,$g,12,1,"div",84),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf","token"===t.configForm.getValue("auth"))}}function Wg(n,_){if(1&n&&(e.j41(0,"div")(1,"div",52)(2,"label",87),e.pXf(3,30),e.k0s(),e.j41(4,"div",64),e.nrm(5,"input",88),e.j41(6,"cd-help-text")(7,"span"),e.pXf(8,31),e.k0s()()()(),e.j41(9,"div",52)(10,"label",89),e.pXf(11,32),e.k0s(),e.j41(12,"div",64),e.nrm(13,"input",90),e.j41(14,"cd-help-text")(15,"span"),e.pXf(16,33),e.k0s()()()(),e.j41(17,"div",52)(18,"label",91),e.pXf(19,34),e.k0s(),e.j41(20,"div",64),e.nrm(21,"input",92),e.j41(22,"cd-help-text")(23,"span"),e.pXf(24,35),e.k0s()()()(),e.j41(25,"div",52)(26,"label",93),e.pXf(27,36),e.k0s(),e.j41(28,"div",64),e.nrm(29,"input",94),e.j41(30,"cd-help-text")(31,"span"),e.pXf(32,37),e.k0s()()()()()),2&n){const t=e.XpG(2);e.R7$(21),e.BMQ("disabled",t.configForm.getValue("kms_provider")!==t.KMS_PROVIDER.KMIP||null),e.R7$(8),e.BMQ("disabled",t.configForm.getValue("kms_provider")!=t.KMS_PROVIDER.KMIP)}}function wg(n,_){1&n&&(e.j41(0,"div")(1,"div",52)(2,"label",95)(3,"span"),e.pXf(4,38),e.k0s(),e.j41(5,"cd-helper"),e.pXf(6,39),e.k0s()(),e.j41(7,"div",64),e.nrm(8,"input",96),e.j41(9,"cd-help-text")(10,"span"),e.pXf(11,40),e.k0s()()()()())}function Ug(n,_){1&n&&(e.j41(0,"div")(1,"div",52)(2,"label",97)(3,"span"),e.pXf(4,41),e.k0s(),e.j41(5,"cd-helper"),e.pXf(6,42),e.k0s()(),e.j41(7,"div",64),e.nrm(8,"input",98),e.j41(9,"cd-help-text")(10,"span"),e.pXf(11,43),e.k0s()()()()())}function xg(n,_){1&n&&(e.j41(0,"div")(1,"div",52)(2,"label",99)(3,"span"),e.pXf(4,44),e.k0s(),e.j41(5,"cd-helper"),e.pXf(6,45),e.k0s()(),e.j41(7,"div",64),e.nrm(8,"input",100),e.j41(9,"cd-help-text")(10,"span"),e.pXf(11,46),e.k0s()()()()())}function kg(n,_){if(1&n&&(e.j41(0,"div"),e.DNE(1,Fg,11,2,"div",60)(2,hg,11,2,"div",60)(3,Pg,10,1,"div",60)(4,Ig,9,0,"div",60)(5,Dg,11,5,"div",60)(6,vg,2,1,"div",60)(7,Wg,33,2,"div",60)(8,wg,12,0,"div",60)(9,Ug,12,0,"div",60)(10,xg,12,0,"div",60),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.R7$(),e.Y8G("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.R7$(),e.Y8G("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.R7$(),e.Y8G("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")==t.KMS_PROVIDER.VAULT||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.R7$(),e.Y8G("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.R7$(),e.Y8G("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.VAULT||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.R7$(),e.Y8G("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS&&t.configForm.getValue("kms_provider")===t.KMS_PROVIDER.KMIP),e.R7$(),e.Y8G("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.R7$(),e.Y8G("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3),e.R7$(),e.Y8G("ngIf",t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_KMS||t.configForm.getValue("encryptionType")===t.ENCRYPTION_TYPE.SSE_S3)}}let Yo=(()=>{class n{formBuilder;activeModal;actionLabels;rgwBucketService;notificationService;vaultAddress=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{4}$/;kmsProviders;configForm;submitAction=new e.bkB;authMethods;secretEngines;selectedEncryptionConfigValues={};allEncryptionConfigValues=[];editing=!1;action;table;ENCRYPTION_TYPE=K;KMS_PROVIDER=C;constructor(t,o,i,s,T){this.formBuilder=t,this.activeModal=o,this.actionLabels=i,this.rgwBucketService=s,this.notificationService=T,this.createForm()}ngOnInit(){this.kmsProviders=ne.kmsProviders,this.authMethods=ne.authMethods,this.secretEngines=ne.secretEngines,this.editing&&this.selectedEncryptionConfigValues&&(this.configForm.patchValue({addr:this.selectedEncryptionConfigValues.addr,encryptionType:this.selectedEncryptionConfigValues.encryption_type,kms_provider:this.selectedEncryptionConfigValues.backend,auth:this.selectedEncryptionConfigValues.auth,secret_engine:this.selectedEncryptionConfigValues.secret_engine,secret_path:this.selectedEncryptionConfigValues.prefix,namespace:this.selectedEncryptionConfigValues.namespace,kms_key_template:this.selectedEncryptionConfigValues.kms_key_template,s3_key_template:this.selectedEncryptionConfigValues.s3_key_template,username:this.selectedEncryptionConfigValues.username,password:this.selectedEncryptionConfigValues.password,ssl_cert:this.selectedEncryptionConfigValues.backend===C.VAULT?this.selectedEncryptionConfigValues.ssl_cacert:this.selectedEncryptionConfigValues.ca_path,client_cert:this.selectedEncryptionConfigValues.backend===C.VAULT?this.selectedEncryptionConfigValues.ssl_clientcert:this.selectedEncryptionConfigValues.client_cert,client_key:this.selectedEncryptionConfigValues.backend===C.VAULT?this.selectedEncryptionConfigValues.ssl_clientkey:this.selectedEncryptionConfigValues.client_key}),this.configForm.get("kms_provider").disable()),this.checkKmsProviders()}setKmsProvider(){const t=this.configForm.get("encryptionType").value;this.kmsProviders=t===K.SSE_KMS?[C.VAULT,C.KMIP]:[C.VAULT]}checkKmsProviders(){if(this.editing||this.setKmsProvider(),this.allEncryptionConfigValues&&this.allEncryptionConfigValues.hasOwnProperty(K.SSE_KMS)&&!this.editing){const t=Object.values(this.allEncryptionConfigValues[K.SSE_KMS]).map(o=>o.backend);this.configForm.get("encryptionType").value===K.SSE_KMS&&(this.kmsProviders=this.kmsProviders.filter(o=>!t.includes(o)))}if(this.allEncryptionConfigValues&&this.allEncryptionConfigValues.hasOwnProperty("s3")&&!this.editing){const t=Object.values(this.allEncryptionConfigValues[K.SSE_S3]).map(o=>o.backend);this.configForm.get("encryptionType").value===K.SSE_S3&&(this.kmsProviders=this.kmsProviders.filter(o=>!t.includes(o)))}this.editing||this.kmsProviders.length>0&&this.configForm.get("kms_provider").setValue(this.kmsProviders[0])}createForm(){this.configForm=this.formBuilder.group({addr:[null,[r.k0.required,E.xQ.custom("vaultPattern",t=>!h().isEmpty(t)&&!this.vaultAddress.test(t))]],kms_provider:["vault",r.k0.required],encryptionType:["kms",r.k0.required],auth:["token",E.xQ.requiredIf({kms_provider:"vault"})],secret_engine:["kv",E.xQ.requiredIf({kms_provider:"vault"})],secret_path:["/"],namespace:[null],token:[null,[E.xQ.requiredIf({auth:"token",kms_provider:"vault"})]],ssl_cert:[""],client_cert:[""],client_key:[""],kmsEnabled:[{value:!1}],s3Enabled:[{value:!1}],kms_key_template:[null],s3_key_template:[null],username:[""],password:[""]})}fileUpload(t,o){const i=t[0];(new FileReader).addEventListener("load",()=>{const T=this.configForm.get(o);T.setValue(i),T.markAsDirty(),T.markAsTouched(),T.updateValueAndValidity()})}onSubmit(){const t=this.configForm.getRawValue();let o;t.kms_provider===C.VAULT?o={kms_provider:t.kms_provider,encryption_type:t.encryptionType,config:{addr:t.addr,auth:t.auth,prefix:t.secret_path,secret_engine:t.secret_engine,namespace:t.namespace,token_file:t.token,ssl_cacert:t.ssl_cert,ssl_clientcert:t.client_cert,ssl_clientkey:t.client_key}}:t.kms_provider===C.KMIP&&(o={kms_provider:t.kms_provider,encryption_type:t.encryptionType,config:{addr:t.addr,username:t.username,password:t.password,kms_key_template:t.kms_key_template,s3_key_template:t.s3_key_template,client_key:t.client_key,ca_path:t.ssl_cert,client_cert:t.client_cert}}),this.rgwBucketService.setEncryptionConfig(o).subscribe({next:()=>{this.notificationService.show(f._.success,"Updated RGW Encryption Configuration values")},error:i=>{this.notificationService.show(f._.error,i.message),this.configForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.activeModal.close(),this.table?.refreshBtn()}})}static \u0275fac=function(o){return new(o||n)(e.rXU(u.$),e.rXU(b.Lw),e.rXU(m.Ss),e.rXU($.c),e.rXU(B.J))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-config-modal"]],outputs:{submitAction:"submitAction"},decls:23,vars:19,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de,pe,He,Ye,ze,Ve,Ne,fe,nt,ot,it,_t,st,rt,at,lt,ct,Qe,ut,dt,ft,Me;return t="" + "\ufffd0\ufffd" + " RGW Encryption Configurations",o="Encryption Type",i="SSE-S3",s="SSE-KMS",T="Key management service provider",F="Where the encryption keys are stored. ",k="-- No kms providers available --",H="-- Select a provider --",q="Pole jest wymagane.",oe="Authentication Method",le="Type of authentication method to be used with Vault ",Re="Pole jest wymagane.",ce="Secret Engine",Te="Vault Secret Engine to be used to retrieve encryption keys. ",se="Pole jest wymagane.",Ce="Secret Path ",he="Vault secret URL prefix, which can be used to restrict access to a particular subset of the Vault secret space. ",ye="Pole jest wymagane.",$e="Namespace ",Ge="Vault Namespace to be used to select your tenant. ",Ue="Vault Address ",xe="KMIP Address ",ke="Vault server base address. ",ve="Kmip server base address. ",de="Pole jest wymagane.",pe="Token",He=" The token authentication method expects a Vault token to be present in a plaintext file. ",Ye="If authentication method is 'token', provide a path to the token file. ",ze="Pole jest wymagane.",Ve="KMS Key Template ",Ne="sse-kms; kmip key names ",fe="S3 Key Template ",nt="sse-s3; kmip key template ",ot="Username ",it="When authenticating via username ",_t="Password ",st="optional w/ username ",rt="CA Certificate Path",at="The SSL certificate in PEM format. Please provide file path to the RGW host.",lt=" Path for custom ca certificate for accessing server ",ct="Client Certificate Path",Qe="The Client certificate in PEM format. Please provide file path to the RGW host.",ut=" Path for custom client certificate for accessing server ",dt="Client Private Key Path",ft="The Client Private Key in PEM format. Please provide file path to the RGW host.",Me=" Path for private key required for client cert ",[["frm","ngForm"],t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de,pe,He,Ye,ze,Ve,Ne,fe,nt,ot,it,_t,st,rt,at,lt,ct,Qe,ut,dt,ft,Me,[3,"modalRef"],[1,"modal-title"],[1,"modal-content"],["name","configForm",3,"formGroup"],[1,"modal-body"],[1,"form-group","row"],["for","encryptionType",1,"cd-col-form-label","required"],[1,"col-md-auto","custom-checkbox","form-check-inline","ms-3"],["formControlName","encryptionType","id","s3Enabled","type","radio",1,"form-check-input",3,"change","value"],["for","s3Enabled",1,"custom-check-label",3,"ngClass"],[1,"col-md-auto","custom-checkbox","form-check-inline"],["formControlName","encryptionType","id","kmsEnabled","type","radio",1,"form-check-input",3,"change","value"],["for","kmsEnabled",1,"custom-check-label",3,"ngClass"],[4,"ngIf"],[1,"modal-footer"],[3,"submitActionEvent","submitText","form"],["for","kms_provider",1,"cd-col-form-label","required"],[1,"cd-col-form-input"],["id","kms_provider","formControlName","kms_provider",1,"form-select",3,"change"],["ngValue","null",4,"ngIf"],["ngValue","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["ngValue","null"],["ngValue",""],[3,"value"],[1,"invalid-feedback"],["for","auth",1,"cd-col-form-label","required"],["id","auth","formControlName","auth",1,"form-select"],["for","secret_engine",1,"cd-col-form-label","required"],["id","secret_engine","formControlName","secret_engine",1,"form-select"],["for","secret_path",1,"cd-col-form-label"],["type","text","id","secret_path","formControlName","secret_path","placeholder","/v1/secret/data",1,"form-control"],["for","namespace",1,"cd-col-form-label"],["id","namespace","type","text","placeholder","tenant1","formControlName","namespace",1,"form-control"],["for","addr",1,"cd-col-form-label","required"],["id","addr","formControlName","addr","placeholder","http://127.0.0.1:8000",1,"form-control"],["class","form-group row",4,"ngIf"],["for","token",1,"cd-col-form-label","required"],["type","file","id","token","formControlName","token",3,"change"],["for","kms_key_template",1,"cd-col-form-label"],["id","kms_key_template","placeholder","$keyid","formControlName","kms_key_template",1,"form-control"],["for","s3_key_template",1,"cd-col-form-label"],["id","s3_key_template","placeholder","$keyid","formControlName","s3_key_template",1,"form-control"],["for","username",1,"cd-col-form-label"],["id","username","formControlName","username",1,"form-control"],["for","password",1,"cd-col-form-label"],["id","password","type","password","formControlName","password",1,"form-control"],["for","ssl_cert",1,"cd-col-form-label"],["type","text","id","ssl_cert","formControlName","ssl_cert","placeholder","/path/to/ca_cert.pem",1,"form-control"],["for","client_cert",1,"cd-col-form-label"],["type","text","id","client_cert","formControlName","client_cert","placeholder","/path/to/client_cert.pem",1,"form-control"],["for","client_key",1,"cd-col-form-label"],["type","text","id","client_key","formControlName","client_key","placeholder","/path/to/client_key.pem",1,"form-control"]]},template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"cd-modal",47),e.qex(1,48),e.pXf(2,1),e.nI1(3,"titlecase"),e.bVm(),e.qex(4,49),e.j41(5,"form",50,0)(7,"div",51)(8,"div",52)(9,"label",53),e.pXf(10,2),e.k0s(),e.j41(11,"div",54)(12,"input",55),e.bIt("change",function(){return e.eBV(s),e.Njj(i.checkKmsProviders())}),e.k0s(),e.j41(13,"label",56),e.pXf(14,3),e.k0s()(),e.j41(15,"div",57)(16,"input",58),e.bIt("change",function(){return e.eBV(s),e.Njj(i.checkKmsProviders())}),e.k0s(),e.j41(17,"label",59),e.pXf(18,4),e.k0s()()(),e.DNE(19,mg,13,4,"div",60)(20,kg,11,10,"div",60),e.k0s(),e.j41(21,"div",61)(22,"cd-form-button-panel",62),e.bIt("submitActionEvent",function(){return e.eBV(s),e.Njj(i.onSubmit())}),e.k0s()()(),e.bVm(),e.k0s()}2&o&&(e.Y8G("modalRef",i.activeModal),e.R7$(3),e.uP7(e.bMT(3,13,i.action)),e.nnv(2),e.R7$(2),e.Y8G("formGroup",i.configForm),e.R7$(7),e.Y8G("value",i.ENCRYPTION_TYPE.SSE_S3),e.BMQ("disabled",!(!i.editing||i.configForm.getValue("encryptionType")===i.ENCRYPTION_TYPE.SSE_S3)||null),e.R7$(),e.Y8G("ngClass",e.eq3(15,Ho,i.editing&&i.configForm.getValue("encryptionType")!==i.ENCRYPTION_TYPE.SSE_S3)),e.R7$(3),e.Y8G("value",i.ENCRYPTION_TYPE.SSE_KMS),e.BMQ("disabled",!(!i.editing||i.configForm.getValue("encryptionType")===i.ENCRYPTION_TYPE.SSE_KMS)||null),e.R7$(),e.Y8G("ngClass",e.eq3(17,Ho,i.editing&&i.configForm.getValue("encryptionType")!==i.ENCRYPTION_TYPE.SSE_KMS)),e.R7$(2),e.Y8G("ngIf",i.configForm.getValue("encryptionType")===i.ENCRYPTION_TYPE.SSE_KMS||i.configForm.getValue("encryptionType")===i.ENCRYPTION_TYPE.SSE_S3),e.R7$(),e.Y8G("ngIf",0!==i.kmsProviders.length&&""!==i.configForm.getValue("kms_provider")),e.R7$(2),e.Y8G("submitText",i.actionLabels.SUBMIT)("form",i.configForm))},dependencies:[R.YU,R.Sq,R.bT,wt.m,Pt.z,We.e,V.O,Oe.S,It.a,St.C,Xe.E,r.qT,r.xH,r.y7,r.me,r.wz,r.Fm,r.BC,r.cb,r.j4,r.JD,Ze.c$,R.PV]})}return n})();var jn=function(n){return n.auth="Authentication Method",n.encryption_type="Encryption Type",n.backend="Backend",n.prefix="Prefix",n.namespace="Namespace",n.secret_engine="Secret Engine",n.addr="Address",n.token_file="Token File",n.ssl_cacert="SSL CA Certificate",n.ssl_clientcert="SSL Client Certificate",n.ssl_clientkey="SSL Client Key",n.verify_ssl="Verify SSL",n.ca_path="CA Path",n.client_cert="Client Certificate",n.client_key="Client Key",n.kms_key_template="KMS Key Template",n.password="Password",n.s3_key_template="S3 Key Template",n.username="Username",n}(jn||{});function Xg(n,_){if(1&n&&e.nrm(0,"cd-table-key-value",8),2&n){const t=e.XpG(2);e.Y8G("data",t.transformedData)}}function jg(n,_){if(1&n&&(e.qex(0),e.j41(1,"nav",3,0),e.qex(3,4),e.j41(4,"a",5),e.pXf(5,1),e.k0s(),e.DNE(6,Xg,1,1,"ng-template",6),e.bVm(),e.k0s(),e.nrm(7,"div",7),e.bVm()),2&n){const t=e.sdS(2);e.R7$(7),e.Y8G("ngbNavOutlet",t)}}let Bg=(()=>{class n{transformedData;selection;excludeProps=[];filteredEncryptionConfigValues;ngOnChanges(){if(this.selection){this.filteredEncryptionConfigValues=Object.keys(this.selection).filter(o=>!this.excludeProps.includes(o)).reduce((o,i)=>(o[i]=this.selection[i],o),{});const t={};for(const o in this.filteredEncryptionConfigValues)jn[o]?t[jn[o]]=this.filteredEncryptionConfigValues[o]:t[o]=this.filteredEncryptionConfigValues[o];this.transformedData=t}}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-config-details"]],inputs:{selection:"selection",excludeProps:"excludeProps"},features:[e.OA$],decls:1,vars:1,consts:()=>{let t;return t="Szczeg\xF3\u0142y",[["nav","ngbNav"],t,[4,"ngIf"],["ngbNav","","id","tabset-config-details","cdStatefulTab","config-details",1,"nav-tabs"],["ngbNavItem","details"],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[3,"data"]]},template:function(o,i){1&o&&e.DNE(0,jg,8,1,"ng-container",2),2&o&&e.Y8G("ngIf",i.selection)},dependencies:[R.bT,Pn.i,Gn.B,b.Um,b.X9,b.sy,b.Ri,b.WA,b.m_]})}return n})();function zg(n,_){if(1&n&&e.nrm(0,"cd-rgw-config-details",11),2&n){const t=e.XpG(2);e.Y8G("selection",t.expandedRow)("excludeProps",t.excludeProps)}}function Hg(n,_){if(1&n){const t=e.RV6();e.j41(0,"cd-table",8,1),e.bIt("fetchData",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.fetchData())})("updateSelection",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.updateSelection(i))})("setExpandedRow",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.setExpandedRow(i))}),e.nrm(2,"cd-table-actions",9),e.DNE(3,zg,1,2,"cd-rgw-config-details",10),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("data",t.encryptionConfigValues)("columns",t.columns)("forceIdentifier",!0)("hasDetails",!0),e.R7$(2),e.Y8G("permission",t.permissions.configOpt)("selection",t.selection)("tableActions",t.tableActions)}}let Yg=(()=>{class n extends Dt.D{activeModal;actionLabels;rgwBucketService;authStorageService;modalService;vaultAddress=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{4}$/;table;kmsProviders;columns=[];configForm;permissions;encryptionConfigValues=[];selection=new gt.y;submitAction=new e.bkB;authMethods;secretEngines;tableActions;bsModalRef;filteredEncryptionConfigValues;excludeProps=[];disableCreate=!0;allEncryptionValues;constructor(t,o,i,s,T){super(),this.activeModal=t,this.actionLabels=o,this.rgwBucketService=i,this.authStorageService=s,this.modalService=T,this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.columns=[{name:"Encryption Type",prop:"encryption_type",flexGrow:1},{name:"Key Management Service Provider",prop:"backend",flexGrow:1},{name:"Address",prop:"addr",flexGrow:1}],this.tableActions=[{permission:"create",icon:S.F.add,name:this.actionLabels.CREATE,click:()=>this.openRgwConfigModal(!1),disable:()=>this.disableCreate},{permission:"update",icon:S.F.edit,name:this.actionLabels.EDIT,click:()=>this.openRgwConfigModal(!0)}],this.excludeProps=this.columns.map(t=>t.prop),this.excludeProps.push("unique_id")}getBackend(t,o){const i=new Set(Object.keys(t[o]));return o===K.SSE_KMS?i.has("kmip")&&i.has("vault"):i.has("vault")}openRgwConfigModal(t){if(t){const o={action:"edit",editing:!0,selectedEncryptionConfigValues:this.selection.first(),table:this.table};this.bsModalRef=this.modalService.show(Yo,o,{size:"lg"})}else this.bsModalRef=this.modalService.show(Yo,{action:"create",allEncryptionConfigValues:this.allEncryptionValues},{size:"lg"})}updateSelection(t){this.selection=t}setExpandedRow(t){super.setExpandedRow(t)}flattenData(t){const o=[];for(const i of Object.values(t[K.SSE_KMS]))o.push(i);for(const i of Object.values(t[K.SSE_S3]))o.push(i);return o}fetchData(){this.rgwBucketService.getEncryptionConfig().subscribe(t=>{this.allEncryptionValues=t;const o=this.getBackend(t,K.SSE_KMS),i=this.getBackend(t,K.SSE_S3);this.disableCreate=o&&i,this.encryptionConfigValues=this.flattenData(t)})}static \u0275fac=function(o){return new(o||n)(e.rXU(b.Lw),e.rXU(m.Ss),e.rXU($.c),e.rXU(Et.v),e.rXU(tn.B))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-configuration-page"]],viewQuery:function(o,i){if(1&o&&e.GBs(Je.O,5),2&o){let s;e.mGM(s=e.lsd())&&(i.table=s.first)}},outputs:{submitAction:"submitAction"},features:[e.Vt3],decls:7,vars:1,consts:()=>{let t;return t="Server-side Encryption",[["nav","ngbNav"],["table",""],t,["ngbNav","",1,"nav-tabs"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],["identifier","unique_id","columnMode","flex","selectionType","single",3,"fetchData","updateSelection","setExpandedRow","data","columns","forceIdentifier","hasDetails"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection","excludeProps",4,"cdTableDetail"],[3,"selection","excludeProps"]]},template:function(o,i){if(1&o&&(e.j41(0,"nav",3,0),e.qex(2,4),e.j41(3,"a",5),e.pXf(4,2),e.k0s(),e.DNE(5,Hg,4,7,"ng-template",6),e.bVm(),e.k0s(),e.nrm(6,"div",7)),2&o){const s=e.sdS(1);e.R7$(6),e.Y8G("ngbNavOutlet",s)}},dependencies:[Je.O,Ot.j,$t.N,b.Um,b.X9,b.sy,b.Ri,b.WA,b.m_,Bg]})}return n})(),Vo=(()=>{class n{http;baseUrl="api/rgw/zonegroup";url=`${this.baseUrl}/storage-class`;constructor(t){this.http=t}removeStorageClass(t,o){return this.http.delete(`${this.url}/${t}/${o}`,{observe:"response"})}createStorageClass(t){return this.http.post(`${this.url}`,t)}editStorageClass(t){return this.http.put(`${this.url}`,t)}getPlacement_target(t){return this.http.get(`${this.baseUrl}/get_placement_target_by_placement_id/${t}`)}static \u0275fac=function(o){return new(o||n)(e.KVO(Nn.Qq))};static \u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _n=g(69138);const Zo=()=>({md:4});function Vg(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",18),e.PLo(2,0),e.j41(3,"cd-helper",19),e.nrm(4,"span"),e.k0s(),e.YFu(),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.uP7(t.zoneGroupText),e.nnv(2),e.R7$(2),e.JRh(null==t.selection?null:t.selection.zonegroup_name)}}function Zg(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",18),e.PLo(2,1),e.j41(3,"cd-helper",19),e.nrm(4,"span"),e.k0s(),e.YFu(),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(6),e.JRh(null==t.selection?null:t.selection.placement_target)}}function Kg(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",18),e.PLo(2,2),e.j41(3,"cd-helper",19),e.nrm(4,"span"),e.k0s(),e.YFu(),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.uP7(t.targetPathText),e.nnv(2),e.R7$(2),e.JRh(null==t.selection?null:t.selection.target_path)}}function qg(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",18),e.PLo(2,3),e.j41(3,"cd-helper",19),e.nrm(4,"span"),e.k0s(),e.YFu(),e.k0s(),e.j41(5,"td")(6,"div",20),e.nrm(7,"input",21)(8,"button",22)(9,"cd-copy-2-clipboard-button",23),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(4),e.uP7(t.targetAccessKeyText),e.nnv(2),e.R7$(2),e.Y8G("columnNumbers",e.lJ4(3,Zo)),e.R7$(),e.Y8G("value",null==t.selection?null:t.selection.access_key)}}function Jg(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",18),e.PLo(2,4),e.j41(3,"cd-helper",19),e.nrm(4,"span"),e.k0s(),e.YFu(),e.k0s(),e.j41(5,"td")(6,"div",20),e.nrm(7,"input",24)(8,"button",25)(9,"cd-copy-2-clipboard-button",26),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(4),e.uP7(t.targetSecretKeyText),e.nnv(2),e.R7$(2),e.Y8G("columnNumbers",e.lJ4(3,Zo)),e.R7$(),e.Y8G("value",null==t.selection?null:t.selection.secret)}}function Qg(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",18),e.PLo(2,5),e.j41(3,"cd-helper",19),e.nrm(4,"span"),e.k0s(),e.YFu(),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.uP7(t.hostStyleText),e.nnv(2),e.R7$(2),e.JRh(null==t.selection?null:t.selection.host_style)}}function eT(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",18),e.PLo(2,6),e.j41(3,"cd-helper",19),e.nrm(4,"span"),e.k0s(),e.YFu(),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.uP7(t.retainHeadObjectText),e.nnv(2),e.R7$(2),e.JRh(null!=t.selection&&t.selection.retain_head_object?"Enabled":"Disabled")}}function tT(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",18),e.PLo(2,7),e.j41(3,"cd-helper",19),e.nrm(4,"span"),e.k0s(),e.YFu(),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.uP7(t.allowReadThroughText),e.nnv(2),e.R7$(2),e.JRh(null!=t.selection&&t.selection.allow_read_through?"Enabled":"Disabled")}}function nT(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",18),e.PLo(2,8),e.j41(3,"cd-helper",19),e.nrm(4,"span"),e.k0s(),e.YFu(),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(4),e.uP7(t.readthroughrestoreDaysText),e.nnv(2),e.R7$(2),e.JRh(null==t.selection?null:t.selection.read_through_restore_days)}}function oT(n,_){if(1&n&&e.DNE(0,nT,7,2,"tr",14),2&n){const t=e.XpG(2);e.Y8G("ngIf",t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)&&(null==t.selection?null:t.selection.allow_read_through))}}function iT(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",18),e.PLo(2,9),e.j41(3,"cd-helper",19),e.nrm(4,"span"),e.k0s(),e.YFu(),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.uP7(t.glacierRestoreDayText),e.nnv(2),e.R7$(2),e.JRh(null==t.selection?null:t.selection.glacier_restore_days)}}function _T(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",18),e.PLo(2,10),e.j41(3,"cd-helper",19),e.nrm(4,"span"),e.k0s(),e.YFu(),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.uP7(t.glacierRestoreTiertypeText),e.nnv(2),e.R7$(2),e.JRh(null==t.selection?null:t.selection.glacier_restore_tier_type)}}function sT(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",18),e.PLo(2,11),e.j41(3,"cd-helper",19),e.nrm(4,"span"),e.k0s(),e.YFu(),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.uP7(t.restoreStorageClassText),e.nnv(2),e.R7$(2),e.JRh(null==t.selection?null:t.selection.restore_storage_class)}}function rT(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",18),e.PLo(2,12),e.j41(3,"cd-helper",19),e.nrm(4,"span"),e.k0s(),e.YFu(),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"dimlessBinary"),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.uP7(t.multipartMinPartText),e.nnv(2),e.R7$(2),e.JRh(e.bMT(7,2,null==t.selection?null:t.selection.multipart_min_part_size))}}function aT(n,_){if(1&n&&(e.j41(0,"tr")(1,"td",18),e.PLo(2,13),e.j41(3,"cd-helper",19),e.nrm(4,"span"),e.k0s(),e.YFu(),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"dimlessBinary"),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.uP7(t.multipartSyncThreholdText),e.nnv(2),e.R7$(2),e.JRh(e.bMT(7,2,null==t.selection?null:t.selection.multipart_sync_threshold))}}function lT(n,_){if(1&n&&(e.qex(0),e.j41(1,"cds-tabs",15)(2,"cds-tab",16)(3,"table",17)(4,"tbody"),e.DNE(5,Vg,7,2,"tr")(6,Zg,7,1,"tr")(7,Kg,7,2,"tr")(8,qg,10,4,"tr")(9,Jg,10,4,"tr")(10,Qg,7,2,"tr")(11,eT,7,2,"tr")(12,tT,7,2,"tr")(13,oT,1,1,"tr")(14,iT,7,2,"tr")(15,_T,7,2,"tr")(16,sT,7,2,"tr")(17,rT,8,4,"tr")(18,aT,8,4,"tr"),e.k0s()()()(),e.bVm()),2&n){const t=e.XpG();e.R7$(5),e.vxM(t.isTierMatch(t.TIER_TYPE_DISPLAY.LOCAL)?5:-1),e.R7$(),e.vxM(t.isTierMatch(t.TIER_TYPE_DISPLAY.LOCAL)?6:-1),e.R7$(),e.vxM(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?7:-1),e.R7$(),e.vxM(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?8:-1),e.R7$(),e.vxM(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?9:-1),e.R7$(),e.vxM(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?10:-1),e.R7$(),e.vxM(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?11:-1),e.R7$(),e.vxM(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?12:-1),e.R7$(),e.vxM(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)&&null!=t.selection&&t.selection.allow_read_through?13:-1),e.R7$(),e.vxM(t.isTierMatch(t.TIER_TYPE_DISPLAY.GLACIER)?14:-1),e.R7$(),e.vxM(t.isTierMatch(t.TIER_TYPE_DISPLAY.GLACIER)?15:-1),e.R7$(),e.vxM(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?16:-1),e.R7$(),e.vxM(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?17:-1),e.R7$(),e.vxM(t.isTierMatch(t.TIER_TYPE_DISPLAY.CLOUD_TIER,t.TIER_TYPE_DISPLAY.GLACIER)?18:-1)}}let cT=(()=>{class n{selection;columns=[];storageDetails;allowReadThroughText=Kn;retainHeadObjectText=no;multipartMinPartText=qn;multipartSyncThreholdText=Jn;targetAccessKeyText=eo;targetSecretKeyText=to;targetPathText=Qn;hostStyleText="The URL format for accessing the remote S3 endpoint:\n  - 'Path': Use for a path-based URL\n  - 'Virtual': Use for a domain-based URL";TIER_TYPE_DISPLAY=yt;TIER_TYPE=we;glacierRestoreDayText=io;glacierRestoreTiertypeText=_o;restoreDaysText=ro;readthroughrestoreDaysText=ao;restoreStorageClassText=lo;zoneGroupText=ss;ngOnChanges(){this.selection&&(this.storageDetails={zonegroup_name:this.selection.zonegroup_name,placement_targets:this.selection.placement_targets,access_key:this.selection.access_key,secret:this.selection.secret,target_path:this.selection.target_path,tier_type:this.selection.tier_type,multipart_min_part_size:this.selection.multipart_min_part_size,multipart_sync_threshold:this.selection.multipart_sync_threshold,host_style:this.selection.host_style,retain_head_object:this.selection.retain_head_object,allow_read_through:this.selection.allow_read_through,glacier_restore_days:this.selection.glacier_restore_days,glacier_restore_tier_type:this.selection.glacier_restore_tier_type,restore_storage_class:this.selection.restore_storage_class,read_through_restore_days:this.selection.read_through_restore_days})}isTierMatch(...t){const o=this.selection.tier_type?.toLowerCase();return t.some(i=>i.toLowerCase()===o)}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-storage-class-details"]],inputs:{selection:"selection"},features:[e.OA$],decls:1,vars:1,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te;return t=" Zone Group " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",o=" Placement Target " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " Placement Target defines the destination and rules for moving objects between storage tiers. " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",i=" Target Path " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",s=" Access key " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",T=" Secret key " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",F=" Host Style " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",k=" Head Object (Stub File) " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + "" + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",H=" Allow Read Through " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",q=" Read through Restore Days " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",oe=" Glacier Restore Days " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",le=" Glacier Restore Tier Type " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",Re=" Restore Storage Class " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",ce=" Multipart Minimum Part Size " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",Te=" Multipart Sync Threshold " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + " " + "\ufffd0\ufffd" + " " + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",[t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,[4,"ngIf"],["type","contained","theme","light"],["heading","Details"],["data-testid","rgw-storage-details",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold"],[1,"text-pre-wrap"],["cdsCol","",1,"d-flex",3,"columnNumbers"],["cdsPassword","","type","password","readonly","","id","access_key",3,"value"],["type","button","cdPasswordButton","access_key",1,"btn","btn-light"],["source","access_key"],["cdsPassword","","type","password","readonly","","id","secret",3,"value"],["type","button","cdPasswordButton","secret",1,"btn","btn-light"],["source","secret"]]},template:function(o,i){1&o&&e.DNE(0,lT,19,14,"ng-container",14),2&o&&e.Y8G("ngIf",!!i.selection)},dependencies:[R.bT,wt.m,vt.N,Do.h,Oe.S,et.ee,Ie.yA,_n.tU,_n.oz,Jt.l]})}return n})();function uT(n,_){if(1&n&&e.nrm(0,"cd-rgw-storage-class-details",5),2&n){const t=e.XpG();e.Y8G("selection",t.expandedRow)}}let fT=(()=>{class n extends Dt.D{rgwZonegroupService;actionLabels;cdsModalService;taskWrapper;authStorageService;rgwStorageClassService;router;urlBuilder;columns;selection=new gt.y;permission;tableActions;storageClassList=[];constructor(t,o,i,s,T,F,k,H){super(),this.rgwZonegroupService=t,this.actionLabels=o,this.cdsModalService=i,this.taskWrapper=s,this.authStorageService=T,this.rgwStorageClassService=F,this.router=k,this.urlBuilder=H,this.permission=this.authStorageService.getPermissions().rgw}ngOnInit(){this.columns=[{prop:"uniqueId",isInvisible:!0,isHidden:!0},{name:"Storage Class",prop:"storage_class",flexGrow:2},{name:"Typ",prop:"tier_type",flexGrow:2},{name:"Zone Group",prop:"zonegroup_name",flexGrow:2},{name:"Placement Target",prop:"placement_target",flexGrow:2},{name:"Target Region",prop:"region",flexGrow:2},{name:"Target Endpoint",prop:"endpoint",flexGrow:2}];const t=()=>this.selection.first()&&`${encodeURI(this.selection.first().zonegroup_name)}/${encodeURI(this.selection.first().placement_target)}/${encodeURI(this.selection.first().storage_class)}`;this.tableActions=[{name:this.actionLabels.CREATE,permission:"create",icon:S.F.add,click:()=>this.router.navigate([this.urlBuilder.getCreate()]),canBePrimary:o=>!o.hasSelection},{name:this.actionLabels.EDIT,permission:"update",icon:S.F.edit,routerLink:()=>[`/rgw/tiering/edit/${t()}`]},{name:this.actionLabels.REMOVE,permission:"delete",icon:S.F.destroy,click:()=>this.removeStorageClassModal()}]}loadStorageClass(){return new Promise((t,o)=>{this.rgwZonegroupService.getAllZonegroupsInfo().subscribe(i=>{this.storageClassList=[];const T=co.filterAndMapTierTargets(i).map(F=>({...F,tier_type:this.mapTierTypeDisplay(F.tier_type)}));this.transformTierData(T),this.storageClassList.push(...T),t()},i=>{o(i)})})}mapTierTypeDisplay(t){switch(t?.toLowerCase()){case we.CLOUD_TIER:return yt.CLOUD_TIER;case we.LOCAL:return yt.LOCAL;case we.GLACIER:return yt.GLACIER;default:return t}}transformTierData(t){return t.forEach((o,i)=>{const s=o?.zone_group,T=o?.storage_class;o.uniqueId=`${s}-${T}-${i}`}),t}removeStorageClassModal(){const t=this.selection.first().storage_class,o=this.selection.first().placement_target;this.cdsModalService.show(Lt.D,{itemDescription:"Tiering Storage Class",itemNames:[t],actionDescription:"remove",submitActionObservable:()=>this.taskWrapper.wrapTaskAroundCall({task:new zt.O("rgw/zonegroup/storage-class",{placement_target:o,storage_class:t}),call:this.rgwStorageClassService.removeStorageClass(o,t)})})}updateSelection(t){this.selection=t}setExpandedRow(t){super.setExpandedRow(t)}static \u0275fac=function(o){return new(o||n)(e.rXU(ht.Z),e.rXU(m.Ss),e.rXU(Mt.V),e.rXU(Qt.a),e.rXU(Et.v),e.rXU(Vo),e.rXU(I.Ix),e.rXU(Tt.E))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-storage-class-list"]],features:[e.Jv_([{provide:Tt.E,useValue:new Tt.E("rgw/tiering")}]),e.Vt3],decls:7,vars:7,consts:()=>{let t;return t=" A storage class for tiering defines the policies for automatically moving objects between different storage tiers. ",[t,["columnMode","flex","identifier","uniqueId","selectionType","single",3,"fetchData","setExpandedRow","updateSelection","data","columns","forceIdentifier","hasDetails"],[1,"table-actions"],[1,"btn-group",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"]]},template:function(o,i){1&o&&(e.j41(0,"legend")(1,"cd-help-text"),e.pXf(2,0),e.k0s()(),e.j41(3,"cd-table",1),e.bIt("fetchData",function(){return i.loadStorageClass()})("setExpandedRow",function(T){return i.setExpandedRow(T)})("updateSelection",function(T){return i.updateSelection(T)}),e.j41(4,"div",2),e.nrm(5,"cd-table-actions",3),e.k0s(),e.DNE(6,uT,1,1,"cd-rgw-storage-class-details",4),e.k0s()),2&o&&(e.R7$(3),e.Y8G("data",i.storageClassList)("columns",i.columns)("forceIdentifier",!0)("hasDetails",!0),e.R7$(2),e.Y8G("permission",i.permission)("selection",i.selection)("tableActions",i.tableActions))},dependencies:[V.O,Je.O,Ot.j,$t.N,cT]})}return n})();var pT=g(99859),Bn=g(84192),gT=g(78799),TT=g(26481);function RT(n,_){if(1&n&&(e.j41(0,"div")(1,"legend"),e.pXf(2,0),e.k0s(),e.nrm(3,"cd-table-key-value",3),e.k0s()),2&n){const t=e.XpG();e.R7$(3),e.Y8G("data",t.quota)}}function mT(n,_){if(1&n&&(e.j41(0,"div")(1,"legend"),e.pXf(2,1),e.k0s(),e.nrm(3,"cd-table-key-value",3),e.k0s()),2&n){const t=e.XpG();e.R7$(3),e.Y8G("data",t.bucket_quota)}}let ET=(()=>{class n{dimlessBinary;selection;quota={};bucket_quota={};constructor(t){this.dimlessBinary=t}ngOnChanges(t){t.selection&&t.selection.currentValue&&(this.quota=this.createDisplayValues("quota"),this.bucket_quota=this.createDisplayValues("bucket_quota"))}createDisplayValues(t){return{Enabled:this.selection[t].enabled?"Yes":"No","Maximum size":this.selection[t].enabled?this.selection[t].max_size<=-1?"Unlimited":this.dimlessBinary.transform(this.selection[t].max_size):"-","Maximum objects":this.selection[t].enabled?this.selection[t].max_objects<=-1?"Unlimited":this.selection[t].max_objects:"-"}}static \u0275fac=function(o){return new(o||n)(e.rXU(Jt.l))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-user-accounts-details"]],inputs:{selection:"selection"},features:[e.OA$],decls:2,vars:2,consts:()=>{let t,o;return t="Account quota",o="kontyngent wiadra",[t,o,[4,"ngIf"],[3,"data"]]},template:function(o,i){1&o&&e.DNE(0,RT,4,1,"div",2)(1,mT,4,1,"div",2),2&o&&(e.Y8G("ngIf",i.selection.quota),e.R7$(),e.Y8G("ngIf",i.selection.bucket_quota))},dependencies:[R.bT,Pn.i]})}return n})();function ST(n,_){if(1&n&&e.nrm(0,"cd-rgw-user-accounts-details",5),2&n){const t=e.XpG();e.Y8G("selection",t.expandedRow)}}const On="rgw/accounts";let FT=(()=>{class n extends Dt.D{authStorageService;actionLabels;router;rgwUserAccountsService;cdsModalService;taskWrapper;ngZone;table;permission;tableActions=[];columns=[];accounts=[];selection=new gt.y;staleTimeout;constructor(t,o,i,s,T,F,k){super(),this.authStorageService=t,this.actionLabels=o,this.router=i,this.rgwUserAccountsService=s,this.cdsModalService=T,this.taskWrapper=F,this.ngZone=k}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:"Nazwa",prop:"name",flexGrow:1},{name:"Tenant",prop:"tenant",flexGrow:1},{name:"Account id",prop:"id",flexGrow:1},{name:"Adres email",prop:"email",flexGrow:1},{name:"Max users",prop:"max_users",flexGrow:1,cellTransformation:bt.x.map,customTemplateConfig:{"-1":"Wy\u0142\u0105czony",0:"Nielimitowany"}},{name:"Max roles",prop:"max_roles",flexGrow:1,cellTransformation:bt.x.map,customTemplateConfig:{"-1":"Wy\u0142\u0105czony",0:"Nielimitowany"}},{name:"Max groups",prop:"max_groups",flexGrow:1,cellTransformation:bt.x.map,customTemplateConfig:{"-1":"Wy\u0142\u0105czony",0:"Nielimitowany"}},{name:"Max. wiader ",prop:"max_buckets",flexGrow:1,cellTransformation:bt.x.map,customTemplateConfig:{"-1":"Wy\u0142\u0105czony",0:"Nielimitowany"}},{name:"Max access keys",prop:"max_access_keys",flexGrow:1,cellTransformation:bt.x.map,customTemplateConfig:{"-1":"Wy\u0142\u0105czony",0:"Nielimitowany"}}];const t=()=>this.selection.first().groupName&&this.selection.first().id?`${m.Qp.EDIT}/${this.selection.first().id}\n        }`:`${m.Qp.EDIT}/${this.selection.first().id}`;this.tableActions=[{permission:"create",icon:S.F.add,click:()=>this.router.navigate([`${On}/${m.Qp.CREATE}`]),name:this.actionLabels.CREATE,canBePrimary:T=>!T.hasSelection},{permission:"update",icon:S.F.edit,click:()=>this.router.navigate([`${On}/${t()}`]),name:this.actionLabels.EDIT},{permission:"delete",icon:S.F.destroy,click:()=>this.deleteAction(),name:this.actionLabels.DELETE}],this.setTableRefreshTimeout()}getAccountsList(t){this.setTableRefreshTimeout(),this.rgwUserAccountsService.list(!0).subscribe({next:o=>{this.accounts=o},error:()=>{t&&t.error()}})}updateSelection(t){this.selection=t}deleteAction(){const t=this.selection.first().name;this.cdsModalService.show(Lt.D,{itemDescription:"Account",itemNames:[t],submitActionObservable:()=>new Bt.c(o=>{this.taskWrapper.wrapTaskAroundCall({task:new zt.O(On,{account_names:[t]}),call:(0,v.p)(this.selection.selected.map(i=>this.rgwUserAccountsService.remove(i.id)))}).subscribe({error:i=>{o.error(i),this.table.refreshBtn()},complete:()=>{o.complete(),this.table.refreshBtn()}})})})}static \u0275fac=function(o){return new(o||n)(e.rXU(Et.v),e.rXU(m.Ss),e.rXU(I.Ix),e.rXU(Kt),e.rXU(Mt.V),e.rXU(Qt.a),e.rXU(e.SKi))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-user-accounts"]],viewQuery:function(o,i){if(1&o&&e.GBs(Je.O,7),2&o){let s;e.mGM(s=e.lsd())&&(i.table=s.first)}},features:[e.Jv_([{provide:Tt.E,useValue:new Tt.E(On)}]),e.Vt3],decls:8,vars:8,consts:()=>{let t;return t=" User Accounts " + "\ufffd#3\ufffd" + " Administrators can assign unique credentials to users or applications, enabling granular access control and enhancing security across the cluster. " + "\ufffd/#3\ufffd" + "",[["table",""],t,["selectionType","single","columnMode","flex","identifier","id",3,"setExpandedRow","updateSelection","fetchData","autoReload","data","columns","hasDetails","status"],[1,"table-actions",3,"permission","selection","tableActions"],[3,"selection",4,"cdTableDetail"],[3,"selection"]]},template:function(o,i){if(1&o){const s=e.RV6();e.nrm(0,"cd-rgw-user-tabs"),e.j41(1,"legend"),e.PLo(2,1),e.nrm(3,"cd-help-text"),e.YFu(),e.k0s(),e.j41(4,"cd-table",2,0),e.bIt("setExpandedRow",function(F){return e.eBV(s),e.Njj(i.setExpandedRow(F))})("updateSelection",function(F){return e.eBV(s),e.Njj(i.updateSelection(F))})("fetchData",function(F){return e.eBV(s),e.Njj(i.getAccountsList(F))}),e.nrm(6,"cd-table-actions",3),e.DNE(7,ST,1,1,"cd-rgw-user-accounts-details",4),e.k0s()}2&o&&(e.R7$(4),e.Y8G("autoReload",!1)("data",i.accounts)("columns",i.columns)("hasDetails",!0)("status",i.tableStatus),e.R7$(2),e.Y8G("permission",i.permission)("selection",i.selection)("tableActions",i.tableActions))},dependencies:[V.O,Je.O,Ot.j,$t.N,No,ET]})}return n})();const CT=()=>({md:4}),MT=()=>({formControl:"max_buckets_mode"}),hT=()=>({formControl:"max_users_mode"}),GT=()=>({formControl:"max_roles_mode"}),PT=()=>({formControl:"max_groups_mode"}),IT=()=>({formControl:"max_access_keys_mode"}),OT=()=>({enabled:"account_quota_enabled",unlimitedSize:"account_quota_max_size_unlimited",maxSize:"account_quota_max_size",unlimitedObjects:"account_quota_max_objects_unlimited",maxObjects:"account_quota_max_objects"}),NT=n=>({formControl:n,quotaType:"account"}),bT=()=>({enabled:"bucket_quota_enabled",unlimitedSize:"bucket_quota_max_size_unlimited",maxSize:"bucket_quota_max_size",unlimitedObjects:"bucket_quota_max_objects_unlimited",maxObjects:"bucket_quota_max_objects"}),AT=n=>({formControl:n,quotaType:"bucket"}),LT=()=>({formControl:"max_buckets"}),DT=()=>({formControl:"max_users"}),yT=()=>({formControl:"max_roles"}),$T=()=>({formControl:"max_groups"}),vT=()=>({formControl:"max_access_keys"});function WT(n,_){1&n&&(e.j41(0,"span",44),e.qex(1),e.pXf(2,14),e.bVm(),e.k0s())}function wT(n,_){if(1&n&&e.DNE(0,WT,3,0,"span",43),2&n){e.XpG();const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.accountForm.showError("name",t,"required"))}}function UT(n,_){1&n&&(e.j41(0,"span"),e.qex(1),e.pXf(2,15),e.bVm(),e.k0s())}function xT(n,_){if(1&n&&e.DNE(0,UT,3,0,"span",41),2&n){e.XpG();const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.accountForm.showError("email",t,"email"))}}function kT(n,_){1&n&&e.eu8(0)}function XT(n,_){1&n&&e.eu8(0)}function jT(n,_){if(1&n&&(e.j41(0,"span"),e.DNE(1,XT,1,0,"ng-container",40),e.k0s()),2&n){e.XpG(2);const t=e.sdS(5);e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.lJ4(2,LT))}}function BT(n,_){1&n&&e.eu8(0)}function zT(n,_){1&n&&e.eu8(0)}function HT(n,_){if(1&n&&(e.j41(0,"span"),e.DNE(1,zT,1,0,"ng-container",40),e.k0s()),2&n){e.XpG(2);const t=e.sdS(5);e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.lJ4(2,DT))}}function YT(n,_){1&n&&e.eu8(0)}function VT(n,_){1&n&&e.eu8(0)}function ZT(n,_){if(1&n&&(e.j41(0,"span"),e.DNE(1,VT,1,0,"ng-container",40),e.k0s()),2&n){e.XpG(2);const t=e.sdS(5);e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.lJ4(2,yT))}}function KT(n,_){1&n&&e.eu8(0)}function qT(n,_){1&n&&e.eu8(0)}function JT(n,_){if(1&n&&(e.j41(0,"span"),e.DNE(1,qT,1,0,"ng-container",40),e.k0s()),2&n){e.XpG(2);const t=e.sdS(5);e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.lJ4(2,$T))}}function QT(n,_){1&n&&e.eu8(0)}function eR(n,_){1&n&&e.eu8(0)}function tR(n,_){if(1&n&&(e.j41(0,"span"),e.DNE(1,eR,1,0,"ng-container",40),e.k0s()),2&n){e.XpG(2);const t=e.sdS(5);e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.lJ4(2,vT))}}function nR(n,_){1&n&&e.eu8(0)}function oR(n,_){1&n&&e.eu8(0)}function iR(n,_){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"form",29,3)(3,"div",30),e.pXf(4,10),e.nI1(5,"titlecase"),e.nI1(6,"upperFirst"),e.k0s(),e.j41(7,"div",31)(8,"cds-text-label",32),e.PLo(9,11),e.nrm(10,"input",33),e.YFu(),e.k0s(),e.DNE(11,wT,1,1,"ng-template",null,4,e.C5r),e.k0s(),e.j41(13,"div",31)(14,"cds-text-label",34),e.PLo(15,12),e.nrm(16,"input",35),e.YFu(),e.k0s()(),e.j41(17,"div",31)(18,"cds-text-label",36),e.PLo(19,13),e.nrm(20,"input",37),e.YFu(),e.k0s(),e.DNE(21,xT,1,1,"ng-template",null,5,e.C5r),e.k0s(),e.j41(23,"div",38)(24,"div",39),e.DNE(25,kT,1,0,"ng-container",40),e.k0s(),e.j41(26,"div",39),e.DNE(27,jT,2,3,"span",41),e.k0s()(),e.j41(28,"div",38)(29,"div",39),e.DNE(30,BT,1,0,"ng-container",40),e.k0s(),e.j41(31,"div",39),e.DNE(32,HT,2,3,"span",41),e.k0s()(),e.j41(33,"div",38)(34,"div",39),e.DNE(35,YT,1,0,"ng-container",40),e.k0s(),e.j41(36,"div",39),e.DNE(37,ZT,2,3,"span",41),e.k0s()(),e.j41(38,"div",38)(39,"div",39),e.DNE(40,KT,1,0,"ng-container",40),e.k0s(),e.j41(41,"div",39),e.DNE(42,JT,2,3,"span",41),e.k0s()(),e.j41(43,"div",38)(44,"div",39),e.DNE(45,QT,1,0,"ng-container",40),e.k0s(),e.j41(46,"div",39),e.DNE(47,tR,2,3,"span",41),e.k0s()(),e.j41(48,"div",31),e.DNE(49,nR,1,0,"ng-container",40),e.k0s(),e.j41(50,"div",31),e.DNE(51,oR,1,0,"ng-container",40),e.k0s(),e.j41(52,"cd-form-button-panel",42),e.nI1(53,"titlecase"),e.nI1(54,"upperFirst"),e.bIt("submitActionEvent",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.submit())}),e.k0s()(),e.bVm()}if(2&n){const t=e.sdS(2),o=e.sdS(12),i=e.sdS(22),s=e.XpG(),T=e.sdS(3),F=e.sdS(7);e.R7$(),e.Y8G("formGroup",s.accountForm),e.R7$(5),e.uP7(e.bMT(5,28,s.action))(e.bMT(6,30,s.resource)),e.nnv(4),e.R7$(2),e.Y8G("invalid",!s.accountForm.controls.name.valid&&s.accountForm.controls.name.dirty)("invalidText",o),e.R7$(10),e.Y8G("invalid",!s.accountForm.controls.email.valid&&s.accountForm.controls.email.dirty)("invalidText",i),e.R7$(7),e.Y8G("ngTemplateOutlet",T)("ngTemplateOutletContext",e.lJ4(36,MT)),e.R7$(2),e.Y8G("ngIf",1==s.accountForm.get("max_buckets_mode").value),e.R7$(3),e.Y8G("ngTemplateOutlet",T)("ngTemplateOutletContext",e.lJ4(37,hT)),e.R7$(2),e.Y8G("ngIf",1==s.accountForm.get("max_users_mode").value),e.R7$(3),e.Y8G("ngTemplateOutlet",T)("ngTemplateOutletContext",e.lJ4(38,GT)),e.R7$(2),e.Y8G("ngIf",1==s.accountForm.get("max_roles_mode").value),e.R7$(3),e.Y8G("ngTemplateOutlet",T)("ngTemplateOutletContext",e.lJ4(39,PT)),e.R7$(2),e.Y8G("ngIf",1==s.accountForm.get("max_groups_mode").value),e.R7$(3),e.Y8G("ngTemplateOutlet",T)("ngTemplateOutletContext",e.lJ4(40,IT)),e.R7$(2),e.Y8G("ngIf",1==s.accountForm.get("max_access_keys_mode").value),e.R7$(2),e.Y8G("ngTemplateOutlet",F)("ngTemplateOutletContext",e.eq3(42,NT,e.lJ4(41,OT))),e.R7$(2),e.Y8G("ngTemplateOutlet",F)("ngTemplateOutletContext",e.eq3(45,AT,e.lJ4(44,bT))),e.R7$(),e.Y8G("form",t)("submitText",e.bMT(53,32,s.action)+" "+e.bMT(54,34,s.resource))}}function _R(n,_){if(1&n){const t=e.RV6();e.j41(0,"cds-select",45),e.nI1(1,"upperFirst"),e.bIt("change",function(i){const s=e.eBV(t).formControl,T=e.XpG();return e.Njj(T.onModeChange(i.target.value,s))}),e.j41(2,"option",46),e.EFF(3,"Unlimited"),e.k0s(),e.j41(4,"option",47),e.EFF(5,"Disabled"),e.k0s(),e.j41(6,"option",48),e.EFF(7,"Custom"),e.k0s()()}if(2&n){const t=_.formControl,o=e.XpG();e.Mz_("label","",e.bMT(1,6,t.split("_")[1])," Mode"),e.Y8G("formControlName",t)("name",t)("id",t)("helperText",o.getHelperTextForMode(t))}}function sR(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,16),e.k0s())}function rR(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,17),e.k0s())}function aR(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,18),e.k0s())}function lR(n,_){if(1&n&&e.DNE(0,sR,2,0,"span",41)(1,rR,2,0,"span",41)(2,aR,2,0,"span",41),2&n){const t=e.XpG().formControl,o=e.XpG();e.Y8G("ngIf",o.accountForm.showError(t,o.formDir,"required")),e.R7$(),e.Y8G("ngIf",0==o.accountForm.controls[t].value&&o.accountForm.showError(t,o.formDir,"min")),e.R7$(),e.Y8G("ngIf",o.accountForm.showError(t,o.formDir,"pattern"))}}function cR(n,_){if(1&n&&(e.nrm(0,"cds-number",49),e.nI1(1,"upperFirst"),e.nI1(2,"upperFirst"),e.DNE(3,lR,3,3,"ng-template",null,6,e.C5r)),2&n){const t=_.formControl,o=e.sdS(4),i=e.XpG();e.FS9("formControlName",t),e.FCK("label","",e.bMT(1,12,t.split("_")[0]),". ",t.split("_").length>2?t.split("_")[1]+" "+t.split("_")[2]:t.split("_")[1],""),e.FCK("cdRequiredField","",e.bMT(2,14,t.split("_")[0]),". ",t.split("_").length>2?t.split("_")[1]+" "+t.split("_")[2]:t.split("_")[1],""),e.Y8G("id",t)("name",t)("min",1)("invalid",!i.accountForm.controls[t].valid&&i.accountForm.controls[t].dirty)("invalidText",o)}}function uR(n,_){1&n&&(e.j41(0,"div",55),e.EFF(1,"Set quota on account owned by users."),e.k0s())}function dR(n,_){1&n&&(e.j41(0,"div",55),e.EFF(1," Set quota on buckets owned by an account. "),e.k0s())}function fR(n,_){if(1&n&&(e.j41(0,"cds-checkbox",53),e.EFF(1," Unlimited size "),e.k0s()),2&n){const t=e.XpG(2),o=t.quotaType;e.Y8G("formControlName",t.formControl.unlimitedSize)("id",o+"unlimitedSize_checkbox")}}function pR(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,20),e.k0s())}function gR(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,21),e.k0s())}function TR(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,22),e.k0s())}function RR(n,_){if(1&n&&e.DNE(0,pR,2,0,"span",41)(1,gR,2,0,"span",41)(2,TR,2,0,"span",41),2&n){const t=e.XpG(3).formControl,o=e.XpG();e.Y8G("ngIf",o.accountForm.showError(t.maxSize,o.formDir,"required")),e.R7$(),e.Y8G("ngIf",o.accountForm.showError(t.maxSize,o.formDir,"quotaMaxSize")),e.R7$(),e.Y8G("ngIf",o.accountForm.showError(t.maxSize,o.formDir,"pattern"))}}function mR(n,_){if(1&n&&(e.j41(0,"div",59)(1,"cds-text-label",60),e.PLo(2,19),e.nrm(3,"input",61),e.YFu(),e.k0s(),e.DNE(4,RR,3,3,"ng-template",null,8,e.C5r),e.k0s()),2&n){const t=e.sdS(5),o=e.XpG(2).formControl,i=e.XpG();e.R7$(),e.Y8G("label",o.maxSize)("for",o.maxSize)("invalid",!i.accountForm.controls[o.maxSize].valid&&i.accountForm.controls[o.maxSize].dirty)("invalidText",t),e.R7$(2),e.Y8G("id",o.maxSize)("name",o.maxSize)("formControlName",o.maxSize)}}function ER(n,_){if(1&n&&(e.j41(0,"cds-checkbox",53),e.EFF(1," Unlimited objects "),e.k0s()),2&n){const t=e.XpG(2),o=t.quotaType;e.Y8G("formControlName",t.formControl.unlimitedObjects)("id",o+"unlimitedObjects_checkbox")}}function SR(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,24),e.k0s())}function FR(n,_){1&n&&(e.j41(0,"span"),e.pXf(1,25),e.k0s())}function CR(n,_){if(1&n&&e.DNE(0,SR,2,0,"span",41)(1,FR,2,0,"span",41),2&n){const t=e.XpG(3).formControl,o=e.XpG();e.Y8G("ngIf",o.accountForm.showError(t.maxObjects,o.formDir,"required")),e.R7$(),e.Y8G("ngIf",o.accountForm.showError(t.maxObjects,o.formDir,"pattern"))}}function MR(n,_){if(1&n&&(e.j41(0,"div",59)(1,"cds-text-label",62),e.PLo(2,23),e.nrm(3,"input",63),e.YFu(),e.k0s(),e.DNE(4,CR,2,2,"ng-template",null,9,e.C5r),e.k0s()),2&n){const t=e.sdS(5),o=e.XpG(2).formControl,i=e.XpG();e.R7$(),e.Y8G("label",o.maxObjects)("for",o.maxObjects)("invalid",!i.accountForm.controls[o.maxObjects].valid&&i.accountForm.controls[o.maxObjects].dirty)("invalidText",t),e.R7$(2),e.Y8G("id",o.maxObjects)("name",o.maxObjects)("formControlName",o.maxObjects)}}function hR(n,_){if(1&n&&(e.j41(0,"div",56),e.DNE(1,fR,2,2,"cds-checkbox",57)(2,mR,6,7,"div",58)(3,ER,2,2,"cds-checkbox",57)(4,MR,6,7,"div",58),e.k0s()),2&n){const t=e.XpG().formControl,o=e.XpG();e.R7$(),e.Y8G("ngIf",o.accountForm.controls[t.enabled].value),e.R7$(),e.Y8G("ngIf",o.accountForm.controls[t.enabled].value&&!o.accountForm.getValue(t.unlimitedSize)),e.R7$(),e.Y8G("ngIf",o.accountForm.controls[t.enabled].value),e.R7$(),e.Y8G("ngIf",o.accountForm.controls[t.enabled].value&&!o.accountForm.getValue(t.unlimitedObjects))}}function GR(n,_){if(1&n&&(e.j41(0,"fieldset",50)(1,"legend",51),e.EFF(2),e.nI1(3,"upperFirst"),e.k0s(),e.DNE(4,uR,2,0,"div",52)(5,dR,2,0,"ng-template",null,7,e.C5r),e.j41(7,"cds-checkbox",53),e.EFF(8," Enabled "),e.k0s(),e.DNE(9,hR,5,4,"div",54),e.k0s()),2&n){const t=_.quotaType,o=_.formControl,i=e.sdS(6),s=e.XpG();e.R7$(2),e.SpI("",e.bMT(3,6,t)," Quota"),e.R7$(2),e.Y8G("ngIf","account"==t)("ngIfElse",i),e.R7$(3),e.Y8G("formControlName",o.enabled)("id",t+"_checkbox"),e.R7$(2),e.Y8G("ngIf",s.accountForm.controls[o.enabled].value)}}let Ko=(()=>{class n extends d.g{router;actionLabels;rgwUserAccountsService;notificationService;formBuilder;route;accountForm;action;resource;editing=!1;submitObservables=[];constructor(t,o,i,s,T,F){super(),this.router=t,this.actionLabels=o,this.rgwUserAccountsService=i,this.notificationService=s,this.formBuilder=T,this.route=F,this.editing=this.router.url.includes("rgw/accounts/edit"),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource="Account",this.createForm(),this.loadingReady()}ngOnInit(){this.editing&&this.route.paramMap.subscribe(t=>{const o=t.get("id");this.rgwUserAccountsService.get(o).subscribe(i=>{const s=h().clone(this.accountForm.value);let T=h().pick(i,h().keys(this.accountForm.value));["max_users","max_roles","max_groups","max_buckets","max_access_keys"].forEach(F=>{this.mapValuesForMode(T,F)}),["account","bucket"].forEach(F=>{let k={};k="bucket"==F?i.bucket_quota:i.quota,T[F+"_quota_enabled"]=k.enabled,k.max_size<0?(T[F+"_quota_max_size_unlimited"]=!0,T[F+"_quota_max_size"]=null):(T[F+"_quota_max_size_unlimited"]=!1,T[F+"_quota_max_size"]=`${k.max_size} B`),k.max_objects<0?(T[F+"_quota_max_objects_unlimited"]=!0,T[F+"_quota_max_objects"]=null):(T[F+"_quota_max_objects_unlimited"]=!1,T[F+"_quota_max_objects"]=k.max_objects)}),T=h().merge(s,T),this.accountForm.setValue(T),this.accountForm.get("tenant").disable()})})}mapValuesForMode(t,o){switch(t[o]){case-1:t[`${o}_mode`]="-1",t[o]="";break;case 0:t[`${o}_mode`]="0",t[o]="";break;default:t[`${o}_mode`]="1"}}createForm(){this.accountForm=this.formBuilder.group({id:[""],tenant:[""],name:["",r.k0.required],email:["",E.xQ.email],max_users_mode:["1"],max_users:[1e3,[E.xQ.requiredIf({max_users_mode:"1"}),E.xQ.number(!1),r.k0.min(1)]],max_roles_mode:["1"],max_roles:[1e3,[E.xQ.requiredIf({max_roles_mode:"1"}),E.xQ.number(!1),r.k0.min(1)]],max_groups_mode:["1"],max_groups:[1e3,[E.xQ.requiredIf({max_groups_mode:"1"}),E.xQ.number(!1),r.k0.min(1)]],max_access_keys_mode:["1"],max_access_keys:[4,[E.xQ.requiredIf({max_access_keys_mode:"1"}),E.xQ.number(!1),r.k0.min(1)]],max_buckets_mode:["1"],max_buckets:[1e3,[E.xQ.requiredIf({max_buckets_mode:"1"}),E.xQ.number(!1),r.k0.min(1)]],account_quota_enabled:[!1],account_quota_max_size_unlimited:[!0],account_quota_max_size:[null,[E.xQ.composeIf({account_quota_enabled:!0,account_quota_max_size_unlimited:!1},[r.k0.required,this.quotaMaxSizeValidator])]],account_quota_max_objects_unlimited:[!0],account_quota_max_objects:[null,[E.xQ.requiredIf({account_quota_enabled:!0,account_quota_max_objects_unlimited:!1}),r.k0.pattern(/^[0-9]+$/)]],bucket_quota_enabled:[!1],bucket_quota_max_size_unlimited:[!0],bucket_quota_max_size:[null,[E.xQ.composeIf({bucket_quota_enabled:!0,bucket_quota_max_size_unlimited:!1},[r.k0.required,this.quotaMaxSizeValidator])]],bucket_quota_max_objects_unlimited:[!0],bucket_quota_max_objects:[null,[E.xQ.requiredIf({bucket_quota_enabled:!0,bucket_quota_max_objects_unlimited:!1}),r.k0.pattern(/^[0-9]+$/)]]})}quotaMaxSizeValidator(t){return(0,E.xF)(t.value)?null:null===RegExp("^(\\d+(\\.\\d+)?)\\s*(B|K(B|iB)?|M(B|iB)?|G(B|iB)?|T(B|iB)?)?$","i").exec(t.value)||(new l.k).toBytes(t.value)<1024?{quotaMaxSize:!0}:null}submit(){let t="";if(this.accountForm.invalid)return;if(this.accountForm.pending)return void this.accountForm.setErrors({cdSubmitButton:!0});const o=this.accountForm.value,i={account_id:o.id,account_name:o.name,email:o.email,tenant:o.tenant,max_users:this.getValueFromFormControl("max_users"),max_buckets:this.getValueFromFormControl("max_buckets"),max_roles:this.getValueFromFormControl("max_roles"),max_group:this.getValueFromFormControl("max_groups"),max_access_keys:this.getValueFromFormControl("max_access_keys")};this.editing?(t="Account modified successfully",this.rgwUserAccountsService.modify(i).subscribe({next:s=>{this.accountForm.get("id").setValue(s.id),this.setQuotaConfig(),this.notificationService.show(f._.success,t)},error:()=>{this.accountForm.setErrors({cdSubmitButton:!0})}})):(delete i.account_id,t="Account created successfully",this.rgwUserAccountsService.create(i).subscribe({next:s=>{this.accountForm.get("id").setValue(s.id),this.setQuotaConfig(),this.notificationService.show(f._.success,t)},error:()=>{this.accountForm.setErrors({cdSubmitButton:!0})}}))}setQuotaConfig(){const t=this.accountForm.get("id").value;if(this._isQuotaConfDirty("account")){const o=this._getQuotaArgs("account");this.submitObservables.push(this.rgwUserAccountsService.setQuota(t,o))}if(this._isQuotaConfDirty("bucket")){const o=this._getQuotaArgs("bucket");this.submitObservables.push(this.rgwUserAccountsService.setQuota(t,o))}(0,Fo.x)(...this.submitObservables).subscribe({error:()=>{this.accountForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.goToListView()}}),0==this.submitObservables.length&&this.goToListView()}_getQuotaArgs(t){const o={quota_type:t,enabled:this.accountForm.getValue(`${t}_quota_enabled`),max_size:"-1",max_objects:"-1"};if(!this.accountForm.getValue(`${t}_quota_max_size_unlimited`)){const i=(new l.k).toBytes(this.accountForm.getValue(`${t}_quota_max_size`));o.max_size=i.toFixed(0)}return this.accountForm.getValue(`${t}_quota_max_objects_unlimited`)||(o.max_objects=`${this.accountForm.getValue(`${t}_quota_max_objects`)}`),o}_isQuotaConfDirty(t){return[`${t}_quota_enabled`,`${t}_quota_max_size_unlimited`,`${t}_quota_max_size`,`${t}_quota_max_objects_unlimited`,`${t}_quota_max_objects`].some(o=>this.accountForm.get(o).dirty)}onModeChange(t,o){"1"===t&&(this.accountForm.get(o).valid||this.accountForm.patchValue({[o]:1e3}))}goToListView(){this.router.navigate(["rgw/accounts"])}getValueFromFormControl(t){const o=this.accountForm.value;return 1==o[`${t}_mode`]?o[t]:o[`${t}_mode`]}getHelperTextForMode(t){const o=t.split("_").length>3?t.split("_")[1]+" "+t.split("_")[2]:t.split("_")[1];return-1==this.accountForm.getValue(t)?`${o[0].toUpperCase()+o.slice(1,-1)} creation is disabled.`:0==this.accountForm.getValue(t)?`Unlimited ${o.slice(0,-1)} creation allowed.`:""}static \u0275fac=function(o){return new(o||n)(e.rXU(I.Ix),e.rXU(m.Ss),e.rXU(Kt),e.rXU(B.J),e.rXU(u.$),e.rXU(I.nX))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-user-accounts-form"]],features:[e.Vt3],decls:8,vars:6,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce;return t="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + " ",o="Account Name " + "\ufffd#10\ufffd\ufffd/#10\ufffd" + "",i="Tenant " + "\ufffd#16\ufffd\ufffd/#16\ufffd" + "",s="Email " + "\ufffd#20\ufffd\ufffd/#20\ufffd" + "",T="Pole jest wymagane.",F=" Please enter a valid email ",k="Pole jest wymagane.",H="Enter number greater than 0",q="Enter a valid positive number",oe="Max. size " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",le="Pole jest wymagane.",Re="Enter a valid value.",ce="Size must be a number or in a valid format. eg: 5 GiB",Te="Max. objects " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "",se="Pole jest wymagane.",Ce="Enter a valid positive number",[["selectModeTemplate",""],["accountMaxValueTemplate",""],["quotaTemplate",""],["formDir","ngForm"],["accountIdError",""],["emailError",""],["maxValError",""],["bucket",""],["quotaSizeError",""],["quotaObjectError",""],t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],[3,"formGroup"],["name","accountForm","novalidate","",3,"formGroup"],[1,"form-header"],[1,"form-item"],["label","Account Name","for","acc_name","cdRequiredField","Account Name",3,"invalid","invalidText"],["cdsText","","type","text","placeholder","Enter account name","id","acc_name","name","acc_name","formControlName","name"],["label","tenant","for","tenant"],["cdsText","","type","text","placeholder","Enter tenant","id","tenant","name","tenant","formControlName","tenant"],["label","email","for","email",3,"invalid","invalidText"],["cdsText","","type","text","placeholder","Enter email","id","email","name","email","formControlName","email"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"change","formControlName","name","id","label","helperText"],["value","0"],["value","-1"],["value","1"],[3,"id","name","formControlName","label","min","cdRequiredField","invalid","invalidText"],[1,"cds--fieldset"],[1,"cds--label"],["class","quota-heading",4,"ngIf","ngIfElse"],[3,"formControlName","id"],["class","quota-sub-block",4,"ngIf"],[1,"quota-heading"],[1,"quota-sub-block"],[3,"formControlName","id",4,"ngIf"],["class","input-wrapper",4,"ngIf"],[1,"input-wrapper"],["cdRequiredField","Max. size",3,"label","for","invalid","invalidText"],["cdsText","","type","text","placeholder","Enter size","cdDimlessBinary","",3,"id","name","formControlName"],["cdRequiredField","Max. objects",3,"label","for","invalid","invalidText"],["cdsText","","type","number","placeholder","Enter number of objects",3,"id","name","formControlName"]]},template:function(o,i){1&o&&(e.j41(0,"div",26),e.DNE(1,iR,55,47,"ng-container",27),e.k0s(),e.DNE(2,_R,8,8,"ng-template",28,0,e.C5r)(4,cR,5,16,"ng-template",28,1,e.C5r)(6,GR,10,8,"ng-template",28,2,e.C5r)),2&o&&(e.Y8G("columnNumbers",e.lJ4(5,CT)),e.R7$(),e.Y8G("cdFormLoading",i.loading),e.R7$(),e.Y8G("formGroup",i.accountForm),e.R7$(2),e.Y8G("formGroup",i.accountForm),e.R7$(2),e.Y8G("formGroup",i.accountForm))},dependencies:[R.bT,R.T3,We.e,Ln.Y,Xt.G,Oe.S,Xe.E,qe.P,r.qT,r.xH,r.y7,r.me,r.Q0,r.BC,r.cb,r.j4,r.JD,et.ee,et.YP,Ie.Zt,Ie.ks,be.Sc,Ze.l6,Ze.c$,De.jM,R.PV,pt.r],styles:[".cds--form__helper-text{white-space:pre-line}.quota-heading[_ngcontent-%COMP%]{margin-bottom:.5rem}.quota-sub-block[_ngcontent-%COMP%]{margin:.5rem 0 0 1.5rem}.quota-sub-block[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{margin:.5rem 0 0 .125rem}.quota-sub-block[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:first-of-type{margin-bottom:1.5rem}"]})}return n})();var PR=g(2087);const IR=()=>({md:4}),qo=()=>({md:12});function OR(n,_){if(1&n&&(e.j41(0,"option",66),e.pXf(1,18),e.k0s()),2&n){const t=_.$implicit;e.Y8G("value",t.value),e.R7$(),e.uP7(t.label),e.nnv(1)}}function NR(n,_){1&n&&(e.j41(0,"span",72),e.pXf(1,19),e.k0s())}function bR(n,_){if(1&n&&e.DNE(0,NR,2,0,"span",71),2&n){e.XpG();const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.storageClassForm.showError("storageClassType",t,"required"))}}function AR(n,_){if(1&n&&(e.j41(0,"option",73),e.pXf(1,20),e.k0s()),2&n){const t=_.$implicit,o=e.XpG(2);e.Y8G("value",t.name)("selected",t.name===o.storageClassForm.getValue("zonegroup")),e.R7$(),e.uP7(t.name),e.nnv(1)}}function LR(n,_){1&n&&(e.j41(0,"span",72),e.pXf(1,21),e.k0s())}function DR(n,_){if(1&n&&e.DNE(0,LR,2,0,"span",71),2&n){e.XpG();const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.storageClassForm.showError("zonegroup",t,"required"))}}function yR(n,_){if(1&n&&(e.j41(0,"option",73),e.pXf(1,22),e.k0s()),2&n){const t=_.$implicit,o=e.XpG(2);e.Y8G("value",t)("selected",t===o.storageClassForm.getValue("placement_target")),e.R7$(),e.uP7(t),e.nnv(1)}}function $R(n,_){1&n&&(e.j41(0,"span",72),e.pXf(1,23),e.k0s())}function vR(n,_){if(1&n&&e.DNE(0,$R,2,0,"span",71),2&n){e.XpG();const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.storageClassForm.showError("placement_target",t,"required"))}}function WR(n,_){1&n&&(e.j41(0,"span",72),e.pXf(1,24),e.k0s())}function wR(n,_){if(1&n&&e.DNE(0,WR,2,0,"span",71),2&n){e.XpG();const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.storageClassForm.showError("storage_class",t,"required"))}}function UR(n,_){1&n&&(e.j41(0,"span",72),e.pXf(1,34),e.k0s())}function xR(n,_){if(1&n&&e.DNE(0,UR,2,0,"span",71),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.storageClassForm.showError("region",t,"required"))}}function kR(n,_){1&n&&(e.j41(0,"span",72),e.pXf(1,35),e.k0s())}function XR(n,_){1&n&&(e.j41(0,"span",72),e.pXf(1,36),e.k0s())}function jR(n,_){if(1&n&&e.DNE(0,kR,2,0,"span",71)(1,XR,2,0,"span",71),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.storageClassForm.showError("target_endpoint",t,"required")),e.R7$(),e.Y8G("ngIf",o.storageClassForm.showError("target_endpoint",t,"invalidURL"))}}function BR(n,_){1&n&&(e.j41(0,"span",72),e.pXf(1,37),e.k0s())}function zR(n,_){if(1&n&&e.DNE(0,BR,2,0,"span",71),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.storageClassForm.showError("access_key",t,"required"))}}function HR(n,_){1&n&&(e.j41(0,"span",72),e.pXf(1,38),e.k0s())}function YR(n,_){if(1&n&&e.DNE(0,HR,2,0,"span",71),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.storageClassForm.showError("secret_key",t,"required"))}}function VR(n,_){1&n&&(e.j41(0,"span",72),e.pXf(1,39),e.k0s())}function ZR(n,_){if(1&n&&e.DNE(0,VR,2,0,"span",71),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.storageClassForm.showError("target_path",t,"required"))}}function KR(n,_){1&n&&(e.j41(0,"span",72),e.pXf(1,40),e.k0s())}function qR(n,_){1&n&&(e.j41(0,"span",72),e.pXf(1,41),e.k0s())}function JR(n,_){if(1&n&&e.DNE(0,KR,2,0,"span",71)(1,qR,2,0,"span",71),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.storageClassForm.showError("read_through_restore_days",t,"pattern")),e.R7$(),e.Y8G("ngIf",o.storageClassForm.showError("read_through_restore_days",t,"lockDays"))}}function QR(n,_){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",61)(2,"div",62)(3,"cds-text-label",74),e.PLo(4,25),e.nrm(5,"input",75),e.YFu(),e.k0s(),e.DNE(6,xR,1,1,"ng-template",null,5,e.C5r),e.k0s(),e.j41(8,"div",62)(9,"cds-text-label",76),e.PLo(10,26),e.nrm(11,"input",77),e.YFu(),e.k0s(),e.DNE(12,jR,2,2,"ng-template",null,6,e.C5r),e.k0s()(),e.j41(14,"div",57)(15,"div",78)(16,"cds-password-label",79),e.PLo(17,27),e.nrm(18,"input",80),e.YFu(),e.k0s(),e.nrm(19,"cd-copy-2-clipboard-button",81),e.DNE(20,zR,1,1,"ng-template",null,7,e.C5r),e.k0s()(),e.j41(22,"div",57)(23,"div",78)(24,"cds-password-label",82),e.PLo(25,28),e.nrm(26,"input",83),e.YFu(),e.k0s(),e.nrm(27,"cd-copy-2-clipboard-button",81),e.DNE(28,YR,1,1,"ng-template",null,8,e.C5r),e.k0s()(),e.j41(30,"div",57)(31,"cds-text-label",84),e.PLo(32,29),e.nrm(33,"input",85),e.YFu(),e.k0s(),e.DNE(34,ZR,1,1,"ng-template",null,9,e.C5r),e.k0s(),e.j41(36,"div",57)(37,"cds-checkbox",86),e.bIt("change",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.onAllowReadThroughChange(i))}),e.PLo(38,30),e.nrm(39,"cd-help-text"),e.YFu(),e.k0s()(),e.j41(40,"div",57)(41,"cds-checkbox",87),e.PLo(42,31),e.nrm(43,"cd-help-text"),e.YFu(),e.k0s()(),e.j41(44,"div",61)(45,"div",62),e.nrm(46,"cds-number",88),e.DNE(47,JR,2,2,"ng-template",null,10,e.C5r),e.k0s(),e.j41(49,"div",62)(50,"cds-select",89)(51,"option",59),e.pXf(52,32),e.k0s(),e.j41(53,"option",90),e.pXf(54,33),e.k0s()()()()()}if(2&n){const t=e.sdS(7),o=e.sdS(13),i=e.sdS(21),s=e.sdS(29),T=e.sdS(35),F=e.sdS(48);e.XpG();const k=e.sdS(2),H=e.XpG();e.R7$(3),e.Y8G("invalid",H.storageClassForm.showError("region",k,"required"))("invalidText",t)("helperText",H.helpTextLabels.targetRegionText),e.R7$(2),e.Y8G("invalid",H.storageClassForm.showError("region",k,"required")),e.R7$(4),e.Y8G("invalid",H.storageClassForm.showError("target_endpoint",k,"invalidURL")||H.storageClassForm.showError("target_endpoint",k,"required"))("invalidText",o)("helperText",H.helpTextLabels.targetEndpointText),e.R7$(2),e.Y8G("invalid",H.storageClassForm.showError("target_endpoint",k,"invalidURL")||H.storageClassForm.showError("target_endpoint",k,"required"))("invalidText",o),e.R7$(4),e.Y8G("columnNumbers",e.lJ4(30,qo)),e.R7$(),e.Y8G("invalid",H.storageClassForm.showError("access_key",k,"required"))("invalidText",i)("helperText",H.helpTextLabels.targetAccessKeyText),e.R7$(2),e.Y8G("invalid",H.storageClassForm.showError("access_key",k,"required")),e.R7$(5),e.Y8G("columnNumbers",e.lJ4(31,qo)),e.R7$(),e.Y8G("helperText",H.helpTextLabels.targetSecretKeyText)("invalid",H.storageClassForm.showError("secret_key",k,"required"))("invalidText",s),e.R7$(2),e.Y8G("invalid",H.storageClassForm.showError("secret_key",k,"required")),e.R7$(5),e.Y8G("invalid",H.storageClassForm.showError("target_path",k,"required"))("invalidText",T)("helperText",H.helpTextLabels.targetPathText),e.R7$(2),e.Y8G("invalid",H.storageClassForm.showError("target_path",k,"required")),e.R7$(6),e.uP7(null==H.helpTextLabels?null:H.helpTextLabels.allowReadThroughText),e.nnv(38),e.R7$(4),e.uP7(null==H.helpTextLabels?null:H.helpTextLabels.retainHeadObjectText),e.nnv(42),e.R7$(3),e.Y8G("helperText",H.helpTextLabels.readthroughrestoreDaysText)("invalid",H.storageClassForm.controls.read_through_restore_days.invalid&&H.storageClassForm.controls.read_through_restore_days.dirty)("invalidText",F),e.R7$(4),e.Y8G("helperText",H.helpTextLabels.restoreStorageClassText),e.R7$(3),e.Y8G("ngValue",H.standard)}}function em(n,_){1&n&&(e.j41(0,"span",72),e.pXf(1,46),e.k0s())}function tm(n,_){if(1&n&&e.DNE(0,em,2,0,"span",71),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.storageClassForm.showError("glacier_restore_tier_type",t,"required"))}}function nm(n,_){1&n&&(e.j41(0,"span",72),e.pXf(1,47),e.k0s())}function om(n,_){1&n&&(e.j41(0,"span",72),e.pXf(1,48),e.k0s())}function im(n,_){if(1&n&&e.DNE(0,nm,2,0,"span",71)(1,om,2,0,"span",71),2&n){e.XpG(2);const t=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.storageClassForm.showError("glacier_restore_days",t,"pattern")),e.R7$(),e.Y8G("ngIf",o.storageClassForm.showError("glacier_restore_days",t,"lockDays"))}}function _m(n,_){if(1&n&&(e.j41(0,"div")(1,"legend",91),e.pXf(2,42),e.k0s(),e.j41(3,"div",61)(4,"div",62)(5,"cds-select",92)(6,"option",59),e.pXf(7,43),e.k0s(),e.j41(8,"option",90),e.pXf(9,44),e.k0s(),e.j41(10,"option",90),e.pXf(11,45),e.k0s()(),e.DNE(12,tm,1,1,"ng-template",null,11,e.C5r),e.k0s(),e.j41(14,"div",62),e.nrm(15,"cds-number",93),e.DNE(16,im,2,2,"ng-template",null,12,e.C5r),e.k0s()()()),2&n){const t=e.sdS(13),o=e.sdS(17),i=e.XpG(2);e.R7$(5),e.Y8G("invalid",i.storageClassForm.controls.glacier_restore_tier_type.invalid&&i.storageClassForm.controls.glacier_restore_tier_type.dirty)("invalidText",t)("helperText",i.helpTextLabels.tiertypeText),e.R7$(3),e.Y8G("ngValue",i.standard),e.R7$(2),e.Y8G("ngValue",i.expedited),e.R7$(5),e.Y8G("id","glacier_restore_days")("formControlName","glacier_restore_days")("label","Glacier Restore Days")("helperText",i.helpTextLabels.restoreDaysText)("min",1)("invalid",i.storageClassForm.controls.glacier_restore_days.invalid&&i.storageClassForm.controls.glacier_restore_days.dirty)("invalidText",o)}}function sm(n,_){1&n&&(e.j41(0,"h5",100),e.EFF(1,"Advanced"),e.k0s())}function rm(n,_){if(1&n){const t=e.RV6();e.j41(0,"fieldset")(1,"div"),e.DNE(2,sm,2,0,"ng-template",null,13,e.C5r),e.j41(4,"fieldset")(5,"cds-accordion",94)(6,"cds-accordion-item",95),e.bIt("selected",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.showAdvanced=!i.showAdvanced)}),e.j41(7,"div",61)(8,"div",62)(9,"cds-text-label",96),e.PLo(10,49),e.nrm(11,"input",97),e.YFu(),e.k0s()(),e.j41(12,"div",62)(13,"cds-text-label",98),e.PLo(14,50),e.nrm(15,"input",99),e.YFu(),e.k0s()()()()()()()()}if(2&n){const t=e.sdS(3),o=e.XpG(2);e.R7$(6),e.Y8G("title",t),e.R7$(3),e.Y8G("helperText",o.helpTextLabels.multipartSyncThresholdText),e.R7$(4),e.Y8G("helperText",o.helpTextLabels.multipartMinPartText)}}function am(n,_){1&n&&(e.j41(0,"cd-alert-panel",69)(1,"span"),e.pXf(2,51),e.k0s()())}function lm(n,_){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"form",54,0)(3,"div",55),e.PLo(4,14),e.nI1(5,"titlecase"),e.nI1(6,"upperFirst"),e.nrm(7,"cd-help-text",56),e.YFu(),e.k0s(),e.j41(8,"div",57)(9,"cds-select",58)(10,"option",59),e.pXf(11,15),e.k0s(),e.DNE(12,OR,2,2,"option",60),e.k0s(),e.DNE(13,bR,1,1,"ng-template",null,1,e.C5r),e.k0s(),e.j41(15,"div",61)(16,"div",62)(17,"cds-select",63),e.bIt("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onZonegroupChange())}),e.DNE(18,AR,2,3,"option",64),e.k0s(),e.DNE(19,DR,1,1,"ng-template",null,2,e.C5r),e.k0s(),e.j41(21,"div",62)(22,"cds-select",65)(23,"option",66),e.pXf(24,16),e.k0s(),e.DNE(25,yR,2,3,"option",64),e.k0s(),e.DNE(26,vR,1,1,"ng-template",null,3,e.C5r),e.k0s()(),e.j41(28,"div",57)(29,"cds-text-label",67),e.PLo(30,17),e.nrm(31,"input",68),e.YFu(),e.k0s(),e.DNE(32,wR,1,1,"ng-template",null,4,e.C5r),e.k0s(),e.DNE(34,QR,55,32,"div")(35,_m,18,12,"div")(36,rm,16,3,"fieldset")(37,am,3,0,"cd-alert-panel",69),e.j41(38,"cd-form-button-panel",70),e.nI1(39,"titlecase"),e.nI1(40,"upperFirst"),e.bIt("submitActionEvent",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.submitAction())}),e.k0s()(),e.bVm()}if(2&n){const t=e.sdS(2),o=e.sdS(14),i=e.sdS(20),s=e.sdS(27),T=e.sdS(33),F=e.XpG();e.R7$(),e.Y8G("formGroup",F.storageClassForm),e.R7$(6),e.Y8G("formAllFieldsRequired",!0),e.uP7(e.bMT(5,24,F.action))(e.bMT(6,26,F.resource)),e.nnv(4),e.R7$(2),e.Y8G("helperText",F.helpTextLabels.storageClassText)("invalid",F.storageClassForm.showError("storageClassType",t,"required"))("invalidText",o),e.R7$(3),e.Y8G("ngForOf",F.storageClassOptions),e.R7$(5),e.Y8G("invalid",F.storageClassForm.showError("zonegroup",t,"required"))("invalidText",i),e.R7$(),e.Y8G("ngForOf",F.zonegroupNames),e.R7$(4),e.Y8G("invalid",F.storageClassForm.showError("placement_target",t,"required"))("invalidText",s),e.R7$(3),e.Y8G("ngForOf",F.placementTargets),e.R7$(4),e.Y8G("disabled",F.editing)("invalid",F.storageClassForm.controls.storage_class.invalid&&F.storageClassForm.controls.storage_class.dirty)("invalidText",T),e.R7$(2),e.Y8G("invalid",F.storageClassForm.showError("storage_class",t,"required")),e.R7$(3),e.vxM(F.isTierMatch(F.TIER_TYPE.CLOUD_TIER,F.TIER_TYPE.GLACIER)?34:-1),e.R7$(),e.vxM(F.isTierMatch(F.TIER_TYPE.GLACIER)?35:-1),e.R7$(),e.vxM(F.isTierMatch(F.TIER_TYPE.CLOUD_TIER,F.TIER_TYPE.GLACIER)?36:-1),e.R7$(),e.vxM(F.isTierMatch(F.TIER_TYPE.CLOUD_TIER,F.TIER_TYPE.GLACIER)?37:-1),e.R7$(),e.Y8G("form",F.storageClassForm)("submitText",e.bMT(39,28,F.action)+" "+e.bMT(40,30,F.resource))}}let Jo=(()=>{class n extends d.g{actionLabels;formBuilder;notificationService;rgwStorageService;rgwZoneGroupService;router;route;formatter;storageClassForm;action;resource;editing;showAdvanced=!1;defaultZoneGroup;zonegroupNames;placementTargets=[];selectedZoneGroup;defaultZonegroup;zoneGroupDetails;storageClassInfo;tierTargetInfo;glacierStorageClassDetails;allowReadThrough=!1;TIER_TYPE=we;TIER_TYPE_DISPLAY=yt;storageClassOptions;helpTextLabels;constructor(t,o,i,s,T,F,k,H){super(),this.actionLabels=t,this.formBuilder=o,this.notificationService=i,this.rgwStorageService=s,this.rgwZoneGroupService=T,this.router=F,this.route=k,this.formatter=H,this.resource="Tiering Storage Class",this.editing=this.router.url.startsWith(`/rgw/tiering/${m.Qp.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE}ngOnInit(){this.helpTextLabels={targetPathText:Qn,targetEndpointText:"The URL endpoint of the remote cloud service for accessing storage.",targetRegionText:"The region of the remote cloud service where storage is located.",targetAccessKeyText:eo,targetSecretKeyText:to,retainHeadObjectText:no,allowReadThroughText:Kn,storageClassText:oo,multipartMinPartText:qn,multipartSyncThresholdText:Jn,tiertypeText:so,glacierRestoreDayText:io,glacierRestoreTiertypeText:_o,restoreDaysText:ro,readthroughrestoreDaysText:ao,restoreStorageClassText:lo},this.storageClassOptions=[{value:we.LOCAL,label:yt.LOCAL},{value:we.CLOUD_TIER,label:yt.CLOUD_TIER},{value:we.GLACIER,label:yt.GLACIER}],this.createForm(),this.storageClassTypeText(),this.updateTierTypeHelpText(),this.loadingReady(),this.loadZoneGroup(),this.editing&&(this.route.params.subscribe(t=>{this.storageClassInfo=t}),this.rgwStorageService.getPlacement_target(this.storageClassInfo.placement_target).subscribe(t=>{this.tierTargetInfo=this.getTierTargetByStorageClass(t,this.storageClassInfo.storage_class);let o=this.tierTargetInfo?.val?.s3;if(this.storageClassForm.get("zonegroup").disable(),this.storageClassForm.get("placement_target").disable(),this.storageClassForm.get("storage_class").disable(),(this.tierTargetInfo?.val?.tier_type===we.CLOUD_TIER||this.tierTargetInfo?.val?.tier_type===we.GLACIER)&&this.storageClassForm.get("storageClassType").disable(),this.storageClassForm.patchValue({zonegroup:this.storageClassInfo?.zonegroup_name,region:o?.region,placement_target:this.storageClassInfo?.placement_target,storageClassType:this.tierTargetInfo?.val?.tier_type??we.LOCAL,target_endpoint:o?.endpoint,storage_class:this.storageClassInfo?.storage_class,access_key:o?.access_key,secret_key:o?.secret,target_path:o?.target_path,retain_head_object:this.tierTargetInfo?.val?.retain_head_object||!1,multipart_sync_threshold:o?.multipart_sync_threshold||"",multipart_min_part_size:o?.multipart_min_part_size||"",allow_read_through:this.tierTargetInfo?.val?.allow_read_through||!1,restore_storage_class:this.tierTargetInfo?.val?.restore_storage_class,read_through_restore_days:this.tierTargetInfo?.val?.read_through_restore_days}),this.tierTargetInfo?.val?.tier_type==we.GLACIER){let i=this.tierTargetInfo?.val["s3-glacier"];this.storageClassForm.patchValue({glacier_restore_tier_type:i.glacier_restore_tier_type,glacier_restore_days:i.glacier_restore_days})}})),this.storageClassForm.get("storageClassType").valueChanges.subscribe(t=>{this.updateValidatorsBasedOnStorageClass(t)}),this.storageClassForm.get("allow_read_through").valueChanges.subscribe(t=>{this.onAllowReadThroughChange(t)})}updateValidatorsBasedOnStorageClass(t){if(Zn.forEach(o=>{const i=this.storageClassForm.get(o);t===we.CLOUD_TIER&&J_.includes(o)||t===we.GLACIER&&Zn.includes(o)?i.setValidators([r.k0.required]):i.clearValidators(),i.updateValueAndValidity()}),this.editing){const o={allow_read_through:!1,read_through_restore_days:1,restore_storage_class:"Standard",multipart_min_part_size:33554432,multipart_sync_threshold:33554432};Object.keys(o).forEach(i=>{this.storageClassForm.get(i).setValue(o[i])})}}storageClassTypeText(){this.storageClassForm?.get("storageClassType")?.valueChanges.subscribe(t=>{t===we.LOCAL?this.helpTextLabels.storageClassText=oo:t===we.CLOUD_TIER?this.helpTextLabels.storageClassText=os:t===we.GLACIER&&(this.helpTextLabels.storageClassText=is)})}updateTierTypeHelpText(){this.storageClassForm?.get("glacier_restore_tier_type")?.valueChanges.subscribe(t=>{this.helpTextLabels.tiertypeText="Standard"===t?so:_s})}createForm(){const t=this,o=E.xQ.custom("lockDays",()=>{if(!t.storageClassForm||!t.storageClassForm.getRawValue())return!1;const i=Number(t.storageClassForm.getValue("read_through_restore_days"));return!Number.isInteger(i)||0===i});this.storageClassForm=this.formBuilder.group({storage_class:new r.MJ("",{validators:[r.k0.required]}),zonegroup:new r.MJ(this.selectedZoneGroup,{validators:[r.k0.required]}),region:new r.MJ("",[E.xQ.composeIf({storageClassType:we.CLOUD_TIER},[r.k0.required])]),placement_target:new r.MJ("",{validators:[r.k0.required]}),target_endpoint:new r.MJ(null,{validators:[E.xQ.url,r.k0.required]}),access_key:new r.MJ(null,[E.xQ.composeIf({storageClassType:we.CLOUD_TIER},[r.k0.required])]),secret_key:new r.MJ(null,[E.xQ.composeIf({storageClassType:we.CLOUD_TIER},[r.k0.required])]),target_path:new r.MJ("",[E.xQ.composeIf({storageClassType:we.CLOUD_TIER},[r.k0.required])]),retain_head_object:new r.MJ(!0),glacier_restore_tier_type:new r.MJ("Standard",[E.xQ.composeIf({storageClassType:we.GLACIER},[r.k0.required])]),glacier_restore_days:new r.MJ(1,[E.xQ.composeIf({storageClassType:we.GLACIER||we.CLOUD_TIER},[E.xQ.number(!1),o])]),restore_storage_class:new r.MJ("Standard"),read_through_restore_days:new r.MJ({value:1,disabled:!0},E.xQ.composeIf(i=>{const s=i.get("storageClassType")?.value;return s===we.GLACIER||s===we.CLOUD_TIER},[E.xQ.number(!1),o])),multipart_sync_threshold:new r.MJ(33554432),multipart_min_part_size:new r.MJ(33554432),allow_read_through:new r.MJ(!1),storageClassType:new r.MJ(we.LOCAL,r.k0.required)})}loadZoneGroup(){return new Promise((t,o)=>{this.rgwZoneGroupService.getAllZonegroupsInfo().subscribe(i=>{this.zoneGroupDetails=i,this.zonegroupNames=[],this.placementTargets=[],i.zonegroups&&i.zonegroups.length>0&&(this.zonegroupNames=i.zonegroups.map(s=>({id:s.id,name:s.name}))),this.defaultZonegroup=this.zonegroupNames.find(s=>s.id===i.default_zonegroup),this.storageClassForm.get("zonegroup").setValue(this.defaultZonegroup.name),this.onZonegroupChange(),t()},i=>o(i))})}onZonegroupChange(){const t=this.storageClassForm.get("zonegroup").value,o=this.zoneGroupDetails.zonegroups.find(s=>s.name===t),i=o.placement_targets.find(s=>"default-placement"===s.name);if(o){const s=o.placement_targets.map(T=>T.name);this.placementTargets=s}i&&!this.editing?this.storageClassForm.get("placement_target").setValue(i.name):this.storageClassForm.get("placement_target").setValue(this.storageClassInfo.placement_target)}submitAction(){const t=this,o=this.buildRequest(),i=this.storageClassForm.get("storage_class").value;this.editing?this.rgwStorageService.editStorageClass(o).subscribe(()=>{this.notificationService.show(f._.success,"Updated Storage Class '" + i + "'"),this.goToListView()},()=>{t.storageClassForm.setErrors({cdSubmitButton:!0})}):this.rgwStorageService.createStorageClass(o).subscribe(()=>{this.notificationService.show(f._.success,"Created Storage Class '" + i + "'"),this.goToListView()},()=>{t.storageClassForm.setErrors({cdSubmitButton:!0})})}goToListView(){this.router.navigate(["rgw/tiering"])}getTierTargetByStorageClass(t,o){return t?.tier_targets?.find(s=>s.val.storage_class===o)}onAllowReadThroughChange(t){this.allowReadThrough=t;const o=this.storageClassForm.get("read_through_restore_days");this.allowReadThrough?(this.storageClassForm.get("retain_head_object")?.setValue(!0),this.storageClassForm.get("retain_head_object")?.disable(),o?.enable()):(this.storageClassForm.get("retain_head_object")?.enable(),o?.disable())}isTierMatch(...t){const o=this.storageClassForm.getValue("storageClassType");return t.includes(o)}buildRequest(){if(this.storageClassForm.errors)return null;const t=h().cloneDeep(this.storageClassForm.value),o=this.storageClassForm.get("zonegroup").value,i=this.storageClassForm.get("storage_class").value,s=this.storageClassForm.get("placement_target").value,T=this.storageClassForm.get("storageClassType").value,F=this.storageClassForm.get("retain_head_object").value,k=this.formatter.toBytes(this.storageClassForm.get("multipart_min_part_size").value),H=this.formatter.toBytes(this.storageClassForm.get("multipart_sync_threshold").value);return this.buildPlacementTargets(T,o,s,i,F,t,H,k)}buildPlacementTargets(t,o,i,s,T,F,k,H){const q={placement_id:i,storage_class:s};if(t===we.LOCAL)return{zone_group:o,placement_targets:[q]};const oe={endpoint:F.target_endpoint,access_key:F.access_key,secret:F.secret_key,target_path:F.target_path,retain_head_object:T,allow_read_through:F.allow_read_through,region:F.region,multipart_sync_threshold:k,multipart_min_part_size:H,restore_storage_class:F.restore_storage_class,...F.allow_read_through?{read_through_restore_days:F.read_through_restore_days}:{}};return t===we.CLOUD_TIER?{zone_group:o,placement_targets:[{...q,tier_type:we.CLOUD_TIER,tier_config:{...oe}}]}:t===we.GLACIER?{zone_group:o,placement_targets:[{...q,tier_type:we.GLACIER,tier_config:{...oe,glacier_restore_days:F.glacier_restore_days,glacier_restore_tier_type:F.glacier_restore_tier_type}}]}:{zone_group:o,placement_targets:[q]}}static \u0275fac=function(o){return new(o||n)(e.rXU(m.Ss),e.rXU(u.$),e.rXU(B.J),e.rXU(Vo),e.rXU(ht.Z),e.rXU(I.Ix),e.rXU(I.nX),e.rXU(l.k))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-storage-class-form"]],features:[e.Vt3],decls:2,vars:3,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se,Ce,he,ye,$e,Ge,Ue,xe,ke,ve,de,pe,He,Ye,ze,Ve,Ne,fe,nt,ot,it,_t,st,rt,at,lt,ct,Qe,ut,dt,ft,Me;return t="Typ",o="Zone Group Name",i="Placement Target",s=" " + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + " " + "\ufffd#7\ufffd" + "" + "\ufffd/#7\ufffd" + "",T="-- Select Storage Class --",F="--Select--",k="Name " + "\ufffd#31\ufffd\ufffd/#31\ufffd" + "",H=" " + "\ufffd0\ufffd" + " ",q="Pole jest wymagane.",oe=" " + "\ufffd0\ufffd" + " ",le="Pole jest wymagane.",Re=" " + "\ufffd0\ufffd" + " ",ce="Pole jest wymagane.",Te="Pole jest wymagane.",se="e.g, us-east-1",Ce="e.g, http://ceph-node-00.com:80",he="ReadThrough Restore Days",ye="Restore Storage Class",$e="Target Region " + "\ufffd#5\ufffd\ufffd/#5\ufffd" + "",Ge="Target Endpoint " + "\ufffd#11\ufffd\ufffd/#11\ufffd" + "",Ue="Target Access Key " + "\ufffd#18\ufffd\ufffd/#18\ufffd" + "",xe="Target Secret Key " + "\ufffd#26\ufffd\ufffd/#26\ufffd" + "",ke="Target Path " + "\ufffd#33\ufffd\ufffd/#33\ufffd" + "",ve="Allow Read Through " + "\ufffd#39\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#39\ufffd" + "",de="Head Object (Stub File) " + "\ufffd#43\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#43\ufffd" + "",pe="-- Select the glacier restore storage class --",He="Standard",Ye="Pole jest wymagane.",ze="Pole jest wymagane.",Ve="Please enter a valid URL.",Ne="Pole jest wymagane.",fe="Pole jest wymagane.",nt="Pole jest wymagane.",ot="The entered value must be a positive integer.",it="ReadThrough Restore Days must be positive.",_t="Glacier Restore Tier Type",st="Glacier Configuration",rt="-- Select the glacier restore tier type --",at="Standard",lt="Expedited",ct="Pole jest wymagane.",Qe="The entered value must be a positive integer.",ut="Glacier Restore Days must be positive.",dt="Multipart Sync Threshold " + "\ufffd#11\ufffd\ufffd/#11\ufffd" + "",ft="Multipart Minimum Part Size " + "\ufffd#15\ufffd\ufffd/#15\ufffd" + "",Me="RGW service would be restarted after creating the storage class.",[["formDir","ngForm"],["storageError",""],["zonegroupError",""],["placementError",""],["storageClassError",""],["regionError",""],["endpointError",""],["accessError",""],["secretError",""],["targetError",""],["readThroughError",""],["glacierError",""],["glacierRestoreError",""],["title",""],s,T,F,k,H,q,oe,le,Re,ce,Te,$e,Ge,Ue,xe,ke,ve,de,pe,He,Ye,ze,Ve,Ne,fe,nt,ot,it,st,rt,at,lt,ct,Qe,ut,dt,ft,Me,["cdsCol","",3,"columnNumbers"],[4,"cdFormLoading"],["name","storageClassForm","novalidate","",3,"formGroup"],[1,"form-header"],[3,"formAllFieldsRequired"],[1,"form-item"],["label",t,"for","storageClassType","formControlName","storageClassType","id","storageClassType",3,"helperText","invalid","invalidText"],["value",""],[3,"value",4,"ngFor","ngForOf"],["cdsRow","",1,"form-item","form-item-append"],["cdsCol",""],["label",o,"formControlName","zonegroup","id","zonegroup",3,"change","invalid","invalidText"],[3,"value","selected",4,"ngFor","ngForOf"],["label",i,"formControlName","placement_target","id","placement_target",3,"invalid","invalidText"],[3,"value"],["labelInputID","storage_class",3,"disabled","invalid","invalidText"],["cdsText","","type","type","id","storage_class","formControlName","storage_class",3,"invalid"],["type","warning","spacingClass","mb-2"],["wrappingClass","text-right",3,"submitActionEvent","form","submitText"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[3,"value","selected"],["labelInputID","region",3,"invalid","invalidText","helperText"],["cdsText","","type","text","id","region","formControlName","region","placeholder",se,3,"invalid"],["labelInputID","target_endpoint",3,"invalid","invalidText","helperText"],["cdsText","","type","text","placeholder",Ce,"id","target_endpoint","formControlName","target_endpoint",3,"invalid","invalidText"],["cdsCol","",1,"d-flex",3,"columnNumbers"],["labelInputID","access_key",3,"invalid","invalidText","helperText"],["cdsPassword","","type","password","id","access_key","formControlName","access_key",3,"invalid"],[1,"clipboard"],["labelInputID","secret_key",3,"helperText","invalid","invalidText"],["cdsPassword","","type","password","id","secret_key","formControlName","secret_key",3,"invalid"],["labelInputID","target_path",3,"invalid","invalidText","helperText"],["cdsText","","type","text","id","target_path","formControlName","target_path",3,"invalid"],["id","allow_read_through","formControlName","allow_read_through","cdOptionalField","Allow Read Through",3,"change"],["id","retain_head_object","formControlName","retain_head_object","cdOptionalField","Head Object (Stub File)"],["name","read_through_restore_days","formControlName","read_through_restore_days","id","read_through_restore_days","min","1","label",he,3,"helperText","invalid","invalidText"],["formControlName","restore_storage_class","label",ye,"id","restore_storage_class",3,"helperText"],[3,"ngValue"],[1,"cd-header"],["formControlName","glacier_restore_tier_type","label",_t,"cdRequiredField","Glacier Restore Tier Type","id","glacier_restore_tier_type",3,"invalid","invalidText","helperText"],[3,"id","formControlName","label","helperText","min","invalid","invalidText"],["size","lg",1,"form-item"],["id","advanced-fieldset",3,"selected","title"],["labelInputID","multipart_sync_threshold","cdOptionalField","Multipart Sync Threshold",3,"helperText"],["cdsText","","type","text","id","multipart_sync_threshold","formControlName","multipart_sync_threshold","cdDimlessBinary",""],["labelInputID","multipart_min_part_size","cdOptionalField","Multipart Minimum Part Size",3,"helperText"],["cdsText","","type","text","id","multipart_min_part_size","formControlName","multipart_min_part_size","cdDimlessBinary",""],[1,"cds--accordion__title","cd-header"]]},template:function(o,i){1&o&&(e.j41(0,"div",52),e.DNE(1,lm,41,32,"ng-container",53),e.k0s()),2&o&&(e.Y8G("columnNumbers",e.lJ4(2,IR)),e.R7$(),e.Y8G("cdFormLoading",i.loading))},dependencies:[R.Sq,R.bT,N.m,vt.N,We.e,V.O,Ln.Y,Xt.G,Oe.S,Xe.E,qe.P,PR.O,r.qT,r.xH,r.y7,r.me,r.BC,r.cb,r.j4,r.JD,et.ee,et.YP,Ie.Zt,Ie.LP,Ie.ks,Ie.yA,Bn.nD,Bn.As,be.Sc,Ze.l6,Ze.c$,De.jM,R.PV,pt.r],styles:[".clipboard[_ngcontent-%COMP%]{margin-top:1.5rem}"]})}return n})();var cm=g(38157),um=g(5793),dm=g(83133);let fm=(()=>{class n extends dm.O{http;baseURL="api/rgw/topic";constructor(t){super(),this.http=t}listTopic(){return this.http.get(this.baseURL)}getTopic(t){return this.http.get(`${this.baseURL}/${t}`)}static \u0275fac=function(o){return new(o||n)(e.KVO(Nn.Qq))};static \u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pm(n,_){if(1&n&&(e.qex(0),e.j41(1,"cds-tabs",13)(2,"cds-tab",14)(3,"table",15)(4,"tbody")(5,"tr")(6,"td",16),e.pXf(7,0),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s()(),e.j41(10,"tr")(11,"td",17),e.pXf(12,1),e.k0s(),e.j41(13,"td",18),e.EFF(14),e.k0s()(),e.j41(15,"tr")(16,"td",17),e.pXf(17,2),e.k0s(),e.j41(18,"td",18),e.EFF(19),e.k0s()(),e.j41(20,"tr")(21,"td",17),e.pXf(22,3),e.k0s(),e.j41(23,"td",18),e.EFF(24),e.k0s()(),e.j41(25,"tr")(26,"td",16),e.pXf(27,4),e.k0s(),e.j41(28,"td"),e.EFF(29),e.k0s()(),e.j41(30,"tr")(31,"td",16),e.pXf(32,5),e.k0s(),e.j41(33,"td"),e.EFF(34),e.k0s()(),e.j41(35,"tr")(36,"td",16),e.pXf(37,6),e.k0s(),e.j41(38,"td"),e.EFF(39),e.k0s()(),e.j41(40,"tr")(41,"td",16),e.pXf(42,7),e.k0s(),e.j41(43,"td"),e.EFF(44),e.k0s()(),e.j41(45,"tr")(46,"td",16),e.pXf(47,8),e.k0s(),e.j41(48,"td"),e.EFF(49),e.k0s()(),e.j41(50,"tr")(51,"td",16),e.pXf(52,9),e.k0s(),e.j41(53,"td"),e.EFF(54),e.k0s()()()()(),e.j41(55,"cds-tab",19)(56,"div",20)(57,"table",21)(58,"tbody")(59,"tr")(60,"td",17),e.pXf(61,10),e.k0s(),e.j41(62,"td")(63,"pre"),e.EFF(64),e.nI1(65,"json"),e.k0s()()()()()()(),e.j41(66,"cds-tab",22)(67,"table",21)(68,"tbody")(69,"tr")(70,"td",17),e.pXf(71,11),e.k0s(),e.j41(72,"td")(73,"pre"),e.EFF(74),e.nI1(75,"json"),e.k0s()()()()()()(),e.bVm()),2&n){const t=e.XpG();e.R7$(9),e.JRh(null==t.selection||null==t.selection.dest?null:t.selection.dest.push_endpoint_args),e.R7$(5),e.JRh(null==t.selection||null==t.selection.dest?null:t.selection.dest.push_endpoint_topic),e.R7$(5),e.JRh(null==t.selection||null==t.selection.dest?null:t.selection.dest.push_endpoint),e.R7$(5),e.JRh(null==t.selection||null==t.selection.dest?null:t.selection.dest.stored_secret),e.R7$(5),e.JRh(null==t.selection||null==t.selection.dest?null:t.selection.dest.persistent),e.R7$(5),e.JRh(null==t.selection||null==t.selection.dest?null:t.selection.dest.persistent_queue),e.R7$(5),e.JRh(null==t.selection||null==t.selection.dest?null:t.selection.dest.time_to_live),e.R7$(5),e.JRh(null==t.selection||null==t.selection.dest?null:t.selection.dest.max_retries),e.R7$(5),e.JRh(null==t.selection||null==t.selection.dest?null:t.selection.dest.retry_sleep_duration),e.R7$(5),e.JRh(null==t.selection?null:t.selection.opaqueData),e.R7$(10),e.JRh(e.bMT(65,12,t.policy)),e.R7$(10),e.JRh(e.bMT(75,14,t.selection.subscribed_buckets))}}let gm=(()=>{class n{selection;policy;constructor(){}ngOnChanges(t){if(t.selection&&this.selection)if(X.isString(this.selection.policy))try{this.policy=JSON.parse(this.selection.policy)}catch{this.policy="{}"}else this.policy=this.selection.policy||{}}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-topic-details"]],inputs:{selection:"selection"},features:[e.OA$],decls:1,vars:1,consts:()=>{let t,o,i,s,T,F,k,H,q,oe,le,Re,ce,Te,se;return t="Szczeg\xF3\u0142y",o="Policies",i="Subscribed buckets",s="Push endpoint arguments",T="Push endpoint topic",F="Push endpoint",k="Stored secret",H="Persistent",q="Persistent queue",oe="Time to live",le="Max retries",Re="Retry sleep duration",ce="Opaque data",Te="Policy",se="Subscribed buckets",[s,T,F,k,H,q,oe,le,Re,ce,Te,se,[4,"ngIf"],["type","contained","theme","light"],["heading",t],["data-testid","rgw-topic-details",1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],[1,"bold"],[1,"bold","w-25"],[1,"w-75"],["heading",o],[1,"table-scroller"],[1,"cds--data-table--sort","cds--data-table--no-border","cds--data-table","cds--data-table--md"],["heading",i]]},template:function(o,i){1&o&&e.DNE(0,pm,76,16,"ng-container",12),2&o&&e.Y8G("ngIf",!!i.selection)},dependencies:[R.bT,_n.tU,_n.oz,R.TG]})}return n})();const Tm=["table"];function Rm(n,_){if(1&n&&e.nrm(0,"cd-rgw-topic-details",4),2&n){const t=e.XpG(2);e.Y8G("selection",t.expandedRow)}}function mm(n,_){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"cd-table",2,0),e.bIt("setExpandedRow",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.setExpandedRow(i))})("updateSelection",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.updateSelection(i))})("fetchData",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.fetchData(i))}),e.DNE(3,Rm,1,1,"cd-rgw-topic-details",3),e.k0s(),e.bVm()}if(2&n){const t=_.ngIf,o=e.XpG();e.R7$(),e.Y8G("autoReload",!1)("data",t)("columns",o.columns)("hasDetails",!0)}}let Em=(()=>{class n extends Dt.D{authStorageService;actionLabels;rgwTopicService;table;columns;permission;tableActions;context;errorMessage;selection=new gt.y;topic$;subject=new um.t([]);name;constructor(t,o,i){super(),this.authStorageService=t,this.actionLabels=o,this.rgwTopicService=i,this.permission=this.authStorageService.getPermissions().rgw}ngOnInit(){this.columns=[{name:"Nazwa",prop:"name",flexGrow:2},{name:"W\u0142a\u015Bciciel",prop:"owner",flexGrow:2},{name:"Amazon resource name",prop:"arn",flexGrow:2},{name:"Push endpoint",prop:"dest.push_endpoint",flexGrow:2}],this.topic$=this.subject.pipe((0,M.n)(()=>this.rgwTopicService.listTopic().pipe((0,Ht.W)(()=>(this.context.error(),(0,Nt.of)(null))))),(0,ko.t)(1))}fetchData(){this.subject.next([])}updateSelection(t){this.selection=t}static \u0275fac=function(o){return new(o||n)(e.rXU(Et.v),e.rXU(m.Ss),e.rXU(fm))};static \u0275cmp=e.VBU({type:n,selectors:[["cd-rgw-topic-list"]],viewQuery:function(o,i){if(1&o&&e.GBs(Tm,7),2&o){let s;e.mGM(s=e.lsd())&&(i.table=s.first)}},features:[e.Vt3],decls:2,vars:3,consts:[["table",""],[4,"ngIf"],["columnMode","flex","selectionType","single",3,"setExpandedRow","updateSelection","fetchData","autoReload","data","columns","hasDetails"],[3,"selection",4,"cdTableDetail"],[3,"selection"]],template:function(o,i){1&o&&(e.DNE(0,mm,4,4,"ng-container",1),e.nI1(1,"async")),2&o&&e.Y8G("ngIf",e.bMT(1,1,i.topic$))},dependencies:[R.bT,Je.O,$t.N,gm,R.Jj]})}return n})(),Qo=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=e.$C({type:n});static \u0275inj=e.G2t({providers:[R.PV],imports:[R.MD,TT._,L.G,r.YN,r.X1.withConfig({callSetDisabledState:"whenDisabledForLegacyCode"}),Y.d,b.Pv,I.iI,b.n8,b.zr,j.Y,xn.wx,Jf.h,sg.W,b.h_,ae.Q_,et.pc,pT.b,ar,mt.tm,yo.H,jt.op,b.EH,Ie.x1,Bn.h6,be.q4,Ze.py,De.Yr,_n.jr,To.$C,hn.Ss,gT.e,Ut.qJ,qt.s7]})}return n})();const Sm=[{path:"",redirectTo:"rbd",pathMatch:"full"},{path:"daemon",component:ma,data:{breadcrumbs:"Gateways"}},{path:"user",data:{breadcrumbs:"Users"},children:[{path:"",component:ou},{path:m.Qp.CREATE,component:Oo,data:{breadcrumbs:m.yY.CREATE}},{path:`${m.Qp.EDIT}/:uid`,component:Oo,data:{breadcrumbs:m.yY.EDIT}}]},{path:"accounts",data:{breadcrumbs:"Accounts"},children:[{path:"",component:FT},{path:m.Qp.CREATE,component:Ko,data:{breadcrumbs:m.yY.CREATE}},{path:`${m.Qp.EDIT}/:id`,component:Ko,data:{breadcrumbs:m.yY.EDIT}}]},{path:"roles",data:{breadcrumbs:"Roles",resource:"api.rgw.roles@1.0",tabs:[{name:"Users",url:"/rgw/user"},{name:"Accounts",url:"/rgw/accounts"},{name:"Roles",url:"/rgw/roles"}]},children:[{path:"",component:p.M},{path:m.Qp.CREATE,component:xo.u,data:{breadcrumbs:m.yY.CREATE}},{path:m.Qp.EDIT,component:xo.u,data:{breadcrumbs:m.yY.EDIT}}]},{path:"bucket",data:{breadcrumbs:"Buckets"},children:[{path:"",component:oa},{path:m.Qp.CREATE,component:Hn,data:{breadcrumbs:m.yY.CREATE}},{path:`${m.Qp.EDIT}/:bid`,component:Hn,data:{breadcrumbs:m.yY.EDIT}}]},{path:"overview",data:{breadcrumbs:"Overview"},children:[{path:"",component:_g}]},{path:"multisite",data:{breadcrumbs:"Multi-site"},children:[{path:"",redirectTo:"configuration",pathMatch:"full"},{path:"configuration",component:qf,data:{breadcrumbs:"Configuration"},children:[{path:"setup-multisite-replication",component:$o,outlet:"modal"}]},{path:"sync-policy",component:wo,data:{breadcrumbs:"Sync-policy"},children:[{path:`${m.Qp.CREATE}`,component:Xn,outlet:"modal"},{path:`${m.Qp.EDIT}/:groupName`,component:Xn,outlet:"modal"},{path:`${m.Qp.EDIT}/:groupName/:bucketName`,component:Xn,outlet:"modal"}]}]},{path:"tiering",data:{breadcrumbs:"Tiering"},children:[{path:"",component:fT},{path:m.Qp.CREATE,component:Jo,data:{breadcrumbs:m.yY.CREATE}},{path:`${m.Qp.EDIT}/:zonegroup_name/:placement_target/:storage_class`,component:Jo,data:{breadcrumbs:m.yY.EDIT}}]},{path:"nfs",canActivateChild:[G.k,W.x],data:{moduleStatusGuardConfig:{uiApiPath:"nfs-ganesha",redirectTo:"error",section:"nfs-ganesha",section_info:"NFS GANESHA",header:"NFS-Ganesha is not configured"},breadcrumbs:"NFS"},children:[{path:"",component:cm.$},{path:m.Qp.CREATE,component:zo.B,data:{breadcrumbs:m.yY.CREATE}},{path:`${m.Qp.EDIT}/:cluster_id/:export_id`,component:zo.B,data:{breadcrumbs:m.yY.EDIT}}]},{path:"configuration",data:{breadcrumbs:"Configuration"},children:[{path:"",component:Yg}]},{path:"topic",data:{breadcrumbs:"Topic"},children:[{path:"",component:Em}]}];let Fm=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=e.$C({type:n});static \u0275inj=e.G2t({imports:[Qo,I.iI.forChild(Sm)]})}return n})()},15340:()=>{},79838:()=>{}}]);