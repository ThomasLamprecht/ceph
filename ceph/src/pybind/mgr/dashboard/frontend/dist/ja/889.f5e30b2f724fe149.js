(self.webpackChunkceph_dashboard=self.webpackChunkceph_dashboard||[]).push([[889],{3875:(K,Y,p)=>{"use strict";var g=p(96434),_=p(12658),P="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Y.Buffer=d,Y.SlowBuffer=function S(R){return+R!=R&&(R=0),d.alloc(+R)},Y.INSPECT_MAX_BYTES=50;var v=2147483647;function T(R){if(R>v)throw new RangeError('The value "'+R+'" is invalid for option "size"');var r=new Uint8Array(R);return Object.setPrototypeOf(r,d.prototype),r}function d(R,r,s){if("number"==typeof R){if("string"==typeof r)throw new TypeError('The "string" argument must be of type string. Received type number');return w(R)}return m(R,r,s)}function m(R,r,s){if("string"==typeof R)return function x(R,r){if(("string"!=typeof r||""===r)&&(r="utf8"),!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var s=0|M(R,r),G=T(s),q=G.write(R,r);return q!==s&&(G=G.slice(0,q)),G}(R,r);if(ArrayBuffer.isView(R))return function D(R){if(A(R,Uint8Array)){var r=new Uint8Array(R);return b(r.buffer,r.byteOffset,r.byteLength)}return O(R)}(R);if(null==R)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R);if(A(R,ArrayBuffer)||R&&A(R.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(A(R,SharedArrayBuffer)||R&&A(R.buffer,SharedArrayBuffer)))return b(R,r,s);if("number"==typeof R)throw new TypeError('The "value" argument must not be of type number. Received type number');var G=R.valueOf&&R.valueOf();if(null!=G&&G!==R)return d.from(G,r,s);var q=function L(R){if(d.isBuffer(R)){var r=0|k(R.length),s=T(r);return 0===s.length||R.copy(s,0,0,r),s}return void 0!==R.length?"number"!=typeof R.length||W(R.length)?T(0):O(R):"Buffer"===R.type&&Array.isArray(R.data)?O(R.data):void 0}(R);if(q)return q;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof R[Symbol.toPrimitive])return d.from(R[Symbol.toPrimitive]("string"),r,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R)}function y(R){if("number"!=typeof R)throw new TypeError('"size" argument must be of type number');if(R<0)throw new RangeError('The value "'+R+'" is invalid for option "size"')}function w(R){return y(R),T(R<0?0:0|k(R))}function O(R){for(var r=R.length<0?0:0|k(R.length),s=T(r),G=0;G<r;G+=1)s[G]=255&R[G];return s}function b(R,r,s){if(r<0||R.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(R.byteLength<r+(s||0))throw new RangeError('"length" is outside of buffer bounds');var G;return G=void 0===r&&void 0===s?new Uint8Array(R):void 0===s?new Uint8Array(R,r):new Uint8Array(R,r,s),Object.setPrototypeOf(G,d.prototype),G}function k(R){if(R>=v)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v.toString(16)+" bytes");return 0|R}function M(R,r){if(d.isBuffer(R))return R.length;if(ArrayBuffer.isView(R)||A(R,ArrayBuffer))return R.byteLength;if("string"!=typeof R)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof R);var s=R.length,G=arguments.length>2&&!0===arguments[2];if(!G&&0===s)return 0;for(var q=!1;;)switch(r){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return a(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*s;case"hex":return s>>>1;case"base64":return re(R).length;default:if(q)return G?-1:a(R).length;r=(""+r).toLowerCase(),q=!0}}function f(R,r,s){var G=!1;if((void 0===r||r<0)&&(r=0),r>this.length||((void 0===s||s>this.length)&&(s=this.length),s<=0)||(s>>>=0)<=(r>>>=0))return"";for(R||(R="utf8");;)switch(R){case"hex":return de(this,r,s);case"utf8":case"utf-8":return ne(this,r,s);case"ascii":return ie(this,r,s);case"latin1":case"binary":return ge(this,r,s);case"base64":return X(this,r,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ze(this,r,s);default:if(G)throw new TypeError("Unknown encoding: "+R);R=(R+"").toLowerCase(),G=!0}}function u(R,r,s){var G=R[r];R[r]=R[s],R[s]=G}function l(R,r,s,G,q){if(0===R.length)return-1;if("string"==typeof s?(G=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),W(s=+s)&&(s=q?0:R.length-1),s<0&&(s=R.length+s),s>=R.length){if(q)return-1;s=R.length-1}else if(s<0){if(!q)return-1;s=0}if("string"==typeof r&&(r=d.from(r,G)),d.isBuffer(r))return 0===r.length?-1:h(R,r,s,G,q);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?q?Uint8Array.prototype.indexOf.call(R,r,s):Uint8Array.prototype.lastIndexOf.call(R,r,s):h(R,[r],s,G,q);throw new TypeError("val must be string, number or Buffer")}function h(R,r,s,G,q){var Ne,ee=1,te=R.length,Me=r.length;if(void 0!==G&&("ucs2"===(G=String(G).toLowerCase())||"ucs-2"===G||"utf16le"===G||"utf-16le"===G)){if(R.length<2||r.length<2)return-1;ee=2,te/=2,Me/=2,s/=2}function Fe(qe,He){return 1===ee?qe[He]:qe.readUInt16BE(He*ee)}if(q){var ke=-1;for(Ne=s;Ne<te;Ne++)if(Fe(R,Ne)===Fe(r,-1===ke?0:Ne-ke)){if(-1===ke&&(ke=Ne),Ne-ke+1===Me)return ke*ee}else-1!==ke&&(Ne-=Ne-ke),ke=-1}else for(s+Me>te&&(s=te-Me),Ne=s;Ne>=0;Ne--){for(var Ie=!0,ze=0;ze<Me;ze++)if(Fe(R,Ne+ze)!==Fe(r,ze)){Ie=!1;break}if(Ie)return Ne}return-1}function e(R,r,s,G){s=Number(s)||0;var q=R.length-s;G?(G=Number(G))>q&&(G=q):G=q;var ee=r.length;G>ee/2&&(G=ee/2);for(var te=0;te<G;++te){var Me=parseInt(r.substr(2*te,2),16);if(W(Me))return te;R[s+te]=Me}return te}function E(R,r,s,G){return le(a(r,R.length-s),R,s,G)}function B(R,r,s,G){return le(function U(R){for(var r=[],s=0;s<R.length;++s)r.push(255&R.charCodeAt(s));return r}(r),R,s,G)}function I(R,r,s,G){return le(re(r),R,s,G)}function H(R,r,s,G){return le(function $(R,r){for(var s,G,ee=[],te=0;te<R.length&&!((r-=2)<0);++te)G=(s=R.charCodeAt(te))>>8,ee.push(s%256),ee.push(G);return ee}(r,R.length-s),R,s,G)}function X(R,r,s){return g.fromByteArray(0===r&&s===R.length?R:R.slice(r,s))}function ne(R,r,s){s=Math.min(R.length,s);for(var G=[],q=r;q<s;){var Fe,Ne,ke,Ie,ee=R[q],te=null,Me=ee>239?4:ee>223?3:ee>191?2:1;if(q+Me<=s)switch(Me){case 1:ee<128&&(te=ee);break;case 2:128==(192&(Fe=R[q+1]))&&(Ie=(31&ee)<<6|63&Fe)>127&&(te=Ie);break;case 3:Ne=R[q+2],128==(192&(Fe=R[q+1]))&&128==(192&Ne)&&(Ie=(15&ee)<<12|(63&Fe)<<6|63&Ne)>2047&&(Ie<55296||Ie>57343)&&(te=Ie);break;case 4:Ne=R[q+2],ke=R[q+3],128==(192&(Fe=R[q+1]))&&128==(192&Ne)&&128==(192&ke)&&(Ie=(15&ee)<<18|(63&Fe)<<12|(63&Ne)<<6|63&ke)>65535&&Ie<1114112&&(te=Ie)}null===te?(te=65533,Me=1):te>65535&&(G.push((te-=65536)>>>10&1023|55296),te=56320|1023&te),G.push(te),q+=Me}return function fe(R){var r=R.length;if(r<=ue)return String.fromCharCode.apply(String,R);for(var s="",G=0;G<r;)s+=String.fromCharCode.apply(String,R.slice(G,G+=ue));return s}(G)}Y.kMaxLength=v,!(d.TYPED_ARRAY_SUPPORT=function Z(){try{var R=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(R,r),42===R.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(R,r,s){return m(R,r,s)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(R,r,s){return function N(R,r,s){return y(R),R<=0?T(R):void 0!==r?"string"==typeof s?T(R).fill(r,s):T(R).fill(r):T(R)}(R,r,s)},d.allocUnsafe=function(R){return w(R)},d.allocUnsafeSlow=function(R){return w(R)},d.isBuffer=function(r){return null!=r&&!0===r._isBuffer&&r!==d.prototype},d.compare=function(r,s){if(A(r,Uint8Array)&&(r=d.from(r,r.offset,r.byteLength)),A(s,Uint8Array)&&(s=d.from(s,s.offset,s.byteLength)),!d.isBuffer(r)||!d.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===s)return 0;for(var G=r.length,q=s.length,ee=0,te=Math.min(G,q);ee<te;++ee)if(r[ee]!==s[ee]){G=r[ee],q=s[ee];break}return G<q?-1:q<G?1:0},d.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(r,s){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(0===r.length)return d.alloc(0);var G;if(void 0===s)for(s=0,G=0;G<r.length;++G)s+=r[G].length;var q=d.allocUnsafe(s),ee=0;for(G=0;G<r.length;++G){var te=r[G];if(A(te,Uint8Array))ee+te.length>q.length?d.from(te).copy(q,ee):Uint8Array.prototype.set.call(q,te,ee);else{if(!d.isBuffer(te))throw new TypeError('"list" argument must be an Array of Buffers');te.copy(q,ee)}ee+=te.length}return q},d.byteLength=M,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var r=this.length;if(r%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var s=0;s<r;s+=2)u(this,s,s+1);return this},d.prototype.swap32=function(){var r=this.length;if(r%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var s=0;s<r;s+=4)u(this,s,s+3),u(this,s+1,s+2);return this},d.prototype.swap64=function(){var r=this.length;if(r%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var s=0;s<r;s+=8)u(this,s,s+7),u(this,s+1,s+6),u(this,s+2,s+5),u(this,s+3,s+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var r=this.length;return 0===r?"":0===arguments.length?ne(this,0,r):f.apply(this,arguments)},d.prototype.equals=function(r){if(!d.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||0===d.compare(this,r)},d.prototype.inspect=function(){var r="",s=Y.INSPECT_MAX_BYTES;return r=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(r+=" ... "),"<Buffer "+r+">"},P&&(d.prototype[P]=d.prototype.inspect),d.prototype.compare=function(r,s,G,q,ee){if(A(r,Uint8Array)&&(r=d.from(r,r.offset,r.byteLength)),!d.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(void 0===s&&(s=0),void 0===G&&(G=r?r.length:0),void 0===q&&(q=0),void 0===ee&&(ee=this.length),s<0||G>r.length||q<0||ee>this.length)throw new RangeError("out of range index");if(q>=ee&&s>=G)return 0;if(q>=ee)return-1;if(s>=G)return 1;if(this===r)return 0;for(var te=(ee>>>=0)-(q>>>=0),Me=(G>>>=0)-(s>>>=0),Fe=Math.min(te,Me),Ne=this.slice(q,ee),ke=r.slice(s,G),Ie=0;Ie<Fe;++Ie)if(Ne[Ie]!==ke[Ie]){te=Ne[Ie],Me=ke[Ie];break}return te<Me?-1:Me<te?1:0},d.prototype.includes=function(r,s,G){return-1!==this.indexOf(r,s,G)},d.prototype.indexOf=function(r,s,G){return l(this,r,s,G,!0)},d.prototype.lastIndexOf=function(r,s,G){return l(this,r,s,G,!1)},d.prototype.write=function(r,s,G,q){if(void 0===s)q="utf8",G=this.length,s=0;else if(void 0===G&&"string"==typeof s)q=s,G=this.length,s=0;else{if(!isFinite(s))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");s>>>=0,isFinite(G)?(G>>>=0,void 0===q&&(q="utf8")):(q=G,G=void 0)}var ee=this.length-s;if((void 0===G||G>ee)&&(G=ee),r.length>0&&(G<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");for(var te=!1;;)switch(q){case"hex":return e(this,r,s,G);case"utf8":case"utf-8":return E(this,r,s,G);case"ascii":case"latin1":case"binary":return B(this,r,s,G);case"base64":return I(this,r,s,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,r,s,G);default:if(te)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),te=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ue=4096;function ie(R,r,s){var G="";s=Math.min(R.length,s);for(var q=r;q<s;++q)G+=String.fromCharCode(127&R[q]);return G}function ge(R,r,s){var G="";s=Math.min(R.length,s);for(var q=r;q<s;++q)G+=String.fromCharCode(R[q]);return G}function de(R,r,s){var G=R.length;(!r||r<0)&&(r=0),(!s||s<0||s>G)&&(s=G);for(var q="",ee=r;ee<s;++ee)q+=V[R[ee]];return q}function Ze(R,r,s){for(var G=R.slice(r,s),q="",ee=0;ee<G.length-1;ee+=2)q+=String.fromCharCode(G[ee]+256*G[ee+1]);return q}function pe(R,r,s){if(R%1!=0||R<0)throw new RangeError("offset is not uint");if(R+r>s)throw new RangeError("Trying to access beyond buffer length")}function he(R,r,s,G,q,ee){if(!d.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>q||r<ee)throw new RangeError('"value" argument is out of bounds');if(s+G>R.length)throw new RangeError("Index out of range")}function we(R,r,s,G,q,ee){if(s+G>R.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function Ae(R,r,s,G,q){return r=+r,s>>>=0,q||we(R,0,s,4),_.write(R,r,s,G,23,4),s+4}function Pe(R,r,s,G,q){return r=+r,s>>>=0,q||we(R,0,s,8),_.write(R,r,s,G,52,8),s+8}d.prototype.slice=function(r,s){var G=this.length;(r=~~r)<0?(r+=G)<0&&(r=0):r>G&&(r=G),(s=void 0===s?G:~~s)<0?(s+=G)<0&&(s=0):s>G&&(s=G),s<r&&(s=r);var q=this.subarray(r,s);return Object.setPrototypeOf(q,d.prototype),q},d.prototype.readUintLE=d.prototype.readUIntLE=function(r,s,G){r>>>=0,s>>>=0,G||pe(r,s,this.length);for(var q=this[r],ee=1,te=0;++te<s&&(ee*=256);)q+=this[r+te]*ee;return q},d.prototype.readUintBE=d.prototype.readUIntBE=function(r,s,G){r>>>=0,s>>>=0,G||pe(r,s,this.length);for(var q=this[r+--s],ee=1;s>0&&(ee*=256);)q+=this[r+--s]*ee;return q},d.prototype.readUint8=d.prototype.readUInt8=function(r,s){return r>>>=0,s||pe(r,1,this.length),this[r]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(r,s){return r>>>=0,s||pe(r,2,this.length),this[r]|this[r+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(r,s){return r>>>=0,s||pe(r,2,this.length),this[r]<<8|this[r+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(r,s){return r>>>=0,s||pe(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(r,s){return r>>>=0,s||pe(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},d.prototype.readIntLE=function(r,s,G){r>>>=0,s>>>=0,G||pe(r,s,this.length);for(var q=this[r],ee=1,te=0;++te<s&&(ee*=256);)q+=this[r+te]*ee;return q>=(ee*=128)&&(q-=Math.pow(2,8*s)),q},d.prototype.readIntBE=function(r,s,G){r>>>=0,s>>>=0,G||pe(r,s,this.length);for(var q=s,ee=1,te=this[r+--q];q>0&&(ee*=256);)te+=this[r+--q]*ee;return te>=(ee*=128)&&(te-=Math.pow(2,8*s)),te},d.prototype.readInt8=function(r,s){return r>>>=0,s||pe(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},d.prototype.readInt16LE=function(r,s){r>>>=0,s||pe(r,2,this.length);var G=this[r]|this[r+1]<<8;return 32768&G?4294901760|G:G},d.prototype.readInt16BE=function(r,s){r>>>=0,s||pe(r,2,this.length);var G=this[r+1]|this[r]<<8;return 32768&G?4294901760|G:G},d.prototype.readInt32LE=function(r,s){return r>>>=0,s||pe(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},d.prototype.readInt32BE=function(r,s){return r>>>=0,s||pe(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},d.prototype.readFloatLE=function(r,s){return r>>>=0,s||pe(r,4,this.length),_.read(this,r,!0,23,4)},d.prototype.readFloatBE=function(r,s){return r>>>=0,s||pe(r,4,this.length),_.read(this,r,!1,23,4)},d.prototype.readDoubleLE=function(r,s){return r>>>=0,s||pe(r,8,this.length),_.read(this,r,!0,52,8)},d.prototype.readDoubleBE=function(r,s){return r>>>=0,s||pe(r,8,this.length),_.read(this,r,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(r,s,G,q){r=+r,s>>>=0,G>>>=0,q||he(this,r,s,G,Math.pow(2,8*G)-1,0);var te=1,Me=0;for(this[s]=255&r;++Me<G&&(te*=256);)this[s+Me]=r/te&255;return s+G},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(r,s,G,q){r=+r,s>>>=0,G>>>=0,q||he(this,r,s,G,Math.pow(2,8*G)-1,0);var te=G-1,Me=1;for(this[s+te]=255&r;--te>=0&&(Me*=256);)this[s+te]=r/Me&255;return s+G},d.prototype.writeUint8=d.prototype.writeUInt8=function(r,s,G){return r=+r,s>>>=0,G||he(this,r,s,1,255,0),this[s]=255&r,s+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(r,s,G){return r=+r,s>>>=0,G||he(this,r,s,2,65535,0),this[s]=255&r,this[s+1]=r>>>8,s+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(r,s,G){return r=+r,s>>>=0,G||he(this,r,s,2,65535,0),this[s]=r>>>8,this[s+1]=255&r,s+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(r,s,G){return r=+r,s>>>=0,G||he(this,r,s,4,4294967295,0),this[s+3]=r>>>24,this[s+2]=r>>>16,this[s+1]=r>>>8,this[s]=255&r,s+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(r,s,G){return r=+r,s>>>=0,G||he(this,r,s,4,4294967295,0),this[s]=r>>>24,this[s+1]=r>>>16,this[s+2]=r>>>8,this[s+3]=255&r,s+4},d.prototype.writeIntLE=function(r,s,G,q){if(r=+r,s>>>=0,!q){var ee=Math.pow(2,8*G-1);he(this,r,s,G,ee-1,-ee)}var te=0,Me=1,Fe=0;for(this[s]=255&r;++te<G&&(Me*=256);)r<0&&0===Fe&&0!==this[s+te-1]&&(Fe=1),this[s+te]=(r/Me>>0)-Fe&255;return s+G},d.prototype.writeIntBE=function(r,s,G,q){if(r=+r,s>>>=0,!q){var ee=Math.pow(2,8*G-1);he(this,r,s,G,ee-1,-ee)}var te=G-1,Me=1,Fe=0;for(this[s+te]=255&r;--te>=0&&(Me*=256);)r<0&&0===Fe&&0!==this[s+te+1]&&(Fe=1),this[s+te]=(r/Me>>0)-Fe&255;return s+G},d.prototype.writeInt8=function(r,s,G){return r=+r,s>>>=0,G||he(this,r,s,1,127,-128),r<0&&(r=255+r+1),this[s]=255&r,s+1},d.prototype.writeInt16LE=function(r,s,G){return r=+r,s>>>=0,G||he(this,r,s,2,32767,-32768),this[s]=255&r,this[s+1]=r>>>8,s+2},d.prototype.writeInt16BE=function(r,s,G){return r=+r,s>>>=0,G||he(this,r,s,2,32767,-32768),this[s]=r>>>8,this[s+1]=255&r,s+2},d.prototype.writeInt32LE=function(r,s,G){return r=+r,s>>>=0,G||he(this,r,s,4,2147483647,-2147483648),this[s]=255&r,this[s+1]=r>>>8,this[s+2]=r>>>16,this[s+3]=r>>>24,s+4},d.prototype.writeInt32BE=function(r,s,G){return r=+r,s>>>=0,G||he(this,r,s,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[s]=r>>>24,this[s+1]=r>>>16,this[s+2]=r>>>8,this[s+3]=255&r,s+4},d.prototype.writeFloatLE=function(r,s,G){return Ae(this,r,s,!0,G)},d.prototype.writeFloatBE=function(r,s,G){return Ae(this,r,s,!1,G)},d.prototype.writeDoubleLE=function(r,s,G){return Pe(this,r,s,!0,G)},d.prototype.writeDoubleBE=function(r,s,G){return Pe(this,r,s,!1,G)},d.prototype.copy=function(r,s,G,q){if(!d.isBuffer(r))throw new TypeError("argument should be a Buffer");if(G||(G=0),!q&&0!==q&&(q=this.length),s>=r.length&&(s=r.length),s||(s=0),q>0&&q<G&&(q=G),q===G||0===r.length||0===this.length)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),r.length-s<q-G&&(q=r.length-s+G);var ee=q-G;return this===r&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(s,G,q):Uint8Array.prototype.set.call(r,this.subarray(G,q),s),ee},d.prototype.fill=function(r,s,G,q){if("string"==typeof r){if("string"==typeof s?(q=s,s=0,G=this.length):"string"==typeof G&&(q=G,G=this.length),void 0!==q&&"string"!=typeof q)throw new TypeError("encoding must be a string");if("string"==typeof q&&!d.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(1===r.length){var ee=r.charCodeAt(0);("utf8"===q&&ee<128||"latin1"===q)&&(r=ee)}}else"number"==typeof r?r&=255:"boolean"==typeof r&&(r=Number(r));if(s<0||this.length<s||this.length<G)throw new RangeError("Out of range index");if(G<=s)return this;var te;if(s>>>=0,G=void 0===G?this.length:G>>>0,r||(r=0),"number"==typeof r)for(te=s;te<G;++te)this[te]=r;else{var Me=d.isBuffer(r)?r:d.from(r,q),Fe=Me.length;if(0===Fe)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(te=0;te<G-s;++te)this[te+s]=Me[te%Fe]}return this};var We=/[^+/0-9A-Za-z-_]/g;function a(R,r){r=r||1/0;for(var s,G=R.length,q=null,ee=[],te=0;te<G;++te){if((s=R.charCodeAt(te))>55295&&s<57344){if(!q){if(s>56319){(r-=3)>-1&&ee.push(239,191,189);continue}if(te+1===G){(r-=3)>-1&&ee.push(239,191,189);continue}q=s;continue}if(s<56320){(r-=3)>-1&&ee.push(239,191,189),q=s;continue}s=65536+(q-55296<<10|s-56320)}else q&&(r-=3)>-1&&ee.push(239,191,189);if(q=null,s<128){if((r-=1)<0)break;ee.push(s)}else if(s<2048){if((r-=2)<0)break;ee.push(s>>6|192,63&s|128)}else if(s<65536){if((r-=3)<0)break;ee.push(s>>12|224,s>>6&63|128,63&s|128)}else{if(!(s<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;ee.push(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}}return ee}function re(R){return g.toByteArray(function C(R){if((R=(R=R.split("=")[0]).trim().replace(We,"")).length<2)return"";for(;R.length%4!=0;)R+="=";return R}(R))}function le(R,r,s,G){for(var q=0;q<G&&!(q+s>=r.length||q>=R.length);++q)r[q+s]=R[q];return q}function A(R,r){return R instanceof r||null!=R&&null!=R.constructor&&null!=R.constructor.name&&R.constructor.name===r.name}function W(R){return R!=R}var V=function(){for(var R="0123456789abcdef",r=new Array(256),s=0;s<16;++s)for(var G=16*s,q=0;q<16;++q)r[G+q]=R[s]+R[q];return r}()},93105:K=>{"use strict";var g,Y="object"==typeof Reflect?Reflect:null,p=Y&&"function"==typeof Y.apply?Y.apply:function(f,u,l){return Function.prototype.apply.call(f,u,l)};g=Y&&"function"==typeof Y.ownKeys?Y.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};var P=Number.isNaN||function(f){return f!=f};function v(){v.init.call(this)}K.exports=v,K.exports.once=function L(M,f){return new Promise(function(u,l){function h(E){M.removeListener(f,e),l(E)}function e(){"function"==typeof M.removeListener&&M.removeListener("error",h),u([].slice.call(arguments))}S(M,f,e,{once:!0}),"error"!==f&&function k(M,f,u){"function"==typeof M.on&&S(M,"error",f,u)}(M,h,{once:!0})})},v.EventEmitter=v,v.prototype._events=void 0,v.prototype._eventsCount=0,v.prototype._maxListeners=void 0;var Z=10;function T(M){if("function"!=typeof M)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof M)}function d(M){return void 0===M._maxListeners?v.defaultMaxListeners:M._maxListeners}function m(M,f,u,l){var h,e,E;if(T(u),void 0===(e=M._events)?(e=M._events=Object.create(null),M._eventsCount=0):(void 0!==e.newListener&&(M.emit("newListener",f,u.listener?u.listener:u),e=M._events),E=e[f]),void 0===E)E=e[f]=u,++M._eventsCount;else if("function"==typeof E?E=e[f]=l?[u,E]:[E,u]:l?E.unshift(u):E.push(u),(h=d(M))>0&&E.length>h&&!E.warned){E.warned=!0;var B=new Error("Possible EventEmitter memory leak detected. "+E.length+" "+String(f)+" listeners added. Use emitter.setMaxListeners() to increase limit");B.name="MaxListenersExceededWarning",B.emitter=M,B.type=f,B.count=E.length,function _(M){console&&console.warn&&console.warn(M)}(B)}return M}function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function N(M,f,u){var l={fired:!1,wrapFn:void 0,target:M,type:f,listener:u},h=y.bind(l);return h.listener=u,l.wrapFn=h,h}function w(M,f,u){var l=M._events;if(void 0===l)return[];var h=l[f];return void 0===h?[]:"function"==typeof h?u?[h.listener||h]:[h]:u?function b(M){for(var f=new Array(M.length),u=0;u<f.length;++u)f[u]=M[u].listener||M[u];return f}(h):O(h,h.length)}function x(M){var f=this._events;if(void 0!==f){var u=f[M];if("function"==typeof u)return 1;if(void 0!==u)return u.length}return 0}function O(M,f){for(var u=new Array(f),l=0;l<f;++l)u[l]=M[l];return u}function S(M,f,u,l){if("function"==typeof M.on)l.once?M.once(f,u):M.on(f,u);else{if("function"!=typeof M.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof M);M.addEventListener(f,function h(e){l.once&&M.removeEventListener(f,h),u(e)})}}Object.defineProperty(v,"defaultMaxListeners",{enumerable:!0,get:function(){return Z},set:function(M){if("number"!=typeof M||M<0||P(M))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+M+".");Z=M}}),v.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},v.prototype.setMaxListeners=function(f){if("number"!=typeof f||f<0||P(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+f+".");return this._maxListeners=f,this},v.prototype.getMaxListeners=function(){return d(this)},v.prototype.emit=function(f){for(var u=[],l=1;l<arguments.length;l++)u.push(arguments[l]);var h="error"===f,e=this._events;if(void 0!==e)h=h&&void 0===e.error;else if(!h)return!1;if(h){var E;if(u.length>0&&(E=u[0]),E instanceof Error)throw E;var B=new Error("Unhandled error."+(E?" ("+E.message+")":""));throw B.context=E,B}var I=e[f];if(void 0===I)return!1;if("function"==typeof I)p(I,this,u);else{var H=I.length,X=O(I,H);for(l=0;l<H;++l)p(X[l],this,u)}return!0},v.prototype.on=v.prototype.addListener=function(f,u){return m(this,f,u,!1)},v.prototype.prependListener=function(f,u){return m(this,f,u,!0)},v.prototype.once=function(f,u){return T(u),this.on(f,N(this,f,u)),this},v.prototype.prependOnceListener=function(f,u){return T(u),this.prependListener(f,N(this,f,u)),this},v.prototype.off=v.prototype.removeListener=function(f,u){var l,h,e,E,B;if(T(u),void 0===(h=this._events))return this;if(void 0===(l=h[f]))return this;if(l===u||l.listener===u)0==--this._eventsCount?this._events=Object.create(null):(delete h[f],h.removeListener&&this.emit("removeListener",f,l.listener||u));else if("function"!=typeof l){for(e=-1,E=l.length-1;E>=0;E--)if(l[E]===u||l[E].listener===u){B=l[E].listener,e=E;break}if(e<0)return this;0===e?l.shift():function D(M,f){for(;f+1<M.length;f++)M[f]=M[f+1];M.pop()}(l,e),1===l.length&&(h[f]=l[0]),void 0!==h.removeListener&&this.emit("removeListener",f,B||u)}return this},v.prototype.removeAllListeners=function(f){var u,l,h;if(void 0===(l=this._events))return this;if(void 0===l.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==l[f]&&(0==--this._eventsCount?this._events=Object.create(null):delete l[f]),this;if(0===arguments.length){var E,e=Object.keys(l);for(h=0;h<e.length;++h)"removeListener"!==(E=e[h])&&this.removeAllListeners(E);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(u=l[f]))this.removeListener(f,u);else if(void 0!==u)for(h=u.length-1;h>=0;h--)this.removeListener(f,u[h]);return this},v.prototype.listeners=function(f){return w(this,f,!0)},v.prototype.rawListeners=function(f){return w(this,f,!1)},v.listenerCount=function(M,f){return"function"==typeof M.listenerCount?M.listenerCount(f):x.call(M,f)},v.prototype.listenerCount=x,v.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},59879:K=>{K.exports="function"==typeof Object.create?function(p,g){g&&(p.super_=g,p.prototype=Object.create(g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}))}:function(p,g){if(g){p.super_=g;var _=function(){};_.prototype=g.prototype,p.prototype=new _,p.prototype.constructor=p}}},48230:K=>{"use strict";var p={};function g(T,d,m){m||(m=Error);var N=function(w){function x(O,D,b){return w.call(this,function y(w,x,O){return"string"==typeof d?d:d(w,x,O)}(O,D,b))||this}return function Y(T,d){T.prototype=Object.create(d.prototype),T.prototype.constructor=T,T.__proto__=d}(x,w),x}(m);N.prototype.name=m.name,N.prototype.code=T,p[T]=N}function _(T,d){if(Array.isArray(T)){var m=T.length;return T=T.map(function(y){return String(y)}),m>2?"one of ".concat(d," ").concat(T.slice(0,m-1).join(", "),", or ")+T[m-1]:2===m?"one of ".concat(d," ").concat(T[0]," or ").concat(T[1]):"of ".concat(d," ").concat(T[0])}return"of ".concat(d," ").concat(String(T))}g("ERR_INVALID_OPT_VALUE",function(T,d){return'The value "'+d+'" is invalid for option "'+T+'"'},TypeError),g("ERR_INVALID_ARG_TYPE",function(T,d,m){var y,N;if("string"==typeof d&&function P(T,d,m){return T.substr(!m||m<0?0:+m,d.length)===d}(d,"not ")?(y="must not be",d=d.replace(/^not /,"")):y="must be",function v(T,d,m){return(void 0===m||m>T.length)&&(m=T.length),T.substring(m-d.length,m)===d}(T," argument"))N="The ".concat(T," ").concat(y," ").concat(_(d,"type"));else{var w=function Z(T,d,m){return"number"!=typeof m&&(m=0),!(m+d.length>T.length)&&-1!==T.indexOf(d,m)}(T,".")?"property":"argument";N='The "'.concat(T,'" ').concat(w," ").concat(y," ").concat(_(d,"type"))}return N+". Received type ".concat(typeof m)},TypeError),g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),g("ERR_METHOD_NOT_IMPLEMENTED",function(T){return"The "+T+" method is not implemented"}),g("ERR_STREAM_PREMATURE_CLOSE","Premature close"),g("ERR_STREAM_DESTROYED",function(T){return"Cannot call "+T+" after a stream was destroyed"}),g("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),g("ERR_STREAM_WRITE_AFTER_END","write after end"),g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),g("ERR_UNKNOWN_ENCODING",function(T){return"Unknown encoding: "+T},TypeError),g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),K.exports.q=p},20942:(K,Y,p)=>{"use strict";var g=Object.keys||function(N){var w=[];for(var x in N)w.push(x);return w};K.exports=d;var _=p(32833),P=p(37807);p(59879)(d,_);for(var v=g(P.prototype),Z=0;Z<v.length;Z++){var T=v[Z];d.prototype[T]||(d.prototype[T]=P.prototype[T])}function d(N){if(!(this instanceof d))return new d(N);_.call(this,N),P.call(this,N),this.allowHalfOpen=!0,N&&(!1===N.readable&&(this.readable=!1),!1===N.writable&&(this.writable=!1),!1===N.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",m)))}function m(){this._writableState.ended||process.nextTick(y,this)}function y(N){N.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(w){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=w,this._writableState.destroyed=w)}})},90619:(K,Y,p)=>{"use strict";K.exports=_;var g=p(55431);function _(P){if(!(this instanceof _))return new _(P);g.call(this,P)}p(59879)(_,g),_.prototype._transform=function(P,v,Z){Z(null,P)}},32833:(K,Y,p)=>{"use strict";var g;K.exports=I,I.ReadableState=B,p(93105);var N,P=function(W,V){return W.listeners(V).length},v=p(75112),Z=p(3875).Buffer,T=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},y=p(94616);N=y&&y.debuglog?y.debuglog("stream"):function(){};var f,u,l,w=p(39370),x=p(10806),D=p(12903).getHighWaterMark,b=p(48230).q,L=b.ERR_INVALID_ARG_TYPE,k=b.ERR_STREAM_PUSH_AFTER_EOF,S=b.ERR_METHOD_NOT_IMPLEMENTED,M=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;p(59879)(I,v);var h=x.errorOrDestroy,e=["error","close","destroy","pause","resume"];function B(A,W,V){g=g||p(20942),"boolean"!=typeof V&&(V=W instanceof g),this.objectMode=!!(A=A||{}).objectMode,V&&(this.objectMode=this.objectMode||!!A.readableObjectMode),this.highWaterMark=D(this,A,"readableHighWaterMark",V),this.buffer=new w,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==A.emitClose,this.autoDestroy=!!A.autoDestroy,this.destroyed=!1,this.defaultEncoding=A.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(f||(f=p(32519).s),this.decoder=new f(A.encoding),this.encoding=A.encoding)}function I(A){if(g=g||p(20942),!(this instanceof I))return new I(A);this._readableState=new B(A,this,this instanceof g),this.readable=!0,A&&("function"==typeof A.read&&(this._read=A.read),"function"==typeof A.destroy&&(this._destroy=A.destroy)),v.call(this)}function H(A,W,V,R,r){N("readableAddChunk",W);var G,s=A._readableState;if(null===W)s.reading=!1,function ge(A,W){if(N("onEofChunk"),!W.ended){if(W.decoder){var V=W.decoder.end();V&&V.length&&(W.buffer.push(V),W.length+=W.objectMode?1:V.length)}W.ended=!0,W.sync?de(A):(W.needReadable=!1,W.emittedReadable||(W.emittedReadable=!0,Ze(A)))}}(A,s);else if(r||(G=function ne(A,W){var V;return!function m(A){return Z.isBuffer(A)||A instanceof T}(W)&&"string"!=typeof W&&void 0!==W&&!A.objectMode&&(V=new L("chunk",["string","Buffer","Uint8Array"],W)),V}(s,W)),G)h(A,G);else if(s.objectMode||W&&W.length>0)if("string"!=typeof W&&!s.objectMode&&Object.getPrototypeOf(W)!==Z.prototype&&(W=function d(A){return Z.from(A)}(W)),R)s.endEmitted?h(A,new M):X(A,s,W,!0);else if(s.ended)h(A,new k);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!V?(W=s.decoder.write(W),s.objectMode||0!==W.length?X(A,s,W,!1):pe(A,s)):X(A,s,W,!1)}else R||(s.reading=!1,pe(A,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function X(A,W,V,R){W.flowing&&0===W.length&&!W.sync?(W.awaitDrain=0,A.emit("data",V)):(W.length+=W.objectMode?1:V.length,R?W.buffer.unshift(V):W.buffer.push(V),W.needReadable&&de(A)),pe(A,W)}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(W){this._readableState&&(this._readableState.destroyed=W)}}),I.prototype.destroy=x.destroy,I.prototype._undestroy=x.undestroy,I.prototype._destroy=function(A,W){W(A)},I.prototype.push=function(A,W){var R,V=this._readableState;return V.objectMode?R=!0:"string"==typeof A&&((W=W||V.defaultEncoding)!==V.encoding&&(A=Z.from(A,W),W=""),R=!0),H(this,A,W,!1,R)},I.prototype.unshift=function(A){return H(this,A,null,!0,!1)},I.prototype.isPaused=function(){return!1===this._readableState.flowing},I.prototype.setEncoding=function(A){f||(f=p(32519).s);var W=new f(A);this._readableState.decoder=W,this._readableState.encoding=this._readableState.decoder.encoding;for(var V=this._readableState.buffer.head,R="";null!==V;)R+=W.write(V.data),V=V.next;return this._readableState.buffer.clear(),""!==R&&this._readableState.buffer.push(R),this._readableState.length=R.length,this};var ue=1073741824;function ie(A,W){return A<=0||0===W.length&&W.ended?0:W.objectMode?1:A!=A?W.flowing&&W.length?W.buffer.head.data.length:W.length:(A>W.highWaterMark&&(W.highWaterMark=function fe(A){return A>=ue?A=ue:(A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++),A}(A)),A<=W.length?A:W.ended?W.length:(W.needReadable=!0,0))}function de(A){var W=A._readableState;N("emitReadable",W.needReadable,W.emittedReadable),W.needReadable=!1,W.emittedReadable||(N("emitReadable",W.flowing),W.emittedReadable=!0,process.nextTick(Ze,A))}function Ze(A){var W=A._readableState;N("emitReadable_",W.destroyed,W.length,W.ended),!W.destroyed&&(W.length||W.ended)&&(A.emit("readable"),W.emittedReadable=!1),W.needReadable=!W.flowing&&!W.ended&&W.length<=W.highWaterMark,a(A)}function pe(A,W){W.readingMore||(W.readingMore=!0,process.nextTick(he,A,W))}function he(A,W){for(;!W.reading&&!W.ended&&(W.length<W.highWaterMark||W.flowing&&0===W.length);){var V=W.length;if(N("maybeReadMore read 0"),A.read(0),V===W.length)break}W.readingMore=!1}function Ae(A){var W=A._readableState;W.readableListening=A.listenerCount("readable")>0,W.resumeScheduled&&!W.paused?W.flowing=!0:A.listenerCount("data")>0&&A.resume()}function Pe(A){N("readable nexttick read 0"),A.read(0)}function C(A,W){N("resume",W.reading),W.reading||A.read(0),W.resumeScheduled=!1,A.emit("resume"),a(A),W.flowing&&!W.reading&&A.read(0)}function a(A){var W=A._readableState;for(N("flow",W.flowing);W.flowing&&null!==A.read(););}function U(A,W){return 0===W.length?null:(W.objectMode?V=W.buffer.shift():!A||A>=W.length?(V=W.decoder?W.buffer.join(""):1===W.buffer.length?W.buffer.first():W.buffer.concat(W.length),W.buffer.clear()):V=W.buffer.consume(A,W.decoder),V);var V}function $(A){var W=A._readableState;N("endReadable",W.endEmitted),W.endEmitted||(W.ended=!0,process.nextTick(re,W,A))}function re(A,W){if(N("endReadableNT",A.endEmitted,A.length),!A.endEmitted&&0===A.length&&(A.endEmitted=!0,W.readable=!1,W.emit("end"),A.autoDestroy)){var V=W._writableState;(!V||V.autoDestroy&&V.finished)&&W.destroy()}}function le(A,W){for(var V=0,R=A.length;V<R;V++)if(A[V]===W)return V;return-1}I.prototype.read=function(A){N("read",A),A=parseInt(A,10);var W=this._readableState,V=A;if(0!==A&&(W.emittedReadable=!1),0===A&&W.needReadable&&((0!==W.highWaterMark?W.length>=W.highWaterMark:W.length>0)||W.ended))return N("read: emitReadable",W.length,W.ended),0===W.length&&W.ended?$(this):de(this),null;if(0===(A=ie(A,W))&&W.ended)return 0===W.length&&$(this),null;var r,R=W.needReadable;return N("need readable",R),(0===W.length||W.length-A<W.highWaterMark)&&N("length less than watermark",R=!0),W.ended||W.reading?N("reading or ended",R=!1):R&&(N("do read"),W.reading=!0,W.sync=!0,0===W.length&&(W.needReadable=!0),this._read(W.highWaterMark),W.sync=!1,W.reading||(A=ie(V,W))),null===(r=A>0?U(A,W):null)?(W.needReadable=W.length<=W.highWaterMark,A=0):(W.length-=A,W.awaitDrain=0),0===W.length&&(W.ended||(W.needReadable=!0),V!==A&&W.ended&&$(this)),null!==r&&this.emit("data",r),r},I.prototype._read=function(A){h(this,new S("_read()"))},I.prototype.pipe=function(A,W){var V=this,R=this._readableState;switch(R.pipesCount){case 0:R.pipes=A;break;case 1:R.pipes=[R.pipes,A];break;default:R.pipes.push(A)}R.pipesCount+=1,N("pipe count=%d opts=%j",R.pipesCount,W);var s=W&&!1===W.end||A===process.stdout||A===process.stderr?ze:q;function q(){N("onend"),A.end()}R.endEmitted?process.nextTick(s):V.once("end",s),A.on("unpipe",function G(qe,He){N("onunpipe"),qe===V&&He&&!1===He.hasUnpiped&&(He.hasUnpiped=!0,function Me(){N("cleanup"),A.removeListener("close",ke),A.removeListener("finish",Ie),A.removeListener("drain",ee),A.removeListener("error",Ne),A.removeListener("unpipe",G),V.removeListener("end",q),V.removeListener("end",ze),V.removeListener("data",Fe),te=!0,R.awaitDrain&&(!A._writableState||A._writableState.needDrain)&&ee()}())});var ee=function we(A){return function(){var V=A._readableState;N("pipeOnDrain",V.awaitDrain),V.awaitDrain&&V.awaitDrain--,0===V.awaitDrain&&P(A,"data")&&(V.flowing=!0,a(A))}}(V);A.on("drain",ee);var te=!1;function Fe(qe){N("ondata");var He=A.write(qe);N("dest.write",He),!1===He&&((1===R.pipesCount&&R.pipes===A||R.pipesCount>1&&-1!==le(R.pipes,A))&&!te&&(N("false write response, pause",R.awaitDrain),R.awaitDrain++),V.pause())}function Ne(qe){N("onerror",qe),ze(),A.removeListener("error",Ne),0===P(A,"error")&&h(A,qe)}function ke(){A.removeListener("finish",Ie),ze()}function Ie(){N("onfinish"),A.removeListener("close",ke),ze()}function ze(){N("unpipe"),V.unpipe(A)}return V.on("data",Fe),function E(A,W,V){if("function"==typeof A.prependListener)return A.prependListener(W,V);A._events&&A._events[W]?Array.isArray(A._events[W])?A._events[W].unshift(V):A._events[W]=[V,A._events[W]]:A.on(W,V)}(A,"error",Ne),A.once("close",ke),A.once("finish",Ie),A.emit("pipe",V),R.flowing||(N("pipe resume"),V.resume()),A},I.prototype.unpipe=function(A){var W=this._readableState,V={hasUnpiped:!1};if(0===W.pipesCount)return this;if(1===W.pipesCount)return A&&A!==W.pipes||(A||(A=W.pipes),W.pipes=null,W.pipesCount=0,W.flowing=!1,A&&A.emit("unpipe",this,V)),this;if(!A){var R=W.pipes,r=W.pipesCount;W.pipes=null,W.pipesCount=0,W.flowing=!1;for(var s=0;s<r;s++)R[s].emit("unpipe",this,{hasUnpiped:!1});return this}var G=le(W.pipes,A);return-1===G||(W.pipes.splice(G,1),W.pipesCount-=1,1===W.pipesCount&&(W.pipes=W.pipes[0]),A.emit("unpipe",this,V)),this},I.prototype.addListener=I.prototype.on=function(A,W){var V=v.prototype.on.call(this,A,W),R=this._readableState;return"data"===A?(R.readableListening=this.listenerCount("readable")>0,!1!==R.flowing&&this.resume()):"readable"===A&&!R.endEmitted&&!R.readableListening&&(R.readableListening=R.needReadable=!0,R.flowing=!1,R.emittedReadable=!1,N("on readable",R.length,R.reading),R.length?de(this):R.reading||process.nextTick(Pe,this)),V},I.prototype.removeListener=function(A,W){var V=v.prototype.removeListener.call(this,A,W);return"readable"===A&&process.nextTick(Ae,this),V},I.prototype.removeAllListeners=function(A){var W=v.prototype.removeAllListeners.apply(this,arguments);return("readable"===A||void 0===A)&&process.nextTick(Ae,this),W},I.prototype.resume=function(){var A=this._readableState;return A.flowing||(N("resume"),A.flowing=!A.readableListening,function We(A,W){W.resumeScheduled||(W.resumeScheduled=!0,process.nextTick(C,A,W))}(this,A)),A.paused=!1,this},I.prototype.pause=function(){return N("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(N("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},I.prototype.wrap=function(A){var W=this,V=this._readableState,R=!1;for(var r in A.on("end",function(){if(N("wrapped end"),V.decoder&&!V.ended){var G=V.decoder.end();G&&G.length&&W.push(G)}W.push(null)}),A.on("data",function(G){N("wrapped data"),V.decoder&&(G=V.decoder.write(G)),V.objectMode&&null==G||!(V.objectMode||G&&G.length)||W.push(G)||(R=!0,A.pause())}),A)void 0===this[r]&&"function"==typeof A[r]&&(this[r]=function(q){return function(){return A[q].apply(A,arguments)}}(r));for(var s=0;s<e.length;s++)A.on(e[s],this.emit.bind(this,e[s]));return this._read=function(G){N("wrapped _read",G),R&&(R=!1,A.resume())},this},"function"==typeof Symbol&&(I.prototype[Symbol.asyncIterator]=function(){return void 0===u&&(u=p(19983)),u(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(W){this._readableState&&(this._readableState.flowing=W)}}),I._fromList=U,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(I.from=function(A,W){return void 0===l&&(l=p(3659)),l(I,A,W)})},55431:(K,Y,p)=>{"use strict";K.exports=m;var g=p(48230).q,_=g.ERR_METHOD_NOT_IMPLEMENTED,P=g.ERR_MULTIPLE_CALLBACK,v=g.ERR_TRANSFORM_ALREADY_TRANSFORMING,Z=g.ERR_TRANSFORM_WITH_LENGTH_0,T=p(20942);function d(w,x){var O=this._transformState;O.transforming=!1;var D=O.writecb;if(null===D)return this.emit("error",new P);O.writechunk=null,O.writecb=null,null!=x&&this.push(x),D(w);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function m(w){if(!(this instanceof m))return new m(w);T.call(this,w),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,w&&("function"==typeof w.transform&&(this._transform=w.transform),"function"==typeof w.flush&&(this._flush=w.flush)),this.on("prefinish",y)}function y(){var w=this;"function"!=typeof this._flush||this._readableState.destroyed?N(this,null,null):this._flush(function(x,O){N(w,x,O)})}function N(w,x,O){if(x)return w.emit("error",x);if(null!=O&&w.push(O),w._writableState.length)throw new Z;if(w._transformState.transforming)throw new v;return w.push(null)}p(59879)(m,T),m.prototype.push=function(w,x){return this._transformState.needTransform=!1,T.prototype.push.call(this,w,x)},m.prototype._transform=function(w,x,O){O(new _("_transform()"))},m.prototype._write=function(w,x,O){var D=this._transformState;if(D.writecb=O,D.writechunk=w,D.writeencoding=x,!D.transforming){var b=this._readableState;(D.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},m.prototype._read=function(w){var x=this._transformState;null===x.writechunk||x.transforming?x.needTransform=!0:(x.transforming=!0,this._transform(x.writechunk,x.writeencoding,x.afterTransform))},m.prototype._destroy=function(w,x){T.prototype._destroy.call(this,w,function(O){x(O)})}},37807:(K,Y,p)=>{"use strict";function _(a){var U=this;this.next=null,this.entry=null,this.finish=function(){!function C(a,U,$){var re=a.entry;for(a.entry=null;re;){var le=re.callback;U.pendingcb--,le($),re=re.next}U.corkedRequestsFree.next=a}(U,a)}}var P;K.exports=B,B.WritableState=e;var E,v={deprecate:p(15822)},Z=p(75112),T=p(3875).Buffer,d=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},N=p(10806),x=p(12903).getHighWaterMark,O=p(48230).q,D=O.ERR_INVALID_ARG_TYPE,b=O.ERR_METHOD_NOT_IMPLEMENTED,L=O.ERR_MULTIPLE_CALLBACK,k=O.ERR_STREAM_CANNOT_PIPE,S=O.ERR_STREAM_DESTROYED,M=O.ERR_STREAM_NULL_VALUES,f=O.ERR_STREAM_WRITE_AFTER_END,u=O.ERR_UNKNOWN_ENCODING,l=N.errorOrDestroy;function h(){}function e(a,U,$){P=P||p(20942),"boolean"!=typeof $&&($=U instanceof P),this.objectMode=!!(a=a||{}).objectMode,$&&(this.objectMode=this.objectMode||!!a.writableObjectMode),this.highWaterMark=x(this,a,"writableHighWaterMark",$),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===a.decodeStrings),this.defaultEncoding=a.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(le){!function ge(a,U){var $=a._writableState,re=$.sync,le=$.writecb;if("function"!=typeof le)throw new L;if(function ie(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}($),U)!function fe(a,U,$,re,le){--U.pendingcb,$?(process.nextTick(le,re),process.nextTick(Pe,a,U),a._writableState.errorEmitted=!0,l(a,re)):(le(re),a._writableState.errorEmitted=!0,l(a,re),Pe(a,U))}(a,$,re,U,le);else{var A=he($)||a.destroyed;!A&&!$.corked&&!$.bufferProcessing&&$.bufferedRequest&&pe(a,$),re?process.nextTick(de,a,$,A,le):de(a,$,A,le)}}(U,le)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==a.emitClose,this.autoDestroy=!!a.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new _(this)}function B(a){var U=this instanceof(P=P||p(20942));if(!U&&!E.call(B,this))return new B(a);this._writableState=new e(a,this,U),this.writable=!0,a&&("function"==typeof a.write&&(this._write=a.write),"function"==typeof a.writev&&(this._writev=a.writev),"function"==typeof a.destroy&&(this._destroy=a.destroy),"function"==typeof a.final&&(this._final=a.final)),Z.call(this)}function ue(a,U,$,re,le,A,W){U.writelen=re,U.writecb=W,U.writing=!0,U.sync=!0,U.destroyed?U.onwrite(new S("write")):$?a._writev(le,U.onwrite):a._write(le,A,U.onwrite),U.sync=!1}function de(a,U,$,re){$||function Ze(a,U){0===U.length&&U.needDrain&&(U.needDrain=!1,a.emit("drain"))}(a,U),U.pendingcb--,re(),Pe(a,U)}function pe(a,U){U.bufferProcessing=!0;var $=U.bufferedRequest;if(a._writev&&$&&$.next){var le=new Array(U.bufferedRequestCount),A=U.corkedRequestsFree;A.entry=$;for(var W=0,V=!0;$;)le[W]=$,$.isBuf||(V=!1),$=$.next,W+=1;le.allBuffers=V,ue(a,U,!0,U.length,le,"",A.finish),U.pendingcb++,U.lastBufferedRequest=null,A.next?(U.corkedRequestsFree=A.next,A.next=null):U.corkedRequestsFree=new _(U),U.bufferedRequestCount=0}else{for(;$;){var R=$.chunk;if(ue(a,U,!1,U.objectMode?1:R.length,R,$.encoding,$.callback),$=$.next,U.bufferedRequestCount--,U.writing)break}null===$&&(U.lastBufferedRequest=null)}U.bufferedRequest=$,U.bufferProcessing=!1}function he(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function we(a,U){a._final(function($){U.pendingcb--,$&&l(a,$),U.prefinished=!0,a.emit("prefinish"),Pe(a,U)})}function Pe(a,U){var $=he(U);if($&&(function Ae(a,U){!U.prefinished&&!U.finalCalled&&("function"!=typeof a._final||U.destroyed?(U.prefinished=!0,a.emit("prefinish")):(U.pendingcb++,U.finalCalled=!0,process.nextTick(we,a,U)))}(a,U),0===U.pendingcb&&(U.finished=!0,a.emit("finish"),U.autoDestroy))){var re=a._readableState;(!re||re.autoDestroy&&re.endEmitted)&&a.destroy()}return $}p(59879)(B,Z),e.prototype.getBuffer=function(){for(var U=this.bufferedRequest,$=[];U;)$.push(U),U=U.next;return $},function(){try{Object.defineProperty(e.prototype,"buffer",{get:v.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(B,Symbol.hasInstance,{value:function(U){return!!E.call(this,U)||this===B&&U&&U._writableState instanceof e}})):E=function(U){return U instanceof this},B.prototype.pipe=function(){l(this,new k)},B.prototype.write=function(a,U,$){var re=this._writableState,le=!1,A=!re.objectMode&&function y(a){return T.isBuffer(a)||a instanceof d}(a);return A&&!T.isBuffer(a)&&(a=function m(a){return T.from(a)}(a)),"function"==typeof U&&($=U,U=null),A?U="buffer":U||(U=re.defaultEncoding),"function"!=typeof $&&($=h),re.ending?function I(a,U){var $=new f;l(a,$),process.nextTick(U,$)}(this,$):(A||function H(a,U,$,re){var le;return null===$?le=new M:"string"!=typeof $&&!U.objectMode&&(le=new D("chunk",["string","Buffer"],$)),!le||(l(a,le),process.nextTick(re,le),!1)}(this,re,a,$))&&(re.pendingcb++,le=function ne(a,U,$,re,le,A){if(!$){var W=function X(a,U,$){return!a.objectMode&&!1!==a.decodeStrings&&"string"==typeof U&&(U=T.from(U,$)),U}(U,re,le);re!==W&&($=!0,le="buffer",re=W)}var V=U.objectMode?1:re.length;U.length+=V;var R=U.length<U.highWaterMark;if(R||(U.needDrain=!0),U.writing||U.corked){var r=U.lastBufferedRequest;U.lastBufferedRequest={chunk:re,encoding:le,isBuf:$,callback:A,next:null},r?r.next=U.lastBufferedRequest:U.bufferedRequest=U.lastBufferedRequest,U.bufferedRequestCount+=1}else ue(a,U,!1,V,re,le,A);return R}(this,re,A,a,U,$)),le},B.prototype.cork=function(){this._writableState.corked++},B.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,!a.writing&&!a.corked&&!a.bufferProcessing&&a.bufferedRequest&&pe(this,a))},B.prototype.setDefaultEncoding=function(U){if("string"==typeof U&&(U=U.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((U+"").toLowerCase())>-1))throw new u(U);return this._writableState.defaultEncoding=U,this},Object.defineProperty(B.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(B.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),B.prototype._write=function(a,U,$){$(new b("_write()"))},B.prototype._writev=null,B.prototype.end=function(a,U,$){var re=this._writableState;return"function"==typeof a?($=a,a=null,U=null):"function"==typeof U&&($=U,U=null),null!=a&&this.write(a,U),re.corked&&(re.corked=1,this.uncork()),re.ending||function We(a,U,$){U.ending=!0,Pe(a,U),$&&(U.finished?process.nextTick($):a.once("finish",$)),U.ended=!0,a.writable=!1}(this,re,$),this},Object.defineProperty(B.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(B.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(U){this._writableState&&(this._writableState.destroyed=U)}}),B.prototype.destroy=N.destroy,B.prototype._undestroy=N.undestroy,B.prototype._destroy=function(a,U){U(a)}},19983:(K,Y,p)=>{"use strict";var g;function _(f,u,l){return u=function P(f){var u=function v(f,u){if("object"!=typeof f||null===f)return f;var l=f[Symbol.toPrimitive];if(void 0!==l){var h=l.call(f,u||"default");if("object"!=typeof h)return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(f)}(f,"string");return"symbol"==typeof u?u:String(u)}(u),u in f?Object.defineProperty(f,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):f[u]=l,f}var Z=p(6820),T=Symbol("lastResolve"),d=Symbol("lastReject"),m=Symbol("error"),y=Symbol("ended"),N=Symbol("lastPromise"),w=Symbol("handlePromise"),x=Symbol("stream");function O(f,u){return{value:f,done:u}}function D(f){var u=f[T];if(null!==u){var l=f[x].read();null!==l&&(f[N]=null,f[T]=null,f[d]=null,u(O(l,!1)))}}function b(f){process.nextTick(D,f)}var k=Object.getPrototypeOf(function(){}),S=Object.setPrototypeOf((_(g={get stream(){return this[x]},next:function(){var u=this,l=this[m];if(null!==l)return Promise.reject(l);if(this[y])return Promise.resolve(O(void 0,!0));if(this[x].destroyed)return new Promise(function(B,I){process.nextTick(function(){u[m]?I(u[m]):B(O(void 0,!0))})});var e,h=this[N];if(h)e=new Promise(function L(f,u){return function(l,h){f.then(function(){u[y]?l(O(void 0,!0)):u[w](l,h)},h)}}(h,this));else{var E=this[x].read();if(null!==E)return Promise.resolve(O(E,!1));e=new Promise(this[w])}return this[N]=e,e}},Symbol.asyncIterator,function(){return this}),_(g,"return",function(){var u=this;return new Promise(function(l,h){u[x].destroy(null,function(e){e?h(e):l(O(void 0,!0))})})}),g),k);K.exports=function(u){var l,h=Object.create(S,(_(l={},x,{value:u,writable:!0}),_(l,T,{value:null,writable:!0}),_(l,d,{value:null,writable:!0}),_(l,m,{value:null,writable:!0}),_(l,y,{value:u._readableState.endEmitted,writable:!0}),_(l,w,{value:function(E,B){var I=h[x].read();I?(h[N]=null,h[T]=null,h[d]=null,E(O(I,!1))):(h[T]=E,h[d]=B)},writable:!0}),l));return h[N]=null,Z(u,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var E=h[d];return null!==E&&(h[N]=null,h[T]=null,h[d]=null,E(e)),void(h[m]=e)}var B=h[T];null!==B&&(h[N]=null,h[T]=null,h[d]=null,B(O(void 0,!0))),h[y]=!0}),u.on("readable",b.bind(null,h)),h}},39370:(K,Y,p)=>{"use strict";function g(b,L){var k=Object.keys(b);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(b);L&&(S=S.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),k.push.apply(k,S)}return k}function _(b){for(var L=1;L<arguments.length;L++){var k=null!=arguments[L]?arguments[L]:{};L%2?g(Object(k),!0).forEach(function(S){P(b,S,k[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(k)):g(Object(k)).forEach(function(S){Object.defineProperty(b,S,Object.getOwnPropertyDescriptor(k,S))})}return b}function P(b,L,k){return(L=d(L))in b?Object.defineProperty(b,L,{value:k,enumerable:!0,configurable:!0,writable:!0}):b[L]=k,b}function Z(b,L){for(var k=0;k<L.length;k++){var S=L[k];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,d(S.key),S)}}function d(b){var L=function m(b,L){if("object"!=typeof b||null===b)return b;var k=b[Symbol.toPrimitive];if(void 0!==k){var S=k.call(b,L||"default");if("object"!=typeof S)return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===L?String:Number)(b)}(b,"string");return"symbol"==typeof L?L:String(L)}var N=p(3875).Buffer,x=p(52361).inspect,O=x&&x.custom||"inspect";function D(b,L,k){N.prototype.copy.call(b,L,k)}K.exports=function(){function b(){(function v(b,L){if(!(b instanceof L))throw new TypeError("Cannot call a class as a function")})(this,b),this.head=null,this.tail=null,this.length=0}return function T(b,L,k){L&&Z(b.prototype,L),k&&Z(b,k),Object.defineProperty(b,"prototype",{writable:!1})}(b,[{key:"push",value:function(k){var S={data:k,next:null};this.length>0?this.tail.next=S:this.head=S,this.tail=S,++this.length}},{key:"unshift",value:function(k){var S={data:k,next:this.head};0===this.length&&(this.tail=S),this.head=S,++this.length}},{key:"shift",value:function(){if(0!==this.length){var k=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,k}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(k){if(0===this.length)return"";for(var S=this.head,M=""+S.data;S=S.next;)M+=k+S.data;return M}},{key:"concat",value:function(k){if(0===this.length)return N.alloc(0);for(var S=N.allocUnsafe(k>>>0),M=this.head,f=0;M;)D(M.data,S,f),f+=M.data.length,M=M.next;return S}},{key:"consume",value:function(k,S){var M;return k<this.head.data.length?(M=this.head.data.slice(0,k),this.head.data=this.head.data.slice(k)):M=k===this.head.data.length?this.shift():S?this._getString(k):this._getBuffer(k),M}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(k){var S=this.head,M=1,f=S.data;for(k-=f.length;S=S.next;){var u=S.data,l=k>u.length?u.length:k;if(f+=l===u.length?u:u.slice(0,k),0==(k-=l)){l===u.length?(++M,this.head=S.next?S.next:this.tail=null):(this.head=S,S.data=u.slice(l));break}++M}return this.length-=M,f}},{key:"_getBuffer",value:function(k){var S=N.allocUnsafe(k),M=this.head,f=1;for(M.data.copy(S),k-=M.data.length;M=M.next;){var u=M.data,l=k>u.length?u.length:k;if(u.copy(S,S.length-k,0,l),0==(k-=l)){l===u.length?(++f,this.head=M.next?M.next:this.tail=null):(this.head=M,M.data=u.slice(l));break}++f}return this.length-=f,S}},{key:O,value:function(k,S){return x(this,_(_({},S),{},{depth:0,customInspect:!1}))}}]),b}()},10806:K=>{"use strict";function p(Z,T){P(Z,T),g(Z)}function g(Z){Z._writableState&&!Z._writableState.emitClose||Z._readableState&&!Z._readableState.emitClose||Z.emit("close")}function P(Z,T){Z.emit("error",T)}K.exports={destroy:function Y(Z,T){var d=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(T?T(Z):Z&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(P,this,Z)):process.nextTick(P,this,Z)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(Z||null,function(N){!T&&N?d._writableState?d._writableState.errorEmitted?process.nextTick(g,d):(d._writableState.errorEmitted=!0,process.nextTick(p,d,N)):process.nextTick(p,d,N):T?(process.nextTick(g,d),T(N)):process.nextTick(g,d)}),this)},undestroy:function _(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function v(Z,T){var d=Z._readableState,m=Z._writableState;d&&d.autoDestroy||m&&m.autoDestroy?Z.destroy(T):Z.emit("error",T)}}},6820:(K,Y,p)=>{"use strict";var g=p(48230).q.ERR_STREAM_PREMATURE_CLOSE;function P(){}K.exports=function Z(T,d,m){if("function"==typeof d)return Z(T,null,d);d||(d={}),m=function _(T){var d=!1;return function(){if(!d){d=!0;for(var m=arguments.length,y=new Array(m),N=0;N<m;N++)y[N]=arguments[N];T.apply(this,y)}}}(m||P);var y=d.readable||!1!==d.readable&&T.readable,N=d.writable||!1!==d.writable&&T.writable,w=function(){T.writable||O()},x=T._writableState&&T._writableState.finished,O=function(){N=!1,x=!0,y||m.call(T)},D=T._readableState&&T._readableState.endEmitted,b=function(){y=!1,D=!0,N||m.call(T)},L=function(f){m.call(T,f)},k=function(){var f;return y&&!D?((!T._readableState||!T._readableState.ended)&&(f=new g),m.call(T,f)):N&&!x?((!T._writableState||!T._writableState.ended)&&(f=new g),m.call(T,f)):void 0},S=function(){T.req.on("finish",O)};return function v(T){return T.setHeader&&"function"==typeof T.abort}(T)?(T.on("complete",O),T.on("abort",k),T.req?S():T.on("request",S)):N&&!T._writableState&&(T.on("end",w),T.on("close",w)),T.on("end",b),T.on("finish",O),!1!==d.error&&T.on("error",L),T.on("close",k),function(){T.removeListener("complete",O),T.removeListener("abort",k),T.removeListener("request",S),T.req&&T.req.removeListener("finish",O),T.removeListener("end",w),T.removeListener("close",w),T.removeListener("finish",O),T.removeListener("end",b),T.removeListener("error",L),T.removeListener("close",k)}}},3659:K=>{K.exports=function(){throw new Error("Readable.from is not available in the browser")}},36076:(K,Y,p)=>{"use strict";var g,P=p(48230).q,v=P.ERR_MISSING_ARGS,Z=P.ERR_STREAM_DESTROYED;function T(O){if(O)throw O}function y(O){O()}function N(O,D){return O.pipe(D)}K.exports=function x(){for(var O=arguments.length,D=new Array(O),b=0;b<O;b++)D[b]=arguments[b];var L=function w(O){return O.length&&"function"==typeof O[O.length-1]?O.pop():T}(D);if(Array.isArray(D[0])&&(D=D[0]),D.length<2)throw new v("streams");var k,S=D.map(function(M,f){var u=f<D.length-1;return function m(O,D,b,L){L=function _(O){var D=!1;return function(){D||(D=!0,O.apply(void 0,arguments))}}(L);var k=!1;O.on("close",function(){k=!0}),void 0===g&&(g=p(6820)),g(O,{readable:D,writable:b},function(M){if(M)return L(M);k=!0,L()});var S=!1;return function(M){if(!k&&!S){if(S=!0,function d(O){return O.setHeader&&"function"==typeof O.abort}(O))return O.abort();if("function"==typeof O.destroy)return O.destroy();L(M||new Z("pipe"))}}}(M,u,f>0,function(h){k||(k=h),h&&S.forEach(y),!u&&(S.forEach(y),L(k))})});return D.reduce(N)}},12903:(K,Y,p)=>{"use strict";var g=p(48230).q.ERR_INVALID_OPT_VALUE;K.exports={getHighWaterMark:function P(v,Z,T,d){var m=function _(v,Z,T){return null!=v.highWaterMark?v.highWaterMark:Z?v[T]:null}(Z,d,T);if(null!=m){if(!isFinite(m)||Math.floor(m)!==m||m<0)throw new g(d?T:"highWaterMark",m);return Math.floor(m)}return v.objectMode?16:16384}}},75112:(K,Y,p)=>{K.exports=p(93105).EventEmitter},55859:(K,Y,p)=>{var g=p(3875),_=g.Buffer;function P(Z,T){for(var d in Z)T[d]=Z[d]}function v(Z,T,d){return _(Z,T,d)}_.from&&_.alloc&&_.allocUnsafe&&_.allocUnsafeSlow?K.exports=g:(P(g,Y),Y.Buffer=v),v.prototype=Object.create(_.prototype),P(_,v),v.from=function(Z,T,d){if("number"==typeof Z)throw new TypeError("Argument must not be a number");return _(Z,T,d)},v.alloc=function(Z,T,d){if("number"!=typeof Z)throw new TypeError("Argument must be a number");var m=_(Z);return void 0!==T?"string"==typeof d?m.fill(T,d):m.fill(T):m.fill(0),m},v.allocUnsafe=function(Z){if("number"!=typeof Z)throw new TypeError("Argument must be a number");return _(Z)},v.allocUnsafeSlow=function(Z){if("number"!=typeof Z)throw new TypeError("Argument must be a number");return g.SlowBuffer(Z)}},5473:(K,Y,p)=>{!function(g){g.parser=function(C,a){return new P(C,a)},g.SAXParser=P,g.SAXStream=N,g.createStream=function y(C,a){return new N(C,a)},g.MAX_BUFFER_LENGTH=65536;var d,_=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function P(C,a){if(!(this instanceof P))return new P(C,a);var U=this;(function Z(C){for(var a=0,U=_.length;a<U;a++)C[_[a]]=""})(U),U.q=U.c="",U.bufferCheckPosition=g.MAX_BUFFER_LENGTH,U.opt=a||{},U.opt.lowercase=U.opt.lowercase||U.opt.lowercasetags,U.looseCase=U.opt.lowercase?"toLowerCase":"toUpperCase",U.tags=[],U.closed=U.closedRoot=U.sawRoot=!1,U.tag=U.error=null,U.strict=!!C,U.noscript=!(!C&&!U.opt.noscript),U.state=E.BEGIN,U.strictEntities=U.opt.strictEntities,U.ENTITIES=Object.create(U.strictEntities?g.XML_ENTITIES:g.ENTITIES),U.attribList=[],U.opt.xmlns&&(U.ns=Object.create(b)),U.trackPosition=!1!==U.opt.position,U.trackPosition&&(U.position=U.line=U.column=0),I(U,"onready")}g.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(C){function a(){}return a.prototype=C,new a}),Object.keys||(Object.keys=function(C){var a=[];for(var U in C)C.hasOwnProperty(U)&&a.push(U);return a}),P.prototype={end:function(){fe(this)},write:function We(C){var a=this;if(this.error)throw this.error;if(a.closed)return ue(a,"Cannot write after close. Assign an onready handler.");if(null===C)return fe(a);"object"==typeof C&&(C=C.toString());for(var U=0,$="";$=Pe(C,U++),a.c=$,$;)switch(a.trackPosition&&(a.position++,"\n"===$?(a.line++,a.column=0):a.column++),a.state){case E.BEGIN:if(a.state=E.BEGIN_WHITESPACE,"\ufeff"===$)continue;Ae(a,$);continue;case E.BEGIN_WHITESPACE:Ae(a,$);continue;case E.TEXT:if(a.sawRoot&&!a.closedRoot){for(var re=U-1;$&&"<"!==$&&"&"!==$;)($=Pe(C,U++))&&a.trackPosition&&(a.position++,"\n"===$?(a.line++,a.column=0):a.column++);a.textNode+=C.substring(re,U-1)}"<"!==$||a.sawRoot&&a.closedRoot&&!a.strict?(!f($)&&(!a.sawRoot||a.closedRoot)&&ie(a,"Text data outside of root node."),"&"===$?a.state=E.TEXT_ENTITY:a.textNode+=$):(a.state=E.OPEN_WAKA,a.startTagPosition=a.position);continue;case E.SCRIPT:"<"===$?a.state=E.SCRIPT_ENDING:a.script+=$;continue;case E.SCRIPT_ENDING:"/"===$?a.state=E.CLOSE_TAG:(a.script+="<"+$,a.state=E.SCRIPT);continue;case E.OPEN_WAKA:"!"===$?(a.state=E.SGML_DECL,a.sgmlDecl=""):f($)||(h(L,$)?(a.state=E.OPEN_TAG,a.tagName=$):"/"===$?(a.state=E.CLOSE_TAG,a.tagName=""):"?"===$?(a.state=E.PROC_INST,a.procInstName=a.procInstBody=""):(ie(a,"Unencoded <"),a.startTagPosition+1<a.position&&($=new Array(a.position-a.startTagPosition).join(" ")+$),a.textNode+="<"+$,a.state=E.TEXT));continue;case E.SGML_DECL:(a.sgmlDecl+$).toUpperCase()===w?(H(a,"onopencdata"),a.state=E.CDATA,a.sgmlDecl="",a.cdata=""):a.sgmlDecl+$==="--"?(a.state=E.COMMENT,a.comment="",a.sgmlDecl=""):(a.sgmlDecl+$).toUpperCase()===x?(a.state=E.DOCTYPE,(a.doctype||a.sawRoot)&&ie(a,"Inappropriately located doctype declaration"),a.doctype="",a.sgmlDecl=""):">"===$?(H(a,"onsgmldeclaration",a.sgmlDecl),a.sgmlDecl="",a.state=E.TEXT):(u($)&&(a.state=E.SGML_DECL_QUOTED),a.sgmlDecl+=$);continue;case E.SGML_DECL_QUOTED:$===a.q&&(a.state=E.SGML_DECL,a.q=""),a.sgmlDecl+=$;continue;case E.DOCTYPE:">"===$?(a.state=E.TEXT,H(a,"ondoctype",a.doctype),a.doctype=!0):(a.doctype+=$,"["===$?a.state=E.DOCTYPE_DTD:u($)&&(a.state=E.DOCTYPE_QUOTED,a.q=$));continue;case E.DOCTYPE_QUOTED:a.doctype+=$,$===a.q&&(a.q="",a.state=E.DOCTYPE);continue;case E.DOCTYPE_DTD:a.doctype+=$,"]"===$?a.state=E.DOCTYPE:u($)&&(a.state=E.DOCTYPE_DTD_QUOTED,a.q=$);continue;case E.DOCTYPE_DTD_QUOTED:a.doctype+=$,$===a.q&&(a.state=E.DOCTYPE_DTD,a.q="");continue;case E.COMMENT:"-"===$?a.state=E.COMMENT_ENDING:a.comment+=$;continue;case E.COMMENT_ENDING:"-"===$?(a.state=E.COMMENT_ENDED,a.comment=ne(a.opt,a.comment),a.comment&&H(a,"oncomment",a.comment),a.comment=""):(a.comment+="-"+$,a.state=E.COMMENT);continue;case E.COMMENT_ENDED:">"!==$?(ie(a,"Malformed comment"),a.comment+="--"+$,a.state=E.COMMENT):a.state=E.TEXT;continue;case E.CDATA:"]"===$?a.state=E.CDATA_ENDING:a.cdata+=$;continue;case E.CDATA_ENDING:"]"===$?a.state=E.CDATA_ENDING_2:(a.cdata+="]"+$,a.state=E.CDATA);continue;case E.CDATA_ENDING_2:">"===$?(a.cdata&&H(a,"oncdata",a.cdata),H(a,"onclosecdata"),a.cdata="",a.state=E.TEXT):"]"===$?a.cdata+="]":(a.cdata+="]]"+$,a.state=E.CDATA);continue;case E.PROC_INST:"?"===$?a.state=E.PROC_INST_ENDING:f($)?a.state=E.PROC_INST_BODY:a.procInstName+=$;continue;case E.PROC_INST_BODY:if(!a.procInstBody&&f($))continue;"?"===$?a.state=E.PROC_INST_ENDING:a.procInstBody+=$;continue;case E.PROC_INST_ENDING:">"===$?(H(a,"onprocessinginstruction",{name:a.procInstName,body:a.procInstBody}),a.procInstName=a.procInstBody="",a.state=E.TEXT):(a.procInstBody+="?"+$,a.state=E.PROC_INST_BODY);continue;case E.OPEN_TAG:h(k,$)?a.tagName+=$:(ge(a),">"===$?pe(a):"/"===$?a.state=E.OPEN_TAG_SLASH:(f($)||ie(a,"Invalid character in tag name"),a.state=E.ATTRIB));continue;case E.OPEN_TAG_SLASH:">"===$?(pe(a,!0),he(a)):(ie(a,"Forward-slash in opening tag not followed by >"),a.state=E.ATTRIB);continue;case E.ATTRIB:if(f($))continue;">"===$?pe(a):"/"===$?a.state=E.OPEN_TAG_SLASH:h(L,$)?(a.attribName=$,a.attribValue="",a.state=E.ATTRIB_NAME):ie(a,"Invalid attribute name");continue;case E.ATTRIB_NAME:"="===$?a.state=E.ATTRIB_VALUE:">"===$?(ie(a,"Attribute without value"),a.attribValue=a.attribName,Ze(a),pe(a)):f($)?a.state=E.ATTRIB_NAME_SAW_WHITE:h(k,$)?a.attribName+=$:ie(a,"Invalid attribute name");continue;case E.ATTRIB_NAME_SAW_WHITE:if("="===$)a.state=E.ATTRIB_VALUE;else{if(f($))continue;ie(a,"Attribute without value"),a.tag.attributes[a.attribName]="",a.attribValue="",H(a,"onattribute",{name:a.attribName,value:""}),a.attribName="",">"===$?pe(a):h(L,$)?(a.attribName=$,a.state=E.ATTRIB_NAME):(ie(a,"Invalid attribute name"),a.state=E.ATTRIB)}continue;case E.ATTRIB_VALUE:if(f($))continue;u($)?(a.q=$,a.state=E.ATTRIB_VALUE_QUOTED):(ie(a,"Unquoted attribute value"),a.state=E.ATTRIB_VALUE_UNQUOTED,a.attribValue=$);continue;case E.ATTRIB_VALUE_QUOTED:if($!==a.q){"&"===$?a.state=E.ATTRIB_VALUE_ENTITY_Q:a.attribValue+=$;continue}Ze(a),a.q="",a.state=E.ATTRIB_VALUE_CLOSED;continue;case E.ATTRIB_VALUE_CLOSED:f($)?a.state=E.ATTRIB:">"===$?pe(a):"/"===$?a.state=E.OPEN_TAG_SLASH:h(L,$)?(ie(a,"No whitespace between attributes"),a.attribName=$,a.attribValue="",a.state=E.ATTRIB_NAME):ie(a,"Invalid attribute name");continue;case E.ATTRIB_VALUE_UNQUOTED:if(!l($)){"&"===$?a.state=E.ATTRIB_VALUE_ENTITY_U:a.attribValue+=$;continue}Ze(a),">"===$?pe(a):a.state=E.ATTRIB;continue;case E.CLOSE_TAG:if(a.tagName)">"===$?he(a):h(k,$)?a.tagName+=$:a.script?(a.script+="</"+a.tagName,a.tagName="",a.state=E.SCRIPT):(f($)||ie(a,"Invalid tagname in closing tag"),a.state=E.CLOSE_TAG_SAW_WHITE);else{if(f($))continue;e(L,$)?a.script?(a.script+="</"+$,a.state=E.SCRIPT):ie(a,"Invalid tagname in closing tag."):a.tagName=$}continue;case E.CLOSE_TAG_SAW_WHITE:if(f($))continue;">"===$?he(a):ie(a,"Invalid characters in closing tag");continue;case E.TEXT_ENTITY:case E.ATTRIB_VALUE_ENTITY_Q:case E.ATTRIB_VALUE_ENTITY_U:var A,W;switch(a.state){case E.TEXT_ENTITY:A=E.TEXT,W="textNode";break;case E.ATTRIB_VALUE_ENTITY_Q:A=E.ATTRIB_VALUE_QUOTED,W="attribValue";break;case E.ATTRIB_VALUE_ENTITY_U:A=E.ATTRIB_VALUE_UNQUOTED,W="attribValue"}if(";"===$)if(a.opt.unparsedEntities){var V=we(a);a.entity="",a.state=A,a.write(V)}else a[W]+=we(a),a.entity="",a.state=A;else h(a.entity.length?M:S,$)?a.entity+=$:(ie(a,"Invalid character in entity name"),a[W]+="&"+a.entity+$,a.entity="",a.state=A);continue;default:throw new Error(a,"Unknown state: "+a.state)}return a.position>=a.bufferCheckPosition&&function v(C){for(var a=Math.max(g.MAX_BUFFER_LENGTH,10),U=0,$=0,re=_.length;$<re;$++){var le=C[_[$]].length;if(le>a)switch(_[$]){case"textNode":X(C);break;case"cdata":H(C,"oncdata",C.cdata),C.cdata="";break;case"script":H(C,"onscript",C.script),C.script="";break;default:ue(C,"Max buffer length exceeded: "+_[$])}U=Math.max(U,le)}C.bufferCheckPosition=g.MAX_BUFFER_LENGTH-U+C.position}(a),a},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function T(C){X(C),""!==C.cdata&&(H(C,"oncdata",C.cdata),C.cdata=""),""!==C.script&&(H(C,"onscript",C.script),C.script="")}(this)}};try{d=p(36917).Stream}catch{d=function(){}}d||(d=function(){});var m=g.EVENTS.filter(function(C){return"error"!==C&&"end"!==C});function N(C,a){if(!(this instanceof N))return new N(C,a);d.apply(this),this._parser=new P(C,a),this.writable=!0,this.readable=!0;var U=this;this._parser.onend=function(){U.emit("end")},this._parser.onerror=function($){U.emit("error",$),U._parser.error=null},this._decoder=null,m.forEach(function($){Object.defineProperty(U,"on"+$,{get:function(){return U._parser["on"+$]},set:function(re){if(!re)return U.removeAllListeners($),U._parser["on"+$]=re,re;U.on($,re)},enumerable:!0,configurable:!1})})}(N.prototype=Object.create(d.prototype,{constructor:{value:N}})).write=function(C){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(C)){if(!this._decoder){var a=p(32519).s;this._decoder=new a("utf8")}C=this._decoder.write(C)}return this._parser.write(C.toString()),this.emit("data",C),!0},N.prototype.end=function(C){return C&&C.length&&this.write(C),this._parser.end(),!0},N.prototype.on=function(C,a){var U=this;return!U._parser["on"+C]&&-1!==m.indexOf(C)&&(U._parser["on"+C]=function(){var $=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);$.splice(0,0,C),U.emit.apply(U,$)}),d.prototype.on.call(U,C,a)};var w="[CDATA[",x="DOCTYPE",O="http://www.w3.org/XML/1998/namespace",D="http://www.w3.org/2000/xmlns/",b={xml:O,xmlns:D},L=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,k=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,M=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function f(C){return" "===C||"\n"===C||"\r"===C||"\t"===C}function u(C){return'"'===C||"'"===C}function l(C){return">"===C||f(C)}function h(C,a){return C.test(a)}function e(C,a){return!h(C,a)}var C,a,U,E=0;for(var B in g.STATE={BEGIN:E++,BEGIN_WHITESPACE:E++,TEXT:E++,TEXT_ENTITY:E++,OPEN_WAKA:E++,SGML_DECL:E++,SGML_DECL_QUOTED:E++,DOCTYPE:E++,DOCTYPE_QUOTED:E++,DOCTYPE_DTD:E++,DOCTYPE_DTD_QUOTED:E++,COMMENT_STARTING:E++,COMMENT:E++,COMMENT_ENDING:E++,COMMENT_ENDED:E++,CDATA:E++,CDATA_ENDING:E++,CDATA_ENDING_2:E++,PROC_INST:E++,PROC_INST_BODY:E++,PROC_INST_ENDING:E++,OPEN_TAG:E++,OPEN_TAG_SLASH:E++,ATTRIB:E++,ATTRIB_NAME:E++,ATTRIB_NAME_SAW_WHITE:E++,ATTRIB_VALUE:E++,ATTRIB_VALUE_QUOTED:E++,ATTRIB_VALUE_CLOSED:E++,ATTRIB_VALUE_UNQUOTED:E++,ATTRIB_VALUE_ENTITY_Q:E++,ATTRIB_VALUE_ENTITY_U:E++,CLOSE_TAG:E++,CLOSE_TAG_SAW_WHITE:E++,SCRIPT:E++,SCRIPT_ENDING:E++},g.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},g.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(g.ENTITIES).forEach(function(C){var a=g.ENTITIES[C],U="number"==typeof a?String.fromCharCode(a):a;g.ENTITIES[C]=U}),g.STATE)g.STATE[g.STATE[B]]=B;function I(C,a,U){C[a]&&C[a](U)}function H(C,a,U){C.textNode&&X(C),I(C,a,U)}function X(C){C.textNode=ne(C.opt,C.textNode),C.textNode&&I(C,"ontext",C.textNode),C.textNode=""}function ne(C,a){return C.trim&&(a=a.trim()),C.normalize&&(a=a.replace(/\s+/g," ")),a}function ue(C,a){return X(C),C.trackPosition&&(a+="\nLine: "+C.line+"\nColumn: "+C.column+"\nChar: "+C.c),a=new Error(a),C.error=a,I(C,"onerror",a),C}function fe(C){return C.sawRoot&&!C.closedRoot&&ie(C,"Unclosed root tag"),C.state!==E.BEGIN&&C.state!==E.BEGIN_WHITESPACE&&C.state!==E.TEXT&&ue(C,"Unexpected end"),X(C),C.c="",C.closed=!0,I(C,"onend"),P.call(C,C.strict,C.opt),C}function ie(C,a){if("object"!=typeof C||!(C instanceof P))throw new Error("bad call to strictFail");C.strict&&ue(C,a)}function ge(C){C.strict||(C.tagName=C.tagName[C.looseCase]());var a=C.tags[C.tags.length-1]||C,U=C.tag={name:C.tagName,attributes:{}};C.opt.xmlns&&(U.ns=a.ns),C.attribList.length=0,H(C,"onopentagstart",U)}function de(C,a){var $=C.indexOf(":")<0?["",C]:C.split(":"),re=$[0],le=$[1];return a&&"xmlns"===C&&(re="xmlns",le=""),{prefix:re,local:le}}function Ze(C){if(C.strict||(C.attribName=C.attribName[C.looseCase]()),-1!==C.attribList.indexOf(C.attribName)||C.tag.attributes.hasOwnProperty(C.attribName))C.attribName=C.attribValue="";else{if(C.opt.xmlns){var a=de(C.attribName,!0),$=a.local;if("xmlns"===a.prefix)if("xml"===$&&C.attribValue!==O)ie(C,"xml: prefix must be bound to "+O+"\nActual: "+C.attribValue);else if("xmlns"===$&&C.attribValue!==D)ie(C,"xmlns: prefix must be bound to "+D+"\nActual: "+C.attribValue);else{var re=C.tag,le=C.tags[C.tags.length-1]||C;re.ns===le.ns&&(re.ns=Object.create(le.ns)),re.ns[$]=C.attribValue}C.attribList.push([C.attribName,C.attribValue])}else C.tag.attributes[C.attribName]=C.attribValue,H(C,"onattribute",{name:C.attribName,value:C.attribValue});C.attribName=C.attribValue=""}}function pe(C,a){if(C.opt.xmlns){var U=C.tag,$=de(C.tagName);U.prefix=$.prefix,U.local=$.local,U.uri=U.ns[$.prefix]||"",U.prefix&&!U.uri&&(ie(C,"Unbound namespace prefix: "+JSON.stringify(C.tagName)),U.uri=$.prefix),U.ns&&(C.tags[C.tags.length-1]||C).ns!==U.ns&&Object.keys(U.ns).forEach(function(te){H(C,"onopennamespace",{prefix:te,uri:U.ns[te]})});for(var le=0,A=C.attribList.length;le<A;le++){var W=C.attribList[le],V=W[0],R=W[1],r=de(V,!0),s=r.prefix,q=""===s?"":U.ns[s]||"",ee={name:V,value:R,prefix:s,local:r.local,uri:q};s&&"xmlns"!==s&&!q&&(ie(C,"Unbound namespace prefix: "+JSON.stringify(s)),ee.uri=s),C.tag.attributes[V]=ee,H(C,"onattribute",ee)}C.attribList.length=0}C.tag.isSelfClosing=!!a,C.sawRoot=!0,C.tags.push(C.tag),H(C,"onopentag",C.tag),a||(C.state=C.noscript||"script"!==C.tagName.toLowerCase()?E.TEXT:E.SCRIPT,C.tag=null,C.tagName=""),C.attribName=C.attribValue="",C.attribList.length=0}function he(C){if(!C.tagName)return ie(C,"Weird empty close tag."),C.textNode+="</>",void(C.state=E.TEXT);if(C.script){if("script"!==C.tagName)return C.script+="</"+C.tagName+">",C.tagName="",void(C.state=E.SCRIPT);H(C,"onscript",C.script),C.script=""}var a=C.tags.length,U=C.tagName;C.strict||(U=U[C.looseCase]());for(var $=U;a--&&C.tags[a].name!==$;)ie(C,"Unexpected close tag");if(a<0)return ie(C,"Unmatched closing tag: "+C.tagName),C.textNode+="</"+C.tagName+">",void(C.state=E.TEXT);C.tagName=U;for(var le=C.tags.length;le-- >a;){var A=C.tag=C.tags.pop();C.tagName=C.tag.name,H(C,"onclosetag",C.tagName);var W={};for(var V in A.ns)W[V]=A.ns[V];C.opt.xmlns&&A.ns!==(C.tags[C.tags.length-1]||C).ns&&Object.keys(A.ns).forEach(function(r){H(C,"onclosenamespace",{prefix:r,uri:A.ns[r]})})}0===a&&(C.closedRoot=!0),C.tagName=C.attribValue=C.attribName="",C.attribList.length=0,C.state=E.TEXT}function we(C){var $,a=C.entity,U=a.toLowerCase(),re="";return C.ENTITIES[a]?C.ENTITIES[a]:C.ENTITIES[U]?C.ENTITIES[U]:("#"===(a=U).charAt(0)&&("x"===a.charAt(1)?(a=a.slice(2),re=($=parseInt(a,16)).toString(16)):(a=a.slice(1),re=($=parseInt(a,10)).toString(10))),a=a.replace(/^0+/,""),isNaN($)||re.toLowerCase()!==a?(ie(C,"Invalid character entity"),"&"+C.entity+";"):String.fromCodePoint($))}function Ae(C,a){"<"===a?(C.state=E.OPEN_WAKA,C.startTagPosition=C.position):f(a)||(ie(C,"Non-whitespace before first tag."),C.textNode=a,C.state=E.TEXT)}function Pe(C,a){var U="";return a<C.length&&(U=C.charAt(a)),U}E=g.STATE,String.fromCodePoint||(C=String.fromCharCode,a=Math.floor,U=function(){var re=[],W=-1,V=arguments.length;if(!V)return"";for(var R="";++W<V;){var r=Number(arguments[W]);if(!isFinite(r)||r<0||r>1114111||a(r)!==r)throw RangeError("Invalid code point: "+r);r<=65535?re.push(r):re.push(55296+((r-=65536)>>10),r%1024+56320),(W+1===V||re.length>16384)&&(R+=C.apply(null,re),re.length=0)}return R},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:U,configurable:!0,writable:!0}):String.fromCodePoint=U)}(Y)},45470:function(){!function(K,Y){"use strict";if(!K.setImmediate){var v,p=1,g={},_=!1,P=K.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(K);b=b&&b.setTimeout?b:K,"[object process]"==={}.toString.call(K.process)?function y(){v=function(L){process.nextTick(function(){m(L)})}}():function N(){if(K.postMessage&&!K.importScripts){var L=!0,k=K.onmessage;return K.onmessage=function(){L=!1},K.postMessage("","*"),K.onmessage=k,L}}()?function w(){var L="setImmediate$"+Math.random()+"$",k=function(S){S.source===K&&"string"==typeof S.data&&0===S.data.indexOf(L)&&m(+S.data.slice(L.length))};K.addEventListener?K.addEventListener("message",k,!1):K.attachEvent("onmessage",k),v=function(S){K.postMessage(L+S,"*")}}():K.MessageChannel?function x(){var L=new MessageChannel;L.port1.onmessage=function(k){m(k.data)},v=function(k){L.port2.postMessage(k)}}():P&&"onreadystatechange"in P.createElement("script")?function O(){var L=P.documentElement;v=function(k){var S=P.createElement("script");S.onreadystatechange=function(){m(k),S.onreadystatechange=null,L.removeChild(S),S=null},L.appendChild(S)}}():function D(){v=function(L){setTimeout(m,0,L)}}(),b.setImmediate=function Z(L){"function"!=typeof L&&(L=new Function(""+L));for(var k=new Array(arguments.length-1),S=0;S<k.length;S++)k[S]=arguments[S+1];return g[p]={callback:L,args:k},v(p),p++},b.clearImmediate=T}function T(L){delete g[L]}function m(L){if(_)setTimeout(m,0,L);else{var k=g[L];if(k){_=!0;try{!function d(L){var k=L.callback,S=L.args;switch(S.length){case 0:k();break;case 1:k(S[0]);break;case 2:k(S[0],S[1]);break;case 3:k(S[0],S[1],S[2]);break;default:k.apply(Y,S)}}(k)}finally{T(L),_=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},36917:(K,Y,p)=>{K.exports=P;var g=p(93105).EventEmitter;function P(){g.call(this)}p(59879)(P,g),P.Readable=p(32833),P.Writable=p(37807),P.Duplex=p(20942),P.Transform=p(55431),P.PassThrough=p(90619),P.finished=p(6820),P.pipeline=p(36076),P.Stream=P,P.prototype.pipe=function(v,Z){var T=this;function d(D){v.writable&&!1===v.write(D)&&T.pause&&T.pause()}function m(){T.readable&&T.resume&&T.resume()}T.on("data",d),v.on("drain",m),!v._isStdio&&(!Z||!1!==Z.end)&&(T.on("end",N),T.on("close",w));var y=!1;function N(){y||(y=!0,v.end())}function w(){y||(y=!0,"function"==typeof v.destroy&&v.destroy())}function x(D){if(O(),0===g.listenerCount(this,"error"))throw D}function O(){T.removeListener("data",d),v.removeListener("drain",m),T.removeListener("end",N),T.removeListener("close",w),T.removeListener("error",x),v.removeListener("error",x),T.removeListener("end",O),T.removeListener("close",O),v.removeListener("close",O)}return T.on("error",x),v.on("error",x),T.on("end",O),T.on("close",O),v.on("close",O),v.emit("pipe",T),v}},32519:(K,Y,p)=>{"use strict";var g=p(55859).Buffer,_=g.isEncoding||function(S){switch((S=""+S)&&S.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Z(S){var M;switch(this.encoding=function v(S){var M=function P(S){if(!S)return"utf8";for(var M;;)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(M)return;S=(""+S).toLowerCase(),M=!0}}(S);if("string"!=typeof M&&(g.isEncoding===_||!_(S)))throw new Error("Unknown encoding: "+S);return M||S}(S),this.encoding){case"utf16le":this.text=x,this.end=O,M=4;break;case"utf8":this.fillLast=y,M=4;break;case"base64":this.text=D,this.end=b,M=3;break;default:return this.write=L,void(this.end=k)}this.lastNeed=0,this.lastTotal=0,this.lastChar=g.allocUnsafe(M)}function T(S){return S<=127?0:S>>5==6?2:S>>4==14?3:S>>3==30?4:S>>6==2?-1:-2}function y(S){var M=this.lastTotal-this.lastNeed,f=function m(S,M,f){if(128!=(192&M[0]))return S.lastNeed=0,"\ufffd";if(S.lastNeed>1&&M.length>1){if(128!=(192&M[1]))return S.lastNeed=1,"\ufffd";if(S.lastNeed>2&&M.length>2&&128!=(192&M[2]))return S.lastNeed=2,"\ufffd"}}(this,S);return void 0!==f?f:this.lastNeed<=S.length?(S.copy(this.lastChar,M,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(S.copy(this.lastChar,M,0,S.length),void(this.lastNeed-=S.length))}function x(S,M){if((S.length-M)%2==0){var f=S.toString("utf16le",M);if(f){var u=f.charCodeAt(f.length-1);if(u>=55296&&u<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1],f.slice(0,-1)}return f}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=S[S.length-1],S.toString("utf16le",M,S.length-1)}function O(S){var M=S&&S.length?this.write(S):"";return this.lastNeed?M+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):M}function D(S,M){var f=(S.length-M)%3;return 0===f?S.toString("base64",M):(this.lastNeed=3-f,this.lastTotal=3,1===f?this.lastChar[0]=S[S.length-1]:(this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1]),S.toString("base64",M,S.length-f))}function b(S){var M=S&&S.length?this.write(S):"";return this.lastNeed?M+this.lastChar.toString("base64",0,3-this.lastNeed):M}function L(S){return S.toString(this.encoding)}function k(S){return S&&S.length?this.write(S):""}Y.s=Z,Z.prototype.write=function(S){if(0===S.length)return"";var M,f;if(this.lastNeed){if(void 0===(M=this.fillLast(S)))return"";f=this.lastNeed,this.lastNeed=0}else f=0;return f<S.length?M?M+this.text(S,f):this.text(S,f):M||""},Z.prototype.end=function w(S){var M=S&&S.length?this.write(S):"";return this.lastNeed?M+"\ufffd":M},Z.prototype.text=function N(S,M){var f=function d(S,M,f){var u=M.length-1;if(u<f)return 0;var l=T(M[u]);return l>=0?(l>0&&(S.lastNeed=l-1),l):--u<f||-2===l?0:(l=T(M[u]))>=0?(l>0&&(S.lastNeed=l-2),l):--u<f||-2===l?0:(l=T(M[u]))>=0?(l>0&&(2===l?l=0:S.lastNeed=l-3),l):0}(this,S,M);if(!this.lastNeed)return S.toString("utf8",M);this.lastTotal=f;var u=S.length-(f-this.lastNeed);return S.copy(this.lastChar,0,u),S.toString("utf8",M,u)},Z.prototype.fillLast=function(S){if(this.lastNeed<=S.length)return S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,S.length),this.lastNeed-=S.length}},82584:function(K,Y,p){var g=typeof global<"u"&&global||typeof self<"u"&&self||window,_=Function.prototype.apply;function P(v,Z){this._id=v,this._clearFn=Z}Y.setTimeout=function(){return new P(_.call(setTimeout,g,arguments),clearTimeout)},Y.setInterval=function(){return new P(_.call(setInterval,g,arguments),clearInterval)},Y.clearTimeout=Y.clearInterval=function(v){v&&v.close()},P.prototype.unref=P.prototype.ref=function(){},P.prototype.close=function(){this._clearFn.call(g,this._id)},Y.enroll=function(v,Z){clearTimeout(v._idleTimeoutId),v._idleTimeout=Z},Y.unenroll=function(v){clearTimeout(v._idleTimeoutId),v._idleTimeout=-1},Y._unrefActive=Y.active=function(v){clearTimeout(v._idleTimeoutId);var Z=v._idleTimeout;Z>=0&&(v._idleTimeoutId=setTimeout(function(){v._onTimeout&&v._onTimeout()},Z))},p(45470),Y.setImmediate=typeof self<"u"&&self.setImmediate||typeof global<"u"&&global.setImmediate||this&&this.setImmediate,Y.clearImmediate=typeof self<"u"&&self.clearImmediate||typeof global<"u"&&global.clearImmediate||this&&this.clearImmediate},15822:K=>{function p(g){try{if(!global.localStorage)return!1}catch{return!1}var _=global.localStorage[g];return null!=_&&"true"===String(_).toLowerCase()}K.exports=function Y(g,_){if(p("noDeprecation"))return g;var P=!1;return function v(){if(!P){if(p("throwDeprecation"))throw new Error(_);p("traceDeprecation")?console.trace(_):console.warn(_),P=!0}return g.apply(this,arguments)}}},62655:function(K,Y){(function(){"use strict";Y.stripBOM=function(p){return"\ufeff"===p[0]?p.substring(1):p}}).call(this)},54408:function(K,Y,p){(function(){"use strict";var g,_,P,v,Z,T={}.hasOwnProperty;g=p(71741),_=p(81031).defaults,v=function(d){return"string"==typeof d&&(d.indexOf("&")>=0||d.indexOf(">")>=0||d.indexOf("<")>=0)},Z=function(d){return"<![CDATA["+P(d)+"]]>"},P=function(d){return d.replace("]]>","]]]]><![CDATA[>")},Y.Builder=function(){function d(m){var y,N;for(y in this.options={},N=_[.2])T.call(N,y)&&(this.options[y]=N[y]);for(y in m)T.call(m,y)&&(this.options[y]=m[y])}return d.prototype.buildObject=function(m){var y,N,w,x,O,D;return y=this.options.attrkey,N=this.options.charkey,1===Object.keys(m).length&&this.options.rootName===_[.2].rootName?m=m[O=Object.keys(m)[0]]:O=this.options.rootName,D=this,w=function(b,L){var k,S,M,f,u;if("object"!=typeof L)D.options.cdata&&v(L)?b.raw(Z(L)):b.txt(L);else if(Array.isArray(L)){for(f in L)if(T.call(L,f))for(u in S=L[f])M=S[u],b=w(b.ele(u),M).up()}else for(u in L)if(T.call(L,u))if(S=L[u],u===y){if("object"==typeof S)for(k in S)b=b.att(k,S[k])}else if(u===N)b=D.options.cdata&&v(S)?b.raw(Z(S)):b.txt(S);else if(Array.isArray(S))for(f in S)T.call(S,f)&&(b="string"==typeof(M=S[f])?D.options.cdata&&v(M)?b.ele(u).raw(Z(M)).up():b.ele(u,M).up():w(b.ele(u),M).up());else"object"==typeof S?b=w(b.ele(u),S).up():"string"==typeof S&&D.options.cdata&&v(S)?b=b.ele(u).raw(Z(S)).up():(null==S&&(S=""),b=b.ele(u,S.toString()).up());return b},x=g.create(O,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),w(x,m).end(this.options.renderOpts)},d}()}).call(this)},81031:function(K,Y){(function(){Y.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},52972:function(K,Y,p){(function(){"use strict";var g,_,P,v,Z,T,d,m,y,N=function(O,D){return function(){return O.apply(D,arguments)}},x={}.hasOwnProperty;m=p(5473),v=p(93105),g=p(62655),d=p(65489),y=p(82584).setImmediate,_=p(81031).defaults,Z=function(O){return"object"==typeof O&&null!=O&&0===Object.keys(O).length},T=function(O,D,b){var L,k;for(L=0,k=O.length;L<k;L++)D=(0,O[L])(D,b);return D},P=function(O,D,b){var L;return(L=Object.create(null)).value=b,L.writable=!0,L.enumerable=!0,L.configurable=!0,Object.defineProperty(O,D,L)},Y.Parser=function(O){function D(b){var L,k;if(this.parseStringPromise=N(this.parseStringPromise,this),this.parseString=N(this.parseString,this),this.reset=N(this.reset,this),this.assignOrPush=N(this.assignOrPush,this),this.processAsync=N(this.processAsync,this),!(this instanceof Y.Parser))return new Y.Parser(b);for(L in this.options={},k=_[.2])x.call(k,L)&&(this.options[L]=k[L]);for(L in b)x.call(b,L)&&(this.options[L]=b[L]);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(d.normalize)),this.reset()}return function(O,D){for(var b in D)x.call(D,b)&&(O[b]=D[b]);function L(){this.constructor=O}L.prototype=D.prototype,O.prototype=new L,O.__super__=D.prototype}(D,O),D.prototype.processAsync=function(){var b,L;try{return this.remaining.length<=this.options.chunkSize?(b=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(b),this.saxParser.close()):(b=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(b),y(this.processAsync))}catch(k){if(L=k,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(L)}},D.prototype.assignOrPush=function(b,L,k){return L in b?(b[L]instanceof Array||P(b,L,[b[L]]),b[L].push(k)):P(b,L,this.options.explicitArray?[k]:k)},D.prototype.reset=function(){var b,L,k,S,M;return this.removeAllListeners(),this.saxParser=m.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(M=this,function(f){if(M.saxParser.resume(),!M.saxParser.errThrown)return M.saxParser.errThrown=!0,M.emit("error",f)}),this.saxParser.onend=function(M){return function(){if(!M.saxParser.ended)return M.saxParser.ended=!0,M.emit("end",M.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,S=[],b=this.options.attrkey,L=this.options.charkey,this.saxParser.onopentag=function(M){return function(f){var u,l,h,e,E;if((h={})[L]="",!M.options.ignoreAttrs)for(u in E=f.attributes)x.call(E,u)&&(!(b in h)&&!M.options.mergeAttrs&&(h[b]={}),l=M.options.attrValueProcessors?T(M.options.attrValueProcessors,f.attributes[u],u):f.attributes[u],e=M.options.attrNameProcessors?T(M.options.attrNameProcessors,u):u,M.options.mergeAttrs?M.assignOrPush(h,e,l):P(h[b],e,l));return h["#name"]=M.options.tagNameProcessors?T(M.options.tagNameProcessors,f.name):f.name,M.options.xmlns&&(h[M.options.xmlnskey]={uri:f.uri,local:f.local}),S.push(h)}}(this),this.saxParser.onclosetag=function(M){return function(){var f,u,l,h,e,E,B,I,H,X;if(E=S.pop(),e=E["#name"],(!M.options.explicitChildren||!M.options.preserveChildrenOrder)&&delete E["#name"],!0===E.cdata&&(f=E.cdata,delete E.cdata),H=S[S.length-1],E[L].match(/^\s*$/)&&!f?(u=E[L],delete E[L]):(M.options.trim&&(E[L]=E[L].trim()),M.options.normalize&&(E[L]=E[L].replace(/\s{2,}/g," ").trim()),E[L]=M.options.valueProcessors?T(M.options.valueProcessors,E[L],e):E[L],1===Object.keys(E).length&&L in E&&!M.EXPLICIT_CHARKEY&&(E=E[L])),Z(E)&&(E="function"==typeof M.options.emptyTag?M.options.emptyTag():""!==M.options.emptyTag?M.options.emptyTag:u),null!=M.options.validator&&(X="/"+function(){var ne,ue,fe;for(fe=[],ne=0,ue=S.length;ne<ue;ne++)fe.push((h=S[ne])["#name"]);return fe}().concat(e).join("/"),function(){try{E=M.options.validator(X,H&&H[e],E)}catch(ue){return M.emit("error",ue)}}()),M.options.explicitChildren&&!M.options.mergeAttrs&&"object"==typeof E)if(M.options.preserveChildrenOrder){if(H){for(l in H[M.options.childkey]=H[M.options.childkey]||[],B={},E)x.call(E,l)&&P(B,l,E[l]);H[M.options.childkey].push(B),delete E["#name"],1===Object.keys(E).length&&L in E&&!M.EXPLICIT_CHARKEY&&(E=E[L])}}else h={},M.options.attrkey in E&&(h[M.options.attrkey]=E[M.options.attrkey],delete E[M.options.attrkey]),!M.options.charsAsChildren&&M.options.charkey in E&&(h[M.options.charkey]=E[M.options.charkey],delete E[M.options.charkey]),Object.getOwnPropertyNames(E).length>0&&(h[M.options.childkey]=E),E=h;return S.length>0?M.assignOrPush(H,e,E):(M.options.explicitRoot&&(I=E,P(E={},e,I)),M.resultObject=E,M.saxParser.ended=!0,M.emit("end",M.resultObject))}}(this),k=function(M){return function(f){var u,l;if(l=S[S.length-1])return l[L]+=f,M.options.explicitChildren&&M.options.preserveChildrenOrder&&M.options.charsAsChildren&&(M.options.includeWhiteChars||""!==f.replace(/\\n/g,"").trim())&&(l[M.options.childkey]=l[M.options.childkey]||[],(u={"#name":"__text__"})[L]=f,M.options.normalize&&(u[L]=u[L].replace(/\s{2,}/g," ").trim()),l[M.options.childkey].push(u)),l}}(this),this.saxParser.ontext=k,this.saxParser.oncdata=function(f){var u;if(u=k(f))return u.cdata=!0}},D.prototype.parseString=function(b,L){var k;null!=L&&"function"==typeof L&&(this.on("end",function(S){return this.reset(),L(null,S)}),this.on("error",function(S){return this.reset(),L(S)}));try{return""===(b=b.toString()).trim()?(this.emit("end",null),!0):(b=g.stripBOM(b),this.options.async?(this.remaining=b,y(this.processAsync),this.saxParser):this.saxParser.write(b).close())}catch(S){if(k=S,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",k),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw k}},D.prototype.parseStringPromise=function(b){return new Promise((L=this,function(k,S){return L.parseString(b,function(M,f){return M?S(M):k(f)})}));var L},D}(v),Y.parseString=function(O,D,b){var L,k;return null!=b?("function"==typeof b&&(L=b),"object"==typeof D&&(k=D)):("function"==typeof D&&(L=D),k={}),new Y.Parser(k).parseString(O,L)},Y.parseStringPromise=function(O,D){var b;return"object"==typeof D&&(b=D),new Y.Parser(b).parseStringPromise(O)}}).call(this)},65489:function(K,Y){(function(){"use strict";var p;p=new RegExp(/(?!xmlns)^.*:/),Y.normalize=function(g){return g.toLowerCase()},Y.firstCharLowerCase=function(g){return g.charAt(0).toLowerCase()+g.slice(1)},Y.stripPrefix=function(g){return g.replace(p,"")},Y.parseNumbers=function(g){return isNaN(g)||(g=g%1==0?parseInt(g,10):parseFloat(g)),g},Y.parseBooleans=function(g){return/^(?:true|false)$/i.test(g)&&(g="true"===g.toLowerCase()),g}}).call(this)},49277:function(K,Y,p){(function(){"use strict";var g,_,P,v,T={}.hasOwnProperty;_=p(81031),g=p(54408),P=p(52972),v=p(65489),Y.defaults=_.defaults,Y.processors=v,Y.ValidationError=function(d){function m(y){this.message=y}return function(d,m){for(var y in m)T.call(m,y)&&(d[y]=m[y]);function N(){this.constructor=d}N.prototype=m.prototype,d.prototype=new N,d.__super__=m.prototype}(m,Error),m}(),Y.Builder=g.Builder,Y.Parser=P.Parser,Y.parseString=P.parseString,Y.parseStringPromise=P.parseStringPromise}).call(this)},69053:function(K){(function(){K.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},42870:function(K){(function(){K.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},63146:function(K){(function(){var Y,p,g,_,P,v,Z,T=[].slice,d={}.hasOwnProperty;Y=function(){var m,y,N,w,x,O;if(O=arguments[0],x=2<=arguments.length?T.call(arguments,1):[],P(Object.assign))Object.assign.apply(null,arguments);else for(m=0,N=x.length;m<N;m++)if(null!=(w=x[m]))for(y in w)d.call(w,y)&&(O[y]=w[y]);return O},P=function(m){return!!m&&"[object Function]"===Object.prototype.toString.call(m)},v=function(m){var y;return!!m&&("function"==(y=typeof m)||"object"===y)},g=function(m){return P(Array.isArray)?Array.isArray(m):"[object Array]"===Object.prototype.toString.call(m)},_=function(m){var y;if(g(m))return!m.length;for(y in m)if(d.call(m,y))return!1;return!0},Z=function(m){var y,N;return v(m)&&(N=Object.getPrototypeOf(m))&&(y=N.constructor)&&"function"==typeof y&&y instanceof y&&Function.prototype.toString.call(y)===Function.prototype.toString.call(Object)},p=function(m){return P(m.valueOf)?m.valueOf():m},K.exports.assign=Y,K.exports.isFunction=P,K.exports.isObject=v,K.exports.isArray=g,K.exports.isEmpty=_,K.exports.isPlainObject=Z,K.exports.getValue=p}).call(this)},47159:function(K){(function(){K.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},88828:function(K,Y,p){(function(){var g;g=p(42870),p(26627),K.exports=function(){function v(Z,T,d){if(this.parent=Z,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==T)throw new Error("Missing attribute name. "+this.debugInfo(T));this.name=this.stringify.name(T),this.value=this.stringify.attValue(d),this.type=g.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(v.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(v.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(v.prototype,"textContent",{get:function(){return this.value},set:function(Z){return this.value=Z||""}}),Object.defineProperty(v.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(v.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(v.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(v.prototype,"specified",{get:function(){return!0}}),v.prototype.clone=function(){return Object.create(this)},v.prototype.toString=function(Z){return this.options.writer.attribute(this,this.options.writer.filterOptions(Z))},v.prototype.debugInfo=function(Z){return null==(Z=Z||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+Z+"}, parent: <"+this.parent.name+">"},v.prototype.isEqualNode=function(Z){return!(Z.namespaceURI!==this.namespaceURI||Z.prefix!==this.prefix||Z.localName!==this.localName||Z.value!==this.value)},v}()}).call(this)},19832:function(K,Y,p){(function(){var g,P,Z={}.hasOwnProperty;g=p(42870),P=p(26068),K.exports=function(T){function d(m,y){if(d.__super__.constructor.call(this,m),null==y)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=g.CData,this.value=this.stringify.cdata(y)}return function(T,d){for(var m in d)Z.call(d,m)&&(T[m]=d[m]);function y(){this.constructor=T}y.prototype=d.prototype,T.prototype=new y,T.__super__=d.prototype}(d,T),d.prototype.clone=function(){return Object.create(this)},d.prototype.toString=function(m){return this.options.writer.cdata(this,this.options.writer.filterOptions(m))},d}(P)}).call(this)},26068:function(K,Y,p){(function(){var _,v={}.hasOwnProperty;_=p(26627),K.exports=function(Z){function T(d){T.__super__.constructor.call(this,d),this.value=""}return function(Z,T){for(var d in T)v.call(T,d)&&(Z[d]=T[d]);function m(){this.constructor=Z}m.prototype=T.prototype,Z.prototype=new m,Z.__super__=T.prototype}(T,Z),Object.defineProperty(T.prototype,"data",{get:function(){return this.value},set:function(d){return this.value=d||""}}),Object.defineProperty(T.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(T.prototype,"textContent",{get:function(){return this.value},set:function(d){return this.value=d||""}}),T.prototype.clone=function(){return Object.create(this)},T.prototype.substringData=function(d,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.appendData=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.insertData=function(d,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.deleteData=function(d,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.replaceData=function(d,m,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.isEqualNode=function(d){return!(!T.__super__.isEqualNode.apply(this,arguments).isEqualNode(d)||d.data!==this.data)},T}(_)}).call(this)},73940:function(K,Y,p){(function(){var g,_,Z={}.hasOwnProperty;g=p(42870),_=p(26068),K.exports=function(T){function d(m,y){if(d.__super__.constructor.call(this,m),null==y)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=g.Comment,this.value=this.stringify.comment(y)}return function(T,d){for(var m in d)Z.call(d,m)&&(T[m]=d[m]);function y(){this.constructor=T}y.prototype=d.prototype,T.prototype=new y,T.__super__=d.prototype}(d,T),d.prototype.clone=function(){return Object.create(this)},d.prototype.toString=function(m){return this.options.writer.comment(this,this.options.writer.filterOptions(m))},d}(_)}).call(this)},34817:function(K,Y,p){(function(){var _,P;_=p(34551),P=p(53569),K.exports=function(){function v(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new _,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(v.prototype,"parameterNames",{get:function(){return new P(Object.keys(this.defaultParams))}}),v.prototype.getParameter=function(Z){return this.params.hasOwnProperty(Z)?this.params[Z]:null},v.prototype.canSetParameter=function(Z,T){return!0},v.prototype.setParameter=function(Z,T){return null!=T?this.params[Z]=T:delete this.params[Z]},v}()}).call(this)},34551:function(K){(function(){K.exports=function(){function p(){}return p.prototype.handleError=function(g){throw new Error(g)},p}()}).call(this)},57951:function(K){(function(){K.exports=function(){function p(){}return p.prototype.hasFeature=function(g,_){return!0},p.prototype.createDocumentType=function(g,_,P){throw new Error("This DOM method is not implemented.")},p.prototype.createDocument=function(g,_,P){throw new Error("This DOM method is not implemented.")},p.prototype.createHTMLDocument=function(g){throw new Error("This DOM method is not implemented.")},p.prototype.getFeature=function(g,_){throw new Error("This DOM method is not implemented.")},p}()}).call(this)},53569:function(K){(function(){K.exports=function(){function p(g){this.arr=g||[]}return Object.defineProperty(p.prototype,"length",{get:function(){return this.arr.length}}),p.prototype.item=function(g){return this.arr[g]||null},p.prototype.contains=function(g){return-1!==this.arr.indexOf(g)},p}()}).call(this)},70438:function(K,Y,p){(function(){var g,P,Z={}.hasOwnProperty;P=p(26627),g=p(42870),K.exports=function(T){function d(m,y,N,w,x,O){if(d.__super__.constructor.call(this,m),null==y)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==N)throw new Error("Missing DTD attribute name. "+this.debugInfo(y));if(!w)throw new Error("Missing DTD attribute type. "+this.debugInfo(y));if(!x)throw new Error("Missing DTD attribute default. "+this.debugInfo(y));if(0!==x.indexOf("#")&&(x="#"+x),!x.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(y));if(O&&!x.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(y));this.elementName=this.stringify.name(y),this.type=g.AttributeDeclaration,this.attributeName=this.stringify.name(N),this.attributeType=this.stringify.dtdAttType(w),O&&(this.defaultValue=this.stringify.dtdAttDefault(O)),this.defaultValueType=x}return function(T,d){for(var m in d)Z.call(d,m)&&(T[m]=d[m]);function y(){this.constructor=T}y.prototype=d.prototype,T.prototype=new y,T.__super__=d.prototype}(d,T),d.prototype.toString=function(m){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(m))},d}(P)}).call(this)},33020:function(K,Y,p){(function(){var g,P,Z={}.hasOwnProperty;P=p(26627),g=p(42870),K.exports=function(T){function d(m,y,N){if(d.__super__.constructor.call(this,m),null==y)throw new Error("Missing DTD element name. "+this.debugInfo());N||(N="(#PCDATA)"),Array.isArray(N)&&(N="("+N.join(",")+")"),this.name=this.stringify.name(y),this.type=g.ElementDeclaration,this.value=this.stringify.dtdElementValue(N)}return function(T,d){for(var m in d)Z.call(d,m)&&(T[m]=d[m]);function y(){this.constructor=T}y.prototype=d.prototype,T.prototype=new y,T.__super__=d.prototype}(d,T),d.prototype.toString=function(m){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(m))},d}(P)}).call(this)},80015:function(K,Y,p){(function(){var g,P,v,T={}.hasOwnProperty;v=p(63146).isObject,P=p(26627),g=p(42870),K.exports=function(d){function m(y,N,w,x){if(m.__super__.constructor.call(this,y),null==w)throw new Error("Missing DTD entity name. "+this.debugInfo(w));if(null==x)throw new Error("Missing DTD entity value. "+this.debugInfo(w));if(this.pe=!!N,this.name=this.stringify.name(w),this.type=g.EntityDeclaration,v(x)){if(!x.pubID&&!x.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(w));if(x.pubID&&!x.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(w));if(this.internal=!1,null!=x.pubID&&(this.pubID=this.stringify.dtdPubID(x.pubID)),null!=x.sysID&&(this.sysID=this.stringify.dtdSysID(x.sysID)),null!=x.nData&&(this.nData=this.stringify.dtdNData(x.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(w))}else this.value=this.stringify.dtdEntityValue(x),this.internal=!0}return function(d,m){for(var y in m)T.call(m,y)&&(d[y]=m[y]);function N(){this.constructor=d}N.prototype=m.prototype,d.prototype=new N,d.__super__=m.prototype}(m,d),Object.defineProperty(m.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(m.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(m.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(m.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(m.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(m.prototype,"xmlVersion",{get:function(){return null}}),m.prototype.toString=function(y){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(y))},m}(P)}).call(this)},46600:function(K,Y,p){(function(){var g,P,Z={}.hasOwnProperty;P=p(26627),g=p(42870),K.exports=function(T){function d(m,y,N){if(d.__super__.constructor.call(this,m),null==y)throw new Error("Missing DTD notation name. "+this.debugInfo(y));if(!N.pubID&&!N.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(y));this.name=this.stringify.name(y),this.type=g.NotationDeclaration,null!=N.pubID&&(this.pubID=this.stringify.dtdPubID(N.pubID)),null!=N.sysID&&(this.sysID=this.stringify.dtdSysID(N.sysID))}return function(T,d){for(var m in d)Z.call(d,m)&&(T[m]=d[m]);function y(){this.constructor=T}y.prototype=d.prototype,T.prototype=new y,T.__super__=d.prototype}(d,T),Object.defineProperty(d.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(d.prototype,"systemId",{get:function(){return this.sysID}}),d.prototype.toString=function(m){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(m))},d}(P)}).call(this)},29413:function(K,Y,p){(function(){var g,P,v,T={}.hasOwnProperty;v=p(63146).isObject,P=p(26627),g=p(42870),K.exports=function(d){function m(y,N,w,x){var O;m.__super__.constructor.call(this,y),v(N)&&(N=(O=N).version,w=O.encoding,x=O.standalone),N||(N="1.0"),this.type=g.Declaration,this.version=this.stringify.xmlVersion(N),null!=w&&(this.encoding=this.stringify.xmlEncoding(w)),null!=x&&(this.standalone=this.stringify.xmlStandalone(x))}return function(d,m){for(var y in m)T.call(m,y)&&(d[y]=m[y]);function N(){this.constructor=d}N.prototype=m.prototype,d.prototype=new N,d.__super__=m.prototype}(m,d),m.prototype.toString=function(y){return this.options.writer.declaration(this,this.options.writer.filterOptions(y))},m}(P)}).call(this)},67905:function(K,Y,p){(function(){var g,_,P,v,Z,d,m,y,w={}.hasOwnProperty;y=p(63146).isObject,m=p(26627),g=p(42870),_=p(70438),v=p(80015),P=p(33020),Z=p(46600),d=p(25631),K.exports=function(x){function O(D,b,L){var k,S,M,f,u,l;if(O.__super__.constructor.call(this,D),this.type=g.DocType,D.children)for(S=0,M=(f=D.children).length;S<M;S++)if((k=f[S]).type===g.Element){this.name=k.name;break}this.documentObject=D,y(b)&&(b=(u=b).pubID,L=u.sysID),null==L&&(L=(l=[b,L])[0],b=l[1]),null!=b&&(this.pubID=this.stringify.dtdPubID(b)),null!=L&&(this.sysID=this.stringify.dtdSysID(L))}return function(x,O){for(var D in O)w.call(O,D)&&(x[D]=O[D]);function b(){this.constructor=x}b.prototype=O.prototype,x.prototype=new b,x.__super__=O.prototype}(O,x),Object.defineProperty(O.prototype,"entities",{get:function(){var D,b,L,k,S;for(k={},b=0,L=(S=this.children).length;b<L;b++)(D=S[b]).type===g.EntityDeclaration&&!D.pe&&(k[D.name]=D);return new d(k)}}),Object.defineProperty(O.prototype,"notations",{get:function(){var D,b,L,k,S;for(k={},b=0,L=(S=this.children).length;b<L;b++)(D=S[b]).type===g.NotationDeclaration&&(k[D.name]=D);return new d(k)}}),Object.defineProperty(O.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(O.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(O.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),O.prototype.element=function(D,b){var L;return L=new P(this,D,b),this.children.push(L),this},O.prototype.attList=function(D,b,L,k,S){var M;return M=new _(this,D,b,L,k,S),this.children.push(M),this},O.prototype.entity=function(D,b){var L;return L=new v(this,!1,D,b),this.children.push(L),this},O.prototype.pEntity=function(D,b){var L;return L=new v(this,!0,D,b),this.children.push(L),this},O.prototype.notation=function(D,b){var L;return L=new Z(this,D,b),this.children.push(L),this},O.prototype.toString=function(D){return this.options.writer.docType(this,this.options.writer.filterOptions(D))},O.prototype.ele=function(D,b){return this.element(D,b)},O.prototype.att=function(D,b,L,k,S){return this.attList(D,b,L,k,S)},O.prototype.ent=function(D,b){return this.entity(D,b)},O.prototype.pent=function(D,b){return this.pEntity(D,b)},O.prototype.not=function(D,b){return this.notation(D,b)},O.prototype.up=function(){return this.root()||this.documentObject},O.prototype.isEqualNode=function(D){return!(!O.__super__.isEqualNode.apply(this,arguments).isEqualNode(D)||D.name!==this.name||D.publicId!==this.publicId||D.systemId!==this.systemId)},O}(m)}).call(this)},32008:function(K,Y,p){(function(){var g,_,P,Z,T,d,m,N={}.hasOwnProperty;m=p(63146).isPlainObject,P=p(57951),_=p(34817),Z=p(26627),g=p(42870),d=p(93258),T=p(28337),K.exports=function(w){function x(O){x.__super__.constructor.call(this,null),this.name="#document",this.type=g.Document,this.documentURI=null,this.domConfig=new _,O||(O={}),O.writer||(O.writer=new T),this.options=O,this.stringify=new d(O)}return function(w,x){for(var O in x)N.call(x,O)&&(w[O]=x[O]);function D(){this.constructor=w}D.prototype=x.prototype,w.prototype=new D,w.__super__=x.prototype}(x,w),Object.defineProperty(x.prototype,"implementation",{value:new P}),Object.defineProperty(x.prototype,"doctype",{get:function(){var O,D,b,L;for(D=0,b=(L=this.children).length;D<b;D++)if((O=L[D]).type===g.DocType)return O;return null}}),Object.defineProperty(x.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(x.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(x.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(x.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===g.Declaration?this.children[0].encoding:null}}),Object.defineProperty(x.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===g.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(x.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===g.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(x.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(x.prototype,"origin",{get:function(){return null}}),Object.defineProperty(x.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(x.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(x.prototype,"contentType",{get:function(){return null}}),x.prototype.end=function(O){var D;return D={},O?m(O)&&(D=O,O=this.options.writer):O=this.options.writer,O.document(this,O.filterOptions(D))},x.prototype.toString=function(O){return this.options.writer.document(this,this.options.writer.filterOptions(O))},x.prototype.createElement=function(O){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.createTextNode=function(O){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.createComment=function(O){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.createCDATASection=function(O){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.createProcessingInstruction=function(O,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.createAttribute=function(O){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.createEntityReference=function(O){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.getElementsByTagName=function(O){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.importNode=function(O,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.createElementNS=function(O,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.createAttributeNS=function(O,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.getElementsByTagNameNS=function(O,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.getElementById=function(O){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.adoptNode=function(O){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.renameNode=function(O,D,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.getElementsByClassName=function(O){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.createEvent=function(O){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.createNodeIterator=function(O,D,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},x.prototype.createTreeWalker=function(O,D,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},x}(Z)}).call(this)},25795:function(K,Y,p){(function(){var g,_,P,v,Z,T,d,m,y,N,w,x,D,b,L,k,S,M,f,u,l,h,e,E={}.hasOwnProperty;e=p(63146),l=e.isObject,u=e.isFunction,h=e.isPlainObject,f=e.getValue,g=p(42870),x=p(32008),D=p(17770),v=p(19832),Z=p(73940),L=p(99166),M=p(80504),b=p(12726),N=p(29413),w=p(67905),T=p(70438),m=p(80015),d=p(33020),y=p(46600),P=p(88828),S=p(93258),k=p(28337),_=p(47159),K.exports=function(){function B(I,H,X){var ne;this.name="?xml",this.type=g.Document,I||(I={}),ne={},I.writer?h(I.writer)&&(ne=I.writer,I.writer=new k):I.writer=new k,this.options=I,this.writer=I.writer,this.writerOptions=this.writer.filterOptions(ne),this.stringify=new S(I),this.onDataCallback=H||function(){},this.onEndCallback=X||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return B.prototype.createChildNode=function(I){var X,ne,ue,fe,ie,ge,de;switch(I.type){case g.CData:this.cdata(I.value);break;case g.Comment:this.comment(I.value);break;case g.Element:for(X in ne={},ge=I.attribs)E.call(ge,X)&&(ne[X]=ge[X].value);this.node(I.name,ne);break;case g.Dummy:this.dummy();break;case g.Raw:this.raw(I.value);break;case g.Text:this.text(I.value);break;case g.ProcessingInstruction:this.instruction(I.target,I.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+I.constructor.name)}for(fe=0,ie=(de=I.children).length;fe<ie;fe++)this.createChildNode(ue=de[fe]),ue.type===g.Element&&this.up();return this},B.prototype.dummy=function(){return this},B.prototype.node=function(I,H,X){var ne;if(null==I)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(I));return this.openCurrent(),I=f(I),null==H&&(H={}),H=f(H),l(H)||(X=(ne=[H,X])[0],H=ne[1]),this.currentNode=new D(this,I,H),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=X&&this.text(X),this},B.prototype.element=function(I,H,X){var ne,ue,fe,ie,ge,de;if(this.currentNode&&this.currentNode.type===g.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(I)||l(I)||u(I))for(ie=this.options.noValidation,this.options.noValidation=!0,(de=new x(this.options).element("TEMP_ROOT")).element(I),this.options.noValidation=ie,ue=0,fe=(ge=de.children).length;ue<fe;ue++)this.createChildNode(ne=ge[ue]),ne.type===g.Element&&this.up();else this.node(I,H,X);return this},B.prototype.attribute=function(I,H){var X;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(I));if(null!=I&&(I=f(I)),l(I))for(X in I)E.call(I,X)&&this.attribute(X,I[X]);else u(H)&&(H=H.apply()),this.options.keepNullAttributes&&null==H?this.currentNode.attribs[I]=new P(this,I,""):null!=H&&(this.currentNode.attribs[I]=new P(this,I,H));return this},B.prototype.text=function(I){var H;return this.openCurrent(),H=new M(this,I),this.onData(this.writer.text(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},B.prototype.cdata=function(I){var H;return this.openCurrent(),H=new v(this,I),this.onData(this.writer.cdata(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},B.prototype.comment=function(I){var H;return this.openCurrent(),H=new Z(this,I),this.onData(this.writer.comment(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},B.prototype.raw=function(I){var H;return this.openCurrent(),H=new L(this,I),this.onData(this.writer.raw(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},B.prototype.instruction=function(I,H){var X,ne,fe,ie;if(this.openCurrent(),null!=I&&(I=f(I)),null!=H&&(H=f(H)),Array.isArray(I))for(X=0,fe=I.length;X<fe;X++)this.instruction(ne=I[X]);else if(l(I))for(ne in I)E.call(I,ne)&&this.instruction(ne,I[ne]);else u(H)&&(H=H.apply()),ie=new b(this,I,H),this.onData(this.writer.processingInstruction(ie,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},B.prototype.declaration=function(I,H,X){var ne;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return ne=new N(this,I,H,X),this.onData(this.writer.declaration(ne,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},B.prototype.doctype=function(I,H,X){if(this.openCurrent(),null==I)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new w(this,H,X),this.currentNode.rootNodeName=I,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},B.prototype.dtdElement=function(I,H){var X;return this.openCurrent(),X=new d(this,I,H),this.onData(this.writer.dtdElement(X,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},B.prototype.attList=function(I,H,X,ne,ue){var fe;return this.openCurrent(),fe=new T(this,I,H,X,ne,ue),this.onData(this.writer.dtdAttList(fe,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},B.prototype.entity=function(I,H){var X;return this.openCurrent(),X=new m(this,!1,I,H),this.onData(this.writer.dtdEntity(X,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},B.prototype.pEntity=function(I,H){var X;return this.openCurrent(),X=new m(this,!0,I,H),this.onData(this.writer.dtdEntity(X,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},B.prototype.notation=function(I,H){var X;return this.openCurrent(),X=new y(this,I,H),this.onData(this.writer.dtdNotation(X,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},B.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},B.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},B.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},B.prototype.openNode=function(I){var X,ne,ue;if(!I.isOpen){if(!this.root&&0===this.currentLevel&&I.type===g.Element&&(this.root=I),X="",I.type===g.Element){for(ne in this.writerOptions.state=_.OpenTag,X=this.writer.indent(I,this.writerOptions,this.currentLevel)+"<"+I.name,ue=I.attribs)E.call(ue,ne)&&(X+=this.writer.attribute(ue[ne],this.writerOptions,this.currentLevel));X+=(I.children?">":"/>")+this.writer.endline(I,this.writerOptions,this.currentLevel),this.writerOptions.state=_.InsideTag}else this.writerOptions.state=_.OpenTag,X=this.writer.indent(I,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+I.rootNodeName,I.pubID&&I.sysID?X+=' PUBLIC "'+I.pubID+'" "'+I.sysID+'"':I.sysID&&(X+=' SYSTEM "'+I.sysID+'"'),I.children?(X+=" [",this.writerOptions.state=_.InsideTag):(this.writerOptions.state=_.CloseTag,X+=">"),X+=this.writer.endline(I,this.writerOptions,this.currentLevel);return this.onData(X,this.currentLevel),I.isOpen=!0}},B.prototype.closeNode=function(I){var H;if(!I.isClosed)return"",this.writerOptions.state=_.CloseTag,H=I.type===g.Element?this.writer.indent(I,this.writerOptions,this.currentLevel)+"</"+I.name+">"+this.writer.endline(I,this.writerOptions,this.currentLevel):this.writer.indent(I,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(I,this.writerOptions,this.currentLevel),this.writerOptions.state=_.None,this.onData(H,this.currentLevel),I.isClosed=!0},B.prototype.onData=function(I,H){return this.documentStarted=!0,this.onDataCallback(I,H+1)},B.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},B.prototype.debugInfo=function(I){return null==I?"":"node: <"+I+">"},B.prototype.ele=function(){return this.element.apply(this,arguments)},B.prototype.nod=function(I,H,X){return this.node(I,H,X)},B.prototype.txt=function(I){return this.text(I)},B.prototype.dat=function(I){return this.cdata(I)},B.prototype.com=function(I){return this.comment(I)},B.prototype.ins=function(I,H){return this.instruction(I,H)},B.prototype.dec=function(I,H,X){return this.declaration(I,H,X)},B.prototype.dtd=function(I,H,X){return this.doctype(I,H,X)},B.prototype.e=function(I,H,X){return this.element(I,H,X)},B.prototype.n=function(I,H,X){return this.node(I,H,X)},B.prototype.t=function(I){return this.text(I)},B.prototype.d=function(I){return this.cdata(I)},B.prototype.c=function(I){return this.comment(I)},B.prototype.r=function(I){return this.raw(I)},B.prototype.i=function(I,H){return this.instruction(I,H)},B.prototype.att=function(){return this.currentNode&&this.currentNode.type===g.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},B.prototype.a=function(){return this.currentNode&&this.currentNode.type===g.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},B.prototype.ent=function(I,H){return this.entity(I,H)},B.prototype.pent=function(I,H){return this.pEntity(I,H)},B.prototype.not=function(I,H){return this.notation(I,H)},B}()}).call(this)},71616:function(K,Y,p){(function(){var g,P,Z={}.hasOwnProperty;P=p(26627),g=p(42870),K.exports=function(T){function d(m){d.__super__.constructor.call(this,m),this.type=g.Dummy}return function(T,d){for(var m in d)Z.call(d,m)&&(T[m]=d[m]);function y(){this.constructor=T}y.prototype=d.prototype,T.prototype=new y,T.__super__=d.prototype}(d,T),d.prototype.clone=function(){return Object.create(this)},d.prototype.toString=function(m){return""},d}(P)}).call(this)},17770:function(K,Y,p){(function(){var g,_,v,Z,T,d,m,y,w={}.hasOwnProperty;y=p(63146),m=y.isObject,d=y.isFunction,T=y.getValue,Z=p(26627),g=p(42870),_=p(88828),v=p(25631),K.exports=function(x){function O(D,b,L){var k,S,M,f;if(O.__super__.constructor.call(this,D),null==b)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(b),this.type=g.Element,this.attribs={},this.schemaTypeInfo=null,null!=L&&this.attribute(L),D.type===g.Document&&(this.isRoot=!0,this.documentObject=D,D.rootObject=this,D.children))for(S=0,M=(f=D.children).length;S<M;S++)if((k=f[S]).type===g.DocType){k.name=this.name;break}}return function(x,O){for(var D in O)w.call(O,D)&&(x[D]=O[D]);function b(){this.constructor=x}b.prototype=O.prototype,x.prototype=new b,x.__super__=O.prototype}(O,x),Object.defineProperty(O.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(O.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(O.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(O.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(O.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(O.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(O.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(O.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new v(this.attribs)),this.attributeMap}}),O.prototype.clone=function(){var b,L,k;for(b in(L=Object.create(this)).isRoot&&(L.documentObject=null),L.attribs={},k=this.attribs)w.call(k,b)&&(L.attribs[b]=k[b].clone());return L.children=[],this.children.forEach(function(S){var M;return(M=S.clone()).parent=L,L.children.push(M)}),L},O.prototype.attribute=function(D,b){var L;if(null!=D&&(D=T(D)),m(D))for(L in D)w.call(D,L)&&this.attribute(L,D[L]);else d(b)&&(b=b.apply()),this.options.keepNullAttributes&&null==b?this.attribs[D]=new _(this,D,""):null!=b&&(this.attribs[D]=new _(this,D,b));return this},O.prototype.removeAttribute=function(D){var L,k;if(null==D)throw new Error("Missing attribute name. "+this.debugInfo());if(D=T(D),Array.isArray(D))for(L=0,k=D.length;L<k;L++)delete this.attribs[D[L]];else delete this.attribs[D];return this},O.prototype.toString=function(D){return this.options.writer.element(this,this.options.writer.filterOptions(D))},O.prototype.att=function(D,b){return this.attribute(D,b)},O.prototype.a=function(D,b){return this.attribute(D,b)},O.prototype.getAttribute=function(D){return this.attribs.hasOwnProperty(D)?this.attribs[D].value:null},O.prototype.setAttribute=function(D,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.getAttributeNode=function(D){return this.attribs.hasOwnProperty(D)?this.attribs[D]:null},O.prototype.setAttributeNode=function(D){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.removeAttributeNode=function(D){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.getElementsByTagName=function(D){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.getAttributeNS=function(D,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.setAttributeNS=function(D,b,L){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.removeAttributeNS=function(D,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.getAttributeNodeNS=function(D,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.setAttributeNodeNS=function(D){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.getElementsByTagNameNS=function(D,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.hasAttribute=function(D){return this.attribs.hasOwnProperty(D)},O.prototype.hasAttributeNS=function(D,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.setIdAttribute=function(D,b){return this.attribs.hasOwnProperty(D)?this.attribs[D].isId:b},O.prototype.setIdAttributeNS=function(D,b,L){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.setIdAttributeNode=function(D,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.getElementsByTagName=function(D){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.getElementsByTagNameNS=function(D,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.getElementsByClassName=function(D){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.isEqualNode=function(D){var b,L,k;if(!O.__super__.isEqualNode.apply(this,arguments).isEqualNode(D)||D.namespaceURI!==this.namespaceURI||D.prefix!==this.prefix||D.localName!==this.localName||D.attribs.length!==this.attribs.length)return!1;for(b=L=0,k=this.attribs.length-1;0<=k?L<=k:L>=k;b=0<=k?++L:--L)if(!this.attribs[b].isEqualNode(D.attribs[b]))return!1;return!0},O}(Z)}).call(this)},25631:function(K){(function(){K.exports=function(){function p(g){this.nodes=g}return Object.defineProperty(p.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),p.prototype.clone=function(){return this.nodes=null},p.prototype.getNamedItem=function(g){return this.nodes[g]},p.prototype.setNamedItem=function(g){var _;return _=this.nodes[g.nodeName],this.nodes[g.nodeName]=g,_||null},p.prototype.removeNamedItem=function(g){var _;return _=this.nodes[g],delete this.nodes[g],_||null},p.prototype.item=function(g){return this.nodes[Object.keys(this.nodes)[g]]||null},p.prototype.getNamedItemNS=function(g,_){throw new Error("This DOM method is not implemented.")},p.prototype.setNamedItemNS=function(g){throw new Error("This DOM method is not implemented.")},p.prototype.removeNamedItemNS=function(g,_){throw new Error("This DOM method is not implemented.")},p}()}).call(this)},26627:function(K,Y,p){(function(){var g,_,P,v,Z,T,d,m,w,x,O,D,b,L,k,S,M,f={}.hasOwnProperty;M=p(63146),S=M.isObject,k=M.isFunction,L=M.isEmpty,b=M.getValue,m=null,P=null,v=null,Z=null,T=null,O=null,D=null,x=null,d=null,_=null,w=null,g=null,K.exports=function(){function u(l){this.parent=l,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,m||(m=p(17770),P=p(19832),v=p(73940),Z=p(29413),T=p(67905),O=p(99166),D=p(80504),x=p(12726),d=p(71616),_=p(42870),w=p(87137),p(25631),g=p(69053))}return Object.defineProperty(u.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(u.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(u.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(u.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(u.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new w(this.children)),this.childNodeList}}),Object.defineProperty(u.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(u.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(u.prototype,"previousSibling",{get:function(){var l;return l=this.parent.children.indexOf(this),this.parent.children[l-1]||null}}),Object.defineProperty(u.prototype,"nextSibling",{get:function(){var l;return l=this.parent.children.indexOf(this),this.parent.children[l+1]||null}}),Object.defineProperty(u.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(u.prototype,"textContent",{get:function(){var l,h,e,E,B;if(this.nodeType===_.Element||this.nodeType===_.DocumentFragment){for(B="",h=0,e=(E=this.children).length;h<e;h++)(l=E[h]).textContent&&(B+=l.textContent);return B}return null},set:function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),u.prototype.setParent=function(l){var e,E,B,I;for(this.parent=l,l&&(this.options=l.options,this.stringify=l.stringify),I=[],e=0,E=(B=this.children).length;e<E;e++)I.push(B[e].setParent(this));return I},u.prototype.element=function(l,h,e){var E,I,H,X,ne,ue,fe,ie,ge,de;if(ne=null,null===h&&null==e&&(h=(ie=[{},null])[0],e=ie[1]),null==h&&(h={}),h=b(h),S(h)||(e=(ge=[h,e])[0],h=ge[1]),null!=l&&(l=b(l)),Array.isArray(l))for(I=0,ue=l.length;I<ue;I++)ne=this.element(l[I]);else if(k(l))ne=this.element(l.apply());else if(S(l)){for(X in l)if(f.call(l,X))if(k(de=l[X])&&(de=de.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===X.indexOf(this.stringify.convertAttKey))ne=this.attribute(X.substr(this.stringify.convertAttKey.length),de);else if(!this.options.separateArrayItems&&Array.isArray(de)&&L(de))ne=this.dummy();else if(S(de)&&L(de))ne=this.element(X);else if(this.options.keepNullNodes||null!=de)if(!this.options.separateArrayItems&&Array.isArray(de))for(H=0,fe=de.length;H<fe;H++)(E={})[X]=de[H],ne=this.element(E);else S(de)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===X.indexOf(this.stringify.convertTextKey)?ne=this.element(de):(ne=this.element(X)).element(de):ne=this.element(X,de);else ne=this.dummy()}else ne=this.options.keepNullNodes||null!==e?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===l.indexOf(this.stringify.convertTextKey)?this.text(e):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===l.indexOf(this.stringify.convertCDataKey)?this.cdata(e):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===l.indexOf(this.stringify.convertCommentKey)?this.comment(e):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===l.indexOf(this.stringify.convertRawKey)?this.raw(e):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===l.indexOf(this.stringify.convertPIKey)?this.instruction(l.substr(this.stringify.convertPIKey.length),e):this.node(l,h,e):this.dummy();if(null==ne)throw new Error("Could not create any elements with: "+l+". "+this.debugInfo());return ne},u.prototype.insertBefore=function(l,h,e){var E,B,I,H,X;if(l?.type)return H=h,(I=l).setParent(this),H?(B=children.indexOf(H),X=children.splice(B),children.push(I),Array.prototype.push.apply(children,X)):children.push(I),I;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(l));return B=this.parent.children.indexOf(this),X=this.parent.children.splice(B),E=this.parent.element(l,h,e),Array.prototype.push.apply(this.parent.children,X),E},u.prototype.insertAfter=function(l,h,e){var E,B,I;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(l));return B=this.parent.children.indexOf(this),I=this.parent.children.splice(B+1),E=this.parent.element(l,h,e),Array.prototype.push.apply(this.parent.children,I),E},u.prototype.remove=function(){var l;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return l=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[l,l-l+1].concat([])),this.parent},u.prototype.node=function(l,h,e){var E,B;return null!=l&&(l=b(l)),h||(h={}),h=b(h),S(h)||(e=(B=[h,e])[0],h=B[1]),E=new m(this,l,h),null!=e&&E.text(e),this.children.push(E),E},u.prototype.text=function(l){var h;return S(l)&&this.element(l),h=new D(this,l),this.children.push(h),this},u.prototype.cdata=function(l){var h;return h=new P(this,l),this.children.push(h),this},u.prototype.comment=function(l){var h;return h=new v(this,l),this.children.push(h),this},u.prototype.commentBefore=function(l){var e,E;return e=this.parent.children.indexOf(this),E=this.parent.children.splice(e),this.parent.comment(l),Array.prototype.push.apply(this.parent.children,E),this},u.prototype.commentAfter=function(l){var e,E;return e=this.parent.children.indexOf(this),E=this.parent.children.splice(e+1),this.parent.comment(l),Array.prototype.push.apply(this.parent.children,E),this},u.prototype.raw=function(l){var h;return h=new O(this,l),this.children.push(h),this},u.prototype.dummy=function(){return new d(this)},u.prototype.instruction=function(l,h){var e,B,I,H;if(null!=l&&(l=b(l)),null!=h&&(h=b(h)),Array.isArray(l))for(I=0,H=l.length;I<H;I++)this.instruction(e=l[I]);else if(S(l))for(e in l)f.call(l,e)&&this.instruction(e,l[e]);else k(h)&&(h=h.apply()),B=new x(this,l,h),this.children.push(B);return this},u.prototype.instructionBefore=function(l,h){var E,B;return E=this.parent.children.indexOf(this),B=this.parent.children.splice(E),this.parent.instruction(l,h),Array.prototype.push.apply(this.parent.children,B),this},u.prototype.instructionAfter=function(l,h){var E,B;return E=this.parent.children.indexOf(this),B=this.parent.children.splice(E+1),this.parent.instruction(l,h),Array.prototype.push.apply(this.parent.children,B),this},u.prototype.declaration=function(l,h,e){var E,B;return E=this.document(),B=new Z(E,l,h,e),0===E.children.length?E.children.unshift(B):E.children[0].type===_.Declaration?E.children[0]=B:E.children.unshift(B),E.root()||E},u.prototype.dtd=function(l,h){var E,B,I,H,X,ne,ue,fe,ie;for(E=this.document(),B=new T(E,l,h),I=H=0,ne=(fe=E.children).length;H<ne;I=++H)if(fe[I].type===_.DocType)return E.children[I]=B,B;for(I=X=0,ue=(ie=E.children).length;X<ue;I=++X)if(ie[I].isRoot)return E.children.splice(I,0,B),B;return E.children.push(B),B},u.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},u.prototype.root=function(){var l;for(l=this;l;){if(l.type===_.Document)return l.rootObject;if(l.isRoot)return l;l=l.parent}},u.prototype.document=function(){var l;for(l=this;l;){if(l.type===_.Document)return l;l=l.parent}},u.prototype.end=function(l){return this.document().end(l)},u.prototype.prev=function(){var l;if((l=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[l-1]},u.prototype.next=function(){var l;if(-1===(l=this.parent.children.indexOf(this))||l===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[l+1]},u.prototype.importDocument=function(l){var h;return(h=l.root().clone()).parent=this,h.isRoot=!1,this.children.push(h),this},u.prototype.debugInfo=function(l){var h,e;return null!=(l=l||this.name)||null!=(h=this.parent)&&h.name?null==l?"parent: <"+this.parent.name+">":null!=(e=this.parent)&&e.name?"node: <"+l+">, parent: <"+this.parent.name+">":"node: <"+l+">":""},u.prototype.ele=function(l,h,e){return this.element(l,h,e)},u.prototype.nod=function(l,h,e){return this.node(l,h,e)},u.prototype.txt=function(l){return this.text(l)},u.prototype.dat=function(l){return this.cdata(l)},u.prototype.com=function(l){return this.comment(l)},u.prototype.ins=function(l,h){return this.instruction(l,h)},u.prototype.doc=function(){return this.document()},u.prototype.dec=function(l,h,e){return this.declaration(l,h,e)},u.prototype.e=function(l,h,e){return this.element(l,h,e)},u.prototype.n=function(l,h,e){return this.node(l,h,e)},u.prototype.t=function(l){return this.text(l)},u.prototype.d=function(l){return this.cdata(l)},u.prototype.c=function(l){return this.comment(l)},u.prototype.r=function(l){return this.raw(l)},u.prototype.i=function(l,h){return this.instruction(l,h)},u.prototype.u=function(){return this.up()},u.prototype.importXMLBuilder=function(l){return this.importDocument(l)},u.prototype.replaceChild=function(l,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.removeChild=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.appendChild=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.hasChildNodes=function(){return 0!==this.children.length},u.prototype.cloneNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.isSupported=function(l,h){return!0},u.prototype.hasAttributes=function(){return 0!==this.attribs.length},u.prototype.compareDocumentPosition=function(l){var h,e;return(h=this)===l?0:this.document()!==l.document()?(e=g.Disconnected|g.ImplementationSpecific,Math.random()<.5?e|=g.Preceding:e|=g.Following,e):h.isAncestor(l)?g.Contains|g.Preceding:h.isDescendant(l)?g.Contains|g.Following:h.isPreceding(l)?g.Preceding:g.Following},u.prototype.isSameNode=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.lookupPrefix=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.isDefaultNamespace=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.lookupNamespaceURI=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.isEqualNode=function(l){var h,e,E;if(l.nodeType!==this.nodeType||l.children.length!==this.children.length)return!1;for(h=e=0,E=this.children.length-1;0<=E?e<=E:e>=E;h=0<=E?++e:--e)if(!this.children[h].isEqualNode(l.children[h]))return!1;return!0},u.prototype.getFeature=function(l,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.setUserData=function(l,h,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.getUserData=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.contains=function(l){return!!l&&(l===this||this.isDescendant(l))},u.prototype.isDescendant=function(l){var h,E,B,I;for(E=0,B=(I=this.children).length;E<B;E++)if(l===(h=I[E])||h.isDescendant(l))return!0;return!1},u.prototype.isAncestor=function(l){return l.isDescendant(this)},u.prototype.isPreceding=function(l){var h,e;return h=this.treePosition(l),e=this.treePosition(this),-1!==h&&-1!==e&&h<e},u.prototype.isFollowing=function(l){var h,e;return h=this.treePosition(l),e=this.treePosition(this),-1!==h&&-1!==e&&h>e},u.prototype.treePosition=function(l){var h,e;return e=0,h=!1,this.foreachTreeNode(this.document(),function(E){if(e++,!h&&E===l)return h=!0}),h?e:-1},u.prototype.foreachTreeNode=function(l,h){var e,E,B,I,H;for(l||(l=this.document()),E=0,B=(I=l.children).length;E<B;E++){if(H=h(e=I[E]))return H;if(H=this.foreachTreeNode(e,h))return H}},u}()}).call(this)},87137:function(K){(function(){K.exports=function(){function p(g){this.nodes=g}return Object.defineProperty(p.prototype,"length",{get:function(){return this.nodes.length||0}}),p.prototype.clone=function(){return this.nodes=null},p.prototype.item=function(g){return this.nodes[g]||null},p}()}).call(this)},12726:function(K,Y,p){(function(){var g,_,Z={}.hasOwnProperty;g=p(42870),_=p(26068),K.exports=function(T){function d(m,y,N){if(d.__super__.constructor.call(this,m),null==y)throw new Error("Missing instruction target. "+this.debugInfo());this.type=g.ProcessingInstruction,this.target=this.stringify.insTarget(y),this.name=this.target,N&&(this.value=this.stringify.insValue(N))}return function(T,d){for(var m in d)Z.call(d,m)&&(T[m]=d[m]);function y(){this.constructor=T}y.prototype=d.prototype,T.prototype=new y,T.__super__=d.prototype}(d,T),d.prototype.clone=function(){return Object.create(this)},d.prototype.toString=function(m){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(m))},d.prototype.isEqualNode=function(m){return!(!d.__super__.isEqualNode.apply(this,arguments).isEqualNode(m)||m.target!==this.target)},d}(_)}).call(this)},99166:function(K,Y,p){(function(){var g,_,Z={}.hasOwnProperty;g=p(42870),_=p(26627),K.exports=function(T){function d(m,y){if(d.__super__.constructor.call(this,m),null==y)throw new Error("Missing raw text. "+this.debugInfo());this.type=g.Raw,this.value=this.stringify.raw(y)}return function(T,d){for(var m in d)Z.call(d,m)&&(T[m]=d[m]);function y(){this.constructor=T}y.prototype=d.prototype,T.prototype=new y,T.__super__=d.prototype}(d,T),d.prototype.clone=function(){return Object.create(this)},d.prototype.toString=function(m){return this.options.writer.raw(this,this.options.writer.filterOptions(m))},d}(_)}).call(this)},50864:function(K,Y,p){(function(){var g,_,v,T={}.hasOwnProperty;g=p(42870),v=p(56425),_=p(47159),K.exports=function(d){function m(y,N){this.stream=y,m.__super__.constructor.call(this,N)}return function(d,m){for(var y in m)T.call(m,y)&&(d[y]=m[y]);function N(){this.constructor=d}N.prototype=m.prototype,d.prototype=new N,d.__super__=m.prototype}(m,d),m.prototype.endline=function(y,N,w){return y.isLastRootNode&&N.state===_.CloseTag?"":m.__super__.endline.call(this,y,N,w)},m.prototype.document=function(y,N){var x,O,D,b,L,k,S,M;for(x=O=0,b=(k=y.children).length;O<b;x=++O)k[x].isLastRootNode=x===y.children.length-1;for(N=this.filterOptions(N),M=[],D=0,L=(S=y.children).length;D<L;D++)M.push(this.writeChildNode(S[D],N,0));return M},m.prototype.attribute=function(y,N,w){return this.stream.write(m.__super__.attribute.call(this,y,N,w))},m.prototype.cdata=function(y,N,w){return this.stream.write(m.__super__.cdata.call(this,y,N,w))},m.prototype.comment=function(y,N,w){return this.stream.write(m.__super__.comment.call(this,y,N,w))},m.prototype.declaration=function(y,N,w){return this.stream.write(m.__super__.declaration.call(this,y,N,w))},m.prototype.docType=function(y,N,w){var O,D,b;if(w||(w=0),this.openNode(y,N,w),N.state=_.OpenTag,this.stream.write(this.indent(y,N,w)),this.stream.write("<!DOCTYPE "+y.root().name),y.pubID&&y.sysID?this.stream.write(' PUBLIC "'+y.pubID+'" "'+y.sysID+'"'):y.sysID&&this.stream.write(' SYSTEM "'+y.sysID+'"'),y.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(y,N,w)),N.state=_.InsideTag,O=0,D=(b=y.children).length;O<D;O++)this.writeChildNode(b[O],N,w+1);N.state=_.CloseTag,this.stream.write("]")}return N.state=_.CloseTag,this.stream.write(N.spaceBeforeSlash+">"),this.stream.write(this.endline(y,N,w)),N.state=_.None,this.closeNode(y,N,w)},m.prototype.element=function(y,N,w){var D,b,L,k,S,f,u;for(S in w||(w=0),this.openNode(y,N,w),N.state=_.OpenTag,this.stream.write(this.indent(y,N,w)+"<"+y.name),f=y.attribs)T.call(f,S)&&this.attribute(f[S],N,w);if(b=0===(D=y.children.length)?null:y.children[0],0===D||y.children.every(function(l){return(l.type===g.Text||l.type===g.Raw)&&""===l.value}))N.allowEmpty?(this.stream.write(">"),N.state=_.CloseTag,this.stream.write("</"+y.name+">")):(N.state=_.CloseTag,this.stream.write(N.spaceBeforeSlash+"/>"));else if(!N.pretty||1!==D||b.type!==g.Text&&b.type!==g.Raw||null==b.value){for(this.stream.write(">"+this.endline(y,N,w)),N.state=_.InsideTag,L=0,k=(u=y.children).length;L<k;L++)this.writeChildNode(u[L],N,w+1);N.state=_.CloseTag,this.stream.write(this.indent(y,N,w)+"</"+y.name+">")}else this.stream.write(">"),N.state=_.InsideTag,N.suppressPrettyCount++,this.writeChildNode(b,N,w+1),N.suppressPrettyCount--,N.state=_.CloseTag,this.stream.write("</"+y.name+">");return this.stream.write(this.endline(y,N,w)),N.state=_.None,this.closeNode(y,N,w)},m.prototype.processingInstruction=function(y,N,w){return this.stream.write(m.__super__.processingInstruction.call(this,y,N,w))},m.prototype.raw=function(y,N,w){return this.stream.write(m.__super__.raw.call(this,y,N,w))},m.prototype.text=function(y,N,w){return this.stream.write(m.__super__.text.call(this,y,N,w))},m.prototype.dtdAttList=function(y,N,w){return this.stream.write(m.__super__.dtdAttList.call(this,y,N,w))},m.prototype.dtdElement=function(y,N,w){return this.stream.write(m.__super__.dtdElement.call(this,y,N,w))},m.prototype.dtdEntity=function(y,N,w){return this.stream.write(m.__super__.dtdEntity.call(this,y,N,w))},m.prototype.dtdNotation=function(y,N,w){return this.stream.write(m.__super__.dtdNotation.call(this,y,N,w))},m}(v)}).call(this)},28337:function(K,Y,p){(function(){var _,v={}.hasOwnProperty;_=p(56425),K.exports=function(Z){function T(d){T.__super__.constructor.call(this,d)}return function(Z,T){for(var d in T)v.call(T,d)&&(Z[d]=T[d]);function m(){this.constructor=Z}m.prototype=T.prototype,Z.prototype=new m,Z.__super__=T.prototype}(T,Z),T.prototype.document=function(d,m){var N,w,x,O;for(m=this.filterOptions(m),x="",N=0,w=(O=d.children).length;N<w;N++)x+=this.writeChildNode(O[N],m,0);return m.pretty&&x.slice(-m.newline.length)===m.newline&&(x=x.slice(0,-m.newline.length)),x},T}(_)}).call(this)},93258:function(K){(function(){var p=function(_,P){return function(){return _.apply(P,arguments)}},g={}.hasOwnProperty;K.exports=function(){function _(P){var v,Z;for(v in this.assertLegalName=p(this.assertLegalName,this),this.assertLegalChar=p(this.assertLegalChar,this),P||(P={}),this.options=P,this.options.version||(this.options.version="1.0"),Z=P.stringify||{})g.call(Z,v)&&(this[v]=Z[v])}return _.prototype.name=function(P){return this.options.noValidation?P:this.assertLegalName(""+P||"")},_.prototype.text=function(P){return this.options.noValidation?P:this.assertLegalChar(this.textEscape(""+P||""))},_.prototype.cdata=function(P){return this.options.noValidation?P:(P=(P=""+P||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(P))},_.prototype.comment=function(P){if(this.options.noValidation)return P;if((P=""+P||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+P);return this.assertLegalChar(P)},_.prototype.raw=function(P){return this.options.noValidation?P:""+P||""},_.prototype.attValue=function(P){return this.options.noValidation?P:this.assertLegalChar(this.attEscape(P=""+P||""))},_.prototype.insTarget=function(P){return this.options.noValidation?P:this.assertLegalChar(""+P||"")},_.prototype.insValue=function(P){if(this.options.noValidation)return P;if((P=""+P||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+P);return this.assertLegalChar(P)},_.prototype.xmlVersion=function(P){if(this.options.noValidation)return P;if(!(P=""+P||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+P);return P},_.prototype.xmlEncoding=function(P){if(this.options.noValidation)return P;if(!(P=""+P||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+P);return this.assertLegalChar(P)},_.prototype.xmlStandalone=function(P){return this.options.noValidation?P:P?"yes":"no"},_.prototype.dtdPubID=function(P){return this.options.noValidation?P:this.assertLegalChar(""+P||"")},_.prototype.dtdSysID=function(P){return this.options.noValidation?P:this.assertLegalChar(""+P||"")},_.prototype.dtdElementValue=function(P){return this.options.noValidation?P:this.assertLegalChar(""+P||"")},_.prototype.dtdAttType=function(P){return this.options.noValidation?P:this.assertLegalChar(""+P||"")},_.prototype.dtdAttDefault=function(P){return this.options.noValidation?P:this.assertLegalChar(""+P||"")},_.prototype.dtdEntityValue=function(P){return this.options.noValidation?P:this.assertLegalChar(""+P||"")},_.prototype.dtdNData=function(P){return this.options.noValidation?P:this.assertLegalChar(""+P||"")},_.prototype.convertAttKey="@",_.prototype.convertPIKey="?",_.prototype.convertTextKey="#text",_.prototype.convertCDataKey="#cdata",_.prototype.convertCommentKey="#comment",_.prototype.convertRawKey="#raw",_.prototype.assertLegalChar=function(P){var Z;if(this.options.noValidation)return P;if("1.0"===this.options.version){if(Z=P.match(/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+P+" at index "+Z.index)}else if("1.1"===this.options.version&&(Z=P.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/)))throw new Error("Invalid character in string: "+P+" at index "+Z.index);return P},_.prototype.assertLegalName=function(P){if(this.options.noValidation)return P;if(this.assertLegalChar(P),!P.match(/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/))throw new Error("Invalid character in name");return P},_.prototype.textEscape=function(P){return this.options.noValidation?P:P.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},_.prototype.attEscape=function(P){return this.options.noValidation?P:P.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},_}()}).call(this)},80504:function(K,Y,p){(function(){var g,_,Z={}.hasOwnProperty;g=p(42870),_=p(26068),K.exports=function(T){function d(m,y){if(d.__super__.constructor.call(this,m),null==y)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=g.Text,this.value=this.stringify.text(y)}return function(T,d){for(var m in d)Z.call(d,m)&&(T[m]=d[m]);function y(){this.constructor=T}y.prototype=d.prototype,T.prototype=new y,T.__super__=d.prototype}(d,T),Object.defineProperty(d.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(d.prototype,"wholeText",{get:function(){var m,y,N;for(N="",y=this.previousSibling;y;)N=y.data+N,y=y.previousSibling;for(N+=this.data,m=this.nextSibling;m;)N+=m.data,m=m.nextSibling;return N}}),d.prototype.clone=function(){return Object.create(this)},d.prototype.toString=function(m){return this.options.writer.text(this,this.options.writer.filterOptions(m))},d.prototype.splitText=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.replaceWholeText=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},d}(_)}).call(this)},56425:function(K,Y,p){(function(){var g,_,k,S={}.hasOwnProperty;k=p(63146).assign,g=p(42870),p(29413),p(67905),p(19832),p(73940),p(17770),p(99166),p(80504),p(12726),p(71616),p(70438),p(33020),p(80015),p(46600),_=p(47159),K.exports=function(){function M(f){var u,l,h;for(u in f||(f={}),this.options=f,l=f.writer||{})S.call(l,u)&&(h=l[u],this["_"+u]=this[u],this[u]=h)}return M.prototype.filterOptions=function(f){var u,l,h,e,E,B,I,H;return f||(f={}),f=k({},this.options,f),(u={writer:this}).pretty=f.pretty||!1,u.allowEmpty=f.allowEmpty||!1,u.indent=null!=(l=f.indent)?l:"  ",u.newline=null!=(h=f.newline)?h:"\n",u.offset=null!=(e=f.offset)?e:0,u.dontPrettyTextNodes=null!=(E=null!=(B=f.dontPrettyTextNodes)?B:f.dontprettytextnodes)?E:0,u.spaceBeforeSlash=null!=(I=null!=(H=f.spaceBeforeSlash)?H:f.spacebeforeslash)?I:"",!0===u.spaceBeforeSlash&&(u.spaceBeforeSlash=" "),u.suppressPrettyCount=0,u.user={},u.state=_.None,u},M.prototype.indent=function(f,u,l){var h;return!u.pretty||u.suppressPrettyCount?"":u.pretty&&(h=(l||0)+u.offset+1)>0?new Array(h).join(u.indent):""},M.prototype.endline=function(f,u,l){return!u.pretty||u.suppressPrettyCount?"":u.newline},M.prototype.attribute=function(f,u,l){var h;return this.openAttribute(f,u,l),h=" "+f.name+'="'+f.value+'"',this.closeAttribute(f,u,l),h},M.prototype.cdata=function(f,u,l){var h;return this.openNode(f,u,l),u.state=_.OpenTag,h=this.indent(f,u,l)+"<![CDATA[",u.state=_.InsideTag,h+=f.value,u.state=_.CloseTag,h+="]]>"+this.endline(f,u,l),u.state=_.None,this.closeNode(f,u,l),h},M.prototype.comment=function(f,u,l){var h;return this.openNode(f,u,l),u.state=_.OpenTag,h=this.indent(f,u,l)+"\x3c!-- ",u.state=_.InsideTag,h+=f.value,u.state=_.CloseTag,h+=" --\x3e"+this.endline(f,u,l),u.state=_.None,this.closeNode(f,u,l),h},M.prototype.declaration=function(f,u,l){var h;return this.openNode(f,u,l),u.state=_.OpenTag,h=this.indent(f,u,l)+"<?xml",u.state=_.InsideTag,h+=' version="'+f.version+'"',null!=f.encoding&&(h+=' encoding="'+f.encoding+'"'),null!=f.standalone&&(h+=' standalone="'+f.standalone+'"'),u.state=_.CloseTag,h+=u.spaceBeforeSlash+"?>",h+=this.endline(f,u,l),u.state=_.None,this.closeNode(f,u,l),h},M.prototype.docType=function(f,u,l){var e,E,B,I;if(l||(l=0),this.openNode(f,u,l),u.state=_.OpenTag,B=this.indent(f,u,l),B+="<!DOCTYPE "+f.root().name,f.pubID&&f.sysID?B+=' PUBLIC "'+f.pubID+'" "'+f.sysID+'"':f.sysID&&(B+=' SYSTEM "'+f.sysID+'"'),f.children.length>0){for(B+=" [",B+=this.endline(f,u,l),u.state=_.InsideTag,e=0,E=(I=f.children).length;e<E;e++)B+=this.writeChildNode(I[e],u,l+1);u.state=_.CloseTag,B+="]"}return u.state=_.CloseTag,B+=u.spaceBeforeSlash+">",B+=this.endline(f,u,l),u.state=_.None,this.closeNode(f,u,l),B},M.prototype.element=function(f,u,l){var e,E,B,I,H,X,ne,ue,fe,ie,ge,de,Ze;for(ue in l||(l=0),fe=!1,ie="",this.openNode(f,u,l),u.state=_.OpenTag,ie+=this.indent(f,u,l)+"<"+f.name,ge=f.attribs)S.call(ge,ue)&&(ie+=this.attribute(ge[ue],u,l));if(B=0===(E=f.children.length)?null:f.children[0],0===E||f.children.every(function(pe){return(pe.type===g.Text||pe.type===g.Raw)&&""===pe.value}))u.allowEmpty?(ie+=">",u.state=_.CloseTag,ie+="</"+f.name+">"+this.endline(f,u,l)):(u.state=_.CloseTag,ie+=u.spaceBeforeSlash+"/>"+this.endline(f,u,l));else if(!u.pretty||1!==E||B.type!==g.Text&&B.type!==g.Raw||null==B.value){if(u.dontPrettyTextNodes)for(I=0,X=(de=f.children).length;I<X;I++)if(((e=de[I]).type===g.Text||e.type===g.Raw)&&null!=e.value){u.suppressPrettyCount++,fe=!0;break}for(ie+=">"+this.endline(f,u,l),u.state=_.InsideTag,H=0,ne=(Ze=f.children).length;H<ne;H++)ie+=this.writeChildNode(e=Ze[H],u,l+1);u.state=_.CloseTag,ie+=this.indent(f,u,l)+"</"+f.name+">",fe&&u.suppressPrettyCount--,ie+=this.endline(f,u,l),u.state=_.None}else ie+=">",u.state=_.InsideTag,u.suppressPrettyCount++,fe=!0,ie+=this.writeChildNode(B,u,l+1),u.suppressPrettyCount--,fe=!1,u.state=_.CloseTag,ie+="</"+f.name+">"+this.endline(f,u,l);return this.closeNode(f,u,l),ie},M.prototype.writeChildNode=function(f,u,l){switch(f.type){case g.CData:return this.cdata(f,u,l);case g.Comment:return this.comment(f,u,l);case g.Element:return this.element(f,u,l);case g.Raw:return this.raw(f,u,l);case g.Text:return this.text(f,u,l);case g.ProcessingInstruction:return this.processingInstruction(f,u,l);case g.Dummy:return"";case g.Declaration:return this.declaration(f,u,l);case g.DocType:return this.docType(f,u,l);case g.AttributeDeclaration:return this.dtdAttList(f,u,l);case g.ElementDeclaration:return this.dtdElement(f,u,l);case g.EntityDeclaration:return this.dtdEntity(f,u,l);case g.NotationDeclaration:return this.dtdNotation(f,u,l);default:throw new Error("Unknown XML node type: "+f.constructor.name)}},M.prototype.processingInstruction=function(f,u,l){var h;return this.openNode(f,u,l),u.state=_.OpenTag,h=this.indent(f,u,l)+"<?",u.state=_.InsideTag,h+=f.target,f.value&&(h+=" "+f.value),u.state=_.CloseTag,h+=u.spaceBeforeSlash+"?>",h+=this.endline(f,u,l),u.state=_.None,this.closeNode(f,u,l),h},M.prototype.raw=function(f,u,l){var h;return this.openNode(f,u,l),u.state=_.OpenTag,h=this.indent(f,u,l),u.state=_.InsideTag,h+=f.value,u.state=_.CloseTag,h+=this.endline(f,u,l),u.state=_.None,this.closeNode(f,u,l),h},M.prototype.text=function(f,u,l){var h;return this.openNode(f,u,l),u.state=_.OpenTag,h=this.indent(f,u,l),u.state=_.InsideTag,h+=f.value,u.state=_.CloseTag,h+=this.endline(f,u,l),u.state=_.None,this.closeNode(f,u,l),h},M.prototype.dtdAttList=function(f,u,l){var h;return this.openNode(f,u,l),u.state=_.OpenTag,h=this.indent(f,u,l)+"<!ATTLIST",u.state=_.InsideTag,h+=" "+f.elementName+" "+f.attributeName+" "+f.attributeType,"#DEFAULT"!==f.defaultValueType&&(h+=" "+f.defaultValueType),f.defaultValue&&(h+=' "'+f.defaultValue+'"'),u.state=_.CloseTag,h+=u.spaceBeforeSlash+">"+this.endline(f,u,l),u.state=_.None,this.closeNode(f,u,l),h},M.prototype.dtdElement=function(f,u,l){var h;return this.openNode(f,u,l),u.state=_.OpenTag,h=this.indent(f,u,l)+"<!ELEMENT",u.state=_.InsideTag,h+=" "+f.name+" "+f.value,u.state=_.CloseTag,h+=u.spaceBeforeSlash+">"+this.endline(f,u,l),u.state=_.None,this.closeNode(f,u,l),h},M.prototype.dtdEntity=function(f,u,l){var h;return this.openNode(f,u,l),u.state=_.OpenTag,h=this.indent(f,u,l)+"<!ENTITY",u.state=_.InsideTag,f.pe&&(h+=" %"),h+=" "+f.name,f.value?h+=' "'+f.value+'"':(f.pubID&&f.sysID?h+=' PUBLIC "'+f.pubID+'" "'+f.sysID+'"':f.sysID&&(h+=' SYSTEM "'+f.sysID+'"'),f.nData&&(h+=" NDATA "+f.nData)),u.state=_.CloseTag,h+=u.spaceBeforeSlash+">"+this.endline(f,u,l),u.state=_.None,this.closeNode(f,u,l),h},M.prototype.dtdNotation=function(f,u,l){var h;return this.openNode(f,u,l),u.state=_.OpenTag,h=this.indent(f,u,l)+"<!NOTATION",u.state=_.InsideTag,h+=" "+f.name,f.pubID&&f.sysID?h+=' PUBLIC "'+f.pubID+'" "'+f.sysID+'"':f.pubID?h+=' PUBLIC "'+f.pubID+'"':f.sysID&&(h+=' SYSTEM "'+f.sysID+'"'),u.state=_.CloseTag,h+=u.spaceBeforeSlash+">"+this.endline(f,u,l),u.state=_.None,this.closeNode(f,u,l),h},M.prototype.openNode=function(f,u,l){},M.prototype.closeNode=function(f,u,l){},M.prototype.openAttribute=function(f,u,l){},M.prototype.closeAttribute=function(f,u,l){},M}()}).call(this)},71741:function(K,Y,p){(function(){var g,_,P,v,Z,T,d,m,y,N;N=p(63146),m=N.assign,y=N.isFunction,P=p(57951),v=p(32008),Z=p(25795),d=p(28337),T=p(50864),g=p(42870),_=p(47159),K.exports.create=function(w,x,O,D){var b,L;if(null==w)throw new Error("Root element needs a name.");return D=m({},x,O,D),L=(b=new v(D)).element(w),D.headless||(b.declaration(D),(null!=D.pubID||null!=D.sysID)&&b.dtd(D)),L},K.exports.begin=function(w,x,O){var D;return y(w)&&(x=(D=[w,x])[0],O=D[1],w={}),x?new Z(w,x,O):new v(w)},K.exports.stringWriter=function(w){return new d(w)},K.exports.streamWriter=function(w,x){return new T(w,x)},K.exports.implementation=new P,K.exports.nodeType=g,K.exports.writerState=_}).call(this)},59889:(K,Y,p)=>{"use strict";p.r(Y),p.d(Y,{RgwModule:()=>wn,RoutedRgwModule:()=>Mc});var g=p(88692),_=p(20092),P=p(54247),v=p(51389),Z=p(37496),T=p(79512),d=p(4268),m=p(44466),y=p(66265),N=p(23815),w=p.n(N),x=p(35758),O=p(49277),D=p(95152),b=p(33394),L=p(64762),k=p(35732),S=p(25917),M=p(19773),f=p(96736),u=p(5304),l=p(20523),h=p(93523),e=p(64537);let E=class{constructor(i,t){this.http=i,this.rgwDaemonService=t,this.url="api/rgw/user"}list(){return this.enumerate().pipe((0,M.zg)(i=>i.length>0?(0,x.D)(i.map(t=>this.get(t))):(0,S.of)([])))}enumerate(){return this.rgwDaemonService.request(i=>this.http.get(this.url,{params:i}))}enumerateEmail(){return this.rgwDaemonService.request(i=>this.http.get(`${this.url}/get_emails`,{params:i}))}get(i){return this.rgwDaemonService.request(t=>this.http.get(`${this.url}/${i}`,{params:t}))}getQuota(i){return this.rgwDaemonService.request(t=>this.http.get(`${this.url}/${i}/quota`,{params:t}))}create(i){return this.rgwDaemonService.request(t=>(w().keys(i).forEach(o=>{t=t.append(o,i[o])}),this.http.post(this.url,null,{params:t})))}update(i,t){return this.rgwDaemonService.request(o=>(w().keys(t).forEach(c=>{o=o.append(c,t[c])}),this.http.put(`${this.url}/${i}`,null,{params:o})))}updateQuota(i,t){return this.rgwDaemonService.request(o=>(w().keys(t).forEach(c=>{o=o.append(c,t[c])}),this.http.put(`${this.url}/${i}/quota`,null,{params:o})))}delete(i){return this.rgwDaemonService.request(t=>this.http.delete(`${this.url}/${i}`,{params:t}))}createSubuser(i,t){return this.rgwDaemonService.request(o=>(w().keys(t).forEach(c=>{o=o.append(c,t[c])}),this.http.post(`${this.url}/${i}/subuser`,null,{params:o})))}deleteSubuser(i,t){return this.rgwDaemonService.request(o=>this.http.delete(`${this.url}/${i}/subuser/${t}`,{params:o}))}addCapability(i,t,o){return this.rgwDaemonService.request(c=>(c=(c=c.append("type",t)).append("perm",o),this.http.post(`${this.url}/${i}/capability`,null,{params:c})))}deleteCapability(i,t,o){return this.rgwDaemonService.request(c=>(c=(c=c.append("type",t)).append("perm",o),this.http.delete(`${this.url}/${i}/capability`,{params:c})))}addS3Key(i,t){return this.rgwDaemonService.request(o=>(o=o.append("key_type","s3"),w().keys(t).forEach(c=>{o=o.append(c,t[c])}),this.http.post(`${this.url}/${i}/key`,null,{params:o})))}deleteS3Key(i,t){return this.rgwDaemonService.request(o=>(o=(o=o.append("key_type","s3")).append("access_key",t),this.http.delete(`${this.url}/${i}/key`,{params:o})))}exists(i){return this.get(i).pipe((0,f.h)(!0),(0,u.K)(t=>(w().isFunction(t.preventDefault)&&t.preventDefault(),(0,S.of)(!1))))}emailExists(i){return i=decodeURIComponent(i),this.enumerateEmail().pipe((0,M.zg)(t=>{const o=w().indexOf(t,i);return(0,S.of)(-1!==o)}))}};E.\u0275fac=function(i){return new(i||E)(e.LFG(k.eN),e.LFG(l.b))},E.\u0275prov=e.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E=(0,L.gn)([h.o,(0,L.w6)("design:paramtypes",[k.eN,l.b])],E);var B=p(65862),I=p(18001),H=p(93614),X=p(90070),ne=p(97161);class ue{constructor(){this.kmsProviders=["vault"],this.authMethods=["token","agent"],this.secretEngines=["kv","transit"],this.sse_s3="AES256",this.sse_kms="aws:kms"}}var fe=(()=>{return(n=fe||(fe={})).ENABLED="Enabled",n.DISABLED="Disabled",fe;var n})(),ie=(()=>{return(n=ie||(ie={})).Read="Read",n.Write="Write",n.All="Read and write",n.FullControl="Full control",ie;var n})(),ge=(()=>{return(n=ge||(ge={})).Owner="Owner",n.Everyone="Everyone",n.AuthenticatedUsers="Authenticated Users",ge;var n})(),de=(()=>{return(n=de||(de={})).ENABLED="Enabled",n.SUSPENDED="Suspended",de;var n})(),Ze=p(62862),pe=p(18372),he=p(60312),we=p(30839),Ae=p(87925),Pe=p(94276),We=p(56310),C=p(41582);function a(n,i){1&n&&(e.TgZ(0,"option",29),e.SDv(1,30),e.qZA()),2&n&&e.Q6J("ngValue",null)}function U(n,i){if(1&n&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function $(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,33),e.qZA())}function re(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",7)(2,"label",22),e.SDv(3,23),e.qZA(),e.TgZ(4,"div",24)(5,"select",25),e.YNc(6,a,2,1,"option",26),e.YNc(7,U,2,2,"option",27),e.qZA(),e.YNc(8,$,2,0,"span",28),e.qZA()()()),2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(6),e.Q6J("ngIf",null!==t.kmsProviders),e.xp6(1),e.Q6J("ngForOf",t.kmsProviders),e.xp6(1),e.Q6J("ngIf",t.configForm.showError("kms_provider",o,"required"))}}function le(n,i){if(1&n&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function A(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,37),e.qZA())}function W(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",7)(2,"label",34),e.SDv(3,35),e.qZA(),e.TgZ(4,"div",24)(5,"select",36),e.YNc(6,le,2,2,"option",27),e.qZA(),e.YNc(7,A,2,0,"span",28),e.qZA()()()),2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(6),e.Q6J("ngForOf",t.authMethods),e.xp6(1),e.Q6J("ngIf",t.configForm.showError("auth_method",o,"required"))}}function V(n,i){if(1&n&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function R(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,41),e.qZA())}function r(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",7)(2,"label",38),e.SDv(3,39),e.qZA(),e.TgZ(4,"div",24)(5,"select",40),e.YNc(6,V,2,2,"option",27),e.qZA(),e.YNc(7,R,2,0,"span",28),e.qZA()()()),2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(6),e.Q6J("ngForOf",t.secretEngines),e.xp6(1),e.Q6J("ngIf",t.configForm.showError("secret_engine",o,"required"))}}function s(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,45),e.qZA())}function G(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",7)(2,"label",42),e.SDv(3,43),e.qZA(),e.TgZ(4,"div",24),e._UZ(5,"input",44),e.YNc(6,s,2,0,"span",28),e.qZA()()()),2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(6),e.Q6J("ngIf",t.configForm.showError("secret_path",o,"required"))}}function q(n,i){1&n&&(e.TgZ(0,"div")(1,"div",7)(2,"label",46),e.SDv(3,47),e.qZA(),e.TgZ(4,"div",24),e._UZ(5,"input",48),e.qZA()()())}function ee(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,52),e.qZA())}function te(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",7)(2,"label",49),e.SDv(3,50),e.qZA(),e.TgZ(4,"div",24),e._UZ(5,"input",51),e.YNc(6,ee,2,0,"span",28),e.qZA()()()),2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(6),e.Q6J("ngIf",t.configForm.showError("address",o,"required"))}}function Me(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,57),e.qZA())}function Fe(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"label",53)(2,"span"),e.SDv(3,54),e.qZA(),e.TgZ(4,"cd-helper"),e.SDv(5,55),e.qZA()(),e.TgZ(6,"div",24)(7,"input",56),e.NdJ("change",function(c){e.CHM(t);const F=e.oxw();return e.KtG(F.fileUpload(c.target.files,"token"))}),e.qZA(),e.YNc(8,Me,2,0,"span",28),e.qZA()()}if(2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(8),e.Q6J("ngIf",t.configForm.showError("token",o,"required"))}}function Ne(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,62),e.qZA())}function ke(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",7)(2,"label",58)(3,"span"),e.SDv(4,59),e.qZA(),e.TgZ(5,"cd-helper"),e.SDv(6,60),e.qZA()(),e.TgZ(7,"div",24)(8,"input",61),e.NdJ("change",function(c){e.CHM(t);const F=e.oxw();return e.KtG(F.fileUpload(c.target.files,"ssl_cert"))}),e.qZA(),e.YNc(9,Ne,2,0,"span",28),e.qZA()()()}if(2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(9),e.Q6J("ngIf",t.configForm.showError("ssl_cert",o,"required"))}}function Ie(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,67),e.qZA())}function ze(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",7)(2,"label",63)(3,"span"),e.SDv(4,64),e.qZA(),e.TgZ(5,"cd-helper"),e.SDv(6,65),e.qZA()(),e.TgZ(7,"div",24)(8,"input",66),e.NdJ("change",function(c){e.CHM(t);const F=e.oxw();return e.KtG(F.fileUpload(c.target.files,"client_cert"))}),e.qZA(),e.YNc(9,Ie,2,0,"span",28),e.qZA()()()}if(2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(9),e.Q6J("ngIf",t.configForm.showError("client_cert",o,"required"))}}function qe(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,72),e.qZA())}function He(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",7)(2,"label",68)(3,"span"),e.SDv(4,69),e.qZA(),e.TgZ(5,"cd-helper"),e.SDv(6,70),e.qZA()(),e.TgZ(7,"div",24)(8,"input",71),e.NdJ("change",function(c){e.CHM(t);const F=e.oxw();return e.KtG(F.fileUpload(c.target.files,"client_key"))}),e.qZA(),e.YNc(9,qe,2,0,"span",28),e.qZA()()()}if(2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(9),e.Q6J("ngIf",t.configForm.showError("client_key",o,"required"))}}let $n=(()=>{class n{constructor(t,o,c,F,z,Q,J){this.formBuilder=t,this.activeModal=o,this.router=c,this.actionLabels=F,this.rgwBucketService=z,this.rgwEncryptionModal=Q,this.notificationService=J,this.vaultAddress=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{4}$/,this.submitAction=new e.vpe,this.createForm()}ngOnInit(){this.kmsProviders=this.rgwEncryptionModal.kmsProviders,this.authMethods=this.rgwEncryptionModal.authMethods,this.secretEngines=this.rgwEncryptionModal.secretEngines}createForm(){this.configForm=this.formBuilder.group({address:[null,[_.kI.required,X.h.custom("vaultPattern",t=>!w().isEmpty(t)&&!this.vaultAddress.test(t))]],kms_provider:["vault",_.kI.required],encryptionType:["aws:kms",_.kI.required],auth_method:["token",_.kI.required],secret_engine:["kv",_.kI.required],secret_path:["/"],namespace:[null],token:[null,[X.h.requiredIf({auth_method:"token"})]],ssl_cert:[null,X.h.sslCert()],client_cert:[null,X.h.pemCert()],client_key:[null,X.h.sslPrivKey()],kmsEnabled:[{value:!1}],s3Enabled:[{value:!1}]})}fileUpload(t,o){const c=t[0];(new FileReader).addEventListener("load",()=>{const z=this.configForm.get(o);z.setValue(c),z.markAsDirty(),z.markAsTouched(),z.updateValueAndValidity()})}onSubmit(){const t=this.configForm.value;this.rgwBucketService.setEncryptionConfig(t.encryptionType,t.kms_provider,t.auth_method,t.secret_engine,t.secret_path,t.namespace,t.address,t.token,t.owner,t.ssl_cert,t.client_cert,t.client_key).subscribe({next:()=>{this.notificationService.show(I.k.success,"Updated RGW Encryption Configuration values")},error:o=>{this.notificationService.show(I.k.error,o),this.configForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.activeModal.close(),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.router.onSameUrlNavigation="reload",this.router.navigate([this.router.url])}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ze.O),e.Y36(v.Kz),e.Y36(P.F0),e.Y36(T.p4),e.Y36(D.o),e.Y36(ue),e.Y36(ne.g))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-config-modal"]],outputs:{submitAction:"submitAction"},features:[e._Bn([ue])],decls:30,vars:14,consts:function(){let i,t,o,c,F,z,Q,J,j,oe,Te,Se,Oe,be,me,Ge,ye,Le,Ee,Ue,$e,xe,De,ve,ae,Re,ce,Je;return i="Update RGW Encryption Configurations",t="Encryption Type",o="SSE-S3 Encryption",c="SSE-KMS Encryption",F="Key management service provider",z="-- Select a provider --",Q="This field is required.",J="Authentication Method",j="This field is required.",oe="Secret Engine",Te="This field is required.",Se="Secret Path ",Oe="This field is required.",be="Namespace ",me="Vault Address ",Ge="This field is required.",ye="Token",Le=" The token authentication method expects a Vault token to be present in a plaintext file. ",Ee="This field is required.",Ue="CA Certificate",$e="The SSL certificate in PEM format.",xe="This field is required.",De="Client Certificate",ve="The Client certificate in PEM format.",ae="This field is required.",Re="Client Private Key",ce="The Client Private Key in PEM format.",Je="This field is required.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","configForm",3,"formGroup"],["frm","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","encryptionType",1,"cd-col-form-label","required"],t,[1,"col-md-auto","custom-checkbox","form-check-inline","ms-3"],["formControlName","encryptionType","id","s3Enabled","type","radio","name","encryptionType","value","AES256",1,"form-check-input"],["for","s3Enabled",1,"custom-check-label"],o,[1,"col-md-auto","custom-checkbox","form-check-inline"],["formControlName","encryptionType","id","kmsEnabled","name","encryptionType","value","aws:kms","type","radio",1,"form-check-input"],["for","kmsEnabled",1,"custom-check-label"],c,[4,"ngIf"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"submitText","form","submitActionEvent"],["for","kms_provider",1,"cd-col-form-label","required"],F,[1,"cd-col-form-input"],["id","kms_provider","name","kms_provider","formControlName","kms_provider",1,"form-select"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[3,"ngValue"],z,[3,"value"],[1,"invalid-feedback"],Q,["for","auth_method",1,"cd-col-form-label","required"],J,["id","auth_method","name","auth_method","formControlName","auth_method",1,"form-select"],j,["for","secret_engine",1,"cd-col-form-label","required"],oe,["id","secret_engine","name","secret_engine","formControlName","secret_engine",1,"form-select"],Te,["for","secret_path",1,"cd-col-form-label"],Se,["id","secret_path","name","secret_path","type","text","formControlName","secret_path",1,"form-control"],Oe,["for","namespace",1,"cd-col-form-label"],be,["id","namespace","name","namespace","type","text","formControlName","namespace",1,"form-control"],["for","address",1,"cd-col-form-label","required"],me,["id","address","name","address","formControlName","address","placeholder","http://127.0.0.1:8000",1,"form-control"],Ge,["for","token",1,"cd-col-form-label","required"],ye,Le,["type","file","formControlName","token",3,"change"],Ee,["for","ssl_cert",1,"cd-col-form-label"],Ue,$e,["type","file","formControlName","ssl_cert",3,"change"],xe,["for","client_cert",1,"cd-col-form-label"],De,ve,["type","file","formControlName","client_cert",3,"change"],ae,["for","client_key",1,"cd-col-form-label"],Re,ce,["type","file",3,"change"],Je]},template:function(t,o){1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.BQk(),e.ynx(3,3),e.TgZ(4,"form",4,5)(6,"div",6)(7,"div",7)(8,"label",8),e.SDv(9,9),e.qZA(),e.TgZ(10,"div",10),e._UZ(11,"input",11),e.TgZ(12,"label",12),e.SDv(13,13),e.qZA()(),e.TgZ(14,"div",14),e._UZ(15,"input",15),e.TgZ(16,"label",16),e.SDv(17,17),e.qZA()()(),e.YNc(18,re,9,3,"div",18),e.YNc(19,W,8,2,"div",18),e.YNc(20,r,8,2,"div",18),e.YNc(21,G,7,1,"div",18),e.YNc(22,q,6,0,"div",18),e.YNc(23,te,7,1,"div",18),e.YNc(24,Fe,9,1,"div",19),e.YNc(25,ke,10,1,"div",18),e.YNc(26,ze,10,1,"div",18),e.YNc(27,He,10,1,"div",18),e.qZA(),e.TgZ(28,"div",20)(29,"cd-form-button-panel",21),e.NdJ("submitActionEvent",function(){return o.onSubmit()}),e.qZA()()(),e.BQk(),e.qZA()),2&t&&(e.Q6J("modalRef",o.activeModal),e.xp6(4),e.Q6J("formGroup",o.configForm),e.xp6(14),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(1),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(1),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(1),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(1),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(1),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(1),e.Q6J("ngIf","token"===o.configForm.getValue("auth_method")),e.xp6(1),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(1),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(1),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(2),e.Q6J("submitText",o.actionLabels.SUBMIT)("form",o.configForm))},dependencies:[g.sg,g.O5,pe.S,he.z,we.p,Ae.o,Pe.b,We.P,C.V,_._Y,_.YN,_.Kr,_.Fj,_.EJ,_._,_.JJ,_.JL,_.sg,_.u]}),n})();function xn(n,i){1&n&&(e.TgZ(0,"span",18),e.SDv(1,19),e.qZA())}function Zn(n,i){1&n&&(e.TgZ(0,"span",18),e.SDv(1,20),e.qZA())}function kn(n,i){1&n&&(e.TgZ(0,"span",18),e.SDv(1,21),e.qZA())}function Bn(n,i){1&n&&(e.TgZ(0,"span",18),e.SDv(1,22),e.qZA())}function zn(n,i){1&n&&(e.TgZ(0,"span",18),e.SDv(1,23),e.qZA())}let qn=(()=>{class n{constructor(t,o,c){this.formBuilder=t,this.activeModal=o,this.actionLabels=c,this.submitAction=new e.vpe,this.editMode=!1,this.createForm()}createForm(){this.form=this.formBuilder.group({key:[null,[_.kI.required,X.h.custom("unique",t=>!(w().isEmpty(t)&&!this.currentKeyTags)&&this.storedKey!==t&&this.currentKeyTags.includes(t)),X.h.custom("maxLength",t=>!w().isEmpty(t)&&t.length>128)]],value:[null,[_.kI.required,X.h.custom("maxLength",t=>!w().isEmpty(t)&&t.length>128)]]})}onSubmit(){this.submitAction.emit(this.form.value),this.activeModal.close()}getMode(){return this.editMode?this.actionLabels.EDIT:this.actionLabels.ADD}fillForm(t){this.form.setValue(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ze.O),e.Y36(v.Kz),e.Y36(T.p4))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-bucket-tag-modal"]],outputs:{submitAction:"submitAction"},decls:24,vars:10,consts:function(){let i,t,o,c,F,z,Q,J;return i="" + "\ufffd0\ufffd" + " Tag",t="Key",o="Value",c="This field is required.",F="This key must be unique.",z="Length of the key must be maximum of 128 characters",Q="This field is required.",J="Length of the value must be a maximum of 128 characters",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],[1,"form",3,"formGroup"],["formDir","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","key",1,"cd-col-form-label","required"],t,[1,"cd-col-form-input"],["type","text","formControlName","key","id","key",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","value",1,"cd-col-form-label","required"],o,["id","value","type","text","formControlName","value",1,"form-control"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],[1,"invalid-feedback"],c,F,z,Q,J]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0)(1,"span",1),e.SDv(2,2),e.qZA(),e.ynx(3,3),e.TgZ(4,"form",4,5)(6,"div",6)(7,"div",7)(8,"label",8),e.SDv(9,9),e.qZA(),e.TgZ(10,"div",10),e._UZ(11,"input",11),e.YNc(12,xn,2,0,"span",12),e.YNc(13,Zn,2,0,"span",12),e.YNc(14,kn,2,0,"span",12),e.qZA()(),e.TgZ(15,"div",7)(16,"label",13),e.SDv(17,14),e.qZA(),e.TgZ(18,"div",10),e._UZ(19,"input",15),e.YNc(20,Bn,2,0,"span",12),e.YNc(21,zn,2,0,"span",12),e.qZA()()(),e.TgZ(22,"div",16)(23,"cd-form-button-panel",17),e.NdJ("submitActionEvent",function(){return o.onSubmit()}),e.qZA()()(),e.BQk(),e.qZA()),2&t){const c=e.MAs(5);e.Q6J("modalRef",o.activeModal),e.xp6(2),e.pQV(o.getMode()),e.QtT(2),e.xp6(2),e.Q6J("formGroup",o.form),e.xp6(8),e.Q6J("ngIf",o.form.showError("key",c,"required")),e.xp6(1),e.Q6J("ngIf",o.form.showError("key",c,"unique")),e.xp6(1),e.Q6J("ngIf",o.form.showError("key",c,"maxLength")),e.xp6(6),e.Q6J("ngIf",o.form.showError("value",c,"required")),e.xp6(1),e.Q6J("ngIf",o.form.showError("value",c,"maxLength")),e.xp6(2),e.Q6J("form",o.form)("submitText",o.getMode())}},dependencies:[g.O5,he.z,we.p,Ae.o,Pe.b,We.P,C.V,_._Y,_.Fj,_.JJ,_.JL,_.sg,_.u]}),n})();var Qe=p(63285),Hn=p(24737),Ve=p(34501);const Xn=["*"];let Kn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-help-text"]],ngContentSelectors:Xn,decls:2,vars:0,consts:[[1,"form-text","text-muted"]],template:function(t,o){1&t&&(e.F$t(),e.TgZ(0,"div",0),e.Hsn(1),e.qZA())},styles:["legend .text-muted{font-size:small}"]}),n})();var Qn=p(1372),st=p(82945),cn=p(63622),Ye=p(10545);const Yn=["bucketPolicyTextArea"];function Jn(n,i){1&n&&(e.TgZ(0,"div",10)(1,"label",39),e.SDv(2,60),e.qZA(),e.TgZ(3,"div",13),e._UZ(4,"input",61),e.qZA()())}function Vn(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,63),e.qZA())}function jn(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,64),e.qZA())}function eo(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,65),e.qZA())}function to(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,66),e.qZA())}function no(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,67),e.qZA())}function oo(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,68),e.qZA())}function io(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,69),e.qZA())}function ro(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,70),e.qZA())}function _o(n,i){1&n&&(e.TgZ(0,"option",71),e.SDv(1,72),e.qZA()),2&n&&e.Q6J("ngValue",null)}function so(n,i){1&n&&(e.TgZ(0,"option",71),e.SDv(1,73),e.qZA()),2&n&&e.Q6J("ngValue",null)}function ao(n,i){if(1&n&&(e.TgZ(0,"option",74),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function lo(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,75),e.qZA())}function co(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"fieldset")(1,"legend",22),e.SDv(2,76),e.qZA(),e.TgZ(3,"div",10)(4,"div",77)(5,"div",78)(6,"input",79),e.NdJ("change",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.setMfaDeleteValidators())}),e.qZA(),e.TgZ(7,"label",80),e.SDv(8,81),e.qZA(),e.TgZ(9,"cd-helper")(10,"span"),e.SDv(11,82),e.qZA()()()()()()}}function uo(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,91),e.qZA())}function fo(n,i){if(1&n&&(e.TgZ(0,"div",10)(1,"label",88),e.SDv(2,89),e.qZA(),e.TgZ(3,"div",13),e._UZ(4,"input",90),e.YNc(5,uo,2,0,"span",15),e.qZA()()),2&n){e.oxw(2);const t=e.MAs(2),o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.bucketForm.showError("mfa-token-serial",t,"required"))}}function po(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,95),e.qZA())}function go(n,i){if(1&n&&(e.TgZ(0,"div",10)(1,"label",92),e.SDv(2,93),e.qZA(),e.TgZ(3,"div",13),e._UZ(4,"input",94),e.YNc(5,po,2,0,"span",15),e.qZA()()),2&n){e.oxw(2);const t=e.MAs(2),o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.bucketForm.showError("mfa-token-pin",t,"required"))}}function To(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"fieldset")(1,"legend",22),e.SDv(2,83),e.qZA(),e.TgZ(3,"div",10)(4,"div",77)(5,"div",78)(6,"input",84),e.NdJ("change",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.setMfaDeleteValidators())}),e.qZA(),e.TgZ(7,"label",85),e.SDv(8,86),e.qZA(),e.TgZ(9,"cd-helper")(10,"span"),e.SDv(11,87),e.qZA()()()()(),e.YNc(12,fo,6,1,"div",9),e.YNc(13,go,6,1,"div",9),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(12),e.Q6J("ngIf",t.areMfaCredentialsRequired()),e.xp6(1),e.Q6J("ngIf",t.areMfaCredentialsRequired())}}function Eo(n,i){1&n&&(e.TgZ(0,"span"),e.SDv(1,110),e.qZA())}function Ro(n,i){1&n&&(e.TgZ(0,"span"),e.SDv(1,111),e.qZA())}function mo(n,i){if(1&n&&(e.TgZ(0,"div",10)(1,"label",103),e.SDv(2,104),e.qZA(),e.TgZ(3,"div",13)(4,"select",105)(5,"option",106),e.SDv(6,107),e.qZA(),e.TgZ(7,"option",108),e.SDv(8,109),e.qZA()(),e.TgZ(9,"cd-help-text"),e.YNc(10,Eo,2,0,"span",21),e.YNc(11,Ro,2,0,"span",21),e.qZA()()()),2&n){const t=e.oxw(3);e.xp6(10),e.Q6J("ngIf","COMPLIANCE"===t.bucketForm.getValue("lock_mode")),e.xp6(1),e.Q6J("ngIf","GOVERNANCE"===t.bucketForm.getValue("lock_mode"))}}function ho(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,116),e.qZA())}function Mo(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,117),e.qZA())}function So(n,i){if(1&n&&(e.TgZ(0,"div",10)(1,"label",112),e.ynx(2),e.SDv(3,113),e.BQk(),e.qZA(),e.TgZ(4,"div",13),e._UZ(5,"input",114),e.TgZ(6,"cd-help-text")(7,"span"),e.SDv(8,115),e.qZA()(),e.YNc(9,ho,2,0,"span",15),e.YNc(10,Mo,2,0,"span",15),e.qZA()()),2&n){e.oxw(2);const t=e.MAs(2),o=e.oxw();e.xp6(9),e.Q6J("ngIf",o.bucketForm.showError("lock_retention_period_days",t,"pattern")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("lock_retention_period_days",t,"lockDays"))}}function Co(n,i){1&n&&(e.TgZ(0,"cd-alert-panel",118),e._uU(1," Bucket Versioning can't be disabled when Object Locking is enabled. "),e.qZA())}function Fo(n,i){1&n&&(e.TgZ(0,"cd-alert-panel",119),e._uU(1," Enabling Object Locking will allow the configuration of GOVERNANCE or COMPLIANCE modes, which will help ensure that an object version cannot be overwritten or deleted for the specified period. "),e.qZA())}function Oo(n,i){if(1&n&&(e.TgZ(0,"fieldset")(1,"legend",22),e.tHW(2,96),e._UZ(3,"cd-help-text"),e.N_p(),e.qZA(),e.TgZ(4,"div",10)(5,"label",97),e.SDv(6,98),e.qZA(),e.TgZ(7,"div",13),e._UZ(8,"input",99),e.TgZ(9,"cd-help-text")(10,"span"),e.SDv(11,100),e.qZA()()()(),e.YNc(12,mo,12,2,"div",9),e.YNc(13,So,11,2,"div",9),e.TgZ(14,"div",10),e._UZ(15,"div",49),e.TgZ(16,"div",13),e.YNc(17,Co,2,0,"cd-alert-panel",101),e.YNc(18,Fo,2,0,"cd-alert-panel",102),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(12),e.Q6J("ngIf",t.bucketForm.getValue("lock_enabled")),e.xp6(1),e.Q6J("ngIf",t.bucketForm.getValue("lock_enabled")),e.xp6(4),e.Q6J("ngIf",t.bucketForm.getValue("lock_enabled")),e.xp6(1),e.Q6J("ngIf",t.bucketForm.getValue("lock_enabled"))}}function No(n,i){1&n&&(e.TgZ(0,"option",71),e.SDv(1,130),e.qZA()),2&n&&e.Q6J("ngValue",null)}function Ao(n,i){if(1&n&&(e.TgZ(0,"option",74),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Po(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,131),e.qZA())}function bo(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",10)(2,"label",127),e.SDv(3,128),e.qZA(),e.TgZ(4,"div",13)(5,"select",129),e.YNc(6,No,2,1,"option",19),e.YNc(7,Ao,2,2,"option",20),e.qZA(),e.YNc(8,Po,2,0,"span",15),e.qZA()()()),2&n){e.oxw(2);const t=e.MAs(2),o=e.oxw();e.xp6(5),e.Q6J("autofocus",o.editing),e.xp6(1),e.Q6J("ngIf",null!==o.kmsProviders),e.xp6(1),e.Q6J("ngForOf",o.kmsProviders),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("kms_provider",t,"required"))}}function Io(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,135),e.qZA())}function Go(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",10)(2,"label",132),e.SDv(3,133),e.qZA(),e.TgZ(4,"div",13),e._UZ(5,"input",134),e.YNc(6,Io,2,0,"span",15),e.qZA()()()),2&n){e.oxw(2);const t=e.MAs(2),o=e.oxw();e.xp6(6),e.Q6J("ngIf",o.bucketForm.showError("keyId",t,"required"))}}function yo(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",10)(2,"div",77)(3,"div",120),e._UZ(4,"input",121),e.TgZ(5,"label",122),e.SDv(6,123),e.qZA()()()(),e.TgZ(7,"div",10)(8,"div",77)(9,"div",120),e._UZ(10,"input",124),e.TgZ(11,"label",125),e.SDv(12,126),e.qZA()()()(),e.YNc(13,bo,9,4,"div",21),e.YNc(14,Go,7,1,"div",21),e.qZA()),2&n){const t=e.oxw(2);e.xp6(4),e.uIk("disabled",!t.s3VaultConfig||null),e.xp6(6),e.uIk("disabled",!t.kmsVaultConfig||null),e.xp6(3),e.Q6J("ngIf","aws:kms"===t.bucketForm.getValue("encryption_type")),e.xp6(1),e.Q6J("ngIf","aws:kms"===t.bucketForm.getValue("encryption_type"))}}function Lo(n,i){1&n&&e.GkF(0)}const Do=function(n,i){return{index:n,tag:i}};function vo(n,i){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,Lo,1,0,"ng-container",136),e.qZA()),2&n){const t=i.$implicit,o=i.index;e.oxw(2);const c=e.MAs(2);e.xp6(1),e.Q6J("ngTemplateOutlet",c)("ngTemplateOutletContext",e.WLB(2,Do,o,t))}}function wo(n,i){1&n&&(e.TgZ(0,"strong",137),e.SDv(1,138),e.qZA())}function Wo(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,139),e.qZA())}function Uo(n,i){if(1&n&&(e.TgZ(0,"option",74),e.SDv(1,140),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.pQV(t),e.QtT(1)}}function $o(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,141),e.qZA())}function xo(n,i){if(1&n&&(e.TgZ(0,"option",74),e.SDv(1,142),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.pQV(t),e.QtT(1)}}function Zo(n,i){1&n&&(e.TgZ(0,"span",62),e.SDv(1,143),e.qZA())}function ko(n,i){1&n&&(e.TgZ(0,"option",71),e.SDv(1,148),e.qZA()),2&n&&e.Q6J("ngValue",null)}function Bo(n,i){1&n&&(e.TgZ(0,"option",71),e.SDv(1,149),e.qZA()),2&n&&e.Q6J("ngValue",null)}function zo(n,i){if(1&n&&(e.TgZ(0,"option",74),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.name),e.xp6(1),e.Oqu(t.description)}}function qo(n,i){if(1&n&&(e.TgZ(0,"cd-form-advanced-fieldset")(1,"div",10)(2,"label",144),e.SDv(3,145),e.qZA(),e.TgZ(4,"div",13)(5,"select",146),e.YNc(6,ko,2,1,"option",19),e.YNc(7,Bo,2,1,"option",19),e.YNc(8,zo,2,2,"option",20),e.qZA(),e.TgZ(9,"cd-help-text")(10,"span"),e.SDv(11,147),e.qZA()()()()()),2&n){const t=e.oxw(2);e.xp6(6),e.Q6J("ngIf",null===t.placementTargets),e.xp6(1),e.Q6J("ngIf",null!==t.placementTargets),e.xp6(1),e.Q6J("ngForOf",t.placementTargets)}}const Ho=function(n){return{required:n}},je=function(n){return[n]};function Xo(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"form",3,4)(3,"div",5)(4,"div",6),e.SDv(5,7),e.ALo(6,"titlecase"),e.ALo(7,"upperFirst"),e.qZA(),e.TgZ(8,"div",8),e.YNc(9,Jn,5,0,"div",9),e.TgZ(10,"div",10)(11,"label",11),e.SDv(12,12),e.qZA(),e.TgZ(13,"div",13),e._UZ(14,"input",14),e.YNc(15,Vn,2,0,"span",15),e.YNc(16,jn,2,0,"span",15),e.YNc(17,eo,2,0,"span",15),e.YNc(18,to,2,0,"span",15),e.YNc(19,no,2,0,"span",15),e.YNc(20,oo,2,0,"span",15),e.YNc(21,io,2,0,"span",15),e.YNc(22,ro,2,0,"span",15),e.qZA()(),e.TgZ(23,"div",10)(24,"label",16),e.SDv(25,17),e.qZA(),e.TgZ(26,"div",13)(27,"select",18),e.YNc(28,_o,2,1,"option",19),e.YNc(29,so,2,1,"option",19),e.YNc(30,ao,2,2,"option",20),e.qZA(),e.YNc(31,lo,2,0,"span",15),e.qZA()(),e.YNc(32,co,12,0,"fieldset",21),e.YNc(33,To,14,2,"fieldset",21),e.YNc(34,Oo,19,4,"fieldset",21),e.TgZ(35,"fieldset")(36,"legend",22),e.SDv(37,23),e.qZA(),e.TgZ(38,"div",10)(39,"label",24),e.SDv(40,25),e.qZA(),e.TgZ(41,"div",13),e._UZ(42,"input",26),e.TgZ(43,"cd-help-text",27)(44,"span"),e.tHW(45,28),e.TgZ(46,"a",29),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.openConfigModal())}),e.qZA(),e.N_p(),e.qZA()()()(),e.YNc(47,yo,15,4,"div",21),e.qZA(),e.TgZ(48,"fieldset")(49,"legend",22),e.tHW(50,30),e._UZ(51,"cd-help-text"),e.N_p(),e.qZA(),e.YNc(52,vo,2,5,"span",31),e.TgZ(53,"div",32)(54,"div",33),e.YNc(55,wo,2,0,"strong",34),e.TgZ(56,"button",35),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.showTagModal())}),e._UZ(57,"i",36),e.ynx(58),e.SDv(59,37),e.BQk(),e.qZA()()()(),e.TgZ(60,"fieldset")(61,"legend",22),e.SDv(62,38),e.qZA(),e.TgZ(63,"div",32)(64,"div",33)(65,"div",10)(66,"label",39),e.SDv(67,40),e.qZA(),e.TgZ(68,"div",13)(69,"textarea",41,42),e.NdJ("change",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.bucketPolicyOnChange())}),e._uU(71,"                  "),e.qZA(),e.YNc(72,Wo,2,0,"span",15),e.TgZ(73,"button",43),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.clearBucketPolicy())}),e.tHW(74,44),e._UZ(75,"i",36),e.N_p(),e.qZA(),e.TgZ(76,"div",45)(77,"button",46),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.openUrl("https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-bucket-policies.html?icmpid=docs_amazons3_console"))}),e.tHW(78,47),e._UZ(79,"i",36),e.N_p(),e.qZA(),e.TgZ(80,"button",46),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.openUrl("https://awspolicygen.s3.amazonaws.com/policygen.html"))}),e.tHW(81,48),e._UZ(82,"i",36),e.N_p(),e.qZA()()()(),e.TgZ(83,"div",10)(84,"label",49),e.tHW(85,50),e._UZ(86,"cd-helper"),e.N_p(),e.qZA(),e.TgZ(87,"div",13)(88,"div",51)(89,"span",52),e.tHW(90,53),e._UZ(91,"cd-helper"),e.N_p(),e.qZA(),e.TgZ(92,"select",54),e.NdJ("change",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.onSelectionFilter())}),e.YNc(93,Uo,2,2,"option",20),e.qZA(),e.YNc(94,$o,2,0,"span",15),e.TgZ(95,"span",55),e.tHW(96,56),e._UZ(97,"cd-helper"),e.N_p(),e.qZA(),e.TgZ(98,"select",57),e.YNc(99,xo,2,2,"option",20),e.qZA(),e.YNc(100,Zo,2,0,"span",15),e.qZA()()()()()(),e.YNc(101,qo,12,3,"cd-form-advanced-fieldset",21),e.qZA(),e.TgZ(102,"div",58)(103,"cd-form-button-panel",59),e.NdJ("submitActionEvent",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.submit())}),e.ALo(104,"titlecase"),e.ALo(105,"upperFirst"),e.qZA()()()()()}if(2&n){const t=e.MAs(2),o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.bucketForm),e.xp6(6),e.pQV(e.lcZ(6,40,o.action))(e.lcZ(7,42,o.resource)),e.QtT(5),e.xp6(2),e.Q6J("ngIf",o.editing),e.xp6(2),e.Q6J("ngClass",e.VKq(48,Ho,!o.editing)),e.xp6(3),e.Q6J("readonly",o.editing)("autofocus",!o.editing),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("bid",t,"required")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("bid",t,"bucketNameInvalid")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("bid",t,"bucketNameNotAllowed")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("bid",t,"containsUpperCase")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("bid",t,"lowerCaseOrNumber")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("bid",t,"ipAddress")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("bid",t,"onlyLowerCaseAndNumbers")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("bid",t,"shouldBeInRange")),e.xp6(5),e.Q6J("autofocus",o.editing),e.xp6(1),e.Q6J("ngIf",null===o.owners),e.xp6(1),e.Q6J("ngIf",null!==o.owners),e.xp6(1),e.Q6J("ngForOf",o.owners),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("owner",t,"required")),e.xp6(1),e.Q6J("ngIf",o.editing),e.xp6(1),e.Q6J("ngIf",o.editing),e.xp6(1),e.Q6J("ngIf",!o.editing||o.editing&&o.bucketForm.getValue("lock_enabled")),e.xp6(8),e.uIk("disabled",!o.kmsVaultConfig&&!o.s3VaultConfig||null),e.xp6(5),e.Q6J("ngIf",o.bucketForm.getValue("encryption_enabled")),e.xp6(5),e.Q6J("ngForOf",o.tags),e.xp6(3),e.Q6J("ngIf",o.tags.length>19),e.xp6(1),e.Q6J("disabled",o.tags.length>19),e.xp6(1),e.Q6J("ngClass",e.VKq(50,je,o.icons.add)),e.xp6(15),e.Q6J("ngIf",o.bucketForm.showError("bucket_policy",t,"invalidJson")),e.xp6(3),e.Q6J("ngClass",e.VKq(52,je,o.icons.destroy)),e.xp6(4),e.Q6J("ngClass",e.VKq(54,je,o.icons.externalUrl)),e.xp6(3),e.Q6J("ngClass",e.VKq(56,je,o.icons.externalUrl)),e.xp6(11),e.Q6J("ngForOf",o.grantees),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("grantee",t,"required")),e.xp6(5),e.Q6J("ngForOf",o.aclPermissions),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("aclPermission",t,"required")),e.xp6(1),e.Q6J("ngIf",!o.editing),e.xp6(2),e.Q6J("form",o.bucketForm)("submitText",e.lcZ(104,44,o.action)+" "+e.lcZ(105,46,o.resource))}}function Ko(n,i){if(1&n&&(e.ynx(0),e._UZ(1,"input",153),e.BQk()),2&n){const t=i.$implicit,o=e.oxw(),c=o.index,F=o.tag;e.xp6(1),e.hYB("id","tag-",t.attribute,"-",c,""),e.Q6J("ngbTooltip",t.attribute)("value",F[t.attribute])}}function Qo(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",150),e.YNc(1,Ko,2,4,"ng-container",31),e.TgZ(2,"button",151),e.NdJ("click",function(){const F=e.CHM(t).index,z=e.oxw();return e.KtG(z.showTagModal(F))}),e._UZ(3,"i",36),e.qZA(),e.TgZ(4,"button",152),e.NdJ("click",function(){const F=e.CHM(t).index,z=e.oxw();return e.KtG(z.deleteTag(F))}),e._UZ(5,"i",36),e.qZA()()}if(2&n){const t=i.index,o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.tagConfig),e.xp6(1),e.MGl("id","tag-edit-",t,""),e.xp6(1),e.Q6J("ngClass",e.VKq(5,je,o.icons.edit)),e.xp6(1),e.MGl("id","tag-delete-",t,""),e.xp6(1),e.Q6J("ngClass",e.VKq(7,je,o.icons.trash))}}let un=(()=>{class n extends H.E{get isVersioningEnabled(){return this.bucketForm.getValue("versioning")}get isMfaDeleteEnabled(){return this.bucketForm.getValue("mfa-delete")}constructor(t,o,c,F,z,Q,J,j,oe,Te,Se,Oe){super(),this.route=t,this.router=o,this.formBuilder=c,this.rgwBucketService=F,this.rgwSiteService=z,this.modalService=Q,this.rgwUserService=J,this.notificationService=j,this.rgwEncryptionModal=oe,this.textAreaJsonFormatterService=Te,this.actionLabels=Se,this.changeDetectorRef=Oe,this.editing=!1,this.owners=null,this.kmsProviders=null,this.placementTargets=[],this.isVersioningAlreadyEnabled=!1,this.isMfaDeleteAlreadyEnabled=!1,this.icons=B.P,this.kmsVaultConfig=!1,this.s3VaultConfig=!1,this.tags=[],this.dirtyTags=!1,this.tagConfig=[{attribute:"key"},{attribute:"value"}],this.grantees=[ge.Owner,ge.Everyone,ge.AuthenticatedUsers],this.aclPermissions=[ie.FullControl],this.editing=this.router.url.startsWith(`/rgw/bucket/${T.MQ.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource="bucket",this.createForm()}ngAfterViewChecked(){this.changeDetectorRef.detectChanges(),this.bucketPolicyOnChange()}createForm(){const t=this,o=X.h.custom("lockDays",()=>{if(!t.bucketForm||!w().get(t.bucketForm.getRawValue(),"lock_enabled"))return!1;const c=Number(t.bucketForm.getValue("lock_retention_period_days"));return!Number.isInteger(c)||0===c});this.bucketForm=this.formBuilder.group({id:[null],bid:[null,[_.kI.required],this.editing?[]:[X.h.bucketName(),X.h.bucketExistence(!1,this.rgwBucketService)]],owner:[null,[_.kI.required]],kms_provider:["vault"],"placement-target":[null],versioning:[null],"mfa-delete":[null],"mfa-token-serial":[""],"mfa-token-pin":[""],lock_enabled:[{value:!1,disabled:this.editing}],encryption_enabled:[null],encryption_type:[null,[X.h.requiredIf({encryption_enabled:!0})]],keyId:[null,[X.h.requiredIf({encryption_type:"aws:kms",encryption_enabled:!0})]],lock_mode:["COMPLIANCE"],lock_retention_period_days:[10,[X.h.number(!1),o]],bucket_policy:["{}",X.h.json()],grantee:[ge.Owner,[_.kI.required]],aclPermission:[[ie.FullControl],[_.kI.required]]})}ngOnInit(){const t={owners:this.rgwUserService.enumerate()};this.kmsProviders=this.rgwEncryptionModal.kmsProviders,this.rgwBucketService.getEncryptionConfig().subscribe(o=>{this.kmsVaultConfig=o[0],this.s3VaultConfig=o[1],this.kmsVaultConfig&&this.s3VaultConfig?this.bucketForm.get("encryption_type").setValue(""):this.kmsVaultConfig?this.bucketForm.get("encryption_type").setValue("aws:kms"):this.s3VaultConfig?this.bucketForm.get("encryption_type").setValue("AES256"):this.bucketForm.get("encryption_type").setValue("")}),this.editing||(t.getPlacementTargets=this.rgwSiteService.get("placement-targets")),this.route.params.subscribe(o=>{if(o.hasOwnProperty("bid")){const c=decodeURIComponent(o.bid);t.getBid=this.rgwBucketService.get(c)}(0,x.D)(t).subscribe(c=>{if(this.owners=c.owners.sort(),c.getPlacementTargets){const F=c.getPlacementTargets;this.zonegroup=F.zonegroup,w().forEach(F.placement_targets,z=>{z.description=`${z.name} (${"pool"}: ${z.data_pool})`,this.placementTargets.push(z)}),1===this.placementTargets.length&&this.bucketForm.get("placement-target").setValue(this.placementTargets[0].name)}if(c.getBid){const F=c.getBid,z=w().clone(this.bucketForm.getRawValue());let Q=w().pick(F,w().keys(z));if(Q.lock_retention_period_days=this.rgwBucketService.getLockDays(F),Q["placement-target"]=F.placement_rule,Q.versioning=F.versioning===de.ENABLED,Q["mfa-delete"]=F.mfa_delete===fe.ENABLED,Q.encryption_enabled="Enabled"===F.encryption,F.tagset)for(const[J,j]of Object.entries(F.tagset))this.tags.push({key:J,value:j.toString()});Q=w().merge(z,Q),this.editing&&([Q.grantee,Q.aclPermission]=this.aclXmlToFormValues(F.acl,F.owner)),this.bucketForm.setValue(Q),this.editing&&(this.isVersioningAlreadyEnabled=this.isVersioningEnabled,this.isMfaDeleteAlreadyEnabled=this.isMfaDeleteEnabled,this.setMfaDeleteValidators(),Q.lock_enabled&&this.bucketForm.controls.versioning.disable(),Q.bucket_policy&&this.bucketForm.get("bucket_policy").setValue(JSON.stringify(Q.bucket_policy,null,2)),this.filterAclPermissions())}this.loadingReady()})})}goToListView(){this.router.navigate(["/rgw/bucket"])}submit(){if(null==this.bucketForm.getValue("encryption_enabled")&&(this.bucketForm.get("encryption_enabled").setValue(!1),this.bucketForm.get("encryption_type").setValue(null)),this.bucketForm.pristine)return void this.goToListView();const t=this.bucketForm.value,o=this.tagsToXML(this.tags),c=this.getBucketPolicy(),F=this.permissionToCannedAcl();if(this.editing){const z=this.getVersioningStatus(),Q=this.getMfaDeleteStatus();this.rgwBucketService.update(t.bid,t.id,t.owner,z,t.encryption_enabled,t.encryption_type,t.keyId,Q,t["mfa-token-serial"],t["mfa-token-pin"],t.lock_mode,t.lock_retention_period_days,o,c,F).subscribe(()=>{this.notificationService.show(I.k.success,"Updated Object Gateway bucket '\n          " + t.bid + "'.\n        "),this.goToListView()},()=>{this.bucketForm.setErrors({cdSubmitButton:!0})})}else this.rgwBucketService.create(t.bid,t.owner,this.zonegroup,t["placement-target"],t.lock_enabled,t.lock_mode,t.lock_retention_period_days,t.encryption_enabled,t.encryption_type,t.keyId,o,c,F).subscribe(()=>{this.notificationService.show(I.k.success,"Created Object Gateway bucket '\n          " + t.bid + "'\n        "),this.goToListView()},()=>{this.bucketForm.setErrors({cdSubmitButton:!0})})}areMfaCredentialsRequired(){return this.isMfaDeleteEnabled!==this.isMfaDeleteAlreadyEnabled||this.isMfaDeleteAlreadyEnabled&&this.isVersioningEnabled!==this.isVersioningAlreadyEnabled}setMfaDeleteValidators(){const t=this.bucketForm.get("mfa-token-serial"),o=this.bucketForm.get("mfa-token-pin");this.areMfaCredentialsRequired()?(t.setValidators(_.kI.required),o.setValidators(_.kI.required)):(t.setValidators(null),o.setValidators(null)),t.updateValueAndValidity(),o.updateValueAndValidity()}getVersioningStatus(){return this.isVersioningEnabled?de.ENABLED:de.SUSPENDED}getMfaDeleteStatus(){return this.isMfaDeleteEnabled?fe.ENABLED:fe.DISABLED}getBucketPolicy(){return this.bucketForm.getValue("bucket_policy")||"{}"}fileUpload(t,o){const c=t[0];(new FileReader).addEventListener("load",()=>{const z=this.bucketForm.get(o);z.setValue(c),z.markAsDirty(),z.markAsTouched(),z.updateValueAndValidity()})}bucketPolicyOnChange(){this.bucketPolicyTextArea&&this.textAreaJsonFormatterService.format(this.bucketPolicyTextArea)}openUrl(t){window.open(t,"_blank")}clearBucketPolicy(){this.bucketForm.get("bucket_policy").setValue("{}"),this.bucketForm.markAsDirty(),this.bucketForm.updateValueAndValidity()}openConfigModal(){this.modalService.show($n,null,{size:"lg"}).componentInstance.configForm.get("encryptionType").setValue(this.bucketForm.getValue("encryption_type")||"AES256")}showTagModal(t){const c=this.modalService.show(qn).componentInstance;c.currentKeyTags=this.tags.map(F=>F.key),w().isNumber(t)&&(c.editMode=!0,c.fillForm(this.tags[t]),c.storedKey=this.tags[t].key),c.submitAction.subscribe(F=>{this.setTag(F,t)})}deleteTag(t){this.tags.splice(t,1),this.dirtyTags=!0,this.bucketForm.markAsDirty(),this.bucketForm.updateValueAndValidity()}setTag(t,o){w().isNumber(o)?this.tags[o]=t:this.tags.push(t),this.dirtyTags=!0,this.bucketForm.markAsDirty(),this.bucketForm.updateValueAndValidity()}tagsToXML(t){if(!this.dirtyTags&&0===t.length)return"";let o="<Tagging><TagSet>";for(const c of t){o+="<Tag>";for(const F in c)"key"===F?o+=`<Key>${c[F]}</Key>`:"value"===F&&(o+=`<Value>${c[F]}</Value>`);o+="</Tag>"}return o+="</TagSet></Tagging>",o}aclXmlToFormValues(t,o){const c=new O.Parser({explicitArray:!1,trim:!0});let F=ie.FullControl,z=ge.Owner;return c.parseString(t,(Q,J)=>{if(Q)return null;const j=J.AccessControlPolicy.AccessControlList.Grant;for(let oe=0;oe<j.length;oe++)j[oe].Grantee.ID!==o&&(j[oe].Grantee.URI&&j[oe].Grantee.URI.includes("AllUsers")?(z=ge.Everyone,F="READ"===j[oe].Permission&&F!==ie.Write?ie.Read:" WRITE"===j[oe].Permission&&F!==ie.Read?ie.Write:ie.All):j[oe].Grantee.URI&&j[oe].Grantee.URI.includes("AuthenticatedUsers")&&(z=ge.AuthenticatedUsers,F=ie.Read))}),[z,F]}onSelectionFilter(){this.filterAclPermissions(),this.bucketForm.get("aclPermission").setValue(this.aclPermissions[0])}filterAclPermissions(){switch(this.bucketForm.get("grantee").value){case ge.Owner:this.aclPermissions=[ie.FullControl];break;case ge.Everyone:this.aclPermissions=[ie.Read,ie.All];break;case ge.AuthenticatedUsers:this.aclPermissions=[ie.Read]}}permissionToCannedAcl(){const t=this.bucketForm.get("grantee").value,o=this.bucketForm.get("aclPermission").value;switch(t){case ge.Everyone:return o===ie.Read?"public-read":"public-read-write";case ge.AuthenticatedUsers:return"authenticated-read";default:return"private"}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(P.gz),e.Y36(P.F0),e.Y36(Ze.O),e.Y36(D.o),e.Y36(b.I),e.Y36(Qe.Z),e.Y36(E),e.Y36(ne.g),e.Y36(ue),e.Y36(Hn.F),e.Y36(T.p4),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-bucket-form"]],viewQuery:function(t,o){if(1&t&&e.Gf(Yn,5),2&t){let c;e.iGM(c=e.CRH())&&(o.bucketPolicyTextArea=c.first)}},features:[e._Bn([ue]),e.qOj],decls:3,vars:1,consts:function(){let i,t,o,c,F,z,Q,J,j,oe,Te,Se,Oe,be,me,Ge,ye,Le,Ee,Ue,$e,xe,De,ve,ae,Re,ce,Je,Ce,ut,dt,ft,pt,gt,Tt,Et,Rt,mt,ht,Mt,St,Ct,Ft,Ot,Nt,At,Pt,bt,It,Gt,yt,Lt,Dt,vt,wt,Wt,Ut,$t,xt,Zt,kt,Bt,zt,qt,Ht,Xt,Kt,Qt,Yt,Jt;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="Name",o="\u540D\u524D...",c="Owner",F="Encryption",z=" Enable ",Q="Enables encryption for the objects in the bucket. To enable encryption on a bucket you need to set the configuration values for SSE-S3 or SSE-KMS. To set the configuration values " + "\ufffd#46\ufffd" + "Click here" + "\ufffd/#46\ufffd" + "",J="Tags " + "\ufffd#51\ufffd" + "Tagging provides a way to categorize storage" + "\ufffd/#51\ufffd" + "",j="Add tag",oe="Policies ",Te="Bucket policy",Se="" + "\ufffd#75\ufffd" + "" + "\ufffd/#75\ufffd" + " Clear ",Oe="" + "\ufffd#79\ufffd" + "" + "\ufffd/#79\ufffd" + " Policy examples ",be="" + "\ufffd#82\ufffd" + "" + "\ufffd/#82\ufffd" + " Policy generator ",me="ACL " + "\ufffd#86\ufffd" + "Any changes to the ACL will overwrite previous one. You can choose any of the available options to modify the spcified user group." + "\ufffd/#86\ufffd" + "",Ge="Grantee " + "\ufffd#91\ufffd" + "Select a grantee (user group) to modify it's permisions" + "\ufffd/#91\ufffd" + "",ye="Permissions " + "\ufffd#97\ufffd" + "Select the permision to give to the selected grantee. Regardless, the owner of the bucket will always have FULL CONTROL access" + "\ufffd/#97\ufffd" + "",Le="Id",Ee="This field is required.",Ue="Bucket names can only contain lowercase letters, numbers, periods and hyphens.",$e="\u9078\u629E\u3055\u308C\u305F\u540D\u524D\u306F\u3059\u3067\u306B\u4F7F\u7528\u3055\u308C\u3066\u3044\u307E\u3059\u3002",xe="Bucket names must not contain uppercase characters or underscores.",De="Each label must start and end with a lowercase letter or a number.",ve="Bucket names cannot be formatted as IP address.",ae="Bucket labels cannot be empty and can only contain lowercase letters, numbers and hyphens.",Re="Bucket names must be 3 to 63 characters long.",ce="\u8AAD\u307F\u8FBC\u3093\u3067\u3044\u307E\u3059...",Je="-- \u30E6\u30FC\u30B6\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044 --",Ce="This field is required.",ut="Versioning",dt="Enabled",ft="Enables versioning for the objects in the bucket.",pt="Multi-Factor Authentication",gt="Delete enabled",Tt="Enables MFA (multi-factor authentication) Delete, which requires additional authentication for changing the bucket versioning state.",Et="Token Serial Number",Rt="This field is required.",mt="Token PIN",ht="This field is required.",Mt=" Object Locking " + "\ufffd#3\ufffd" + " Store objects using a write-once-read-many (WORM) model to prevent objects from being deleted or overwritten for a fixed amount of time or indefinitely. Object Locking works only in versioned buckets. " + "\ufffd/#3\ufffd" + "",St=" Enable ",Ct="Enables locking for the objects in the bucket. Locking can only be enabled while creating a bucket.",Ft="Mode",Ot=" Compliance ",Nt=" Governance ",At=" In COMPLIANCE an object version cannot be overwritten or deleted for the duration of the period. ",Pt=" In GOVERNANCE mode, users cannot overwrite or delete an object version or alter its lock settings unless they have special permissions. ",bt="Days",It="The number of days that you want to specify for the default retention period that will be applied to new objects placed in this bucket.",Gt="The entered value must be a positive integer.",yt="Retention Days must be a positive integer.",Lt="SSE-S3 Encryption",Dt="Connect to an external key management service",vt="KMS Provider",wt="-- Select a provider --",Wt="This field is required.",Ut="Key Id ",$t="This field is required.",xt="Maximum of 20 tags reached",Zt="Invalid json text",kt="" + "\ufffd0\ufffd" + "",Bt="This field is required.",zt="" + "\ufffd0\ufffd" + "",qt="This field is required.",Ht="Placement target",Xt=" When creating a bucket, a placement target can be provided as part of the LocationConstraint to override the default placement targets from the user and zonegroup. ",Kt="\u8AAD\u307F\u8FBC\u3093\u3067\u3044\u307E\u3059...",Qt="-- Select a placement target --",Yt="Edit",Jt="Delete",[["class","cd-col-form",4,"cdFormLoading"],["tagTpl",""],[1,"cd-col-form"],["name","bucketForm","novalidate","",3,"formGroup"],["frm","ngForm"],[1,"card"],[1,"card-header"],i,[1,"card-body"],["class","form-group row",4,"ngIf"],[1,"form-group","row"],["for","bid",1,"cd-col-form-label",3,"ngClass"],t,[1,"cd-col-form-input"],["id","bid","name","bid","type","text","placeholder",o,"formControlName","bid",1,"form-control",3,"readonly","autofocus"],["class","invalid-feedback",4,"ngIf"],["for","owner",1,"cd-col-form-label","required"],c,["id","owner","name","owner","formControlName","owner",1,"form-select",3,"autofocus"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"cd-header"],F,["for","encryption_enabled",1,"cd-col-form-label","pt-0"],z,["id","encryption_enabled","name","encryption_enabled","formControlName","encryption_enabled","type","checkbox",1,"form-check-input"],["aria-label","encryption helper"],Q,["href","#/rgw/bucket/create","aria-label","click here",3,"click"],J,[4,"ngFor","ngForOf"],[1,"row"],[1,"col-12"],["class","text-warning",4,"ngIf"],["type","button","id","add-tag",1,"btn","btn-light","float-end","my-3",3,"disabled","click"],[3,"ngClass"],j,oe,["for","id",1,"cd-col-form-label"],Te,["id","bucket_policy","formControlName","bucket_policy",1,"form-control","resize-vertical",3,"change"],["bucketPolicyTextArea",""],["type","button","id","clear-bucket-policy",1,"btn","btn-light","my-3",3,"click"],Se,["role","group","aria-label","bucket-policy-helpers",1,"btn-group","float-end"],["type","button","id","example-generator-button",1,"btn","btn-light","my-3",3,"click"],Oe,be,[1,"cd-col-form-label"],me,[1,"input-group"],["for","grantee",1,"input-group-text"],Ge,["id","grantee","name","grantee","formControlName","grantee",1,"form-input","form-select",3,"change"],["for","aclPermission",1,"input-group-text"],ye,["id","aclPermission","name","aclPermission","formControlName","aclPermission",1,"form-input","form-select"],[1,"card-footer"],["wrappingClass","text-right",3,"form","submitText","submitActionEvent"],Le,["id","id","name","id","type","text","formControlName","id","readonly","",1,"form-control"],[1,"invalid-feedback"],Ee,Ue,$e,xe,De,ve,ae,Re,[3,"ngValue"],ce,Je,[3,"value"],Ce,ut,[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","versioning","name","versioning","formControlName","versioning",1,"custom-control-input",3,"change"],["for","versioning",1,"custom-control-label"],dt,ft,pt,["type","checkbox","id","mfa-delete","name","mfa-delete","formControlName","mfa-delete",1,"custom-control-input",3,"change"],["for","mfa-delete",1,"custom-control-label"],gt,Tt,["for","mfa-token-serial",1,"cd-col-form-label"],Et,["type","text","id","mfa-token-serial","name","mfa-token-serial","formControlName","mfa-token-serial",1,"form-control"],Rt,["for","mfa-token-pin",1,"cd-col-form-label"],mt,["type","text","id","mfa-token-pin","name","mfa-token-pin","formControlName","mfa-token-pin",1,"form-control"],ht,Mt,["for","lock_enabled",1,"cd-col-form-label","pt-0"],St,["id","lock_enabled","formControlName","lock_enabled","type","checkbox",1,"form-check-input"],Ct,["type","info","class","me-1",4,"ngIf"],["type","warning",4,"ngIf"],["for","lock_mode",1,"cd-col-form-label"],Ft,["formControlName","lock_mode","name","lock_mode","id","lock_mode",1,"form-select"],["value","COMPLIANCE"],Ot,["value","GOVERNANCE"],Nt,At,Pt,["for","lock_retention_period_days",1,"cd-col-form-label"],bt,["type","number","id","lock_retention_period_days","formControlName","lock_retention_period_days","min","1",1,"form-control"],It,Gt,yt,["type","info",1,"me-1"],["type","warning"],[1,"custom-control","custom-radio","custom-control-inline","ps-5"],["formControlName","encryption_type","id","sse_S3_enabled","type","radio","name","encryption_type","value","AES256",1,"form-check-input"],["for","sse_S3_enabled",1,"form-control-label"],Lt,["formControlName","encryption_type","id","kms_enabled","name","encryption_type","value","aws:kms","type","radio",1,"form-check-input"],["for","kms_enabled",1,"form-control-label"],Dt,["for","kms_provider",1,"cd-col-form-label","required"],vt,["id","kms_provider","name","kms_provider","formControlName","kms_provider",1,"form-select",3,"autofocus"],wt,Wt,["for","keyId",1,"cd-col-form-label","required"],Ut,["id","keyId","name","keyId","type","text","formControlName","keyId",1,"form-control"],$t,[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"text-warning"],xt,Zt,kt,Bt,zt,qt,["for","placement-target",1,"cd-col-form-label"],Ht,["id","placement-target","name","placement-target","formControlName","placement-target",1,"form-select"],Xt,Kt,Qt,[1,"input-group","my-2"],["type","button","ngbTooltip",Yt,1,"btn","btn-light",3,"id","click"],["type","button","ngbTooltip",Jt,1,"btn","btn-light",3,"id","click"],["type","text","disabled","","readonly","",1,"form-control",3,"id","ngbTooltip","value"]]},template:function(t,o){1&t&&(e.YNc(0,Xo,106,58,"div",0),e.YNc(1,Qo,6,9,"ng-template",null,1,e.W1O)),2&t&&e.Q6J("cdFormLoading",o.loading)},dependencies:[g.mk,g.sg,g.O5,g.tP,pe.S,Ve.G,we.p,Kn,Qn.B,st.U,cn.y,Ae.o,Pe.b,We.P,C.V,_._Y,_.YN,_.Kr,_.Fj,_.wV,_.Wl,_.EJ,_._,_.JJ,_.JL,_.qQ,_.sg,_.u,v._L,g.rS,Ye.m]}),n})();var dn=p(70882),en=p(68136),tn=p(30982),et=p(83697),Vt=p(68774),nn=p(47557),fn=p(66369),tt=p(51847),nt=p(47640),pn=p(60251),on=p(94928),gn=p(59376),Tn=p(68962),Yo=p(96102);function Jo(n,i){1&n&&(e.TgZ(0,"td"),e.SDv(1,26),e.qZA())}function Vo(n,i){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"dimless"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.selection.bucket_quota.max_size)," ")}}function jo(n,i){1&n&&(e.TgZ(0,"td"),e.SDv(1,27),e.qZA())}function ei(n,i){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.selection.bucket_quota.max_objects," ")}}function ti(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",14),e.SDv(3,24),e.qZA(),e.YNc(4,Jo,2,0,"td",0),e.YNc(5,Vo,3,3,"td",0),e.qZA(),e.TgZ(6,"tr")(7,"td",14),e.SDv(8,25),e.qZA(),e.YNc(9,jo,2,0,"td",0),e.YNc(10,ei,2,1,"td",0),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(4),e.Q6J("ngIf",t.selection.bucket_quota.max_size<=-1),e.xp6(1),e.Q6J("ngIf",t.selection.bucket_quota.max_size>-1),e.xp6(4),e.Q6J("ngIf",t.selection.bucket_quota.max_objects<=-1),e.xp6(1),e.Q6J("ngIf",t.selection.bucket_quota.max_objects>-1)}}function ni(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",14),e.SDv(3,28),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()(),e.TgZ(6,"tr")(7,"td",14),e.SDv(8,29),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA()(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(5),e.Oqu(t.selection.lock_mode),e.xp6(5),e.Oqu(t.selection.lock_retention_period_days)}}function oi(n,i){if(1&n&&(e.TgZ(0,"tr")(1,"td",11),e.SDv(2,32),e.qZA(),e.TgZ(3,"td",13),e._uU(4),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.pQV(t.key),e.QtT(2),e.xp6(2),e.Oqu(t.value)}}function ii(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"legend"),e.SDv(2,30),e.qZA(),e.TgZ(3,"table",10)(4,"tbody"),e.YNc(5,oi,5,2,"tr",31),e.ALo(6,"keyvalue"),e.qZA()(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(5),e.Q6J("ngForOf",e.lcZ(6,1,t.selection.tagset))}}function ri(n,i){if(1&n&&(e.TgZ(0,"table",10)(1,"tbody")(2,"tr")(3,"td",11),e.SDv(4,12),e.qZA(),e.TgZ(5,"td",13),e._uU(6),e.qZA()(),e.TgZ(7,"tr")(8,"td",14),e.SDv(9,15),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA()(),e.TgZ(12,"tr")(13,"td",14),e.SDv(14,16),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA()(),e.TgZ(17,"tr")(18,"td",14),e.SDv(19,17),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA()(),e.TgZ(22,"tr")(23,"td",14),e.SDv(24,18),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA()(),e.TgZ(27,"tr")(28,"td",14),e.SDv(29,19),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.ALo(32,"cdDate"),e.qZA()()()(),e.TgZ(33,"div")(34,"legend"),e.SDv(35,20),e.qZA(),e.TgZ(36,"table",10)(37,"tbody")(38,"tr")(39,"td",11),e.SDv(40,21),e.qZA(),e.TgZ(41,"td",13),e._uU(42),e.ALo(43,"booleanText"),e.qZA()(),e.YNc(44,ti,11,4,"ng-container",0),e.qZA()()(),e.TgZ(45,"legend"),e.SDv(46,22),e.qZA(),e.TgZ(47,"table",10)(48,"tbody")(49,"tr")(50,"td",11),e.SDv(51,23),e.qZA(),e.TgZ(52,"td",13),e._uU(53),e.ALo(54,"booleanText"),e.qZA()(),e.YNc(55,ni,11,2,"ng-container",0),e.qZA()(),e.YNc(56,ii,7,3,"ng-container",0),e.ALo(57,"keyvalue")),2&n){const t=e.oxw(2);let o;e.xp6(6),e.Oqu(t.selection.versioning),e.xp6(5),e.Oqu(t.selection.encryption),e.xp6(5),e.Oqu(t.selection.mfa_delete),e.xp6(5),e.Oqu(t.selection.index_type),e.xp6(5),e.Oqu(t.selection.placement_rule),e.xp6(5),e.Oqu(e.lcZ(32,11,t.selection.mtime)),e.xp6(11),e.Oqu(e.lcZ(43,13,t.selection.bucket_quota.enabled)),e.xp6(2),e.Q6J("ngIf",t.selection.bucket_quota.enabled),e.xp6(9),e.Oqu(e.lcZ(54,15,t.selection.lock_enabled)),e.xp6(2),e.Q6J("ngIf",t.selection.lock_enabled),e.xp6(1),e.Q6J("ngIf",null==(o=e.lcZ(57,17,t.selection.tagset))?null:o.length)}}function _i(n,i){if(1&n&&(e.TgZ(0,"table",10)(1,"tbody")(2,"tr")(3,"td",11),e.SDv(4,33),e.qZA(),e.TgZ(5,"td")(6,"pre"),e._uU(7),e.ALo(8,"json"),e.qZA()()(),e.TgZ(9,"tr")(10,"td",11),e.SDv(11,34),e.qZA(),e.TgZ(12,"td")(13,"table",35)(14,"thead")(15,"tr"),e.tHW(16,36),e._UZ(17,"th")(18,"th"),e.N_p(),e.qZA()(),e.TgZ(19,"tbody")(20,"tr"),e.tHW(21,37),e._UZ(22,"td")(23,"td"),e.N_p(),e.qZA(),e.TgZ(24,"tr"),e.tHW(25,38),e._UZ(26,"td")(27,"td"),e.N_p(),e.qZA(),e.TgZ(28,"tr"),e.tHW(29,39),e._UZ(30,"td")(31,"td"),e.N_p(),e.qZA()()()()()()()),2&n){const t=e.oxw(2);e.xp6(7),e.Oqu(e.lcZ(8,4,t.selection.bucket_policy)),e.xp6(16),e.pQV(t.aclPermissions.Owner||"-"),e.QtT(21),e.xp6(4),e.pQV(t.aclPermissions.AllUsers||"-"),e.QtT(25),e.xp6(4),e.pQV(t.aclPermissions.AuthenticatedUsers||"-"),e.QtT(29)}}function si(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"nav",1,2),e.ynx(3,3),e.TgZ(4,"a",4),e.SDv(5,5),e.qZA(),e.YNc(6,ri,58,19,"ng-template",6),e.BQk(),e.ynx(7,7),e.TgZ(8,"a",4),e.SDv(9,8),e.qZA(),e.YNc(10,_i,32,6,"ng-template",6),e.BQk(),e.qZA(),e._UZ(11,"div",9),e.BQk()),2&n){const t=e.MAs(2);e.xp6(11),e.Q6J("ngbNavOutlet",t)}}let ai=(()=>{class n{constructor(t){this.rgwBucketService=t,this.aclPermissions={}}ngOnChanges(){this.selection&&this.rgwBucketService.get(this.selection.bid).subscribe(t=>{t.lock_retention_period_days=this.rgwBucketService.getLockDays(t),this.selection=t,this.aclPermissions=this.parseXmlAcl(this.selection.acl,this.selection.owner)})}parseXmlAcl(t,o){const c=new O.Parser({explicitArray:!1,trim:!0});let F={Owner:["-"],AllUsers:["-"],AuthenticatedUsers:["-"]};return c.parseString(t,(z,Q)=>{if(z)return null;const J=Q.AccessControlPolicy.AccessControlList.Grant;if(Array.isArray(J))for(let j=0;j<J.length;j++){const oe=J[j];if(oe?.Grantee?.URI){const Te=oe.Grantee.URI.split("/").pop();F[Te].includes("-")?F[Te]=[oe?.Permission]:F[Te].push(oe?.Permission)}oe?.Grantee?.ID&&o===oe?.Grantee?.ID&&(F.Owner=oe?.Permission)}else J?.Grantee?.ID&&o===J?.Grantee?.ID&&(F.Owner=J?.Permission)}),F}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(D.o))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-bucket-details"]],inputs:{selection:"selection"},features:[e.TTD],decls:1,vars:1,consts:function(){let i,t,o,c,F,z,Q,J,j,oe,Te,Se,Oe,be,me,Ge,ye,Le,Ee,Ue,$e,xe,De,ve,ae,Re;return i="\u8A73\u7D30",t="Policies",o="Versioning",c="Encryption",F="MFA Delete",z="\u30A4\u30F3\u30C7\u30C3\u30AF\u30B9\u30BF\u30A4\u30D7",Q="\u914D\u7F6E\u30EB\u30FC\u30EB",J="Last modification time",j="\u30D0\u30B1\u30C3\u30C8\u30AF\u30A9\u30FC\u30BF",oe="Enabled",Te="Locking",Se="Enabled",Oe="\u6700\u5927\u30B5\u30A4\u30BA",be="\u6700\u5927\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u6570",me="Unlimited",Ge="Unlimited",ye="Mode",Le="Days",Ee="\u30BF\u30B0",Ue="" + "\ufffd0\ufffd" + "",$e="Bucket policy",xe="ACL",De="" + "[\ufffd#17\ufffd|\ufffd#18\ufffd]" + "Grantee" + "[\ufffd/#17\ufffd|\ufffd/#18\ufffd]" + "" + "[\ufffd#17\ufffd|\ufffd#18\ufffd]" + "Permissions" + "[\ufffd/#17\ufffd|\ufffd/#18\ufffd]" + "",De=e.Zx4(De),ve="" + "[\ufffd#22\ufffd|\ufffd#23\ufffd]" + "Bucket Owner" + "[\ufffd/#22\ufffd|\ufffd/#23\ufffd]" + "" + "[\ufffd#22\ufffd|\ufffd#23\ufffd]" + "" + "\ufffd0\ufffd" + "" + "[\ufffd/#22\ufffd|\ufffd/#23\ufffd]" + "",ve=e.Zx4(ve),ae="" + "[\ufffd#26\ufffd|\ufffd#27\ufffd]" + "Everyone" + "[\ufffd/#26\ufffd|\ufffd/#27\ufffd]" + "" + "[\ufffd#26\ufffd|\ufffd#27\ufffd]" + "" + "\ufffd0\ufffd" + "" + "[\ufffd/#26\ufffd|\ufffd/#27\ufffd]" + "",ae=e.Zx4(ae),Re="" + "[\ufffd#30\ufffd|\ufffd#31\ufffd]" + "Authenticated users group" + "[\ufffd/#30\ufffd|\ufffd/#31\ufffd]" + "" + "[\ufffd#30\ufffd|\ufffd#31\ufffd]" + "" + "\ufffd0\ufffd" + "" + "[\ufffd/#30\ufffd|\ufffd/#31\ufffd]" + "",Re=e.Zx4(Re),[[4,"ngIf"],["ngbNav","","cdStatefulTab","rgw-bucket-details",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem","details"],["ngbNavLink",""],i,["ngbNavContent",""],["ngbNavItem","permissions"],t,[3,"ngbNavOutlet"],[1,"table","table-striped","table-bordered"],[1,"bold","w-25"],o,[1,"w-75"],[1,"bold"],c,F,z,Q,J,j,oe,Te,Se,Oe,be,me,Ge,ye,Le,Ee,[4,"ngFor","ngForOf"],Ue,$e,xe,[1,"table"],De,ve,ae,Re]},template:function(t,o){1&t&&e.YNc(0,si,12,1,"ng-container",0),2&t&&e.Q6J("ngIf",o.selection)},dependencies:[g.sg,g.O5,gn.m,v.uN,v.Pz,v.nv,v.Vx,v.tO,v.Dy,g.Ts,g.Nd,Tn.T,fn.n,Yo.N],styles:["table[_ngcontent-%COMP%]{table-layout:fixed}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{word-wrap:break-word}"]}),n})();const li=["bucketSizeTpl"],ci=["bucketObjectTpl"];function ui(n,i){if(1&n&&e._UZ(0,"cd-usage-bar",8),2&n){const t=e.oxw().row;e.Q6J("total",t.bucket_quota.max_size)("used",t.bucket_size)}}function di(n,i){1&n&&e.SDv(0,9)}function fi(n,i){if(1&n&&(e.YNc(0,ui,1,2,"cd-usage-bar",6),e.YNc(1,di,1,0,"ng-template",null,7,e.W1O)),2&n){const t=i.row,o=e.MAs(2);e.Q6J("ngIf",t.bucket_quota.max_size>0&&t.bucket_quota.enabled)("ngIfElse",o)}}function pi(n,i){if(1&n&&e._UZ(0,"cd-usage-bar",12),2&n){const t=e.oxw().row;e.Q6J("total",t.bucket_quota.max_objects)("used",t.num_objects)("isBinary",!1)}}function gi(n,i){1&n&&e.SDv(0,13)}function Ti(n,i){if(1&n&&(e.YNc(0,pi,1,3,"cd-usage-bar",10),e.YNc(1,gi,1,0,"ng-template",null,11,e.W1O)),2&n){const t=i.row,o=e.MAs(2);e.Q6J("ngIf",t.bucket_quota.max_objects>0&&t.bucket_quota.enabled)("ngIfElse",o)}}let Ri=(()=>{class n extends en.o{constructor(t,o,c,F,z,Q,J,j){super(j),this.authStorageService=t,this.dimlessBinaryPipe=o,this.dimlessPipe=c,this.rgwBucketService=F,this.modalService=z,this.urlBuilder=Q,this.actionLabels=J,this.ngZone=j,this.columns=[],this.buckets=[],this.selection=new Vt.r}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:"Name",prop:"bid",flexGrow:2},{name:"Owner",prop:"owner",flexGrow:2.5},{name:"Used Capacity",prop:"bucket_size",flexGrow:.6,pipe:this.dimlessBinaryPipe},{name:"Capacity Limit %",prop:"size_usage",cellTemplate:this.bucketSizeTpl,flexGrow:.8},{name:"Objects",prop:"num_objects",flexGrow:.6,pipe:this.dimlessPipe},{name:"Object Limit %",prop:"object_usage",cellTemplate:this.bucketObjectTpl,flexGrow:.8}];const t=()=>this.selection.first()&&`${encodeURIComponent(this.selection.first().bid)}`;this.tableActions=[{permission:"create",icon:B.P.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE,canBePrimary:z=>!z.hasSelection},{permission:"update",icon:B.P.edit,routerLink:()=>this.urlBuilder.getEdit(t()),name:this.actionLabels.EDIT},{permission:"delete",icon:B.P.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:z=>z.hasMultiSelection}],this.setTableRefreshTimeout()}transformBucketData(){w().forEach(this.buckets,t=>{const o=t.bucket_quota.max_size,c=t.bucket_quota.max_objects;t.bucket_size=0,t.num_objects=0,w().isEmpty(t.usage)||(t.bucket_size=t.usage["rgw.main"].size_actual,t.num_objects=t.usage["rgw.main"].num_objects),t.size_usage=o>0?t.bucket_size/o:void 0,t.object_usage=c>0?t.num_objects/c:void 0})}getBucketList(t){this.setTableRefreshTimeout(),this.rgwBucketService.list(!0).subscribe(o=>{this.buckets=o,this.transformBucketData()},()=>{t.error()})}updateSelection(t){this.selection=t}deleteAction(){this.modalService.show(tn.M,{itemDescription:this.selection.hasSingleSelection?"bucket":"buckets",itemNames:this.selection.selected.map(t=>t.bid),submitActionObservable:()=>new dn.y(t=>{(0,x.D)(this.selection.selected.map(o=>this.rgwBucketService.delete(o.bid))).subscribe({error:o=>{t.error(o),this.table.refreshBtn()},complete:()=>{t.complete(),this.table.refreshBtn()}})})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(nt.j),e.Y36(nn.$),e.Y36(fn.n),e.Y36(D.o),e.Y36(Qe.Z),e.Y36(tt.F),e.Y36(T.p4),e.Y36(e.R0b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-bucket-list"]],viewQuery:function(t,o){if(1&t&&(e.Gf(et.a,7),e.Gf(li,7),e.Gf(ci,7)),2&t){let c;e.iGM(c=e.CRH())&&(o.table=c.first),e.iGM(c=e.CRH())&&(o.bucketSizeTpl=c.first),e.iGM(c=e.CRH())&&(o.bucketObjectTpl=c.first)}},features:[e._Bn([{provide:tt.F,useValue:new tt.F("rgw/bucket")}]),e.qOj],decls:8,vars:9,consts:function(){let i,t;return i="No Limit",t="No Limit",[["columnMode","flex","selectionType","multiClick","identifier","bid",3,"autoReload","data","columns","hasDetails","status","setExpandedRow","updateSelection","fetchData"],["table",""],[1,"table-actions",3,"permission","selection","tableActions"],["cdTableDetail","",3,"selection"],["bucketSizeTpl",""],["bucketObjectTpl",""],[3,"total","used",4,"ngIf","ngIfElse"],["noSizeQuota",""],[3,"total","used"],i,[3,"total","used","isBinary",4,"ngIf","ngIfElse"],["noObjectQuota",""],[3,"total","used","isBinary"],t]},template:function(t,o){1&t&&(e.TgZ(0,"cd-table",0,1),e.NdJ("setExpandedRow",function(F){return o.setExpandedRow(F)})("updateSelection",function(F){return o.updateSelection(F)})("fetchData",function(F){return o.getBucketList(F)}),e._UZ(2,"cd-table-actions",2)(3,"cd-rgw-bucket-details",3),e.qZA(),e.YNc(4,fi,3,2,"ng-template",null,4,e.W1O),e.YNc(6,Ti,3,2,"ng-template",null,5,e.W1O)),2&t&&(e.Q6J("autoReload",!1)("data",o.buckets)("columns",o.columns)("hasDetails",!0)("status",o.tableStatus),e.xp6(2),e.Q6J("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions),e.xp6(1),e.Q6J("selection",o.expandedRow))},dependencies:[g.O5,pn.O,et.a,on.K,ai]}),n})();var mi=p(58111),En=p(76317),Rn=p(61350),hi=p(60351);function Mi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"cd-table-key-value",11),e.NdJ("fetchData",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.getMetaData())}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("data",t.metadata)}}function Si(n,i){if(1&n&&e._UZ(0,"cd-table-performance-counter",12),2&n){const t=e.oxw(2);e.Q6J("serviceId",t.serviceMapId)}}function Ci(n,i){if(1&n&&e._UZ(0,"cd-grafana",15),2&n){const t=e.oxw(3);e.Q6J("grafanaPath","rgw-instance-detail?var-rgw_servers=rgw."+t.serviceId)("type","metrics")}}function Fi(n,i){1&n&&(e.ynx(0,13),e.TgZ(1,"a",4),e.SDv(2,14),e.qZA(),e.YNc(3,Ci,1,2,"ng-template",6),e.BQk())}function Oi(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"nav",1,2),e.ynx(3,3),e.TgZ(4,"a",4),e.SDv(5,5),e.qZA(),e.YNc(6,Mi,1,1,"ng-template",6),e.BQk(),e.ynx(7,7),e.TgZ(8,"a",4),e.SDv(9,8),e.qZA(),e.YNc(10,Si,1,1,"ng-template",6),e.BQk(),e.YNc(11,Fi,4,0,"ng-container",9),e.qZA(),e._UZ(12,"div",10),e.BQk()),2&n){const t=e.MAs(2),o=e.oxw();e.xp6(11),e.Q6J("ngIf",o.grafanaPermission.read),e.xp6(1),e.Q6J("ngbNavOutlet",t)}}let Ni=(()=>{class n{constructor(t,o){this.rgwDaemonService=t,this.authStorageService=o,this.serviceId="",this.serviceMapId="",this.grafanaPermission=this.authStorageService.getPermissions().grafana}ngOnChanges(){this.selection&&(this.serviceId=this.selection.id,this.serviceMapId=this.selection.service_map_id)}getMetaData(){w().isEmpty(this.serviceId)||this.rgwDaemonService.get(this.serviceId).subscribe(t=>{this.metadata=t.rgw_metadata})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.b),e.Y36(nt.j))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-daemon-details"]],inputs:{selection:"selection"},features:[e.TTD],decls:1,vars:1,consts:function(){let i,t,o,c;return i="\u8A73\u7D30",t="\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9\u30AB\u30A6\u30F3\u30BF",o="\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9\u306E\u8A73\u7D30",c="RGW instance details",[[4,"ngIf"],["ngbNav","","cdStatefulTab","rgw-daemon-details",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem","details"],["ngbNavLink",""],i,["ngbNavContent",""],["ngbNavItem","performance-counters"],t,["ngbNavItem","performance-details",4,"ngIf"],[3,"ngbNavOutlet"],[3,"data","fetchData"],["serviceType","rgw",3,"serviceId"],["ngbNavItem","performance-details"],o,["title",c,"uid","x5ARzZtmk","grafanaStyle","one",3,"grafanaPath","type"]]},template:function(t,o){1&t&&e.YNc(0,Oi,13,2,"ng-container",0),2&t&&e.Q6J("ngIf",o.selection)},dependencies:[g.O5,En.F,Rn.b,gn.m,hi.p,v.uN,v.Pz,v.nv,v.Vx,v.tO,v.Dy]}),n})();function Ai(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"cd-table",8),e.NdJ("setExpandedRow",function(c){e.CHM(t);const F=e.oxw();return e.KtG(F.setExpandedRow(c))})("fetchData",function(c){e.CHM(t);const F=e.oxw();return e.KtG(F.getDaemonList(c))}),e._UZ(1,"cd-rgw-daemon-details",9),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("data",t.daemons)("columns",t.columns)("hasDetails",!0),e.xp6(1),e.Q6J("selection",t.expandedRow)}}function Pi(n,i){1&n&&e._UZ(0,"cd-grafana",11),2&n&&e.Q6J("grafanaPath","rgw-overview?")("type","metrics")}function bi(n,i){1&n&&(e.ynx(0,2),e.TgZ(1,"a",3),e.SDv(2,10),e.qZA(),e.YNc(3,Pi,1,2,"ng-template",5),e.BQk())}function Ii(n,i){1&n&&e._UZ(0,"cd-grafana",13),2&n&&e.Q6J("grafanaPath","radosgw-sync-overview?")("type","metrics")}function Gi(n,i){1&n&&(e.ynx(0,2),e.TgZ(1,"a",3),e.SDv(2,12),e.qZA(),e.YNc(3,Ii,1,2,"ng-template",5),e.BQk())}let yi=(()=>{class n extends en.o{constructor(t,o,c,F){super(),this.rgwDaemonService=t,this.authStorageService=o,this.cephShortVersionPipe=c,this.rgwSiteService=F,this.columns=[],this.daemons=[],this.updateDaemons=z=>{this.daemons=z}}ngOnInit(){this.grafanaPermission=this.authStorageService.getPermissions().grafana,this.columns=[{name:"ID",prop:"id",flexGrow:2},{name:"Hostname",prop:"server_hostname",flexGrow:2},{name:"Port",prop:"port",flexGrow:1},{name:"Realm",prop:"realm_name",flexGrow:2},{name:"Zone Group",prop:"zonegroup_name",flexGrow:2},{name:"Zone",prop:"zone_name",flexGrow:2},{name:"Version",prop:"version",flexGrow:1,pipe:this.cephShortVersionPipe}],this.rgwSiteService.get("realms").subscribe(t=>this.isMultiSite=t.length>0)}getDaemonList(t){this.rgwDaemonService.list().subscribe(this.updateDaemons,()=>{t.error()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.b),e.Y36(nt.j),e.Y36(mi.F),e.Y36(b.I))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-daemon-list"]],features:[e.qOj],decls:9,vars:3,consts:function(){let i,t,o,c,F;return i="Gateways List",t="\u5168\u4F53\u7684\u306A\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9",o="RGW overview",c="Sync Performance",F="Radosgw sync overview",[["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],i,["ngbNavContent",""],["ngbNavItem","",4,"ngIf"],[3,"ngbNavOutlet"],["columnMode","flex",3,"data","columns","hasDetails","setExpandedRow","fetchData"],["cdTableDetail","",3,"selection"],t,["title",o,"uid","WAkugZpiz","grafanaStyle","two",3,"grafanaPath","type"],c,["title",F,"uid","rgw-sync-overview","grafanaStyle","two",3,"grafanaPath","type"]]},template:function(t,o){if(1&t&&(e.TgZ(0,"nav",0,1),e.ynx(2,2),e.TgZ(3,"a",3),e.SDv(4,4),e.qZA(),e.YNc(5,Ai,2,4,"ng-template",5),e.BQk(),e.YNc(6,bi,4,0,"ng-container",6),e.YNc(7,Gi,4,0,"ng-container",6),e.qZA(),e._UZ(8,"div",7)),2&t){const c=e.MAs(1);e.xp6(6),e.Q6J("ngIf",o.grafanaPermission.read),e.xp6(1),e.Q6J("ngIf",o.grafanaPermission.read&&o.isMultiSite),e.xp6(1),e.Q6J("ngbNavOutlet",c)}},dependencies:[g.O5,En.F,et.a,v.uN,v.Pz,v.nv,v.Vx,v.tO,v.Dy,Ni]}),n})();var Li=p(6481),rn=p(28211),jt=(()=>{return(n=jt||(jt={})).USERS="users",n.BUCKETS="buckets",n.METADATA="metadata",n.USAGE="usage",n.ZONE="zone",jt;var n})();let mn=(()=>{class n{static getAll(){return Object.values(n.capabilities)}}return n.capabilities=jt,n})();function Di(n,i){1&n&&e._UZ(0,"input",22),2&n&&e.Q6J("readonly",!0)}function vi(n,i){1&n&&(e.TgZ(0,"option",17),e.SDv(1,25),e.qZA()),2&n&&e.Q6J("ngValue",null)}function wi(n,i){if(1&n&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Wi(n,i){if(1&n&&(e.TgZ(0,"select",23),e.YNc(1,vi,2,1,"option",24),e.YNc(2,wi,2,2,"option",19),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null!==t.types),e.xp6(1),e.Q6J("ngForOf",t.types)}}function Ui(n,i){1&n&&(e.TgZ(0,"span",27),e.SDv(1,28),e.qZA())}function $i(n,i){if(1&n&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function xi(n,i){1&n&&(e.TgZ(0,"span",27),e.SDv(1,29),e.qZA())}const Zi=function(n){return{required:n}},ki=function(){return["read","write","*"]};let Bi=(()=>{class n{constructor(t,o,c){this.formBuilder=t,this.activeModal=o,this.actionLabels=c,this.submitAction=new e.vpe,this.editing=!0,this.types=[],this.resource="capability",this.createForm()}createForm(){this.formGroup=this.formBuilder.group({type:[null,[_.kI.required]],perm:[null,[_.kI.required]]})}setEditing(t=!0){this.editing=t,this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.ADD}setValues(t,o){this.formGroup.setValue({type:t,perm:o})}setCapabilities(t){const o=[];t.forEach(c=>{o.push(c.type)}),this.types=[],mn.getAll().forEach(c=>{-1===w().indexOf(o,c)&&this.types.push(c)})}onSubmit(){this.submitAction.emit(this.formGroup.value),this.activeModal.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ze.O),e.Y36(v.Kz),e.Y36(T.p4))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-user-capability-modal"]],outputs:{submitAction:"submitAction"},decls:29,vars:24,consts:function(){let i,t,o,c,F,z,Q;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="Type",o="\u8A31\u53EF",c="-- \u8A31\u53EF\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044 --",F="-- \u30BF\u30A4\u30D7\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044 --",z="This field is required.",Q="This field is required.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["novalidate","",3,"formGroup"],["frm","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","type",1,"cd-col-form-label",3,"ngClass"],t,[1,"cd-col-form-input"],["id","type","class","form-control","type","text","formControlName","type",3,"readonly",4,"ngIf"],["id","type","class","form-select","formControlName","type","autofocus","",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["for","perm",1,"cd-col-form-label","required"],o,["id","perm","formControlName","perm",1,"form-select"],[3,"ngValue"],c,[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],["id","type","type","text","formControlName","type",1,"form-control",3,"readonly"],["id","type","formControlName","type","autofocus","",1,"form-select"],[3,"ngValue",4,"ngIf"],F,[3,"value"],[1,"invalid-feedback"],z,Q]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.ALo(3,"titlecase"),e.ALo(4,"upperFirst"),e.BQk(),e.ynx(5,3),e.TgZ(6,"form",4,5)(8,"div",6)(9,"div",7)(10,"label",8),e.SDv(11,9),e.qZA(),e.TgZ(12,"div",10),e.YNc(13,Di,1,1,"input",11),e.YNc(14,Wi,3,2,"select",12),e.YNc(15,Ui,2,0,"span",13),e.qZA()(),e.TgZ(16,"div",7)(17,"label",14),e.SDv(18,15),e.qZA(),e.TgZ(19,"div",10)(20,"select",16)(21,"option",17),e.SDv(22,18),e.qZA(),e.YNc(23,$i,2,2,"option",19),e.qZA(),e.YNc(24,xi,2,0,"span",13),e.qZA()()(),e.TgZ(25,"div",20)(26,"cd-form-button-panel",21),e.NdJ("submitActionEvent",function(){return o.onSubmit()}),e.ALo(27,"titlecase"),e.ALo(28,"upperFirst"),e.qZA()()(),e.BQk(),e.qZA()),2&t){const c=e.MAs(7);e.Q6J("modalRef",o.activeModal),e.xp6(4),e.pQV(e.lcZ(3,13,o.action))(e.lcZ(4,15,o.resource)),e.QtT(2),e.xp6(2),e.Q6J("formGroup",o.formGroup),e.xp6(4),e.Q6J("ngClass",e.VKq(21,Zi,!o.editing)),e.xp6(3),e.Q6J("ngIf",o.editing),e.xp6(1),e.Q6J("ngIf",!o.editing),e.xp6(1),e.Q6J("ngIf",o.formGroup.showError("type",c,"required")),e.xp6(6),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",e.DdM(23,ki)),e.xp6(1),e.Q6J("ngIf",o.formGroup.showError("perm",c,"required")),e.xp6(2),e.Q6J("form",o.formGroup)("submitText",e.lcZ(27,17,o.action)+" "+e.lcZ(28,19,o.resource))}},dependencies:[g.mk,g.sg,g.O5,he.z,we.p,st.U,Ae.o,Pe.b,We.P,C.V,_._Y,_.YN,_.Kr,_.Fj,_.EJ,_.JJ,_.JL,_.sg,_.u,g.rS,Ye.m]}),n})();var at=p(58039),lt=p(4416);function zi(n,i){1&n&&e._UZ(0,"input",17),2&n&&e.Q6J("readonly",!0)}function qi(n,i){1&n&&(e.TgZ(0,"option",21),e.SDv(1,22),e.qZA()),2&n&&e.Q6J("ngValue",null)}function Hi(n,i){if(1&n&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Xi(n,i){if(1&n&&(e.TgZ(0,"select",18),e.YNc(1,qi,2,1,"option",19),e.YNc(2,Hi,2,2,"option",20),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null!==t.userCandidates),e.xp6(1),e.Q6J("ngForOf",t.userCandidates)}}function Ki(n,i){1&n&&(e.TgZ(0,"span",24),e.SDv(1,25),e.qZA())}function Qi(n,i){1&n&&(e.TgZ(0,"div",7)(1,"div",26)(2,"div",27),e._UZ(3,"input",28),e.TgZ(4,"label",29),e.SDv(5,30),e.qZA()()()())}function Yi(n,i){1&n&&(e.TgZ(0,"span",24),e.SDv(1,37),e.qZA())}const _n=function(n){return{required:n}};function Ji(n,i){if(1&n&&(e.TgZ(0,"div",7)(1,"label",31),e.SDv(2,32),e.qZA(),e.TgZ(3,"div",10)(4,"div",33),e._UZ(5,"input",34)(6,"button",35)(7,"cd-copy-2-clipboard-button",36),e.qZA(),e.YNc(8,Yi,2,0,"span",13),e.qZA()()),2&n){const t=e.oxw(),o=e.MAs(7);e.xp6(1),e.Q6J("ngClass",e.VKq(3,_n,!t.viewing)),e.xp6(4),e.Q6J("readonly",t.viewing),e.xp6(3),e.Q6J("ngIf",t.formGroup.showError("access_key",o,"required"))}}function Vi(n,i){1&n&&(e.TgZ(0,"span",24),e.SDv(1,43),e.qZA())}function ji(n,i){if(1&n&&(e.TgZ(0,"div",7)(1,"label",38),e.SDv(2,39),e.qZA(),e.TgZ(3,"div",10)(4,"div",33),e._UZ(5,"input",40)(6,"button",41)(7,"cd-copy-2-clipboard-button",42),e.qZA(),e.YNc(8,Vi,2,0,"span",13),e.qZA()()),2&n){const t=e.oxw(),o=e.MAs(7);e.xp6(1),e.Q6J("ngClass",e.VKq(3,_n,!t.viewing)),e.xp6(4),e.Q6J("readonly",t.viewing),e.xp6(3),e.Q6J("ngIf",t.formGroup.showError("secret_key",o,"required"))}}let hn=(()=>{class n{constructor(t,o,c){this.formBuilder=t,this.activeModal=o,this.actionLabels=c,this.submitAction=new e.vpe,this.viewing=!0,this.userCandidates=[],this.resource="S3 Key",this.createForm()}createForm(){this.formGroup=this.formBuilder.group({user:[null,[_.kI.required]],generate_key:[!0],access_key:[null,[X.h.requiredIf({generate_key:!1})]],secret_key:[null,[X.h.requiredIf({generate_key:!1})]]})}setViewing(t=!0){this.viewing=t,this.action=this.viewing?this.actionLabels.SHOW:this.actionLabels.CREATE}setValues(t,o,c){this.formGroup.setValue({user:t,generate_key:w().isEmpty(o),access_key:o,secret_key:c})}setUserCandidates(t){this.userCandidates=t}onSubmit(){this.submitAction.emit(this.formGroup.value),this.activeModal.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ze.O),e.Y36(v.Kz),e.Y36(T.p4))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-user-s3-key-modal"]],outputs:{submitAction:"submitAction"},decls:23,vars:24,consts:function(){let i,t,o,c,F,z,Q,J,j;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="Username",o="-- \u30E6\u30FC\u30B6\u540D\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044 --",c="This field is required.",F="\u30AD\u30FC\u306E\u81EA\u52D5\u751F\u6210",z="\u30A2\u30AF\u30BB\u30B9\u30AD\u30FC",Q="This field is required.",J="\u79D8\u5BC6\u30AD\u30FC",j="This field is required.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["novalidate","",3,"formGroup"],["frm","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","user",1,"cd-col-form-label",3,"ngClass"],t,[1,"cd-col-form-input"],["id","user","class","form-control","type","text","formControlName","user",3,"readonly",4,"ngIf"],["id","user","class","form-control","formControlName","user","autofocus","",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"form","submitText","showSubmit","submitActionEvent"],["id","user","type","text","formControlName","user",1,"form-control",3,"readonly"],["id","user","formControlName","user","autofocus","",1,"form-control"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"ngValue"],o,[3,"value"],[1,"invalid-feedback"],c,[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","generate_key","type","checkbox","formControlName","generate_key",1,"custom-control-input"],["for","generate_key",1,"custom-control-label"],F,["for","access_key",1,"cd-col-form-label",3,"ngClass"],z,[1,"input-group"],["id","access_key","type","password","formControlName","access_key",1,"form-control",3,"readonly"],["type","button","cdPasswordButton","access_key",1,"btn","btn-light"],["source","access_key"],Q,["for","secret_key",1,"cd-col-form-label",3,"ngClass"],J,["id","secret_key","type","password","formControlName","secret_key",1,"form-control",3,"readonly"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["source","secret_key"],j]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.ALo(3,"titlecase"),e.ALo(4,"upperFirst"),e.BQk(),e.ynx(5,3),e.TgZ(6,"form",4,5)(8,"div",6)(9,"div",7)(10,"label",8),e.SDv(11,9),e.qZA(),e.TgZ(12,"div",10),e.YNc(13,zi,1,1,"input",11),e.YNc(14,Xi,3,2,"select",12),e.YNc(15,Ki,2,0,"span",13),e.qZA()(),e.YNc(16,Qi,6,0,"div",14),e.YNc(17,Ji,9,5,"div",14),e.YNc(18,ji,9,5,"div",14),e.qZA(),e.TgZ(19,"div",15)(20,"cd-form-button-panel",16),e.NdJ("submitActionEvent",function(){return o.onSubmit()}),e.ALo(21,"titlecase"),e.ALo(22,"upperFirst"),e.qZA()()(),e.BQk(),e.qZA()),2&t){const c=e.MAs(7);e.Q6J("modalRef",o.activeModal),e.xp6(4),e.pQV(e.lcZ(3,14,o.action))(e.lcZ(4,16,o.resource)),e.QtT(2),e.xp6(2),e.Q6J("formGroup",o.formGroup),e.xp6(4),e.Q6J("ngClass",e.VKq(22,_n,!o.viewing)),e.xp6(3),e.Q6J("ngIf",o.viewing),e.xp6(1),e.Q6J("ngIf",!o.viewing),e.xp6(1),e.Q6J("ngIf",o.formGroup.showError("user",c,"required")),e.xp6(1),e.Q6J("ngIf",!o.viewing),e.xp6(1),e.Q6J("ngIf",!o.formGroup.getValue("generate_key")),e.xp6(1),e.Q6J("ngIf",!o.formGroup.getValue("generate_key")),e.xp6(2),e.Q6J("form",o.formGroup)("submitText",e.lcZ(21,18,o.action)+" "+e.lcZ(22,20,o.resource))("showSubmit",!o.viewing)}},dependencies:[g.mk,g.sg,g.O5,he.z,at.s,we.p,st.U,lt.C,Ae.o,Pe.b,We.P,C.V,_._Y,_.YN,_.Kr,_.Fj,_.Wl,_.EJ,_.JJ,_.JL,_.sg,_.u,g.rS,Ye.m]}),n})();class er{}function tr(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,30),e.qZA())}function nr(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,31),e.qZA())}function or(n,i){if(1&n&&(e.TgZ(0,"option",32),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ir(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,33),e.qZA())}function rr(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,47),e.qZA())}function _r(n,i){if(1&n&&(e.TgZ(0,"div",7)(1,"label",41),e.SDv(2,42),e.qZA(),e.TgZ(3,"div",10)(4,"div",43),e._UZ(5,"input",44)(6,"button",45)(7,"cd-copy-2-clipboard-button",46),e.qZA(),e.YNc(8,rr,2,0,"span",15),e.qZA()()),2&n){const t=e.oxw(2),o=e.MAs(7);e.xp6(8),e.Q6J("ngIf",t.formGroup.showError("secret_key",o,"required"))}}function sr(n,i){if(1&n&&(e.TgZ(0,"fieldset")(1,"legend"),e.SDv(2,34),e.qZA(),e.TgZ(3,"div",7)(4,"div",35)(5,"div",36),e._UZ(6,"input",37),e.TgZ(7,"label",38),e.SDv(8,39),e.qZA()()()(),e.YNc(9,_r,9,1,"div",40),e.qZA()),2&n){const t=e.oxw();e.xp6(9),e.Q6J("ngIf",!t.editing&&!t.formGroup.getValue("generate_secret"))}}const ar=function(n){return{required:n}},lr=function(){return["read","write"]};let cr=(()=>{class n{constructor(t,o,c){this.formBuilder=t,this.bsModalRef=o,this.actionLabels=c,this.submitAction=new e.vpe,this.editing=!0,this.subusers=[],this.resource="Subuser",this.createForm()}createForm(){this.formGroup=this.formBuilder.group({uid:[null],subuid:[null,[_.kI.required,this.subuserValidator()]],perm:[null,[_.kI.required]],generate_secret:[!0],secret_key:[null,[X.h.requiredIf({generate_secret:!1})]]})}subuserValidator(){const t=this;return o=>t.editing||(0,X.P)(o.value)?null:t.subusers.some(F=>w().isEqual(t.getSubuserName(F.id),o.value))?{subuserIdExists:!0}:null}getSubuserName(t){if(w().isEmpty(t))return t;const o=t.match(/([^:]+)(:(.+))?/);return w().isUndefined(o[3])?o[1]:o[3]}setEditing(t=!0){this.editing=t,this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE}setValues(t,o="",c=""){this.formGroup.setValue({uid:t,subuid:this.getSubuserName(o),perm:c,generate_secret:!0,secret_key:null})}setSubusers(t){this.subusers=t}onSubmit(){const t=this.formGroup.value,o=new er;o.id=`${t.uid}:${t.subuid}`,o.permissions=t.perm,o.generate_secret=t.generate_secret,o.secret_key=t.secret_key,this.submitAction.emit(o),this.bsModalRef.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ze.O),e.Y36(v.Kz),e.Y36(T.p4))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-user-subuser-modal"]],outputs:{submitAction:"submitAction"},decls:39,vars:26,consts:function(){let i,t,o,c,F,z,Q,J,j,oe,Te,Se,Oe,be;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="Username",o="Subuser",c="\u8A31\u53EF",F="-- \u8A31\u53EF\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044 --",z="\u8AAD\u307F\u53D6\u308A\u3001\u66F8\u304D\u8FBC\u307F",Q="\u30D5\u30EB",J="This field is required.",j="\u9078\u629E\u3055\u308C\u305F\u30B5\u30D6\u30E6\u30FC\u30B6ID\u306F\u3059\u3067\u306B\u4F7F\u7528\u3055\u308C\u3066\u3044\u307E\u3059\u3002",oe="This field is required.",Te="\u30B9\u30A6\u30A3\u30D5\u30C8\u30AD\u30FC",Se="\u79D8\u5BC6\u306E\u81EA\u52D5\u751F\u6210",Oe="\u79D8\u5BC6\u30AD\u30FC",be="This field is required.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["novalidate","",3,"formGroup"],["frm","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","uid",1,"cd-col-form-label"],t,[1,"cd-col-form-input"],["id","uid","type","text","formControlName","uid",1,"form-control",3,"readonly"],["for","subuid",1,"cd-col-form-label",3,"ngClass"],o,["id","subuid","type","text","formControlName","subuid","autofocus","",1,"form-control",3,"readonly"],["class","invalid-feedback",4,"ngIf"],["for","perm",1,"cd-col-form-label","required"],c,["id","perm","formControlName","perm",1,"form-select"],[3,"ngValue"],F,[3,"value",4,"ngFor","ngForOf"],["value","read-write"],z,["value","full-control"],Q,[4,"ngIf"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],[1,"invalid-feedback"],J,j,[3,"value"],oe,Te,[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","generate_secret","type","checkbox","formControlName","generate_secret",1,"custom-control-input"],["for","generate_secret",1,"custom-control-label"],Se,["class","form-group row",4,"ngIf"],["for","secret_key",1,"cd-col-form-label","required"],Oe,[1,"input-group"],["id","secret_key","type","password","formControlName","secret_key",1,"form-control"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["source","secret_key"],be]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.ALo(3,"titlecase"),e.ALo(4,"upperFirst"),e.BQk(),e.ynx(5,3),e.TgZ(6,"form",4,5)(8,"div",6)(9,"div",7)(10,"label",8),e.SDv(11,9),e.qZA(),e.TgZ(12,"div",10),e._UZ(13,"input",11),e.qZA()(),e.TgZ(14,"div",7)(15,"label",12),e.SDv(16,13),e.qZA(),e.TgZ(17,"div",10),e._UZ(18,"input",14),e.YNc(19,tr,2,0,"span",15),e.YNc(20,nr,2,0,"span",15),e.qZA()(),e.TgZ(21,"div",7)(22,"label",16),e.SDv(23,17),e.qZA(),e.TgZ(24,"div",10)(25,"select",18)(26,"option",19),e.SDv(27,20),e.qZA(),e.YNc(28,or,2,2,"option",21),e.TgZ(29,"option",22),e.SDv(30,23),e.qZA(),e.TgZ(31,"option",24),e.SDv(32,25),e.qZA()(),e.YNc(33,ir,2,0,"span",15),e.qZA()(),e.YNc(34,sr,10,1,"fieldset",26),e.qZA(),e.TgZ(35,"div",27)(36,"cd-form-button-panel",28),e.NdJ("submitActionEvent",function(){return o.onSubmit()}),e.ALo(37,"titlecase"),e.ALo(38,"upperFirst"),e.qZA()()(),e.BQk(),e.qZA()),2&t){const c=e.MAs(7);e.Q6J("modalRef",o.bsModalRef),e.xp6(4),e.pQV(e.lcZ(3,15,o.action))(e.lcZ(4,17,o.resource)),e.QtT(2),e.xp6(2),e.Q6J("formGroup",o.formGroup),e.xp6(7),e.Q6J("readonly",!0),e.xp6(2),e.Q6J("ngClass",e.VKq(23,ar,!o.editing)),e.xp6(3),e.Q6J("readonly",o.editing),e.xp6(1),e.Q6J("ngIf",o.formGroup.showError("subuid",c,"required")),e.xp6(1),e.Q6J("ngIf",o.formGroup.showError("subuid",c,"subuserIdExists")),e.xp6(6),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",e.DdM(25,lr)),e.xp6(5),e.Q6J("ngIf",o.formGroup.showError("perm",c,"required")),e.xp6(1),e.Q6J("ngIf",!o.editing),e.xp6(2),e.Q6J("form",o.formGroup)("submitText",e.lcZ(37,19,o.action)+" "+e.lcZ(38,21,o.resource))}},dependencies:[g.mk,g.sg,g.O5,he.z,at.s,we.p,st.U,lt.C,Ae.o,Pe.b,We.P,C.V,_._Y,_.YN,_.Kr,_.Fj,_.Wl,_.EJ,_.JJ,_.JL,_.sg,_.u,g.rS,Ye.m]}),n})();var Mn=p(13472);let Sn=(()=>{class n{constructor(t,o){this.activeModal=t,this.actionLabels=o,this.resource="Swift Key",this.action=this.actionLabels.SHOW}setValues(t,o){this.user=t,this.secret_key=o}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.Kz),e.Y36(T.p4))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-user-swift-key-modal"]],decls:23,vars:11,consts:function(){let i,t,o;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="Username",o="\u79D8\u5BC6\u30AD\u30FC",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],[1,"modal-body"],["novalidate",""],[1,"form-group","row"],["for","user",1,"cd-col-form-label"],t,[1,"cd-col-form-input"],["id","user","name","user","type","text",1,"form-control",3,"readonly","ngModel","ngModelChange"],["for","secret_key",1,"cd-col-form-label"],o,[1,"input-group"],["id","secret_key","name","secret_key","type","password",1,"form-control",3,"ngModel","readonly","ngModelChange"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["source","secret_key"],[1,"modal-footer"],[3,"backAction"]]},template:function(t,o){1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.ALo(3,"titlecase"),e.ALo(4,"upperFirst"),e.BQk(),e.ynx(5,3),e.TgZ(6,"div",4)(7,"form",5)(8,"div",6)(9,"label",7),e.SDv(10,8),e.qZA(),e.TgZ(11,"div",9)(12,"input",10),e.NdJ("ngModelChange",function(F){return o.user=F}),e.qZA()()(),e.TgZ(13,"div",6)(14,"label",11),e.SDv(15,12),e.qZA(),e.TgZ(16,"div",9)(17,"div",13)(18,"input",14),e.NdJ("ngModelChange",function(F){return o.secret_key=F}),e.qZA(),e._UZ(19,"button",15)(20,"cd-copy-2-clipboard-button",16),e.qZA()()()()(),e.TgZ(21,"div",17)(22,"cd-back-button",18),e.NdJ("backAction",function(){return o.activeModal.close()}),e.qZA()(),e.BQk(),e.qZA()),2&t&&(e.Q6J("modalRef",o.activeModal),e.xp6(4),e.pQV(e.lcZ(3,7,o.action))(e.lcZ(4,9,o.resource)),e.QtT(2),e.xp6(8),e.Q6J("readonly",!0)("ngModel",o.user),e.xp6(6),e.Q6J("ngModel",o.secret_key)("readonly",!0))},dependencies:[Mn.W,he.z,at.s,lt.C,Ae.o,Pe.b,We.P,_._Y,_.Fj,_.JJ,_.JL,_.On,_.F,g.rS,Ye.m]}),n})();var ur=p(17932);function dr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,55),e.qZA())}function fr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,56),e.qZA())}function pr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,57),e.qZA())}function gr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,61),e.qZA())}function Tr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,62),e.qZA())}function Er(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"label",58),e.SDv(2,59),e.qZA(),e.TgZ(3,"div",11),e._UZ(4,"input",60),e.YNc(5,gr,2,0,"span",13),e.YNc(6,Tr,2,0,"span",13),e.qZA()()),2&n){e.oxw();const t=e.MAs(2),o=e.oxw();e.xp6(4),e.Q6J("readonly",o.editing),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("tenant",t,"pattern")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("tenant",t,"notUnique"))}}function Rr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,63),e.qZA())}function mr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,64),e.qZA())}function hr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,65),e.qZA())}function Mr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,66),e.qZA())}function Sr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,69),e.qZA())}function Cr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,70),e.qZA())}function Fr(n,i){if(1&n&&(e.TgZ(0,"div",8),e._UZ(1,"label",67),e.TgZ(2,"div",11),e._UZ(3,"input",68),e.YNc(4,Sr,2,0,"span",13),e.YNc(5,Cr,2,0,"span",13),e.qZA()()),2&n){e.oxw();const t=e.MAs(2),o=e.oxw();e.xp6(4),e.Q6J("ngIf",o.userForm.showError("max_buckets",t,"required")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("max_buckets",t,"min"))}}function Or(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,81),e.qZA())}function Nr(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"label",75),e.SDv(2,76),e.qZA(),e.TgZ(3,"div",11)(4,"div",77),e._UZ(5,"input",78)(6,"button",79)(7,"cd-copy-2-clipboard-button",80),e.qZA(),e.YNc(8,Or,2,0,"span",13),e.qZA()()),2&n){e.oxw(2);const t=e.MAs(2),o=e.oxw();e.xp6(8),e.Q6J("ngIf",o.userForm.showError("access_key",t,"required"))}}function Ar(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,87),e.qZA())}function Pr(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"label",82),e.SDv(2,83),e.qZA(),e.TgZ(3,"div",11)(4,"div",77),e._UZ(5,"input",84)(6,"button",85)(7,"cd-copy-2-clipboard-button",86),e.qZA(),e.YNc(8,Ar,2,0,"span",13),e.qZA()()),2&n){e.oxw(2);const t=e.MAs(2),o=e.oxw();e.xp6(8),e.Q6J("ngIf",o.userForm.showError("secret_key",t,"required"))}}function br(n,i){if(1&n&&(e.TgZ(0,"fieldset")(1,"legend"),e.SDv(2,71),e.qZA(),e.TgZ(3,"div",8)(4,"div",14)(5,"div",15),e._UZ(6,"input",72),e.TgZ(7,"label",73),e.SDv(8,74),e.qZA()()()(),e.YNc(9,Nr,9,1,"div",19),e.YNc(10,Pr,9,1,"div",19),e.qZA()),2&n){const t=e.oxw(2);e.xp6(9),e.Q6J("ngIf",!t.editing&&!t.userForm.getValue("generate_key")),e.xp6(1),e.Q6J("ngIf",!t.editing&&!t.userForm.getValue("generate_key"))}}function Ir(n,i){1&n&&(e.TgZ(0,"span",98)(1,"span",99),e.SDv(2,100),e.qZA()())}const Xe=function(n){return[n]};function Gr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"div",77)(2,"span",101),e._UZ(3,"i"),e.qZA(),e._UZ(4,"input",102),e.TgZ(5,"span",101),e._UZ(6,"i"),e.qZA(),e._UZ(7,"input",102),e.TgZ(8,"button",103),e.NdJ("click",function(){const F=e.CHM(t).index,z=e.oxw(3);return e.KtG(z.showSubuserModal(F))}),e._UZ(9,"i",95),e.qZA(),e.TgZ(10,"button",104),e.NdJ("click",function(){const F=e.CHM(t).index,z=e.oxw(3);return e.KtG(z.deleteSubuser(F))}),e._UZ(11,"i",95),e.qZA()(),e._UZ(12,"span",99),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw(3);e.xp6(3),e.Tol(o.icons.user),e.xp6(1),e.s9C("value",t.id),e.xp6(2),e.Tol(o.icons.share),e.xp6(1),e.s9C("value","full-control"===t.permissions?"full":t.permissions),e.xp6(2),e.Q6J("ngClass",e.VKq(10,Xe,o.icons.edit)),e.xp6(2),e.Q6J("ngClass",e.VKq(12,Xe,o.icons.destroy))}}function yr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"fieldset")(1,"legend"),e.SDv(2,88),e.qZA(),e.TgZ(3,"div",89)(4,"div",14),e.YNc(5,Ir,3,0,"span",90),e.YNc(6,Gr,13,14,"span",91),e.TgZ(7,"div",92)(8,"div",93)(9,"button",94),e.NdJ("click",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.showSubuserModal())}),e._UZ(10,"i",95),e.ynx(11),e.SDv(12,96),e.ALo(13,"titlecase"),e.ALo(14,"upperFirst"),e.BQk(),e.qZA()()(),e._UZ(15,"span",97),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(5),e.Q6J("ngIf",0===t.subusers.length),e.xp6(1),e.Q6J("ngForOf",t.subusers),e.xp6(4),e.Q6J("ngClass",e.VKq(9,Xe,t.icons.add)),e.xp6(4),e.pQV(e.lcZ(13,5,t.actionLabels.CREATE))(e.lcZ(14,7,t.subuserLabel)),e.QtT(12)}}function Lr(n,i){1&n&&(e.TgZ(0,"span",98)(1,"span",99),e.SDv(2,110),e.qZA()())}function Dr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"div",77)(2,"div",101),e._UZ(3,"i"),e.qZA(),e._UZ(4,"input",102),e.TgZ(5,"button",111),e.NdJ("click",function(){const F=e.CHM(t).index,z=e.oxw(3);return e.KtG(z.showS3KeyModal(F))}),e._UZ(6,"i",95),e.qZA(),e.TgZ(7,"button",112),e.NdJ("click",function(){const F=e.CHM(t).index,z=e.oxw(3);return e.KtG(z.deleteS3Key(F))}),e._UZ(8,"i",95),e.qZA()(),e._UZ(9,"span",99),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw(3);e.xp6(3),e.Tol(o.icons.key),e.xp6(1),e.s9C("value",t.user),e.xp6(2),e.Q6J("ngClass",e.VKq(6,Xe,o.icons.show)),e.xp6(2),e.Q6J("ngClass",e.VKq(8,Xe,o.icons.destroy))}}function vr(n,i){1&n&&(e.TgZ(0,"span",98)(1,"span",99),e.SDv(2,113),e.qZA()())}function wr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"div",77)(2,"span",101),e._UZ(3,"i"),e.qZA(),e._UZ(4,"input",102),e.TgZ(5,"button",114),e.NdJ("click",function(){const F=e.CHM(t).index,z=e.oxw(3);return e.KtG(z.showSwiftKeyModal(F))}),e._UZ(6,"i",95),e.qZA()(),e._UZ(7,"span",99),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw(3);e.xp6(3),e.Tol(o.icons.key),e.xp6(1),e.s9C("value",t.user),e.xp6(2),e.Q6J("ngClass",e.VKq(5,Xe,o.icons.show))}}function Wr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"fieldset")(1,"legend"),e.SDv(2,105),e.qZA(),e.TgZ(3,"div",8)(4,"label",67),e.SDv(5,106),e.qZA(),e.TgZ(6,"div",11),e.YNc(7,Lr,3,0,"span",90),e.YNc(8,Dr,10,10,"span",91),e.TgZ(9,"div",92)(10,"div",93)(11,"button",107),e.NdJ("click",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.showS3KeyModal())}),e._UZ(12,"i",95),e.ynx(13),e.SDv(14,108),e.ALo(15,"titlecase"),e.ALo(16,"upperFirst"),e.BQk(),e.qZA()()(),e._UZ(17,"span",97),e.qZA(),e._UZ(18,"hr"),e.qZA(),e.TgZ(19,"div",8)(20,"label",67),e.SDv(21,109),e.qZA(),e.TgZ(22,"div",11),e.YNc(23,vr,3,0,"span",90),e.YNc(24,wr,8,7,"span",91),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(7),e.Q6J("ngIf",0===t.s3Keys.length),e.xp6(1),e.Q6J("ngForOf",t.s3Keys),e.xp6(4),e.Q6J("ngClass",e.VKq(11,Xe,t.icons.add)),e.xp6(4),e.pQV(e.lcZ(15,7,t.actionLabels.CREATE))(e.lcZ(16,9,t.s3keyLabel)),e.QtT(14),e.xp6(7),e.Q6J("ngIf",0===t.swiftKeys.length),e.xp6(1),e.Q6J("ngForOf",t.swiftKeys)}}function Ur(n,i){1&n&&(e.TgZ(0,"span",98)(1,"span",99),e.SDv(2,118),e.qZA()())}function $r(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"div",77)(2,"div",101),e._UZ(3,"i"),e.qZA(),e._UZ(4,"input",102),e.TgZ(5,"button",119),e.NdJ("click",function(){const F=e.CHM(t).index,z=e.oxw(3);return e.KtG(z.showCapabilityModal(F))}),e._UZ(6,"i",95),e.qZA(),e.TgZ(7,"button",120),e.NdJ("click",function(){const F=e.CHM(t).index,z=e.oxw(3);return e.KtG(z.deleteCapability(F))}),e._UZ(8,"i",95),e.qZA()(),e._UZ(9,"span",99),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw(3);e.xp6(3),e.Tol(o.icons.share),e.xp6(1),e.hYB("value","",t.type,":",t.perm,""),e.xp6(2),e.Q6J("ngClass",e.VKq(7,Xe,o.icons.edit)),e.xp6(2),e.Q6J("ngClass",e.VKq(9,Xe,o.icons.destroy))}}function xr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"fieldset")(1,"legend"),e.SDv(2,115),e.qZA(),e.TgZ(3,"div",8)(4,"div",14),e.YNc(5,Ur,3,0,"span",90),e.YNc(6,$r,10,11,"span",91),e.TgZ(7,"div",92)(8,"div",93)(9,"button",116),e.NdJ("click",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.showCapabilityModal())}),e.ALo(10,"pipeFunction"),e.ALo(11,"pipeFunction"),e._UZ(12,"i",95),e.ynx(13),e.SDv(14,117),e.ALo(15,"titlecase"),e.ALo(16,"upperFirst"),e.BQk(),e.qZA()()(),e._UZ(17,"span",97),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(5),e.Q6J("ngIf",0===t.capabilities.length),e.xp6(1),e.Q6J("ngForOf",t.capabilities),e.xp6(3),e.Q6J("disabled",e.xi3(10,7,t.capabilities,t.hasAllCapabilities))("disableTooltip",!e.xi3(11,10,t.capabilities,t.hasAllCapabilities)),e.xp6(3),e.Q6J("ngClass",e.VKq(17,Xe,t.icons.add)),e.xp6(4),e.pQV(e.lcZ(15,13,t.actionLabels.ADD))(e.lcZ(16,15,t.capabilityLabel)),e.QtT(14)}}function Zr(n,i){1&n&&(e.TgZ(0,"div",8)(1,"div",14)(2,"div",15),e._UZ(3,"input",121),e.TgZ(4,"label",122),e.SDv(5,123),e.qZA()()()())}function kr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,127),e.qZA())}function Br(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,128),e.qZA())}function zr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,129),e.qZA())}function qr(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"label",124),e.SDv(2,125),e.qZA(),e.TgZ(3,"div",11),e._UZ(4,"input",126),e.YNc(5,kr,2,0,"span",13),e.YNc(6,Br,2,0,"span",13),e.YNc(7,zr,2,0,"span",13),e.qZA()()),2&n){e.oxw();const t=e.MAs(2),o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.userForm.showError("user_quota_max_size",t,"required")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("user_quota_max_size",t,"quotaMaxSize")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("user_quota_max_size",o.formDir,"pattern"))}}function Hr(n,i){1&n&&(e.TgZ(0,"div",8)(1,"div",14)(2,"div",15),e._UZ(3,"input",130),e.TgZ(4,"label",131),e.SDv(5,132),e.qZA()()()())}function Xr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,136),e.qZA())}function Kr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,137),e.qZA())}function Qr(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"label",133),e.SDv(2,134),e.qZA(),e.TgZ(3,"div",11),e._UZ(4,"input",135),e.YNc(5,Xr,2,0,"span",13),e.YNc(6,Kr,2,0,"span",13),e.qZA()()),2&n){e.oxw();const t=e.MAs(2),o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.userForm.showError("user_quota_max_objects",t,"required")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("user_quota_max_objects",t,"min"))}}function Yr(n,i){1&n&&(e.TgZ(0,"div",8)(1,"div",14)(2,"div",15),e._UZ(3,"input",138),e.TgZ(4,"label",139),e.SDv(5,140),e.qZA()()()())}function Jr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,144),e.qZA())}function Vr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,145),e.qZA())}function jr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,146),e.qZA())}function e_(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"label",141),e.SDv(2,142),e.qZA(),e.TgZ(3,"div",11),e._UZ(4,"input",143),e.YNc(5,Jr,2,0,"span",13),e.YNc(6,Vr,2,0,"span",13),e.YNc(7,jr,2,0,"span",13),e.qZA()()),2&n){e.oxw();const t=e.MAs(2),o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.userForm.showError("bucket_quota_max_size",t,"required")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("bucket_quota_max_size",t,"quotaMaxSize")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("bucket_quota_max_size",o.formDir,"pattern"))}}function t_(n,i){1&n&&(e.TgZ(0,"div",8)(1,"div",14)(2,"div",15),e._UZ(3,"input",147),e.TgZ(4,"label",148),e.SDv(5,149),e.qZA()()()())}function n_(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,153),e.qZA())}function o_(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,154),e.qZA())}function i_(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"label",150),e.SDv(2,151),e.qZA(),e.TgZ(3,"div",11),e._UZ(4,"input",152),e.YNc(5,n_,2,0,"span",13),e.YNc(6,o_,2,0,"span",13),e.qZA()()),2&n){e.oxw();const t=e.MAs(2),o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.userForm.showError("bucket_quota_max_objects",t,"required")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("bucket_quota_max_objects",t,"min"))}}const Cn=function(n){return{required:n}};function r_(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"form",2,3)(3,"div",4)(4,"div",5),e.SDv(5,6),e.ALo(6,"titlecase"),e.ALo(7,"upperFirst"),e.qZA(),e.TgZ(8,"div",7)(9,"div",8)(10,"label",9),e.SDv(11,10),e.qZA(),e.TgZ(12,"div",11),e._UZ(13,"input",12),e.YNc(14,dr,2,0,"span",13),e.YNc(15,fr,2,0,"span",13),e.YNc(16,pr,2,0,"span",13),e.qZA()(),e.TgZ(17,"div",8)(18,"div",14)(19,"div",15)(20,"input",16),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.updateFieldsWhenTenanted())}),e.qZA(),e.TgZ(21,"label",17),e.SDv(22,18),e.qZA()()()(),e.YNc(23,Er,7,3,"div",19),e.TgZ(24,"div",8)(25,"label",20),e.SDv(26,21),e.qZA(),e.TgZ(27,"div",11),e._UZ(28,"input",22),e.YNc(29,Rr,2,0,"span",13),e.YNc(30,mr,2,0,"span",13),e.qZA()(),e.TgZ(31,"div",8)(32,"label",23),e.SDv(33,24),e.qZA(),e.TgZ(34,"div",11),e._UZ(35,"input",25),e.YNc(36,hr,2,0,"span",13),e.YNc(37,Mr,2,0,"span",13),e.qZA()(),e.TgZ(38,"div",8)(39,"label",26),e.SDv(40,27),e.qZA(),e.TgZ(41,"div",11)(42,"select",28),e.NdJ("change",function(c){e.CHM(t);const F=e.oxw();return e.KtG(F.onMaxBucketsModeChange(c.target.value))}),e.TgZ(43,"option",29),e.SDv(44,30),e.qZA(),e.TgZ(45,"option",31),e.SDv(46,32),e.qZA(),e.TgZ(47,"option",33),e.SDv(48,34),e.qZA()()()(),e.YNc(49,Fr,6,2,"div",19),e.TgZ(50,"div",8)(51,"div",14)(52,"div",15),e._UZ(53,"input",35),e.TgZ(54,"label",36),e.SDv(55,37),e.qZA(),e.TgZ(56,"cd-helper"),e.SDv(57,38),e.qZA()()()(),e.TgZ(58,"div",8)(59,"div",14)(60,"div",15),e._UZ(61,"input",39),e.TgZ(62,"label",40),e.SDv(63,41),e.qZA(),e.TgZ(64,"cd-helper"),e.SDv(65,42),e.qZA()()()(),e.YNc(66,br,11,2,"fieldset",43),e.YNc(67,yr,16,11,"fieldset",43),e.YNc(68,Wr,25,13,"fieldset",43),e.YNc(69,xr,18,19,"fieldset",43),e.TgZ(70,"fieldset")(71,"legend"),e.SDv(72,44),e.qZA(),e.TgZ(73,"div",8)(74,"div",14)(75,"div",15),e._UZ(76,"input",45),e.TgZ(77,"label",46),e.SDv(78,47),e.qZA()()()(),e.YNc(79,Zr,6,0,"div",19),e.YNc(80,qr,8,3,"div",19),e.YNc(81,Hr,6,0,"div",19),e.YNc(82,Qr,7,2,"div",19),e.qZA(),e.TgZ(83,"fieldset")(84,"legend"),e.SDv(85,48),e.qZA(),e.TgZ(86,"div",8)(87,"div",14)(88,"div",15),e._UZ(89,"input",49),e.TgZ(90,"label",50),e.SDv(91,51),e.qZA()()()(),e.YNc(92,Yr,6,0,"div",19),e.YNc(93,e_,8,3,"div",19),e.YNc(94,t_,6,0,"div",19),e.YNc(95,i_,7,2,"div",19),e.qZA()(),e.TgZ(96,"div",52)(97,"cd-form-button-panel",53),e.NdJ("submitActionEvent",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.onSubmit())}),e.ALo(98,"titlecase"),e.ALo(99,"upperFirst"),e.qZA()()()()()}if(2&n){const t=e.MAs(2),o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.userForm),e.xp6(6),e.pQV(e.lcZ(6,30,o.action))(e.lcZ(7,32,o.resource)),e.QtT(5),e.xp6(3),e.Q6J("ngClass",e.VKq(38,Cn,!o.editing)),e.xp6(3),e.Q6J("readonly",o.editing),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("user_id",t,"required")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("user_id",t,"pattern")),e.xp6(1),e.Q6J("ngIf",!o.userForm.getValue("show_tenant")&&o.userForm.showError("user_id",t,"notUnique")),e.xp6(4),e.Q6J("readonly",!0),e.xp6(3),e.Q6J("ngIf",o.userForm.getValue("show_tenant")),e.xp6(2),e.Q6J("ngClass",e.VKq(40,Cn,!o.editing)),e.xp6(4),e.Q6J("ngIf",o.userForm.showError("display_name",t,"pattern")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("display_name",t,"required")),e.xp6(6),e.Q6J("ngIf",o.userForm.showError("email",t,"email")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("email",t,"notUnique")),e.xp6(12),e.Q6J("ngIf",1==o.userForm.get("max_buckets_mode").value),e.xp6(17),e.Q6J("ngIf",!o.editing),e.xp6(1),e.Q6J("ngIf",o.editing),e.xp6(1),e.Q6J("ngIf",o.editing),e.xp6(1),e.Q6J("ngIf",o.editing),e.xp6(10),e.Q6J("ngIf",o.userForm.controls.user_quota_enabled.value),e.xp6(1),e.Q6J("ngIf",o.userForm.controls.user_quota_enabled.value&&!o.userForm.getValue("user_quota_max_size_unlimited")),e.xp6(1),e.Q6J("ngIf",o.userForm.controls.user_quota_enabled.value),e.xp6(1),e.Q6J("ngIf",o.userForm.controls.user_quota_enabled.value&&!o.userForm.getValue("user_quota_max_objects_unlimited")),e.xp6(10),e.Q6J("ngIf",o.userForm.controls.bucket_quota_enabled.value),e.xp6(1),e.Q6J("ngIf",o.userForm.controls.bucket_quota_enabled.value&&!o.userForm.getValue("bucket_quota_max_size_unlimited")),e.xp6(1),e.Q6J("ngIf",o.userForm.controls.bucket_quota_enabled.value),e.xp6(1),e.Q6J("ngIf",o.userForm.controls.bucket_quota_enabled.value&&!o.userForm.getValue("bucket_quota_max_objects_unlimited")),e.xp6(2),e.Q6J("form",o.userForm)("submitText",e.lcZ(98,34,o.action)+" "+e.lcZ(99,36,o.resource))}}let Fn=(()=>{class n extends H.E{constructor(t,o,c,F,z,Q,J){super(),this.formBuilder=t,this.route=o,this.router=c,this.rgwUserService=F,this.modalService=z,this.notificationService=Q,this.actionLabels=J,this.editing=!1,this.submitObservables=[],this.icons=B.P,this.subusers=[],this.s3Keys=[],this.swiftKeys=[],this.capabilities=[],this.showTenant=!1,this.previousTenant=null,this.resource="user",this.subuserLabel="subuser",this.s3keyLabel="S3 Key",this.capabilityLabel="capability",this.editing=this.router.url.startsWith(`/rgw/user/${T.MQ.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.createForm()}createForm(){this.userForm=this.formBuilder.group({user_id:[null,[_.kI.required,_.kI.pattern(/^[a-zA-Z0-9!@#%^&*()_-]+$/)],this.editing?[]:[X.h.unique(this.rgwUserService.exists,this.rgwUserService,()=>this.userForm.getValue("tenant"))]],show_tenant:[this.editing],tenant:[null,[_.kI.pattern(/^[a-zA-Z0-9!@#%^&*()_-]+$/)],this.editing?[]:[X.h.unique(this.rgwUserService.exists,this.rgwUserService,()=>this.userForm.getValue("user_id"),!0)]],display_name:[null,[_.kI.required,_.kI.pattern(/^[a-zA-Z0-9!@#%^&*()._ -]+$/)]],email:[null,[X.h.email],[X.h.unique(this.rgwUserService.emailExists,this.rgwUserService)]],max_buckets_mode:[1],max_buckets:[1e3,[X.h.requiredIf({max_buckets_mode:"1"}),X.h.number(!1)]],system:[!1],suspended:[!1],generate_key:[!0],access_key:[null,[X.h.requiredIf({generate_key:!1})]],secret_key:[null,[X.h.requiredIf({generate_key:!1})]],user_quota_enabled:[!1],user_quota_max_size_unlimited:[!0],user_quota_max_size:[null,[X.h.composeIf({user_quota_enabled:!0,user_quota_max_size_unlimited:!1},[_.kI.required,this.quotaMaxSizeValidator])]],user_quota_max_objects_unlimited:[!0],user_quota_max_objects:[null,[X.h.requiredIf({user_quota_enabled:!0,user_quota_max_objects_unlimited:!1})]],bucket_quota_enabled:[!1],bucket_quota_max_size_unlimited:[!0],bucket_quota_max_size:[null,[X.h.composeIf({bucket_quota_enabled:!0,bucket_quota_max_size_unlimited:!1},[_.kI.required,this.quotaMaxSizeValidator])]],bucket_quota_max_objects_unlimited:[!0],bucket_quota_max_objects:[null,[X.h.requiredIf({bucket_quota_enabled:!0,bucket_quota_max_objects_unlimited:!1})]]})}ngOnInit(){this.route.params.subscribe(t=>{if(!t.hasOwnProperty("uid"))return void this.loadingReady();const o=decodeURIComponent(t.uid),c=[];c.push(this.rgwUserService.get(o)),c.push(this.rgwUserService.getQuota(o)),(0,x.D)(c).subscribe(F=>{const z=w().clone(this.userForm.value);let Q=w().pick(F[0],w().keys(this.userForm.value));switch(Q.max_buckets){case-1:Q.max_buckets_mode=-1,Q.max_buckets="";break;case 0:Q.max_buckets_mode=0,Q.max_buckets="";break;default:Q.max_buckets_mode=1}["user","bucket"].forEach(j=>{const oe=F[1][j+"_quota"];Q[j+"_quota_enabled"]=oe.enabled,oe.max_size<0?(Q[j+"_quota_max_size_unlimited"]=!0,Q[j+"_quota_max_size"]=null):(Q[j+"_quota_max_size_unlimited"]=!1,Q[j+"_quota_max_size"]=`${oe.max_size} B`),oe.max_objects<0?(Q[j+"_quota_max_objects_unlimited"]=!0,Q[j+"_quota_max_objects"]=null):(Q[j+"_quota_max_objects_unlimited"]=!1,Q[j+"_quota_max_objects"]=oe.max_objects)}),Q=w().merge(z,Q),this.userForm.setValue(Q),this.subusers=F[0].subusers,this.s3Keys=F[0].keys,this.swiftKeys=F[0].swift_keys;const J={"read, write":"*"};F[0].caps.forEach(j=>{j.perm in J&&(j.perm=J[j.perm])}),this.capabilities=F[0].caps,this.loadingReady()},()=>{this.loadingError()})})}goToListView(){this.router.navigate(["/rgw/user"])}onSubmit(){let t;if(this.userForm.pristine)return void this.goToListView();const o=this.getUID();if(this.editing){if(this._isGeneralDirty()){const c=this._getUpdateArgs();this.submitObservables.push(this.rgwUserService.update(o,c))}t="Updated Object Gateway user '\n          " + o + "'\n        "}else{const c=this._getCreateArgs();this.submitObservables.push(this.rgwUserService.create(c)),t="Created Object Gateway user '\n          " + o + "'\n        "}if(this._isUserQuotaDirty()){const c=this._getUserQuotaArgs();this.submitObservables.push(this.rgwUserService.updateQuota(o,c))}if(this._isBucketQuotaDirty()){const c=this._getBucketQuotaArgs();this.submitObservables.push(this.rgwUserService.updateQuota(o,c))}(0,Li.z)(...this.submitObservables).subscribe({error:()=>{this.userForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.notificationService.show(I.k.success,t),this.goToListView()}})}updateFieldsWhenTenanted(){this.showTenant=this.userForm.getValue("show_tenant"),this.showTenant?(this.userForm.get("user_id").markAsTouched(),this.previousTenant=this.userForm.get("tenant").value,this.userForm.get("tenant").patchValue(null)):(this.userForm.get("user_id").markAsUntouched(),this.userForm.get("tenant").patchValue(this.previousTenant))}getUID(){let t=this.userForm.getValue("user_id");const o=this.userForm?.getValue("tenant");return o&&o.length>0&&(t=`${this.userForm.getValue("tenant")}$${t}`),t}quotaMaxSizeValidator(t){return(0,X.P)(t.value)?null:null===RegExp("^(\\d+(\\.\\d+)?)\\s*(B|K(B|iB)?|M(B|iB)?|G(B|iB)?|T(B|iB)?)?$","i").exec(t.value)||(new rn.H).toBytes(t.value)<1024?{quotaMaxSize:!0}:null}setSubuser(t,o){const c={"full-control":"full","read-write":"readwrite"},F=this.getUID();this.submitObservables.push(this.rgwUserService.createSubuser(F,{subuser:t.id,access:t.permissions in c?c[t.permissions]:t.permissions,key_type:"swift",secret_key:t.secret_key,generate_secret:t.generate_secret?"true":"false"})),w().isNumber(o)?this.subusers[o]=t:(this.subusers.push(t),this.swiftKeys.push({user:t.id,secret_key:t.generate_secret?"Apply your changes first...":t.secret_key})),this.userForm.markAsDirty()}deleteSubuser(t){const o=this.subusers[t];this.submitObservables.push(this.rgwUserService.deleteSubuser(this.getUID(),o.id)),this.s3Keys=this.s3Keys.filter(c=>c.user!==o.id),this.swiftKeys=this.swiftKeys.filter(c=>c.user!==o.id),this.subusers.splice(t,1),this.userForm.markAsDirty()}setCapability(t,o){const c=this.getUID();if(w().isNumber(o)){const F=this.capabilities[o];this.submitObservables.push(this.rgwUserService.deleteCapability(c,F.type,F.perm)),this.submitObservables.push(this.rgwUserService.addCapability(c,t.type,t.perm)),this.capabilities[o]=t}else this.submitObservables.push(this.rgwUserService.addCapability(c,t.type,t.perm)),this.capabilities=[...this.capabilities,t];this.userForm.markAsDirty()}deleteCapability(t){const o=this.capabilities[t];this.submitObservables.push(this.rgwUserService.deleteCapability(this.getUID(),o.type,o.perm)),this.capabilities.splice(t,1),this.capabilities=[...this.capabilities],this.userForm.markAsDirty()}hasAllCapabilities(t){return!w().difference(mn.getAll(),w().map(t,"type")).length}setS3Key(t,o){if(!w().isNumber(o)){const c=t.user.match(/([^:]+)(:(.+))?/),F=c[1],z={subuser:c[2]?c[3]:"",generate_key:t.generate_key?"true":"false"};"false"===z.generate_key&&(w().isNil(t.access_key)||(z.access_key=t.access_key),w().isNil(t.secret_key)||(z.secret_key=t.secret_key)),this.submitObservables.push(this.rgwUserService.addS3Key(F,z)),this.s3Keys.push({user:t.user,access_key:t.generate_key?"Apply your changes first...":t.access_key,secret_key:t.generate_key?"Apply your changes first...":t.secret_key})}this.userForm.markAsDirty()}deleteS3Key(t){const o=this.s3Keys[t];this.submitObservables.push(this.rgwUserService.deleteS3Key(this.getUID(),o.access_key)),this.s3Keys.splice(t,1),this.userForm.markAsDirty()}showSubuserModal(t){const o=this.getUID(),c=this.modalService.show(cr);if(w().isNumber(t)){const F=this.subusers[t];c.componentInstance.setEditing(),c.componentInstance.setValues(o,F.id,F.permissions)}else c.componentInstance.setEditing(!1),c.componentInstance.setValues(o),c.componentInstance.setSubusers(this.subusers);c.componentInstance.submitAction.subscribe(F=>{this.setSubuser(F,t)})}showS3KeyModal(t){const o=this.modalService.show(hn);if(w().isNumber(t)){const c=this.s3Keys[t];o.componentInstance.setViewing(),o.componentInstance.setValues(c.user,c.access_key,c.secret_key)}else{const c=this._getS3KeyUserCandidates();o.componentInstance.setViewing(!1),o.componentInstance.setUserCandidates(c),o.componentInstance.submitAction.subscribe(F=>{this.setS3Key(F)})}}showSwiftKeyModal(t){const o=this.modalService.show(Sn),c=this.swiftKeys[t];o.componentInstance.setValues(c.user,c.secret_key)}showCapabilityModal(t){const o=this.modalService.show(Bi);if(w().isNumber(t)){const c=this.capabilities[t];o.componentInstance.setEditing(),o.componentInstance.setValues(c.type,c.perm)}else o.componentInstance.setEditing(!1),o.componentInstance.setCapabilities(this.capabilities);o.componentInstance.submitAction.subscribe(c=>{this.setCapability(c,t)})}_isGeneralDirty(){return["display_name","email","max_buckets_mode","max_buckets","system","suspended"].some(t=>this.userForm.get(t).dirty)}_isUserQuotaDirty(){return["user_quota_enabled","user_quota_max_size_unlimited","user_quota_max_size","user_quota_max_objects_unlimited","user_quota_max_objects"].some(t=>this.userForm.get(t).dirty)}_isBucketQuotaDirty(){return["bucket_quota_enabled","bucket_quota_max_size_unlimited","bucket_quota_max_size","bucket_quota_max_objects_unlimited","bucket_quota_max_objects"].some(t=>this.userForm.get(t).dirty)}_getCreateArgs(){const t={uid:this.getUID(),display_name:this.userForm.getValue("display_name"),system:this.userForm.getValue("system"),suspended:this.userForm.getValue("suspended"),email:"",max_buckets:this.userForm.getValue("max_buckets"),generate_key:this.userForm.getValue("generate_key"),access_key:"",secret_key:""},o=this.userForm.getValue("email");w().isString(o)&&o.length>0&&w().merge(t,{email:o}),this.userForm.getValue("generate_key")||w().merge(t,{generate_key:!1,access_key:this.userForm.getValue("access_key"),secret_key:this.userForm.getValue("secret_key")});const F=parseInt(this.userForm.getValue("max_buckets_mode"),10);return w().includes([-1,0],F)&&w().merge(t,{max_buckets:F}),t}_getUpdateArgs(){const t={},o=["display_name","email","max_buckets","system","suspended"];for(const F of o)t[F]=this.userForm.getValue(F);const c=parseInt(this.userForm.getValue("max_buckets_mode"),10);return w().includes([-1,0],c)&&(t.max_buckets=c),t}_getUserQuotaArgs(){const t={quota_type:"user",enabled:this.userForm.getValue("user_quota_enabled"),max_size_kb:-1,max_objects:-1};if(!this.userForm.getValue("user_quota_max_size_unlimited")){const o=(new rn.H).toBytes(this.userForm.getValue("user_quota_max_size"));t.max_size_kb=(o/1024).toFixed(0)}return this.userForm.getValue("user_quota_max_objects_unlimited")||(t.max_objects=this.userForm.getValue("user_quota_max_objects")),t}_getBucketQuotaArgs(){const t={quota_type:"bucket",enabled:this.userForm.getValue("bucket_quota_enabled"),max_size_kb:-1,max_objects:-1};if(!this.userForm.getValue("bucket_quota_max_size_unlimited")){const o=(new rn.H).toBytes(this.userForm.getValue("bucket_quota_max_size"));t.max_size_kb=(o/1024).toFixed(0)}return this.userForm.getValue("bucket_quota_max_objects_unlimited")||(t.max_objects=this.userForm.getValue("bucket_quota_max_objects")),t}_getS3KeyUserCandidates(){let t=[];const o=this.getUID();return w().isString(o)&&!w().isEmpty(o)&&t.push(o),this.subusers.forEach(c=>{t.push(c.id)}),this.s3Keys.forEach(c=>{t.push(c.user)}),t=w().uniq(t),t}onMaxBucketsModeChange(t){"1"===t&&(this.userForm.get("max_buckets").valid||this.userForm.patchValue({max_buckets:1e3}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ze.O),e.Y36(P.gz),e.Y36(P.F0),e.Y36(E),e.Y36(Qe.Z),e.Y36(ne.g),e.Y36(T.p4))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-user-form"]],features:[e.qOj],decls:1,vars:1,consts:function(){let i,t,o,c,F,z,Q,J,j,oe,Te,Se,Oe,be,me,Ge,ye,Le,Ee,Ue,$e,xe,De,ve,ae,Re,ce,Je,Ce,ut,dt,ft,pt,gt,Tt,Et,Rt,mt,ht,Mt,St,Ct,Ft,Ot,Nt,At,Pt,bt,It,Gt,yt,Lt,Dt,vt,wt,Wt,Ut,$t,xt,Zt,kt,Bt,zt,qt,Ht,Xt,Kt,Qt,Yt,Jt,_e,Wn,Un;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="User ID",o="Show Tenant",c="Full name",F="Email address",z="Max. buckets",Q="Disabled",J="Unlimited",j="Custom",oe="Suspended",Te="Suspending the user disables the user and subuser.",Se="System user",Oe="System users are distinct from regular users, they are used by the RGW service to perform administrative tasks, manage buckets and objects",be="\u30E6\u30FC\u30B6\u30AF\u30A9\u30FC\u30BF",me="Enabled",Ge="\u30D0\u30B1\u30C3\u30C8\u30AF\u30A9\u30FC\u30BF",ye="Enabled",Le="This field is required.",Ee="\u3053\u306E\u5024\u306F\u7121\u52B9\u3067\u3059\u3002",Ue="\u9078\u629E\u3055\u308C\u305F\u30E6\u30FC\u30B6ID\u306F\u3059\u3067\u306B\u4F7F\u7528\u3055\u308C\u3066\u3044\u307E\u3059\u3002",$e="Tenant",xe="\u3053\u306E\u5024\u306F\u7121\u52B9\u3067\u3059\u3002",De="The chosen user ID exists in this tenant.",ve="\u3053\u306E\u5024\u306F\u7121\u52B9\u3067\u3059\u3002",ae="This field is required.",Re="\u3053\u308C\u306F\u6709\u52B9\u306A\u96FB\u5B50\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u3067\u306F\u3042\u308A\u307E\u305B\u3093\u3002",ce="\u9078\u629E\u3055\u308C\u305F\u96FB\u5B50\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u306F\u3059\u3067\u306B\u4F7F\u7528\u3055\u308C\u3066\u3044\u307E\u3059\u3002",Je="This field is required.",Ce="The entered value must be >= 1.",ut="S3\u30AD\u30FC",dt="\u30AD\u30FC\u306E\u81EA\u52D5\u751F\u6210",ft="\u30A2\u30AF\u30BB\u30B9\u30AD\u30FC",pt="This field is required.",gt="\u79D8\u5BC6\u30AD\u30FC",Tt="This field is required.",Et="\u30B5\u30D6\u30E6\u30FC\u30B6",Rt="\n          " + "\ufffd0\ufffd" + "\n          " + "\ufffd1\ufffd" + "\n        ",mt="\u30B5\u30D6\u30E6\u30FC\u30B6\u304C\u3044\u307E\u305B\u3093\u3002",ht="Edit",Mt="Delete",St="\u30AD\u30FC",Ct="S3",Ft="\n          " + "\ufffd0\ufffd" + "\n          " + "\ufffd1\ufffd" + "\n        ",Ot="\u30B9\u30A6\u30A3\u30D5\u30C8",Nt="\u30AD\u30FC\u304C\u3042\u308A\u307E\u305B\u3093\u3002",At="Show",Pt="Delete",bt="\u30AD\u30FC\u304C\u3042\u308A\u307E\u305B\u3093\u3002",It="Show",Gt="\u6A5F\u80FD",yt="All capabilities are already added.",Lt="\n          " + "\ufffd0\ufffd" + "\n          " + "\ufffd1\ufffd" + "\n        ",Dt="\u6A5F\u80FD\u304C\u3042\u308A\u307E\u305B\u3093\u3002",vt="Edit",wt="Delete",Wt="\u7121\u5236\u9650\u306E\u30B5\u30A4\u30BA",Ut="\u6700\u5927\u30B5\u30A4\u30BA",$t="This field is required.",xt="\u3053\u306E\u5024\u306F\u7121\u52B9\u3067\u3059\u3002",Zt="Size must be a number or in a valid format. eg: 5 GiB",kt="\u7121\u5236\u9650\u306E\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u6570",Bt="\u6700\u5927\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u6570",zt="This field is required.",qt="0\u4EE5\u4E0A\u306E\u5024\u3092\u5165\u529B\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002",Ht="\u7121\u5236\u9650\u306E\u30B5\u30A4\u30BA",Xt="\u6700\u5927\u30B5\u30A4\u30BA",Kt="This field is required.",Qt="\u3053\u306E\u5024\u306F\u7121\u52B9\u3067\u3059\u3002",Yt="Size must be a number or in a valid format. eg: 5 GiB",Jt="\u7121\u5236\u9650\u306E\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u6570",_e="\u6700\u5927\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u6570",Wn="This field is required.",Un="0\u4EE5\u4E0A\u306E\u5024\u3092\u5165\u529B\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002",[["class","cd-col-form",4,"cdFormLoading"],[1,"cd-col-form"],["novalidate","",3,"formGroup"],["frm","ngForm"],[1,"card"],[1,"card-header"],i,[1,"card-body"],[1,"form-group","row"],["for","user_id",1,"cd-col-form-label",3,"ngClass"],t,[1,"cd-col-form-input"],["id","user_id","type","text","formControlName","user_id",1,"form-control",3,"readonly"],["class","invalid-feedback",4,"ngIf"],[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","show_tenant","type","checkbox","formControlName","show_tenant",1,"custom-control-input",3,"readonly","click"],["for","show_tenant",1,"custom-control-label"],o,["class","form-group row",4,"ngIf"],["for","display_name",1,"cd-col-form-label",3,"ngClass"],c,["id","display_name","type","text","formControlName","display_name",1,"form-control"],["for","email",1,"cd-col-form-label"],F,["id","email","type","text","formControlName","email",1,"form-control"],["for","max_buckets_mode",1,"cd-col-form-label"],z,["formControlName","max_buckets_mode","name","max_buckets_mode","id","max_buckets_mode",1,"form-select",3,"change"],["value","-1"],Q,["value","0"],J,["value","1"],j,["id","suspended","type","checkbox","formControlName","suspended",1,"custom-control-input"],["for","suspended",1,"custom-control-label"],oe,Te,["id","system","type","checkbox","formControlName","system",1,"custom-control-input"],["for","system",1,"custom-control-label"],Se,Oe,[4,"ngIf"],be,["id","user_quota_enabled","type","checkbox","formControlName","user_quota_enabled",1,"custom-control-input"],["for","user_quota_enabled",1,"custom-control-label"],me,Ge,["id","bucket_quota_enabled","type","checkbox","formControlName","bucket_quota_enabled",1,"custom-control-input"],["for","bucket_quota_enabled",1,"custom-control-label"],ye,[1,"card-footer"],["wrappingClass","text-right",3,"form","submitText","submitActionEvent"],[1,"invalid-feedback"],Le,Ee,Ue,["for","tenant",1,"cd-col-form-label"],$e,["id","tenant","type","text","formControlName","tenant","autofocus","",1,"form-control",3,"readonly"],xe,De,ve,ae,Re,ce,[1,"cd-col-form-label"],["id","max_buckets","type","number","formControlName","max_buckets","min","1",1,"form-control"],Je,Ce,ut,["id","generate_key","type","checkbox","formControlName","generate_key",1,"custom-control-input"],["for","generate_key",1,"custom-control-label"],dt,["for","access_key",1,"cd-col-form-label","required"],ft,[1,"input-group"],["id","access_key","type","password","formControlName","access_key",1,"form-control"],["type","button","cdPasswordButton","access_key",1,"btn","btn-light"],["source","access_key"],pt,["for","secret_key",1,"cd-col-form-label","required"],gt,["id","secret_key","type","password","formControlName","secret_key",1,"form-control"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["source","secret_key"],Tt,Et,[1,"row"],["class","no-border",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row","my-2"],[1,"col-12"],["type","button",1,"btn","btn-light","float-end","tc_addSubuserButton",3,"click"],[3,"ngClass"],Rt,[1,"help-block"],[1,"no-border"],[1,"form-text","text-muted"],mt,[1,"input-group-text"],["type","text","readonly","",1,"cd-form-control",3,"value"],["type","button","ngbTooltip",ht,1,"btn","btn-light","tc_showSubuserButton",3,"click"],["type","button","ngbTooltip",Mt,1,"btn","btn-light","tc_deleteSubuserButton",3,"click"],St,Ct,["type","button",1,"btn","btn-light","float-end","tc_addS3KeyButton",3,"click"],Ft,Ot,Nt,["type","button","ngbTooltip",At,1,"btn","btn-light","tc_showS3KeyButton",3,"click"],["type","button","ngbTooltip",Pt,1,"btn","btn-light","tc_deleteS3KeyButton",3,"click"],bt,["type","button","ngbTooltip",It,1,"btn","btn-light","tc_showSwiftKeyButton",3,"click"],Gt,["type","button","ngbTooltip",yt,"triggers","pointerenter:pointerleave",1,"btn","btn-light","float-end","tc_addCapButton",3,"disabled","disableTooltip","click"],Lt,Dt,["type","button","ngbTooltip",vt,1,"btn","btn-light","tc_editCapButton",3,"click"],["type","button","ngbTooltip",wt,1,"btn","btn-light","tc_deleteCapButton",3,"click"],["id","user_quota_max_size_unlimited","type","checkbox","formControlName","user_quota_max_size_unlimited",1,"custom-control-input"],["for","user_quota_max_size_unlimited",1,"custom-control-label"],Wt,["for","user_quota_max_size",1,"cd-col-form-label","required"],Ut,["id","user_quota_max_size","type","text","formControlName","user_quota_max_size","cdDimlessBinary","",1,"form-control"],$t,xt,Zt,["id","user_quota_max_objects_unlimited","type","checkbox","formControlName","user_quota_max_objects_unlimited",1,"custom-control-input"],["for","user_quota_max_objects_unlimited",1,"custom-control-label"],kt,["for","user_quota_max_objects",1,"cd-col-form-label","required"],Bt,["id","user_quota_max_objects","type","number","formControlName","user_quota_max_objects","min","0",1,"form-control"],zt,qt,["id","bucket_quota_max_size_unlimited","type","checkbox","formControlName","bucket_quota_max_size_unlimited",1,"custom-control-input"],["for","bucket_quota_max_size_unlimited",1,"custom-control-label"],Ht,["for","bucket_quota_max_size",1,"cd-col-form-label","required"],Xt,["id","bucket_quota_max_size","type","text","formControlName","bucket_quota_max_size","cdDimlessBinary","",1,"form-control"],Kt,Qt,Yt,["id","bucket_quota_max_objects_unlimited","type","checkbox","formControlName","bucket_quota_max_objects_unlimited",1,"custom-control-input"],["for","bucket_quota_max_objects_unlimited",1,"custom-control-label"],Jt,["for","bucket_quota_max_objects",1,"cd-col-form-label","required"],_e,["id","bucket_quota_max_objects","type","number","formControlName","bucket_quota_max_objects","min","0",1,"form-control"],Wn,Un]},template:function(t,o){1&t&&e.YNc(0,r_,100,42,"div",0),2&t&&e.Q6J("cdFormLoading",o.loading)},dependencies:[g.mk,g.sg,g.O5,pe.S,at.s,we.p,st.U,ur.Q,lt.C,cn.y,Ae.o,Pe.b,We.P,C.V,_._Y,_.YN,_.Kr,_.Fj,_.wV,_.Wl,_.EJ,_.JJ,_.JL,_.qQ,_.sg,_.u,v._L,g.rS,Ye.m,Z.i]}),n})();var On=p(99466),__=p(86969),s_=p(78877);const a_=["accessKeyTpl"],l_=["secretKeyTpl"],c_=function(n){return[n]};function u_(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"legend"),e.SDv(2,13),e.qZA(),e.TgZ(3,"div")(4,"cd-table",14),e.NdJ("updateSelection",function(c){e.CHM(t);const F=e.oxw(3);return e.KtG(F.updateKeysSelection(c))}),e.TgZ(5,"div",15)(6,"div",16)(7,"button",17),e.NdJ("click",function(){e.CHM(t);const c=e.oxw(3);return e.KtG(c.showKeyModal())}),e._UZ(8,"i",18),e.ynx(9),e.SDv(10,19),e.BQk(),e.qZA()()()()()()}if(2&n){const t=e.oxw(3);e.xp6(4),e.Q6J("data",t.keys)("columns",t.keysColumns),e.xp6(3),e.Q6J("disabled",!t.keysSelection.hasSingleSelection),e.xp6(1),e.Q6J("ngClass",e.VKq(4,c_,t.icons.show))}}function d_(n,i){if(1&n&&(e.TgZ(0,"tr")(1,"td",8),e.SDv(2,20),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(4),e.Oqu(t.user.email)}}function f_(n,i){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.AsE(" ",t.id," (",t.permissions,") ")}}function p_(n,i){if(1&n&&(e.TgZ(0,"tr")(1,"td",8),e.SDv(2,21),e.qZA(),e.TgZ(3,"td"),e.YNc(4,f_,2,2,"div",22),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(4),e.Q6J("ngForOf",t.user.subusers)}}function g_(n,i){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.AsE(" ",t.type," (",t.perm,") ")}}function T_(n,i){if(1&n&&(e.TgZ(0,"tr")(1,"td",8),e.SDv(2,23),e.qZA(),e.TgZ(3,"td"),e.YNc(4,g_,2,2,"div",22),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(4),e.Q6J("ngForOf",t.user.caps)}}function E_(n,i){if(1&n&&(e.TgZ(0,"tr")(1,"td",8),e.SDv(2,24),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"join"),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(4),e.Oqu(e.lcZ(5,1,t.user.mfa_ids))}}function R_(n,i){1&n&&(e.TgZ(0,"td"),e._uU(1,"-"),e.qZA())}function m_(n,i){1&n&&(e.TgZ(0,"td"),e.SDv(1,29),e.qZA())}function h_(n,i){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"dimlessBinary"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.user.user_quota.max_size)," ")}}function M_(n,i){1&n&&(e.TgZ(0,"td"),e._uU(1,"-"),e.qZA())}function S_(n,i){1&n&&(e.TgZ(0,"td"),e.SDv(1,30),e.qZA())}function C_(n,i){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.user.user_quota.max_objects," ")}}function F_(n,i){if(1&n&&(e.TgZ(0,"div")(1,"legend"),e.SDv(2,25),e.qZA(),e.TgZ(3,"table",2)(4,"tbody")(5,"tr")(6,"td",3),e.SDv(7,26),e.qZA(),e.TgZ(8,"td",5),e._uU(9),e.ALo(10,"booleanText"),e.qZA()(),e.TgZ(11,"tr")(12,"td",8),e.SDv(13,27),e.qZA(),e.YNc(14,R_,2,0,"td",0),e.YNc(15,m_,2,0,"td",0),e.YNc(16,h_,3,3,"td",0),e.qZA(),e.TgZ(17,"tr")(18,"td",8),e.SDv(19,28),e.qZA(),e.YNc(20,M_,2,0,"td",0),e.YNc(21,S_,2,0,"td",0),e.YNc(22,C_,2,1,"td",0),e.qZA()()()()),2&n){const t=e.oxw(3);e.xp6(9),e.Oqu(e.lcZ(10,7,t.user.user_quota.enabled)),e.xp6(5),e.Q6J("ngIf",!t.user.user_quota.enabled),e.xp6(1),e.Q6J("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_size<=-1),e.xp6(1),e.Q6J("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_size>-1),e.xp6(4),e.Q6J("ngIf",!t.user.user_quota.enabled),e.xp6(1),e.Q6J("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_objects<=-1),e.xp6(1),e.Q6J("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_objects>-1)}}function O_(n,i){1&n&&(e.TgZ(0,"td"),e._uU(1,"-"),e.qZA())}function N_(n,i){1&n&&(e.TgZ(0,"td"),e.SDv(1,35),e.qZA())}function A_(n,i){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"dimlessBinary"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.user.bucket_quota.max_size)," ")}}function P_(n,i){1&n&&(e.TgZ(0,"td"),e._uU(1,"-"),e.qZA())}function b_(n,i){1&n&&(e.TgZ(0,"td"),e.SDv(1,36),e.qZA())}function I_(n,i){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.user.bucket_quota.max_objects," ")}}function G_(n,i){if(1&n&&(e.TgZ(0,"div")(1,"legend"),e.SDv(2,31),e.qZA(),e.TgZ(3,"table",2)(4,"tbody")(5,"tr")(6,"td",3),e.SDv(7,32),e.qZA(),e.TgZ(8,"td",5),e._uU(9),e.ALo(10,"booleanText"),e.qZA()(),e.TgZ(11,"tr")(12,"td",8),e.SDv(13,33),e.qZA(),e.YNc(14,O_,2,0,"td",0),e.YNc(15,N_,2,0,"td",0),e.YNc(16,A_,3,3,"td",0),e.qZA(),e.TgZ(17,"tr")(18,"td",8),e.SDv(19,34),e.qZA(),e.YNc(20,P_,2,0,"td",0),e.YNc(21,b_,2,0,"td",0),e.YNc(22,I_,2,1,"td",0),e.qZA()()()()),2&n){const t=e.oxw(3);e.xp6(9),e.Oqu(e.lcZ(10,7,t.user.bucket_quota.enabled)),e.xp6(5),e.Q6J("ngIf",!t.user.bucket_quota.enabled),e.xp6(1),e.Q6J("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_size<=-1),e.xp6(1),e.Q6J("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_size>-1),e.xp6(4),e.Q6J("ngIf",!t.user.bucket_quota.enabled),e.xp6(1),e.Q6J("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_objects<=-1),e.xp6(1),e.Q6J("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_objects>-1)}}function y_(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,u_,11,6,"div",0),e.TgZ(2,"legend"),e.SDv(3,1),e.qZA(),e.TgZ(4,"table",2)(5,"tbody")(6,"tr")(7,"td",3),e.SDv(8,4),e.qZA(),e.TgZ(9,"td",5),e._uU(10),e.qZA()(),e.TgZ(11,"tr")(12,"td",3),e.SDv(13,6),e.qZA(),e.TgZ(14,"td",5),e._uU(15),e.qZA()(),e.TgZ(16,"tr")(17,"td",3),e.SDv(18,7),e.qZA(),e.TgZ(19,"td",5),e._uU(20),e.qZA()(),e.TgZ(21,"tr")(22,"td",8),e.SDv(23,9),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.qZA()(),e.YNc(26,d_,5,1,"tr",0),e.TgZ(27,"tr")(28,"td",8),e.SDv(29,10),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.ALo(32,"booleanText"),e.qZA()(),e.TgZ(33,"tr")(34,"td",8),e.SDv(35,11),e.qZA(),e.TgZ(36,"td"),e._uU(37),e.ALo(38,"booleanText"),e.qZA()(),e.TgZ(39,"tr")(40,"td",8),e.SDv(41,12),e.qZA(),e.TgZ(42,"td"),e._uU(43),e.ALo(44,"map"),e.qZA()(),e.YNc(45,p_,5,1,"tr",0),e.YNc(46,T_,5,1,"tr",0),e.YNc(47,E_,6,3,"tr",0),e.qZA()(),e.YNc(48,F_,23,9,"div",0),e.YNc(49,G_,23,9,"div",0),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.keys.length),e.xp6(9),e.Oqu(t.user.tenant),e.xp6(5),e.Oqu(t.user.user_id),e.xp6(5),e.Oqu(t.user.uid),e.xp6(5),e.Oqu(t.user.display_name),e.xp6(1),e.Q6J("ngIf",null==t.user.email?null:t.user.email.length),e.xp6(5),e.Oqu(e.lcZ(32,14,t.user.suspended)),e.xp6(6),e.Oqu(e.lcZ(38,16,t.user.system)),e.xp6(6),e.Oqu(e.xi3(44,18,t.user.max_buckets,t.maxBucketsMap)),e.xp6(2),e.Q6J("ngIf",t.user.subusers&&t.user.subusers.length),e.xp6(1),e.Q6J("ngIf",t.user.caps&&t.user.caps.length),e.xp6(1),e.Q6J("ngIf",null==t.user.mfa_ids?null:t.user.mfa_ids.length),e.xp6(1),e.Q6J("ngIf",t.user.user_quota),e.xp6(1),e.Q6J("ngIf",t.user.bucket_quota)}}function L_(n,i){if(1&n&&(e.ynx(0),e.YNc(1,y_,50,21,"div",0),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.user)}}let D_=(()=>{class n{constructor(t,o){this.rgwUserService=t,this.modalService=o,this.keys=[],this.keysColumns=[],this.keysSelection=new Vt.r,this.icons=B.P}ngOnInit(){this.keysColumns=[{name:"Username",prop:"username",flexGrow:1},{name:"Type",prop:"type",flexGrow:1}],this.maxBucketsMap={"-1":"Disabled",0:"Unlimited"}}ngOnChanges(){this.selection&&(this.user=this.selection,this.user.subusers=w().sortBy(this.user.subusers,"id"),this.user.caps=w().sortBy(this.user.caps,"type"),this.rgwUserService.getQuota(this.user.uid).subscribe(t=>{w().extend(this.user,t)}),this.keys=[],this.user.keys&&this.user.keys.forEach(t=>{this.keys.push({id:this.keys.length+1,type:"S3",username:t.user,ref:t})}),this.user.swift_keys&&this.user.swift_keys.forEach(t=>{this.keys.push({id:this.keys.length+1,type:"Swift",username:t.user,ref:t})}),this.keys=w().sortBy(this.keys,"user"))}updateKeysSelection(t){this.keysSelection=t}showKeyModal(){const t=this.keysSelection.first(),o=this.modalService.show("S3"===t.type?hn:Sn);switch(t.type){case"S3":o.componentInstance.setViewing(),o.componentInstance.setValues(t.ref.user,t.ref.access_key,t.ref.secret_key);break;case"Swift":o.componentInstance.setValues(t.ref.user,t.ref.secret_key)}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E),e.Y36(Qe.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-user-details"]],viewQuery:function(t,o){if(1&t&&(e.Gf(a_,5),e.Gf(l_,5)),2&t){let c;e.iGM(c=e.CRH())&&(o.accessKeyTpl=c.first),e.iGM(c=e.CRH())&&(o.secretKeyTpl=c.first)}},inputs:{selection:"selection"},features:[e.TTD],decls:1,vars:1,consts:function(){let i,t,o,c,F,z,Q,J,j,oe,Te,Se,Oe,be,me,Ge,ye,Le,Ee,Ue,$e,xe,De,ve,ae,Re;return i="\u8A73\u7D30",t="Tenant",o="User ID",c="Username",F="Full name",z="Suspended",Q="System user",J="\u6700\u5927\u30D0\u30B1\u30C3\u30C8\u6570",j="\u30AD\u30FC",oe="Show",Te="Email address",Se="\u30B5\u30D6\u30E6\u30FC\u30B6",Oe="\u6A5F\u80FD",be="MFAs(Id)",me="\u30E6\u30FC\u30B6\u30AF\u30A9\u30FC\u30BF",Ge="Enabled",ye="\u6700\u5927\u30B5\u30A4\u30BA",Le="\u6700\u5927\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u6570",Ee="Unlimited",Ue="Unlimited",$e="\u30D0\u30B1\u30C3\u30C8\u30AF\u30A9\u30FC\u30BF",xe="Enabled",De="\u6700\u5927\u30B5\u30A4\u30BA",ve="\u6700\u5927\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u6570",ae="Unlimited",Re="Unlimited",[[4,"ngIf"],i,[1,"table","table-striped","table-bordered"],[1,"bold","w-25"],t,[1,"w-75"],o,c,[1,"bold"],F,z,Q,J,j,["columnMode","flex","selectionType","multi","forceIdentifier","true",3,"data","columns","updateSelection"],[1,"table-actions"],["dropdown","",1,"btn-group"],["type","button",1,"btn","btn-accent",3,"disabled","click"],[3,"ngClass"],oe,Te,Se,[4,"ngFor","ngForOf"],Oe,be,me,Ge,ye,Le,Ee,Ue,$e,xe,De,ve,ae,Re]},template:function(t,o){1&t&&e.YNc(0,L_,2,1,"ng-container",0),2&t&&e.Q6J("ngIf",o.selection)},dependencies:[g.mk,g.sg,g.O5,et.a,Ae.o,Tn.T,nn.$,__.A,s_.b]}),n})();const Nn=function(){return{exact:!0}};let v_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-user-tabs"]],decls:7,vars:4,consts:function(){let i,t;return i="\u30E6\u30FC\u30B6",t="Roles",[[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/rgw/user","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],i,["routerLink","/rgw/roles","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],t]},template:function(t,o){1&t&&(e.TgZ(0,"ul",0)(1,"li",1)(2,"a",2),e.SDv(3,3),e.qZA()(),e.TgZ(4,"li",1)(5,"a",4),e.SDv(6,5),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("routerLinkActiveOptions",e.DdM(2,Nn)),e.xp6(3),e.Q6J("routerLinkActiveOptions",e.DdM(3,Nn)))},dependencies:[P.rH,P.Od]}),n})();const w_=["userSizeTpl"],W_=["userObjectTpl"];function U_(n,i){if(1&n&&e._UZ(0,"cd-usage-bar",8),2&n){const t=e.oxw().row;e.Q6J("total",t.user_quota.max_size)("used",t.stats.size_actual)}}function $_(n,i){1&n&&e.SDv(0,9)}function x_(n,i){if(1&n&&(e.YNc(0,U_,1,2,"cd-usage-bar",6),e.YNc(1,$_,1,0,"ng-template",null,7,e.W1O)),2&n){const t=i.row,o=e.MAs(2);e.Q6J("ngIf",t.user_quota.max_size>0&&t.user_quota.enabled)("ngIfElse",o)}}function Z_(n,i){if(1&n&&e._UZ(0,"cd-usage-bar",12),2&n){const t=e.oxw().row;e.Q6J("total",t.user_quota.max_objects)("used",t.stats.num_objects)("isBinary",!1)}}function k_(n,i){1&n&&e.SDv(0,13)}function B_(n,i){if(1&n&&(e.YNc(0,Z_,1,3,"cd-usage-bar",10),e.YNc(1,k_,1,0,"ng-template",null,11,e.W1O)),2&n){const t=i.row,o=e.MAs(2);e.Q6J("ngIf",t.user_quota.max_objects>0&&t.user_quota.enabled)("ngIfElse",o)}}let q_=(()=>{class n extends en.o{constructor(t,o,c,F,z,Q){super(Q),this.authStorageService=t,this.rgwUserService=o,this.modalService=c,this.urlBuilder=F,this.actionLabels=z,this.ngZone=Q,this.columns=[],this.users=[],this.selection=new Vt.r}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:"Username",prop:"uid",flexGrow:1},{name:"Tenant",prop:"tenant",flexGrow:1},{name:"Full name",prop:"display_name",flexGrow:1},{name:"Email address",prop:"email",flexGrow:1},{name:"Suspended",prop:"suspended",flexGrow:1,cellClass:"text-center",cellTransformation:On.e.checkIcon},{name:"Max. buckets",prop:"max_buckets",flexGrow:1,cellTransformation:On.e.map,customTemplateConfig:{"-1":"Disabled",0:"Unlimited"}},{name:"Capacity Limit %",prop:"size_usage",cellTemplate:this.userSizeTpl,flexGrow:.8},{name:"Object Limit %",prop:"object_usage",cellTemplate:this.userObjectTpl,flexGrow:.8}];const t=()=>this.selection.first()&&`${encodeURIComponent(this.selection.first().uid)}`;this.tableActions=[{permission:"create",icon:B.P.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE,canBePrimary:z=>!z.hasSelection},{permission:"update",icon:B.P.edit,routerLink:()=>this.urlBuilder.getEdit(t()),name:this.actionLabels.EDIT},{permission:"delete",icon:B.P.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:z=>z.hasMultiSelection}],this.setTableRefreshTimeout()}getUserList(t){this.setTableRefreshTimeout(),this.rgwUserService.list().subscribe(o=>{this.users=o},()=>{t.error()})}updateSelection(t){this.selection=t}deleteAction(){this.modalService.show(tn.M,{itemDescription:this.selection.hasSingleSelection?"user":"users",itemNames:this.selection.selected.map(t=>t.uid),submitActionObservable:()=>new dn.y(t=>{(0,x.D)(this.selection.selected.map(o=>this.rgwUserService.delete(o.uid))).subscribe({error:o=>{t.error(o),this.table.refreshBtn()},complete:()=>{t.complete(),this.table.refreshBtn()}})})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(nt.j),e.Y36(E),e.Y36(Qe.Z),e.Y36(tt.F),e.Y36(T.p4),e.Y36(e.R0b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-user-list"]],viewQuery:function(t,o){if(1&t&&(e.Gf(et.a,7),e.Gf(w_,7),e.Gf(W_,7)),2&t){let c;e.iGM(c=e.CRH())&&(o.table=c.first),e.iGM(c=e.CRH())&&(o.userSizeTpl=c.first),e.iGM(c=e.CRH())&&(o.userObjectTpl=c.first)}},features:[e._Bn([{provide:tt.F,useValue:new tt.F("rgw/user")}]),e.qOj],decls:9,vars:9,consts:function(){let i,t;return i="No Limit",t="No Limit",[["columnMode","flex","selectionType","multiClick","identifier","uid",3,"autoReload","data","columns","hasDetails","status","setExpandedRow","updateSelection","fetchData"],["table",""],[1,"table-actions",3,"permission","selection","tableActions"],["cdTableDetail","",3,"selection"],["userSizeTpl",""],["userObjectTpl",""],[3,"total","used",4,"ngIf","ngIfElse"],["noSizeQuota",""],[3,"total","used"],i,[3,"total","used","isBinary",4,"ngIf","ngIfElse"],["noObjectQuota",""],[3,"total","used","isBinary"],t]},template:function(t,o){1&t&&(e._UZ(0,"cd-rgw-user-tabs"),e.TgZ(1,"cd-table",0,1),e.NdJ("setExpandedRow",function(F){return o.setExpandedRow(F)})("updateSelection",function(F){return o.updateSelection(F)})("fetchData",function(F){return o.getUserList(F)}),e._UZ(3,"cd-table-actions",2)(4,"cd-rgw-user-details",3),e.qZA(),e.YNc(5,x_,3,2,"ng-template",null,4,e.W1O),e.YNc(7,B_,3,2,"ng-template",null,5,e.W1O)),2&t&&(e.xp6(1),e.Q6J("autoReload",!1)("data",o.users)("columns",o.columns)("hasDetails",!0)("status",o.tableStatus),e.xp6(2),e.Q6J("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions),e.xp6(1),e.Q6J("selection",o.expandedRow))},dependencies:[g.O5,pn.O,et.a,on.K,D_,v_]}),n})();var sn=p(35512),An=p(13464),H_=p(46797),ot=p(95596),an=p(80381),Ke=p(95463),Be=p(43186),it=p(97937),rt=p(98961);function X_(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,33),e.qZA())}function K_(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,34),e.qZA())}function Q_(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,35),e.qZA())}function Y_(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,36),e.qZA())}function J_(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,37),e.qZA())}function V_(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,38),e.qZA())}function j_(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,39),e.qZA())}function es(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,40),e.qZA())}function ts(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,41),e.qZA())}function ns(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,42),e.qZA())}let os=(()=>{class n{constructor(t,o,c,F,z,Q,J,j,oe){this.activeModal=t,this.actionLabels=o,this.rgwMultisiteService=c,this.rgwZoneService=F,this.notificationService=z,this.rgwZonegroupService=Q,this.rgwRealmService=J,this.rgwDaemonService=j,this.modalService=oe,this.endpoints=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{2,4}$/,this.ipv4Rgx=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,this.ipv6Rgx=/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i,this.submitAction=new e.vpe,this.multisiteInfo=[],this.createForm()}createForm(){this.multisiteMigrateForm=new Ke.d({realmName:new _.p4(null,{validators:[_.kI.required,X.h.custom("uniqueName",t=>this.realmNames&&-1!==this.zoneNames.indexOf(t))]}),zonegroupName:new _.p4(null,{validators:[_.kI.required,X.h.custom("uniqueName",t=>this.zonegroupNames&&-1!==this.zoneNames.indexOf(t))]}),zoneName:new _.p4(null,{validators:[_.kI.required,X.h.custom("uniqueName",t=>this.zoneNames&&-1!==this.zoneNames.indexOf(t))]}),zone_endpoints:new _.p4([],{validators:[X.h.custom("endpoint",t=>!(w().isEmpty(t)||(t.includes(",")?(t.split(",").forEach(o=>!this.endpoints.test(o)&&!this.ipv4Rgx.test(o)&&!this.ipv6Rgx.test(o)),1):this.endpoints.test(t)||this.ipv4Rgx.test(t)||this.ipv6Rgx.test(t)))),_.kI.required]}),zonegroup_endpoints:new _.p4([],[X.h.custom("endpoint",t=>!(w().isEmpty(t)||(t.includes(",")?(t.split(",").forEach(o=>!this.endpoints.test(o)&&!this.ipv4Rgx.test(o)&&!this.ipv6Rgx.test(o)),1):this.endpoints.test(t)||this.ipv4Rgx.test(t)||this.ipv6Rgx.test(t)))),_.kI.required]),access_key:new _.p4(null),secret_key:new _.p4(null)})}ngOnInit(){this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.realmNames=this.realmList.map(t=>t.name),this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zonegroupNames=this.zonegroupList.map(t=>t.name),this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zoneNames=this.zoneList.map(t=>t.name)}submit(){const t=this.multisiteMigrateForm.value;this.realm=new Be.L6,this.realm.name=t.realmName,this.zonegroup=new Be.iG,this.zonegroup.name=t.zonegroupName,this.zonegroup.endpoints=t.zonegroup_endpoints,this.zone=new Be.jb,this.zone.name=t.zoneName,this.zone.endpoints=t.zone_endpoints,this.zone.system_key=new Be.VY,this.zone.system_key.access_key=t.access_key,this.zone.system_key.secret_key=t.secret_key,this.rgwMultisiteService.migrate(this.realm,this.zonegroup,this.zone).subscribe(()=>{this.notificationService.show(I.k.success,"Migration done successfully"),this.submitAction.emit(),this.activeModal.close()},()=>{this.notificationService.show(I.k.error,"Migration failed")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.Kz),e.Y36(T.p4),e.Y36(an.o),e.Y36(it.g),e.Y36(ne.g),e.Y36(rt.K),e.Y36(ot.y),e.Y36(l.b),e.Y36(Qe.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-migrate"]],outputs:{submitAction:"submitAction"},decls:68,vars:14,consts:function(){let i,t,o,c,F,z,Q,J,j,oe,Te,Se,Oe,be,me,Ge,ye,Le;return i="Migrate Single Site to Multi-site " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + "Migrate from a single-site deployment with a default zone group and zone to a multi-site system" + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",t="Realm Name",o="Rename default zone group",c="Zone group Endpoints ",F="Rename default zone",z="Zone Endpoints ",Q="S3 access key " + "\ufffd#47\ufffd" + "" + "\ufffd#48\ufffd" + "To see or copy your S3 access key, go to " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Object Gateway > Users" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + " and click on your user name. In " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Keys" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + ", click " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Show" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + ". View the access key by clicking Show and copy the key by clicking " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Copy to Clipboard" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + "." + "\ufffd/#48\ufffd" + "" + "\ufffd/#47\ufffd" + "",Q=e.Zx4(Q),J="S3 secret key " + "\ufffd#58\ufffd" + "" + "\ufffd#59\ufffd" + "To see or copy your S3 access key, go to " + "[\ufffd#60\ufffd|\ufffd#61\ufffd|\ufffd#62\ufffd|\ufffd#63\ufffd]" + "Object Gateway > Users" + "[\ufffd/#60\ufffd|\ufffd/#61\ufffd|\ufffd/#62\ufffd|\ufffd/#63\ufffd]" + " and click on your user name. In " + "[\ufffd#60\ufffd|\ufffd#61\ufffd|\ufffd#62\ufffd|\ufffd#63\ufffd]" + "Keys" + "[\ufffd/#60\ufffd|\ufffd/#61\ufffd|\ufffd/#62\ufffd|\ufffd/#63\ufffd]" + ", click " + "[\ufffd#60\ufffd|\ufffd#61\ufffd|\ufffd#62\ufffd|\ufffd#63\ufffd]" + "Show" + "[\ufffd/#60\ufffd|\ufffd/#61\ufffd|\ufffd/#62\ufffd|\ufffd/#63\ufffd]" + ". View the secret key by clicking Show and copy the key by clicking " + "[\ufffd#60\ufffd|\ufffd#61\ufffd|\ufffd#62\ufffd|\ufffd#63\ufffd]" + "Copy to Clipboard" + "[\ufffd/#60\ufffd|\ufffd/#61\ufffd|\ufffd/#62\ufffd|\ufffd/#63\ufffd]" + "." + "\ufffd/#59\ufffd" + "" + "\ufffd/#58\ufffd" + "",J=e.Zx4(J),j="This field is required.",oe="The chosen realm name is already in use.",Te="This field is required.",Se="The chosen zone group name is already in use.",Oe="This field is required.",be="Please enter a valid IP address.",me="This field is required.",Ge="The chosen zone name is already in use.",ye="This field is required.",Le="Please enter a valid IP address.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","multisiteMigrateForm","novalidate","",3,"formGroup"],["formDir","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","realmName",1,"cd-col-form-label","required"],t,[1,"cd-col-form-input"],["type","text","placeholder","Realm name...","id","realmName","name","realmName","formControlName","realmName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","zonegroupName",1,"cd-col-form-label","required"],o,["type","text","placeholder","Zone group name...","id","zonegroupName","name","zonegroupName","formControlName","zonegroupName",1,"form-control"],["for","zonegroup_endpoints",1,"cd-col-form-label","required"],c,["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zonegroup_endpoints","name","zonegroup_endpoints","formControlName","zonegroup_endpoints",1,"form-control"],["for","zoneName",1,"cd-col-form-label","required"],F,["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],["for","zone_endpoints",1,"cd-col-form-label","required"],z,["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zone_endpoints","name","zone_endpoints","formControlName","zone_endpoints",1,"form-control"],["for","access_key",1,"cd-col-form-label","required"],Q,["type","text","placeholder","e.g.","id","access_key","name","access_key","formControlName","access_key",1,"form-control"],J,["type","text","placeholder","e.g.","id","secret_key","name","secret_key","formControlName","secret_key",1,"form-control"],[1,"modal-footer"],[3,"submitText","form","submitActionEvent"],[1,"invalid-feedback"],j,oe,Te,Se,Oe,be,me,Ge,ye,Le]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.tHW(2,2),e.TgZ(3,"cd-helper"),e._UZ(4,"span"),e.qZA(),e.N_p(),e.BQk(),e.ynx(5,3),e.TgZ(6,"form",4,5)(8,"div",6)(9,"div",7)(10,"label",8),e.SDv(11,9),e.qZA(),e.TgZ(12,"div",10),e._UZ(13,"input",11),e.YNc(14,X_,2,0,"span",12),e.YNc(15,K_,2,0,"span",12),e.qZA()(),e.TgZ(16,"div",7)(17,"label",13),e.SDv(18,14),e.qZA(),e.TgZ(19,"div",10),e._UZ(20,"input",15),e.YNc(21,Q_,2,0,"span",12),e.YNc(22,Y_,2,0,"span",12),e.qZA()(),e.TgZ(23,"div",7)(24,"label",16),e.SDv(25,17),e.qZA(),e.TgZ(26,"div",10),e._UZ(27,"input",18),e.YNc(28,J_,2,0,"span",12),e.YNc(29,V_,2,0,"span",12),e.qZA()(),e.TgZ(30,"div",7)(31,"label",19),e.SDv(32,20),e.qZA(),e.TgZ(33,"div",10),e._UZ(34,"input",21),e.YNc(35,j_,2,0,"span",12),e.YNc(36,es,2,0,"span",12),e.qZA()(),e.TgZ(37,"div",7)(38,"label",22),e.SDv(39,23),e.qZA(),e.TgZ(40,"div",10),e._UZ(41,"input",24),e.YNc(42,ts,2,0,"span",12),e.YNc(43,ns,2,0,"span",12),e.qZA()(),e.TgZ(44,"div",7)(45,"label",25),e.tHW(46,26),e.TgZ(47,"cd-helper")(48,"span"),e._UZ(49,"b")(50,"b")(51,"b")(52,"b"),e.qZA()(),e.N_p(),e.qZA(),e.TgZ(53,"div",10),e._UZ(54,"input",27),e.qZA()(),e.TgZ(55,"div",7)(56,"label",25),e.tHW(57,28),e.TgZ(58,"cd-helper")(59,"span"),e._UZ(60,"b")(61,"b")(62,"b")(63,"b"),e.qZA()(),e.N_p(),e.qZA(),e.TgZ(64,"div",10),e._UZ(65,"input",29),e.qZA()()(),e.TgZ(66,"div",30)(67,"cd-form-button-panel",31),e.NdJ("submitActionEvent",function(){return o.submit()}),e.qZA()()(),e.BQk(),e.qZA()),2&t){const c=e.MAs(7);e.Q6J("modalRef",o.activeModal),e.xp6(6),e.Q6J("formGroup",o.multisiteMigrateForm),e.xp6(8),e.Q6J("ngIf",o.multisiteMigrateForm.showError("realmName",c,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteMigrateForm.showError("realmName",c,"uniqueName")),e.xp6(6),e.Q6J("ngIf",o.multisiteMigrateForm.showError("zonegroupName",c,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteMigrateForm.showError("zonegroupName",c,"uniqueName")),e.xp6(6),e.Q6J("ngIf",o.multisiteMigrateForm.showError("zonegroup_endpoints",c,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteMigrateForm.showError("zonegroup_endpoints",c,"endpoint")),e.xp6(6),e.Q6J("ngIf",o.multisiteMigrateForm.showError("zoneName",c,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteMigrateForm.showError("zoneName",c,"uniqueName")),e.xp6(6),e.Q6J("ngIf",o.multisiteMigrateForm.showError("zone_endpoints",c,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteMigrateForm.showError("zone_endpoints",c,"endpoint")),e.xp6(24),e.Q6J("submitText",o.actionLabels.MIGRATE+" to Multi-site")("form",o.multisiteMigrateForm)}},dependencies:[g.O5,pe.S,he.z,we.p,Ae.o,Pe.b,We.P,C.V,_._Y,_.Fj,_.JJ,_.JL,_.sg,_.u]}),n})();var Pn=p(80842);function is(n,i){if(1&n&&(e.TgZ(0,"strong",21),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Oqu(t)}}function rs(n,i){1&n&&(e.TgZ(0,"div",22)(1,"cd-alert-panel",23),e.SDv(2,24),e.qZA()())}function _s(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"label",10),e.tHW(2,11),e._UZ(3,"strong"),e.N_p(),e.qZA(),e.TgZ(4,"label",12),e.SDv(5,13),e.qZA(),e.YNc(6,is,2,1,"strong",14),e.TgZ(7,"div",15)(8,"div",16)(9,"input",17),e.NdJ("change",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.showDangerText())}),e.qZA(),e.TgZ(10,"label",18),e.SDv(11,19),e.qZA()(),e.YNc(12,rs,3,0,"div",20),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(3),e.pQV(null==t.zone?null:t.zone.name),e.QtT(2),e.xp6(3),e.Q6J("ngForOf",t.includedPools),e.xp6(6),e.Q6J("ngIf",t.displayText)}}let ss=(()=>{class n{constructor(t,o,c,F,z){this.activeModal=t,this.actionLabels=o,this.notificationService=c,this.rgwZoneService=F,this.poolService=z,this.displayText=!1,this.includedPools=new Set,this.createForm()}ngOnInit(){this.zoneData$=this.rgwZoneService.get(this.zone),this.poolList$=this.poolService.getList()}ngAfterViewInit(){this.updateIncludedPools()}createForm(){this.zoneForm=new Ke.d({deletePools:new _.p4(!1)})}submit(){this.rgwZoneService.delete(this.zone.name,this.zoneForm.value.deletePools,this.includedPools,this.zone.parent).subscribe(()=>{this.notificationService.show(I.k.success,"Zone: '" + this.zone.name + "' deleted successfully"),this.activeModal.close()},()=>{this.zoneForm.setErrors({cdSubmitButton:!0})})}showDangerText(){this.displayText=!this.displayText}updateIncludedPools(){!this.zoneData$||!this.poolList$||this.zoneData$.subscribe(t=>{this.poolList$.subscribe(o=>{for(const c of o)for(const F of Object.values(t))if("string"==typeof F&&F.includes(c.pool_name))this.includedPools.add(c.pool_name);else if(Array.isArray(F)&&F[0].val)for(const z of F){const Q=z.val;Q.storage_classes.STANDARD.data_pool===c.pool_name&&this.includedPools.add(Q.storage_classes.STANDARD.data_pool),Q.data_extra_pool===c.pool_name&&this.includedPools.add(Q.data_extra_pool),Q.index_pool===c.pool_name&&this.includedPools.add(Q.index_pool)}})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.Kz),e.Y36(T.p4),e.Y36(ne.g),e.Y36(it.g),e.Y36(Pn.q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-zone-deletion-form"]],decls:12,vars:6,consts:function(){let i,t,o,c,F,z;return i="Delete Zone",t=" This will delete your " + "\ufffd#8\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#8\ufffd" + " Zone. ",o=" Do you want to delete the associated pools with the " + "\ufffd#3\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#3\ufffd" + " Zone?",c=" This will delete the following pools and any data stored in these pools:",F="Yes, I want to delete the pools.",z=" This will delete all the data in the pools! ",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","zoneForm","novalidate","",3,"formGroup"],[1,"modal-body","ms-4"],t,[4,"ngIf"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],[1,"mt-3"],o,[1,"mb-4"],c,["class","block",4,"ngFor","ngForOf"],[1,"form-group"],[1,"custom-control","custom-checkbox","mt-2"],["type","checkbox","name","deletePools","id","deletePools","formControlName","deletePools",1,"custom-control-input",3,"change"],["for","deletePools",1,"custom-control-label"],F,["class","me-4",4,"ngIf"],[1,"block"],[1,"me-4"],["type","danger"],z]},template:function(t,o){1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.BQk(),e.ynx(3,3),e.TgZ(4,"form",4)(5,"div",5)(6,"label"),e.tHW(7,6),e._UZ(8,"strong"),e.N_p(),e.qZA(),e.YNc(9,_s,13,3,"ng-container",7),e.qZA(),e.TgZ(10,"div",8)(11,"cd-form-button-panel",9),e.NdJ("submitActionEvent",function(){return o.submit()}),e.qZA()()(),e.BQk(),e.qZA()),2&t&&(e.Q6J("modalRef",o.activeModal),e.xp6(4),e.Q6J("formGroup",o.zoneForm),e.xp6(4),e.pQV(null==o.zone?null:o.zone.name),e.QtT(7),e.xp6(1),e.Q6J("ngIf",o.includedPools.size),e.xp6(2),e.Q6J("form",o.zoneForm)("submitText",o.actionLabels.DELETE))},dependencies:[g.sg,g.O5,he.z,Ve.G,we.p,Ae.o,Pe.b,We.P,C.V,_._Y,_.Wl,_.JJ,_.JL,_.sg,_.u],styles:[".block[_ngcontent-%COMP%]{display:block}#scroll[_ngcontent-%COMP%]{height:100%;max-height:10rem;overflow:auto}"]}),n})();function as(n,i){1&n&&(e.ynx(0),e.TgZ(1,"label"),e.SDv(2,21),e.qZA(),e.BQk())}function ls(n,i){if(1&n&&(e.TgZ(0,"strong",22),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Oqu(t)}}function cs(n,i){if(1&n&&(e.TgZ(0,"strong",22),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Oqu(t)}}function us(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"strong",13),e._uU(2,"Pools:"),e.qZA(),e.TgZ(3,"div",23),e.YNc(4,cs,2,1,"strong",15),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.includedPools)}}function ds(n,i){1&n&&(e.ynx(0),e.TgZ(1,"label",24),e.SDv(2,25),e.qZA(),e.BQk())}function fs(n,i){1&n&&(e.TgZ(0,"div",26)(1,"cd-alert-panel",27),e.SDv(2,28),e.qZA()())}function ps(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"label",11),e.tHW(2,12),e._UZ(3,"strong"),e.N_p(),e.qZA(),e.YNc(4,as,3,0,"ng-container",7),e.TgZ(5,"strong",13),e._uU(6,"Zones:"),e.qZA(),e.TgZ(7,"div",14),e.YNc(8,ls,2,1,"strong",15),e.qZA(),e.YNc(9,us,5,1,"ng-container",7),e.TgZ(10,"div",16)(11,"div",17)(12,"input",18),e.NdJ("change",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.showDangerText())}),e.qZA(),e.YNc(13,ds,3,0,"ng-container",19),e.qZA(),e.YNc(14,fs,3,0,"div",20),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(),o=e.MAs(13);e.xp6(3),e.pQV(null==t.zonegroup?null:t.zonegroup.name),e.QtT(2),e.xp6(1),e.Q6J("ngIf",t.includedPools.size>0),e.xp6(4),e.Q6J("ngForOf",t.zonesList),e.xp6(1),e.Q6J("ngIf",t.includedPools.size>0),e.xp6(4),e.Q6J("ngIf",t.includedPools.size>0)("ngIfElse",o),e.xp6(1),e.Q6J("ngIf",t.displayText)}}function gs(n,i){1&n&&(e.TgZ(0,"label",24),e.SDv(1,29),e.qZA())}let Ts=(()=>{class n{constructor(t,o,c,F,z,Q){this.activeModal=t,this.actionLabels=o,this.notificationService=c,this.rgwZonegroupService=F,this.poolService=z,this.rgwZoneService=Q,this.zonesPools=[],this.zonesList=[],this.displayText=!1,this.includedPools=new Set,this.createForm()}ngOnInit(){this.zonegroupData$=this.rgwZonegroupService.get(this.zonegroup),this.poolList$=this.poolService.getList()}ngAfterViewInit(){this.updateIncludedPools()}createForm(){this.zonegroupForm=new Ke.d({deletePools:new _.p4(!1)})}submit(){this.rgwZonegroupService.delete(this.zonegroup.name,this.zonegroupForm.value.deletePools,this.includedPools).subscribe(()=>{this.notificationService.show(I.k.success,"Zone: '" + this.zonegroup.name + "' deleted successfully"),this.activeModal.close()})}showDangerText(){this.includedPools.size>0&&(this.displayText=!this.displayText)}updateIncludedPools(){!this.zonegroupData$||!this.poolList$||this.zonegroupData$.subscribe(t=>{for(const o of t.zones)this.zonesList.push(o.name),this.rgwZoneService.get(o).subscribe(c=>{this.poolList$.subscribe(F=>{for(const z of Object.values(c))for(const Q of F)if("string"==typeof z&&z.includes(Q.pool_name))this.includedPools.add(Q.pool_name);else if(Array.isArray(z)&&z[0].val)for(const J of z){const j=J.val;j.storage_classes.STANDARD.data_pool===Q.pool_name&&this.includedPools.add(j.storage_classes.STANDARD.data_pool),j.data_extra_pool===Q.pool_name&&this.includedPools.add(j.data_extra_pool),j.index_pool===Q.pool_name&&this.includedPools.add(j.index_pool)}})})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.Kz),e.Y36(T.p4),e.Y36(ne.g),e.Y36(rt.K),e.Y36(Pn.q),e.Y36(it.g))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-zonegroup-deletion-form"]],decls:14,vars:6,consts:function(){let i,t,o,c,F,z,Q;return i="Delete Zone Group",t=" This will delete your " + "\ufffd#8\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#8\ufffd" + " Zone Group. ",o=" Do you want to delete the associated zones and pools with the " + "\ufffd#3\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#3\ufffd" + " Zone Group?",c=" This will delete the following:",F="Yes, I want to delete the zones and their pools.",z=" This will delete all the data in the pools! ",Q="Yes, I want to delete the zones.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","zonegroupForm","novalidate","",3,"formGroup"],[1,"modal-body","ms-4"],t,[4,"ngIf"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],["noPoolsConfirmation",""],[1,"mt-3"],o,[1,"mt-3","mb-2","h5","block"],["id","scroll"],["class","block",4,"ngFor","ngForOf"],[1,"form-group"],[1,"custom-control","custom-checkbox","mt-2"],["type","checkbox","name","deletePools","id","deletePools","formControlName","deletePools",1,"custom-control-input",3,"change"],[4,"ngIf","ngIfElse"],["class","me-4",4,"ngIf"],c,[1,"block"],["id","scroll",1,"mb-2"],["for","deletePools",1,"custom-control-label"],F,[1,"me-4"],["type","danger"],z,Q]},template:function(t,o){1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.BQk(),e.ynx(3,3),e.TgZ(4,"form",4)(5,"div",5)(6,"label"),e.tHW(7,6),e._UZ(8,"strong"),e.N_p(),e.qZA(),e.YNc(9,ps,15,7,"ng-container",7),e.qZA(),e.TgZ(10,"div",8)(11,"cd-form-button-panel",9),e.NdJ("submitActionEvent",function(){return o.submit()}),e.qZA()()(),e.BQk(),e.qZA(),e.YNc(12,gs,2,0,"ng-template",null,10,e.W1O)),2&t&&(e.Q6J("modalRef",o.activeModal),e.xp6(4),e.Q6J("formGroup",o.zonegroupForm),e.xp6(4),e.pQV(null==o.zonegroup?null:o.zonegroup.name),e.QtT(7),e.xp6(1),e.Q6J("ngIf",o.zonesList.length>0),e.xp6(2),e.Q6J("form",o.zonegroupForm)("submitText",o.actionLabels.DELETE))},dependencies:[g.sg,g.O5,he.z,Ve.G,we.p,Ae.o,Pe.b,We.P,C.V,_._Y,_.Wl,_.JJ,_.JL,_.sg,_.u],styles:[".block[_ngcontent-%COMP%]{display:block}#scroll[_ngcontent-%COMP%]{height:100%;max-height:10rem;overflow:auto}"]}),n})();const Es=function(n,i,t){return[n,i,t]};function Rs(n,i){if(1&n&&(e.TgZ(0,"span",10),e._UZ(1,"i",11),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.kEZ(1,Es,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function ms(n,i){if(1&n&&(e.tHW(0,16,1),e.TgZ(1,"div"),e._UZ(2,"b"),e.qZA(),e.N_p()),2&n){const t=i.$implicit;e.xp6(2),e.pQV(t.realm)(t.token),e.QtT(0)}}function hs(n,i){if(1&n&&(e.TgZ(0,"cd-alert-panel",15),e.tHW(1,16),e.YNc(2,ms,3,2,"div",14),e.N_p(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.realms)}}function Ms(n,i){1&n&&e._UZ(0,"hr")}function Ss(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",17)(2,"label",18),e.SDv(3,19),e.qZA(),e.TgZ(4,"div",20),e._UZ(5,"input",21),e.qZA()(),e.TgZ(6,"div",17)(7,"label",22),e.SDv(8,23),e.qZA(),e.TgZ(9,"div",20),e._UZ(10,"input",24)(11,"cd-copy-2-clipboard-button",25),e.qZA(),e.YNc(12,Ms,1,0,"hr",26),e.qZA()()),2&n){const t=i.$implicit,o=e.oxw(2);e.xp6(5),e.s9C("value",t.realm),e.xp6(5),e.s9C("value",t.token),e.xp6(1),e.s9C("source",t.token),e.Q6J("byId",!1),e.xp6(1),e.Q6J("ngIf",o.realms.length>1)}}function Cs(n,i){if(1&n&&(e.TgZ(0,"div",12),e.YNc(1,hs,3,1,"cd-alert-panel",13),e.YNc(2,Ss,13,5,"div",14),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.tokenValid),e.xp6(1),e.Q6J("ngForOf",t.realms)}}let Fs=(()=>{class n{constructor(t,o,c,F,z){this.activeModal=t,this.rgwRealmService=o,this.actionLabels=c,this.notificationService=F,this.changeDetectorRef=z,this.tokenValid=!1,this.loading=!0,this.icons=B.P,this.createForm()}createForm(){this.exportTokenForm=new Ke.d({})}onSubmit(){this.activeModal.close()}ngOnInit(){this.rgwRealmService.getRealmTokens().subscribe(t=>{this.loading=!1,this.realms=t;var o=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$");this.realms.forEach(c=>{this.tokenValid=!!o.test(c.token)})})}ngAfterViewChecked(){this.changeDetectorRef.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.Kz),e.Y36(ot.y),e.Y36(T.p4),e.Y36(ne.g),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-export"]],decls:10,vars:4,consts:function(){let i,t,o,c;return i="Export Multi-site Realm Token",t="" + "\ufffd*2:1\ufffd\ufffd#1:1\ufffd" + "" + "\ufffd#2:1\ufffd" + "" + "\ufffd0:1\ufffd" + "" + "\ufffd/#2:1\ufffd" + " - " + "\ufffd1:1\ufffd" + " " + "\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd" + "",o="Realm Name ",c="Token ",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","exportTokenForm",3,"formGroup"],["frm","ngForm"],["class","d-flex justify-content-center",4,"ngIf"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["aria-label","Close",1,"m-2","float-end",3,"backAction"],[1,"d-flex","justify-content-center"],[3,"ngClass"],[1,"modal-body"],["type","warning","class","mx-3",4,"ngIf"],[4,"ngFor","ngForOf"],["type","warning",1,"mx-3"],t,[1,"form-group","row"],["for","realmName",1,"cd-col-form-label"],o,[1,"cd-col-form-input"],["id","realmName","name","realmName","type","text","readonly","",3,"value"],["for","token",1,"cd-col-form-label"],c,["id","realmToken","name","realmToken","type","text","readonly","",1,"me-2","mb-4",3,"value"],[3,"source","byId"],[4,"ngIf"]]},template:function(t,o){1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.BQk(),e.ynx(3,3),e.TgZ(4,"form",4,5),e.YNc(6,Rs,2,5,"span",6),e.YNc(7,Cs,3,2,"div",7),e.TgZ(8,"div",8)(9,"cd-back-button",9),e.NdJ("backAction",function(){return o.activeModal.close()}),e.qZA()()(),e.BQk(),e.qZA()),2&t&&(e.Q6J("modalRef",o.activeModal),e.xp6(4),e.Q6J("formGroup",o.exportTokenForm),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading))},dependencies:[g.mk,g.sg,g.O5,Mn.W,he.z,Ve.G,at.s,Ae.o,We.P,C.V,_._Y,_.JL,_.sg]}),n})();var Os=p(7022),Ns=p(22120),As=p(48168),Ps=p(14745),bn=p(79765),bs=p(66682),Is=p(54395),Gs=p(87519),ys=p(45435),Ls=p(88002),In=p(60192);function Ds(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,30),e.qZA())}function vs(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,31),e.qZA())}function ws(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,32),e.qZA())}function Ws(n,i){1&n&&(e.TgZ(0,"div",9)(1,"label",33),e.SDv(2,34),e.qZA(),e.TgZ(3,"div",12)(4,"select",35)(5,"option",36),e.SDv(6,37),e.qZA(),e.TgZ(7,"option",38),e.SDv(8,39),e.qZA()()()())}function Us(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,43),e.qZA())}function $s(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",9)(1,"label",40),e.SDv(2,41),e.qZA(),e.TgZ(3,"div",12)(4,"input",42),e.NdJ("focus",function(c){e.CHM(t);const F=e.oxw();return e.KtG(F.labelFocus.next(c.target.value))})("click",function(c){e.CHM(t);const F=e.oxw();return e.KtG(F.labelClick.next(c.target.value))}),e.qZA(),e.YNc(5,Us,2,0,"span",14),e.qZA()()}if(2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(4),e.Q6J("ngbTypeahead",t.searchLabels),e.xp6(1),e.Q6J("ngIf",t.importTokenForm.showError("label",o,"required"))}}function xs(n,i){if(1&n&&(e.TgZ(0,"div",9)(1,"label",44),e.SDv(2,45),e.qZA(),e.TgZ(3,"div",12),e._UZ(4,"cd-select-badges",46),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("data",t.importTokenForm.controls.hosts.value)("options",t.hosts.options)("messages",t.hosts.messages)}}function Zs(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,51),e.qZA())}function ks(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,52),e.qZA())}function Bs(n,i){if(1&n&&(e.TgZ(0,"div",9)(1,"label",47)(2,"span"),e.SDv(3,48),e.qZA(),e.TgZ(4,"cd-helper"),e.SDv(5,49),e.qZA()(),e.TgZ(6,"div",12),e._UZ(7,"input",50),e.YNc(8,Zs,2,0,"span",14),e.YNc(9,ks,2,0,"span",14),e.qZA()()),2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(8),e.Q6J("ngIf",t.importTokenForm.showError("count",o,"min")),e.xp6(1),e.Q6J("ngIf",t.importTokenForm.showError("count",o,"pattern"))}}function zs(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,56),e.qZA())}function qs(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,57),e.qZA())}function Hs(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,58),e.qZA())}function Xs(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"div",9)(2,"label",53),e.SDv(3,54),e.qZA(),e.TgZ(4,"div",12),e._UZ(5,"input",55),e.YNc(6,zs,2,0,"span",14),e.YNc(7,qs,2,0,"span",14),e.YNc(8,Hs,2,0,"span",14),e.qZA()(),e.BQk()),2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(6),e.Q6J("ngIf",t.importTokenForm.showError("rgw_frontend_port",o,"pattern")),e.xp6(1),e.Q6J("ngIf",t.importTokenForm.showError("rgw_frontend_port",o,"min")),e.xp6(1),e.Q6J("ngIf",t.importTokenForm.showError("rgw_frontend_port",o,"max"))}}let Ks=(()=>{class n{constructor(t,o,c,F,z){this.activeModal=t,this.hostService=o,this.rgwRealmService=c,this.actionLabels=F,this.notificationService=z,this.endpoints=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{2,4}$/,this.ipv4Rgx=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,this.ipv6Rgx=/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i,this.multisiteInfo=[],this.zoneList=[],this.labelClick=new bn.xQ,this.labelFocus=new bn.xQ,this.searchLabels=Q=>(0,bs.T)(Q.pipe((0,Is.b)(200),(0,Gs.x)()),this.labelFocus,this.labelClick.pipe((0,ys.h)(()=>!this.typeahead.isPopupOpen()))).pipe((0,Ls.U)(J=>this.labels.filter(j=>j.toLowerCase().indexOf(J.toLowerCase())>-1).slice(0,10))),this.hosts={options:[],messages:new Os.a({empty:"There are no hosts.",filter:"Filter hosts"})},this.createForm()}ngOnInit(){this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zoneNames=this.zoneList.map(o=>o.name);const t=new As.E(()=>{});this.hostService.list(t.toParams(),"false").subscribe(o=>{const c=[];w().forEach(o,F=>{if(w().get(F,"sources.orchestrator",!1)){const z=new Ps.$(!1,w().get(F,"hostname"),"");c.push(z)}}),this.hosts.options=[...c]}),this.hostService.getLabels().subscribe(o=>{this.labels=o})}createForm(){this.importTokenForm=new Ke.d({realmToken:new _.NI("",{validators:[_.kI.required]}),zoneName:new _.NI(null,{validators:[_.kI.required,X.h.custom("uniqueName",t=>this.zoneNames&&-1!==this.zoneNames.indexOf(t))]}),rgw_frontend_port:new _.NI(null,{validators:[_.kI.required,_.kI.pattern("^[0-9]*$")]}),placement:new _.NI("hosts"),label:new _.NI(null,[X.h.requiredIf({placement:"label",unmanaged:!1})]),hosts:new _.NI([]),count:new _.NI(null,[X.h.number(!1)]),unmanaged:new _.NI(!1)})}onSubmit(){const t=this.importTokenForm.value,o={placement:{}};if(!t.unmanaged){switch(t.placement){case"hosts":t.hosts.length>0&&(o.placement.hosts=t.hosts);break;case"label":o.placement.label=t.label}w().isNumber(t.count)&&t.count>0&&(o.placement.count=t.count)}this.rgwRealmService.importRealmToken(t.realmToken,t.zoneName,t.rgw_frontend_port,o).subscribe(()=>{this.notificationService.show(I.k.success,"Realm token import successfull"),this.activeModal.close()},()=>{this.importTokenForm.setErrors({cdSubmitButton:!0})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.Kz),e.Y36(Ns.x),e.Y36(ot.y),e.Y36(T.p4),e.Y36(ne.g))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-import"]],viewQuery:function(t,o){if(1&t&&e.Gf(v.dR,5),2&t){let c;e.iGM(c=e.CRH())&&(o.typeahead=c.first)}},decls:47,vars:12,consts:function(){let i,t,o,c,F,z,Q,J,j,oe,Te,Se,Oe,be,me,Ge,ye,Le,Ee,Ue,$e,xe,De,ve;return i="Import Multi-site Token",t="Zone Details",o="Token ",c="Secondary Zone Name",F="Service Details",z="Unmanaged",Q="If set to true, the orchestrator will not start nor stop any daemon associated with this service. Placement and all other properties will be ignored.",J="This field is required.",j="This field is required.",oe="The chosen zone name is already in use.",Te="Placement",Se="\u30DB\u30B9\u30C8",Oe="Label",be="Label",me="This field is required.",Ge="\u30DB\u30B9\u30C8",ye="Count",Le="Only that number of daemons will be created.",Ee="The value must be at least 1.",Ue="\u6570\u5B57\u3092\u5165\u529B\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002",$e="Port",xe="\u6570\u5B57\u3092\u5165\u529B\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002",De="The value must be at least 1.",ve="The value cannot exceed 65535.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","importTokenForm",3,"formGroup"],["frm","ngForm"],[1,"modal-body"],["type","info","spacingClass","mb-3"],t,[1,"form-group","row"],["for","realmToken",1,"cd-col-form-label","required"],o,[1,"cd-col-form-input"],["id","realmToken","name","realmToken","type","text","formControlName","realmToken",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","zoneName",1,"cd-col-form-label","required"],c,["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],F,[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","unmanaged","type","checkbox","formControlName","unmanaged",1,"custom-control-input"],["for","unmanaged",1,"custom-control-label"],z,Q,["class","form-group row",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],[3,"submitText","form","submitActionEvent"],[1,"invalid-feedback"],J,j,oe,["for","placement",1,"cd-col-form-label"],Te,["id","placement","formControlName","placement",1,"form-select"],["value","hosts"],Se,["value","label"],Oe,["for","label",1,"cd-col-form-label"],be,["id","label","type","text","formControlName","label",1,"form-control",3,"ngbTypeahead","focus","click"],me,["for","hosts",1,"cd-col-form-label"],Ge,["id","hosts",3,"data","options","messages"],["for","count",1,"cd-col-form-label"],ye,Le,["id","count","type","number","formControlName","count","min","1",1,"form-control"],Ee,Ue,["for","rgw_frontend_port",1,"cd-col-form-label"],$e,["id","rgw_frontend_port","type","number","formControlName","rgw_frontend_port","min","1","max","65535",1,"form-control"],xe,De,ve]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.BQk(),e.ynx(3,3),e.TgZ(4,"form",4,5)(6,"div",6)(7,"cd-alert-panel",7)(8,"ul")(9,"li"),e._uU(10,"This feature allows you to configure a connection between your primary and secondary Ceph clusters for data replication. By importing a token, you establish a link between the clusters, enabling data synchronization."),e.qZA(),e.TgZ(11,"li"),e._uU(12,"To obtain the token, generate it from your primary Ceph cluster. This token includes encoded information about the primary cluster's endpoint, access key, and secret key."),e.qZA(),e.TgZ(13,"li"),e._uU(14,"The secondary zone represents the destination cluster where your data will be replicated."),e.qZA()()(),e.TgZ(15,"legend"),e.SDv(16,8),e.qZA(),e.TgZ(17,"div",9)(18,"label",10),e.SDv(19,11),e.qZA(),e.TgZ(20,"div",12),e._UZ(21,"input",13),e.YNc(22,Ds,2,0,"span",14),e.qZA()(),e.TgZ(23,"div",9)(24,"label",15),e.SDv(25,16),e.qZA(),e.TgZ(26,"div",12),e._UZ(27,"input",17),e.YNc(28,vs,2,0,"span",14),e.YNc(29,ws,2,0,"span",14),e.qZA()(),e.TgZ(30,"legend"),e.SDv(31,18),e.qZA(),e.TgZ(32,"div",9)(33,"div",19)(34,"div",20),e._UZ(35,"input",21),e.TgZ(36,"label",22),e.SDv(37,23),e.qZA(),e.TgZ(38,"cd-helper"),e.SDv(39,24),e.qZA()()()(),e.YNc(40,Ws,9,0,"div",25),e.YNc(41,$s,6,2,"div",25),e.YNc(42,xs,5,3,"div",25),e.YNc(43,Bs,10,2,"div",25),e.YNc(44,Xs,9,3,"ng-container",26),e.qZA(),e.TgZ(45,"div",27)(46,"cd-form-button-panel",28),e.NdJ("submitActionEvent",function(){return o.onSubmit()}),e.qZA()()(),e.BQk(),e.qZA()),2&t){const c=e.MAs(5);e.Q6J("modalRef",o.activeModal),e.xp6(4),e.Q6J("formGroup",o.importTokenForm),e.xp6(18),e.Q6J("ngIf",o.importTokenForm.showError("realmToken",c,"required")),e.xp6(6),e.Q6J("ngIf",o.importTokenForm.showError("zoneName",c,"required")),e.xp6(1),e.Q6J("ngIf",o.importTokenForm.showError("zoneName",c,"uniqueName")),e.xp6(11),e.Q6J("ngIf",!o.importTokenForm.controls.unmanaged.value),e.xp6(1),e.Q6J("ngIf",!o.importTokenForm.controls.unmanaged.value&&"label"===o.importTokenForm.controls.placement.value),e.xp6(1),e.Q6J("ngIf",!o.importTokenForm.controls.unmanaged.value&&"hosts"===o.importTokenForm.controls.placement.value),e.xp6(1),e.Q6J("ngIf",!o.importTokenForm.controls.unmanaged.value),e.xp6(1),e.Q6J("ngIf",!o.importTokenForm.controls.unmanaged.value),e.xp6(2),e.Q6J("submitText",o.actionLabels.IMPORT)("form",o.importTokenForm)}},dependencies:[g.O5,pe.S,In.m,he.z,Ve.G,we.p,Ae.o,Pe.b,We.P,C.V,_._Y,_.YN,_.Kr,_.Fj,_.wV,_.Wl,_.EJ,_.JJ,_.JL,_.qQ,_.Fd,_.sg,_.u]}),n})();var Qs=p(72625);function Ys(n,i){1&n&&(e.TgZ(0,"span",20),e.SDv(1,21),e.qZA())}function Js(n,i){1&n&&(e.TgZ(0,"span",20),e.SDv(1,22),e.qZA())}function Vs(n,i){1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.SDv(2,23),e.qZA()())}function js(n,i){if(1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.tHW(2,24),e._UZ(3,"a",25),e.N_p(),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.s9C("href",t.docUrl,e.LSH)}}function ea(n,i){1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.SDv(2,26),e.qZA()())}let ta=(()=>{class n{constructor(t,o,c,F,z){this.activeModal=t,this.actionLabels=o,this.rgwRealmService=c,this.notificationService=F,this.docService=z,this.editing=!1,this.multisiteInfo=[],this.realmList=[],this.zonegroupList=[],this.defaultRealmDisabled=!1,this.action=this.editing?this.actionLabels.EDIT+this.resource:this.actionLabels.CREATE+this.resource,this.createForm()}createForm(){this.multisiteRealmForm=new Ke.d({realmName:new _.p4(null,{validators:[_.kI.required,X.h.custom("uniqueName",t=>"create"===this.action&&this.realmNames&&-1!==this.realmNames.indexOf(t))]}),default_realm:new _.p4(!1)})}ngOnInit(){this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.realmNames=this.realmList.map(t=>t.name),"edit"===this.action&&(this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.multisiteRealmForm.get("realmName").setValue(this.info.data.name),this.multisiteRealmForm.get("default_realm").setValue(this.info.data.is_default),this.info.data.is_default&&this.multisiteRealmForm.get("default_realm").disable()),this.zonegroupList.forEach(t=>{!0===t.is_master&&t.realm_id===this.info.data.id&&(this.isMaster=!0)}),this.defaultsInfo&&null!==this.defaultsInfo.defaultRealmName&&(this.multisiteRealmForm.get("default_realm").disable(),this.defaultRealmDisabled=!0),this.docUrl=this.docService.urlGenerator("rgw-multisite")}submit(){const t=this.multisiteRealmForm.getRawValue();this.realm=new Be.L6,"create"===this.action?(this.realm.name=t.realmName,this.rgwRealmService.create(this.realm,t.default_realm).subscribe(()=>{this.notificationService.show(I.k.success,"Realm: '" + t.realmName + "' created successfully"),this.activeModal.close()},()=>{this.multisiteRealmForm.setErrors({cdSubmitButton:!0})})):"edit"===this.action&&(this.realm.name=this.info.data.name,this.newRealmName=t.realmName,this.rgwRealmService.update(this.realm,t.default_realm,this.newRealmName).subscribe(()=>{this.notificationService.show(I.k.success,"Realm: '" + t.realmName + "' updated successfully"),this.activeModal.close()},()=>{this.multisiteRealmForm.setErrors({cdSubmitButton:!0})}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.Kz),e.Y36(T.p4),e.Y36(ot.y),e.Y36(ne.g),e.Y36(Qs.R))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-realm-form"]],decls:27,vars:20,consts:function(){let i,t,o,c,F,z,Q,J;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="Realm Name",o="Default",c="This field is required.",F="The chosen realm name is already in use.",z="You cannot unset the default flag.",Q="Please consult the " + "\ufffd#3\ufffd" + "documentation" + "\ufffd/#3\ufffd" + " to follow the failover mechanism",J="Default realm already exists.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","multisiteRealmForm","novalidate","",3,"formGroup"],["formDir","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","realmName",1,"cd-col-form-label","required"],t,[1,"cd-col-form-input"],["type","text","placeholder","Realm name...","id","realmName","name","realmName","formControlName","realmName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"custom-control","custom-checkbox"],["id","default_realm","name","default_realm","formControlName","default_realm","type","checkbox",1,"form-check-input"],["for","default_realm",1,"form-check-label"],o,[4,"ngIf"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],[1,"invalid-feedback"],c,F,z,Q,[3,"href"],J]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.ALo(3,"titlecase"),e.ALo(4,"upperFirst"),e.BQk(),e.ynx(5,3),e.TgZ(6,"form",4,5)(8,"div",6)(9,"div",7)(10,"label",8),e.SDv(11,9),e.qZA(),e.TgZ(12,"div",10),e._UZ(13,"input",11),e.YNc(14,Ys,2,0,"span",12),e.YNc(15,Js,2,0,"span",12),e.TgZ(16,"div",13),e._UZ(17,"input",14),e.TgZ(18,"label",15),e.SDv(19,16),e.qZA(),e.YNc(20,Vs,3,0,"cd-helper",17),e.YNc(21,js,4,1,"cd-helper",17),e.YNc(22,ea,3,0,"cd-helper",17),e.qZA()()()(),e.TgZ(23,"div",18)(24,"cd-form-button-panel",19),e.NdJ("submitActionEvent",function(){return o.submit()}),e.ALo(25,"titlecase"),e.ALo(26,"upperFirst"),e.qZA()()(),e.BQk(),e.qZA()),2&t){const c=e.MAs(7);e.Q6J("modalRef",o.activeModal),e.xp6(4),e.pQV(e.lcZ(3,12,o.action))(e.lcZ(4,14,o.resource)),e.QtT(2),e.xp6(2),e.Q6J("formGroup",o.multisiteRealmForm),e.xp6(8),e.Q6J("ngIf",o.multisiteRealmForm.showError("realmName",c,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteRealmForm.showError("realmName",c,"uniqueName")),e.xp6(2),e.uIk("disabled","edit"===o.action||null),e.xp6(3),e.Q6J("ngIf","edit"===o.action&&o.info.data.is_default),e.xp6(1),e.Q6J("ngIf","edit"===o.action&&!o.info.data.is_default),e.xp6(1),e.Q6J("ngIf",o.defaultRealmDisabled&&"create"===o.action),e.xp6(2),e.Q6J("form",o.multisiteRealmForm)("submitText",e.lcZ(25,16,o.action)+" "+e.lcZ(26,18,o.resource))}},dependencies:[g.O5,pe.S,he.z,we.p,Ae.o,Pe.b,We.P,C.V,_._Y,_.Fj,_.Wl,_.JJ,_.JL,_.sg,_.u,g.rS,Ye.m]}),n})();function na(n,i){if(1&n&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();e.Q6J("value",t.name)("selected",t.name===o.multisiteZoneForm.getValue("selectedZonegroup")),e.xp6(1),e.hij(" ",t.name," ")}}function oa(n,i){1&n&&(e.TgZ(0,"span",41),e.SDv(1,42),e.qZA())}function ia(n,i){1&n&&(e.TgZ(0,"span",41),e.SDv(1,43),e.qZA())}function ra(n,i){1&n&&(e.TgZ(0,"span")(1,"cd-helper"),e.SDv(2,44),e.qZA()())}function _a(n,i){1&n&&(e.TgZ(0,"span")(1,"cd-helper"),e.SDv(2,45),e.qZA()())}function sa(n,i){if(1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.tHW(2,46),e._UZ(3,"a",47),e.N_p(),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.s9C("href",t.docUrl,e.LSH)}}function aa(n,i){1&n&&(e.TgZ(0,"span")(1,"cd-helper"),e.SDv(2,48),e.qZA()())}function la(n,i){1&n&&(e.TgZ(0,"span")(1,"cd-helper"),e.SDv(2,49),e.qZA()())}function ca(n,i){if(1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.tHW(2,50),e._UZ(3,"a",47),e.N_p(),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.s9C("href",t.docUrl,e.LSH)}}function ua(n,i){1&n&&(e.TgZ(0,"span",41),e.SDv(1,51),e.qZA())}function da(n,i){1&n&&(e.TgZ(0,"span",41),e.SDv(1,52),e.qZA())}function fa(n,i){if(1&n&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(3);e.Q6J("value",t.name)("selected",t.name===o.multisiteZoneForm.getValue("placementTarget")),e.xp6(1),e.hij(" ",t.name," ")}}function pa(n,i){if(1&n&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(3);e.Q6J("value",t.poolname)("selected",t.poolname===o.multisiteZoneForm.getValue("placementDataPool")),e.xp6(1),e.hij(" ",t.poolname," ")}}function ga(n,i){if(1&n&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(3);e.Q6J("value",t.poolname)("selected",t.poolname===o.multisiteZoneForm.getValue("placementIndexPool")),e.xp6(1),e.hij(" ",t.poolname," ")}}function Ta(n,i){if(1&n&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(3);e.Q6J("value",t.poolname)("selected",t.poolname===o.multisiteZoneForm.getValue("placementDataExtraPool")),e.xp6(1),e.hij(" ",t.poolname," ")}}function Ea(n,i){if(1&n&&(e.TgZ(0,"option",75),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.value," ")}}function Ra(n,i){if(1&n&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(3);e.Q6J("value",t.poolname)("selected",t.poolname===o.multisiteZoneForm.getValue("storageDataPool")),e.xp6(1),e.hij(" ",t.poolname," ")}}function ma(n,i){if(1&n&&(e.TgZ(0,"option",75),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ha(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"legend"),e._uU(2,"Placement Targets"),e.qZA(),e.TgZ(3,"div",7)(4,"label",53),e.SDv(5,54),e.qZA(),e.TgZ(6,"div",10)(7,"select",55),e.NdJ("change",function(c){e.CHM(t);const F=e.oxw(2);return e.KtG(F.getZonePlacementData(c.target.value))}),e.YNc(8,fa,2,3,"option",12),e.qZA()()(),e.TgZ(9,"div",7)(10,"label",56),e.SDv(11,57),e.qZA(),e.TgZ(12,"div",10)(13,"select",58),e.YNc(14,pa,2,3,"option",12),e.qZA()()(),e.TgZ(15,"div",7)(16,"label",59),e.SDv(17,60),e.qZA(),e.TgZ(18,"div",10)(19,"select",61),e.YNc(20,ga,2,3,"option",12),e.qZA()()(),e.TgZ(21,"div",7)(22,"label",62),e.SDv(23,63),e.qZA(),e.TgZ(24,"div",10)(25,"select",64),e.YNc(26,Ta,2,3,"option",12),e.qZA()()(),e.TgZ(27,"div")(28,"legend"),e._uU(29,"Storage Classes"),e.qZA(),e.TgZ(30,"div",7)(31,"label",65),e.SDv(32,66),e.qZA(),e.TgZ(33,"div",10)(34,"select",67),e.NdJ("change",function(c){e.CHM(t);const F=e.oxw(2);return e.KtG(F.getStorageClassData(c.target.value))}),e.YNc(35,Ea,2,2,"option",68),e.qZA()()(),e.TgZ(36,"div",7)(37,"label",69),e.SDv(38,70),e.qZA(),e.TgZ(39,"div",10)(40,"select",71),e.YNc(41,Ra,2,3,"option",12),e.qZA()()(),e.TgZ(42,"div",7)(43,"label",72),e.SDv(44,73),e.qZA(),e.TgZ(45,"div",10)(46,"select",74),e.YNc(47,ma,2,2,"option",68),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(8),e.Q6J("ngForOf",t.placementTargets),e.xp6(5),e.Q6J("value",t.placementDataPool),e.xp6(1),e.Q6J("ngForOf",t.poolList),e.xp6(6),e.Q6J("ngForOf",t.poolList),e.xp6(6),e.Q6J("ngForOf",t.poolList),e.xp6(9),e.Q6J("ngForOf",t.storageClassList),e.xp6(6),e.Q6J("ngForOf",t.poolList),e.xp6(6),e.Q6J("ngForOf",t.compressionTypes)}}function Ma(n,i){if(1&n&&(e.TgZ(0,"div",7),e.YNc(1,ha,48,8,"div",21),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","edit"===t.action)}}let Sa=(()=>{class n{constructor(t,o,c,F,z,Q,J,j){this.activeModal=t,this.actionLabels=o,this.rgwMultisiteService=c,this.rgwZoneService=F,this.rgwZoneGroupService=z,this.notificationService=Q,this.rgwUserService=J,this.modalService=j,this.endpoints=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{2,4}$/,this.ipv4Rgx=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,this.ipv6Rgx=/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i,this.editing=!1,this.defaultsInfo=[],this.multisiteInfo=[],this.zonegroupList=[],this.zoneList=[],this.poolList=[],this.storageClassList=[],this.disableDefault=!1,this.disableMaster=!1,this.isMetadataSync=!1,this.syncStatusTimedOut=!1,this.createSystemUser=!1,this.compressionTypes=["lz4","zlib","snappy"],this.userListReady=!1,this.action=this.editing?this.actionLabels.EDIT+this.resource:this.actionLabels.CREATE+this.resource,this.createForm()}createForm(){this.multisiteZoneForm=new Ke.d({zoneName:new _.p4(null,{validators:[_.kI.required,X.h.custom("uniqueName",t=>"create"===this.action&&this.zoneNames&&-1!==this.zoneNames.indexOf(t))]}),default_zone:new _.p4(!1),master_zone:new _.p4(!1),selectedZonegroup:new _.p4(null),zone_endpoints:new _.p4(null,{validators:[X.h.custom("endpoint",t=>!(w().isEmpty(t)||(t.includes(",")?(t.split(",").forEach(o=>!this.endpoints.test(o)&&!this.ipv4Rgx.test(o)&&!this.ipv6Rgx.test(o)),1):this.endpoints.test(t)||this.ipv4Rgx.test(t)||this.ipv6Rgx.test(t)))),_.kI.required]}),access_key:new _.p4("",{}),secret_key:new _.p4("",{}),placementTarget:new _.p4(null),placementDataPool:new _.p4(""),placementIndexPool:new _.p4(null),placementDataExtraPool:new _.p4(null),storageClass:new _.p4(null),storageDataPool:new _.p4(null),storageCompression:new _.p4(null)})}onZoneGroupChange(t){let o=new Be.iG;o.name=t,this.rgwZoneGroupService.get(o).subscribe(c=>{w().isEmpty(c.master_zone)?(this.multisiteZoneForm.get("master_zone").setValue(!0),this.multisiteZoneForm.get("master_zone").disable(),this.disableMaster=!1):!w().isEmpty(c.master_zone)&&"create"===this.action&&(this.multisiteZoneForm.get("master_zone").setValue(!1),this.multisiteZoneForm.get("master_zone").disable(),this.disableMaster=!0)}),this.multisiteZoneForm.getValue("selectedZonegroup")!==this.defaultsInfo.defaultZonegroupName&&(this.disableDefault=!0,this.multisiteZoneForm.get("default_zone").disable())}ngOnInit(){this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zoneNames=this.zoneList.map(t=>t.name),"create"===this.action&&void 0!==this.defaultsInfo.defaultZonegroupName&&(this.multisiteZoneForm.get("selectedZonegroup").setValue(this.defaultsInfo.defaultZonegroupName),this.onZoneGroupChange(this.defaultsInfo.defaultZonegroupName)),"edit"===this.action&&(this.placementTargets=this.info.parent?this.info.parent.data.placement_targets:[],this.rgwZoneService.getPoolNames().subscribe(o=>{this.poolList=o}),this.multisiteZoneForm.get("zoneName").setValue(this.info.data.name),this.multisiteZoneForm.get("selectedZonegroup").setValue(this.info.data.parent),this.multisiteZoneForm.get("default_zone").setValue(this.info.data.is_default),this.multisiteZoneForm.get("master_zone").setValue(this.info.data.is_master),this.multisiteZoneForm.get("zone_endpoints").setValue(this.info.data.endpoints.toString()),this.multisiteZoneForm.get("access_key").setValue(this.info.data.access_key),this.multisiteZoneForm.get("secret_key").setValue(this.info.data.secret_key),this.multisiteZoneForm.get("placementTarget").setValue(this.info.parent.data.default_placement),this.getZonePlacementData(this.multisiteZoneForm.getValue("placementTarget")),this.info.data.is_default&&(this.isDefaultZone=!0,this.multisiteZoneForm.get("default_zone").disable()),this.info.data.is_master&&(this.isMasterZone=!0,this.multisiteZoneForm.get("master_zone").disable()),(new Be.jb).name=this.info.data.name,this.onZoneGroupChange(this.info.data.parent)),this.multisiteZoneForm.getValue("selectedZonegroup")!==this.defaultsInfo.defaultZonegroupName&&(this.disableDefault=!0,this.multisiteZoneForm.get("default_zone").disable())}getZonePlacementData(t){this.zone=new Be.jb,this.zone.name=this.info.data.name,this.placementTargets&&this.placementTargets.forEach(o=>{o.name===t&&(this.storageClassList=Object.entries(o.storage_classes).map(([F,z])=>({key:F,value:z})))}),this.rgwZoneService.get(this.zone).subscribe(o=>{this.zoneInfo=o,this.zoneInfo&&this.zoneInfo.placement_pools&&this.zoneInfo.placement_pools.forEach(c=>{if(c.key===t){let F=c.val.storage_classes,z=F.STANDARD?F.STANDARD.data_pool:"",Q=c.val.index_pool,J=c.val.data_extra_pool;this.poolList.push({poolname:z}),this.poolList.push({poolname:Q}),this.poolList.push({poolname:J}),this.multisiteZoneForm.get("storageClass").setValue(this.storageClassList[0].value),this.multisiteZoneForm.get("storageDataPool").setValue(z),this.multisiteZoneForm.get("storageCompression").setValue(this.compressionTypes[0]),this.multisiteZoneForm.get("placementDataPool").setValue(z),this.multisiteZoneForm.get("placementIndexPool").setValue(Q),this.multisiteZoneForm.get("placementDataExtraPool").setValue(J)}})})}getStorageClassData(t){let o=this.storageClassList.find(c=>c.value==t).value;this.poolList.push({poolname:o.data_pool}),this.multisiteZoneForm.get("storageDataPool").setValue(o.data_pool),this.multisiteZoneForm.get("storageCompression").setValue(o.compression_type)}submit(){const t=this.multisiteZoneForm.getRawValue();"create"===this.action?(this.zonegroup=new Be.iG,this.zonegroup.name=t.selectedZonegroup,this.zone=new Be.jb,this.zone.name=t.zoneName,this.zone.endpoints=t.zone_endpoints,this.zone.system_key=new Be.VY,this.zone.system_key.access_key=t.access_key,this.zone.system_key.secret_key=t.secret_key,this.rgwZoneService.create(this.zone,this.zonegroup,t.default_zone,t.master_zone,this.zone.endpoints).subscribe(()=>{this.notificationService.show(I.k.success,"Zone: '" + t.zoneName + "' created successfully"),this.activeModal.close()},()=>{this.multisiteZoneForm.setErrors({cdSubmitButton:!0})})):"edit"===this.action&&(this.zonegroup=new Be.iG,this.zonegroup.name=t.selectedZonegroup,this.zone=new Be.jb,this.zone.name=this.info.data.name,this.zone.endpoints=t.zone_endpoints,this.zone.system_key=new Be.VY,this.zone.system_key.access_key=t.access_key,this.zone.system_key.secret_key=t.secret_key,this.rgwZoneService.update(this.zone,this.zonegroup,t.zoneName,t.default_zone,t.master_zone,this.zone.endpoints,t.placementTarget,t.placementDataPool,t.placementIndexPool,t.placementDataExtraPool,t.storageClass,t.storageDataPool,t.storageCompression).subscribe(()=>{this.notificationService.show(I.k.success,"Zone: '" + t.zoneName + "' updated successfully"),this.activeModal.close()},()=>{this.multisiteZoneForm.setErrors({cdSubmitButton:!0})}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.Kz),e.Y36(T.p4),e.Y36(an.o),e.Y36(it.g),e.Y36(rt.K),e.Y36(ne.g),e.Y36(E),e.Y36(Qe.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-zone-form"]],decls:75,vars:29,consts:function(){let i,t,o,c,F,z,Q,J,j,oe,Te,Se,Oe,be,me,Ge,ye,Le,Ee,Ue,$e,xe,De,ve,ae;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="Select Zone Group",o="Zone Name",c="Default",F="Master",z="Endpoints",Q="S3 access key " + "\ufffd#47\ufffd" + "" + "\ufffd#48\ufffd" + "To see or copy your S3 access key, go to " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Object Gateway > Users" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + " and click on your user name. In " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Keys" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + ", click " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Show" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + ". View the access key by clicking Show and copy the key by clicking " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Copy to Clipboard" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + "." + "\ufffd/#48\ufffd" + "" + "\ufffd/#47\ufffd" + "",Q=e.Zx4(Q),J="S3 secret key " + "\ufffd#60\ufffd" + "" + "\ufffd#61\ufffd" + "To see or copy your S3 access key, go to " + "[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]" + "Object Gateway > Users" + "[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]" + " and click on your user name. In " + "[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]" + "Keys" + "[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]" + ", click " + "[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]" + "Show" + "[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]" + ". View the secret key by clicking Show and copy the key by clicking " + "[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]" + "Copy to Clipboard" + "[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]" + "." + "\ufffd/#61\ufffd" + "" + "\ufffd/#60\ufffd" + "",J=e.Zx4(J),j="This field is required.",oe="The chosen zone name is already in use.",Te="Default zone can only exist in a default zone group. ",Se="You cannot unset the default flag. ",Oe="Please consult the " + "\ufffd#3\ufffd" + "documentation" + "\ufffd/#3\ufffd" + " to follow the failover mechanism",be="Master zone already exists for the selected zone group. ",me="You cannot unset the master flag. ",Ge="Please consult the " + "\ufffd#3\ufffd" + "documentation" + "\ufffd/#3\ufffd" + " to follow the failover mechanism",ye="This field is required.",Le="Please enter a valid IP address.",Ee="Placement target",Ue="\u30C7\u30FC\u30BF\u30D7\u30FC\u30EB",$e="Index pool",xe="Data extra pool",De="Storage Class",ve="\u30C7\u30FC\u30BF\u30D7\u30FC\u30EB",ae="\u5727\u7E2E",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","multisiteZoneForm","novalidate","",3,"formGroup"],["formDir","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","selectedZonegroup",1,"cd-col-form-label"],t,[1,"cd-col-form-input"],["id","selectedZonegroup","formControlName","selectedZonegroup","name","selectedZonegroup",1,"form-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],["for","zonegroupName",1,"cd-col-form-label","required"],o,["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"custom-control","custom-checkbox"],["id","default_zone","name","default_zone","formControlName","default_zone","type","checkbox",1,"form-check-input"],["for","default_zone",1,"form-check-label"],c,[4,"ngIf"],["id","master_zone","name","master_zone","formControlName","master_zone","type","checkbox",1,"form-check-input"],["for","master_zone",1,"form-check-label"],F,["for","zone_endpoints",1,"cd-col-form-label","required"],z,["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zone_endpoints","name","zone_endpoints","formControlName","zone_endpoints",1,"form-control"],["for","access_key",1,"cd-col-form-label"],Q,[1,"input-group"],["type","password","placeholder","DiPt4V7WWvy2njL1z6aC","id","access_key","name","access_key","formControlName","access_key",1,"form-control"],["type","button","cdPasswordButton","access_key",1,"btn","btn-light"],["for","secret_key",1,"cd-col-form-label"],J,["type","password","placeholder","xSZUdYky0bTctAdCEEW8ikhfBVKsBV5LFYL82vvh","id","secret_key","name","secret_key","formControlName","secret_key",1,"form-control"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],[3,"value","selected"],[1,"invalid-feedback"],j,oe,Te,Se,Oe,[3,"href"],be,me,Ge,ye,Le,["for","placementTarget",1,"cd-col-form-label"],Ee,["id","placementTarget","formControlName","placementTarget","name","placementTarget",1,"form-select",3,"change"],["for","placementDataPool",1,"cd-col-form-label"],Ue,["id","placementDataPool","formControlName","placementDataPool","name","placementDataPool",1,"form-select",3,"value"],["for","placementIndexPool",1,"cd-col-form-label"],$e,["id","placementIndexPool","formControlName","placementIndexPool","name","placementIndexPool",1,"form-select"],["for","placementDataExtraPool",1,"cd-col-form-label"],xe,["id","placementDataExtraPool","formControlName","placementDataExtraPool","name","placementDataExtraPool",1,"form-select"],["for","storageClass",1,"cd-col-form-label"],De,["id","storageClass","formControlName","storageClass","name","storageClass",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],["for","storageDataPool",1,"cd-col-form-label"],ve,["id","storageDataPool","formControlName","storageDataPool","name","storageDataPool",1,"form-select"],["for","storageCompression",1,"cd-col-form-label"],ae,["id","storageCompression","formControlName","storageCompression","name","storageCompression",1,"form-select"],[3,"value"]]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.ALo(3,"titlecase"),e.ALo(4,"upperFirst"),e.BQk(),e.ynx(5,3),e.TgZ(6,"form",4,5)(8,"div",6)(9,"div",7)(10,"label",8),e.SDv(11,9),e.qZA(),e.TgZ(12,"div",10)(13,"select",11),e.NdJ("change",function(F){return o.onZoneGroupChange(F.target.value)}),e.YNc(14,na,2,3,"option",12),e.qZA()()(),e.TgZ(15,"div",7)(16,"label",13),e.SDv(17,14),e.qZA(),e.TgZ(18,"div",10),e._UZ(19,"input",15),e.YNc(20,oa,2,0,"span",16),e.YNc(21,ia,2,0,"span",16),e.TgZ(22,"div",17),e._UZ(23,"input",18),e.TgZ(24,"label",19),e.SDv(25,20),e.qZA(),e.YNc(26,ra,3,0,"span",21),e.YNc(27,_a,3,0,"span",21),e.YNc(28,sa,4,1,"cd-helper",21),e._UZ(29,"br"),e.qZA(),e.TgZ(30,"div",17),e._UZ(31,"input",22),e.TgZ(32,"label",23),e.SDv(33,24),e.qZA(),e.YNc(34,aa,3,0,"span",21),e.YNc(35,la,3,0,"span",21),e.YNc(36,ca,4,1,"cd-helper",21),e.qZA()()(),e.TgZ(37,"div",7)(38,"label",25),e.SDv(39,26),e.qZA(),e.TgZ(40,"div",10),e._UZ(41,"input",27),e.YNc(42,ua,2,0,"span",16),e.YNc(43,da,2,0,"span",16),e.qZA()(),e.TgZ(44,"div",7)(45,"label",28),e.tHW(46,29),e.TgZ(47,"cd-helper")(48,"span"),e._UZ(49,"b")(50,"b")(51,"b")(52,"b"),e.qZA()(),e.N_p(),e.qZA(),e.TgZ(53,"div",10)(54,"div",30),e._UZ(55,"input",31)(56,"button",32),e.qZA()()(),e.TgZ(57,"div",7)(58,"label",33),e.tHW(59,34),e.TgZ(60,"cd-helper")(61,"span"),e._UZ(62,"b")(63,"b")(64,"b")(65,"b"),e.qZA()(),e.N_p(),e.qZA(),e.TgZ(66,"div",10)(67,"div",30),e._UZ(68,"input",35)(69,"button",36),e.qZA()()(),e.YNc(70,Ma,2,1,"div",37),e.qZA(),e.TgZ(71,"div",38)(72,"cd-form-button-panel",39),e.NdJ("submitActionEvent",function(){return o.submit()}),e.ALo(73,"titlecase"),e.ALo(74,"upperFirst"),e.qZA()()(),e.BQk(),e.qZA()),2&t){const c=e.MAs(7);e.Q6J("modalRef",o.activeModal),e.xp6(4),e.pQV(e.lcZ(3,21,o.action))(e.lcZ(4,23,o.resource)),e.QtT(2),e.xp6(2),e.Q6J("formGroup",o.multisiteZoneForm),e.xp6(7),e.uIk("disabled","edit"===o.action||null),e.xp6(1),e.Q6J("ngForOf",o.zonegroupList),e.xp6(6),e.Q6J("ngIf",o.multisiteZoneForm.showError("zoneName",c,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteZoneForm.showError("zoneName",c,"uniqueName")),e.xp6(2),e.uIk("disabled","edit"===o.action||null),e.xp6(3),e.Q6J("ngIf",o.disableDefault&&"create"===o.action),e.xp6(1),e.Q6J("ngIf",o.isDefaultZone),e.xp6(1),e.Q6J("ngIf","edit"===o.action&&!o.isDefaultZone),e.xp6(3),e.uIk("disabled","edit"===o.action||null),e.xp6(3),e.Q6J("ngIf",o.disableMaster),e.xp6(1),e.Q6J("ngIf",o.isMasterZone),e.xp6(1),e.Q6J("ngIf","edit"===o.action&&!o.isMasterZone),e.xp6(6),e.Q6J("ngIf",o.multisiteZoneForm.showError("zone_endpoints",c,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteZoneForm.showError("zone_endpoints",c,"endpoint")),e.xp6(27),e.Q6J("ngIf","edit"===o.action),e.xp6(2),e.Q6J("form",o.multisiteZoneForm)("submitText",e.lcZ(73,25,o.action)+" "+e.lcZ(74,27,o.resource))}},dependencies:[g.sg,g.O5,pe.S,he.z,we.p,lt.C,Ae.o,Pe.b,We.P,C.V,_._Y,_.YN,_.Kr,_.Fj,_.Wl,_.EJ,_.JJ,_.JL,_.sg,_.u,g.rS,Ye.m]}),n})();var Ca=p(36569);function Fa(n,i){if(1&n&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();e.Q6J("value",t.name)("selected",t.name===o.multisiteZonegroupForm.getValue("selectedRealm")),e.xp6(1),e.hij(" ",t.name," ")}}function Oa(n,i){1&n&&(e.TgZ(0,"span",34),e.SDv(1,35),e.qZA())}function Na(n,i){1&n&&(e.TgZ(0,"span",34),e.SDv(1,36),e.qZA())}function Aa(n,i){1&n&&(e.TgZ(0,"span")(1,"cd-helper"),e.SDv(2,37),e.qZA()())}function Pa(n,i){if(1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.tHW(2,38),e._UZ(3,"a",39),e.N_p(),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.s9C("href",t.docUrl,e.LSH)}}function ba(n,i){1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.SDv(2,40),e.qZA()())}function Ia(n,i){1&n&&(e.TgZ(0,"span")(1,"cd-helper"),e.SDv(2,41),e.qZA()())}function Ga(n,i){if(1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.tHW(2,42),e._UZ(3,"a",39),e.N_p(),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.s9C("href",t.docUrl,e.LSH)}}function ya(n,i){1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.SDv(2,43),e.qZA()())}function La(n,i){1&n&&(e.TgZ(0,"span",34),e.SDv(1,44),e.qZA())}function Da(n,i){1&n&&(e.TgZ(0,"span",34),e.SDv(1,45),e.qZA())}function va(n,i){1&n&&(e.TgZ(0,"span",34),e.SDv(1,49),e.qZA())}function wa(n,i){if(1&n&&(e.TgZ(0,"div",7)(1,"label",46),e.SDv(2,47),e.qZA(),e.TgZ(3,"div",10),e._UZ(4,"cd-select-badges",48)(5,"br"),e.YNc(6,va,2,0,"span",18),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("data",t.zonegroupZoneNames)("options",t.labelsOption)("customBadges",!0),e.xp6(2),e.Q6J("ngIf",t.isRemoveMasterZone)}}function Wa(n,i){1&n&&(e.TgZ(0,"span"),e.SDv(1,68),e.qZA())}function Ua(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",55)(2,"div",56),e._uU(3),e.ALo(4,"ordinal"),e.TgZ(5,"span",57),e.NdJ("click",function(){const F=e.CHM(t).index,z=e.oxw(2);return e.KtG(z.removePlacementTarget(F))}),e._uU(6,"\xd7"),e.qZA()(),e.TgZ(7,"div",58)(8,"div",7)(9,"label",59),e.SDv(10,60),e.qZA(),e.TgZ(11,"div",10),e._UZ(12,"input",61),e.TgZ(13,"span",34),e.YNc(14,Wa,2,0,"span",23),e.qZA()()(),e.TgZ(15,"div",7)(16,"label",62),e.SDv(17,63),e.qZA(),e.TgZ(18,"div",10),e._UZ(19,"input",64),e.qZA()(),e.TgZ(20,"div",7)(21,"label",65),e.SDv(22,66),e.qZA(),e.TgZ(23,"div",10),e._UZ(24,"input",67),e.qZA()()()()()}if(2&n){const t=i.$implicit,o=i.index,c=e.oxw(2),F=e.MAs(6);e.xp6(1),e.Q6J("formGroup",t),e.xp6(2),e.hij(" ",e.lcZ(4,3,o+1)," "),e.xp6(11),e.Q6J("ngIf",c.showError(o,"placement_id",F,"required"))}}const $a=function(n){return[n]};function xa(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"legend"),e._uU(2,"Placement targets"),e.qZA(),e.ynx(3,50),e.YNc(4,Ua,25,5,"div",51),e.BQk(),e.TgZ(5,"button",52),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.addPlacementTarget())}),e._UZ(6,"i",53),e.ynx(7),e.SDv(8,54),e.BQk(),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.placementTargets.controls)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("ngClass",e.VKq(3,$a,t.icons.add))}}let Za=(()=>{class n{constructor(t,o,c,F,z){this.activeModal=t,this.actionLabels=o,this.rgwZonegroupService=c,this.notificationService=F,this.formBuilder=z,this.endpoints=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{2,4}$/,this.ipv4Rgx=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,this.ipv6Rgx=/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i,this.icons=B.P,this.editing=!1,this.defaultsInfo=[],this.multisiteInfo=[],this.realmList=[],this.zonegroupList=[],this.isMaster=!1,this.labelsOption=[],this.zoneList=[],this.isRemoveMasterZone=!1,this.disableDefault=!1,this.disableMaster=!1,this.action=this.editing?this.actionLabels.EDIT+this.resource:this.actionLabels.CREATE+this.resource,this.createForm()}createForm(){this.multisiteZonegroupForm=new Ke.d({default_zonegroup:new _.p4(!1),zonegroupName:new _.p4(null,{validators:[_.kI.required,X.h.custom("uniqueName",t=>"create"===this.action&&this.zonegroupNames&&-1!==this.zonegroupNames.indexOf(t))]}),master_zonegroup:new _.p4(!1),selectedRealm:new _.p4(null),zonegroup_endpoints:new _.p4(null,[X.h.custom("endpoint",t=>!(w().isEmpty(t)||(t.includes(",")?(t.split(",").forEach(o=>!this.endpoints.test(o)&&!this.ipv4Rgx.test(o)&&!this.ipv6Rgx.test(o)),1):this.endpoints.test(t)||this.ipv4Rgx.test(t)||this.ipv6Rgx.test(t)))),_.kI.required]),placementTargets:this.formBuilder.array([])})}ngOnInit(){w().forEach(this.multisiteZonegroupForm.get("placementTargets"),F=>{this.addPlacementTarget().patchValue(F)}),this.placementTargets=this.multisiteZonegroupForm.get("placementTargets"),this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zonegroupList.forEach(F=>{!0===F.is_master&&!w().isEmpty(F.realm_id)&&(this.isMaster=!0,this.disableMaster=!0)}),this.isMaster||(this.multisiteZonegroupForm.get("master_zonegroup").setValue(!0),this.multisiteZonegroupForm.get("master_zonegroup").disable()),this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zonegroupNames=this.zonegroupList.map(F=>F.name);const c=this.zonegroupList.map(F=>F.zones).reduce((F,z)=>F.concat(z),[]).map(F=>F.name);if(this.allZoneNames=this.zoneList.map(F=>F.name),this.allZoneNames=w().difference(this.allZoneNames,c),"create"===this.action&&null!==this.defaultsInfo.defaultRealmName&&(this.multisiteZonegroupForm.get("selectedRealm").setValue(this.defaultsInfo.defaultRealmName),this.disableMaster&&this.multisiteZonegroupForm.get("master_zonegroup").disable()),"edit"===this.action){this.multisiteZonegroupForm.get("zonegroupName").setValue(this.info.data.name),this.multisiteZonegroupForm.get("selectedRealm").setValue(this.info.data.parent),this.multisiteZonegroupForm.get("default_zonegroup").setValue(this.info.data.is_default),this.multisiteZonegroupForm.get("master_zonegroup").setValue(this.info.data.is_master),this.multisiteZonegroupForm.get("zonegroup_endpoints").setValue(this.info.data.endpoints),this.info.data.is_default&&this.multisiteZonegroupForm.get("default_zonegroup").disable(),!this.info.data.is_default&&this.multisiteZonegroupForm.getValue("selectedRealm")!==this.defaultsInfo.defaultRealmName&&(this.multisiteZonegroupForm.get("default_zonegroup").disable(),this.disableDefault=!0),(this.info.data.is_master||this.disableMaster)&&this.multisiteZonegroupForm.get("master_zonegroup").disable(),this.zonegroupZoneNames=this.info.data.zones.map(z=>z.name),this.zgZoneNames=this.info.data.zones.map(z=>z.name),this.zgZoneIds=this.info.data.zones.map(z=>z.id);const F=new Set(this.allZoneNames);this.labelsOption=Array.from(F).map(z=>({enabled:!0,name:z,selected:!1,description:null})),this.info.data.placement_targets.forEach(z=>{const Q=this.addPlacementTarget();let J={placement_id:z.name,tags:z.tags.join(","),storage_class:"string"==typeof z.storage_classes?z.storage_classes:z.storage_classes.join(",")};Q.patchValue(J)})}}submit(){const t=this.multisiteZonegroupForm.getRawValue();if("create"===this.action)this.realm=new Be.L6,this.realm.name=t.selectedRealm,this.zonegroup=new Be.iG,this.zonegroup.name=t.zonegroupName,this.zonegroup.endpoints=t.zonegroup_endpoints,this.rgwZonegroupService.create(this.realm,this.zonegroup,t.default_zonegroup,t.master_zonegroup).subscribe(()=>{this.notificationService.show(I.k.success,"Zonegroup: '" + t.zonegroupName + "' created successfully"),this.activeModal.close()},()=>{this.multisiteZonegroupForm.setErrors({cdSubmitButton:!0})});else if("edit"===this.action){this.removedZones=w().difference(this.zgZoneNames,this.zonegroupZoneNames);const o=this.info.data.zones.filter(c=>c.id===this.info.data.master_zone);if(this.isRemoveMasterZone=this.removedZones.includes(o[0].name),this.isRemoveMasterZone)return void this.multisiteZonegroupForm.setErrors({cdSubmitButton:!0});this.addedZones=w().difference(this.zonegroupZoneNames,this.zgZoneNames),this.realm=new Be.L6,this.realm.name=t.selectedRealm,this.zonegroup=new Be.iG,this.zonegroup.name=this.info.data.name,this.newZonegroupName=t.zonegroupName,this.zonegroup.endpoints=t.zonegroup_endpoints.toString(),this.zonegroup.placement_targets=t.placementTargets,this.rgwZonegroupService.update(this.realm,this.zonegroup,this.newZonegroupName,t.default_zonegroup,t.master_zonegroup,this.removedZones,this.addedZones).subscribe(()=>{this.notificationService.show(I.k.success,"Zonegroup: '" + t.zonegroupName + "' updated successfully"),this.activeModal.close()},()=>{this.multisiteZonegroupForm.setErrors({cdSubmitButton:!0})})}}addPlacementTarget(){this.placementTargets=this.multisiteZonegroupForm.get("placementTargets");const t=new Ke.d({placement_id:new _.p4("",{validators:[_.kI.required]}),tags:new _.p4(""),storage_class:new _.p4([])});return this.placementTargets.push(t),t}trackByFn(t){return t}removePlacementTarget(t){this.placementTargets=this.multisiteZonegroupForm.get("placementTargets"),this.placementTargets.removeAt(t)}showError(t,o,c,F){return this.multisiteZonegroupForm.controls.placementTargets.controls[t].showError(o,c,F)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.Kz),e.Y36(T.p4),e.Y36(rt.K),e.Y36(ne.g),e.Y36(_.QS))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-zonegroup-form"]],decls:49,vars:24,consts:function(){let i,t,o,c,F,z,Q,J,j,oe,Te,Se,Oe,be,me,Ge,ye,Le,Ee,Ue,$e,xe,De,ve;return i="" + "\ufffd0\ufffd" + " Zone Group",t="Select Realm",o="-- Select a realm --",c="Zone Group Name",F="Default",z="Master",Q="Endpoints",J="This field is required.",j="The chosen zone group name is already in use.",oe="Zone group doesn't belong to the default realm.",Te="Please consult the " + "\ufffd#3\ufffd" + "documentation" + "\ufffd/#3\ufffd" + " to follow the failover mechanism",Se="You cannot unset the default flag.",Oe="Multiple master zone groups can't be configured. If you want to create a new zone group and make it the master zone group, you must delete the default zone group.",be="Please consult the " + "\ufffd#3\ufffd" + "documentation" + "\ufffd/#3\ufffd" + " to follow the failover mechanism",me="You cannot unset the master flag.",Ge="This field is required.",ye="Please enter a valid IP address.",Le="Zones",Ee="Cannot remove master zone.",Ue="Add placement target",$e="Placement Id",xe="\u30BF\u30B0",De="Storage Class",ve="This field is required.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","multisiteZonegroupForm","novalidate","",3,"formGroup"],["formDir","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","selectedRealm",1,"cd-col-form-label"],t,[1,"cd-col-form-input"],["id","selectedRealm","formControlName","selectedRealm","name","selectedRealm",1,"form-select"],["ngValue",""],o,[3,"value","selected",4,"ngFor","ngForOf"],["for","zonegroupName",1,"cd-col-form-label","required"],c,["type","text","placeholder","Zone group name...","id","zonegroupName","name","zonegroupName","formControlName","zonegroupName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"custom-control","custom-checkbox"],["id","default_zonegroup","name","default_zonegroup","formControlName","default_zonegroup","type","checkbox",1,"form-check-input"],["for","default_zonegroup",1,"form-check-label"],F,[4,"ngIf"],["id","master_zonegroup","name","master_zonegroup","formControlName","master_zonegroup","type","checkbox",1,"form-check-input"],["for","master_zonegroup",1,"form-check-label"],z,["for","zonegroup_endpoints",1,"cd-col-form-label","required"],Q,["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zonegroup_endpoints","name","zonegroup_endpoints","formControlName","zonegroup_endpoints",1,"form-control"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],[3,"value","selected"],[1,"invalid-feedback"],J,j,oe,Te,[3,"href"],Se,Oe,be,me,Ge,ye,["for","zones",1,"cd-col-form-label"],Le,["id","zones",3,"data","options","customBadges"],Ee,["formArrayName","placementTargets"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","button","id","add-plc",1,"btn","btn-light","float-end","my-3",3,"click"],[3,"ngClass"],Ue,[1,"card",3,"formGroup"],[1,"card-header"],["name","remove_placement_target","ngbTooltip","Remove",1,"float-end","clickable",3,"click"],[1,"card-body"],["for","placement_id",1,"cd-col-form-label","required"],$e,["type","text","name","placement_id","id","placement_id","formControlName","placement_id","placeholder","eg. default-placement",1,"form-control"],["for","tags",1,"cd-col-form-label"],xe,["type","text","name","tags","id","tags","formControlName","tags","placeholder","comma separated tags, eg. default-placement, ssd",1,"form-control"],["for","storage_class",1,"cd-col-form-label"],De,["type","text","name","storage_class","id","storage_class","formControlName","storage_class","placeholder","eg. Standard-tier",1,"form-control"],ve]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.ALo(3,"titlecase"),e.BQk(),e.ynx(4,3),e.TgZ(5,"form",4,5)(7,"div",6)(8,"div",7)(9,"label",8),e.SDv(10,9),e.qZA(),e.TgZ(11,"div",10)(12,"select",11)(13,"option",12),e.SDv(14,13),e.qZA(),e.YNc(15,Fa,2,3,"option",14),e.qZA()()(),e.TgZ(16,"div",7)(17,"label",15),e.SDv(18,16),e.qZA(),e.TgZ(19,"div",10),e._UZ(20,"input",17),e.YNc(21,Oa,2,0,"span",18),e.YNc(22,Na,2,0,"span",18),e.TgZ(23,"div",19),e._UZ(24,"input",20),e.TgZ(25,"label",21),e.SDv(26,22),e.qZA(),e.YNc(27,Aa,3,0,"span",23),e.YNc(28,Pa,4,1,"cd-helper",23),e.YNc(29,ba,3,0,"cd-helper",23),e._UZ(30,"br")(31,"input",24),e.TgZ(32,"label",25),e.SDv(33,26),e.qZA(),e.YNc(34,Ia,3,0,"span",23),e.YNc(35,Ga,4,1,"cd-helper",23),e.YNc(36,ya,3,0,"cd-helper",23),e.qZA()()(),e.TgZ(37,"div",7)(38,"label",27),e.SDv(39,28),e.qZA(),e.TgZ(40,"div",10),e._UZ(41,"input",29),e.YNc(42,La,2,0,"span",18),e.YNc(43,Da,2,0,"span",18),e.qZA()(),e.YNc(44,wa,7,4,"div",30),e.YNc(45,xa,9,5,"div",23),e.qZA(),e.TgZ(46,"div",31)(47,"cd-form-button-panel",32),e.NdJ("submitActionEvent",function(){return o.submit()}),e.ALo(48,"titlecase"),e.qZA()()(),e.BQk(),e.qZA()),2&t){const c=e.MAs(6);e.Q6J("modalRef",o.activeModal),e.xp6(3),e.pQV(e.lcZ(3,20,o.action)),e.QtT(2),e.xp6(2),e.Q6J("formGroup",o.multisiteZonegroupForm),e.xp6(10),e.Q6J("ngForOf",o.realmList),e.xp6(6),e.Q6J("ngIf",o.multisiteZonegroupForm.showError("zonegroupName",c,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteZonegroupForm.showError("zonegroupName",c,"uniqueName")),e.xp6(2),e.uIk("disabled","edit"===o.action||null),e.xp6(3),e.Q6J("ngIf",o.disableDefault&&"create"===o.action),e.xp6(1),e.Q6J("ngIf","edit"===o.action&&!o.info.data.is_default),e.xp6(1),e.Q6J("ngIf","edit"===o.action&&o.info.data.is_default),e.xp6(2),e.uIk("disabled","edit"===o.action||null),e.xp6(3),e.Q6J("ngIf",o.disableMaster&&"create"===o.action),e.xp6(1),e.Q6J("ngIf","edit"===o.action&&!o.info.data.is_master),e.xp6(1),e.Q6J("ngIf","edit"===o.action&&o.info.data.is_master),e.xp6(6),e.Q6J("ngIf",o.multisiteZonegroupForm.showError("zonegroup_endpoints",c,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteZonegroupForm.showError("zonegroup_endpoints",c,"endpoint")),e.xp6(1),e.Q6J("ngIf","edit"===o.action),e.xp6(1),e.Q6J("ngIf","edit"===o.action),e.xp6(2),e.Q6J("form",o.multisiteZonegroupForm)("submitText",e.lcZ(48,22,o.action)+" Zone Group")}},dependencies:[g.mk,g.sg,g.O5,pe.S,In.m,he.z,we.p,Ae.o,Pe.b,We.P,C.V,_._Y,_.YN,_.Kr,_.Fj,_.Wl,_.EJ,_.JJ,_.JL,_.sg,_.u,_.CE,v._L,g.rS,Ca.f]}),n})();var ka=p(61717),Ba=p(36848),za=p(7273);const qa=["tree"];function Ha(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"cd-alert-panel",17),e.tHW(1,18),e.TgZ(2,"button",19),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.enableRgwModule())}),e.qZA(),e.N_p(),e.qZA()}}function Xa(n,i){1&n&&(e.TgZ(0,"cd-alert-panel",20),e.tHW(1,21),e._UZ(2,"a",22),e.N_p(),e.qZA())}function Ka(n,i){if(1&n&&(e.TgZ(0,"span"),e._UZ(1,"cd-table-actions",23),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("permission",t.permission)("btnColor","light")("selection",t.selection)("tableActions",t.migrateTableAction)}}const Qa=function(n,i,t){return[n,i,t]};function Ya(n,i){if(1&n&&e._UZ(0,"i",24),2&n){const t=e.oxw();e.Q6J("ngClass",e.kEZ(1,Qa,t.icons.large,t.icons.spinner,t.icons.spin))}}function Ja(n,i){if(1&n&&(e.TgZ(0,"span"),e._UZ(1,"i",30),e.qZA()),2&n){const t=e.oxw(2).$implicit,o=e.oxw();e.xp6(1),e.Q6J("title",t.data.warning_message)("ngClass",o.icons.danger)}}function Va(n,i){if(1&n&&(e.TgZ(0,"span",29),e.YNc(1,Ja,2,2,"span",5),e._UZ(2,"i",24),e._uU(3),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.data.show_warning),e.xp6(1),e.Q6J("ngClass",t.data.icon),e.xp6(1),e.hij(" ",t.data.name," ")}}function ja(n,i){1&n&&(e.TgZ(0,"span",31),e._uU(1," default "),e.qZA())}function el(n,i){1&n&&(e.TgZ(0,"span",32),e._uU(1," master "),e.qZA())}function tl(n,i){1&n&&(e.TgZ(0,"span",32),e._uU(1," secondary-zone "),e.qZA())}const Gn=function(n){return[n]};function nl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"div",34)(2,"button",35),e.NdJ("click",function(){e.CHM(t);const c=e.oxw().$implicit,F=e.oxw();return e.KtG(F.openModal(c,!0))}),e._UZ(3,"i",24),e.qZA()(),e.TgZ(4,"div",34)(5,"button",36),e.NdJ("click",function(){e.CHM(t);const c=e.oxw().$implicit,F=e.oxw();return e.KtG(F.delete(c))}),e._UZ(6,"i",24),e.qZA()()()}if(2&n){const t=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("title",o.editTitle),e.xp6(1),e.Q6J("disabled",o.getDisable()||t.data.secondary_zone),e.xp6(1),e.Q6J("ngClass",e.VKq(6,Gn,o.icons.edit)),e.xp6(1),e.Q6J("title",o.deleteTitle),e.xp6(1),e.Q6J("disabled",o.isDeleteDisabled(t)||t.data.secondary_zone),e.xp6(1),e.Q6J("ngClass",e.VKq(8,Gn,o.icons.destroy))}}function ol(n,i){if(1&n&&(e.YNc(0,Va,4,3,"span",25),e.YNc(1,ja,2,0,"span",26),e.YNc(2,el,2,0,"span",27),e.YNc(3,tl,2,0,"span",27),e.YNc(4,nl,7,10,"div",28)),2&n){const t=i.$implicit;e.Q6J("ngIf",t.data.name),e.xp6(1),e.Q6J("ngIf",t.data.is_default),e.xp6(1),e.Q6J("ngIf",t.data.is_master),e.xp6(1),e.Q6J("ngIf",t.data.secondary_zone),e.xp6(1),e.Q6J("ngIf",t.isFocused)}}function il(n,i){if(1&n&&(e.TgZ(0,"div",37)(1,"legend"),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._UZ(4,"cd-table-key-value",38),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.metadataTitle),e.xp6(2),e.Q6J("data",t.metadata)}}class _t{constructor(i,t,o,c,F,z,Q,J,j,oe,Te,Se){this.modalService=i,this.timerService=t,this.authStorageService=o,this.actionLabels=c,this.timerServiceVariable=F,this.router=z,this.rgwRealmService=Q,this.rgwZonegroupService=J,this.rgwZoneService=j,this.rgwDaemonService=oe,this.mgrModuleService=Te,this.notificationService=Se,this.sub=new An.w,this.messages={noDefaultRealm:"Please create a default realm first to enable this feature",noMasterZone:"Please create a master zone for each zone group to enable this feature",noRealmExists:"No realm exists",disableExport:"Please create master zone group and master zone for each of the realms"},this.icons=B.P,this.selection=new Vt.r,this.loadingIndicator=!0,this.nodes=[],this.treeOptions={useVirtualScroll:!0,nodeHeight:22,levelPadding:20,actionMapping:{mouse:{click:this.onNodeSelected.bind(this)}}},this.realms=[],this.zonegroups=[],this.zones=[],this.realmIds=[],this.zoneIds=[],this.defaultRealmId="",this.defaultZonegroupId="",this.defaultZoneId="",this.multisiteInfo=[],this.defaultsInfo=[],this.showMigrateAction=!1,this.editTitle="Edit",this.deleteTitle="Delete",this.disableExport=!0,this.restartGatewayMessage=!1,this.rgwModuleData=[],this.permission=this.authStorageService.getPermissions().rgw}openModal(i,t=!1){const o=t?i.data.type:i;this.bsModalRef=this.modalService.show("realm"===o?ta:"zonegroup"===o?Za:Sa,{resource:o,action:t?"edit":"create",info:i,defaultsInfo:this.defaultsInfo,multisiteInfo:this.multisiteInfo},{size:"lg"})}openMigrateModal(){this.bsModalRef=this.modalService.show(os,{multisiteInfo:this.multisiteInfo},{size:"lg"})}openImportModal(){this.bsModalRef=this.modalService.show(Ks,{multisiteInfo:this.multisiteInfo},{size:"lg"})}openExportModal(){this.bsModalRef=this.modalService.show(Fs,{defaultsInfo:this.defaultsInfo,multisiteInfo:this.multisiteInfo},{size:"lg"})}getDisableExport(){return this.realms.forEach(i=>{this.zonegroups.forEach(t=>{i.id===t.realm_id&&t.is_master&&""!==t.master_zone&&(this.disableExport=!1)})}),!this.rgwModuleStatus||(this.realms.length<1?this.messages.noRealmExists:!!this.disableExport&&this.messages.disableExport)}getDisableImport(){return!this.rgwModuleStatus}ngOnInit(){const c={permission:"read",icon:B.P.exchange,name:this.actionLabels.MIGRATE,click:()=>this.openMigrateModal()},F={permission:"read",icon:B.P.download,name:this.actionLabels.IMPORT,click:()=>this.openImportModal(),disable:()=>this.getDisableImport()},z={permission:"read",icon:B.P.upload,name:this.actionLabels.EXPORT,click:()=>this.openExportModal(),disable:()=>this.getDisableExport()};this.createTableActions=[{permission:"create",icon:B.P.add,name:this.actionLabels.CREATE+" Realm",click:()=>this.openModal("realm")},{permission:"create",icon:B.P.add,name:this.actionLabels.CREATE+" Zone Group",click:()=>this.openModal("zonegroup"),disable:()=>this.getDisable()},{permission:"create",icon:B.P.add,name:this.actionLabels.CREATE+" Zone",click:()=>this.openModal("zone")}],this.migrateTableAction=[c],this.importAction=[F],this.exportAction=[z];const Q=[this.rgwRealmService.getAllRealmsInfo(),this.rgwZonegroupService.getAllZonegroupsInfo(),this.rgwZoneService.getAllZonesInfo()];this.sub=this.timerService.get(()=>(0,x.D)(Q),2*this.timerServiceVariable.TIMER_SERVICE_PERIOD).subscribe(J=>{this.multisiteInfo=J,this.loadingIndicator=!1,this.nodes=this.abstractTreeData(J)},J=>{}),this.mgrModuleService.list().subscribe(J=>{this.rgwModuleData=J.filter(j=>"rgw"===j.name),this.rgwModuleData.length>0&&(this.rgwModuleStatus=this.rgwModuleData[0].enabled)})}ngOnDestroy(){this.sub.unsubscribe()}abstractTreeData(i){let t=[],o={},c={},F=[],z={},Q=[];if(this.realms=i[0].realms,this.zonegroups=i[1].zonegroups,this.zones=i[2].zones,this.defaultRealmId=i[0].default_realm,this.defaultZonegroupId=i[1].default_zonegroup,this.defaultZoneId=i[2].default_zone,this.defaultsInfo=this.getDefaultsEntities(this.defaultRealmId,this.defaultZonegroupId,this.defaultZoneId),this.realms.length>0)for(const J of this.realms){const j=this.rgwRealmService.getRealmTree(J,this.defaultRealmId);o=j.nodes,this.realmIds=this.realmIds.concat(j.realmIds);for(const oe of this.zonegroups)if(oe.realm_id===J.id){c=this.rgwZonegroupService.getZonegroupTree(oe,this.defaultZonegroupId,J);for(const Te of oe.zones){const Se=this.rgwZoneService.getZoneTree(Te,this.defaultZoneId,this.zones,oe,J);z=Se.nodes,this.zoneIds=this.zoneIds.concat(Se.zoneIds),Q.push(z),z={}}c.children=Q,Q=[],F.push(c),c={}}o.children=F,t.push(o),c={},z={},o={},F=[],Q=[]}if(this.zonegroups.length>0)for(const J of this.zonegroups)if(!this.realmIds.includes(J.realm_id)){o=this.rgwZonegroupService.getZonegroupTree(J,this.defaultZonegroupId);for(const j of J.zones){const oe=this.rgwZoneService.getZoneTree(j,this.defaultZoneId,this.zones,J);c=oe.nodes,this.zoneIds=this.zoneIds.concat(oe.zoneIds),F.push(c),c={}}o.children=F,t.push(o),c={},o={},F=[]}if(this.zones.length>0)for(const J of this.zones)this.zoneIds.length>0&&!this.zoneIds.includes(J.id)&&(o=this.rgwZoneService.getZoneTree(J,this.defaultZoneId,this.zones).nodes,t.push(o),o={});return this.realms.length<1&&this.zonegroups.length<1&&this.zones.length<1?[{name:"No nodes!"}]:(this.realmIds=[],this.zoneIds=[],this.getDisableMigrate(),this.rgwDaemonService.list().subscribe(J=>{const j=J.map(oe=>oe.realm_name);""!=this.defaultRealmId&&""!=this.defaultZonegroupId&&""!=this.defaultZoneId&&j.includes("")&&(this.restartGatewayMessage=!0)}),t)}getDefaultsEntities(i,t,o){const c=this.realms.find(oe=>oe.id===i),F=this.zonegroups.find(oe=>oe.id===t),z=this.zones.find(oe=>oe.id===o);return{defaultRealmName:void 0!==c?c.name:null,defaultZonegroupName:void 0!==F?F.name:null,defaultZoneName:void 0!==z?z.name:null}}onNodeSelected(i,t){sn.iM.ACTIVATE(i,t,!0),this.metadataTitle=t.data.name,this.metadata=t.data.info,t.data.show=!0}onUpdateData(){this.tree.treeModel.expandAll()}getDisable(){let i=!0;return""===this.defaultRealmId?this.messages.noDefaultRealm:(this.zonegroups.forEach(t=>{w().isEmpty(t.master_zone)&&(i=!1)}),i?(this.editTitle="Edit",!1):(this.editTitle="Please create a master zone for each existing zonegroup to enable this feature",this.messages.noMasterZone))}getDisableMigrate(){return this.showMigrateAction=0===this.realms.length&&1===this.zonegroups.length&&"default"===this.zonegroups[0].name&&1===this.zones.length&&"default"===this.zones[0].name,this.showMigrateAction}isDeleteDisabled(i){let t=!1,o=0;if("realm"===i.data.type&&i.data.is_default&&this.realms.length<2&&(t=!0),"zonegroup"===i.data.type)if(this.zonegroups.length<2)this.deleteTitle="You can not delete the only zonegroup available",t=!0;else if(i.data.is_default)this.deleteTitle="You can not delete the default zonegroup",t=!0;else if(i.data.is_master){for(let c of this.zonegroups)if(!0===c.is_master&&(o++,o>1))break;o<2&&(this.deleteTitle="You can not delete the only master zonegroup available",t=!0)}return"zone"===i.data.type&&(this.zones.length<2?(this.deleteTitle="You can not delete the only zone available",t=!0):i.data.is_default?(this.deleteTitle="You can not delete the default zone",t=!0):i.data.is_master&&i.data.zone_zonegroup.zones.length<2&&(this.deleteTitle="You can not delete the master zone as there are no more zones in this zonegroup",t=!0)),t||(this.deleteTitle="Delete"),t}delete(i){"realm"===i.data.type?this.modalRef=this.modalService.show(tn.M,{itemDescription:"" + i.data.type + " " + i.data.name + "",itemNames:[`${i.data.name}`],submitAction:()=>{this.rgwRealmService.delete(i.data.name).subscribe(()=>{this.modalRef.close(),this.notificationService.show(I.k.success,"Realm: '" + i.data.name + "' deleted successfully")},()=>{this.modalRef.componentInstance.stopLoadingSpinner()})}}):"zonegroup"===i.data.type?this.modalRef=this.modalService.show(Ts,{zonegroup:i.data}):"zone"===i.data.type&&(this.modalRef=this.modalService.show(ss,{zone:i.data}))}enableRgwModule(){let i;const t=()=>{(0,H_.H)(2e3).subscribe(()=>{this.mgrModuleService.list().subscribe(()=>{this.notificationService.suspendToasties(!1),this.blockUI.stop(),this.notificationService.show(I.k.success,"Enabled RGW Module"),this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate(["/rgw/multisite"])})},()=>{t()})})};this.rgwModuleStatus||(i=this.mgrModuleService.enable("rgw")),i.subscribe(()=>{},()=>{this.notificationService.suspendToasties(!0),this.blockUI.start("Reconnecting, please wait ..."),t()})}}_t.\u0275fac=function(i){return new(i||_t)(e.Y36(Qe.Z),e.Y36(Ba.f),e.Y36(nt.j),e.Y36(T.p4),e.Y36(T.eu),e.Y36(P.F0),e.Y36(ot.y),e.Y36(rt.K),e.Y36(it.g),e.Y36(l.b),e.Y36(za.N),e.Y36(ne.g))},_t.\u0275cmp=e.Xpm({type:_t,selectors:[["cd-rgw-multisite-details"]],viewQuery:function(i,t){if(1&i&&e.Gf(qa,5),2&i){let o;e.iGM(o=e.CRH())&&(t.tree=o.first)}},decls:21,vars:18,consts:function(){let n,i,t;return n="Topology Viewer",i="In order to access the import/export feature, the rgw module must be enabled " + "\ufffd#2\ufffd" + "Enable" + "\ufffd/#2\ufffd" + "",t="Please restart all Ceph Object Gateway instances in all zones to ensure consistent multisite configuration updates. " + "\ufffd#2\ufffd" + " Cluster->Services" + "\ufffd/#2\ufffd" + "",[[1,"row"],[1,"col-sm-12","col-lg-12"],["type","info","spacingClass","mb-3","class","d-flex align-items-center",4,"ngIf"],["type","warning","spacingClass","mb-3",4,"ngIf"],[1,"btn-group","mb-4","me-2",3,"permission","selection","tableActions"],[4,"ngIf"],[1,"btn-group","mb-4","me-2",3,"permission","btnColor","selection","tableActions"],[1,"card"],[1,"card-header"],n,[1,"card-body"],[1,"col-sm-6","col-lg-6","tree-container"],[3,"ngClass",4,"ngIf"],[3,"nodes","options","updateData"],["tree",""],["treeNodeTemplate",""],["class","col-sm-6 col-lg-6 metadata",4,"ngIf"],["type","info","spacingClass","mb-3",1,"d-flex","align-items-center"],i,["type","button",1,"btn","btn-light","mx-2",3,"click"],["type","warning","spacingClass","mb-3"],t,["routerLink","/services",1,"text-decoration-underline"],[1,"btn-group","mb-4","me-2","secondary",3,"permission","btnColor","selection","tableActions"],[3,"ngClass"],["class","me-3",4,"ngIf"],["class","badge badge-success me-2",4,"ngIf"],["class","badge badge-warning me-2",4,"ngIf"],["class","btn-group align-inline-btns","role","group",4,"ngIf"],[1,"me-3"],[1,"text-danger",3,"title","ngClass"],[1,"badge","badge-success","me-2"],[1,"badge","badge-warning","me-2"],["role","group",1,"btn-group","align-inline-btns"],[3,"title"],["type","button",1,"btn","btn-light","dropdown-toggle-split","ms-1",3,"disabled","click"],["type","button",1,"btn","btn-light","ms-1",3,"disabled","click"],[1,"col-sm-6","col-lg-6","metadata"],["cdTableDetail","",3,"data"]]},template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div"),e.YNc(3,Ha,3,0,"cd-alert-panel",2),e.YNc(4,Xa,3,0,"cd-alert-panel",3),e._UZ(5,"cd-table-actions",4),e.YNc(6,Ka,2,4,"span",5),e._UZ(7,"cd-table-actions",6)(8,"cd-table-actions",6),e.qZA(),e.TgZ(9,"div",7)(10,"div",8),e.SDv(11,9),e.qZA(),e.TgZ(12,"div",10)(13,"div",0)(14,"div",11),e.YNc(15,Ya,1,5,"i",12),e.TgZ(16,"tree-root",13,14),e.NdJ("updateData",function(){return t.onUpdateData()}),e.YNc(18,ol,5,5,"ng-template",null,15,e.W1O),e.qZA()(),e.YNc(20,il,5,2,"div",16),e.qZA()()()()()),2&i&&(e.xp6(3),e.Q6J("ngIf",!t.rgwModuleStatus),e.xp6(1),e.Q6J("ngIf",t.restartGatewayMessage),e.xp6(1),e.Q6J("permission",t.permission)("selection",t.selection)("tableActions",t.createTableActions),e.xp6(1),e.Q6J("ngIf",t.showMigrateAction),e.xp6(1),e.Q6J("permission",t.permission)("btnColor","light")("selection",t.selection)("tableActions",t.importAction),e.xp6(1),e.Q6J("permission",t.permission)("btnColor","light")("selection",t.selection)("tableActions",t.exportAction),e.xp6(7),e.Q6J("ngIf",t.loadingIndicator),e.xp6(1),e.Q6J("nodes",t.nodes)("options",t.treeOptions),e.xp6(4),e.Q6J("ngIf",t.metadata))},dependencies:[g.mk,g.O5,Ve.G,Rn.b,on.K,Ae.o,P.rH,sn.qr],styles:[".tree-container[_ngcontent-%COMP%]{height:calc(100vh - 200px)}.align-inline-btns[_ngcontent-%COMP%]{margin-left:5em}.btn[_ngcontent-%COMP%]:disabled{pointer-events:none}"]}),(0,L.gn)([(0,ka.bH)(),(0,L.w6)("design:type",Object)],_t.prototype,"blockUI",void 0);var rl=p(40267),yn=p(83357),_l=p(7357),sl=p(11656),al=p(4167),ll=p(43190),cl=p(68307),ul=p(47349),dl=p(79241),fl=p(98677),pl=p(30490),gl=p(9219),Tl=p(17401),El=p(9024),Rl=p(54740);const ct=function(n,i){return[n,i]};let ml=(()=>{class n{constructor(){this.icons=B.P}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-sync-primary-zone"]],inputs:{realm:"realm",zonegroup:"zonegroup",zone:"zone"},decls:17,vars:23,consts:[[1,"pb-5"],[1,"pt-2",3,"ngClass"],[1,"badge","badge-info","mt-2"],[1,"mt-2",3,"ngClass"]],template:function(t,o){1&t&&(e.TgZ(0,"ul",0)(1,"li"),e._UZ(2,"i",1),e.qZA(),e.TgZ(3,"li",2),e._uU(4),e.qZA(),e.TgZ(5,"li"),e._UZ(6,"i",3),e.qZA(),e.TgZ(7,"li"),e._UZ(8,"i",3),e.qZA(),e.TgZ(9,"p",2),e._uU(10),e.qZA(),e.TgZ(11,"li"),e._UZ(12,"i",3),e.qZA(),e.TgZ(13,"li"),e._UZ(14,"i",3),e.qZA(),e.TgZ(15,"li",2),e._uU(16),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngClass",e.WLB(8,ct,o.icons.large2x,o.icons.reweight)),e.xp6(2),e.Oqu(o.realm),e.xp6(2),e.Q6J("ngClass",e.WLB(11,ct,o.icons.large2x,o.icons.down)),e.xp6(2),e.Q6J("ngClass",e.WLB(14,ct,o.icons.large2x,o.icons.cubes)),e.xp6(2),e.Oqu(o.zonegroup),e.xp6(2),e.Q6J("ngClass",e.WLB(17,ct,o.icons.large2x,o.icons.down)),e.xp6(2),e.Q6J("ngClass",e.WLB(20,ct,o.icons.large2x,o.icons.deploy)),e.xp6(2),e.Oqu(o.zone))},dependencies:[g.mk],styles:["ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}.align-primary-zone[_ngcontent-%COMP%]{padding-left:4em}"]}),n})();var Ln=p(90068);function hl(n,i){1&n&&(e.TgZ(0,"span")(1,"ul",1)(2,"li")(3,"b"),e._uU(4,"Status:"),e.qZA()(),e.TgZ(5,"li"),e._uU(6,"No Sync"),e.qZA()()())}function Ml(n,i){if(1&n&&(e.TgZ(0,"span")(1,"b"),e._uU(2),e.ALo(3,"titlecase"),e.qZA(),e._uU(4),e.ALo(5,"titlecase"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.split(":")[0])),e.xp6(2),e.hij(":",e.lcZ(5,4,t.split(":")[1])," ")}}function Sl(n,i){if(1&n&&(e.TgZ(0,"span")(1,"b"),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,1,t))}}function Cl(n,i){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,Ml,6,6,"span",0),e.YNc(2,Sl,4,3,"span",0),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null==t?null:t.includes(":")),e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.includes(":")))}}function Fl(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t)," ")}}function Ol(n,i){if(1&n&&(e.TgZ(0,"li"),e.YNc(1,Cl,3,2,"span",0),e.YNc(2,Fl,3,3,"span",0),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.includes(o.metadataSyncInfo.syncstatus)||null!=t&&t.includes("failed")||null!=t&&t.includes("error"))),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.includes("failed"))||(null==t?null:t.includes("error")))}}function Nl(n,i){if(1&n&&(e.TgZ(0,"ul",8)(1,"li")(2,"h5")(3,"b"),e._uU(4,"Metadata Sync Status:"),e.qZA()()(),e.YNc(5,Ol,3,2,"li",9),e.qZA()),2&n){const t=e.oxw(2);e.xp6(5),e.Q6J("ngForOf",t.metadataSyncInfo.fullSyncStatus)}}function Al(n,i){1&n&&(e.TgZ(0,"li",10),e._uU(1,"Up to Date"),e.qZA())}function Pl(n,i){if(1&n&&(e.TgZ(0,"a",12),e.SDv(1,13),e.ALo(2,"titlecase"),e.qZA()),2&n){e.oxw(2);const t=e.MAs(2),o=e.oxw();e.Q6J("ngbPopover",t),e.xp6(2),e.pQV(e.lcZ(2,2,o.metadataSyncInfo.syncstatus)),e.QtT(1)}}function bl(n,i){if(1&n&&(e.TgZ(0,"a",12),e.SDv(1,14),e.qZA()),2&n){e.oxw(2);const t=e.MAs(2);e.Q6J("ngbPopover",t)}}function Il(n,i){if(1&n&&(e.YNc(0,Pl,3,4,"a",11),e.YNc(1,bl,2,1,"a",11)),2&n){const t=e.oxw(2);e.Q6J("ngIf","Not Syncing From Zone"!==t.metadataSyncInfo.syncstatus),e.xp6(1),e.Q6J("ngIf","Not Syncing From Zone"===t.metadataSyncInfo.syncstatus)}}const Gl=function(n){return[n]};function yl(n,i){if(1&n&&(e.TgZ(0,"li"),e._UZ(1,"i",15),e.TgZ(2,"a",16),e.SDv(3,17),e.qZA()()),2&n){e.oxw();const t=e.MAs(2),o=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(2,Gl,o.icons.danger)),e.xp6(1),e.Q6J("ngbPopover",t)}}function Ll(n,i){if(1&n&&(e.TgZ(0,"li",18),e._uU(1),e.ALo(2,"relativeDate"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,t.metadataSyncInfo.timestamp))}}function Dl(n,i){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,Nl,6,1,"ng-template",null,2,e.W1O),e.TgZ(3,"ul",1),e.YNc(4,Al,2,0,"ng-template",null,3,e.W1O),e.YNc(6,Il,2,2,"ng-template",null,4,e.W1O),e.TgZ(8,"li")(9,"b"),e._uU(10,"Status:"),e.qZA()(),e.YNc(11,yl,4,4,"li",5),e.TgZ(12,"li",6),e._uU(13," Last Synced: "),e.qZA(),e.YNc(14,Ll,3,3,"li",7),e.qZA()()),2&n){const t=e.MAs(5),o=e.MAs(7),c=e.oxw();e.xp6(11),e.Q6J("ngIf",(null==c.metadataSyncInfo.syncstatus?null:c.metadataSyncInfo.syncstatus.includes("failed"))||(null==c.metadataSyncInfo.syncstatus?null:c.metadataSyncInfo.syncstatus.includes("error")))("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",c.metadataSyncInfo.timestamp)("ngIfElse",t)}}let vl=(()=>{class n{constructor(){this.icons=B.P,this.metadataSyncInfo={}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-sync-metadata-info"]],inputs:{metadataSyncInfo:"metadataSyncInfo"},decls:2,vars:2,consts:function(){let i,t,o;return i="" + "\ufffd0\ufffd" + "",t="Not Syncing",o="Error",[[4,"ngIf"],[1,"me-2"],["metadataSyncPopover",""],["upToDateTpl",""],["showMetadataStatus",""],[4,"ngIf","ngIfElse"],[1,"mt-4","fw-bold"],["class","badge badge-info",4,"ngIf","ngIfElse"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"badge","badge-success"],["class","lead text-primary","placement","top","popoverClass","rgw-overview-card-popover",3,"ngbPopover",4,"ngIf"],["placement","top","popoverClass","rgw-overview-card-popover",1,"lead","text-primary",3,"ngbPopover"],i,t,[1,"text-danger",3,"ngClass"],["placement","top","popoverClass","rgw-overview-card-popover",1,"lead","text-danger",3,"ngbPopover"],o,[1,"badge","badge-info"]]},template:function(t,o){1&t&&(e.YNc(0,hl,7,0,"span",0),e.YNc(1,Dl,15,4,"span",0)),2&t&&(e.Q6J("ngIf","no sync (zone is master)"===o.metadataSyncInfo),e.xp6(1),e.Q6J("ngIf","no sync (zone is master)"!==o.metadataSyncInfo))},dependencies:[g.mk,g.sg,g.O5,v.o8,g.rS,Ln.h],styles:["ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}"]}),n})();function wl(n,i){if(1&n&&(e.TgZ(0,"span")(1,"b"),e._uU(2),e.ALo(3,"titlecase"),e.qZA(),e._uU(4),e.ALo(5,"titlecase"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.split(": ")[0])),e.xp6(2),e.hij(":",e.lcZ(5,4,t.split(": ")[1])," ")}}function Wl(n,i){if(1&n&&(e.TgZ(0,"span")(1,"b"),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,1,t))}}function Ul(n,i){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,wl,6,6,"span",9),e.YNc(2,Wl,4,3,"span",9),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null==t?null:t.includes(":")),e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.includes(":")))}}function $l(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t)," ")}}function xl(n,i){if(1&n&&(e.TgZ(0,"li"),e.YNc(1,Ul,3,2,"span",9),e.YNc(2,$l,3,3,"span",9),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.includes(o.zone.name)||null!=t&&t.includes(o.zone.syncstatus)||null!=t&&t.includes("failed")||null!=t&&t.includes("error"))),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.includes("failed"))||(null==t?null:t.includes("error")))}}function Zl(n,i){if(1&n&&(e.TgZ(0,"ul",7)(1,"li")(2,"h5")(3,"b"),e._uU(4,"Sync Status:"),e.qZA()()(),e.YNc(5,xl,3,2,"li",8),e.qZA()),2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.zone.fullSyncStatus)}}function kl(n,i){1&n&&(e.TgZ(0,"li",10),e._uU(1,"Up to Date"),e.qZA())}function Bl(n,i){if(1&n&&(e.TgZ(0,"a",12),e.SDv(1,13),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=e.oxw(2),o=e.MAs(1);e.Q6J("ngbPopover",o),e.xp6(2),e.pQV(e.lcZ(2,2,t.zone.syncstatus)),e.QtT(1)}}function zl(n,i){if(1&n&&(e.TgZ(0,"a",12),e.SDv(1,14),e.qZA()),2&n){e.oxw(2);const t=e.MAs(1);e.Q6J("ngbPopover",t)}}function ql(n,i){if(1&n&&(e.YNc(0,Bl,3,4,"a",11),e.YNc(1,zl,2,1,"a",11)),2&n){const t=e.oxw();e.Q6J("ngIf","Not Syncing From Zone"!==t.zone.syncstatus),e.xp6(1),e.Q6J("ngIf","Not Syncing From Zone"===t.zone.syncstatus)}}const Hl=function(n){return[n]};function Xl(n,i){if(1&n&&(e.TgZ(0,"li"),e._UZ(1,"i",15),e.TgZ(2,"a",16),e.SDv(3,17),e.qZA()()),2&n){const t=e.oxw(),o=e.MAs(1);e.xp6(1),e.Q6J("ngClass",e.VKq(2,Hl,t.icons.danger)),e.xp6(1),e.Q6J("ngbPopover",o)}}function Kl(n,i){if(1&n&&(e.TgZ(0,"li",18),e._uU(1),e.ALo(2,"relativeDate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.zone.timestamp))}}let Ql=(()=>{class n{constructor(){this.icons=B.P,this.zone={}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-sync-data-info"]],inputs:{zone:"zone"},decls:14,vars:4,consts:function(){let i,t,o;return i="" + "\ufffd0\ufffd" + "",t="Not Syncing",o="Error",[["syncPopover",""],[1,"me-2"],["upToDateTpl",""],["showStatus",""],[4,"ngIf","ngIfElse"],[1,"mt-4","fw-bold"],["class","badge badge-info",4,"ngIf","ngIfElse"],[1,"text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"badge","badge-success"],["class","lead text-primary","placement","top","popoverClass","rgw-overview-card-popover",3,"ngbPopover",4,"ngIf"],["placement","top","popoverClass","rgw-overview-card-popover",1,"lead","text-primary",3,"ngbPopover"],i,t,[1,"text-danger",3,"ngClass"],["placement","top","popoverClass","rgw-overview-card-popover",1,"lead","text-danger",3,"ngbPopover"],o,[1,"badge","badge-info"]]},template:function(t,o){if(1&t&&(e.YNc(0,Zl,6,1,"ng-template",null,0,e.W1O),e.TgZ(2,"ul",1),e.YNc(3,kl,2,0,"ng-template",null,2,e.W1O),e.YNc(5,ql,2,2,"ng-template",null,3,e.W1O),e.TgZ(7,"li")(8,"b"),e._uU(9,"Status:"),e.qZA()(),e.YNc(10,Xl,4,4,"li",4),e.TgZ(11,"li",5),e._uU(12," Last Synced: "),e.qZA(),e.YNc(13,Kl,3,3,"li",6),e.qZA()),2&t){const c=e.MAs(4),F=e.MAs(6);e.xp6(10),e.Q6J("ngIf",(null==o.zone.syncstatus?null:o.zone.syncstatus.includes("failed"))||(null==o.zone.syncstatus?null:o.zone.syncstatus.includes("error")))("ngIfElse",F),e.xp6(3),e.Q6J("ngIf",o.zone.timestamp)("ngIfElse",c)}},dependencies:[g.mk,g.sg,g.O5,v.o8,g.rS,Ln.h],styles:["ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}"]}),n})();function Yl(n,i){if(1&n&&e._UZ(0,"cd-card-row",25),2&n){const t=e.oxw();e.Q6J("data",t.rgwDaemonCount)}}function Jl(n,i){if(1&n&&e._UZ(0,"cd-card-row",26),2&n){const t=e.oxw();e.Q6J("data",t.rgwRealmCount)}}function Vl(n,i){if(1&n&&e._UZ(0,"cd-card-row",27),2&n){const t=e.oxw();e.Q6J("data",t.rgwZonegroupCount)}}function jl(n,i){if(1&n&&e._UZ(0,"cd-card-row",28),2&n){const t=e.oxw();e.Q6J("data",t.rgwZoneCount)}}function ec(n,i){if(1&n&&e._UZ(0,"cd-card-row",29),2&n){const t=e.oxw();e.Q6J("data",t.rgwBucketCount)}}function tc(n,i){if(1&n&&e._UZ(0,"cd-card-row",30),2&n){const t=e.oxw();e.Q6J("data",t.UserCount)}}function nc(n,i){if(1&n&&e._UZ(0,"cd-card-row",31),2&n){const t=e.oxw();e.Q6J("data",t.objectCount)}}function oc(n,i){1&n&&(e.TgZ(0,"span",32)(1,"cd-alert-panel",33),e.tHW(2,34),e._UZ(3,"cd-doc",35),e.N_p(),e.qZA()())}const ln=function(n,i,t){return[n,i,t]};function ic(n,i){if(1&n&&(e.TgZ(0,"span",36),e._UZ(1,"i",37),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.kEZ(1,ln,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function rc(n,i){if(1&n&&(e.TgZ(0,"span",36),e._UZ(1,"i",37),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.kEZ(1,ln,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function _c(n,i){if(1&n&&(e.TgZ(0,"span",36),e._UZ(1,"cd-rgw-sync-primary-zone",43),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("realm",t.realm)("zonegroup",t.zonegroup)("zone",t.zone)}}function sc(n,i){if(1&n&&(e.TgZ(0,"span",36),e._UZ(1,"i",37),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.kEZ(1,ln,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function ac(n,i){if(1&n&&(e.TgZ(0,"span",51),e._UZ(1,"cd-rgw-sync-metadata-info",52),e.qZA()),2&n){const t=e.oxw(6);e.xp6(1),e.Q6J("metadataSyncInfo",t.metadataSyncInfo)}}function lc(n,i){if(1&n&&(e.TgZ(0,"span",53),e._UZ(1,"cd-rgw-sync-data-info",54),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("zone",t)}}const cc=function(n){return{"border-left":n}};function uc(n,i){if(1&n&&(e.TgZ(0,"cd-card",48),e.YNc(1,ac,2,1,"span",49),e.YNc(2,lc,2,1,"span",50),e.qZA()),2&n){const t=i.$implicit;e.Q6J("cardTitle",t)("ngClass",e.VKq(6,cc,"Data Sync"===t))("alignItemsCenter",!0)("justifyContentCenter",!0),e.xp6(1),e.Q6J("ngIf","Metadata Sync"===t),e.xp6(1),e.Q6J("ngIf","Data Sync"===t)}}function dc(n,i){if(1&n&&(e.TgZ(0,"cd-card",45)(1,"div",46),e.YNc(2,uc,3,8,"cd-card",47),e.qZA()()),2&n){const t=i.$implicit,o=e.oxw(4);e.s9C("cardTitle",t.name),e.xp6(2),e.Q6J("ngForOf",o.chartTitles)}}function fc(n,i){if(1&n&&(e.TgZ(0,"div",1),e.YNc(1,dc,3,2,"cd-card",44),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.replicaZonesInfo)("ngForTrackBy",t.trackByFn)}}function pc(n,i){if(1&n&&(e.TgZ(0,"div",39)(1,"cd-card",40),e.YNc(2,rc,2,5,"span",23),e.YNc(3,_c,2,3,"span",23),e.qZA(),e.TgZ(4,"div",41)(5,"cd-card",42),e.YNc(6,sc,2,5,"span",23),e.YNc(7,fc,2,2,"div",24),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("alignItemsCenter",!0)("justifyContentCenter",!0),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading),e.xp6(3),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading)}}function gc(n,i){if(1&n&&(e.TgZ(0,"div",1),e.YNc(1,pc,8,6,"div",38),e.qZA()),2&n){const t=e.oxw(),o=e.MAs(30);e.xp6(1),e.Q6J("ngIf",t.showMultisiteCard)("ngIfElse",o)}}const Tc=function(){return["Requests/sec"]},Ec=function(n){return[n]},Dn=function(){return["GET","PUT"]},vn=function(n,i){return[n,i]};let Rc=(()=>{class n{constructor(t,o,c,F,z,Q,J,j,oe,Te){this.authStorageService=t,this.healthService=o,this.refreshIntervalService=c,this.rgwDaemonService=F,this.rgwRealmService=z,this.rgwZonegroupService=Q,this.rgwZoneService=J,this.rgwBucketService=j,this.prometheusService=oe,this.rgwMultisiteService=Te,this.icons=B.P,this.interval=new An.w,this.rgwDaemonCount=0,this.rgwRealmCount=0,this.rgwZonegroupCount=0,this.rgwZoneCount=0,this.rgwBucketCount=0,this.objectCount=0,this.UserCount=0,this.totalPoolUsedBytes=0,this.averageObjectSize=0,this.multisiteInfo=[],this.queriesResults={RGW_REQUEST_PER_SECOND:[],BANDWIDTH:[],AVG_GET_LATENCY:[],AVG_PUT_LATENCY:[]},this.chartTitles=["Metadata Sync","Data Sync"],this.replicaZonesInfo=[],this.showMultisiteCard=!0,this.loading=!0,this.subject=new _l.t,this.syncCardLoading=!0,this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.interval=this.refreshIntervalService.intervalData$.subscribe(()=>{this.daemonSub=this.rgwDaemonService.list().subscribe(t=>{this.rgwDaemonCount=t.length}),this.HealthSub=this.healthService.getClusterCapacity().subscribe(t=>{this.objectCount=t.total_objects,this.totalPoolUsedBytes=t.total_pool_bytes_used,this.averageObjectSize=t.average_object_size}),this.getSyncStatus()}),this.BucketSub=this.rgwBucketService.getTotalBucketsAndUsersLength().subscribe(t=>{this.rgwBucketCount=t.buckets_count,this.UserCount=t.users_count}),this.realmSub=this.rgwRealmService.list().subscribe(t=>{this.rgwRealmCount=t.realms.length}),this.ZonegroupSub=this.rgwZonegroupService.list().subscribe(t=>{this.rgwZonegroupCount=t.zonegroups.length}),this.ZoneSUb=this.rgwZoneService.list().subscribe(t=>{this.rgwZoneCount=t.zones.length}),this.getPrometheusData(this.prometheusService.lastHourDateObject),this.multisiteSyncStatus$=this.subject.pipe((0,ll.w)(()=>this.rgwMultisiteService.getSyncStatus().pipe((0,cl.b)(t=>{this.loading=!1,this.replicaZonesInfo=t.dataSyncInfo,this.metadataSyncInfo=t.metadataSyncInfo,0===this.replicaZonesInfo.length&&(this.showMultisiteCard=!1,this.syncCardLoading=!1,this.loading=!1),[this.realm,this.zonegroup,this.zone]=t.primaryZoneData}),(0,u.K)(t=>(this.showMultisiteCard=!1,this.syncCardLoading=!1,this.loading=!1,t.preventDefault(),(0,S.of)(!0))))),(0,ul.d)(1))}ngOnDestroy(){this.interval.unsubscribe(),this.daemonSub.unsubscribe(),this.realmSub.unsubscribe(),this.ZonegroupSub.unsubscribe(),this.ZoneSUb.unsubscribe(),this.BucketSub.unsubscribe(),this.HealthSub.unsubscribe(),this.prometheusService.unsubscribe()}getPrometheusData(t){this.queriesResults=this.prometheusService.getPrometheusQueriesData(t,al.p,this.queriesResults,!0)}getSyncStatus(){this.subject.next()}trackByFn(t){return t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(nt.j),e.Y36(dl.z),e.Y36(fl.s),e.Y36(l.b),e.Y36(ot.y),e.Y36(rt.K),e.Y36(it.g),e.Y36(D.o),e.Y36(sl.Q),e.Y36(an.o))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-overview-dashboard"]],decls:34,vars:38,consts:function(){let i;return i=" Multi-site needs to be configured in order to see the multi-site sync status. Please consult the " + "\ufffd#3\ufffd" + "" + "\ufffd/#3\ufffd" + " on how to configure and enable the multi-site functionality. ",[[1,"container-fluid"],[1,"row"],["cardTitle","Inventory","aria-label","Inventory card",1,"col-sm-3","px-3","d-flex"],["link","/rgw/daemon","title","Gateway","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/multisite","title","Realm","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/multisite","title","Zone Group","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/multisite","title","Zone","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/bucket","title","Bucket","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/user","title","User","summaryType","simplified",3,"data",4,"ngIf"],["title","Object","summaryType","simplified",3,"data",4,"ngIf"],["cardTitle","Performance Statistics","ria-label","Performance Statistics card",1,"col-sm-6","d-flex"],[1,"ms-4","me-4","mt-0"],[3,"selectedTime"],["chartTitle","Requests/sec","dataUnits","",3,"labelsArray","dataArray"],["chartTitle","Latency","dataUnits","ms",3,"labelsArray","dataArray"],["chartTitle","Bandwidth","dataUnits","B",3,"labelsArray","dataArray"],[1,"col-lg-3"],["cardTitle","Used Capacity","aria-label","Used Capacity",1,"col-sm-2","d-flex","w-100","h-50","pb-3",3,"alignItemsCenter","justifyContentCenter"],[1,"ms-4","me-4","text-center"],["cardTitle","Average Object Size","aria-label","Avg Object Size",1,"col-sm-2","d-flex","w-100","h-50","pt-3",3,"alignItemsCenter","justifyContentCenter"],[1,"row","pt-4","pb-4"],["cardTitle","Multi-Site Sync Status"],["notConfigured",""],["class","d-flex justify-content-center",4,"ngIf"],["class","row",4,"ngIf"],["link","/rgw/daemon","title","Gateway","summaryType","simplified",3,"data"],["link","/rgw/multisite","title","Realm","summaryType","simplified",3,"data"],["link","/rgw/multisite","title","Zone Group","summaryType","simplified",3,"data"],["link","/rgw/multisite","title","Zone","summaryType","simplified",3,"data"],["link","/rgw/bucket","title","Bucket","summaryType","simplified",3,"data"],["link","/rgw/user","title","User","summaryType","simplified",3,"data"],["title","Object","summaryType","simplified",3,"data"],[1,"pe-5","ps-5"],["type","info"],i,["section","multisite"],[1,"d-flex","justify-content-center"],[3,"ngClass"],["class","row pt-2",4,"ngIf","ngIfElse"],[1,"row","pt-2"],["cardTitle","Primary Source Zone",1,"col-lg-3","d-flex","justify-content-center","align-primary-zone",3,"alignItemsCenter","justifyContentCenter"],[1,"col-lg-9"],["cardTitle","Source Zones",1,"d-flex","h-100"],[3,"realm","zonegroup","zone"],["cardType","zone","shadowClass","true","class","col-sm-9 col-lg-6 align-replica-zones d-flex pt-4","aria-label","Source Zones Card",3,"cardTitle",4,"ngFor","ngForOf","ngForTrackBy"],["cardType","zone","shadowClass","true","aria-label","Source Zones Card",1,"col-sm-9","col-lg-6","align-replica-zones","d-flex","pt-4",3,"cardTitle"],[1,"row","pb-4","ps-3","pe-3"],["cardType","syncCards","removeBorder","true","class","col-sm-9 col-lg-6","aria-label","Charts Card",3,"cardTitle","ngClass","alignItemsCenter","justifyContentCenter",4,"ngFor","ngForOf"],["cardType","syncCards","removeBorder","true","aria-label","Charts Card",1,"col-sm-9","col-lg-6",3,"cardTitle","ngClass","alignItemsCenter","justifyContentCenter"],["class","me-2 text-center",4,"ngIf"],["class","me-2",4,"ngIf"],[1,"me-2","text-center"],[3,"metadataSyncInfo"],[1,"me-2"],[3,"zone"]]},template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"cd-card",2),e.YNc(3,Yl,1,1,"cd-card-row",3),e.YNc(4,Jl,1,1,"cd-card-row",4),e.YNc(5,Vl,1,1,"cd-card-row",5),e.YNc(6,jl,1,1,"cd-card-row",6),e.YNc(7,ec,1,1,"cd-card-row",7),e.YNc(8,tc,1,1,"cd-card-row",8),e.YNc(9,nc,1,1,"cd-card-row",9),e.qZA(),e.TgZ(10,"cd-card",10)(11,"div",11)(12,"cd-dashboard-time-selector",12),e.NdJ("selectedTime",function(F){return o.getPrometheusData(F)}),e.qZA(),e._UZ(13,"cd-dashboard-area-chart",13)(14,"cd-dashboard-area-chart",14)(15,"cd-dashboard-area-chart",15),e.qZA()(),e.TgZ(16,"div",16)(17,"cd-card",17)(18,"span",18)(19,"h1"),e._uU(20),e.ALo(21,"dimlessBinary"),e.qZA()()(),e.TgZ(22,"cd-card",19)(23,"span",18)(24,"h1"),e._uU(25),e.ALo(26,"dimlessBinary"),e.qZA()()()()(),e.TgZ(27,"div",20)(28,"cd-card",21),e.YNc(29,oc,4,0,"ng-template",null,22,e.W1O),e.YNc(31,ic,2,5,"span",23),e.YNc(32,gc,2,2,"div",24),e.ALo(33,"async"),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",null!=o.rgwDaemonCount),e.xp6(1),e.Q6J("ngIf",null!=o.rgwRealmCount),e.xp6(1),e.Q6J("ngIf",null!=o.rgwZonegroupCount),e.xp6(1),e.Q6J("ngIf",null!=o.rgwZoneCount),e.xp6(1),e.Q6J("ngIf",null!=o.rgwBucketCount),e.xp6(1),e.Q6J("ngIf",null!=o.UserCount),e.xp6(1),e.Q6J("ngIf",null!=o.objectCount),e.xp6(4),e.Q6J("labelsArray",e.DdM(27,Tc))("dataArray",e.VKq(28,Ec,o.queriesResults.RGW_REQUEST_PER_SECOND)),e.xp6(1),e.Q6J("labelsArray",e.DdM(30,Dn))("dataArray",e.WLB(31,vn,o.queriesResults.AVG_GET_LATENCY,o.queriesResults.AVG_PUT_LATENCY)),e.xp6(1),e.Q6J("labelsArray",e.DdM(34,Dn))("dataArray",e.WLB(35,vn,o.queriesResults.GET_BANDWIDTH,o.queriesResults.PUT_BANDWIDTH)),e.xp6(2),e.Q6J("alignItemsCenter",!0)("justifyContentCenter",!0),e.xp6(3),e.Oqu(e.lcZ(21,21,o.totalPoolUsedBytes)),e.xp6(2),e.Q6J("alignItemsCenter",!0)("justifyContentCenter",!0),e.xp6(3),e.Oqu(e.lcZ(26,23,o.averageObjectSize)),e.xp6(6),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",e.lcZ(33,25,o.multisiteSyncStatus$)))},dependencies:[g.mk,g.sg,g.O5,Ve.G,pl.K,gl.A,Tl.e,El.S,Rl.M,ml,vl,Ql,g.Ov,nn.$],styles:["hr[_ngcontent-%COMP%]{margin-bottom:2px;margin-top:2px}.list-group-item[_ngcontent-%COMP%]{border:0}.align-replica-zones[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;padding-left:2em;padding-right:2em}ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}.align-primary-zone[_ngcontent-%COMP%]{padding-left:4em}.border-left[_ngcontent-%COMP%]{border-left:1px solid rgba(0,0,0,.1254901961)}"]}),n})();var mc=p(46767);let wn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.ez,m.m,_.u5,_.UX,y.B,v.Oz,P.Bz,v.HK,v.dT,Z.b,sn.xc,rl.t,mc.d]}),n})();const hc=[{path:"",redirectTo:"rbd",pathMatch:"full"},{path:"daemon",component:yi,data:{breadcrumbs:"Gateways"}},{path:"user",data:{breadcrumbs:"Users"},children:[{path:"",component:q_},{path:T.MQ.CREATE,component:Fn,data:{breadcrumbs:T.Qn.CREATE}},{path:`${T.MQ.EDIT}/:uid`,component:Fn,data:{breadcrumbs:T.Qn.EDIT}}]},{path:"roles",data:{breadcrumbs:"Roles",resource:"api.rgw.roles@1.0",tabs:[{name:"Users",url:"/rgw/user"},{name:"Roles",url:"/rgw/roles"}]},children:[{path:"",component:d.c},{path:T.MQ.CREATE,component:yn.U,data:{breadcrumbs:T.Qn.CREATE}},{path:T.MQ.EDIT,component:yn.U,data:{breadcrumbs:T.Qn.EDIT}}]},{path:"bucket",data:{breadcrumbs:"Buckets"},children:[{path:"",component:Ri},{path:T.MQ.CREATE,component:un,data:{breadcrumbs:T.Qn.CREATE}},{path:`${T.MQ.EDIT}/:bid`,component:un,data:{breadcrumbs:T.Qn.EDIT}}]},{path:"overview",data:{breadcrumbs:"Overview"},children:[{path:"",component:Rc}]},{path:"multisite",data:{breadcrumbs:"Multi-site"},children:[{path:"",component:_t}]}];let Mc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[wn,P.Bz.forChild(hc)]}),n})()},1372:(K,Y,p)=>{"use strict";p.d(Y,{B:()=>d});var g=p(64537),_=p(88692),P=p(87925);const v=function(m){return{collapsed:m}},Z=function(m){return{show:m}},T=["*"];let d=(()=>{class m{constructor(){this.showAdvanced=!1}}return m.\u0275fac=function(N){return new(N||m)},m.\u0275cmp=g.Xpm({type:m,selectors:[["cd-form-advanced-fieldset"]],ngContentSelectors:T,decls:9,vars:6,consts:function(){let y;return y="Advanced ",[[1,"cd-header"],[1,"accordion","accordion-flush"],["type","button","id","advanced-fieldset","aria-label","toggle advanced mode",1,"accordion-button","cd-form-advanced-fieldset-buttton","p-0",3,"ngClass","click"],y,[1,"accordion-collapse","collapse",3,"ngClass"],[1,"accordion-body"],[1,"card-body"]]},template:function(N,w){1&N&&(g.F$t(),g.TgZ(0,"fieldset")(1,"legend",0)(2,"div",1)(3,"button",2),g.NdJ("click",function(){return w.showAdvanced=!w.showAdvanced}),g.SDv(4,3),g.qZA()()(),g.TgZ(5,"div",4)(6,"div",5)(7,"div",6),g.Hsn(8),g.qZA()()()()),2&N&&(g.xp6(3),g.Q6J("ngClass",g.VKq(2,v,!w.showAdvanced)),g.xp6(2),g.Q6J("ngClass",g.VKq(4,Z,w.showAdvanced)))},dependencies:[_.mk,P.o],styles:[".cd-form-advanced-fieldset-buttton[_ngcontent-%COMP%]{--bs-accordion-btn-active-icon: var(--bs-accordion-btn-icon);background-color:inherit;border:hidden;border-color:inherit;box-shadow:none;color:inherit;font-size:inherit;outline:0;text-decoration:none}"]}),m})()},52361:()=>{},94616:()=>{}}]);