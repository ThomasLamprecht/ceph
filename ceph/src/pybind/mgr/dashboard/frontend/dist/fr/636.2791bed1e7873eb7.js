(self.webpackChunkceph_dashboard=self.webpackChunkceph_dashboard||[]).push([[636],{3875:(Y,V,p)=>{"use strict";var g=p(96434),r=p(12658),N="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;V.Buffer=d,V.SlowBuffer=function F(m){return+m!=m&&(m=0),d.alloc(+m)},V.INSPECT_MAX_BYTES=50;var b=2147483647;function T(m){if(m>b)throw new RangeError('The value "'+m+'" is invalid for option "size"');var s=new Uint8Array(m);return Object.setPrototypeOf(s,d.prototype),s}function d(m,s,a){if("number"==typeof m){if("string"==typeof s)throw new TypeError('The "string" argument must be of type string. Received type number');return B(m)}return M(m,s,a)}function M(m,s,a){if("string"==typeof m)return function Z(m,s){if(("string"!=typeof s||""===s)&&(s="utf8"),!d.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var a=0|C(m,s),G=T(a),X=G.write(m,s);return X!==a&&(G=G.slice(0,X)),G}(m,s);if(ArrayBuffer.isView(m))return function y(m){if(A(m,Uint8Array)){var s=new Uint8Array(m);return I(s.buffer,s.byteOffset,s.byteLength)}return R(m)}(m);if(null==m)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(A(m,ArrayBuffer)||m&&A(m.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(A(m,SharedArrayBuffer)||m&&A(m.buffer,SharedArrayBuffer)))return I(m,s,a);if("number"==typeof m)throw new TypeError('The "value" argument must not be of type number. Received type number');var G=m.valueOf&&m.valueOf();if(null!=G&&G!==m)return d.from(G,s,a);var X=function L(m){if(d.isBuffer(m)){var s=0|k(m.length),a=T(s);return 0===a.length||m.copy(a,0,0,s),a}return void 0!==m.length?"number"!=typeof m.length||W(m.length)?T(0):R(m):"Buffer"===m.type&&Array.isArray(m.data)?R(m.data):void 0}(m);if(X)return X;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof m[Symbol.toPrimitive])return d.from(m[Symbol.toPrimitive]("string"),s,a);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}function v(m){if("number"!=typeof m)throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function B(m){return v(m),T(m<0?0:0|k(m))}function R(m){for(var s=m.length<0?0:0|k(m.length),a=T(s),G=0;G<s;G+=1)a[G]=255&m[G];return a}function I(m,s,a){if(s<0||m.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<s+(a||0))throw new RangeError('"length" is outside of buffer bounds');var G;return G=void 0===s&&void 0===a?new Uint8Array(m):void 0===a?new Uint8Array(m,s):new Uint8Array(m,s,a),Object.setPrototypeOf(G,d.prototype),G}function k(m){if(m>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return 0|m}function C(m,s){if(d.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||A(m,ArrayBuffer))return m.byteLength;if("string"!=typeof m)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);var a=m.length,G=arguments.length>2&&!0===arguments[2];if(!G&&0===a)return 0;for(var X=!1;;)switch(s){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":return l(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*a;case"hex":return a>>>1;case"base64":return _e(m).length;default:if(X)return G?-1:l(m).length;s=(""+s).toLowerCase(),X=!0}}function f(m,s,a){var G=!1;if((void 0===s||s<0)&&(s=0),s>this.length||((void 0===a||a>this.length)&&(a=this.length),a<=0)||(a>>>=0)<=(s>>>=0))return"";for(m||(m="utf8");;)switch(m){case"hex":return ue(this,s,a);case"utf8":case"utf-8":return ie(this,s,a);case"ascii":return ae(this,s,a);case"latin1":case"binary":return Ne(this,s,a);case"base64":return J(this,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,s,a);default:if(G)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),G=!0}}function c(m,s,a){var G=m[s];m[s]=m[a],m[a]=G}function u(m,s,a,G,X){if(0===m.length)return-1;if("string"==typeof a?(G=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),W(a=+a)&&(a=X?0:m.length-1),a<0&&(a=m.length+a),a>=m.length){if(X)return-1;a=m.length-1}else if(a<0){if(!X)return-1;a=0}if("string"==typeof s&&(s=d.from(s,G)),d.isBuffer(s))return 0===s.length?-1:h(m,s,a,G,X);if("number"==typeof s)return s&=255,"function"==typeof Uint8Array.prototype.indexOf?X?Uint8Array.prototype.indexOf.call(m,s,a):Uint8Array.prototype.lastIndexOf.call(m,s,a):h(m,[s],a,G,X);throw new TypeError("val must be string, number or Buffer")}function h(m,s,a,G,X){var ye,ee=1,ne=m.length,Ce=s.length;if(void 0!==G&&("ucs2"===(G=String(G).toLowerCase())||"ucs-2"===G||"utf16le"===G||"utf-16le"===G)){if(m.length<2||s.length<2)return-1;ee=2,ne/=2,Ce/=2,a/=2}function Ae(Ye,Ke){return 1===ee?Ye[Ke]:Ye.readUInt16BE(Ke*ee)}if(X){var Be=-1;for(ye=a;ye<ne;ye++)if(Ae(m,ye)===Ae(s,-1===Be?0:ye-Be)){if(-1===Be&&(Be=ye),ye-Be+1===Ce)return Be*ee}else-1!==Be&&(ye-=ye-Be),Be=-1}else for(a+Ce>ne&&(a=ne-Ce),ye=a;ye>=0;ye--){for(var De=!0,He=0;He<Ce;He++)if(Ae(m,ye+He)!==Ae(s,He)){De=!1;break}if(De)return ye}return-1}function z(m,s,a,G){a=Number(a)||0;var X=m.length-a;G?(G=Number(G))>X&&(G=X):G=X;var ee=s.length;G>ee/2&&(G=ee/2);for(var ne=0;ne<G;++ne){var Ce=parseInt(s.substr(2*ne,2),16);if(W(Ce))return ne;m[a+ne]=Ce}return ne}function S(m,s,a,G){return ce(l(s,m.length-a),m,a,G)}function e(m,s,a,G){return ce(function w(m){for(var s=[],a=0;a<m.length;++a)s.push(255&m.charCodeAt(a));return s}(s),m,a,G)}function D(m,s,a,G){return ce(_e(s),m,a,G)}function q(m,s,a,G){return ce(function $(m,s){for(var a,G,ee=[],ne=0;ne<m.length&&!((s-=2)<0);++ne)G=(a=m.charCodeAt(ne))>>8,ee.push(a%256),ee.push(G);return ee}(s,m.length-a),m,a,G)}function J(m,s,a){return g.fromByteArray(0===s&&a===m.length?m:m.slice(s,a))}function ie(m,s,a){a=Math.min(m.length,a);for(var G=[],X=s;X<a;){var Ae,ye,Be,De,ee=m[X],ne=null,Ce=ee>239?4:ee>223?3:ee>191?2:1;if(X+Ce<=a)switch(Ce){case 1:ee<128&&(ne=ee);break;case 2:128==(192&(Ae=m[X+1]))&&(De=(31&ee)<<6|63&Ae)>127&&(ne=De);break;case 3:ye=m[X+2],128==(192&(Ae=m[X+1]))&&128==(192&ye)&&(De=(15&ee)<<12|(63&Ae)<<6|63&ye)>2047&&(De<55296||De>57343)&&(ne=De);break;case 4:ye=m[X+2],Be=m[X+3],128==(192&(Ae=m[X+1]))&&128==(192&ye)&&128==(192&Be)&&(De=(15&ee)<<18|(63&Ae)<<12|(63&ye)<<6|63&Be)>65535&&De<1114112&&(ne=De)}null===ne?(ne=65533,Ce=1):ne>65535&&(G.push((ne-=65536)>>>10&1023|55296),ne=56320|1023&ne),G.push(ne),X+=Ce}return function fe(m){var s=m.length;if(s<=oe)return String.fromCharCode.apply(String,m);for(var a="",G=0;G<s;)a+=String.fromCharCode.apply(String,m.slice(G,G+=oe));return a}(G)}V.kMaxLength=b,!(d.TYPED_ARRAY_SUPPORT=function x(){try{var m=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(m,s),42===m.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(m,s,a){return M(m,s,a)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(m,s,a){return function P(m,s,a){return v(m),m<=0?T(m):void 0!==s?"string"==typeof a?T(m).fill(s,a):T(m).fill(s):T(m)}(m,s,a)},d.allocUnsafe=function(m){return B(m)},d.allocUnsafeSlow=function(m){return B(m)},d.isBuffer=function(s){return null!=s&&!0===s._isBuffer&&s!==d.prototype},d.compare=function(s,a){if(A(s,Uint8Array)&&(s=d.from(s,s.offset,s.byteLength)),A(a,Uint8Array)&&(a=d.from(a,a.offset,a.byteLength)),!d.isBuffer(s)||!d.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===a)return 0;for(var G=s.length,X=a.length,ee=0,ne=Math.min(G,X);ee<ne;++ee)if(s[ee]!==a[ee]){G=s[ee],X=a[ee];break}return G<X?-1:X<G?1:0},d.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(s,a){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(0===s.length)return d.alloc(0);var G;if(void 0===a)for(a=0,G=0;G<s.length;++G)a+=s[G].length;var X=d.allocUnsafe(a),ee=0;for(G=0;G<s.length;++G){var ne=s[G];if(A(ne,Uint8Array))ee+ne.length>X.length?d.from(ne).copy(X,ee):Uint8Array.prototype.set.call(X,ne,ee);else{if(!d.isBuffer(ne))throw new TypeError('"list" argument must be an Array of Buffers');ne.copy(X,ee)}ee+=ne.length}return X},d.byteLength=C,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var s=this.length;if(s%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<s;a+=2)c(this,a,a+1);return this},d.prototype.swap32=function(){var s=this.length;if(s%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<s;a+=4)c(this,a,a+3),c(this,a+1,a+2);return this},d.prototype.swap64=function(){var s=this.length;if(s%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<s;a+=8)c(this,a,a+7),c(this,a+1,a+6),c(this,a+2,a+5),c(this,a+3,a+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var s=this.length;return 0===s?"":0===arguments.length?ie(this,0,s):f.apply(this,arguments)},d.prototype.equals=function(s){if(!d.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s||0===d.compare(this,s)},d.prototype.inspect=function(){var s="",a=V.INSPECT_MAX_BYTES;return s=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(s+=" ... "),"<Buffer "+s+">"},N&&(d.prototype[N]=d.prototype.inspect),d.prototype.compare=function(s,a,G,X,ee){if(A(s,Uint8Array)&&(s=d.from(s,s.offset,s.byteLength)),!d.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(void 0===a&&(a=0),void 0===G&&(G=s?s.length:0),void 0===X&&(X=0),void 0===ee&&(ee=this.length),a<0||G>s.length||X<0||ee>this.length)throw new RangeError("out of range index");if(X>=ee&&a>=G)return 0;if(X>=ee)return-1;if(a>=G)return 1;if(this===s)return 0;for(var ne=(ee>>>=0)-(X>>>=0),Ce=(G>>>=0)-(a>>>=0),Ae=Math.min(ne,Ce),ye=this.slice(X,ee),Be=s.slice(a,G),De=0;De<Ae;++De)if(ye[De]!==Be[De]){ne=ye[De],Ce=Be[De];break}return ne<Ce?-1:Ce<ne?1:0},d.prototype.includes=function(s,a,G){return-1!==this.indexOf(s,a,G)},d.prototype.indexOf=function(s,a,G){return u(this,s,a,G,!0)},d.prototype.lastIndexOf=function(s,a,G){return u(this,s,a,G,!1)},d.prototype.write=function(s,a,G,X){if(void 0===a)X="utf8",G=this.length,a=0;else if(void 0===G&&"string"==typeof a)X=a,G=this.length,a=0;else{if(!isFinite(a))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");a>>>=0,isFinite(G)?(G>>>=0,void 0===X&&(X="utf8")):(X=G,G=void 0)}var ee=this.length-a;if((void 0===G||G>ee)&&(G=ee),s.length>0&&(G<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");for(var ne=!1;;)switch(X){case"hex":return z(this,s,a,G);case"utf8":case"utf-8":return S(this,s,a,G);case"ascii":case"latin1":case"binary":return e(this,s,a,G);case"base64":return D(this,s,a,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,s,a,G);default:if(ne)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),ne=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var oe=4096;function ae(m,s,a){var G="";a=Math.min(m.length,a);for(var X=s;X<a;++X)G+=String.fromCharCode(127&m[X]);return G}function Ne(m,s,a){var G="";a=Math.min(m.length,a);for(var X=s;X<a;++X)G+=String.fromCharCode(m[X]);return G}function ue(m,s,a){var G=m.length;(!s||s<0)&&(s=0),(!a||a<0||a>G)&&(a=G);for(var X="",ee=s;ee<a;++ee)X+=j[m[ee]];return X}function Ie(m,s,a){for(var G=m.slice(s,a),X="",ee=0;ee<G.length-1;ee+=2)X+=String.fromCharCode(G[ee]+256*G[ee+1]);return X}function Ee(m,s,a){if(m%1!=0||m<0)throw new RangeError("offset is not uint");if(m+s>a)throw new RangeError("Trying to access beyond buffer length")}function Pe(m,s,a,G,X,ee){if(!d.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>X||s<ee)throw new RangeError('"value" argument is out of bounds');if(a+G>m.length)throw new RangeError("Index out of range")}function ze(m,s,a,G,X,ee){if(a+G>m.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function Le(m,s,a,G,X){return s=+s,a>>>=0,X||ze(m,0,a,4),r.write(m,s,a,G,23,4),a+4}function be(m,s,a,G,X){return s=+s,a>>>=0,X||ze(m,0,a,8),r.write(m,s,a,G,52,8),a+8}d.prototype.slice=function(s,a){var G=this.length;(s=~~s)<0?(s+=G)<0&&(s=0):s>G&&(s=G),(a=void 0===a?G:~~a)<0?(a+=G)<0&&(a=0):a>G&&(a=G),a<s&&(a=s);var X=this.subarray(s,a);return Object.setPrototypeOf(X,d.prototype),X},d.prototype.readUintLE=d.prototype.readUIntLE=function(s,a,G){s>>>=0,a>>>=0,G||Ee(s,a,this.length);for(var X=this[s],ee=1,ne=0;++ne<a&&(ee*=256);)X+=this[s+ne]*ee;return X},d.prototype.readUintBE=d.prototype.readUIntBE=function(s,a,G){s>>>=0,a>>>=0,G||Ee(s,a,this.length);for(var X=this[s+--a],ee=1;a>0&&(ee*=256);)X+=this[s+--a]*ee;return X},d.prototype.readUint8=d.prototype.readUInt8=function(s,a){return s>>>=0,a||Ee(s,1,this.length),this[s]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(s,a){return s>>>=0,a||Ee(s,2,this.length),this[s]|this[s+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(s,a){return s>>>=0,a||Ee(s,2,this.length),this[s]<<8|this[s+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(s,a){return s>>>=0,a||Ee(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+16777216*this[s+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(s,a){return s>>>=0,a||Ee(s,4,this.length),16777216*this[s]+(this[s+1]<<16|this[s+2]<<8|this[s+3])},d.prototype.readIntLE=function(s,a,G){s>>>=0,a>>>=0,G||Ee(s,a,this.length);for(var X=this[s],ee=1,ne=0;++ne<a&&(ee*=256);)X+=this[s+ne]*ee;return X>=(ee*=128)&&(X-=Math.pow(2,8*a)),X},d.prototype.readIntBE=function(s,a,G){s>>>=0,a>>>=0,G||Ee(s,a,this.length);for(var X=a,ee=1,ne=this[s+--X];X>0&&(ee*=256);)ne+=this[s+--X]*ee;return ne>=(ee*=128)&&(ne-=Math.pow(2,8*a)),ne},d.prototype.readInt8=function(s,a){return s>>>=0,a||Ee(s,1,this.length),128&this[s]?-1*(255-this[s]+1):this[s]},d.prototype.readInt16LE=function(s,a){s>>>=0,a||Ee(s,2,this.length);var G=this[s]|this[s+1]<<8;return 32768&G?4294901760|G:G},d.prototype.readInt16BE=function(s,a){s>>>=0,a||Ee(s,2,this.length);var G=this[s+1]|this[s]<<8;return 32768&G?4294901760|G:G},d.prototype.readInt32LE=function(s,a){return s>>>=0,a||Ee(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},d.prototype.readInt32BE=function(s,a){return s>>>=0,a||Ee(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},d.prototype.readFloatLE=function(s,a){return s>>>=0,a||Ee(s,4,this.length),r.read(this,s,!0,23,4)},d.prototype.readFloatBE=function(s,a){return s>>>=0,a||Ee(s,4,this.length),r.read(this,s,!1,23,4)},d.prototype.readDoubleLE=function(s,a){return s>>>=0,a||Ee(s,8,this.length),r.read(this,s,!0,52,8)},d.prototype.readDoubleBE=function(s,a){return s>>>=0,a||Ee(s,8,this.length),r.read(this,s,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(s,a,G,X){s=+s,a>>>=0,G>>>=0,X||Pe(this,s,a,G,Math.pow(2,8*G)-1,0);var ne=1,Ce=0;for(this[a]=255&s;++Ce<G&&(ne*=256);)this[a+Ce]=s/ne&255;return a+G},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(s,a,G,X){s=+s,a>>>=0,G>>>=0,X||Pe(this,s,a,G,Math.pow(2,8*G)-1,0);var ne=G-1,Ce=1;for(this[a+ne]=255&s;--ne>=0&&(Ce*=256);)this[a+ne]=s/Ce&255;return a+G},d.prototype.writeUint8=d.prototype.writeUInt8=function(s,a,G){return s=+s,a>>>=0,G||Pe(this,s,a,1,255,0),this[a]=255&s,a+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(s,a,G){return s=+s,a>>>=0,G||Pe(this,s,a,2,65535,0),this[a]=255&s,this[a+1]=s>>>8,a+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(s,a,G){return s=+s,a>>>=0,G||Pe(this,s,a,2,65535,0),this[a]=s>>>8,this[a+1]=255&s,a+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(s,a,G){return s=+s,a>>>=0,G||Pe(this,s,a,4,4294967295,0),this[a+3]=s>>>24,this[a+2]=s>>>16,this[a+1]=s>>>8,this[a]=255&s,a+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(s,a,G){return s=+s,a>>>=0,G||Pe(this,s,a,4,4294967295,0),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=255&s,a+4},d.prototype.writeIntLE=function(s,a,G,X){if(s=+s,a>>>=0,!X){var ee=Math.pow(2,8*G-1);Pe(this,s,a,G,ee-1,-ee)}var ne=0,Ce=1,Ae=0;for(this[a]=255&s;++ne<G&&(Ce*=256);)s<0&&0===Ae&&0!==this[a+ne-1]&&(Ae=1),this[a+ne]=(s/Ce>>0)-Ae&255;return a+G},d.prototype.writeIntBE=function(s,a,G,X){if(s=+s,a>>>=0,!X){var ee=Math.pow(2,8*G-1);Pe(this,s,a,G,ee-1,-ee)}var ne=G-1,Ce=1,Ae=0;for(this[a+ne]=255&s;--ne>=0&&(Ce*=256);)s<0&&0===Ae&&0!==this[a+ne+1]&&(Ae=1),this[a+ne]=(s/Ce>>0)-Ae&255;return a+G},d.prototype.writeInt8=function(s,a,G){return s=+s,a>>>=0,G||Pe(this,s,a,1,127,-128),s<0&&(s=255+s+1),this[a]=255&s,a+1},d.prototype.writeInt16LE=function(s,a,G){return s=+s,a>>>=0,G||Pe(this,s,a,2,32767,-32768),this[a]=255&s,this[a+1]=s>>>8,a+2},d.prototype.writeInt16BE=function(s,a,G){return s=+s,a>>>=0,G||Pe(this,s,a,2,32767,-32768),this[a]=s>>>8,this[a+1]=255&s,a+2},d.prototype.writeInt32LE=function(s,a,G){return s=+s,a>>>=0,G||Pe(this,s,a,4,2147483647,-2147483648),this[a]=255&s,this[a+1]=s>>>8,this[a+2]=s>>>16,this[a+3]=s>>>24,a+4},d.prototype.writeInt32BE=function(s,a,G){return s=+s,a>>>=0,G||Pe(this,s,a,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=255&s,a+4},d.prototype.writeFloatLE=function(s,a,G){return Le(this,s,a,!0,G)},d.prototype.writeFloatBE=function(s,a,G){return Le(this,s,a,!1,G)},d.prototype.writeDoubleLE=function(s,a,G){return be(this,s,a,!0,G)},d.prototype.writeDoubleBE=function(s,a,G){return be(this,s,a,!1,G)},d.prototype.copy=function(s,a,G,X){if(!d.isBuffer(s))throw new TypeError("argument should be a Buffer");if(G||(G=0),!X&&0!==X&&(X=this.length),a>=s.length&&(a=s.length),a||(a=0),X>0&&X<G&&(X=G),X===G||0===s.length||0===this.length)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),s.length-a<X-G&&(X=s.length-a+G);var ee=X-G;return this===s&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(a,G,X):Uint8Array.prototype.set.call(s,this.subarray(G,X),a),ee},d.prototype.fill=function(s,a,G,X){if("string"==typeof s){if("string"==typeof a?(X=a,a=0,G=this.length):"string"==typeof G&&(X=G,G=this.length),void 0!==X&&"string"!=typeof X)throw new TypeError("encoding must be a string");if("string"==typeof X&&!d.isEncoding(X))throw new TypeError("Unknown encoding: "+X);if(1===s.length){var ee=s.charCodeAt(0);("utf8"===X&&ee<128||"latin1"===X)&&(s=ee)}}else"number"==typeof s?s&=255:"boolean"==typeof s&&(s=Number(s));if(a<0||this.length<a||this.length<G)throw new RangeError("Out of range index");if(G<=a)return this;var ne;if(a>>>=0,G=void 0===G?this.length:G>>>0,s||(s=0),"number"==typeof s)for(ne=a;ne<G;++ne)this[ne]=s;else{var Ce=d.isBuffer(s)?s:d.from(s,X),Ae=Ce.length;if(0===Ae)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(ne=0;ne<G-a;++ne)this[ne+a]=Ce[ne%Ae]}return this};var Ge=/[^+/0-9A-Za-z-_]/g;function l(m,s){s=s||1/0;for(var a,G=m.length,X=null,ee=[],ne=0;ne<G;++ne){if((a=m.charCodeAt(ne))>55295&&a<57344){if(!X){if(a>56319){(s-=3)>-1&&ee.push(239,191,189);continue}if(ne+1===G){(s-=3)>-1&&ee.push(239,191,189);continue}X=a;continue}if(a<56320){(s-=3)>-1&&ee.push(239,191,189),X=a;continue}a=65536+(X-55296<<10|a-56320)}else X&&(s-=3)>-1&&ee.push(239,191,189);if(X=null,a<128){if((s-=1)<0)break;ee.push(a)}else if(a<2048){if((s-=2)<0)break;ee.push(a>>6|192,63&a|128)}else if(a<65536){if((s-=3)<0)break;ee.push(a>>12|224,a>>6&63|128,63&a|128)}else{if(!(a<1114112))throw new Error("Invalid code point");if((s-=4)<0)break;ee.push(a>>18|240,a>>12&63|128,a>>6&63|128,63&a|128)}}return ee}function _e(m){return g.toByteArray(function O(m){if((m=(m=m.split("=")[0]).trim().replace(Ge,"")).length<2)return"";for(;m.length%4!=0;)m+="=";return m}(m))}function ce(m,s,a,G){for(var X=0;X<G&&!(X+a>=s.length||X>=m.length);++X)s[X+a]=m[X];return X}function A(m,s){return m instanceof s||null!=m&&null!=m.constructor&&null!=m.constructor.name&&m.constructor.name===s.name}function W(m){return m!=m}var j=function(){for(var m="0123456789abcdef",s=new Array(256),a=0;a<16;++a)for(var G=16*a,X=0;X<16;++X)s[G+X]=m[a]+m[X];return s}()},93105:Y=>{"use strict";var g,V="object"==typeof Reflect?Reflect:null,p=V&&"function"==typeof V.apply?V.apply:function(f,c,u){return Function.prototype.apply.call(f,c,u)};g=V&&"function"==typeof V.ownKeys?V.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};var N=Number.isNaN||function(f){return f!=f};function b(){b.init.call(this)}Y.exports=b,Y.exports.once=function L(C,f){return new Promise(function(c,u){function h(S){C.removeListener(f,z),u(S)}function z(){"function"==typeof C.removeListener&&C.removeListener("error",h),c([].slice.call(arguments))}F(C,f,z,{once:!0}),"error"!==f&&function k(C,f,c){"function"==typeof C.on&&F(C,"error",f,c)}(C,h,{once:!0})})},b.EventEmitter=b,b.prototype._events=void 0,b.prototype._eventsCount=0,b.prototype._maxListeners=void 0;var x=10;function T(C){if("function"!=typeof C)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}function d(C){return void 0===C._maxListeners?b.defaultMaxListeners:C._maxListeners}function M(C,f,c,u){var h,z,S;if(T(c),void 0===(z=C._events)?(z=C._events=Object.create(null),C._eventsCount=0):(void 0!==z.newListener&&(C.emit("newListener",f,c.listener?c.listener:c),z=C._events),S=z[f]),void 0===S)S=z[f]=c,++C._eventsCount;else if("function"==typeof S?S=z[f]=u?[c,S]:[S,c]:u?S.unshift(c):S.push(c),(h=d(C))>0&&S.length>h&&!S.warned){S.warned=!0;var e=new Error("Possible EventEmitter memory leak detected. "+S.length+" "+String(f)+" listeners added. Use emitter.setMaxListeners() to increase limit");e.name="MaxListenersExceededWarning",e.emitter=C,e.type=f,e.count=S.length,function r(C){console&&console.warn&&console.warn(C)}(e)}return C}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function P(C,f,c){var u={fired:!1,wrapFn:void 0,target:C,type:f,listener:c},h=v.bind(u);return h.listener=c,u.wrapFn=h,h}function B(C,f,c){var u=C._events;if(void 0===u)return[];var h=u[f];return void 0===h?[]:"function"==typeof h?c?[h.listener||h]:[h]:c?function I(C){for(var f=new Array(C.length),c=0;c<f.length;++c)f[c]=C[c].listener||C[c];return f}(h):R(h,h.length)}function Z(C){var f=this._events;if(void 0!==f){var c=f[C];if("function"==typeof c)return 1;if(void 0!==c)return c.length}return 0}function R(C,f){for(var c=new Array(f),u=0;u<f;++u)c[u]=C[u];return c}function F(C,f,c,u){if("function"==typeof C.on)u.once?C.once(f,c):C.on(f,c);else{if("function"!=typeof C.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C);C.addEventListener(f,function h(z){u.once&&C.removeEventListener(f,h),c(z)})}}Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return x},set:function(C){if("number"!=typeof C||C<0||N(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");x=C}}),b.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(f){if("number"!=typeof f||f<0||N(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+f+".");return this._maxListeners=f,this},b.prototype.getMaxListeners=function(){return d(this)},b.prototype.emit=function(f){for(var c=[],u=1;u<arguments.length;u++)c.push(arguments[u]);var h="error"===f,z=this._events;if(void 0!==z)h=h&&void 0===z.error;else if(!h)return!1;if(h){var S;if(c.length>0&&(S=c[0]),S instanceof Error)throw S;var e=new Error("Unhandled error."+(S?" ("+S.message+")":""));throw e.context=S,e}var D=z[f];if(void 0===D)return!1;if("function"==typeof D)p(D,this,c);else{var q=D.length,J=R(D,q);for(u=0;u<q;++u)p(J[u],this,c)}return!0},b.prototype.on=b.prototype.addListener=function(f,c){return M(this,f,c,!1)},b.prototype.prependListener=function(f,c){return M(this,f,c,!0)},b.prototype.once=function(f,c){return T(c),this.on(f,P(this,f,c)),this},b.prototype.prependOnceListener=function(f,c){return T(c),this.prependListener(f,P(this,f,c)),this},b.prototype.off=b.prototype.removeListener=function(f,c){var u,h,z,S,e;if(T(c),void 0===(h=this._events))return this;if(void 0===(u=h[f]))return this;if(u===c||u.listener===c)0==--this._eventsCount?this._events=Object.create(null):(delete h[f],h.removeListener&&this.emit("removeListener",f,u.listener||c));else if("function"!=typeof u){for(z=-1,S=u.length-1;S>=0;S--)if(u[S]===c||u[S].listener===c){e=u[S].listener,z=S;break}if(z<0)return this;0===z?u.shift():function y(C,f){for(;f+1<C.length;f++)C[f]=C[f+1];C.pop()}(u,z),1===u.length&&(h[f]=u[0]),void 0!==h.removeListener&&this.emit("removeListener",f,e||c)}return this},b.prototype.removeAllListeners=function(f){var c,u,h;if(void 0===(u=this._events))return this;if(void 0===u.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==u[f]&&(0==--this._eventsCount?this._events=Object.create(null):delete u[f]),this;if(0===arguments.length){var S,z=Object.keys(u);for(h=0;h<z.length;++h)"removeListener"!==(S=z[h])&&this.removeAllListeners(S);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(c=u[f]))this.removeListener(f,c);else if(void 0!==c)for(h=c.length-1;h>=0;h--)this.removeListener(f,c[h]);return this},b.prototype.listeners=function(f){return B(this,f,!0)},b.prototype.rawListeners=function(f){return B(this,f,!1)},b.listenerCount=function(C,f){return"function"==typeof C.listenerCount?C.listenerCount(f):Z.call(C,f)},b.prototype.listenerCount=Z,b.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},59879:Y=>{Y.exports="function"==typeof Object.create?function(p,g){g&&(p.super_=g,p.prototype=Object.create(g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}))}:function(p,g){if(g){p.super_=g;var r=function(){};r.prototype=g.prototype,p.prototype=new r,p.prototype.constructor=p}}},48230:Y=>{"use strict";var p={};function g(T,d,M){M||(M=Error);var P=function(B){function Z(R,y,I){return B.call(this,function v(B,Z,R){return"string"==typeof d?d:d(B,Z,R)}(R,y,I))||this}return function V(T,d){T.prototype=Object.create(d.prototype),T.prototype.constructor=T,T.__proto__=d}(Z,B),Z}(M);P.prototype.name=M.name,P.prototype.code=T,p[T]=P}function r(T,d){if(Array.isArray(T)){var M=T.length;return T=T.map(function(v){return String(v)}),M>2?"one of ".concat(d," ").concat(T.slice(0,M-1).join(", "),", or ")+T[M-1]:2===M?"one of ".concat(d," ").concat(T[0]," or ").concat(T[1]):"of ".concat(d," ").concat(T[0])}return"of ".concat(d," ").concat(String(T))}g("ERR_INVALID_OPT_VALUE",function(T,d){return'The value "'+d+'" is invalid for option "'+T+'"'},TypeError),g("ERR_INVALID_ARG_TYPE",function(T,d,M){var v,P;if("string"==typeof d&&function N(T,d,M){return T.substr(!M||M<0?0:+M,d.length)===d}(d,"not ")?(v="must not be",d=d.replace(/^not /,"")):v="must be",function b(T,d,M){return(void 0===M||M>T.length)&&(M=T.length),T.substring(M-d.length,M)===d}(T," argument"))P="The ".concat(T," ").concat(v," ").concat(r(d,"type"));else{var B=function x(T,d,M){return"number"!=typeof M&&(M=0),!(M+d.length>T.length)&&-1!==T.indexOf(d,M)}(T,".")?"property":"argument";P='The "'.concat(T,'" ').concat(B," ").concat(v," ").concat(r(d,"type"))}return P+". Received type ".concat(typeof M)},TypeError),g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),g("ERR_METHOD_NOT_IMPLEMENTED",function(T){return"The "+T+" method is not implemented"}),g("ERR_STREAM_PREMATURE_CLOSE","Premature close"),g("ERR_STREAM_DESTROYED",function(T){return"Cannot call "+T+" after a stream was destroyed"}),g("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),g("ERR_STREAM_WRITE_AFTER_END","write after end"),g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),g("ERR_UNKNOWN_ENCODING",function(T){return"Unknown encoding: "+T},TypeError),g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Y.exports.q=p},20942:(Y,V,p)=>{"use strict";var g=Object.keys||function(P){var B=[];for(var Z in P)B.push(Z);return B};Y.exports=d;var r=p(32833),N=p(37807);p(59879)(d,r);for(var b=g(N.prototype),x=0;x<b.length;x++){var T=b[x];d.prototype[T]||(d.prototype[T]=N.prototype[T])}function d(P){if(!(this instanceof d))return new d(P);r.call(this,P),N.call(this,P),this.allowHalfOpen=!0,P&&(!1===P.readable&&(this.readable=!1),!1===P.writable&&(this.writable=!1),!1===P.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",M)))}function M(){this._writableState.ended||process.nextTick(v,this)}function v(P){P.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(B){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=B,this._writableState.destroyed=B)}})},90619:(Y,V,p)=>{"use strict";Y.exports=r;var g=p(55431);function r(N){if(!(this instanceof r))return new r(N);g.call(this,N)}p(59879)(r,g),r.prototype._transform=function(N,b,x){x(null,N)}},32833:(Y,V,p)=>{"use strict";var g;Y.exports=D,D.ReadableState=e,p(93105);var P,N=function(W,j){return W.listeners(j).length},b=p(75112),x=p(3875).Buffer,T=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},v=p(94616);P=v&&v.debuglog?v.debuglog("stream"):function(){};var f,c,u,B=p(39370),Z=p(10806),y=p(12903).getHighWaterMark,I=p(48230).q,L=I.ERR_INVALID_ARG_TYPE,k=I.ERR_STREAM_PUSH_AFTER_EOF,F=I.ERR_METHOD_NOT_IMPLEMENTED,C=I.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;p(59879)(D,b);var h=Z.errorOrDestroy,z=["error","close","destroy","pause","resume"];function e(A,W,j){g=g||p(20942),"boolean"!=typeof j&&(j=W instanceof g),this.objectMode=!!(A=A||{}).objectMode,j&&(this.objectMode=this.objectMode||!!A.readableObjectMode),this.highWaterMark=y(this,A,"readableHighWaterMark",j),this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==A.emitClose,this.autoDestroy=!!A.autoDestroy,this.destroyed=!1,this.defaultEncoding=A.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(f||(f=p(32519).s),this.decoder=new f(A.encoding),this.encoding=A.encoding)}function D(A){if(g=g||p(20942),!(this instanceof D))return new D(A);this._readableState=new e(A,this,this instanceof g),this.readable=!0,A&&("function"==typeof A.read&&(this._read=A.read),"function"==typeof A.destroy&&(this._destroy=A.destroy)),b.call(this)}function q(A,W,j,m,s){P("readableAddChunk",W);var G,a=A._readableState;if(null===W)a.reading=!1,function Ne(A,W){if(P("onEofChunk"),!W.ended){if(W.decoder){var j=W.decoder.end();j&&j.length&&(W.buffer.push(j),W.length+=W.objectMode?1:j.length)}W.ended=!0,W.sync?ue(A):(W.needReadable=!1,W.emittedReadable||(W.emittedReadable=!0,Ie(A)))}}(A,a);else if(s||(G=function ie(A,W){var j;return!function M(A){return x.isBuffer(A)||A instanceof T}(W)&&"string"!=typeof W&&void 0!==W&&!A.objectMode&&(j=new L("chunk",["string","Buffer","Uint8Array"],W)),j}(a,W)),G)h(A,G);else if(a.objectMode||W&&W.length>0)if("string"!=typeof W&&!a.objectMode&&Object.getPrototypeOf(W)!==x.prototype&&(W=function d(A){return x.from(A)}(W)),m)a.endEmitted?h(A,new C):J(A,a,W,!0);else if(a.ended)h(A,new k);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!j?(W=a.decoder.write(W),a.objectMode||0!==W.length?J(A,a,W,!1):Ee(A,a)):J(A,a,W,!1)}else m||(a.reading=!1,Ee(A,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function J(A,W,j,m){W.flowing&&0===W.length&&!W.sync?(W.awaitDrain=0,A.emit("data",j)):(W.length+=W.objectMode?1:j.length,m?W.buffer.unshift(j):W.buffer.push(j),W.needReadable&&ue(A)),Ee(A,W)}Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(W){this._readableState&&(this._readableState.destroyed=W)}}),D.prototype.destroy=Z.destroy,D.prototype._undestroy=Z.undestroy,D.prototype._destroy=function(A,W){W(A)},D.prototype.push=function(A,W){var m,j=this._readableState;return j.objectMode?m=!0:"string"==typeof A&&((W=W||j.defaultEncoding)!==j.encoding&&(A=x.from(A,W),W=""),m=!0),q(this,A,W,!1,m)},D.prototype.unshift=function(A){return q(this,A,null,!0,!1)},D.prototype.isPaused=function(){return!1===this._readableState.flowing},D.prototype.setEncoding=function(A){f||(f=p(32519).s);var W=new f(A);this._readableState.decoder=W,this._readableState.encoding=this._readableState.decoder.encoding;for(var j=this._readableState.buffer.head,m="";null!==j;)m+=W.write(j.data),j=j.next;return this._readableState.buffer.clear(),""!==m&&this._readableState.buffer.push(m),this._readableState.length=m.length,this};var oe=1073741824;function ae(A,W){return A<=0||0===W.length&&W.ended?0:W.objectMode?1:A!=A?W.flowing&&W.length?W.buffer.head.data.length:W.length:(A>W.highWaterMark&&(W.highWaterMark=function fe(A){return A>=oe?A=oe:(A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++),A}(A)),A<=W.length?A:W.ended?W.length:(W.needReadable=!0,0))}function ue(A){var W=A._readableState;P("emitReadable",W.needReadable,W.emittedReadable),W.needReadable=!1,W.emittedReadable||(P("emitReadable",W.flowing),W.emittedReadable=!0,process.nextTick(Ie,A))}function Ie(A){var W=A._readableState;P("emitReadable_",W.destroyed,W.length,W.ended),!W.destroyed&&(W.length||W.ended)&&(A.emit("readable"),W.emittedReadable=!1),W.needReadable=!W.flowing&&!W.ended&&W.length<=W.highWaterMark,l(A)}function Ee(A,W){W.readingMore||(W.readingMore=!0,process.nextTick(Pe,A,W))}function Pe(A,W){for(;!W.reading&&!W.ended&&(W.length<W.highWaterMark||W.flowing&&0===W.length);){var j=W.length;if(P("maybeReadMore read 0"),A.read(0),j===W.length)break}W.readingMore=!1}function Le(A){var W=A._readableState;W.readableListening=A.listenerCount("readable")>0,W.resumeScheduled&&!W.paused?W.flowing=!0:A.listenerCount("data")>0&&A.resume()}function be(A){P("readable nexttick read 0"),A.read(0)}function O(A,W){P("resume",W.reading),W.reading||A.read(0),W.resumeScheduled=!1,A.emit("resume"),l(A),W.flowing&&!W.reading&&A.read(0)}function l(A){var W=A._readableState;for(P("flow",W.flowing);W.flowing&&null!==A.read(););}function w(A,W){return 0===W.length?null:(W.objectMode?j=W.buffer.shift():!A||A>=W.length?(j=W.decoder?W.buffer.join(""):1===W.buffer.length?W.buffer.first():W.buffer.concat(W.length),W.buffer.clear()):j=W.buffer.consume(A,W.decoder),j);var j}function $(A){var W=A._readableState;P("endReadable",W.endEmitted),W.endEmitted||(W.ended=!0,process.nextTick(_e,W,A))}function _e(A,W){if(P("endReadableNT",A.endEmitted,A.length),!A.endEmitted&&0===A.length&&(A.endEmitted=!0,W.readable=!1,W.emit("end"),A.autoDestroy)){var j=W._writableState;(!j||j.autoDestroy&&j.finished)&&W.destroy()}}function ce(A,W){for(var j=0,m=A.length;j<m;j++)if(A[j]===W)return j;return-1}D.prototype.read=function(A){P("read",A),A=parseInt(A,10);var W=this._readableState,j=A;if(0!==A&&(W.emittedReadable=!1),0===A&&W.needReadable&&((0!==W.highWaterMark?W.length>=W.highWaterMark:W.length>0)||W.ended))return P("read: emitReadable",W.length,W.ended),0===W.length&&W.ended?$(this):ue(this),null;if(0===(A=ae(A,W))&&W.ended)return 0===W.length&&$(this),null;var s,m=W.needReadable;return P("need readable",m),(0===W.length||W.length-A<W.highWaterMark)&&P("length less than watermark",m=!0),W.ended||W.reading?P("reading or ended",m=!1):m&&(P("do read"),W.reading=!0,W.sync=!0,0===W.length&&(W.needReadable=!0),this._read(W.highWaterMark),W.sync=!1,W.reading||(A=ae(j,W))),null===(s=A>0?w(A,W):null)?(W.needReadable=W.length<=W.highWaterMark,A=0):(W.length-=A,W.awaitDrain=0),0===W.length&&(W.ended||(W.needReadable=!0),j!==A&&W.ended&&$(this)),null!==s&&this.emit("data",s),s},D.prototype._read=function(A){h(this,new F("_read()"))},D.prototype.pipe=function(A,W){var j=this,m=this._readableState;switch(m.pipesCount){case 0:m.pipes=A;break;case 1:m.pipes=[m.pipes,A];break;default:m.pipes.push(A)}m.pipesCount+=1,P("pipe count=%d opts=%j",m.pipesCount,W);var a=W&&!1===W.end||A===process.stdout||A===process.stderr?He:X;function X(){P("onend"),A.end()}m.endEmitted?process.nextTick(a):j.once("end",a),A.on("unpipe",function G(Ye,Ke){P("onunpipe"),Ye===j&&Ke&&!1===Ke.hasUnpiped&&(Ke.hasUnpiped=!0,function Ce(){P("cleanup"),A.removeListener("close",Be),A.removeListener("finish",De),A.removeListener("drain",ee),A.removeListener("error",ye),A.removeListener("unpipe",G),j.removeListener("end",X),j.removeListener("end",He),j.removeListener("data",Ae),ne=!0,m.awaitDrain&&(!A._writableState||A._writableState.needDrain)&&ee()}())});var ee=function ze(A){return function(){var j=A._readableState;P("pipeOnDrain",j.awaitDrain),j.awaitDrain&&j.awaitDrain--,0===j.awaitDrain&&N(A,"data")&&(j.flowing=!0,l(A))}}(j);A.on("drain",ee);var ne=!1;function Ae(Ye){P("ondata");var Ke=A.write(Ye);P("dest.write",Ke),!1===Ke&&((1===m.pipesCount&&m.pipes===A||m.pipesCount>1&&-1!==ce(m.pipes,A))&&!ne&&(P("false write response, pause",m.awaitDrain),m.awaitDrain++),j.pause())}function ye(Ye){P("onerror",Ye),He(),A.removeListener("error",ye),0===N(A,"error")&&h(A,Ye)}function Be(){A.removeListener("finish",De),He()}function De(){P("onfinish"),A.removeListener("close",Be),He()}function He(){P("unpipe"),j.unpipe(A)}return j.on("data",Ae),function S(A,W,j){if("function"==typeof A.prependListener)return A.prependListener(W,j);A._events&&A._events[W]?Array.isArray(A._events[W])?A._events[W].unshift(j):A._events[W]=[j,A._events[W]]:A.on(W,j)}(A,"error",ye),A.once("close",Be),A.once("finish",De),A.emit("pipe",j),m.flowing||(P("pipe resume"),j.resume()),A},D.prototype.unpipe=function(A){var W=this._readableState,j={hasUnpiped:!1};if(0===W.pipesCount)return this;if(1===W.pipesCount)return A&&A!==W.pipes||(A||(A=W.pipes),W.pipes=null,W.pipesCount=0,W.flowing=!1,A&&A.emit("unpipe",this,j)),this;if(!A){var m=W.pipes,s=W.pipesCount;W.pipes=null,W.pipesCount=0,W.flowing=!1;for(var a=0;a<s;a++)m[a].emit("unpipe",this,{hasUnpiped:!1});return this}var G=ce(W.pipes,A);return-1===G||(W.pipes.splice(G,1),W.pipesCount-=1,1===W.pipesCount&&(W.pipes=W.pipes[0]),A.emit("unpipe",this,j)),this},D.prototype.addListener=D.prototype.on=function(A,W){var j=b.prototype.on.call(this,A,W),m=this._readableState;return"data"===A?(m.readableListening=this.listenerCount("readable")>0,!1!==m.flowing&&this.resume()):"readable"===A&&!m.endEmitted&&!m.readableListening&&(m.readableListening=m.needReadable=!0,m.flowing=!1,m.emittedReadable=!1,P("on readable",m.length,m.reading),m.length?ue(this):m.reading||process.nextTick(be,this)),j},D.prototype.removeListener=function(A,W){var j=b.prototype.removeListener.call(this,A,W);return"readable"===A&&process.nextTick(Le,this),j},D.prototype.removeAllListeners=function(A){var W=b.prototype.removeAllListeners.apply(this,arguments);return("readable"===A||void 0===A)&&process.nextTick(Le,this),W},D.prototype.resume=function(){var A=this._readableState;return A.flowing||(P("resume"),A.flowing=!A.readableListening,function Ge(A,W){W.resumeScheduled||(W.resumeScheduled=!0,process.nextTick(O,A,W))}(this,A)),A.paused=!1,this},D.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},D.prototype.wrap=function(A){var W=this,j=this._readableState,m=!1;for(var s in A.on("end",function(){if(P("wrapped end"),j.decoder&&!j.ended){var G=j.decoder.end();G&&G.length&&W.push(G)}W.push(null)}),A.on("data",function(G){P("wrapped data"),j.decoder&&(G=j.decoder.write(G)),j.objectMode&&null==G||!(j.objectMode||G&&G.length)||W.push(G)||(m=!0,A.pause())}),A)void 0===this[s]&&"function"==typeof A[s]&&(this[s]=function(X){return function(){return A[X].apply(A,arguments)}}(s));for(var a=0;a<z.length;a++)A.on(z[a],this.emit.bind(this,z[a]));return this._read=function(G){P("wrapped _read",G),m&&(m=!1,A.resume())},this},"function"==typeof Symbol&&(D.prototype[Symbol.asyncIterator]=function(){return void 0===c&&(c=p(19983)),c(this)}),Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(D.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(D.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(W){this._readableState&&(this._readableState.flowing=W)}}),D._fromList=w,Object.defineProperty(D.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(D.from=function(A,W){return void 0===u&&(u=p(3659)),u(D,A,W)})},55431:(Y,V,p)=>{"use strict";Y.exports=M;var g=p(48230).q,r=g.ERR_METHOD_NOT_IMPLEMENTED,N=g.ERR_MULTIPLE_CALLBACK,b=g.ERR_TRANSFORM_ALREADY_TRANSFORMING,x=g.ERR_TRANSFORM_WITH_LENGTH_0,T=p(20942);function d(B,Z){var R=this._transformState;R.transforming=!1;var y=R.writecb;if(null===y)return this.emit("error",new N);R.writechunk=null,R.writecb=null,null!=Z&&this.push(Z),y(B);var I=this._readableState;I.reading=!1,(I.needReadable||I.length<I.highWaterMark)&&this._read(I.highWaterMark)}function M(B){if(!(this instanceof M))return new M(B);T.call(this,B),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,B&&("function"==typeof B.transform&&(this._transform=B.transform),"function"==typeof B.flush&&(this._flush=B.flush)),this.on("prefinish",v)}function v(){var B=this;"function"!=typeof this._flush||this._readableState.destroyed?P(this,null,null):this._flush(function(Z,R){P(B,Z,R)})}function P(B,Z,R){if(Z)return B.emit("error",Z);if(null!=R&&B.push(R),B._writableState.length)throw new x;if(B._transformState.transforming)throw new b;return B.push(null)}p(59879)(M,T),M.prototype.push=function(B,Z){return this._transformState.needTransform=!1,T.prototype.push.call(this,B,Z)},M.prototype._transform=function(B,Z,R){R(new r("_transform()"))},M.prototype._write=function(B,Z,R){var y=this._transformState;if(y.writecb=R,y.writechunk=B,y.writeencoding=Z,!y.transforming){var I=this._readableState;(y.needTransform||I.needReadable||I.length<I.highWaterMark)&&this._read(I.highWaterMark)}},M.prototype._read=function(B){var Z=this._transformState;null===Z.writechunk||Z.transforming?Z.needTransform=!0:(Z.transforming=!0,this._transform(Z.writechunk,Z.writeencoding,Z.afterTransform))},M.prototype._destroy=function(B,Z){T.prototype._destroy.call(this,B,function(R){Z(R)})}},37807:(Y,V,p)=>{"use strict";function r(l){var w=this;this.next=null,this.entry=null,this.finish=function(){!function O(l,w,$){var _e=l.entry;for(l.entry=null;_e;){var ce=_e.callback;w.pendingcb--,ce($),_e=_e.next}w.corkedRequestsFree.next=l}(w,l)}}var N;Y.exports=e,e.WritableState=z;var S,b={deprecate:p(15822)},x=p(75112),T=p(3875).Buffer,d=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},P=p(10806),Z=p(12903).getHighWaterMark,R=p(48230).q,y=R.ERR_INVALID_ARG_TYPE,I=R.ERR_METHOD_NOT_IMPLEMENTED,L=R.ERR_MULTIPLE_CALLBACK,k=R.ERR_STREAM_CANNOT_PIPE,F=R.ERR_STREAM_DESTROYED,C=R.ERR_STREAM_NULL_VALUES,f=R.ERR_STREAM_WRITE_AFTER_END,c=R.ERR_UNKNOWN_ENCODING,u=P.errorOrDestroy;function h(){}function z(l,w,$){N=N||p(20942),"boolean"!=typeof $&&($=w instanceof N),this.objectMode=!!(l=l||{}).objectMode,$&&(this.objectMode=this.objectMode||!!l.writableObjectMode),this.highWaterMark=Z(this,l,"writableHighWaterMark",$),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===l.decodeStrings),this.defaultEncoding=l.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ce){!function Ne(l,w){var $=l._writableState,_e=$.sync,ce=$.writecb;if("function"!=typeof ce)throw new L;if(function ae(l){l.writing=!1,l.writecb=null,l.length-=l.writelen,l.writelen=0}($),w)!function fe(l,w,$,_e,ce){--w.pendingcb,$?(process.nextTick(ce,_e),process.nextTick(be,l,w),l._writableState.errorEmitted=!0,u(l,_e)):(ce(_e),l._writableState.errorEmitted=!0,u(l,_e),be(l,w))}(l,$,_e,w,ce);else{var A=Pe($)||l.destroyed;!A&&!$.corked&&!$.bufferProcessing&&$.bufferedRequest&&Ee(l,$),_e?process.nextTick(ue,l,$,A,ce):ue(l,$,A,ce)}}(w,ce)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==l.emitClose,this.autoDestroy=!!l.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function e(l){var w=this instanceof(N=N||p(20942));if(!w&&!S.call(e,this))return new e(l);this._writableState=new z(l,this,w),this.writable=!0,l&&("function"==typeof l.write&&(this._write=l.write),"function"==typeof l.writev&&(this._writev=l.writev),"function"==typeof l.destroy&&(this._destroy=l.destroy),"function"==typeof l.final&&(this._final=l.final)),x.call(this)}function oe(l,w,$,_e,ce,A,W){w.writelen=_e,w.writecb=W,w.writing=!0,w.sync=!0,w.destroyed?w.onwrite(new F("write")):$?l._writev(ce,w.onwrite):l._write(ce,A,w.onwrite),w.sync=!1}function ue(l,w,$,_e){$||function Ie(l,w){0===w.length&&w.needDrain&&(w.needDrain=!1,l.emit("drain"))}(l,w),w.pendingcb--,_e(),be(l,w)}function Ee(l,w){w.bufferProcessing=!0;var $=w.bufferedRequest;if(l._writev&&$&&$.next){var ce=new Array(w.bufferedRequestCount),A=w.corkedRequestsFree;A.entry=$;for(var W=0,j=!0;$;)ce[W]=$,$.isBuf||(j=!1),$=$.next,W+=1;ce.allBuffers=j,oe(l,w,!0,w.length,ce,"",A.finish),w.pendingcb++,w.lastBufferedRequest=null,A.next?(w.corkedRequestsFree=A.next,A.next=null):w.corkedRequestsFree=new r(w),w.bufferedRequestCount=0}else{for(;$;){var m=$.chunk;if(oe(l,w,!1,w.objectMode?1:m.length,m,$.encoding,$.callback),$=$.next,w.bufferedRequestCount--,w.writing)break}null===$&&(w.lastBufferedRequest=null)}w.bufferedRequest=$,w.bufferProcessing=!1}function Pe(l){return l.ending&&0===l.length&&null===l.bufferedRequest&&!l.finished&&!l.writing}function ze(l,w){l._final(function($){w.pendingcb--,$&&u(l,$),w.prefinished=!0,l.emit("prefinish"),be(l,w)})}function be(l,w){var $=Pe(w);if($&&(function Le(l,w){!w.prefinished&&!w.finalCalled&&("function"!=typeof l._final||w.destroyed?(w.prefinished=!0,l.emit("prefinish")):(w.pendingcb++,w.finalCalled=!0,process.nextTick(ze,l,w)))}(l,w),0===w.pendingcb&&(w.finished=!0,l.emit("finish"),w.autoDestroy))){var _e=l._readableState;(!_e||_e.autoDestroy&&_e.endEmitted)&&l.destroy()}return $}p(59879)(e,x),z.prototype.getBuffer=function(){for(var w=this.bufferedRequest,$=[];w;)$.push(w),w=w.next;return $},function(){try{Object.defineProperty(z.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(S=Function.prototype[Symbol.hasInstance],Object.defineProperty(e,Symbol.hasInstance,{value:function(w){return!!S.call(this,w)||this===e&&w&&w._writableState instanceof z}})):S=function(w){return w instanceof this},e.prototype.pipe=function(){u(this,new k)},e.prototype.write=function(l,w,$){var _e=this._writableState,ce=!1,A=!_e.objectMode&&function v(l){return T.isBuffer(l)||l instanceof d}(l);return A&&!T.isBuffer(l)&&(l=function M(l){return T.from(l)}(l)),"function"==typeof w&&($=w,w=null),A?w="buffer":w||(w=_e.defaultEncoding),"function"!=typeof $&&($=h),_e.ending?function D(l,w){var $=new f;u(l,$),process.nextTick(w,$)}(this,$):(A||function q(l,w,$,_e){var ce;return null===$?ce=new C:"string"!=typeof $&&!w.objectMode&&(ce=new y("chunk",["string","Buffer"],$)),!ce||(u(l,ce),process.nextTick(_e,ce),!1)}(this,_e,l,$))&&(_e.pendingcb++,ce=function ie(l,w,$,_e,ce,A){if(!$){var W=function J(l,w,$){return!l.objectMode&&!1!==l.decodeStrings&&"string"==typeof w&&(w=T.from(w,$)),w}(w,_e,ce);_e!==W&&($=!0,ce="buffer",_e=W)}var j=w.objectMode?1:_e.length;w.length+=j;var m=w.length<w.highWaterMark;if(m||(w.needDrain=!0),w.writing||w.corked){var s=w.lastBufferedRequest;w.lastBufferedRequest={chunk:_e,encoding:ce,isBuf:$,callback:A,next:null},s?s.next=w.lastBufferedRequest:w.bufferedRequest=w.lastBufferedRequest,w.bufferedRequestCount+=1}else oe(l,w,!1,j,_e,ce,A);return m}(this,_e,A,l,w,$)),ce},e.prototype.cork=function(){this._writableState.corked++},e.prototype.uncork=function(){var l=this._writableState;l.corked&&(l.corked--,!l.writing&&!l.corked&&!l.bufferProcessing&&l.bufferedRequest&&Ee(this,l))},e.prototype.setDefaultEncoding=function(w){if("string"==typeof w&&(w=w.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((w+"").toLowerCase())>-1))throw new c(w);return this._writableState.defaultEncoding=w,this},Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),e.prototype._write=function(l,w,$){$(new I("_write()"))},e.prototype._writev=null,e.prototype.end=function(l,w,$){var _e=this._writableState;return"function"==typeof l?($=l,l=null,w=null):"function"==typeof w&&($=w,w=null),null!=l&&this.write(l,w),_e.corked&&(_e.corked=1,this.uncork()),_e.ending||function Ge(l,w,$){w.ending=!0,be(l,w),$&&(w.finished?process.nextTick($):l.once("finish",$)),w.ended=!0,l.writable=!1}(this,_e,$),this},Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(w){this._writableState&&(this._writableState.destroyed=w)}}),e.prototype.destroy=P.destroy,e.prototype._undestroy=P.undestroy,e.prototype._destroy=function(l,w){w(l)}},19983:(Y,V,p)=>{"use strict";var g;function r(f,c,u){return c=function N(f){var c=function b(f,c){if("object"!=typeof f||null===f)return f;var u=f[Symbol.toPrimitive];if(void 0!==u){var h=u.call(f,c||"default");if("object"!=typeof h)return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===c?String:Number)(f)}(f,"string");return"symbol"==typeof c?c:String(c)}(c),c in f?Object.defineProperty(f,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):f[c]=u,f}var x=p(6820),T=Symbol("lastResolve"),d=Symbol("lastReject"),M=Symbol("error"),v=Symbol("ended"),P=Symbol("lastPromise"),B=Symbol("handlePromise"),Z=Symbol("stream");function R(f,c){return{value:f,done:c}}function y(f){var c=f[T];if(null!==c){var u=f[Z].read();null!==u&&(f[P]=null,f[T]=null,f[d]=null,c(R(u,!1)))}}function I(f){process.nextTick(y,f)}var k=Object.getPrototypeOf(function(){}),F=Object.setPrototypeOf((r(g={get stream(){return this[Z]},next:function(){var c=this,u=this[M];if(null!==u)return Promise.reject(u);if(this[v])return Promise.resolve(R(void 0,!0));if(this[Z].destroyed)return new Promise(function(e,D){process.nextTick(function(){c[M]?D(c[M]):e(R(void 0,!0))})});var z,h=this[P];if(h)z=new Promise(function L(f,c){return function(u,h){f.then(function(){c[v]?u(R(void 0,!0)):c[B](u,h)},h)}}(h,this));else{var S=this[Z].read();if(null!==S)return Promise.resolve(R(S,!1));z=new Promise(this[B])}return this[P]=z,z}},Symbol.asyncIterator,function(){return this}),r(g,"return",function(){var c=this;return new Promise(function(u,h){c[Z].destroy(null,function(z){z?h(z):u(R(void 0,!0))})})}),g),k);Y.exports=function(c){var u,h=Object.create(F,(r(u={},Z,{value:c,writable:!0}),r(u,T,{value:null,writable:!0}),r(u,d,{value:null,writable:!0}),r(u,M,{value:null,writable:!0}),r(u,v,{value:c._readableState.endEmitted,writable:!0}),r(u,B,{value:function(S,e){var D=h[Z].read();D?(h[P]=null,h[T]=null,h[d]=null,S(R(D,!1))):(h[T]=S,h[d]=e)},writable:!0}),u));return h[P]=null,x(c,function(z){if(z&&"ERR_STREAM_PREMATURE_CLOSE"!==z.code){var S=h[d];return null!==S&&(h[P]=null,h[T]=null,h[d]=null,S(z)),void(h[M]=z)}var e=h[T];null!==e&&(h[P]=null,h[T]=null,h[d]=null,e(R(void 0,!0))),h[v]=!0}),c.on("readable",I.bind(null,h)),h}},39370:(Y,V,p)=>{"use strict";function g(I,L){var k=Object.keys(I);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(I);L&&(F=F.filter(function(C){return Object.getOwnPropertyDescriptor(I,C).enumerable})),k.push.apply(k,F)}return k}function r(I){for(var L=1;L<arguments.length;L++){var k=null!=arguments[L]?arguments[L]:{};L%2?g(Object(k),!0).forEach(function(F){N(I,F,k[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(k)):g(Object(k)).forEach(function(F){Object.defineProperty(I,F,Object.getOwnPropertyDescriptor(k,F))})}return I}function N(I,L,k){return(L=d(L))in I?Object.defineProperty(I,L,{value:k,enumerable:!0,configurable:!0,writable:!0}):I[L]=k,I}function x(I,L){for(var k=0;k<L.length;k++){var F=L[k];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(I,d(F.key),F)}}function d(I){var L=function M(I,L){if("object"!=typeof I||null===I)return I;var k=I[Symbol.toPrimitive];if(void 0!==k){var F=k.call(I,L||"default");if("object"!=typeof F)return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===L?String:Number)(I)}(I,"string");return"symbol"==typeof L?L:String(L)}var P=p(3875).Buffer,Z=p(52361).inspect,R=Z&&Z.custom||"inspect";function y(I,L,k){P.prototype.copy.call(I,L,k)}Y.exports=function(){function I(){(function b(I,L){if(!(I instanceof L))throw new TypeError("Cannot call a class as a function")})(this,I),this.head=null,this.tail=null,this.length=0}return function T(I,L,k){L&&x(I.prototype,L),k&&x(I,k),Object.defineProperty(I,"prototype",{writable:!1})}(I,[{key:"push",value:function(k){var F={data:k,next:null};this.length>0?this.tail.next=F:this.head=F,this.tail=F,++this.length}},{key:"unshift",value:function(k){var F={data:k,next:this.head};0===this.length&&(this.tail=F),this.head=F,++this.length}},{key:"shift",value:function(){if(0!==this.length){var k=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,k}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(k){if(0===this.length)return"";for(var F=this.head,C=""+F.data;F=F.next;)C+=k+F.data;return C}},{key:"concat",value:function(k){if(0===this.length)return P.alloc(0);for(var F=P.allocUnsafe(k>>>0),C=this.head,f=0;C;)y(C.data,F,f),f+=C.data.length,C=C.next;return F}},{key:"consume",value:function(k,F){var C;return k<this.head.data.length?(C=this.head.data.slice(0,k),this.head.data=this.head.data.slice(k)):C=k===this.head.data.length?this.shift():F?this._getString(k):this._getBuffer(k),C}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(k){var F=this.head,C=1,f=F.data;for(k-=f.length;F=F.next;){var c=F.data,u=k>c.length?c.length:k;if(f+=u===c.length?c:c.slice(0,k),0==(k-=u)){u===c.length?(++C,this.head=F.next?F.next:this.tail=null):(this.head=F,F.data=c.slice(u));break}++C}return this.length-=C,f}},{key:"_getBuffer",value:function(k){var F=P.allocUnsafe(k),C=this.head,f=1;for(C.data.copy(F),k-=C.data.length;C=C.next;){var c=C.data,u=k>c.length?c.length:k;if(c.copy(F,F.length-k,0,u),0==(k-=u)){u===c.length?(++f,this.head=C.next?C.next:this.tail=null):(this.head=C,C.data=c.slice(u));break}++f}return this.length-=f,F}},{key:R,value:function(k,F){return Z(this,r(r({},F),{},{depth:0,customInspect:!1}))}}]),I}()},10806:Y=>{"use strict";function p(x,T){N(x,T),g(x)}function g(x){x._writableState&&!x._writableState.emitClose||x._readableState&&!x._readableState.emitClose||x.emit("close")}function N(x,T){x.emit("error",T)}Y.exports={destroy:function V(x,T){var d=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(T?T(x):x&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(N,this,x)):process.nextTick(N,this,x)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(x||null,function(P){!T&&P?d._writableState?d._writableState.errorEmitted?process.nextTick(g,d):(d._writableState.errorEmitted=!0,process.nextTick(p,d,P)):process.nextTick(p,d,P):T?(process.nextTick(g,d),T(P)):process.nextTick(g,d)}),this)},undestroy:function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function b(x,T){var d=x._readableState,M=x._writableState;d&&d.autoDestroy||M&&M.autoDestroy?x.destroy(T):x.emit("error",T)}}},6820:(Y,V,p)=>{"use strict";var g=p(48230).q.ERR_STREAM_PREMATURE_CLOSE;function N(){}Y.exports=function x(T,d,M){if("function"==typeof d)return x(T,null,d);d||(d={}),M=function r(T){var d=!1;return function(){if(!d){d=!0;for(var M=arguments.length,v=new Array(M),P=0;P<M;P++)v[P]=arguments[P];T.apply(this,v)}}}(M||N);var v=d.readable||!1!==d.readable&&T.readable,P=d.writable||!1!==d.writable&&T.writable,B=function(){T.writable||R()},Z=T._writableState&&T._writableState.finished,R=function(){P=!1,Z=!0,v||M.call(T)},y=T._readableState&&T._readableState.endEmitted,I=function(){v=!1,y=!0,P||M.call(T)},L=function(f){M.call(T,f)},k=function(){var f;return v&&!y?((!T._readableState||!T._readableState.ended)&&(f=new g),M.call(T,f)):P&&!Z?((!T._writableState||!T._writableState.ended)&&(f=new g),M.call(T,f)):void 0},F=function(){T.req.on("finish",R)};return function b(T){return T.setHeader&&"function"==typeof T.abort}(T)?(T.on("complete",R),T.on("abort",k),T.req?F():T.on("request",F)):P&&!T._writableState&&(T.on("end",B),T.on("close",B)),T.on("end",I),T.on("finish",R),!1!==d.error&&T.on("error",L),T.on("close",k),function(){T.removeListener("complete",R),T.removeListener("abort",k),T.removeListener("request",F),T.req&&T.req.removeListener("finish",R),T.removeListener("end",B),T.removeListener("close",B),T.removeListener("finish",R),T.removeListener("end",I),T.removeListener("error",L),T.removeListener("close",k)}}},3659:Y=>{Y.exports=function(){throw new Error("Readable.from is not available in the browser")}},36076:(Y,V,p)=>{"use strict";var g,N=p(48230).q,b=N.ERR_MISSING_ARGS,x=N.ERR_STREAM_DESTROYED;function T(R){if(R)throw R}function v(R){R()}function P(R,y){return R.pipe(y)}Y.exports=function Z(){for(var R=arguments.length,y=new Array(R),I=0;I<R;I++)y[I]=arguments[I];var L=function B(R){return R.length&&"function"==typeof R[R.length-1]?R.pop():T}(y);if(Array.isArray(y[0])&&(y=y[0]),y.length<2)throw new b("streams");var k,F=y.map(function(C,f){var c=f<y.length-1;return function M(R,y,I,L){L=function r(R){var y=!1;return function(){y||(y=!0,R.apply(void 0,arguments))}}(L);var k=!1;R.on("close",function(){k=!0}),void 0===g&&(g=p(6820)),g(R,{readable:y,writable:I},function(C){if(C)return L(C);k=!0,L()});var F=!1;return function(C){if(!k&&!F){if(F=!0,function d(R){return R.setHeader&&"function"==typeof R.abort}(R))return R.abort();if("function"==typeof R.destroy)return R.destroy();L(C||new x("pipe"))}}}(C,c,f>0,function(h){k||(k=h),h&&F.forEach(v),!c&&(F.forEach(v),L(k))})});return y.reduce(P)}},12903:(Y,V,p)=>{"use strict";var g=p(48230).q.ERR_INVALID_OPT_VALUE;Y.exports={getHighWaterMark:function N(b,x,T,d){var M=function r(b,x,T){return null!=b.highWaterMark?b.highWaterMark:x?b[T]:null}(x,d,T);if(null!=M){if(!isFinite(M)||Math.floor(M)!==M||M<0)throw new g(d?T:"highWaterMark",M);return Math.floor(M)}return b.objectMode?16:16384}}},75112:(Y,V,p)=>{Y.exports=p(93105).EventEmitter},55859:(Y,V,p)=>{var g=p(3875),r=g.Buffer;function N(x,T){for(var d in x)T[d]=x[d]}function b(x,T,d){return r(x,T,d)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?Y.exports=g:(N(g,V),V.Buffer=b),b.prototype=Object.create(r.prototype),N(r,b),b.from=function(x,T,d){if("number"==typeof x)throw new TypeError("Argument must not be a number");return r(x,T,d)},b.alloc=function(x,T,d){if("number"!=typeof x)throw new TypeError("Argument must be a number");var M=r(x);return void 0!==T?"string"==typeof d?M.fill(T,d):M.fill(T):M.fill(0),M},b.allocUnsafe=function(x){if("number"!=typeof x)throw new TypeError("Argument must be a number");return r(x)},b.allocUnsafeSlow=function(x){if("number"!=typeof x)throw new TypeError("Argument must be a number");return g.SlowBuffer(x)}},5473:(Y,V,p)=>{!function(g){g.parser=function(O,l){return new N(O,l)},g.SAXParser=N,g.SAXStream=P,g.createStream=function v(O,l){return new P(O,l)},g.MAX_BUFFER_LENGTH=65536;var d,r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function N(O,l){if(!(this instanceof N))return new N(O,l);var w=this;(function x(O){for(var l=0,w=r.length;l<w;l++)O[r[l]]=""})(w),w.q=w.c="",w.bufferCheckPosition=g.MAX_BUFFER_LENGTH,w.opt=l||{},w.opt.lowercase=w.opt.lowercase||w.opt.lowercasetags,w.looseCase=w.opt.lowercase?"toLowerCase":"toUpperCase",w.tags=[],w.closed=w.closedRoot=w.sawRoot=!1,w.tag=w.error=null,w.strict=!!O,w.noscript=!(!O&&!w.opt.noscript),w.state=S.BEGIN,w.strictEntities=w.opt.strictEntities,w.ENTITIES=Object.create(w.strictEntities?g.XML_ENTITIES:g.ENTITIES),w.attribList=[],w.opt.xmlns&&(w.ns=Object.create(I)),w.trackPosition=!1!==w.opt.position,w.trackPosition&&(w.position=w.line=w.column=0),D(w,"onready")}g.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(O){function l(){}return l.prototype=O,new l}),Object.keys||(Object.keys=function(O){var l=[];for(var w in O)O.hasOwnProperty(w)&&l.push(w);return l}),N.prototype={end:function(){fe(this)},write:function Ge(O){var l=this;if(this.error)throw this.error;if(l.closed)return oe(l,"Cannot write after close. Assign an onready handler.");if(null===O)return fe(l);"object"==typeof O&&(O=O.toString());for(var w=0,$="";$=be(O,w++),l.c=$,$;)switch(l.trackPosition&&(l.position++,"\n"===$?(l.line++,l.column=0):l.column++),l.state){case S.BEGIN:if(l.state=S.BEGIN_WHITESPACE,"\ufeff"===$)continue;Le(l,$);continue;case S.BEGIN_WHITESPACE:Le(l,$);continue;case S.TEXT:if(l.sawRoot&&!l.closedRoot){for(var _e=w-1;$&&"<"!==$&&"&"!==$;)($=be(O,w++))&&l.trackPosition&&(l.position++,"\n"===$?(l.line++,l.column=0):l.column++);l.textNode+=O.substring(_e,w-1)}"<"!==$||l.sawRoot&&l.closedRoot&&!l.strict?(!f($)&&(!l.sawRoot||l.closedRoot)&&ae(l,"Text data outside of root node."),"&"===$?l.state=S.TEXT_ENTITY:l.textNode+=$):(l.state=S.OPEN_WAKA,l.startTagPosition=l.position);continue;case S.SCRIPT:"<"===$?l.state=S.SCRIPT_ENDING:l.script+=$;continue;case S.SCRIPT_ENDING:"/"===$?l.state=S.CLOSE_TAG:(l.script+="<"+$,l.state=S.SCRIPT);continue;case S.OPEN_WAKA:"!"===$?(l.state=S.SGML_DECL,l.sgmlDecl=""):f($)||(h(L,$)?(l.state=S.OPEN_TAG,l.tagName=$):"/"===$?(l.state=S.CLOSE_TAG,l.tagName=""):"?"===$?(l.state=S.PROC_INST,l.procInstName=l.procInstBody=""):(ae(l,"Unencoded <"),l.startTagPosition+1<l.position&&($=new Array(l.position-l.startTagPosition).join(" ")+$),l.textNode+="<"+$,l.state=S.TEXT));continue;case S.SGML_DECL:(l.sgmlDecl+$).toUpperCase()===B?(q(l,"onopencdata"),l.state=S.CDATA,l.sgmlDecl="",l.cdata=""):l.sgmlDecl+$==="--"?(l.state=S.COMMENT,l.comment="",l.sgmlDecl=""):(l.sgmlDecl+$).toUpperCase()===Z?(l.state=S.DOCTYPE,(l.doctype||l.sawRoot)&&ae(l,"Inappropriately located doctype declaration"),l.doctype="",l.sgmlDecl=""):">"===$?(q(l,"onsgmldeclaration",l.sgmlDecl),l.sgmlDecl="",l.state=S.TEXT):(c($)&&(l.state=S.SGML_DECL_QUOTED),l.sgmlDecl+=$);continue;case S.SGML_DECL_QUOTED:$===l.q&&(l.state=S.SGML_DECL,l.q=""),l.sgmlDecl+=$;continue;case S.DOCTYPE:">"===$?(l.state=S.TEXT,q(l,"ondoctype",l.doctype),l.doctype=!0):(l.doctype+=$,"["===$?l.state=S.DOCTYPE_DTD:c($)&&(l.state=S.DOCTYPE_QUOTED,l.q=$));continue;case S.DOCTYPE_QUOTED:l.doctype+=$,$===l.q&&(l.q="",l.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:l.doctype+=$,"]"===$?l.state=S.DOCTYPE:c($)&&(l.state=S.DOCTYPE_DTD_QUOTED,l.q=$);continue;case S.DOCTYPE_DTD_QUOTED:l.doctype+=$,$===l.q&&(l.state=S.DOCTYPE_DTD,l.q="");continue;case S.COMMENT:"-"===$?l.state=S.COMMENT_ENDING:l.comment+=$;continue;case S.COMMENT_ENDING:"-"===$?(l.state=S.COMMENT_ENDED,l.comment=ie(l.opt,l.comment),l.comment&&q(l,"oncomment",l.comment),l.comment=""):(l.comment+="-"+$,l.state=S.COMMENT);continue;case S.COMMENT_ENDED:">"!==$?(ae(l,"Malformed comment"),l.comment+="--"+$,l.state=S.COMMENT):l.state=S.TEXT;continue;case S.CDATA:"]"===$?l.state=S.CDATA_ENDING:l.cdata+=$;continue;case S.CDATA_ENDING:"]"===$?l.state=S.CDATA_ENDING_2:(l.cdata+="]"+$,l.state=S.CDATA);continue;case S.CDATA_ENDING_2:">"===$?(l.cdata&&q(l,"oncdata",l.cdata),q(l,"onclosecdata"),l.cdata="",l.state=S.TEXT):"]"===$?l.cdata+="]":(l.cdata+="]]"+$,l.state=S.CDATA);continue;case S.PROC_INST:"?"===$?l.state=S.PROC_INST_ENDING:f($)?l.state=S.PROC_INST_BODY:l.procInstName+=$;continue;case S.PROC_INST_BODY:if(!l.procInstBody&&f($))continue;"?"===$?l.state=S.PROC_INST_ENDING:l.procInstBody+=$;continue;case S.PROC_INST_ENDING:">"===$?(q(l,"onprocessinginstruction",{name:l.procInstName,body:l.procInstBody}),l.procInstName=l.procInstBody="",l.state=S.TEXT):(l.procInstBody+="?"+$,l.state=S.PROC_INST_BODY);continue;case S.OPEN_TAG:h(k,$)?l.tagName+=$:(Ne(l),">"===$?Ee(l):"/"===$?l.state=S.OPEN_TAG_SLASH:(f($)||ae(l,"Invalid character in tag name"),l.state=S.ATTRIB));continue;case S.OPEN_TAG_SLASH:">"===$?(Ee(l,!0),Pe(l)):(ae(l,"Forward-slash in opening tag not followed by >"),l.state=S.ATTRIB);continue;case S.ATTRIB:if(f($))continue;">"===$?Ee(l):"/"===$?l.state=S.OPEN_TAG_SLASH:h(L,$)?(l.attribName=$,l.attribValue="",l.state=S.ATTRIB_NAME):ae(l,"Invalid attribute name");continue;case S.ATTRIB_NAME:"="===$?l.state=S.ATTRIB_VALUE:">"===$?(ae(l,"Attribute without value"),l.attribValue=l.attribName,Ie(l),Ee(l)):f($)?l.state=S.ATTRIB_NAME_SAW_WHITE:h(k,$)?l.attribName+=$:ae(l,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if("="===$)l.state=S.ATTRIB_VALUE;else{if(f($))continue;ae(l,"Attribute without value"),l.tag.attributes[l.attribName]="",l.attribValue="",q(l,"onattribute",{name:l.attribName,value:""}),l.attribName="",">"===$?Ee(l):h(L,$)?(l.attribName=$,l.state=S.ATTRIB_NAME):(ae(l,"Invalid attribute name"),l.state=S.ATTRIB)}continue;case S.ATTRIB_VALUE:if(f($))continue;c($)?(l.q=$,l.state=S.ATTRIB_VALUE_QUOTED):(ae(l,"Unquoted attribute value"),l.state=S.ATTRIB_VALUE_UNQUOTED,l.attribValue=$);continue;case S.ATTRIB_VALUE_QUOTED:if($!==l.q){"&"===$?l.state=S.ATTRIB_VALUE_ENTITY_Q:l.attribValue+=$;continue}Ie(l),l.q="",l.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:f($)?l.state=S.ATTRIB:">"===$?Ee(l):"/"===$?l.state=S.OPEN_TAG_SLASH:h(L,$)?(ae(l,"No whitespace between attributes"),l.attribName=$,l.attribValue="",l.state=S.ATTRIB_NAME):ae(l,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(!u($)){"&"===$?l.state=S.ATTRIB_VALUE_ENTITY_U:l.attribValue+=$;continue}Ie(l),">"===$?Ee(l):l.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(l.tagName)">"===$?Pe(l):h(k,$)?l.tagName+=$:l.script?(l.script+="</"+l.tagName,l.tagName="",l.state=S.SCRIPT):(f($)||ae(l,"Invalid tagname in closing tag"),l.state=S.CLOSE_TAG_SAW_WHITE);else{if(f($))continue;z(L,$)?l.script?(l.script+="</"+$,l.state=S.SCRIPT):ae(l,"Invalid tagname in closing tag."):l.tagName=$}continue;case S.CLOSE_TAG_SAW_WHITE:if(f($))continue;">"===$?Pe(l):ae(l,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var A,W;switch(l.state){case S.TEXT_ENTITY:A=S.TEXT,W="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:A=S.ATTRIB_VALUE_QUOTED,W="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:A=S.ATTRIB_VALUE_UNQUOTED,W="attribValue"}if(";"===$)if(l.opt.unparsedEntities){var j=ze(l);l.entity="",l.state=A,l.write(j)}else l[W]+=ze(l),l.entity="",l.state=A;else h(l.entity.length?C:F,$)?l.entity+=$:(ae(l,"Invalid character in entity name"),l[W]+="&"+l.entity+$,l.entity="",l.state=A);continue;default:throw new Error(l,"Unknown state: "+l.state)}return l.position>=l.bufferCheckPosition&&function b(O){for(var l=Math.max(g.MAX_BUFFER_LENGTH,10),w=0,$=0,_e=r.length;$<_e;$++){var ce=O[r[$]].length;if(ce>l)switch(r[$]){case"textNode":J(O);break;case"cdata":q(O,"oncdata",O.cdata),O.cdata="";break;case"script":q(O,"onscript",O.script),O.script="";break;default:oe(O,"Max buffer length exceeded: "+r[$])}w=Math.max(w,ce)}O.bufferCheckPosition=g.MAX_BUFFER_LENGTH-w+O.position}(l),l},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function T(O){J(O),""!==O.cdata&&(q(O,"oncdata",O.cdata),O.cdata=""),""!==O.script&&(q(O,"onscript",O.script),O.script="")}(this)}};try{d=p(36917).Stream}catch{d=function(){}}d||(d=function(){});var M=g.EVENTS.filter(function(O){return"error"!==O&&"end"!==O});function P(O,l){if(!(this instanceof P))return new P(O,l);d.apply(this),this._parser=new N(O,l),this.writable=!0,this.readable=!0;var w=this;this._parser.onend=function(){w.emit("end")},this._parser.onerror=function($){w.emit("error",$),w._parser.error=null},this._decoder=null,M.forEach(function($){Object.defineProperty(w,"on"+$,{get:function(){return w._parser["on"+$]},set:function(_e){if(!_e)return w.removeAllListeners($),w._parser["on"+$]=_e,_e;w.on($,_e)},enumerable:!0,configurable:!1})})}(P.prototype=Object.create(d.prototype,{constructor:{value:P}})).write=function(O){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(O)){if(!this._decoder){var l=p(32519).s;this._decoder=new l("utf8")}O=this._decoder.write(O)}return this._parser.write(O.toString()),this.emit("data",O),!0},P.prototype.end=function(O){return O&&O.length&&this.write(O),this._parser.end(),!0},P.prototype.on=function(O,l){var w=this;return!w._parser["on"+O]&&-1!==M.indexOf(O)&&(w._parser["on"+O]=function(){var $=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);$.splice(0,0,O),w.emit.apply(w,$)}),d.prototype.on.call(w,O,l)};var B="[CDATA[",Z="DOCTYPE",R="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/2000/xmlns/",I={xml:R,xmlns:y},L=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,k=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,F=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,C=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function f(O){return" "===O||"\n"===O||"\r"===O||"\t"===O}function c(O){return'"'===O||"'"===O}function u(O){return">"===O||f(O)}function h(O,l){return O.test(l)}function z(O,l){return!h(O,l)}var O,l,w,S=0;for(var e in g.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},g.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},g.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(g.ENTITIES).forEach(function(O){var l=g.ENTITIES[O],w="number"==typeof l?String.fromCharCode(l):l;g.ENTITIES[O]=w}),g.STATE)g.STATE[g.STATE[e]]=e;function D(O,l,w){O[l]&&O[l](w)}function q(O,l,w){O.textNode&&J(O),D(O,l,w)}function J(O){O.textNode=ie(O.opt,O.textNode),O.textNode&&D(O,"ontext",O.textNode),O.textNode=""}function ie(O,l){return O.trim&&(l=l.trim()),O.normalize&&(l=l.replace(/\s+/g," ")),l}function oe(O,l){return J(O),O.trackPosition&&(l+="\nLine: "+O.line+"\nColumn: "+O.column+"\nChar: "+O.c),l=new Error(l),O.error=l,D(O,"onerror",l),O}function fe(O){return O.sawRoot&&!O.closedRoot&&ae(O,"Unclosed root tag"),O.state!==S.BEGIN&&O.state!==S.BEGIN_WHITESPACE&&O.state!==S.TEXT&&oe(O,"Unexpected end"),J(O),O.c="",O.closed=!0,D(O,"onend"),N.call(O,O.strict,O.opt),O}function ae(O,l){if("object"!=typeof O||!(O instanceof N))throw new Error("bad call to strictFail");O.strict&&oe(O,l)}function Ne(O){O.strict||(O.tagName=O.tagName[O.looseCase]());var l=O.tags[O.tags.length-1]||O,w=O.tag={name:O.tagName,attributes:{}};O.opt.xmlns&&(w.ns=l.ns),O.attribList.length=0,q(O,"onopentagstart",w)}function ue(O,l){var $=O.indexOf(":")<0?["",O]:O.split(":"),_e=$[0],ce=$[1];return l&&"xmlns"===O&&(_e="xmlns",ce=""),{prefix:_e,local:ce}}function Ie(O){if(O.strict||(O.attribName=O.attribName[O.looseCase]()),-1!==O.attribList.indexOf(O.attribName)||O.tag.attributes.hasOwnProperty(O.attribName))O.attribName=O.attribValue="";else{if(O.opt.xmlns){var l=ue(O.attribName,!0),$=l.local;if("xmlns"===l.prefix)if("xml"===$&&O.attribValue!==R)ae(O,"xml: prefix must be bound to "+R+"\nActual: "+O.attribValue);else if("xmlns"===$&&O.attribValue!==y)ae(O,"xmlns: prefix must be bound to "+y+"\nActual: "+O.attribValue);else{var _e=O.tag,ce=O.tags[O.tags.length-1]||O;_e.ns===ce.ns&&(_e.ns=Object.create(ce.ns)),_e.ns[$]=O.attribValue}O.attribList.push([O.attribName,O.attribValue])}else O.tag.attributes[O.attribName]=O.attribValue,q(O,"onattribute",{name:O.attribName,value:O.attribValue});O.attribName=O.attribValue=""}}function Ee(O,l){if(O.opt.xmlns){var w=O.tag,$=ue(O.tagName);w.prefix=$.prefix,w.local=$.local,w.uri=w.ns[$.prefix]||"",w.prefix&&!w.uri&&(ae(O,"Unbound namespace prefix: "+JSON.stringify(O.tagName)),w.uri=$.prefix),w.ns&&(O.tags[O.tags.length-1]||O).ns!==w.ns&&Object.keys(w.ns).forEach(function(ne){q(O,"onopennamespace",{prefix:ne,uri:w.ns[ne]})});for(var ce=0,A=O.attribList.length;ce<A;ce++){var W=O.attribList[ce],j=W[0],m=W[1],s=ue(j,!0),a=s.prefix,X=""===a?"":w.ns[a]||"",ee={name:j,value:m,prefix:a,local:s.local,uri:X};a&&"xmlns"!==a&&!X&&(ae(O,"Unbound namespace prefix: "+JSON.stringify(a)),ee.uri=a),O.tag.attributes[j]=ee,q(O,"onattribute",ee)}O.attribList.length=0}O.tag.isSelfClosing=!!l,O.sawRoot=!0,O.tags.push(O.tag),q(O,"onopentag",O.tag),l||(O.state=O.noscript||"script"!==O.tagName.toLowerCase()?S.TEXT:S.SCRIPT,O.tag=null,O.tagName=""),O.attribName=O.attribValue="",O.attribList.length=0}function Pe(O){if(!O.tagName)return ae(O,"Weird empty close tag."),O.textNode+="</>",void(O.state=S.TEXT);if(O.script){if("script"!==O.tagName)return O.script+="</"+O.tagName+">",O.tagName="",void(O.state=S.SCRIPT);q(O,"onscript",O.script),O.script=""}var l=O.tags.length,w=O.tagName;O.strict||(w=w[O.looseCase]());for(var $=w;l--&&O.tags[l].name!==$;)ae(O,"Unexpected close tag");if(l<0)return ae(O,"Unmatched closing tag: "+O.tagName),O.textNode+="</"+O.tagName+">",void(O.state=S.TEXT);O.tagName=w;for(var ce=O.tags.length;ce-- >l;){var A=O.tag=O.tags.pop();O.tagName=O.tag.name,q(O,"onclosetag",O.tagName);var W={};for(var j in A.ns)W[j]=A.ns[j];O.opt.xmlns&&A.ns!==(O.tags[O.tags.length-1]||O).ns&&Object.keys(A.ns).forEach(function(s){q(O,"onclosenamespace",{prefix:s,uri:A.ns[s]})})}0===l&&(O.closedRoot=!0),O.tagName=O.attribValue=O.attribName="",O.attribList.length=0,O.state=S.TEXT}function ze(O){var $,l=O.entity,w=l.toLowerCase(),_e="";return O.ENTITIES[l]?O.ENTITIES[l]:O.ENTITIES[w]?O.ENTITIES[w]:("#"===(l=w).charAt(0)&&("x"===l.charAt(1)?(l=l.slice(2),_e=($=parseInt(l,16)).toString(16)):(l=l.slice(1),_e=($=parseInt(l,10)).toString(10))),l=l.replace(/^0+/,""),isNaN($)||_e.toLowerCase()!==l?(ae(O,"Invalid character entity"),"&"+O.entity+";"):String.fromCodePoint($))}function Le(O,l){"<"===l?(O.state=S.OPEN_WAKA,O.startTagPosition=O.position):f(l)||(ae(O,"Non-whitespace before first tag."),O.textNode=l,O.state=S.TEXT)}function be(O,l){var w="";return l<O.length&&(w=O.charAt(l)),w}S=g.STATE,String.fromCodePoint||(O=String.fromCharCode,l=Math.floor,w=function(){var _e=[],W=-1,j=arguments.length;if(!j)return"";for(var m="";++W<j;){var s=Number(arguments[W]);if(!isFinite(s)||s<0||s>1114111||l(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?_e.push(s):_e.push(55296+((s-=65536)>>10),s%1024+56320),(W+1===j||_e.length>16384)&&(m+=O.apply(null,_e),_e.length=0)}return m},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:w,configurable:!0,writable:!0}):String.fromCodePoint=w)}(V)},45470:function(){!function(Y,V){"use strict";if(!Y.setImmediate){var b,p=1,g={},r=!1,N=Y.document,I=Object.getPrototypeOf&&Object.getPrototypeOf(Y);I=I&&I.setTimeout?I:Y,"[object process]"==={}.toString.call(Y.process)?function v(){b=function(L){process.nextTick(function(){M(L)})}}():function P(){if(Y.postMessage&&!Y.importScripts){var L=!0,k=Y.onmessage;return Y.onmessage=function(){L=!1},Y.postMessage("","*"),Y.onmessage=k,L}}()?function B(){var L="setImmediate$"+Math.random()+"$",k=function(F){F.source===Y&&"string"==typeof F.data&&0===F.data.indexOf(L)&&M(+F.data.slice(L.length))};Y.addEventListener?Y.addEventListener("message",k,!1):Y.attachEvent("onmessage",k),b=function(F){Y.postMessage(L+F,"*")}}():Y.MessageChannel?function Z(){var L=new MessageChannel;L.port1.onmessage=function(k){M(k.data)},b=function(k){L.port2.postMessage(k)}}():N&&"onreadystatechange"in N.createElement("script")?function R(){var L=N.documentElement;b=function(k){var F=N.createElement("script");F.onreadystatechange=function(){M(k),F.onreadystatechange=null,L.removeChild(F),F=null},L.appendChild(F)}}():function y(){b=function(L){setTimeout(M,0,L)}}(),I.setImmediate=function x(L){"function"!=typeof L&&(L=new Function(""+L));for(var k=new Array(arguments.length-1),F=0;F<k.length;F++)k[F]=arguments[F+1];return g[p]={callback:L,args:k},b(p),p++},I.clearImmediate=T}function T(L){delete g[L]}function M(L){if(r)setTimeout(M,0,L);else{var k=g[L];if(k){r=!0;try{!function d(L){var k=L.callback,F=L.args;switch(F.length){case 0:k();break;case 1:k(F[0]);break;case 2:k(F[0],F[1]);break;case 3:k(F[0],F[1],F[2]);break;default:k.apply(V,F)}}(k)}finally{T(L),r=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},36917:(Y,V,p)=>{Y.exports=N;var g=p(93105).EventEmitter;function N(){g.call(this)}p(59879)(N,g),N.Readable=p(32833),N.Writable=p(37807),N.Duplex=p(20942),N.Transform=p(55431),N.PassThrough=p(90619),N.finished=p(6820),N.pipeline=p(36076),N.Stream=N,N.prototype.pipe=function(b,x){var T=this;function d(y){b.writable&&!1===b.write(y)&&T.pause&&T.pause()}function M(){T.readable&&T.resume&&T.resume()}T.on("data",d),b.on("drain",M),!b._isStdio&&(!x||!1!==x.end)&&(T.on("end",P),T.on("close",B));var v=!1;function P(){v||(v=!0,b.end())}function B(){v||(v=!0,"function"==typeof b.destroy&&b.destroy())}function Z(y){if(R(),0===g.listenerCount(this,"error"))throw y}function R(){T.removeListener("data",d),b.removeListener("drain",M),T.removeListener("end",P),T.removeListener("close",B),T.removeListener("error",Z),b.removeListener("error",Z),T.removeListener("end",R),T.removeListener("close",R),b.removeListener("close",R)}return T.on("error",Z),b.on("error",Z),T.on("end",R),T.on("close",R),b.on("close",R),b.emit("pipe",T),b}},32519:(Y,V,p)=>{"use strict";var g=p(55859).Buffer,r=g.isEncoding||function(F){switch((F=""+F)&&F.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function x(F){var C;switch(this.encoding=function b(F){var C=function N(F){if(!F)return"utf8";for(var C;;)switch(F){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return F;default:if(C)return;F=(""+F).toLowerCase(),C=!0}}(F);if("string"!=typeof C&&(g.isEncoding===r||!r(F)))throw new Error("Unknown encoding: "+F);return C||F}(F),this.encoding){case"utf16le":this.text=Z,this.end=R,C=4;break;case"utf8":this.fillLast=v,C=4;break;case"base64":this.text=y,this.end=I,C=3;break;default:return this.write=L,void(this.end=k)}this.lastNeed=0,this.lastTotal=0,this.lastChar=g.allocUnsafe(C)}function T(F){return F<=127?0:F>>5==6?2:F>>4==14?3:F>>3==30?4:F>>6==2?-1:-2}function v(F){var C=this.lastTotal-this.lastNeed,f=function M(F,C,f){if(128!=(192&C[0]))return F.lastNeed=0,"\ufffd";if(F.lastNeed>1&&C.length>1){if(128!=(192&C[1]))return F.lastNeed=1,"\ufffd";if(F.lastNeed>2&&C.length>2&&128!=(192&C[2]))return F.lastNeed=2,"\ufffd"}}(this,F);return void 0!==f?f:this.lastNeed<=F.length?(F.copy(this.lastChar,C,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(F.copy(this.lastChar,C,0,F.length),void(this.lastNeed-=F.length))}function Z(F,C){if((F.length-C)%2==0){var f=F.toString("utf16le",C);if(f){var c=f.charCodeAt(f.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=F[F.length-2],this.lastChar[1]=F[F.length-1],f.slice(0,-1)}return f}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=F[F.length-1],F.toString("utf16le",C,F.length-1)}function R(F){var C=F&&F.length?this.write(F):"";return this.lastNeed?C+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):C}function y(F,C){var f=(F.length-C)%3;return 0===f?F.toString("base64",C):(this.lastNeed=3-f,this.lastTotal=3,1===f?this.lastChar[0]=F[F.length-1]:(this.lastChar[0]=F[F.length-2],this.lastChar[1]=F[F.length-1]),F.toString("base64",C,F.length-f))}function I(F){var C=F&&F.length?this.write(F):"";return this.lastNeed?C+this.lastChar.toString("base64",0,3-this.lastNeed):C}function L(F){return F.toString(this.encoding)}function k(F){return F&&F.length?this.write(F):""}V.s=x,x.prototype.write=function(F){if(0===F.length)return"";var C,f;if(this.lastNeed){if(void 0===(C=this.fillLast(F)))return"";f=this.lastNeed,this.lastNeed=0}else f=0;return f<F.length?C?C+this.text(F,f):this.text(F,f):C||""},x.prototype.end=function B(F){var C=F&&F.length?this.write(F):"";return this.lastNeed?C+"\ufffd":C},x.prototype.text=function P(F,C){var f=function d(F,C,f){var c=C.length-1;if(c<f)return 0;var u=T(C[c]);return u>=0?(u>0&&(F.lastNeed=u-1),u):--c<f||-2===u?0:(u=T(C[c]))>=0?(u>0&&(F.lastNeed=u-2),u):--c<f||-2===u?0:(u=T(C[c]))>=0?(u>0&&(2===u?u=0:F.lastNeed=u-3),u):0}(this,F,C);if(!this.lastNeed)return F.toString("utf8",C);this.lastTotal=f;var c=F.length-(f-this.lastNeed);return F.copy(this.lastChar,0,c),F.toString("utf8",C,c)},x.prototype.fillLast=function(F){if(this.lastNeed<=F.length)return F.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);F.copy(this.lastChar,this.lastTotal-this.lastNeed,0,F.length),this.lastNeed-=F.length}},82584:function(Y,V,p){var g=typeof global<"u"&&global||typeof self<"u"&&self||window,r=Function.prototype.apply;function N(b,x){this._id=b,this._clearFn=x}V.setTimeout=function(){return new N(r.call(setTimeout,g,arguments),clearTimeout)},V.setInterval=function(){return new N(r.call(setInterval,g,arguments),clearInterval)},V.clearTimeout=V.clearInterval=function(b){b&&b.close()},N.prototype.unref=N.prototype.ref=function(){},N.prototype.close=function(){this._clearFn.call(g,this._id)},V.enroll=function(b,x){clearTimeout(b._idleTimeoutId),b._idleTimeout=x},V.unenroll=function(b){clearTimeout(b._idleTimeoutId),b._idleTimeout=-1},V._unrefActive=V.active=function(b){clearTimeout(b._idleTimeoutId);var x=b._idleTimeout;x>=0&&(b._idleTimeoutId=setTimeout(function(){b._onTimeout&&b._onTimeout()},x))},p(45470),V.setImmediate=typeof self<"u"&&self.setImmediate||typeof global<"u"&&global.setImmediate||this&&this.setImmediate,V.clearImmediate=typeof self<"u"&&self.clearImmediate||typeof global<"u"&&global.clearImmediate||this&&this.clearImmediate},15822:Y=>{function p(g){try{if(!global.localStorage)return!1}catch{return!1}var r=global.localStorage[g];return null!=r&&"true"===String(r).toLowerCase()}Y.exports=function V(g,r){if(p("noDeprecation"))return g;var N=!1;return function b(){if(!N){if(p("throwDeprecation"))throw new Error(r);p("traceDeprecation")?console.trace(r):console.warn(r),N=!0}return g.apply(this,arguments)}}},62655:function(Y,V){(function(){"use strict";V.stripBOM=function(p){return"\ufeff"===p[0]?p.substring(1):p}}).call(this)},54408:function(Y,V,p){(function(){"use strict";var g,r,N,b,x,T={}.hasOwnProperty;g=p(71741),r=p(81031).defaults,b=function(d){return"string"==typeof d&&(d.indexOf("&")>=0||d.indexOf(">")>=0||d.indexOf("<")>=0)},x=function(d){return"<![CDATA["+N(d)+"]]>"},N=function(d){return d.replace("]]>","]]]]><![CDATA[>")},V.Builder=function(){function d(M){var v,P;for(v in this.options={},P=r[.2])T.call(P,v)&&(this.options[v]=P[v]);for(v in M)T.call(M,v)&&(this.options[v]=M[v])}return d.prototype.buildObject=function(M){var v,P,B,Z,R,y;return v=this.options.attrkey,P=this.options.charkey,1===Object.keys(M).length&&this.options.rootName===r[.2].rootName?M=M[R=Object.keys(M)[0]]:R=this.options.rootName,y=this,B=function(I,L){var k,F,C,f,c;if("object"!=typeof L)y.options.cdata&&b(L)?I.raw(x(L)):I.txt(L);else if(Array.isArray(L)){for(f in L)if(T.call(L,f))for(c in F=L[f])C=F[c],I=B(I.ele(c),C).up()}else for(c in L)if(T.call(L,c))if(F=L[c],c===v){if("object"==typeof F)for(k in F)I=I.att(k,F[k])}else if(c===P)I=y.options.cdata&&b(F)?I.raw(x(F)):I.txt(F);else if(Array.isArray(F))for(f in F)T.call(F,f)&&(I="string"==typeof(C=F[f])?y.options.cdata&&b(C)?I.ele(c).raw(x(C)).up():I.ele(c,C).up():B(I.ele(c),C).up());else"object"==typeof F?I=B(I.ele(c),F).up():"string"==typeof F&&y.options.cdata&&b(F)?I=I.ele(c).raw(x(F)).up():(null==F&&(F=""),I=I.ele(c,F.toString()).up());return I},Z=g.create(R,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),B(Z,M).end(this.options.renderOpts)},d}()}).call(this)},81031:function(Y,V){(function(){V.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},52972:function(Y,V,p){(function(){"use strict";var g,r,N,b,x,T,d,M,v,P=function(R,y){return function(){return R.apply(y,arguments)}},Z={}.hasOwnProperty;M=p(5473),b=p(93105),g=p(62655),d=p(65489),v=p(82584).setImmediate,r=p(81031).defaults,x=function(R){return"object"==typeof R&&null!=R&&0===Object.keys(R).length},T=function(R,y,I){var L,k;for(L=0,k=R.length;L<k;L++)y=(0,R[L])(y,I);return y},N=function(R,y,I){var L;return(L=Object.create(null)).value=I,L.writable=!0,L.enumerable=!0,L.configurable=!0,Object.defineProperty(R,y,L)},V.Parser=function(R){function y(I){var L,k;if(this.parseStringPromise=P(this.parseStringPromise,this),this.parseString=P(this.parseString,this),this.reset=P(this.reset,this),this.assignOrPush=P(this.assignOrPush,this),this.processAsync=P(this.processAsync,this),!(this instanceof V.Parser))return new V.Parser(I);for(L in this.options={},k=r[.2])Z.call(k,L)&&(this.options[L]=k[L]);for(L in I)Z.call(I,L)&&(this.options[L]=I[L]);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(d.normalize)),this.reset()}return function(R,y){for(var I in y)Z.call(y,I)&&(R[I]=y[I]);function L(){this.constructor=R}L.prototype=y.prototype,R.prototype=new L,R.__super__=y.prototype}(y,R),y.prototype.processAsync=function(){var I,L;try{return this.remaining.length<=this.options.chunkSize?(I=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(I),this.saxParser.close()):(I=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(I),v(this.processAsync))}catch(k){if(L=k,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(L)}},y.prototype.assignOrPush=function(I,L,k){return L in I?(I[L]instanceof Array||N(I,L,[I[L]]),I[L].push(k)):N(I,L,this.options.explicitArray?[k]:k)},y.prototype.reset=function(){var I,L,k,F,C;return this.removeAllListeners(),this.saxParser=M.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(C=this,function(f){if(C.saxParser.resume(),!C.saxParser.errThrown)return C.saxParser.errThrown=!0,C.emit("error",f)}),this.saxParser.onend=function(C){return function(){if(!C.saxParser.ended)return C.saxParser.ended=!0,C.emit("end",C.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,F=[],I=this.options.attrkey,L=this.options.charkey,this.saxParser.onopentag=function(C){return function(f){var c,u,h,z,S;if((h={})[L]="",!C.options.ignoreAttrs)for(c in S=f.attributes)Z.call(S,c)&&(!(I in h)&&!C.options.mergeAttrs&&(h[I]={}),u=C.options.attrValueProcessors?T(C.options.attrValueProcessors,f.attributes[c],c):f.attributes[c],z=C.options.attrNameProcessors?T(C.options.attrNameProcessors,c):c,C.options.mergeAttrs?C.assignOrPush(h,z,u):N(h[I],z,u));return h["#name"]=C.options.tagNameProcessors?T(C.options.tagNameProcessors,f.name):f.name,C.options.xmlns&&(h[C.options.xmlnskey]={uri:f.uri,local:f.local}),F.push(h)}}(this),this.saxParser.onclosetag=function(C){return function(){var f,c,u,h,z,S,e,D,q,J;if(S=F.pop(),z=S["#name"],(!C.options.explicitChildren||!C.options.preserveChildrenOrder)&&delete S["#name"],!0===S.cdata&&(f=S.cdata,delete S.cdata),q=F[F.length-1],S[L].match(/^\s*$/)&&!f?(c=S[L],delete S[L]):(C.options.trim&&(S[L]=S[L].trim()),C.options.normalize&&(S[L]=S[L].replace(/\s{2,}/g," ").trim()),S[L]=C.options.valueProcessors?T(C.options.valueProcessors,S[L],z):S[L],1===Object.keys(S).length&&L in S&&!C.EXPLICIT_CHARKEY&&(S=S[L])),x(S)&&(S="function"==typeof C.options.emptyTag?C.options.emptyTag():""!==C.options.emptyTag?C.options.emptyTag:c),null!=C.options.validator&&(J="/"+function(){var ie,oe,fe;for(fe=[],ie=0,oe=F.length;ie<oe;ie++)fe.push((h=F[ie])["#name"]);return fe}().concat(z).join("/"),function(){try{S=C.options.validator(J,q&&q[z],S)}catch(oe){return C.emit("error",oe)}}()),C.options.explicitChildren&&!C.options.mergeAttrs&&"object"==typeof S)if(C.options.preserveChildrenOrder){if(q){for(u in q[C.options.childkey]=q[C.options.childkey]||[],e={},S)Z.call(S,u)&&N(e,u,S[u]);q[C.options.childkey].push(e),delete S["#name"],1===Object.keys(S).length&&L in S&&!C.EXPLICIT_CHARKEY&&(S=S[L])}}else h={},C.options.attrkey in S&&(h[C.options.attrkey]=S[C.options.attrkey],delete S[C.options.attrkey]),!C.options.charsAsChildren&&C.options.charkey in S&&(h[C.options.charkey]=S[C.options.charkey],delete S[C.options.charkey]),Object.getOwnPropertyNames(S).length>0&&(h[C.options.childkey]=S),S=h;return F.length>0?C.assignOrPush(q,z,S):(C.options.explicitRoot&&(D=S,N(S={},z,D)),C.resultObject=S,C.saxParser.ended=!0,C.emit("end",C.resultObject))}}(this),k=function(C){return function(f){var c,u;if(u=F[F.length-1])return u[L]+=f,C.options.explicitChildren&&C.options.preserveChildrenOrder&&C.options.charsAsChildren&&(C.options.includeWhiteChars||""!==f.replace(/\\n/g,"").trim())&&(u[C.options.childkey]=u[C.options.childkey]||[],(c={"#name":"__text__"})[L]=f,C.options.normalize&&(c[L]=c[L].replace(/\s{2,}/g," ").trim()),u[C.options.childkey].push(c)),u}}(this),this.saxParser.ontext=k,this.saxParser.oncdata=function(f){var c;if(c=k(f))return c.cdata=!0}},y.prototype.parseString=function(I,L){var k;null!=L&&"function"==typeof L&&(this.on("end",function(F){return this.reset(),L(null,F)}),this.on("error",function(F){return this.reset(),L(F)}));try{return""===(I=I.toString()).trim()?(this.emit("end",null),!0):(I=g.stripBOM(I),this.options.async?(this.remaining=I,v(this.processAsync),this.saxParser):this.saxParser.write(I).close())}catch(F){if(k=F,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",k),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw k}},y.prototype.parseStringPromise=function(I){return new Promise((L=this,function(k,F){return L.parseString(I,function(C,f){return C?F(C):k(f)})}));var L},y}(b),V.parseString=function(R,y,I){var L,k;return null!=I?("function"==typeof I&&(L=I),"object"==typeof y&&(k=y)):("function"==typeof y&&(L=y),k={}),new V.Parser(k).parseString(R,L)},V.parseStringPromise=function(R,y){var I;return"object"==typeof y&&(I=y),new V.Parser(I).parseStringPromise(R)}}).call(this)},65489:function(Y,V){(function(){"use strict";var p;p=new RegExp(/(?!xmlns)^.*:/),V.normalize=function(g){return g.toLowerCase()},V.firstCharLowerCase=function(g){return g.charAt(0).toLowerCase()+g.slice(1)},V.stripPrefix=function(g){return g.replace(p,"")},V.parseNumbers=function(g){return isNaN(g)||(g=g%1==0?parseInt(g,10):parseFloat(g)),g},V.parseBooleans=function(g){return/^(?:true|false)$/i.test(g)&&(g="true"===g.toLowerCase()),g}}).call(this)},49277:function(Y,V,p){(function(){"use strict";var g,r,N,b,T={}.hasOwnProperty;r=p(81031),g=p(54408),N=p(52972),b=p(65489),V.defaults=r.defaults,V.processors=b,V.ValidationError=function(d){function M(v){this.message=v}return function(d,M){for(var v in M)T.call(M,v)&&(d[v]=M[v]);function P(){this.constructor=d}P.prototype=M.prototype,d.prototype=new P,d.__super__=M.prototype}(M,Error),M}(),V.Builder=g.Builder,V.Parser=N.Parser,V.parseString=N.parseString,V.parseStringPromise=N.parseStringPromise}).call(this)},69053:function(Y){(function(){Y.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},42870:function(Y){(function(){Y.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},63146:function(Y){(function(){var V,p,g,r,N,b,x,T=[].slice,d={}.hasOwnProperty;V=function(){var M,v,P,B,Z,R;if(R=arguments[0],Z=2<=arguments.length?T.call(arguments,1):[],N(Object.assign))Object.assign.apply(null,arguments);else for(M=0,P=Z.length;M<P;M++)if(null!=(B=Z[M]))for(v in B)d.call(B,v)&&(R[v]=B[v]);return R},N=function(M){return!!M&&"[object Function]"===Object.prototype.toString.call(M)},b=function(M){var v;return!!M&&("function"==(v=typeof M)||"object"===v)},g=function(M){return N(Array.isArray)?Array.isArray(M):"[object Array]"===Object.prototype.toString.call(M)},r=function(M){var v;if(g(M))return!M.length;for(v in M)if(d.call(M,v))return!1;return!0},x=function(M){var v,P;return b(M)&&(P=Object.getPrototypeOf(M))&&(v=P.constructor)&&"function"==typeof v&&v instanceof v&&Function.prototype.toString.call(v)===Function.prototype.toString.call(Object)},p=function(M){return N(M.valueOf)?M.valueOf():M},Y.exports.assign=V,Y.exports.isFunction=N,Y.exports.isObject=b,Y.exports.isArray=g,Y.exports.isEmpty=r,Y.exports.isPlainObject=x,Y.exports.getValue=p}).call(this)},47159:function(Y){(function(){Y.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},88828:function(Y,V,p){(function(){var g;g=p(42870),p(26627),Y.exports=function(){function b(x,T,d){if(this.parent=x,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==T)throw new Error("Missing attribute name. "+this.debugInfo(T));this.name=this.stringify.name(T),this.value=this.stringify.attValue(d),this.type=g.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(b.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(b.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(b.prototype,"textContent",{get:function(){return this.value},set:function(x){return this.value=x||""}}),Object.defineProperty(b.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(b.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(b.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(b.prototype,"specified",{get:function(){return!0}}),b.prototype.clone=function(){return Object.create(this)},b.prototype.toString=function(x){return this.options.writer.attribute(this,this.options.writer.filterOptions(x))},b.prototype.debugInfo=function(x){return null==(x=x||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+x+"}, parent: <"+this.parent.name+">"},b.prototype.isEqualNode=function(x){return!(x.namespaceURI!==this.namespaceURI||x.prefix!==this.prefix||x.localName!==this.localName||x.value!==this.value)},b}()}).call(this)},19832:function(Y,V,p){(function(){var g,N,x={}.hasOwnProperty;g=p(42870),N=p(26068),Y.exports=function(T){function d(M,v){if(d.__super__.constructor.call(this,M),null==v)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=g.CData,this.value=this.stringify.cdata(v)}return function(T,d){for(var M in d)x.call(d,M)&&(T[M]=d[M]);function v(){this.constructor=T}v.prototype=d.prototype,T.prototype=new v,T.__super__=d.prototype}(d,T),d.prototype.clone=function(){return Object.create(this)},d.prototype.toString=function(M){return this.options.writer.cdata(this,this.options.writer.filterOptions(M))},d}(N)}).call(this)},26068:function(Y,V,p){(function(){var r,b={}.hasOwnProperty;r=p(26627),Y.exports=function(x){function T(d){T.__super__.constructor.call(this,d),this.value=""}return function(x,T){for(var d in T)b.call(T,d)&&(x[d]=T[d]);function M(){this.constructor=x}M.prototype=T.prototype,x.prototype=new M,x.__super__=T.prototype}(T,x),Object.defineProperty(T.prototype,"data",{get:function(){return this.value},set:function(d){return this.value=d||""}}),Object.defineProperty(T.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(T.prototype,"textContent",{get:function(){return this.value},set:function(d){return this.value=d||""}}),T.prototype.clone=function(){return Object.create(this)},T.prototype.substringData=function(d,M){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.appendData=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.insertData=function(d,M){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.deleteData=function(d,M){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.replaceData=function(d,M,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.isEqualNode=function(d){return!(!T.__super__.isEqualNode.apply(this,arguments).isEqualNode(d)||d.data!==this.data)},T}(r)}).call(this)},73940:function(Y,V,p){(function(){var g,r,x={}.hasOwnProperty;g=p(42870),r=p(26068),Y.exports=function(T){function d(M,v){if(d.__super__.constructor.call(this,M),null==v)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=g.Comment,this.value=this.stringify.comment(v)}return function(T,d){for(var M in d)x.call(d,M)&&(T[M]=d[M]);function v(){this.constructor=T}v.prototype=d.prototype,T.prototype=new v,T.__super__=d.prototype}(d,T),d.prototype.clone=function(){return Object.create(this)},d.prototype.toString=function(M){return this.options.writer.comment(this,this.options.writer.filterOptions(M))},d}(r)}).call(this)},34817:function(Y,V,p){(function(){var r,N;r=p(34551),N=p(53569),Y.exports=function(){function b(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new r,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(b.prototype,"parameterNames",{get:function(){return new N(Object.keys(this.defaultParams))}}),b.prototype.getParameter=function(x){return this.params.hasOwnProperty(x)?this.params[x]:null},b.prototype.canSetParameter=function(x,T){return!0},b.prototype.setParameter=function(x,T){return null!=T?this.params[x]=T:delete this.params[x]},b}()}).call(this)},34551:function(Y){(function(){Y.exports=function(){function p(){}return p.prototype.handleError=function(g){throw new Error(g)},p}()}).call(this)},57951:function(Y){(function(){Y.exports=function(){function p(){}return p.prototype.hasFeature=function(g,r){return!0},p.prototype.createDocumentType=function(g,r,N){throw new Error("This DOM method is not implemented.")},p.prototype.createDocument=function(g,r,N){throw new Error("This DOM method is not implemented.")},p.prototype.createHTMLDocument=function(g){throw new Error("This DOM method is not implemented.")},p.prototype.getFeature=function(g,r){throw new Error("This DOM method is not implemented.")},p}()}).call(this)},53569:function(Y){(function(){Y.exports=function(){function p(g){this.arr=g||[]}return Object.defineProperty(p.prototype,"length",{get:function(){return this.arr.length}}),p.prototype.item=function(g){return this.arr[g]||null},p.prototype.contains=function(g){return-1!==this.arr.indexOf(g)},p}()}).call(this)},70438:function(Y,V,p){(function(){var g,N,x={}.hasOwnProperty;N=p(26627),g=p(42870),Y.exports=function(T){function d(M,v,P,B,Z,R){if(d.__super__.constructor.call(this,M),null==v)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==P)throw new Error("Missing DTD attribute name. "+this.debugInfo(v));if(!B)throw new Error("Missing DTD attribute type. "+this.debugInfo(v));if(!Z)throw new Error("Missing DTD attribute default. "+this.debugInfo(v));if(0!==Z.indexOf("#")&&(Z="#"+Z),!Z.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(v));if(R&&!Z.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(v));this.elementName=this.stringify.name(v),this.type=g.AttributeDeclaration,this.attributeName=this.stringify.name(P),this.attributeType=this.stringify.dtdAttType(B),R&&(this.defaultValue=this.stringify.dtdAttDefault(R)),this.defaultValueType=Z}return function(T,d){for(var M in d)x.call(d,M)&&(T[M]=d[M]);function v(){this.constructor=T}v.prototype=d.prototype,T.prototype=new v,T.__super__=d.prototype}(d,T),d.prototype.toString=function(M){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(M))},d}(N)}).call(this)},33020:function(Y,V,p){(function(){var g,N,x={}.hasOwnProperty;N=p(26627),g=p(42870),Y.exports=function(T){function d(M,v,P){if(d.__super__.constructor.call(this,M),null==v)throw new Error("Missing DTD element name. "+this.debugInfo());P||(P="(#PCDATA)"),Array.isArray(P)&&(P="("+P.join(",")+")"),this.name=this.stringify.name(v),this.type=g.ElementDeclaration,this.value=this.stringify.dtdElementValue(P)}return function(T,d){for(var M in d)x.call(d,M)&&(T[M]=d[M]);function v(){this.constructor=T}v.prototype=d.prototype,T.prototype=new v,T.__super__=d.prototype}(d,T),d.prototype.toString=function(M){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(M))},d}(N)}).call(this)},80015:function(Y,V,p){(function(){var g,N,b,T={}.hasOwnProperty;b=p(63146).isObject,N=p(26627),g=p(42870),Y.exports=function(d){function M(v,P,B,Z){if(M.__super__.constructor.call(this,v),null==B)throw new Error("Missing DTD entity name. "+this.debugInfo(B));if(null==Z)throw new Error("Missing DTD entity value. "+this.debugInfo(B));if(this.pe=!!P,this.name=this.stringify.name(B),this.type=g.EntityDeclaration,b(Z)){if(!Z.pubID&&!Z.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(B));if(Z.pubID&&!Z.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(B));if(this.internal=!1,null!=Z.pubID&&(this.pubID=this.stringify.dtdPubID(Z.pubID)),null!=Z.sysID&&(this.sysID=this.stringify.dtdSysID(Z.sysID)),null!=Z.nData&&(this.nData=this.stringify.dtdNData(Z.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(B))}else this.value=this.stringify.dtdEntityValue(Z),this.internal=!0}return function(d,M){for(var v in M)T.call(M,v)&&(d[v]=M[v]);function P(){this.constructor=d}P.prototype=M.prototype,d.prototype=new P,d.__super__=M.prototype}(M,d),Object.defineProperty(M.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(M.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(M.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(M.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(M.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(M.prototype,"xmlVersion",{get:function(){return null}}),M.prototype.toString=function(v){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(v))},M}(N)}).call(this)},46600:function(Y,V,p){(function(){var g,N,x={}.hasOwnProperty;N=p(26627),g=p(42870),Y.exports=function(T){function d(M,v,P){if(d.__super__.constructor.call(this,M),null==v)throw new Error("Missing DTD notation name. "+this.debugInfo(v));if(!P.pubID&&!P.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(v));this.name=this.stringify.name(v),this.type=g.NotationDeclaration,null!=P.pubID&&(this.pubID=this.stringify.dtdPubID(P.pubID)),null!=P.sysID&&(this.sysID=this.stringify.dtdSysID(P.sysID))}return function(T,d){for(var M in d)x.call(d,M)&&(T[M]=d[M]);function v(){this.constructor=T}v.prototype=d.prototype,T.prototype=new v,T.__super__=d.prototype}(d,T),Object.defineProperty(d.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(d.prototype,"systemId",{get:function(){return this.sysID}}),d.prototype.toString=function(M){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(M))},d}(N)}).call(this)},29413:function(Y,V,p){(function(){var g,N,b,T={}.hasOwnProperty;b=p(63146).isObject,N=p(26627),g=p(42870),Y.exports=function(d){function M(v,P,B,Z){var R;M.__super__.constructor.call(this,v),b(P)&&(P=(R=P).version,B=R.encoding,Z=R.standalone),P||(P="1.0"),this.type=g.Declaration,this.version=this.stringify.xmlVersion(P),null!=B&&(this.encoding=this.stringify.xmlEncoding(B)),null!=Z&&(this.standalone=this.stringify.xmlStandalone(Z))}return function(d,M){for(var v in M)T.call(M,v)&&(d[v]=M[v]);function P(){this.constructor=d}P.prototype=M.prototype,d.prototype=new P,d.__super__=M.prototype}(M,d),M.prototype.toString=function(v){return this.options.writer.declaration(this,this.options.writer.filterOptions(v))},M}(N)}).call(this)},67905:function(Y,V,p){(function(){var g,r,N,b,x,d,M,v,B={}.hasOwnProperty;v=p(63146).isObject,M=p(26627),g=p(42870),r=p(70438),b=p(80015),N=p(33020),x=p(46600),d=p(25631),Y.exports=function(Z){function R(y,I,L){var k,F,C,f,c,u;if(R.__super__.constructor.call(this,y),this.type=g.DocType,y.children)for(F=0,C=(f=y.children).length;F<C;F++)if((k=f[F]).type===g.Element){this.name=k.name;break}this.documentObject=y,v(I)&&(I=(c=I).pubID,L=c.sysID),null==L&&(L=(u=[I,L])[0],I=u[1]),null!=I&&(this.pubID=this.stringify.dtdPubID(I)),null!=L&&(this.sysID=this.stringify.dtdSysID(L))}return function(Z,R){for(var y in R)B.call(R,y)&&(Z[y]=R[y]);function I(){this.constructor=Z}I.prototype=R.prototype,Z.prototype=new I,Z.__super__=R.prototype}(R,Z),Object.defineProperty(R.prototype,"entities",{get:function(){var y,I,L,k,F;for(k={},I=0,L=(F=this.children).length;I<L;I++)(y=F[I]).type===g.EntityDeclaration&&!y.pe&&(k[y.name]=y);return new d(k)}}),Object.defineProperty(R.prototype,"notations",{get:function(){var y,I,L,k,F;for(k={},I=0,L=(F=this.children).length;I<L;I++)(y=F[I]).type===g.NotationDeclaration&&(k[y.name]=y);return new d(k)}}),Object.defineProperty(R.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(R.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(R.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),R.prototype.element=function(y,I){var L;return L=new N(this,y,I),this.children.push(L),this},R.prototype.attList=function(y,I,L,k,F){var C;return C=new r(this,y,I,L,k,F),this.children.push(C),this},R.prototype.entity=function(y,I){var L;return L=new b(this,!1,y,I),this.children.push(L),this},R.prototype.pEntity=function(y,I){var L;return L=new b(this,!0,y,I),this.children.push(L),this},R.prototype.notation=function(y,I){var L;return L=new x(this,y,I),this.children.push(L),this},R.prototype.toString=function(y){return this.options.writer.docType(this,this.options.writer.filterOptions(y))},R.prototype.ele=function(y,I){return this.element(y,I)},R.prototype.att=function(y,I,L,k,F){return this.attList(y,I,L,k,F)},R.prototype.ent=function(y,I){return this.entity(y,I)},R.prototype.pent=function(y,I){return this.pEntity(y,I)},R.prototype.not=function(y,I){return this.notation(y,I)},R.prototype.up=function(){return this.root()||this.documentObject},R.prototype.isEqualNode=function(y){return!(!R.__super__.isEqualNode.apply(this,arguments).isEqualNode(y)||y.name!==this.name||y.publicId!==this.publicId||y.systemId!==this.systemId)},R}(M)}).call(this)},32008:function(Y,V,p){(function(){var g,r,N,x,T,d,M,P={}.hasOwnProperty;M=p(63146).isPlainObject,N=p(57951),r=p(34817),x=p(26627),g=p(42870),d=p(93258),T=p(28337),Y.exports=function(B){function Z(R){Z.__super__.constructor.call(this,null),this.name="#document",this.type=g.Document,this.documentURI=null,this.domConfig=new r,R||(R={}),R.writer||(R.writer=new T),this.options=R,this.stringify=new d(R)}return function(B,Z){for(var R in Z)P.call(Z,R)&&(B[R]=Z[R]);function y(){this.constructor=B}y.prototype=Z.prototype,B.prototype=new y,B.__super__=Z.prototype}(Z,B),Object.defineProperty(Z.prototype,"implementation",{value:new N}),Object.defineProperty(Z.prototype,"doctype",{get:function(){var R,y,I,L;for(y=0,I=(L=this.children).length;y<I;y++)if((R=L[y]).type===g.DocType)return R;return null}}),Object.defineProperty(Z.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(Z.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(Z.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(Z.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===g.Declaration?this.children[0].encoding:null}}),Object.defineProperty(Z.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===g.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(Z.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===g.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(Z.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(Z.prototype,"origin",{get:function(){return null}}),Object.defineProperty(Z.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(Z.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(Z.prototype,"contentType",{get:function(){return null}}),Z.prototype.end=function(R){var y;return y={},R?M(R)&&(y=R,R=this.options.writer):R=this.options.writer,R.document(this,R.filterOptions(y))},Z.prototype.toString=function(R){return this.options.writer.document(this,this.options.writer.filterOptions(R))},Z.prototype.createElement=function(R){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.createTextNode=function(R){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.createComment=function(R){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.createCDATASection=function(R){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.createProcessingInstruction=function(R,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.createAttribute=function(R){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.createEntityReference=function(R){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.getElementsByTagName=function(R){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.importNode=function(R,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.createElementNS=function(R,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.createAttributeNS=function(R,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.getElementsByTagNameNS=function(R,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.getElementById=function(R){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.adoptNode=function(R){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.renameNode=function(R,y,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.getElementsByClassName=function(R){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.createEvent=function(R){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.createNodeIterator=function(R,y,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z.prototype.createTreeWalker=function(R,y,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},Z}(x)}).call(this)},25795:function(Y,V,p){(function(){var g,r,N,b,x,T,d,M,v,P,B,Z,y,I,L,k,F,C,f,c,u,h,z,S={}.hasOwnProperty;z=p(63146),u=z.isObject,c=z.isFunction,h=z.isPlainObject,f=z.getValue,g=p(42870),Z=p(32008),y=p(17770),b=p(19832),x=p(73940),L=p(99166),C=p(80504),I=p(12726),P=p(29413),B=p(67905),T=p(70438),M=p(80015),d=p(33020),v=p(46600),N=p(88828),F=p(93258),k=p(28337),r=p(47159),Y.exports=function(){function e(D,q,J){var ie;this.name="?xml",this.type=g.Document,D||(D={}),ie={},D.writer?h(D.writer)&&(ie=D.writer,D.writer=new k):D.writer=new k,this.options=D,this.writer=D.writer,this.writerOptions=this.writer.filterOptions(ie),this.stringify=new F(D),this.onDataCallback=q||function(){},this.onEndCallback=J||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return e.prototype.createChildNode=function(D){var J,ie,oe,fe,ae,Ne,ue;switch(D.type){case g.CData:this.cdata(D.value);break;case g.Comment:this.comment(D.value);break;case g.Element:for(J in ie={},Ne=D.attribs)S.call(Ne,J)&&(ie[J]=Ne[J].value);this.node(D.name,ie);break;case g.Dummy:this.dummy();break;case g.Raw:this.raw(D.value);break;case g.Text:this.text(D.value);break;case g.ProcessingInstruction:this.instruction(D.target,D.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+D.constructor.name)}for(fe=0,ae=(ue=D.children).length;fe<ae;fe++)this.createChildNode(oe=ue[fe]),oe.type===g.Element&&this.up();return this},e.prototype.dummy=function(){return this},e.prototype.node=function(D,q,J){var ie;if(null==D)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(D));return this.openCurrent(),D=f(D),null==q&&(q={}),q=f(q),u(q)||(J=(ie=[q,J])[0],q=ie[1]),this.currentNode=new y(this,D,q),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=J&&this.text(J),this},e.prototype.element=function(D,q,J){var ie,oe,fe,ae,Ne,ue;if(this.currentNode&&this.currentNode.type===g.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(D)||u(D)||c(D))for(ae=this.options.noValidation,this.options.noValidation=!0,(ue=new Z(this.options).element("TEMP_ROOT")).element(D),this.options.noValidation=ae,oe=0,fe=(Ne=ue.children).length;oe<fe;oe++)this.createChildNode(ie=Ne[oe]),ie.type===g.Element&&this.up();else this.node(D,q,J);return this},e.prototype.attribute=function(D,q){var J;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(D));if(null!=D&&(D=f(D)),u(D))for(J in D)S.call(D,J)&&this.attribute(J,D[J]);else c(q)&&(q=q.apply()),this.options.keepNullAttributes&&null==q?this.currentNode.attribs[D]=new N(this,D,""):null!=q&&(this.currentNode.attribs[D]=new N(this,D,q));return this},e.prototype.text=function(D){var q;return this.openCurrent(),q=new C(this,D),this.onData(this.writer.text(q,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.cdata=function(D){var q;return this.openCurrent(),q=new b(this,D),this.onData(this.writer.cdata(q,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.comment=function(D){var q;return this.openCurrent(),q=new x(this,D),this.onData(this.writer.comment(q,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.raw=function(D){var q;return this.openCurrent(),q=new L(this,D),this.onData(this.writer.raw(q,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.instruction=function(D,q){var J,ie,fe,ae;if(this.openCurrent(),null!=D&&(D=f(D)),null!=q&&(q=f(q)),Array.isArray(D))for(J=0,fe=D.length;J<fe;J++)this.instruction(ie=D[J]);else if(u(D))for(ie in D)S.call(D,ie)&&this.instruction(ie,D[ie]);else c(q)&&(q=q.apply()),ae=new I(this,D,q),this.onData(this.writer.processingInstruction(ae,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},e.prototype.declaration=function(D,q,J){var ie;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return ie=new P(this,D,q,J),this.onData(this.writer.declaration(ie,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.doctype=function(D,q,J){if(this.openCurrent(),null==D)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new B(this,q,J),this.currentNode.rootNodeName=D,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},e.prototype.dtdElement=function(D,q){var J;return this.openCurrent(),J=new d(this,D,q),this.onData(this.writer.dtdElement(J,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.attList=function(D,q,J,ie,oe){var fe;return this.openCurrent(),fe=new T(this,D,q,J,ie,oe),this.onData(this.writer.dtdAttList(fe,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.entity=function(D,q){var J;return this.openCurrent(),J=new M(this,!1,D,q),this.onData(this.writer.dtdEntity(J,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.pEntity=function(D,q){var J;return this.openCurrent(),J=new M(this,!0,D,q),this.onData(this.writer.dtdEntity(J,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.notation=function(D,q){var J;return this.openCurrent(),J=new v(this,D,q),this.onData(this.writer.dtdNotation(J,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},e.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},e.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},e.prototype.openNode=function(D){var J,ie,oe;if(!D.isOpen){if(!this.root&&0===this.currentLevel&&D.type===g.Element&&(this.root=D),J="",D.type===g.Element){for(ie in this.writerOptions.state=r.OpenTag,J=this.writer.indent(D,this.writerOptions,this.currentLevel)+"<"+D.name,oe=D.attribs)S.call(oe,ie)&&(J+=this.writer.attribute(oe[ie],this.writerOptions,this.currentLevel));J+=(D.children?">":"/>")+this.writer.endline(D,this.writerOptions,this.currentLevel),this.writerOptions.state=r.InsideTag}else this.writerOptions.state=r.OpenTag,J=this.writer.indent(D,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+D.rootNodeName,D.pubID&&D.sysID?J+=' PUBLIC "'+D.pubID+'" "'+D.sysID+'"':D.sysID&&(J+=' SYSTEM "'+D.sysID+'"'),D.children?(J+=" [",this.writerOptions.state=r.InsideTag):(this.writerOptions.state=r.CloseTag,J+=">"),J+=this.writer.endline(D,this.writerOptions,this.currentLevel);return this.onData(J,this.currentLevel),D.isOpen=!0}},e.prototype.closeNode=function(D){var q;if(!D.isClosed)return"",this.writerOptions.state=r.CloseTag,q=D.type===g.Element?this.writer.indent(D,this.writerOptions,this.currentLevel)+"</"+D.name+">"+this.writer.endline(D,this.writerOptions,this.currentLevel):this.writer.indent(D,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(D,this.writerOptions,this.currentLevel),this.writerOptions.state=r.None,this.onData(q,this.currentLevel),D.isClosed=!0},e.prototype.onData=function(D,q){return this.documentStarted=!0,this.onDataCallback(D,q+1)},e.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},e.prototype.debugInfo=function(D){return null==D?"":"node: <"+D+">"},e.prototype.ele=function(){return this.element.apply(this,arguments)},e.prototype.nod=function(D,q,J){return this.node(D,q,J)},e.prototype.txt=function(D){return this.text(D)},e.prototype.dat=function(D){return this.cdata(D)},e.prototype.com=function(D){return this.comment(D)},e.prototype.ins=function(D,q){return this.instruction(D,q)},e.prototype.dec=function(D,q,J){return this.declaration(D,q,J)},e.prototype.dtd=function(D,q,J){return this.doctype(D,q,J)},e.prototype.e=function(D,q,J){return this.element(D,q,J)},e.prototype.n=function(D,q,J){return this.node(D,q,J)},e.prototype.t=function(D){return this.text(D)},e.prototype.d=function(D){return this.cdata(D)},e.prototype.c=function(D){return this.comment(D)},e.prototype.r=function(D){return this.raw(D)},e.prototype.i=function(D,q){return this.instruction(D,q)},e.prototype.att=function(){return this.currentNode&&this.currentNode.type===g.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.a=function(){return this.currentNode&&this.currentNode.type===g.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.ent=function(D,q){return this.entity(D,q)},e.prototype.pent=function(D,q){return this.pEntity(D,q)},e.prototype.not=function(D,q){return this.notation(D,q)},e}()}).call(this)},71616:function(Y,V,p){(function(){var g,N,x={}.hasOwnProperty;N=p(26627),g=p(42870),Y.exports=function(T){function d(M){d.__super__.constructor.call(this,M),this.type=g.Dummy}return function(T,d){for(var M in d)x.call(d,M)&&(T[M]=d[M]);function v(){this.constructor=T}v.prototype=d.prototype,T.prototype=new v,T.__super__=d.prototype}(d,T),d.prototype.clone=function(){return Object.create(this)},d.prototype.toString=function(M){return""},d}(N)}).call(this)},17770:function(Y,V,p){(function(){var g,r,b,x,T,d,M,v,B={}.hasOwnProperty;v=p(63146),M=v.isObject,d=v.isFunction,T=v.getValue,x=p(26627),g=p(42870),r=p(88828),b=p(25631),Y.exports=function(Z){function R(y,I,L){var k,F,C,f;if(R.__super__.constructor.call(this,y),null==I)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(I),this.type=g.Element,this.attribs={},this.schemaTypeInfo=null,null!=L&&this.attribute(L),y.type===g.Document&&(this.isRoot=!0,this.documentObject=y,y.rootObject=this,y.children))for(F=0,C=(f=y.children).length;F<C;F++)if((k=f[F]).type===g.DocType){k.name=this.name;break}}return function(Z,R){for(var y in R)B.call(R,y)&&(Z[y]=R[y]);function I(){this.constructor=Z}I.prototype=R.prototype,Z.prototype=new I,Z.__super__=R.prototype}(R,Z),Object.defineProperty(R.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(R.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(R.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(R.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(R.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(R.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(R.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(R.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new b(this.attribs)),this.attributeMap}}),R.prototype.clone=function(){var I,L,k;for(I in(L=Object.create(this)).isRoot&&(L.documentObject=null),L.attribs={},k=this.attribs)B.call(k,I)&&(L.attribs[I]=k[I].clone());return L.children=[],this.children.forEach(function(F){var C;return(C=F.clone()).parent=L,L.children.push(C)}),L},R.prototype.attribute=function(y,I){var L;if(null!=y&&(y=T(y)),M(y))for(L in y)B.call(y,L)&&this.attribute(L,y[L]);else d(I)&&(I=I.apply()),this.options.keepNullAttributes&&null==I?this.attribs[y]=new r(this,y,""):null!=I&&(this.attribs[y]=new r(this,y,I));return this},R.prototype.removeAttribute=function(y){var L,k;if(null==y)throw new Error("Missing attribute name. "+this.debugInfo());if(y=T(y),Array.isArray(y))for(L=0,k=y.length;L<k;L++)delete this.attribs[y[L]];else delete this.attribs[y];return this},R.prototype.toString=function(y){return this.options.writer.element(this,this.options.writer.filterOptions(y))},R.prototype.att=function(y,I){return this.attribute(y,I)},R.prototype.a=function(y,I){return this.attribute(y,I)},R.prototype.getAttribute=function(y){return this.attribs.hasOwnProperty(y)?this.attribs[y].value:null},R.prototype.setAttribute=function(y,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.getAttributeNode=function(y){return this.attribs.hasOwnProperty(y)?this.attribs[y]:null},R.prototype.setAttributeNode=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.removeAttributeNode=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.getElementsByTagName=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.getAttributeNS=function(y,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.setAttributeNS=function(y,I,L){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.removeAttributeNS=function(y,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.getAttributeNodeNS=function(y,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.setAttributeNodeNS=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.getElementsByTagNameNS=function(y,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.hasAttribute=function(y){return this.attribs.hasOwnProperty(y)},R.prototype.hasAttributeNS=function(y,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.setIdAttribute=function(y,I){return this.attribs.hasOwnProperty(y)?this.attribs[y].isId:I},R.prototype.setIdAttributeNS=function(y,I,L){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.setIdAttributeNode=function(y,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.getElementsByTagName=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.getElementsByTagNameNS=function(y,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.getElementsByClassName=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.isEqualNode=function(y){var I,L,k;if(!R.__super__.isEqualNode.apply(this,arguments).isEqualNode(y)||y.namespaceURI!==this.namespaceURI||y.prefix!==this.prefix||y.localName!==this.localName||y.attribs.length!==this.attribs.length)return!1;for(I=L=0,k=this.attribs.length-1;0<=k?L<=k:L>=k;I=0<=k?++L:--L)if(!this.attribs[I].isEqualNode(y.attribs[I]))return!1;return!0},R}(x)}).call(this)},25631:function(Y){(function(){Y.exports=function(){function p(g){this.nodes=g}return Object.defineProperty(p.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),p.prototype.clone=function(){return this.nodes=null},p.prototype.getNamedItem=function(g){return this.nodes[g]},p.prototype.setNamedItem=function(g){var r;return r=this.nodes[g.nodeName],this.nodes[g.nodeName]=g,r||null},p.prototype.removeNamedItem=function(g){var r;return r=this.nodes[g],delete this.nodes[g],r||null},p.prototype.item=function(g){return this.nodes[Object.keys(this.nodes)[g]]||null},p.prototype.getNamedItemNS=function(g,r){throw new Error("This DOM method is not implemented.")},p.prototype.setNamedItemNS=function(g){throw new Error("This DOM method is not implemented.")},p.prototype.removeNamedItemNS=function(g,r){throw new Error("This DOM method is not implemented.")},p}()}).call(this)},26627:function(Y,V,p){(function(){var g,r,N,b,x,T,d,M,B,Z,R,y,I,L,k,F,C,f={}.hasOwnProperty;C=p(63146),F=C.isObject,k=C.isFunction,L=C.isEmpty,I=C.getValue,M=null,N=null,b=null,x=null,T=null,R=null,y=null,Z=null,d=null,r=null,B=null,g=null,Y.exports=function(){function c(u){this.parent=u,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,M||(M=p(17770),N=p(19832),b=p(73940),x=p(29413),T=p(67905),R=p(99166),y=p(80504),Z=p(12726),d=p(71616),r=p(42870),B=p(87137),p(25631),g=p(69053))}return Object.defineProperty(c.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(c.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(c.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(c.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(c.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new B(this.children)),this.childNodeList}}),Object.defineProperty(c.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(c.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(c.prototype,"previousSibling",{get:function(){var u;return u=this.parent.children.indexOf(this),this.parent.children[u-1]||null}}),Object.defineProperty(c.prototype,"nextSibling",{get:function(){var u;return u=this.parent.children.indexOf(this),this.parent.children[u+1]||null}}),Object.defineProperty(c.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(c.prototype,"textContent",{get:function(){var u,h,z,S,e;if(this.nodeType===r.Element||this.nodeType===r.DocumentFragment){for(e="",h=0,z=(S=this.children).length;h<z;h++)(u=S[h]).textContent&&(e+=u.textContent);return e}return null},set:function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),c.prototype.setParent=function(u){var z,S,e,D;for(this.parent=u,u&&(this.options=u.options,this.stringify=u.stringify),D=[],z=0,S=(e=this.children).length;z<S;z++)D.push(e[z].setParent(this));return D},c.prototype.element=function(u,h,z){var S,D,q,J,ie,oe,fe,ae,Ne,ue;if(ie=null,null===h&&null==z&&(h=(ae=[{},null])[0],z=ae[1]),null==h&&(h={}),h=I(h),F(h)||(z=(Ne=[h,z])[0],h=Ne[1]),null!=u&&(u=I(u)),Array.isArray(u))for(D=0,oe=u.length;D<oe;D++)ie=this.element(u[D]);else if(k(u))ie=this.element(u.apply());else if(F(u)){for(J in u)if(f.call(u,J))if(k(ue=u[J])&&(ue=ue.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===J.indexOf(this.stringify.convertAttKey))ie=this.attribute(J.substr(this.stringify.convertAttKey.length),ue);else if(!this.options.separateArrayItems&&Array.isArray(ue)&&L(ue))ie=this.dummy();else if(F(ue)&&L(ue))ie=this.element(J);else if(this.options.keepNullNodes||null!=ue)if(!this.options.separateArrayItems&&Array.isArray(ue))for(q=0,fe=ue.length;q<fe;q++)(S={})[J]=ue[q],ie=this.element(S);else F(ue)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===J.indexOf(this.stringify.convertTextKey)?ie=this.element(ue):(ie=this.element(J)).element(ue):ie=this.element(J,ue);else ie=this.dummy()}else ie=this.options.keepNullNodes||null!==z?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===u.indexOf(this.stringify.convertTextKey)?this.text(z):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===u.indexOf(this.stringify.convertCDataKey)?this.cdata(z):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===u.indexOf(this.stringify.convertCommentKey)?this.comment(z):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===u.indexOf(this.stringify.convertRawKey)?this.raw(z):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===u.indexOf(this.stringify.convertPIKey)?this.instruction(u.substr(this.stringify.convertPIKey.length),z):this.node(u,h,z):this.dummy();if(null==ie)throw new Error("Could not create any elements with: "+u+". "+this.debugInfo());return ie},c.prototype.insertBefore=function(u,h,z){var S,e,D,q,J;if(u?.type)return q=h,(D=u).setParent(this),q?(e=children.indexOf(q),J=children.splice(e),children.push(D),Array.prototype.push.apply(children,J)):children.push(D),D;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(u));return e=this.parent.children.indexOf(this),J=this.parent.children.splice(e),S=this.parent.element(u,h,z),Array.prototype.push.apply(this.parent.children,J),S},c.prototype.insertAfter=function(u,h,z){var S,e,D;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(u));return e=this.parent.children.indexOf(this),D=this.parent.children.splice(e+1),S=this.parent.element(u,h,z),Array.prototype.push.apply(this.parent.children,D),S},c.prototype.remove=function(){var u;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return u=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[u,u-u+1].concat([])),this.parent},c.prototype.node=function(u,h,z){var S,e;return null!=u&&(u=I(u)),h||(h={}),h=I(h),F(h)||(z=(e=[h,z])[0],h=e[1]),S=new M(this,u,h),null!=z&&S.text(z),this.children.push(S),S},c.prototype.text=function(u){var h;return F(u)&&this.element(u),h=new y(this,u),this.children.push(h),this},c.prototype.cdata=function(u){var h;return h=new N(this,u),this.children.push(h),this},c.prototype.comment=function(u){var h;return h=new b(this,u),this.children.push(h),this},c.prototype.commentBefore=function(u){var z,S;return z=this.parent.children.indexOf(this),S=this.parent.children.splice(z),this.parent.comment(u),Array.prototype.push.apply(this.parent.children,S),this},c.prototype.commentAfter=function(u){var z,S;return z=this.parent.children.indexOf(this),S=this.parent.children.splice(z+1),this.parent.comment(u),Array.prototype.push.apply(this.parent.children,S),this},c.prototype.raw=function(u){var h;return h=new R(this,u),this.children.push(h),this},c.prototype.dummy=function(){return new d(this)},c.prototype.instruction=function(u,h){var z,e,D,q;if(null!=u&&(u=I(u)),null!=h&&(h=I(h)),Array.isArray(u))for(D=0,q=u.length;D<q;D++)this.instruction(z=u[D]);else if(F(u))for(z in u)f.call(u,z)&&this.instruction(z,u[z]);else k(h)&&(h=h.apply()),e=new Z(this,u,h),this.children.push(e);return this},c.prototype.instructionBefore=function(u,h){var S,e;return S=this.parent.children.indexOf(this),e=this.parent.children.splice(S),this.parent.instruction(u,h),Array.prototype.push.apply(this.parent.children,e),this},c.prototype.instructionAfter=function(u,h){var S,e;return S=this.parent.children.indexOf(this),e=this.parent.children.splice(S+1),this.parent.instruction(u,h),Array.prototype.push.apply(this.parent.children,e),this},c.prototype.declaration=function(u,h,z){var S,e;return S=this.document(),e=new x(S,u,h,z),0===S.children.length?S.children.unshift(e):S.children[0].type===r.Declaration?S.children[0]=e:S.children.unshift(e),S.root()||S},c.prototype.dtd=function(u,h){var S,e,D,q,J,ie,oe,fe,ae;for(S=this.document(),e=new T(S,u,h),D=q=0,ie=(fe=S.children).length;q<ie;D=++q)if(fe[D].type===r.DocType)return S.children[D]=e,e;for(D=J=0,oe=(ae=S.children).length;J<oe;D=++J)if(ae[D].isRoot)return S.children.splice(D,0,e),e;return S.children.push(e),e},c.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},c.prototype.root=function(){var u;for(u=this;u;){if(u.type===r.Document)return u.rootObject;if(u.isRoot)return u;u=u.parent}},c.prototype.document=function(){var u;for(u=this;u;){if(u.type===r.Document)return u;u=u.parent}},c.prototype.end=function(u){return this.document().end(u)},c.prototype.prev=function(){var u;if((u=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[u-1]},c.prototype.next=function(){var u;if(-1===(u=this.parent.children.indexOf(this))||u===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[u+1]},c.prototype.importDocument=function(u){var h;return(h=u.root().clone()).parent=this,h.isRoot=!1,this.children.push(h),this},c.prototype.debugInfo=function(u){var h,z;return null!=(u=u||this.name)||null!=(h=this.parent)&&h.name?null==u?"parent: <"+this.parent.name+">":null!=(z=this.parent)&&z.name?"node: <"+u+">, parent: <"+this.parent.name+">":"node: <"+u+">":""},c.prototype.ele=function(u,h,z){return this.element(u,h,z)},c.prototype.nod=function(u,h,z){return this.node(u,h,z)},c.prototype.txt=function(u){return this.text(u)},c.prototype.dat=function(u){return this.cdata(u)},c.prototype.com=function(u){return this.comment(u)},c.prototype.ins=function(u,h){return this.instruction(u,h)},c.prototype.doc=function(){return this.document()},c.prototype.dec=function(u,h,z){return this.declaration(u,h,z)},c.prototype.e=function(u,h,z){return this.element(u,h,z)},c.prototype.n=function(u,h,z){return this.node(u,h,z)},c.prototype.t=function(u){return this.text(u)},c.prototype.d=function(u){return this.cdata(u)},c.prototype.c=function(u){return this.comment(u)},c.prototype.r=function(u){return this.raw(u)},c.prototype.i=function(u,h){return this.instruction(u,h)},c.prototype.u=function(){return this.up()},c.prototype.importXMLBuilder=function(u){return this.importDocument(u)},c.prototype.replaceChild=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.removeChild=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.appendChild=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.hasChildNodes=function(){return 0!==this.children.length},c.prototype.cloneNode=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.isSupported=function(u,h){return!0},c.prototype.hasAttributes=function(){return 0!==this.attribs.length},c.prototype.compareDocumentPosition=function(u){var h,z;return(h=this)===u?0:this.document()!==u.document()?(z=g.Disconnected|g.ImplementationSpecific,Math.random()<.5?z|=g.Preceding:z|=g.Following,z):h.isAncestor(u)?g.Contains|g.Preceding:h.isDescendant(u)?g.Contains|g.Following:h.isPreceding(u)?g.Preceding:g.Following},c.prototype.isSameNode=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.lookupPrefix=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.isDefaultNamespace=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.lookupNamespaceURI=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.isEqualNode=function(u){var h,z,S;if(u.nodeType!==this.nodeType||u.children.length!==this.children.length)return!1;for(h=z=0,S=this.children.length-1;0<=S?z<=S:z>=S;h=0<=S?++z:--z)if(!this.children[h].isEqualNode(u.children[h]))return!1;return!0},c.prototype.getFeature=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.setUserData=function(u,h,z){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getUserData=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.contains=function(u){return!!u&&(u===this||this.isDescendant(u))},c.prototype.isDescendant=function(u){var h,S,e,D;for(S=0,e=(D=this.children).length;S<e;S++)if(u===(h=D[S])||h.isDescendant(u))return!0;return!1},c.prototype.isAncestor=function(u){return u.isDescendant(this)},c.prototype.isPreceding=function(u){var h,z;return h=this.treePosition(u),z=this.treePosition(this),-1!==h&&-1!==z&&h<z},c.prototype.isFollowing=function(u){var h,z;return h=this.treePosition(u),z=this.treePosition(this),-1!==h&&-1!==z&&h>z},c.prototype.treePosition=function(u){var h,z;return z=0,h=!1,this.foreachTreeNode(this.document(),function(S){if(z++,!h&&S===u)return h=!0}),h?z:-1},c.prototype.foreachTreeNode=function(u,h){var z,S,e,D,q;for(u||(u=this.document()),S=0,e=(D=u.children).length;S<e;S++){if(q=h(z=D[S]))return q;if(q=this.foreachTreeNode(z,h))return q}},c}()}).call(this)},87137:function(Y){(function(){Y.exports=function(){function p(g){this.nodes=g}return Object.defineProperty(p.prototype,"length",{get:function(){return this.nodes.length||0}}),p.prototype.clone=function(){return this.nodes=null},p.prototype.item=function(g){return this.nodes[g]||null},p}()}).call(this)},12726:function(Y,V,p){(function(){var g,r,x={}.hasOwnProperty;g=p(42870),r=p(26068),Y.exports=function(T){function d(M,v,P){if(d.__super__.constructor.call(this,M),null==v)throw new Error("Missing instruction target. "+this.debugInfo());this.type=g.ProcessingInstruction,this.target=this.stringify.insTarget(v),this.name=this.target,P&&(this.value=this.stringify.insValue(P))}return function(T,d){for(var M in d)x.call(d,M)&&(T[M]=d[M]);function v(){this.constructor=T}v.prototype=d.prototype,T.prototype=new v,T.__super__=d.prototype}(d,T),d.prototype.clone=function(){return Object.create(this)},d.prototype.toString=function(M){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(M))},d.prototype.isEqualNode=function(M){return!(!d.__super__.isEqualNode.apply(this,arguments).isEqualNode(M)||M.target!==this.target)},d}(r)}).call(this)},99166:function(Y,V,p){(function(){var g,r,x={}.hasOwnProperty;g=p(42870),r=p(26627),Y.exports=function(T){function d(M,v){if(d.__super__.constructor.call(this,M),null==v)throw new Error("Missing raw text. "+this.debugInfo());this.type=g.Raw,this.value=this.stringify.raw(v)}return function(T,d){for(var M in d)x.call(d,M)&&(T[M]=d[M]);function v(){this.constructor=T}v.prototype=d.prototype,T.prototype=new v,T.__super__=d.prototype}(d,T),d.prototype.clone=function(){return Object.create(this)},d.prototype.toString=function(M){return this.options.writer.raw(this,this.options.writer.filterOptions(M))},d}(r)}).call(this)},50864:function(Y,V,p){(function(){var g,r,b,T={}.hasOwnProperty;g=p(42870),b=p(56425),r=p(47159),Y.exports=function(d){function M(v,P){this.stream=v,M.__super__.constructor.call(this,P)}return function(d,M){for(var v in M)T.call(M,v)&&(d[v]=M[v]);function P(){this.constructor=d}P.prototype=M.prototype,d.prototype=new P,d.__super__=M.prototype}(M,d),M.prototype.endline=function(v,P,B){return v.isLastRootNode&&P.state===r.CloseTag?"":M.__super__.endline.call(this,v,P,B)},M.prototype.document=function(v,P){var Z,R,y,I,L,k,F,C;for(Z=R=0,I=(k=v.children).length;R<I;Z=++R)k[Z].isLastRootNode=Z===v.children.length-1;for(P=this.filterOptions(P),C=[],y=0,L=(F=v.children).length;y<L;y++)C.push(this.writeChildNode(F[y],P,0));return C},M.prototype.attribute=function(v,P,B){return this.stream.write(M.__super__.attribute.call(this,v,P,B))},M.prototype.cdata=function(v,P,B){return this.stream.write(M.__super__.cdata.call(this,v,P,B))},M.prototype.comment=function(v,P,B){return this.stream.write(M.__super__.comment.call(this,v,P,B))},M.prototype.declaration=function(v,P,B){return this.stream.write(M.__super__.declaration.call(this,v,P,B))},M.prototype.docType=function(v,P,B){var R,y,I;if(B||(B=0),this.openNode(v,P,B),P.state=r.OpenTag,this.stream.write(this.indent(v,P,B)),this.stream.write("<!DOCTYPE "+v.root().name),v.pubID&&v.sysID?this.stream.write(' PUBLIC "'+v.pubID+'" "'+v.sysID+'"'):v.sysID&&this.stream.write(' SYSTEM "'+v.sysID+'"'),v.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(v,P,B)),P.state=r.InsideTag,R=0,y=(I=v.children).length;R<y;R++)this.writeChildNode(I[R],P,B+1);P.state=r.CloseTag,this.stream.write("]")}return P.state=r.CloseTag,this.stream.write(P.spaceBeforeSlash+">"),this.stream.write(this.endline(v,P,B)),P.state=r.None,this.closeNode(v,P,B)},M.prototype.element=function(v,P,B){var y,I,L,k,F,f,c;for(F in B||(B=0),this.openNode(v,P,B),P.state=r.OpenTag,this.stream.write(this.indent(v,P,B)+"<"+v.name),f=v.attribs)T.call(f,F)&&this.attribute(f[F],P,B);if(I=0===(y=v.children.length)?null:v.children[0],0===y||v.children.every(function(u){return(u.type===g.Text||u.type===g.Raw)&&""===u.value}))P.allowEmpty?(this.stream.write(">"),P.state=r.CloseTag,this.stream.write("</"+v.name+">")):(P.state=r.CloseTag,this.stream.write(P.spaceBeforeSlash+"/>"));else if(!P.pretty||1!==y||I.type!==g.Text&&I.type!==g.Raw||null==I.value){for(this.stream.write(">"+this.endline(v,P,B)),P.state=r.InsideTag,L=0,k=(c=v.children).length;L<k;L++)this.writeChildNode(c[L],P,B+1);P.state=r.CloseTag,this.stream.write(this.indent(v,P,B)+"</"+v.name+">")}else this.stream.write(">"),P.state=r.InsideTag,P.suppressPrettyCount++,this.writeChildNode(I,P,B+1),P.suppressPrettyCount--,P.state=r.CloseTag,this.stream.write("</"+v.name+">");return this.stream.write(this.endline(v,P,B)),P.state=r.None,this.closeNode(v,P,B)},M.prototype.processingInstruction=function(v,P,B){return this.stream.write(M.__super__.processingInstruction.call(this,v,P,B))},M.prototype.raw=function(v,P,B){return this.stream.write(M.__super__.raw.call(this,v,P,B))},M.prototype.text=function(v,P,B){return this.stream.write(M.__super__.text.call(this,v,P,B))},M.prototype.dtdAttList=function(v,P,B){return this.stream.write(M.__super__.dtdAttList.call(this,v,P,B))},M.prototype.dtdElement=function(v,P,B){return this.stream.write(M.__super__.dtdElement.call(this,v,P,B))},M.prototype.dtdEntity=function(v,P,B){return this.stream.write(M.__super__.dtdEntity.call(this,v,P,B))},M.prototype.dtdNotation=function(v,P,B){return this.stream.write(M.__super__.dtdNotation.call(this,v,P,B))},M}(b)}).call(this)},28337:function(Y,V,p){(function(){var r,b={}.hasOwnProperty;r=p(56425),Y.exports=function(x){function T(d){T.__super__.constructor.call(this,d)}return function(x,T){for(var d in T)b.call(T,d)&&(x[d]=T[d]);function M(){this.constructor=x}M.prototype=T.prototype,x.prototype=new M,x.__super__=T.prototype}(T,x),T.prototype.document=function(d,M){var P,B,Z,R;for(M=this.filterOptions(M),Z="",P=0,B=(R=d.children).length;P<B;P++)Z+=this.writeChildNode(R[P],M,0);return M.pretty&&Z.slice(-M.newline.length)===M.newline&&(Z=Z.slice(0,-M.newline.length)),Z},T}(r)}).call(this)},93258:function(Y){(function(){var p=function(r,N){return function(){return r.apply(N,arguments)}},g={}.hasOwnProperty;Y.exports=function(){function r(N){var b,x;for(b in this.assertLegalName=p(this.assertLegalName,this),this.assertLegalChar=p(this.assertLegalChar,this),N||(N={}),this.options=N,this.options.version||(this.options.version="1.0"),x=N.stringify||{})g.call(x,b)&&(this[b]=x[b])}return r.prototype.name=function(N){return this.options.noValidation?N:this.assertLegalName(""+N||"")},r.prototype.text=function(N){return this.options.noValidation?N:this.assertLegalChar(this.textEscape(""+N||""))},r.prototype.cdata=function(N){return this.options.noValidation?N:(N=(N=""+N||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(N))},r.prototype.comment=function(N){if(this.options.noValidation)return N;if((N=""+N||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+N);return this.assertLegalChar(N)},r.prototype.raw=function(N){return this.options.noValidation?N:""+N||""},r.prototype.attValue=function(N){return this.options.noValidation?N:this.assertLegalChar(this.attEscape(N=""+N||""))},r.prototype.insTarget=function(N){return this.options.noValidation?N:this.assertLegalChar(""+N||"")},r.prototype.insValue=function(N){if(this.options.noValidation)return N;if((N=""+N||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+N);return this.assertLegalChar(N)},r.prototype.xmlVersion=function(N){if(this.options.noValidation)return N;if(!(N=""+N||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+N);return N},r.prototype.xmlEncoding=function(N){if(this.options.noValidation)return N;if(!(N=""+N||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+N);return this.assertLegalChar(N)},r.prototype.xmlStandalone=function(N){return this.options.noValidation?N:N?"yes":"no"},r.prototype.dtdPubID=function(N){return this.options.noValidation?N:this.assertLegalChar(""+N||"")},r.prototype.dtdSysID=function(N){return this.options.noValidation?N:this.assertLegalChar(""+N||"")},r.prototype.dtdElementValue=function(N){return this.options.noValidation?N:this.assertLegalChar(""+N||"")},r.prototype.dtdAttType=function(N){return this.options.noValidation?N:this.assertLegalChar(""+N||"")},r.prototype.dtdAttDefault=function(N){return this.options.noValidation?N:this.assertLegalChar(""+N||"")},r.prototype.dtdEntityValue=function(N){return this.options.noValidation?N:this.assertLegalChar(""+N||"")},r.prototype.dtdNData=function(N){return this.options.noValidation?N:this.assertLegalChar(""+N||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(N){var x;if(this.options.noValidation)return N;if("1.0"===this.options.version){if(x=N.match(/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+N+" at index "+x.index)}else if("1.1"===this.options.version&&(x=N.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/)))throw new Error("Invalid character in string: "+N+" at index "+x.index);return N},r.prototype.assertLegalName=function(N){if(this.options.noValidation)return N;if(this.assertLegalChar(N),!N.match(/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/))throw new Error("Invalid character in name");return N},r.prototype.textEscape=function(N){return this.options.noValidation?N:N.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},r.prototype.attEscape=function(N){return this.options.noValidation?N:N.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},r}()}).call(this)},80504:function(Y,V,p){(function(){var g,r,x={}.hasOwnProperty;g=p(42870),r=p(26068),Y.exports=function(T){function d(M,v){if(d.__super__.constructor.call(this,M),null==v)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=g.Text,this.value=this.stringify.text(v)}return function(T,d){for(var M in d)x.call(d,M)&&(T[M]=d[M]);function v(){this.constructor=T}v.prototype=d.prototype,T.prototype=new v,T.__super__=d.prototype}(d,T),Object.defineProperty(d.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(d.prototype,"wholeText",{get:function(){var M,v,P;for(P="",v=this.previousSibling;v;)P=v.data+P,v=v.previousSibling;for(P+=this.data,M=this.nextSibling;M;)P+=M.data,M=M.nextSibling;return P}}),d.prototype.clone=function(){return Object.create(this)},d.prototype.toString=function(M){return this.options.writer.text(this,this.options.writer.filterOptions(M))},d.prototype.splitText=function(M){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.replaceWholeText=function(M){throw new Error("This DOM method is not implemented."+this.debugInfo())},d}(r)}).call(this)},56425:function(Y,V,p){(function(){var g,r,k,F={}.hasOwnProperty;k=p(63146).assign,g=p(42870),p(29413),p(67905),p(19832),p(73940),p(17770),p(99166),p(80504),p(12726),p(71616),p(70438),p(33020),p(80015),p(46600),r=p(47159),Y.exports=function(){function C(f){var c,u,h;for(c in f||(f={}),this.options=f,u=f.writer||{})F.call(u,c)&&(h=u[c],this["_"+c]=this[c],this[c]=h)}return C.prototype.filterOptions=function(f){var c,u,h,z,S,e,D,q;return f||(f={}),f=k({},this.options,f),(c={writer:this}).pretty=f.pretty||!1,c.allowEmpty=f.allowEmpty||!1,c.indent=null!=(u=f.indent)?u:"  ",c.newline=null!=(h=f.newline)?h:"\n",c.offset=null!=(z=f.offset)?z:0,c.dontPrettyTextNodes=null!=(S=null!=(e=f.dontPrettyTextNodes)?e:f.dontprettytextnodes)?S:0,c.spaceBeforeSlash=null!=(D=null!=(q=f.spaceBeforeSlash)?q:f.spacebeforeslash)?D:"",!0===c.spaceBeforeSlash&&(c.spaceBeforeSlash=" "),c.suppressPrettyCount=0,c.user={},c.state=r.None,c},C.prototype.indent=function(f,c,u){var h;return!c.pretty||c.suppressPrettyCount?"":c.pretty&&(h=(u||0)+c.offset+1)>0?new Array(h).join(c.indent):""},C.prototype.endline=function(f,c,u){return!c.pretty||c.suppressPrettyCount?"":c.newline},C.prototype.attribute=function(f,c,u){var h;return this.openAttribute(f,c,u),h=" "+f.name+'="'+f.value+'"',this.closeAttribute(f,c,u),h},C.prototype.cdata=function(f,c,u){var h;return this.openNode(f,c,u),c.state=r.OpenTag,h=this.indent(f,c,u)+"<![CDATA[",c.state=r.InsideTag,h+=f.value,c.state=r.CloseTag,h+="]]>"+this.endline(f,c,u),c.state=r.None,this.closeNode(f,c,u),h},C.prototype.comment=function(f,c,u){var h;return this.openNode(f,c,u),c.state=r.OpenTag,h=this.indent(f,c,u)+"\x3c!-- ",c.state=r.InsideTag,h+=f.value,c.state=r.CloseTag,h+=" --\x3e"+this.endline(f,c,u),c.state=r.None,this.closeNode(f,c,u),h},C.prototype.declaration=function(f,c,u){var h;return this.openNode(f,c,u),c.state=r.OpenTag,h=this.indent(f,c,u)+"<?xml",c.state=r.InsideTag,h+=' version="'+f.version+'"',null!=f.encoding&&(h+=' encoding="'+f.encoding+'"'),null!=f.standalone&&(h+=' standalone="'+f.standalone+'"'),c.state=r.CloseTag,h+=c.spaceBeforeSlash+"?>",h+=this.endline(f,c,u),c.state=r.None,this.closeNode(f,c,u),h},C.prototype.docType=function(f,c,u){var z,S,e,D;if(u||(u=0),this.openNode(f,c,u),c.state=r.OpenTag,e=this.indent(f,c,u),e+="<!DOCTYPE "+f.root().name,f.pubID&&f.sysID?e+=' PUBLIC "'+f.pubID+'" "'+f.sysID+'"':f.sysID&&(e+=' SYSTEM "'+f.sysID+'"'),f.children.length>0){for(e+=" [",e+=this.endline(f,c,u),c.state=r.InsideTag,z=0,S=(D=f.children).length;z<S;z++)e+=this.writeChildNode(D[z],c,u+1);c.state=r.CloseTag,e+="]"}return c.state=r.CloseTag,e+=c.spaceBeforeSlash+">",e+=this.endline(f,c,u),c.state=r.None,this.closeNode(f,c,u),e},C.prototype.element=function(f,c,u){var z,S,e,D,q,J,ie,oe,fe,ae,Ne,ue,Ie;for(oe in u||(u=0),fe=!1,ae="",this.openNode(f,c,u),c.state=r.OpenTag,ae+=this.indent(f,c,u)+"<"+f.name,Ne=f.attribs)F.call(Ne,oe)&&(ae+=this.attribute(Ne[oe],c,u));if(e=0===(S=f.children.length)?null:f.children[0],0===S||f.children.every(function(Ee){return(Ee.type===g.Text||Ee.type===g.Raw)&&""===Ee.value}))c.allowEmpty?(ae+=">",c.state=r.CloseTag,ae+="</"+f.name+">"+this.endline(f,c,u)):(c.state=r.CloseTag,ae+=c.spaceBeforeSlash+"/>"+this.endline(f,c,u));else if(!c.pretty||1!==S||e.type!==g.Text&&e.type!==g.Raw||null==e.value){if(c.dontPrettyTextNodes)for(D=0,J=(ue=f.children).length;D<J;D++)if(((z=ue[D]).type===g.Text||z.type===g.Raw)&&null!=z.value){c.suppressPrettyCount++,fe=!0;break}for(ae+=">"+this.endline(f,c,u),c.state=r.InsideTag,q=0,ie=(Ie=f.children).length;q<ie;q++)ae+=this.writeChildNode(z=Ie[q],c,u+1);c.state=r.CloseTag,ae+=this.indent(f,c,u)+"</"+f.name+">",fe&&c.suppressPrettyCount--,ae+=this.endline(f,c,u),c.state=r.None}else ae+=">",c.state=r.InsideTag,c.suppressPrettyCount++,fe=!0,ae+=this.writeChildNode(e,c,u+1),c.suppressPrettyCount--,fe=!1,c.state=r.CloseTag,ae+="</"+f.name+">"+this.endline(f,c,u);return this.closeNode(f,c,u),ae},C.prototype.writeChildNode=function(f,c,u){switch(f.type){case g.CData:return this.cdata(f,c,u);case g.Comment:return this.comment(f,c,u);case g.Element:return this.element(f,c,u);case g.Raw:return this.raw(f,c,u);case g.Text:return this.text(f,c,u);case g.ProcessingInstruction:return this.processingInstruction(f,c,u);case g.Dummy:return"";case g.Declaration:return this.declaration(f,c,u);case g.DocType:return this.docType(f,c,u);case g.AttributeDeclaration:return this.dtdAttList(f,c,u);case g.ElementDeclaration:return this.dtdElement(f,c,u);case g.EntityDeclaration:return this.dtdEntity(f,c,u);case g.NotationDeclaration:return this.dtdNotation(f,c,u);default:throw new Error("Unknown XML node type: "+f.constructor.name)}},C.prototype.processingInstruction=function(f,c,u){var h;return this.openNode(f,c,u),c.state=r.OpenTag,h=this.indent(f,c,u)+"<?",c.state=r.InsideTag,h+=f.target,f.value&&(h+=" "+f.value),c.state=r.CloseTag,h+=c.spaceBeforeSlash+"?>",h+=this.endline(f,c,u),c.state=r.None,this.closeNode(f,c,u),h},C.prototype.raw=function(f,c,u){var h;return this.openNode(f,c,u),c.state=r.OpenTag,h=this.indent(f,c,u),c.state=r.InsideTag,h+=f.value,c.state=r.CloseTag,h+=this.endline(f,c,u),c.state=r.None,this.closeNode(f,c,u),h},C.prototype.text=function(f,c,u){var h;return this.openNode(f,c,u),c.state=r.OpenTag,h=this.indent(f,c,u),c.state=r.InsideTag,h+=f.value,c.state=r.CloseTag,h+=this.endline(f,c,u),c.state=r.None,this.closeNode(f,c,u),h},C.prototype.dtdAttList=function(f,c,u){var h;return this.openNode(f,c,u),c.state=r.OpenTag,h=this.indent(f,c,u)+"<!ATTLIST",c.state=r.InsideTag,h+=" "+f.elementName+" "+f.attributeName+" "+f.attributeType,"#DEFAULT"!==f.defaultValueType&&(h+=" "+f.defaultValueType),f.defaultValue&&(h+=' "'+f.defaultValue+'"'),c.state=r.CloseTag,h+=c.spaceBeforeSlash+">"+this.endline(f,c,u),c.state=r.None,this.closeNode(f,c,u),h},C.prototype.dtdElement=function(f,c,u){var h;return this.openNode(f,c,u),c.state=r.OpenTag,h=this.indent(f,c,u)+"<!ELEMENT",c.state=r.InsideTag,h+=" "+f.name+" "+f.value,c.state=r.CloseTag,h+=c.spaceBeforeSlash+">"+this.endline(f,c,u),c.state=r.None,this.closeNode(f,c,u),h},C.prototype.dtdEntity=function(f,c,u){var h;return this.openNode(f,c,u),c.state=r.OpenTag,h=this.indent(f,c,u)+"<!ENTITY",c.state=r.InsideTag,f.pe&&(h+=" %"),h+=" "+f.name,f.value?h+=' "'+f.value+'"':(f.pubID&&f.sysID?h+=' PUBLIC "'+f.pubID+'" "'+f.sysID+'"':f.sysID&&(h+=' SYSTEM "'+f.sysID+'"'),f.nData&&(h+=" NDATA "+f.nData)),c.state=r.CloseTag,h+=c.spaceBeforeSlash+">"+this.endline(f,c,u),c.state=r.None,this.closeNode(f,c,u),h},C.prototype.dtdNotation=function(f,c,u){var h;return this.openNode(f,c,u),c.state=r.OpenTag,h=this.indent(f,c,u)+"<!NOTATION",c.state=r.InsideTag,h+=" "+f.name,f.pubID&&f.sysID?h+=' PUBLIC "'+f.pubID+'" "'+f.sysID+'"':f.pubID?h+=' PUBLIC "'+f.pubID+'"':f.sysID&&(h+=' SYSTEM "'+f.sysID+'"'),c.state=r.CloseTag,h+=c.spaceBeforeSlash+">"+this.endline(f,c,u),c.state=r.None,this.closeNode(f,c,u),h},C.prototype.openNode=function(f,c,u){},C.prototype.closeNode=function(f,c,u){},C.prototype.openAttribute=function(f,c,u){},C.prototype.closeAttribute=function(f,c,u){},C}()}).call(this)},71741:function(Y,V,p){(function(){var g,r,N,b,x,T,d,M,v,P;P=p(63146),M=P.assign,v=P.isFunction,N=p(57951),b=p(32008),x=p(25795),d=p(28337),T=p(50864),g=p(42870),r=p(47159),Y.exports.create=function(B,Z,R,y){var I,L;if(null==B)throw new Error("Root element needs a name.");return y=M({},Z,R,y),L=(I=new b(y)).element(B),y.headless||(I.declaration(y),(null!=y.pubID||null!=y.sysID)&&I.dtd(y)),L},Y.exports.begin=function(B,Z,R){var y;return v(B)&&(Z=(y=[B,Z])[0],R=y[1],B={}),Z?new x(B,Z,R):new b(B)},Y.exports.stringWriter=function(B){return new d(B)},Y.exports.streamWriter=function(B,Z){return new T(B,Z)},Y.exports.implementation=new N,Y.exports.nodeType=g,Y.exports.writerState=r}).call(this)},15636:(Y,V,p)=>{"use strict";p.r(V),p.d(V,{RgwModule:()=>oo,RoutedRgwModule:()=>vu});var g=p(88692),r=p(20092),N=p(54247),b=p(51389),x=p(37496),T=p(79512),d=p(4268),M=p(4222),v=p(54462),P=p(44466),B=p(66265),Z=p(23815),R=p.n(Z),y=p(35758),I=p(49277),L=p(95152),k=p(33394),F=p(64762),C=p(35732),f=p(25917),c=p(19773),u=p(96736),h=p(5304),z=p(20523),S=p(93523),e=p(64537);let D=class{constructor(i,t){this.http=i,this.rgwDaemonService=t,this.url="api/rgw/user"}list(){return this.enumerate().pipe((0,c.zg)(i=>i.length>0?(0,y.D)(i.map(t=>this.get(t))):(0,f.of)([])))}enumerate(){return this.rgwDaemonService.request(i=>this.http.get(this.url,{params:i}))}enumerateEmail(){return this.rgwDaemonService.request(i=>this.http.get(`${this.url}/get_emails`,{params:i}))}get(i){return this.rgwDaemonService.request(t=>this.http.get(`${this.url}/${i}`,{params:t}))}getQuota(i){return this.rgwDaemonService.request(t=>this.http.get(`${this.url}/${i}/quota`,{params:t}))}create(i){return this.rgwDaemonService.request(t=>(R().keys(i).forEach(o=>{t=t.append(o,i[o])}),this.http.post(this.url,null,{params:t})))}update(i,t){return this.rgwDaemonService.request(o=>(R().keys(t).forEach(_=>{o=o.append(_,t[_])}),this.http.put(`${this.url}/${i}`,null,{params:o})))}updateQuota(i,t){return this.rgwDaemonService.request(o=>(R().keys(t).forEach(_=>{o=o.append(_,t[_])}),this.http.put(`${this.url}/${i}/quota`,null,{params:o})))}delete(i){return this.rgwDaemonService.request(t=>this.http.delete(`${this.url}/${i}`,{params:t}))}createSubuser(i,t){return this.rgwDaemonService.request(o=>(R().keys(t).forEach(_=>{o=o.append(_,t[_])}),this.http.post(`${this.url}/${i}/subuser`,null,{params:o})))}deleteSubuser(i,t){return this.rgwDaemonService.request(o=>this.http.delete(`${this.url}/${i}/subuser/${t}`,{params:o}))}addCapability(i,t,o){return this.rgwDaemonService.request(_=>(_=(_=_.append("type",t)).append("perm",o),this.http.post(`${this.url}/${i}/capability`,null,{params:_})))}deleteCapability(i,t,o){return this.rgwDaemonService.request(_=>(_=(_=_.append("type",t)).append("perm",o),this.http.delete(`${this.url}/${i}/capability`,{params:_})))}addS3Key(i,t){return this.rgwDaemonService.request(o=>(o=o.append("key_type","s3"),R().keys(t).forEach(_=>{o=o.append(_,t[_])}),this.http.post(`${this.url}/${i}/key`,null,{params:o})))}deleteS3Key(i,t){return this.rgwDaemonService.request(o=>(o=(o=o.append("key_type","s3")).append("access_key",t),this.http.delete(`${this.url}/${i}/key`,{params:o})))}exists(i){return this.get(i).pipe((0,u.h)(!0),(0,h.K)(t=>(R().isFunction(t.preventDefault)&&t.preventDefault(),(0,f.of)(!1))))}emailExists(i){return i=decodeURIComponent(i),this.enumerateEmail().pipe((0,c.zg)(t=>{const o=R().indexOf(t,i);return(0,f.of)(-1!==o)}))}};D.\u0275fac=function(i){return new(i||D)(e.LFG(C.eN),e.LFG(z.b))},D.\u0275prov=e.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D=(0,F.gn)([S.o,(0,F.w6)("design:paramtypes",[C.eN,z.b])],D);var q=p(65862),J=p(18001),ie=p(93614),oe=p(82723),fe=p(97161);class ae{constructor(){this.kmsProviders=["vault"],this.authMethods=["token","agent"],this.secretEngines=["kv","transit"],this.sse_s3="AES256",this.sse_kms="aws:kms"}}var Ne=(()=>{return(n=Ne||(Ne={})).ENABLED="Enabled",n.DISABLED="Disabled",Ne;var n})(),ue=(()=>{return(n=ue||(ue={})).Read="Read",n.Write="Write",n.All="Read and write",n.FullControl="Full control",ue;var n})(),Ie=(()=>{return(n=Ie||(Ie={})).Owner="Owner",n.Everyone="Everyone",n.AuthenticatedUsers="Authenticated Users",Ie;var n})(),Ee=(()=>{return(n=Ee||(Ee={})).ENABLED="Enabled",n.SUSPENDED="Suspended",Ee;var n})(),Pe=p(62862),ze=p(18372),Le=p(60312),be=p(30839),Ge=p(87925),O=p(94276),l=p(56310),w=p(41582);function $(n,i){1&n&&(e.TgZ(0,"option",29),e.SDv(1,30),e.qZA()),2&n&&e.Q6J("ngValue",null)}function _e(n,i){if(1&n&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function ce(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,33),e.qZA())}function A(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",7)(2,"label",22),e.SDv(3,23),e.qZA(),e.TgZ(4,"div",24)(5,"select",25),e.YNc(6,$,2,1,"option",26),e.YNc(7,_e,2,2,"option",27),e.qZA(),e.YNc(8,ce,2,0,"span",28),e.qZA()()()),2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(6),e.Q6J("ngIf",null!==t.kmsProviders),e.xp6(1),e.Q6J("ngForOf",t.kmsProviders),e.xp6(1),e.Q6J("ngIf",t.configForm.showError("kms_provider",o,"required"))}}function W(n,i){if(1&n&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function j(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,37),e.qZA())}function m(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",7)(2,"label",34),e.SDv(3,35),e.qZA(),e.TgZ(4,"div",24)(5,"select",36),e.YNc(6,W,2,2,"option",27),e.qZA(),e.YNc(7,j,2,0,"span",28),e.qZA()()()),2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(6),e.Q6J("ngForOf",t.authMethods),e.xp6(1),e.Q6J("ngIf",t.configForm.showError("auth_method",o,"required"))}}function s(n,i){if(1&n&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function a(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,41),e.qZA())}function G(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",7)(2,"label",38),e.SDv(3,39),e.qZA(),e.TgZ(4,"div",24)(5,"select",40),e.YNc(6,s,2,2,"option",27),e.qZA(),e.YNc(7,a,2,0,"span",28),e.qZA()()()),2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(6),e.Q6J("ngForOf",t.secretEngines),e.xp6(1),e.Q6J("ngIf",t.configForm.showError("secret_engine",o,"required"))}}function X(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,45),e.qZA())}function ee(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",7)(2,"label",42),e.SDv(3,43),e.qZA(),e.TgZ(4,"div",24),e._UZ(5,"input",44),e.YNc(6,X,2,0,"span",28),e.qZA()()()),2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(6),e.Q6J("ngIf",t.configForm.showError("secret_path",o,"required"))}}function ne(n,i){1&n&&(e.TgZ(0,"div")(1,"div",7)(2,"label",46),e.SDv(3,47),e.qZA(),e.TgZ(4,"div",24),e._UZ(5,"input",48),e.qZA()()())}function Ce(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,52),e.qZA())}function Ae(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",7)(2,"label",49),e.SDv(3,50),e.qZA(),e.TgZ(4,"div",24),e._UZ(5,"input",51),e.YNc(6,Ce,2,0,"span",28),e.qZA()()()),2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(6),e.Q6J("ngIf",t.configForm.showError("address",o,"required"))}}function ye(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,57),e.qZA())}function Be(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"label",53)(2,"span"),e.SDv(3,54),e.qZA(),e.TgZ(4,"cd-helper"),e.SDv(5,55),e.qZA()(),e.TgZ(6,"div",24)(7,"input",56),e.NdJ("change",function(_){e.CHM(t);const E=e.oxw();return e.KtG(E.fileUpload(_.target.files,"token"))}),e.qZA(),e.YNc(8,ye,2,0,"span",28),e.qZA()()}if(2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(8),e.Q6J("ngIf",t.configForm.showError("token",o,"required"))}}function De(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,62),e.qZA())}function He(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",7)(2,"label",58)(3,"span"),e.SDv(4,59),e.qZA(),e.TgZ(5,"cd-helper"),e.SDv(6,60),e.qZA()(),e.TgZ(7,"div",24)(8,"input",61),e.NdJ("change",function(_){e.CHM(t);const E=e.oxw();return e.KtG(E.fileUpload(_.target.files,"ssl_cert"))}),e.qZA(),e.YNc(9,De,2,0,"span",28),e.qZA()()()}if(2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(9),e.Q6J("ngIf",t.configForm.showError("ssl_cert",o,"required"))}}function Ye(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,67),e.qZA())}function Ke(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",7)(2,"label",63)(3,"span"),e.SDv(4,64),e.qZA(),e.TgZ(5,"cd-helper"),e.SDv(6,65),e.qZA()(),e.TgZ(7,"div",24)(8,"input",66),e.NdJ("change",function(_){e.CHM(t);const E=e.oxw();return e.KtG(E.fileUpload(_.target.files,"client_cert"))}),e.qZA(),e.YNc(9,Ye,2,0,"span",28),e.qZA()()()}if(2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(9),e.Q6J("ngIf",t.configForm.showError("client_cert",o,"required"))}}function co(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,72),e.qZA())}function uo(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",7)(2,"label",68)(3,"span"),e.SDv(4,69),e.qZA(),e.TgZ(5,"cd-helper"),e.SDv(6,70),e.qZA()(),e.TgZ(7,"div",24)(8,"input",71),e.NdJ("change",function(_){e.CHM(t);const E=e.oxw();return e.KtG(E.fileUpload(_.target.files,"client_key"))}),e.qZA(),e.YNc(9,co,2,0,"span",28),e.qZA()()()}if(2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(9),e.Q6J("ngIf",t.configForm.showError("client_key",o,"required"))}}let fo=(()=>{class n{constructor(t,o,_,E,U,H,K){this.formBuilder=t,this.activeModal=o,this.router=_,this.actionLabels=E,this.rgwBucketService=U,this.rgwEncryptionModal=H,this.notificationService=K,this.vaultAddress=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{4}$/,this.submitAction=new e.vpe,this.createForm()}ngOnInit(){this.kmsProviders=this.rgwEncryptionModal.kmsProviders,this.authMethods=this.rgwEncryptionModal.authMethods,this.secretEngines=this.rgwEncryptionModal.secretEngines}createForm(){this.configForm=this.formBuilder.group({address:[null,[r.kI.required,oe.hq.custom("vaultPattern",t=>!R().isEmpty(t)&&!this.vaultAddress.test(t))]],kms_provider:["vault",r.kI.required],encryptionType:["aws:kms",r.kI.required],auth_method:["token",r.kI.required],secret_engine:["kv",r.kI.required],secret_path:["/"],namespace:[null],token:[null,[oe.hq.requiredIf({auth_method:"token"})]],ssl_cert:[null,oe.hq.sslCert()],client_cert:[null,oe.hq.pemCert()],client_key:[null,oe.hq.sslPrivKey()],kmsEnabled:[{value:!1}],s3Enabled:[{value:!1}]})}fileUpload(t,o){const _=t[0];(new FileReader).addEventListener("load",()=>{const U=this.configForm.get(o);U.setValue(_),U.markAsDirty(),U.markAsTouched(),U.updateValueAndValidity()})}onSubmit(){const t=this.configForm.value;this.rgwBucketService.setEncryptionConfig(t.encryptionType,t.kms_provider,t.auth_method,t.secret_engine,t.secret_path,t.namespace,t.address,t.token,t.owner,t.ssl_cert,t.client_cert,t.client_key).subscribe({next:()=>{this.notificationService.show(J.k.success,"Updated RGW Encryption Configuration values")},error:o=>{this.notificationService.show(J.k.error,o),this.configForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.activeModal.close(),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.router.onSameUrlNavigation="reload",this.router.navigate([this.router.url])}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Pe.O),e.Y36(b.Kz),e.Y36(N.F0),e.Y36(T.p4),e.Y36(L.o),e.Y36(ae),e.Y36(fe.g))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-config-modal"]],outputs:{submitAction:"submitAction"},features:[e._Bn([ae])],decls:30,vars:14,consts:function(){let i,t,o,_,E,U,H,K,Q,te,Te,pe,de,Oe,ge,ve,we,We,Re,$e,Ue,xe,Ze,ke,le,me,Se,qe;return i="Update RGW Encryption Configurations",t="Encryption Type",o="SSE-S3 Encryption",_="SSE-KMS Encryption",E="Key management service provider",U="-- Select a provider --",H="This field is required.",K="Authentication Method",Q="This field is required.",te="Secret Engine",Te="This field is required.",pe="Secret Path ",de="This field is required.",Oe="Namespace ",ge="Vault Address ",ve="This field is required.",we="Token",We=" The token authentication method expects a Vault token to be present in a plaintext file. ",Re="This field is required.",$e="CA Certificate",Ue="The SSL certificate in PEM format.",xe="This field is required.",Ze="Client Certificate",ke="The Client certificate in PEM format.",le="This field is required.",me="Client Private Key",Se="The Client Private Key in PEM format.",qe="This field is required.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","configForm",3,"formGroup"],["frm","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","encryptionType",1,"cd-col-form-label","required"],t,[1,"col-md-auto","custom-checkbox","form-check-inline","ms-3"],["formControlName","encryptionType","id","s3Enabled","type","radio","name","encryptionType","value","AES256",1,"form-check-input"],["for","s3Enabled",1,"custom-check-label"],o,[1,"col-md-auto","custom-checkbox","form-check-inline"],["formControlName","encryptionType","id","kmsEnabled","name","encryptionType","value","aws:kms","type","radio",1,"form-check-input"],["for","kmsEnabled",1,"custom-check-label"],_,[4,"ngIf"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"submitText","form","submitActionEvent"],["for","kms_provider",1,"cd-col-form-label","required"],E,[1,"cd-col-form-input"],["id","kms_provider","name","kms_provider","formControlName","kms_provider",1,"form-select"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[3,"ngValue"],U,[3,"value"],[1,"invalid-feedback"],H,["for","auth_method",1,"cd-col-form-label","required"],K,["id","auth_method","name","auth_method","formControlName","auth_method",1,"form-select"],Q,["for","secret_engine",1,"cd-col-form-label","required"],te,["id","secret_engine","name","secret_engine","formControlName","secret_engine",1,"form-select"],Te,["for","secret_path",1,"cd-col-form-label"],pe,["id","secret_path","name","secret_path","type","text","formControlName","secret_path",1,"form-control"],de,["for","namespace",1,"cd-col-form-label"],Oe,["id","namespace","name","namespace","type","text","formControlName","namespace",1,"form-control"],["for","address",1,"cd-col-form-label","required"],ge,["id","address","name","address","formControlName","address","placeholder","http://127.0.0.1:8000",1,"form-control"],ve,["for","token",1,"cd-col-form-label","required"],we,We,["type","file","formControlName","token",3,"change"],Re,["for","ssl_cert",1,"cd-col-form-label"],$e,Ue,["type","file","formControlName","ssl_cert",3,"change"],xe,["for","client_cert",1,"cd-col-form-label"],Ze,ke,["type","file","formControlName","client_cert",3,"change"],le,["for","client_key",1,"cd-col-form-label"],me,Se,["type","file",3,"change"],qe]},template:function(t,o){1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.BQk(),e.ynx(3,3),e.TgZ(4,"form",4,5)(6,"div",6)(7,"div",7)(8,"label",8),e.SDv(9,9),e.qZA(),e.TgZ(10,"div",10),e._UZ(11,"input",11),e.TgZ(12,"label",12),e.SDv(13,13),e.qZA()(),e.TgZ(14,"div",14),e._UZ(15,"input",15),e.TgZ(16,"label",16),e.SDv(17,17),e.qZA()()(),e.YNc(18,A,9,3,"div",18),e.YNc(19,m,8,2,"div",18),e.YNc(20,G,8,2,"div",18),e.YNc(21,ee,7,1,"div",18),e.YNc(22,ne,6,0,"div",18),e.YNc(23,Ae,7,1,"div",18),e.YNc(24,Be,9,1,"div",19),e.YNc(25,He,10,1,"div",18),e.YNc(26,Ke,10,1,"div",18),e.YNc(27,uo,10,1,"div",18),e.qZA(),e.TgZ(28,"div",20)(29,"cd-form-button-panel",21),e.NdJ("submitActionEvent",function(){return o.onSubmit()}),e.qZA()()(),e.BQk(),e.qZA()),2&t&&(e.Q6J("modalRef",o.activeModal),e.xp6(4),e.Q6J("formGroup",o.configForm),e.xp6(14),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(1),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(1),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(1),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(1),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(1),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(1),e.Q6J("ngIf","token"===o.configForm.getValue("auth_method")),e.xp6(1),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(1),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(1),e.Q6J("ngIf","aws:kms"===o.configForm.getValue("encryptionType")||"AES256"===o.configForm.getValue("encryptionType")),e.xp6(2),e.Q6J("submitText",o.actionLabels.SUBMIT)("form",o.configForm))},dependencies:[g.sg,g.O5,ze.S,Le.z,be.p,Ge.o,O.b,l.P,w.V,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r._,r.JJ,r.JL,r.sg,r.u]}),n})();function po(n,i){1&n&&(e.TgZ(0,"span",18),e.SDv(1,19),e.qZA())}function go(n,i){1&n&&(e.TgZ(0,"span",18),e.SDv(1,20),e.qZA())}function To(n,i){1&n&&(e.TgZ(0,"span",18),e.SDv(1,21),e.qZA())}function Eo(n,i){1&n&&(e.TgZ(0,"span",18),e.SDv(1,22),e.qZA())}function Ro(n,i){1&n&&(e.TgZ(0,"span",18),e.SDv(1,23),e.qZA())}let mo=(()=>{class n{constructor(t,o,_){this.formBuilder=t,this.activeModal=o,this.actionLabels=_,this.submitAction=new e.vpe,this.editMode=!1,this.createForm()}createForm(){this.form=this.formBuilder.group({key:[null,[r.kI.required,oe.hq.custom("unique",t=>!(R().isEmpty(t)&&!this.currentKeyTags)&&this.storedKey!==t&&this.currentKeyTags.includes(t)),oe.hq.custom("maxLength",t=>!R().isEmpty(t)&&t.length>128)]],value:[null,[r.kI.required,oe.hq.custom("maxLength",t=>!R().isEmpty(t)&&t.length>128)]]})}onSubmit(){this.submitAction.emit(this.form.value),this.activeModal.close()}getMode(){return this.editMode?this.actionLabels.EDIT:this.actionLabels.ADD}fillForm(t){this.form.setValue(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Pe.O),e.Y36(b.Kz),e.Y36(T.p4))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-bucket-tag-modal"]],outputs:{submitAction:"submitAction"},decls:24,vars:10,consts:function(){let i,t,o,_,E,U,H,K;return i="" + "\ufffd0\ufffd" + " Tag",t="Key",o="Value",_="This field is required.",E="This key must be unique.",U="Length of the key must be maximum of 128 characters",H="This field is required.",K="Length of the value must be a maximum of 128 characters",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],[1,"form",3,"formGroup"],["formDir","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","key",1,"cd-col-form-label","required"],t,[1,"cd-col-form-input"],["type","text","formControlName","key","id","key",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","value",1,"cd-col-form-label","required"],o,["id","value","type","text","formControlName","value",1,"form-control"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],[1,"invalid-feedback"],_,E,U,H,K]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0)(1,"span",1),e.SDv(2,2),e.qZA(),e.ynx(3,3),e.TgZ(4,"form",4,5)(6,"div",6)(7,"div",7)(8,"label",8),e.SDv(9,9),e.qZA(),e.TgZ(10,"div",10),e._UZ(11,"input",11),e.YNc(12,po,2,0,"span",12),e.YNc(13,go,2,0,"span",12),e.YNc(14,To,2,0,"span",12),e.qZA()(),e.TgZ(15,"div",7)(16,"label",13),e.SDv(17,14),e.qZA(),e.TgZ(18,"div",10),e._UZ(19,"input",15),e.YNc(20,Eo,2,0,"span",12),e.YNc(21,Ro,2,0,"span",12),e.qZA()()(),e.TgZ(22,"div",16)(23,"cd-form-button-panel",17),e.NdJ("submitActionEvent",function(){return o.onSubmit()}),e.qZA()()(),e.BQk(),e.qZA()),2&t){const _=e.MAs(5);e.Q6J("modalRef",o.activeModal),e.xp6(2),e.pQV(o.getMode()),e.QtT(2),e.xp6(2),e.Q6J("formGroup",o.form),e.xp6(8),e.Q6J("ngIf",o.form.showError("key",_,"required")),e.xp6(1),e.Q6J("ngIf",o.form.showError("key",_,"unique")),e.xp6(1),e.Q6J("ngIf",o.form.showError("key",_,"maxLength")),e.xp6(6),e.Q6J("ngIf",o.form.showError("value",_,"required")),e.xp6(1),e.Q6J("ngIf",o.form.showError("value",_,"maxLength")),e.xp6(2),e.Q6J("form",o.form)("submitText",o.getMode())}},dependencies:[g.O5,Le.z,be.p,Ge.o,O.b,l.P,w.V,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]}),n})();var et=p(80381),an=p(43190),ln=p(88002),Qe=p(63285),Mo=p(24737);let So=(()=>{class n{constructor(){}format(t){if(!t.nativeElement?.value)return;const o=t.nativeElement.value,E=(new DOMParser).parseFromString(o,"application/xml"),K=20*E.getElementsByTagName("*").length;t.nativeElement.style.height=K+"px",E.querySelector("parsererror")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ho=p(8958),tt=p(34501),fn=p(32966),Co=p(1372),ut=p(82945),pn=p(63622),Je=p(10545);const Fo=["bucketPolicyTextArea"],Oo=["lifecycleTextArea"];function No(n,i){1&n&&(e.TgZ(0,"div",11)(1,"label",44),e.SDv(2,65),e.qZA(),e.TgZ(3,"div",14),e._UZ(4,"input",66),e.qZA()())}function Po(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,68),e.qZA())}function Ao(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,69),e.qZA())}function bo(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,70),e.qZA())}function Io(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,71),e.qZA())}function Go(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,72),e.qZA())}function yo(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,73),e.qZA())}function Lo(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,74),e.qZA())}function Do(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,75),e.qZA())}function vo(n,i){1&n&&(e.TgZ(0,"option",76),e.SDv(1,77),e.qZA()),2&n&&e.Q6J("ngValue",null)}function wo(n,i){1&n&&(e.TgZ(0,"option",76),e.SDv(1,78),e.qZA()),2&n&&e.Q6J("ngValue",null)}function Wo(n,i){if(1&n&&(e.TgZ(0,"option",79),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function $o(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,80),e.qZA())}function Uo(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"fieldset")(1,"legend",23),e.SDv(2,81),e.qZA(),e.TgZ(3,"div",11)(4,"div",82)(5,"div",83)(6,"input",84),e.NdJ("change",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.setMfaDeleteValidators())}),e.qZA(),e.TgZ(7,"label",85),e.SDv(8,86),e.qZA(),e.TgZ(9,"cd-helper")(10,"span"),e.SDv(11,87),e.qZA()()()()()()}}function xo(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,96),e.qZA())}function Zo(n,i){if(1&n&&(e.TgZ(0,"div",11)(1,"label",93),e.SDv(2,94),e.qZA(),e.TgZ(3,"div",14),e._UZ(4,"input",95),e.YNc(5,xo,2,0,"span",16),e.qZA()()),2&n){e.oxw(2);const t=e.MAs(2),o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.bucketForm.showError("mfa-token-serial",t,"required"))}}function ko(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,100),e.qZA())}function Bo(n,i){if(1&n&&(e.TgZ(0,"div",11)(1,"label",97),e.SDv(2,98),e.qZA(),e.TgZ(3,"div",14),e._UZ(4,"input",99),e.YNc(5,ko,2,0,"span",16),e.qZA()()),2&n){e.oxw(2);const t=e.MAs(2),o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.bucketForm.showError("mfa-token-pin",t,"required"))}}function zo(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"fieldset")(1,"legend",23),e.SDv(2,88),e.qZA(),e.TgZ(3,"div",11)(4,"div",82)(5,"div",83)(6,"input",89),e.NdJ("change",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.setMfaDeleteValidators())}),e.qZA(),e.TgZ(7,"label",90),e.SDv(8,91),e.qZA(),e.TgZ(9,"cd-helper")(10,"span"),e.SDv(11,92),e.qZA()()()()(),e.YNc(12,Zo,6,1,"div",10),e.YNc(13,Bo,6,1,"div",10),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(12),e.Q6J("ngIf",t.areMfaCredentialsRequired()),e.xp6(1),e.Q6J("ngIf",t.areMfaCredentialsRequired())}}function qo(n,i){1&n&&(e.TgZ(0,"span"),e.SDv(1,115),e.qZA())}function Ho(n,i){1&n&&(e.TgZ(0,"span"),e.SDv(1,116),e.qZA())}function Xo(n,i){if(1&n&&(e.TgZ(0,"div",11)(1,"label",108),e.SDv(2,109),e.qZA(),e.TgZ(3,"div",14)(4,"select",110)(5,"option",111),e.SDv(6,112),e.qZA(),e.TgZ(7,"option",113),e.SDv(8,114),e.qZA()(),e.TgZ(9,"cd-help-text"),e.YNc(10,qo,2,0,"span",22),e.YNc(11,Ho,2,0,"span",22),e.qZA()()()),2&n){const t=e.oxw(3);e.xp6(10),e.Q6J("ngIf","COMPLIANCE"===t.bucketForm.getValue("lock_mode")),e.xp6(1),e.Q6J("ngIf","GOVERNANCE"===t.bucketForm.getValue("lock_mode"))}}function Yo(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,121),e.qZA())}function Ko(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,122),e.qZA())}function Qo(n,i){if(1&n&&(e.TgZ(0,"div",11)(1,"label",117),e.ynx(2),e.SDv(3,118),e.BQk(),e.qZA(),e.TgZ(4,"div",14),e._UZ(5,"input",119),e.TgZ(6,"cd-help-text")(7,"span"),e.SDv(8,120),e.qZA()(),e.YNc(9,Yo,2,0,"span",16),e.YNc(10,Ko,2,0,"span",16),e.qZA()()),2&n){e.oxw(2);const t=e.MAs(2),o=e.oxw();e.xp6(9),e.Q6J("ngIf",o.bucketForm.showError("lock_retention_period_days",t,"pattern")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("lock_retention_period_days",t,"lockDays"))}}function Jo(n,i){1&n&&(e.TgZ(0,"cd-alert-panel",123),e._uU(1," Bucket Versioning can't be disabled when Object Locking is enabled. "),e.qZA())}function Vo(n,i){1&n&&(e.TgZ(0,"cd-alert-panel",124),e._uU(1," Enabling Object Locking will allow the configuration of GOVERNANCE or COMPLIANCE modes, which will help ensure that an object version cannot be overwritten or deleted for the specified period. "),e.qZA())}function jo(n,i){if(1&n&&(e.TgZ(0,"fieldset")(1,"legend",23),e.tHW(2,101),e._UZ(3,"cd-help-text"),e.N_p(),e.qZA(),e.TgZ(4,"div",11)(5,"label",102),e.SDv(6,103),e.qZA(),e.TgZ(7,"div",14),e._UZ(8,"input",104),e.TgZ(9,"cd-help-text")(10,"span"),e.SDv(11,105),e.qZA()()()(),e.YNc(12,Xo,12,2,"div",10),e.YNc(13,Qo,11,2,"div",10),e.TgZ(14,"div",11),e._UZ(15,"div",54),e.TgZ(16,"div",14),e.YNc(17,Jo,2,0,"cd-alert-panel",106),e.YNc(18,Vo,2,0,"cd-alert-panel",107),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(12),e.Q6J("ngIf",t.bucketForm.getValue("lock_enabled")),e.xp6(1),e.Q6J("ngIf",t.bucketForm.getValue("lock_enabled")),e.xp6(4),e.Q6J("ngIf",t.bucketForm.getValue("lock_enabled")),e.xp6(1),e.Q6J("ngIf",t.bucketForm.getValue("lock_enabled"))}}function ei(n,i){1&n&&(e.TgZ(0,"option",76),e.SDv(1,135),e.qZA()),2&n&&e.Q6J("ngValue",null)}function ti(n,i){if(1&n&&(e.TgZ(0,"option",79),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function ni(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,136),e.qZA())}function oi(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",11)(2,"label",132),e.SDv(3,133),e.qZA(),e.TgZ(4,"div",14)(5,"select",134),e.YNc(6,ei,2,1,"option",20),e.YNc(7,ti,2,2,"option",21),e.qZA(),e.YNc(8,ni,2,0,"span",16),e.qZA()()()),2&n){e.oxw(2);const t=e.MAs(2),o=e.oxw();e.xp6(5),e.Q6J("autofocus",o.editing),e.xp6(1),e.Q6J("ngIf",null!==o.kmsProviders),e.xp6(1),e.Q6J("ngForOf",o.kmsProviders),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("kms_provider",t,"required"))}}function ii(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,140),e.qZA())}function _i(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",11)(2,"label",137),e.SDv(3,138),e.qZA(),e.TgZ(4,"div",14),e._UZ(5,"input",139),e.YNc(6,ii,2,0,"span",16),e.qZA()()()),2&n){e.oxw(2);const t=e.MAs(2),o=e.oxw();e.xp6(6),e.Q6J("ngIf",o.bucketForm.showError("keyId",t,"required"))}}function ri(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",11)(2,"div",82)(3,"div",125),e._UZ(4,"input",126),e.TgZ(5,"label",127),e.SDv(6,128),e.qZA()()()(),e.TgZ(7,"div",11)(8,"div",82)(9,"div",125),e._UZ(10,"input",129),e.TgZ(11,"label",130),e.SDv(12,131),e.qZA()()()(),e.YNc(13,oi,9,4,"div",22),e.YNc(14,_i,7,1,"div",22),e.qZA()),2&n){const t=e.oxw(2);e.xp6(4),e.uIk("disabled",!t.s3VaultConfig||null),e.xp6(6),e.uIk("disabled",!t.kmsVaultConfig||null),e.xp6(3),e.Q6J("ngIf","aws:kms"===t.bucketForm.getValue("encryption_type")),e.xp6(1),e.Q6J("ngIf","aws:kms"===t.bucketForm.getValue("encryption_type"))}}function si(n,i){1&n&&(e.TgZ(0,"div",144)(1,"cd-alert-panel",145),e.SDv(2,146),e.qZA()())}function ai(n,i){if(1&n&&(e.TgZ(0,"div",14),e._UZ(1,"input",141),e.TgZ(2,"cd-help-text")(3,"span"),e.SDv(4,142),e.qZA()(),e.YNc(5,si,3,0,"div",143),e.qZA()),2&n){const t=i.ngIf,o=e.oxw(2);e.xp6(1),e.uIk("disabled",!t.isDefaultZg&&!t.status.available||null),e.xp6(4),e.Q6J("ngIf",!o.editing)}}function li(n,i){1&n&&e.GkF(0)}const ci=function(n,i){return{index:n,tag:i}};function ui(n,i){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,li,1,0,"ng-container",147),e.qZA()),2&n){const t=i.$implicit,o=i.index;e.oxw(2);const _=e.MAs(2);e.xp6(1),e.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",e.WLB(2,ci,o,t))}}function di(n,i){1&n&&(e.TgZ(0,"strong",148),e.SDv(1,149),e.qZA())}function fi(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,150),e.qZA())}function pi(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,158),e.qZA())}function gi(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,159),e.qZA())}const nt=function(n){return[n]};function Ti(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",11)(1,"label",44),e.tHW(2,151),e._UZ(3,"cd-helper"),e.N_p(),e.qZA(),e.TgZ(4,"div",14)(5,"textarea",152,153),e.NdJ("change",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.textAreaOnChange("lifecycleTextArea"))}),e._uU(7,"                  "),e.qZA(),e.YNc(8,pi,2,0,"span",16),e.YNc(9,gi,2,0,"span",16),e.TgZ(10,"button",154),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.clearTextArea("lifecycle","{}"))}),e.tHW(11,155),e._UZ(12,"i",41),e.N_p(),e.qZA(),e.TgZ(13,"div",50)(14,"button",156),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.openUrl("https://docs.aws.amazon.com/cli/latest/reference/s3api/put-bucket-lifecycle.html#examples"))}),e.tHW(15,157),e._UZ(16,"i",41),e.N_p(),e.qZA()()()()}if(2&n){e.oxw();const t=e.MAs(2),o=e.oxw();e.xp6(8),e.Q6J("ngIf",o.bucketForm.showError("lifecycle",t,"invalidJson")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("lifecycle",t,"invalidXml")),e.xp6(3),e.Q6J("ngClass",e.VKq(4,nt,o.icons.destroy)),e.xp6(4),e.Q6J("ngClass",e.VKq(6,nt,o.icons.externalUrl))}}function Ei(n,i){if(1&n&&(e.TgZ(0,"option",79),e.SDv(1,160),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.pQV(t),e.QtT(1)}}function Ri(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,161),e.qZA())}function mi(n,i){if(1&n&&(e.TgZ(0,"option",79),e.SDv(1,162),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.pQV(t),e.QtT(1)}}function Mi(n,i){1&n&&(e.TgZ(0,"span",67),e.SDv(1,163),e.qZA())}function Si(n,i){1&n&&(e.TgZ(0,"option",76),e.SDv(1,168),e.qZA()),2&n&&e.Q6J("ngValue",null)}function hi(n,i){1&n&&(e.TgZ(0,"option",76),e.SDv(1,169),e.qZA()),2&n&&e.Q6J("ngValue",null)}function Ci(n,i){if(1&n&&(e.TgZ(0,"option",79),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.name),e.xp6(1),e.Oqu(t.description)}}function Fi(n,i){if(1&n&&(e.TgZ(0,"cd-form-advanced-fieldset")(1,"div",11)(2,"label",164),e.SDv(3,165),e.qZA(),e.TgZ(4,"div",14)(5,"select",166),e.YNc(6,Si,2,1,"option",20),e.YNc(7,hi,2,1,"option",20),e.YNc(8,Ci,2,2,"option",21),e.qZA(),e.TgZ(9,"cd-help-text")(10,"span"),e.SDv(11,167),e.qZA()()()()()),2&n){const t=e.oxw(2);e.xp6(6),e.Q6J("ngIf",null===t.placementTargets),e.xp6(1),e.Q6J("ngIf",null!==t.placementTargets),e.xp6(1),e.Q6J("ngForOf",t.placementTargets)}}const Oi=function(n){return{required:n}},Ni=function(n,i){return{status:n,isDefaultZg:i}};function Pi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"form",4,5)(3,"div",6)(4,"div",7),e.SDv(5,8),e.ALo(6,"titlecase"),e.ALo(7,"upperFirst"),e.qZA(),e.TgZ(8,"div",9),e.YNc(9,No,5,0,"div",10),e.TgZ(10,"div",11)(11,"label",12),e.SDv(12,13),e.qZA(),e.TgZ(13,"div",14),e._UZ(14,"input",15),e.YNc(15,Po,2,0,"span",16),e.YNc(16,Ao,2,0,"span",16),e.YNc(17,bo,2,0,"span",16),e.YNc(18,Io,2,0,"span",16),e.YNc(19,Go,2,0,"span",16),e.YNc(20,yo,2,0,"span",16),e.YNc(21,Lo,2,0,"span",16),e.YNc(22,Do,2,0,"span",16),e.qZA()(),e.TgZ(23,"div",11)(24,"label",17),e.SDv(25,18),e.qZA(),e.TgZ(26,"div",14)(27,"select",19),e.YNc(28,vo,2,1,"option",20),e.YNc(29,wo,2,1,"option",20),e.YNc(30,Wo,2,2,"option",21),e.qZA(),e.YNc(31,$o,2,0,"span",16),e.qZA()(),e.YNc(32,Uo,12,0,"fieldset",22),e.YNc(33,zo,14,2,"fieldset",22),e.YNc(34,jo,19,4,"fieldset",22),e.TgZ(35,"fieldset")(36,"legend",23),e.SDv(37,24),e.qZA(),e.TgZ(38,"div",11)(39,"label",25),e.SDv(40,26),e.qZA(),e.TgZ(41,"div",14),e._UZ(42,"input",27),e.TgZ(43,"cd-help-text",28)(44,"span"),e.tHW(45,29),e.TgZ(46,"a",30),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.openConfigModal())}),e.qZA(),e.N_p(),e.qZA()()()(),e.YNc(47,ri,15,4,"div",22),e.qZA(),e.TgZ(48,"fieldset")(49,"legend",23),e.SDv(50,31),e.qZA(),e.TgZ(51,"div",11)(52,"label",32),e.SDv(53,33),e.qZA(),e.YNc(54,ai,6,2,"div",34),e.ALo(55,"async"),e.qZA()(),e.TgZ(56,"fieldset")(57,"legend",23),e.tHW(58,35),e._UZ(59,"cd-help-text"),e.N_p(),e.qZA(),e.YNc(60,ui,2,5,"span",36),e.TgZ(61,"div",37)(62,"div",38),e.YNc(63,di,2,0,"strong",39),e.TgZ(64,"button",40),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.showTagModal())}),e._UZ(65,"i",41),e.ynx(66),e.SDv(67,42),e.BQk(),e.qZA()()()(),e.TgZ(68,"fieldset")(69,"legend",23),e.SDv(70,43),e.qZA(),e.TgZ(71,"div",37)(72,"div",38)(73,"div",11)(74,"label",44),e.SDv(75,45),e.qZA(),e.TgZ(76,"div",14)(77,"textarea",46,47),e.NdJ("change",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.textAreaOnChange("bucketPolicyTextArea"))}),e._uU(79,"                  "),e.qZA(),e.YNc(80,fi,2,0,"span",16),e.TgZ(81,"button",48),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.clearTextArea("bucket_policy","{}"))}),e.tHW(82,49),e._UZ(83,"i",41),e.N_p(),e.qZA(),e.TgZ(84,"div",50)(85,"button",51),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.openUrl("https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-bucket-policies.html?icmpid=docs_amazons3_console"))}),e.tHW(86,52),e._UZ(87,"i",41),e.N_p(),e.qZA(),e.TgZ(88,"button",51),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.openUrl("https://awspolicygen.s3.amazonaws.com/policygen.html"))}),e.tHW(89,53),e._UZ(90,"i",41),e.N_p(),e.qZA()()()(),e.YNc(91,Ti,17,8,"div",10),e.TgZ(92,"div",11)(93,"label",54),e.tHW(94,55),e._UZ(95,"cd-helper"),e.N_p(),e.qZA(),e.TgZ(96,"div",14)(97,"div",56)(98,"span",57),e.tHW(99,58),e._UZ(100,"cd-helper"),e.N_p(),e.qZA(),e.TgZ(101,"select",59),e.NdJ("change",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.onSelectionFilter())}),e.YNc(102,Ei,2,2,"option",21),e.qZA(),e.YNc(103,Ri,2,0,"span",16),e.TgZ(104,"span",60),e.tHW(105,61),e._UZ(106,"cd-helper"),e.N_p(),e.qZA(),e.TgZ(107,"select",62),e.YNc(108,mi,2,2,"option",21),e.qZA(),e.YNc(109,Mi,2,0,"span",16),e.qZA()()()()()(),e.YNc(110,Fi,12,3,"cd-form-advanced-fieldset",22),e.qZA(),e.TgZ(111,"div",63)(112,"cd-form-button-panel",64),e.NdJ("submitActionEvent",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.submit())}),e.ALo(113,"titlecase"),e.ALo(114,"upperFirst"),e.qZA()()()()()}if(2&n){const t=e.MAs(2),o=e.oxw(),_=e.MAs(4);e.xp6(1),e.Q6J("formGroup",o.bucketForm),e.xp6(6),e.pQV(e.lcZ(6,43,o.action))(e.lcZ(7,45,o.resource)),e.QtT(5),e.xp6(2),e.Q6J("ngIf",o.editing),e.xp6(2),e.Q6J("ngClass",e.VKq(53,Oi,!o.editing)),e.xp6(3),e.Q6J("readonly",o.editing)("autofocus",!o.editing),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("bid",t,"required")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("bid",t,"bucketNameInvalid")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("bid",t,"bucketNameNotAllowed")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("bid",t,"containsUpperCase")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("bid",t,"lowerCaseOrNumber")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("bid",t,"ipAddress")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("bid",t,"onlyLowerCaseAndNumbers")),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("bid",t,"shouldBeInRange")),e.xp6(5),e.Q6J("autofocus",o.editing),e.xp6(1),e.Q6J("ngIf",null===o.owners),e.xp6(1),e.Q6J("ngIf",null!==o.owners),e.xp6(1),e.Q6J("ngForOf",o.owners),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("owner",t,"required")),e.xp6(1),e.Q6J("ngIf",o.editing),e.xp6(1),e.Q6J("ngIf",o.editing),e.xp6(1),e.Q6J("ngIf",!o.editing||o.editing&&o.bucketForm.getValue("lock_enabled")),e.xp6(8),e.uIk("disabled",!o.kmsVaultConfig&&!o.s3VaultConfig||null),e.xp6(5),e.Q6J("ngIf",o.bucketForm.getValue("encryption_enabled")),e.xp6(7),e.Q6J("ngIf",e.WLB(55,Ni,o.multisiteStatus$,e.lcZ(55,47,o.isDefaultZoneGroup$)))("ngIfElse",_),e.xp6(6),e.Q6J("ngForOf",o.tags),e.xp6(3),e.Q6J("ngIf",o.tags.length>19),e.xp6(1),e.Q6J("disabled",o.tags.length>19),e.xp6(1),e.Q6J("ngClass",e.VKq(58,nt,o.icons.add)),e.xp6(15),e.Q6J("ngIf",o.bucketForm.showError("bucket_policy",t,"invalidJson")),e.xp6(3),e.Q6J("ngClass",e.VKq(60,nt,o.icons.destroy)),e.xp6(4),e.Q6J("ngClass",e.VKq(62,nt,o.icons.externalUrl)),e.xp6(3),e.Q6J("ngClass",e.VKq(64,nt,o.icons.externalUrl)),e.xp6(1),e.Q6J("ngIf",o.editing),e.xp6(11),e.Q6J("ngForOf",o.grantees),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("grantee",t,"required")),e.xp6(5),e.Q6J("ngForOf",o.aclPermissions),e.xp6(1),e.Q6J("ngIf",o.bucketForm.showError("aclPermission",t,"required")),e.xp6(1),e.Q6J("ngIf",!o.editing),e.xp6(2),e.Q6J("form",o.bucketForm)("submitText",e.lcZ(113,49,o.action)+" "+e.lcZ(114,51,o.resource))}}function Ai(n,i){if(1&n&&(e.ynx(0),e._UZ(1,"input",173),e.BQk()),2&n){const t=i.$implicit,o=e.oxw(),_=o.index,E=o.tag;e.xp6(1),e.hYB("id","tag-",t.attribute,"-",_,""),e.Q6J("ngbTooltip",t.attribute)("value",E[t.attribute])}}function bi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",170),e.YNc(1,Ai,2,4,"ng-container",36),e.TgZ(2,"button",171),e.NdJ("click",function(){const E=e.CHM(t).index,U=e.oxw();return e.KtG(U.showTagModal(E))}),e._UZ(3,"i",41),e.qZA(),e.TgZ(4,"button",172),e.NdJ("click",function(){const E=e.CHM(t).index,U=e.oxw();return e.KtG(U.deleteTag(E))}),e._UZ(5,"i",41),e.qZA()()}if(2&n){const t=i.index,o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.tagConfig),e.xp6(1),e.MGl("id","tag-edit-",t,""),e.xp6(1),e.Q6J("ngClass",e.VKq(5,nt,o.icons.edit)),e.xp6(1),e.MGl("id","tag-delete-",t,""),e.xp6(1),e.Q6J("ngClass",e.VKq(7,nt,o.icons.trash))}}function Ii(n,i){1&n&&(e.TgZ(0,"div",14)(1,"cd-loading-panel"),e.SDv(2,174),e.qZA()())}let Nn=(()=>{class n extends ie.E{get isVersioningEnabled(){return this.bucketForm.getValue("versioning")}get isMfaDeleteEnabled(){return this.bucketForm.getValue("mfa-delete")}constructor(t,o,_,E,U,H,K,Q,te,Te,pe,de,Oe,ge,ve){super(),this.route=t,this.router=o,this.formBuilder=_,this.rgwBucketService=E,this.rgwSiteService=U,this.modalService=H,this.rgwUserService=K,this.notificationService=Q,this.rgwEncryptionModal=te,this.textAreaJsonFormatterService=Te,this.textAreaXmlFormatterService=pe,this.actionLabels=de,this.changeDetectorRef=Oe,this.rgwMultisiteService=ge,this.rgwDaemonService=ve,this.editing=!1,this.owners=null,this.kmsProviders=null,this.placementTargets=[],this.isVersioningAlreadyEnabled=!1,this.isMfaDeleteAlreadyEnabled=!1,this.icons=q.P,this.kmsVaultConfig=!1,this.s3VaultConfig=!1,this.tags=[],this.dirtyTags=!1,this.tagConfig=[{attribute:"key"},{attribute:"value"}],this.grantees=[Ie.Owner,Ie.Everyone,Ie.AuthenticatedUsers],this.aclPermissions=[ue.FullControl],this.editing=this.router.url.startsWith(`/rgw/bucket/${T.MQ.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource="bucket",this.createForm()}ngAfterViewChecked(){this.changeDetectorRef.detectChanges(),this.textAreaOnChange(this.bucketPolicyTextArea),this.textAreaOnChange(this.lifecycleTextArea)}createForm(){const t=this,o=oe.hq.custom("lockDays",()=>{if(!t.bucketForm||!R().get(t.bucketForm.getRawValue(),"lock_enabled"))return!1;const _=Number(t.bucketForm.getValue("lock_retention_period_days"));return!Number.isInteger(_)||0===_});this.bucketForm=this.formBuilder.group({id:[null],bid:[null,[r.kI.required],this.editing?[]:[oe.hq.bucketName(),oe.hq.bucketExistence(!1,this.rgwBucketService)]],owner:[null,[r.kI.required]],kms_provider:["vault"],"placement-target":[null],versioning:[null],"mfa-delete":[null],"mfa-token-serial":[""],"mfa-token-pin":[""],lock_enabled:[{value:!1,disabled:this.editing}],encryption_enabled:[null],encryption_type:[null,[oe.hq.requiredIf({encryption_enabled:!0})]],keyId:[null,[oe.hq.requiredIf({encryption_type:"aws:kms",encryption_enabled:!0})]],lock_mode:["COMPLIANCE"],lock_retention_period_days:[10,[oe.hq.number(!1),o]],bucket_policy:["{}",oe.hq.json()],lifecycle:["{}",oe.hq.jsonOrXml()],grantee:[Ie.Owner,[r.kI.required]],aclPermission:[[ue.FullControl],[r.kI.required]],replication:[!1]})}ngOnInit(){const t={owners:this.rgwUserService.enumerate()};this.multisiteStatus$=this.rgwMultisiteService.status(),this.isDefaultZoneGroup$=this.rgwDaemonService.selectedDaemon$.pipe((0,an.w)(o=>this.rgwSiteService.get("default-zonegroup").pipe((0,ln.U)(_=>o.zonegroup_id===_)))),this.kmsProviders=this.rgwEncryptionModal.kmsProviders,this.rgwBucketService.getEncryptionConfig().subscribe(o=>{this.kmsVaultConfig=o[0],this.s3VaultConfig=o[1],this.kmsVaultConfig&&this.s3VaultConfig?this.bucketForm.get("encryption_type").setValue(""):this.kmsVaultConfig?this.bucketForm.get("encryption_type").setValue("aws:kms"):this.s3VaultConfig?this.bucketForm.get("encryption_type").setValue("AES256"):this.bucketForm.get("encryption_type").setValue("")}),this.editing||(t.getPlacementTargets=this.rgwSiteService.get("placement-targets")),this.route.params.subscribe(o=>{if(o.hasOwnProperty("bid")){const _=decodeURIComponent(o.bid);t.getBid=this.rgwBucketService.get(_)}(0,y.D)(t).subscribe(_=>{if(this.owners=_.owners.sort(),_.getPlacementTargets){const E=_.getPlacementTargets;this.zonegroup=E.zonegroup,R().forEach(E.placement_targets,U=>{U.description=`${U.name} (${"pool"}: ${U.data_pool})`,this.placementTargets.push(U)}),1===this.placementTargets.length&&this.bucketForm.get("placement-target").setValue(this.placementTargets[0].name)}if(_.getBid){const E=_.getBid,U=R().clone(this.bucketForm.getRawValue());let H=R().pick(E,R().keys(U));if(H.lock_retention_period_days=this.rgwBucketService.getLockDays(E),H["placement-target"]=E.placement_rule,H.versioning=E.versioning===Ee.ENABLED,H["mfa-delete"]=E.mfa_delete===Ne.ENABLED,H.encryption_enabled="Enabled"===E.encryption,E.tagset)for(const[K,Q]of Object.entries(E.tagset))this.tags.push({key:K,value:Q.toString()});H=R().merge(U,H),this.editing&&([H.grantee,H.aclPermission]=this.aclXmlToFormValues(E.acl,E.owner),H.lifecycle=JSON.stringify(E.lifecycle||{})),this.bucketForm.setValue(H),this.editing&&(this.isVersioningAlreadyEnabled=this.isVersioningEnabled,this.isMfaDeleteAlreadyEnabled=this.isMfaDeleteEnabled,this.setMfaDeleteValidators(),H.lock_enabled&&this.bucketForm.controls.versioning.disable(),H.bucket_policy&&this.bucketForm.get("bucket_policy").setValue(JSON.stringify(H.bucket_policy,null,2)),H.replication&&("Enabled"===H.replication?.Rule?.Status?this.bucketForm.get("replication").setValue(!0):this.bucketForm.get("replication").setValue(!1)),this.filterAclPermissions())}this.loadingReady()})})}goToListView(){this.router.navigate(["/rgw/bucket"])}submit(){if(this.bucketForm.pristine)return void this.goToListView();if(this.bucketForm.pending)return void this.bucketForm.setErrors({cdSubmitButton:!0});null==this.bucketForm.getValue("encryption_enabled")&&(this.bucketForm.get("encryption_enabled").setValue(!1),this.bucketForm.get("encryption_type").setValue(null));const t=this.bucketForm.value,o=this.tagsToXML(this.tags),_=this.getBucketPolicy(),E=this.permissionToCannedAcl();if(this.editing){const U=this.getVersioningStatus(),H=this.getMfaDeleteStatus();this.rgwBucketService.update(t.bid,t.id,t.owner,U,t.encryption_enabled,t.encryption_type,t.keyId,H,t["mfa-token-serial"],t["mfa-token-pin"],t.lock_mode,t.lock_retention_period_days,o,_,E,t.replication,t.lifecycle).subscribe(()=>{this.notificationService.show(J.k.success,"Updated Object Gateway bucket '\n          " + t.bid + "'.\n        "),this.goToListView()},()=>{this.bucketForm.setErrors({cdSubmitButton:!0})})}else this.rgwBucketService.create(t.bid,t.owner,this.zonegroup,t["placement-target"],t.lock_enabled,t.lock_mode,t.lock_retention_period_days,t.encryption_enabled,t.encryption_type,t.keyId,o,_,E,t.replication).subscribe(()=>{this.notificationService.show(J.k.success,"Created Object Gateway bucket '\n          " + t.bid + "'\n        "),this.goToListView()},()=>{this.bucketForm.setErrors({cdSubmitButton:!0})})}areMfaCredentialsRequired(){return this.isMfaDeleteEnabled!==this.isMfaDeleteAlreadyEnabled||this.isMfaDeleteAlreadyEnabled&&this.isVersioningEnabled!==this.isVersioningAlreadyEnabled}setMfaDeleteValidators(){const t=this.bucketForm.get("mfa-token-serial"),o=this.bucketForm.get("mfa-token-pin");this.areMfaCredentialsRequired()?(t.setValidators(r.kI.required),o.setValidators(r.kI.required)):(t.setValidators(null),o.setValidators(null)),t.updateValueAndValidity(),o.updateValueAndValidity()}getVersioningStatus(){return this.isVersioningEnabled?Ee.ENABLED:Ee.SUSPENDED}getMfaDeleteStatus(){return this.isMfaDeleteEnabled?Ne.ENABLED:Ne.DISABLED}getBucketPolicy(){return this.bucketForm.getValue("bucket_policy")||"{}"}fileUpload(t,o){const _=t[0];(new FileReader).addEventListener("load",()=>{const U=this.bucketForm.get(o);U.setValue(_),U.markAsDirty(),U.markAsTouched(),U.updateValueAndValidity()})}textAreaOnChange(t){t?.nativeElement?.value?.startsWith?.("<")?this.textAreaXmlFormatterService.format(t):this.textAreaJsonFormatterService.format(t)}openUrl(t){window.open(t,"_blank")}clearTextArea(t,o=""){this.bucketForm.get(t).setValue(o),this.bucketForm.markAsDirty(),this.bucketForm.updateValueAndValidity()}openConfigModal(){this.modalService.show(fo,null,{size:"lg"}).componentInstance.configForm.get("encryptionType").setValue(this.bucketForm.getValue("encryption_type")||"AES256")}showTagModal(t){const _=this.modalService.show(mo).componentInstance;_.currentKeyTags=this.tags.map(E=>E.key),R().isNumber(t)&&(_.editMode=!0,_.fillForm(this.tags[t]),_.storedKey=this.tags[t].key),_.submitAction.subscribe(E=>{this.setTag(E,t)})}deleteTag(t){this.tags.splice(t,1),this.dirtyTags=!0,this.bucketForm.markAsDirty(),this.bucketForm.updateValueAndValidity()}setTag(t,o){R().isNumber(o)?this.tags[o]=t:this.tags.push(t),this.dirtyTags=!0,this.bucketForm.markAsDirty(),this.bucketForm.updateValueAndValidity()}tagsToXML(t){if(!this.dirtyTags&&0===t.length)return"";let o="<Tagging><TagSet>";for(const _ of t){o+="<Tag>";for(const E in _)"key"===E?o+=`<Key>${_[E]}</Key>`:"value"===E&&(o+=`<Value>${_[E]}</Value>`);o+="</Tag>"}return o+="</TagSet></Tagging>",o}aclXmlToFormValues(t,o){const _=new I.Parser({explicitArray:!1,trim:!0});let E=ue.FullControl,U=Ie.Owner;return _.parseString(t,(H,K)=>{if(H)return null;const Q=K.AccessControlPolicy.AccessControlList.Grant;for(let te=0;te<Q.length;te++)Q[te].Grantee.ID!==o&&(Q[te].Grantee.URI&&Q[te].Grantee.URI.includes("AllUsers")?(U=Ie.Everyone,E="READ"===Q[te].Permission&&E!==ue.Write?ue.Read:" WRITE"===Q[te].Permission&&E!==ue.Read?ue.Write:ue.All):Q[te].Grantee.URI&&Q[te].Grantee.URI.includes("AuthenticatedUsers")&&(U=Ie.AuthenticatedUsers,E=ue.Read))}),[U,E]}onSelectionFilter(){this.filterAclPermissions(),this.bucketForm.get("aclPermission").setValue(this.aclPermissions[0])}filterAclPermissions(){switch(this.bucketForm.get("grantee").value){case Ie.Owner:this.aclPermissions=[ue.FullControl];break;case Ie.Everyone:this.aclPermissions=[ue.Read,ue.All];break;case Ie.AuthenticatedUsers:this.aclPermissions=[ue.Read]}}permissionToCannedAcl(){const t=this.bucketForm.get("grantee").value,o=this.bucketForm.get("aclPermission").value;switch(t){case Ie.Everyone:return o===ue.Read?"public-read":"public-read-write";case Ie.AuthenticatedUsers:return"authenticated-read";default:return"private"}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(N.gz),e.Y36(N.F0),e.Y36(Pe.O),e.Y36(L.o),e.Y36(k.I),e.Y36(Qe.Z),e.Y36(D),e.Y36(fe.g),e.Y36(ae),e.Y36(Mo.F),e.Y36(So),e.Y36(T.p4),e.Y36(e.sBO),e.Y36(et.o),e.Y36(z.b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-bucket-form"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Fo,5),e.Gf(Oo,5)),2&t){let _;e.iGM(_=e.CRH())&&(o.bucketPolicyTextArea=_.first),e.iGM(_=e.CRH())&&(o.lifecycleTextArea=_.first)}},features:[e._Bn([ae]),e.qOj],decls:5,vars:1,consts:function(){let i,t,o,_,E,U,H,K,Q,te,Te,pe,de,Oe,ge,ve,we,We,Re,$e,Ue,xe,Ze,ke,le,me,Se,qe,he,Fe,Rt,mt,Mt,St,ht,Ct,Ft,Ot,Nt,Pt,At,bt,It,Gt,yt,Lt,Dt,vt,wt,Wt,$t,Ut,xt,Zt,kt,Bt,zt,qt,Ht,Xt,Yt,Kt,Qt,Jt,Vt,jt,en,tn,nn,on,_n,rn,sn,se,io,_o,ro,so,ao,lo;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="Name",o="Nom...",_="Owner",E="Encryption",U=" Enable ",H="Enables encryption for the objects in the bucket. To enable encryption on a bucket you need to set the configuration values for SSE-S3 or SSE-KMS. To set the configuration values " + "\ufffd#46\ufffd" + "Click here" + "\ufffd/#46\ufffd" + "",K="Replication",Q=" Enable ",te="Tags " + "\ufffd#59\ufffd" + "Tagging provides a way to categorize storage" + "\ufffd/#59\ufffd" + "",Te="Add tag",pe="Policies ",de="Bucket policy",Oe="" + "\ufffd#83\ufffd" + "" + "\ufffd/#83\ufffd" + " Clear ",ge="" + "\ufffd#87\ufffd" + "" + "\ufffd/#87\ufffd" + " Policy examples ",ve="" + "\ufffd#90\ufffd" + "" + "\ufffd/#90\ufffd" + " Policy generator ",we="ACL " + "\ufffd#95\ufffd" + "Any changes to the ACL will overwrite previous one. You can choose any of the available options to modify the spcified user group." + "\ufffd/#95\ufffd" + "",We="Grantee " + "\ufffd#100\ufffd" + "Select a grantee (user group) to modify it's permisions" + "\ufffd/#100\ufffd" + "",Re="Permissions " + "\ufffd#106\ufffd" + "Select the permision to give to the selected grantee. Regardless, the owner of the bucket will always have FULL CONTROL access" + "\ufffd/#106\ufffd" + "",$e="ID",Ue="This field is required.",xe="Bucket names can only contain lowercase letters, numbers, periods and hyphens.",Ze="Le nom s\xE9lectionn\xE9 est d\xE9j\xE0 en cours d'utilisation.",ke="Bucket names must not contain uppercase characters or underscores.",le="Each label must start and end with a lowercase letter or a number.",me="Bucket names cannot be formatted as IP address.",Se="Bucket labels cannot be empty and can only contain lowercase letters, numbers and hyphens.",qe="Bucket names must be 3 to 63 characters long.",he="Chargement...",Fe="-- S\xE9lectionner un utilisateur --",Rt="This field is required.",mt="Versioning",Mt="Enabled",St="Enables versioning for the objects in the bucket.",ht="Multi-Factor Authentication",Ct="Delete enabled",Ft="Enables MFA (multi-factor authentication) Delete, which requires additional authentication for changing the bucket versioning state.",Ot="Token Serial Number",Nt="This field is required.",Pt="Token PIN",At="This field is required.",bt=" Object Locking " + "\ufffd#3\ufffd" + " Store objects using a write-once-read-many (WORM) model to prevent objects from being deleted or overwritten for a fixed amount of time or indefinitely. Object Locking works only in versioned buckets. " + "\ufffd/#3\ufffd" + "",It=" Enable ",Gt="Enables locking for the objects in the bucket. Locking can only be enabled while creating a bucket.",yt="Mode",Lt=" Compliance ",Dt=" Governance ",vt=" In COMPLIANCE an object version cannot be overwritten or deleted for the duration of the period. ",wt=" In GOVERNANCE mode, users cannot overwrite or delete an object version or alter its lock settings unless they have special permissions. ",Wt="Days",$t="The number of days that you want to specify for the default retention period that will be applied to new objects placed in this bucket.",Ut="The entered value must be a positive integer.",xt="Retention Days must be a positive integer.",Zt="SSE-S3 Encryption",kt="Connect to an external key management service",Bt="KMS Provider",zt="-- Select a provider --",qt="This field is required.",Ht="Key Id ",Xt="This field is required.",Yt="Enables replication for the objects in the bucket.",Kt=" A bi-directional sync policy group will be created by the dashboard along with flows and pipes. The pipe id will then be used for applying the replication policy to the bucket. ",Qt="Maximum of 20 tags reached",Jt="Invalid json text.",Vt="Lifecycle " + "\ufffd#3\ufffd" + "JSON or XML formatted document" + "\ufffd/#3\ufffd" + "",jt="" + "\ufffd#12\ufffd" + "" + "\ufffd/#12\ufffd" + " Clear ",en="" + "\ufffd#16\ufffd" + "" + "\ufffd/#16\ufffd" + " Policy examples ",tn="Invalid json text.",nn="Invalid xml text.",on="" + "\ufffd0\ufffd" + "",_n="This field is required.",rn="" + "\ufffd0\ufffd" + "",sn="This field is required.",se="Placement target",io=" When creating a bucket, a placement target can be provided as part of the LocationConstraint to override the default placement targets from the user and zonegroup. ",_o="Chargement...",ro="-- Select a placement target --",so="Edit",ao="Delete",lo="Checking multi-site status...",[["class","cd-col-form",4,"cdFormLoading"],["tagTpl",""],["loadingTpl",""],[1,"cd-col-form"],["name","bucketForm","novalidate","",3,"formGroup"],["frm","ngForm"],[1,"card"],[1,"card-header"],i,[1,"card-body"],["class","form-group row",4,"ngIf"],[1,"form-group","row"],["for","bid",1,"cd-col-form-label",3,"ngClass"],t,[1,"cd-col-form-input"],["id","bid","name","bid","type","text","placeholder",o,"formControlName","bid",1,"form-control",3,"readonly","autofocus"],["class","invalid-feedback",4,"ngIf"],["for","owner",1,"cd-col-form-label","required"],_,["id","owner","name","owner","formControlName","owner",1,"form-select",3,"autofocus"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"cd-header"],E,["for","encryption_enabled",1,"cd-col-form-label","pt-0"],U,["id","encryption_enabled","name","encryption_enabled","formControlName","encryption_enabled","type","checkbox",1,"form-check-input"],["aria-label","encryption helper"],H,["href","#/rgw/bucket/create","aria-label","click here",3,"click"],K,["for","replication",1,"cd-col-form-label","pt-0"],Q,["class","cd-col-form-input",4,"ngIf","ngIfElse"],te,[4,"ngFor","ngForOf"],[1,"row"],[1,"col-12"],["class","text-warning",4,"ngIf"],["type","button","id","add-tag",1,"btn","btn-light","float-end","my-3",3,"disabled","click"],[3,"ngClass"],Te,pe,["for","id",1,"cd-col-form-label"],de,["id","bucket_policy","formControlName","bucket_policy",1,"form-control","resize-vertical",3,"change"],["bucketPolicyTextArea",""],["type","button","id","clear-bucket-policy",1,"btn","btn-light","my-3",3,"click"],Oe,["role","group","aria-label","bucket-policy-helpers",1,"btn-group","float-end"],["type","button","id","example-generator-button",1,"btn","btn-light","my-3",3,"click"],ge,ve,[1,"cd-col-form-label"],we,[1,"input-group"],["for","grantee",1,"input-group-text"],We,["id","grantee","name","grantee","formControlName","grantee",1,"form-input","form-select",3,"change"],["for","aclPermission",1,"input-group-text"],Re,["id","aclPermission","name","aclPermission","formControlName","aclPermission",1,"form-input","form-select"],[1,"card-footer"],["wrappingClass","text-right",3,"form","submitText","submitActionEvent"],$e,["id","id","name","id","type","text","formControlName","id","readonly","",1,"form-control"],[1,"invalid-feedback"],Ue,xe,Ze,ke,le,me,Se,qe,[3,"ngValue"],he,Fe,[3,"value"],Rt,mt,[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","versioning","name","versioning","formControlName","versioning",1,"custom-control-input",3,"change"],["for","versioning",1,"custom-control-label"],Mt,St,ht,["type","checkbox","id","mfa-delete","name","mfa-delete","formControlName","mfa-delete",1,"custom-control-input",3,"change"],["for","mfa-delete",1,"custom-control-label"],Ct,Ft,["for","mfa-token-serial",1,"cd-col-form-label"],Ot,["type","text","id","mfa-token-serial","name","mfa-token-serial","formControlName","mfa-token-serial",1,"form-control"],Nt,["for","mfa-token-pin",1,"cd-col-form-label"],Pt,["type","text","id","mfa-token-pin","name","mfa-token-pin","formControlName","mfa-token-pin",1,"form-control"],At,bt,["for","lock_enabled",1,"cd-col-form-label","pt-0"],It,["id","lock_enabled","formControlName","lock_enabled","type","checkbox",1,"form-check-input"],Gt,["type","info","class","me-1",4,"ngIf"],["type","warning",4,"ngIf"],["for","lock_mode",1,"cd-col-form-label"],yt,["formControlName","lock_mode","name","lock_mode","id","lock_mode",1,"form-select"],["value","COMPLIANCE"],Lt,["value","GOVERNANCE"],Dt,vt,wt,["for","lock_retention_period_days",1,"cd-col-form-label"],Wt,["type","number","id","lock_retention_period_days","formControlName","lock_retention_period_days","min","1",1,"form-control"],$t,Ut,xt,["type","info",1,"me-1"],["type","warning"],[1,"custom-control","custom-radio","custom-control-inline","ps-5"],["formControlName","encryption_type","id","sse_S3_enabled","type","radio","name","encryption_type","value","AES256",1,"form-check-input"],["for","sse_S3_enabled",1,"form-control-label"],Zt,["formControlName","encryption_type","id","kms_enabled","name","encryption_type","value","aws:kms","type","radio",1,"form-check-input"],["for","kms_enabled",1,"form-control-label"],kt,["for","kms_provider",1,"cd-col-form-label","required"],Bt,["id","kms_provider","name","kms_provider","formControlName","kms_provider",1,"form-select",3,"autofocus"],zt,qt,["for","keyId",1,"cd-col-form-label","required"],Ht,["id","keyId","name","keyId","type","text","formControlName","keyId",1,"form-control"],Xt,["type","checkbox","id","replication","name","replication","formControlName","replication",1,"form-check-input"],Yt,["class","mt-1",4,"ngIf"],[1,"mt-1"],["type","info","id","replication-info",1,"me-1"],Kt,[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"text-warning"],Qt,Jt,Vt,["id","lifecycle","formControlName","lifecycle",1,"form-control","resize-vertical",3,"change"],["lifecycleTextArea",""],["type","button","id","clear-lifecycle",1,"btn","btn-light","my-3",3,"click"],jt,["type","button","id","lifecycle-examples-button",1,"btn","btn-light","my-3",3,"click"],en,tn,nn,on,_n,rn,sn,["for","placement-target",1,"cd-col-form-label"],se,["id","placement-target","name","placement-target","formControlName","placement-target",1,"form-select"],io,_o,ro,[1,"input-group","my-2"],["type","button","ngbTooltip",so,1,"btn","btn-light",3,"id","click"],["type","button","ngbTooltip",ao,1,"btn","btn-light",3,"id","click"],["type","text","disabled","","readonly","",1,"form-control",3,"id","ngbTooltip","value"],lo]},template:function(t,o){1&t&&(e.YNc(0,Pi,115,66,"div",0),e.YNc(1,bi,6,9,"ng-template",null,1,e.W1O),e.YNc(3,Ii,3,0,"ng-template",null,2,e.W1O)),2&t&&e.Q6J("cdFormLoading",o.loading)},dependencies:[g.mk,g.sg,g.O5,g.tP,ze.S,ho.b,tt.G,be.p,fn.t,Co.B,ut.U,pn.y,Ge.o,O.b,l.P,w.V,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.Wl,r.EJ,r._,r.JJ,r.JL,r.qQ,r.sg,r.u,b._L,g.Ov,g.rS,Je.m]}),n})();var dt=p(70882),cn=p(68136),st=p(30982),Ve=p(83697),ot=p(68774),gn=p(47557),Pn=p(66369),it=p(51847),rt=p(47640),An=p(60251),ft=p(94928),Tn=p(59376),bn=p(68962),Gi=p(96102);let yi=(()=>{class n{constructor(){}format(t,o=2,_=0){if(!t)return null;let E="";"string"==typeof t&&(t=JSON.parse(t));for(const U in t)if(t.hasOwnProperty(U)){const H=t[U],K=" ".repeat(_);Array.isArray(H)?H.forEach(Q=>{E+=`${K}<${U}>\n`+this.format(Q,o,_+o)+`${K}</${U}>\n`}):E+="object"==typeof H?`${K}<${U}>\n`+this.format(H,o,_+o)+`${K}</${U}>\n`:`${K}<${U}>${H}</${U}>\n`}return E}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Li=(()=>{class n{constructor(t){this.jsonToXmlService=t}transform(t,o="json"){return"json"===o&&(t=this.jsonToXmlService.format(t)),t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(yi,16))},n.\u0275pipe=e.Yjl({name:"xml",type:n,pure:!0}),n})();function Di(n,i){1&n&&(e.TgZ(0,"td"),e.SDv(1,27),e.qZA())}function vi(n,i){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"dimless"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.selection.bucket_quota.max_size)," ")}}function wi(n,i){1&n&&(e.TgZ(0,"td"),e.SDv(1,28),e.qZA())}function Wi(n,i){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.selection.bucket_quota.max_objects," ")}}function $i(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",14),e.SDv(3,25),e.qZA(),e.YNc(4,Di,2,0,"td",0),e.YNc(5,vi,3,3,"td",0),e.qZA(),e.TgZ(6,"tr")(7,"td",14),e.SDv(8,26),e.qZA(),e.YNc(9,wi,2,0,"td",0),e.YNc(10,Wi,2,1,"td",0),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(4),e.Q6J("ngIf",t.selection.bucket_quota.max_size<=-1),e.xp6(1),e.Q6J("ngIf",t.selection.bucket_quota.max_size>-1),e.xp6(4),e.Q6J("ngIf",t.selection.bucket_quota.max_objects<=-1),e.xp6(1),e.Q6J("ngIf",t.selection.bucket_quota.max_objects>-1)}}function Ui(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",14),e.SDv(3,29),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()(),e.TgZ(6,"tr")(7,"td",14),e.SDv(8,30),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA()(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(5),e.Oqu(t.selection.lock_mode),e.xp6(5),e.Oqu(t.selection.lock_retention_period_days)}}function xi(n,i){if(1&n&&(e.TgZ(0,"tr")(1,"td",11),e.SDv(2,33),e.qZA(),e.TgZ(3,"td",13),e._uU(4),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.pQV(t.key),e.QtT(2),e.xp6(2),e.Oqu(t.value)}}function Zi(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"legend"),e.SDv(2,31),e.qZA(),e.TgZ(3,"table",10)(4,"tbody"),e.YNc(5,xi,5,2,"tr",32),e.ALo(6,"keyvalue"),e.qZA()(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(5),e.Q6J("ngForOf",e.lcZ(6,1,t.selection.tagset))}}function ki(n,i){if(1&n&&(e.TgZ(0,"table",10)(1,"tbody")(2,"tr")(3,"td",11),e.SDv(4,12),e.qZA(),e.TgZ(5,"td",13),e._uU(6),e.qZA()(),e.TgZ(7,"tr")(8,"td",14),e.SDv(9,15),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA()(),e.TgZ(12,"tr")(13,"td",14),e.SDv(14,16),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA()(),e.TgZ(17,"tr")(18,"td",14),e.SDv(19,17),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA()(),e.TgZ(22,"tr")(23,"td",14),e.SDv(24,18),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA()(),e.TgZ(27,"tr")(28,"td",14),e.SDv(29,19),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.qZA()(),e.TgZ(32,"tr")(33,"td",14),e.SDv(34,20),e.qZA(),e.TgZ(35,"td"),e._uU(36),e.ALo(37,"cdDate"),e.qZA()()()(),e.TgZ(38,"div")(39,"legend"),e.SDv(40,21),e.qZA(),e.TgZ(41,"table",10)(42,"tbody")(43,"tr")(44,"td",11),e.SDv(45,22),e.qZA(),e.TgZ(46,"td",13),e._uU(47),e.ALo(48,"booleanText"),e.qZA()(),e.YNc(49,$i,11,4,"ng-container",0),e.qZA()()(),e.TgZ(50,"legend"),e.SDv(51,23),e.qZA(),e.TgZ(52,"table",10)(53,"tbody")(54,"tr")(55,"td",11),e.SDv(56,24),e.qZA(),e.TgZ(57,"td",13),e._uU(58),e.ALo(59,"booleanText"),e.qZA()(),e.YNc(60,Ui,11,2,"ng-container",0),e.qZA()(),e.YNc(61,Zi,7,3,"ng-container",0),e.ALo(62,"keyvalue")),2&n){const t=e.oxw(2);let o;e.xp6(6),e.Oqu(t.selection.versioning),e.xp6(5),e.Oqu(t.selection.encryption),e.xp6(5),e.Oqu(t.replicationStatus),e.xp6(5),e.Oqu(t.selection.mfa_delete),e.xp6(5),e.Oqu(t.selection.index_type),e.xp6(5),e.Oqu(t.selection.placement_rule),e.xp6(5),e.Oqu(e.lcZ(37,12,t.selection.mtime)),e.xp6(11),e.Oqu(e.lcZ(48,14,t.selection.bucket_quota.enabled)),e.xp6(2),e.Q6J("ngIf",t.selection.bucket_quota.enabled),e.xp6(9),e.Oqu(e.lcZ(59,16,t.selection.lock_enabled)),e.xp6(2),e.Q6J("ngIf",t.selection.lock_enabled),e.xp6(1),e.Q6J("ngIf",null==(o=e.lcZ(62,18,t.selection.tagset))?null:o.length)}}const In=function(n){return{active:n}};function Bi(n,i){if(1&n){const t=e.EpF();e.tHW(0,36,1),e.TgZ(1,"div",45)(2,"button",46),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(3);return e.KtG(_.lifecycleFormat="json")}),e.qZA(),e.TgZ(3,"button",46),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(3);return e.KtG(_.lifecycleFormat="xml")}),e.qZA()(),e.N_p()}if(2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("ngClass",e.VKq(2,In,"json"===t.lifecycleFormat)),e.xp6(1),e.Q6J("ngClass",e.VKq(4,In,"xml"===t.lifecycleFormat))}}function zi(n,i){if(1&n&&(e.TgZ(0,"pre"),e._uU(1),e.ALo(2,"json"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(e.lcZ(2,1,t.selection.lifecycle))}}function qi(n,i){if(1&n&&(e.TgZ(0,"pre"),e._uU(1),e.ALo(2,"xml"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(e.lcZ(2,1,t.selection.lifecycle)||"-")}}function Hi(n,i){if(1&n&&(e.TgZ(0,"div",34)(1,"table",10)(2,"tbody")(3,"tr")(4,"td",11),e.SDv(5,35),e.qZA(),e.TgZ(6,"td")(7,"pre"),e._uU(8),e.ALo(9,"json"),e.qZA()()(),e.TgZ(10,"tr")(11,"div")(12,"td",11),e.tHW(13,36),e.YNc(14,Bi,4,6,"div",37),e.ALo(15,"json"),e.N_p(),e.qZA()(),e.TgZ(16,"td"),e.YNc(17,zi,3,3,"pre",0),e.YNc(18,qi,3,3,"pre",0),e.qZA()(),e.TgZ(19,"tr")(20,"td",11),e.SDv(21,38),e.qZA(),e.TgZ(22,"td")(23,"pre"),e._uU(24),e.ALo(25,"json"),e.qZA()()(),e.TgZ(26,"tr")(27,"td",11),e.SDv(28,39),e.qZA(),e.TgZ(29,"td")(30,"table",40)(31,"thead")(32,"tr"),e.tHW(33,41),e._UZ(34,"th")(35,"th"),e.N_p(),e.qZA()(),e.TgZ(36,"tbody")(37,"tr"),e.tHW(38,42),e._UZ(39,"td")(40,"td"),e.N_p(),e.qZA(),e.TgZ(41,"tr"),e.tHW(42,43),e._UZ(43,"td")(44,"td"),e.N_p(),e.qZA(),e.TgZ(45,"tr"),e.tHW(46,44),e._UZ(47,"td")(48,"td"),e.N_p(),e.qZA()()()()()()()()),2&n){const t=e.oxw(2);e.xp6(8),e.Oqu(e.lcZ(9,8,t.selection.bucket_policy)),e.xp6(6),e.Q6J("ngIf","{}"!==e.lcZ(15,10,t.selection.lifecycle)),e.xp6(3),e.Q6J("ngIf","json"===t.lifecycleFormat),e.xp6(1),e.Q6J("ngIf","xml"===t.lifecycleFormat),e.xp6(6),e.Oqu(e.lcZ(25,12,t.selection.replication)),e.xp6(16),e.pQV(t.aclPermissions.Owner||"-"),e.QtT(38),e.xp6(4),e.pQV(t.aclPermissions.AllUsers||"-"),e.QtT(42),e.xp6(4),e.pQV(t.aclPermissions.AuthenticatedUsers||"-"),e.QtT(46)}}function Xi(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"nav",1,2),e.ynx(3,3),e.TgZ(4,"a",4),e.SDv(5,5),e.qZA(),e.YNc(6,ki,63,20,"ng-template",6),e.BQk(),e.ynx(7,7),e.TgZ(8,"a",4),e.SDv(9,8),e.qZA(),e.YNc(10,Hi,49,14,"ng-template",6),e.BQk(),e.qZA(),e._UZ(11,"div",9),e.BQk()),2&n){const t=e.MAs(2);e.xp6(11),e.Q6J("ngbNavOutlet",t)}}let Yi=(()=>{class n{constructor(t){this.rgwBucketService=t,this.lifecycleFormat="json",this.aclPermissions={},this.replicationStatus="Disabled"}ngOnChanges(){this.selection&&this.rgwBucketService.get(this.selection.bid).subscribe(t=>{t.lock_retention_period_days=this.rgwBucketService.getLockDays(t),this.selection=t,"json"===this.lifecycleFormat&&!this.selection.lifecycle&&(this.selection.lifecycle={}),this.aclPermissions=this.parseXmlAcl(this.selection.acl,this.selection.owner),this.selection.replication?.Rule?.Status&&(this.replicationStatus=this.selection.replication?.Rule?.Status)})}parseXmlAcl(t,o){const _=new I.Parser({explicitArray:!1,trim:!0});let E={Owner:["-"],AllUsers:["-"],AuthenticatedUsers:["-"]};return _.parseString(t,(U,H)=>{if(U)return null;const K=H.AccessControlPolicy.AccessControlList.Grant;if(Array.isArray(K))for(let Q=0;Q<K.length;Q++){const te=K[Q];if(te?.Grantee?.URI){const Te=te.Grantee.URI.split("/").pop();E[Te].includes("-")?E[Te]=[te?.Permission]:E[Te].push(te?.Permission)}te?.Grantee?.ID&&o===te?.Grantee?.ID&&(E.Owner=te?.Permission)}else K?.Grantee?.ID&&o===K?.Grantee?.ID&&(E.Owner=K?.Permission)}),E}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(L.o))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-bucket-details"]],inputs:{selection:"selection"},features:[e.TTD],decls:1,vars:1,consts:function(){let i,t,o,_,E,U,H,K,Q,te,Te,pe,de,Oe,ge,ve,we,We,Re,$e,Ue,xe,Ze,ke,le,me,Se,qe,he;return i="D\xE9tails",t="Policies",o="Versioning",_="Encryption",E="Replication",U="MFA Delete",H="Type d'index",K="R\xE8gle de placement",Q="Last modification time",te="Quota de compartiments",Te="Enabled",pe="Locking",de="Enabled",Oe="Taille maximale",ge="Nombre maximal d'objets",ve="Unlimited",we="Unlimited",We="Mode",Re="Days",$e="Balises",Ue="" + "\ufffd0\ufffd" + "",xe="Bucket policy",Ze="Replication policy",ke="ACL",le="" + "[\ufffd#34\ufffd|\ufffd#35\ufffd]" + "Grantee" + "[\ufffd/#34\ufffd|\ufffd/#35\ufffd]" + "" + "[\ufffd#34\ufffd|\ufffd#35\ufffd]" + "Permissions" + "[\ufffd/#34\ufffd|\ufffd/#35\ufffd]" + "",le=e.Zx4(le),me="" + "[\ufffd#39\ufffd|\ufffd#40\ufffd]" + "Bucket Owner" + "[\ufffd/#39\ufffd|\ufffd/#40\ufffd]" + "" + "[\ufffd#39\ufffd|\ufffd#40\ufffd]" + "" + "\ufffd0\ufffd" + "" + "[\ufffd/#39\ufffd|\ufffd/#40\ufffd]" + "",me=e.Zx4(me),Se="" + "[\ufffd#43\ufffd|\ufffd#44\ufffd]" + "Everyone" + "[\ufffd/#43\ufffd|\ufffd/#44\ufffd]" + "" + "[\ufffd#43\ufffd|\ufffd#44\ufffd]" + "" + "\ufffd0\ufffd" + "" + "[\ufffd/#43\ufffd|\ufffd/#44\ufffd]" + "",Se=e.Zx4(Se),qe="" + "[\ufffd#47\ufffd|\ufffd#48\ufffd]" + "Authenticated users group" + "[\ufffd/#47\ufffd|\ufffd/#48\ufffd]" + "" + "[\ufffd#47\ufffd|\ufffd#48\ufffd]" + "" + "\ufffd0\ufffd" + "" + "[\ufffd/#47\ufffd|\ufffd/#48\ufffd]" + "",qe=e.Zx4(qe),he="Lifecycle " + "\ufffd*14:1\ufffd\ufffd#1:1\ufffd" + "" + "\ufffd#2:1\ufffd" + " JSON " + "[\ufffd/#2:1\ufffd|\ufffd/#3:1\ufffd]" + "" + "\ufffd#3:1\ufffd" + " XML " + "[\ufffd/#2:1\ufffd|\ufffd/#3:1\ufffd]" + "" + "\ufffd/#1:1\ufffd\ufffd/*14:1\ufffd" + "",he=e.Zx4(he),[[4,"ngIf"],["ngbNav","","cdStatefulTab","rgw-bucket-details",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem","details"],["ngbNavLink",""],i,["ngbNavContent",""],["ngbNavItem","permissions"],t,[3,"ngbNavOutlet"],[1,"table","table-striped","table-bordered"],[1,"bold","w-25"],o,[1,"w-75"],[1,"bold"],_,E,U,H,K,Q,te,Te,pe,de,Oe,ge,ve,we,We,Re,$e,[4,"ngFor","ngForOf"],Ue,[1,"table-scroller"],xe,he,["class","input-group",4,"ngIf"],Ze,ke,[1,"table"],le,me,Se,qe,[1,"input-group"],["type","button",1,"btn","btn-light",3,"ngClass","click"]]},template:function(t,o){1&t&&e.YNc(0,Xi,12,1,"ng-container",0),2&t&&e.Q6J("ngIf",o.selection)},dependencies:[g.mk,g.sg,g.O5,Tn.m,Ge.o,b.uN,b.Pz,b.nv,b.Vx,b.tO,b.Dy,g.Ts,g.Nd,bn.T,Pn.n,Gi.N,Li],styles:["table[_ngcontent-%COMP%]{table-layout:fixed}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{word-wrap:break-word}.table-scroller[_ngcontent-%COMP%]{height:100%;max-height:50vh;overflow:auto}"]}),n})();const Ki=["bucketSizeTpl"],Qi=["bucketObjectTpl"];function Ji(n,i){if(1&n&&e._UZ(0,"cd-usage-bar",8),2&n){const t=e.oxw().row;e.Q6J("total",t.bucket_quota.max_size)("used",t.bucket_size)}}function Vi(n,i){1&n&&e.SDv(0,9)}function ji(n,i){if(1&n&&(e.YNc(0,Ji,1,2,"cd-usage-bar",6),e.YNc(1,Vi,1,0,"ng-template",null,7,e.W1O)),2&n){const t=i.row,o=e.MAs(2);e.Q6J("ngIf",t.bucket_quota.max_size>0&&t.bucket_quota.enabled)("ngIfElse",o)}}function e_(n,i){if(1&n&&e._UZ(0,"cd-usage-bar",12),2&n){const t=e.oxw().row;e.Q6J("total",t.bucket_quota.max_objects)("used",t.num_objects)("isBinary",!1)}}function t_(n,i){1&n&&e.SDv(0,13)}function n_(n,i){if(1&n&&(e.YNc(0,e_,1,3,"cd-usage-bar",10),e.YNc(1,t_,1,0,"ng-template",null,11,e.W1O)),2&n){const t=i.row,o=e.MAs(2);e.Q6J("ngIf",t.bucket_quota.max_objects>0&&t.bucket_quota.enabled)("ngIfElse",o)}}let i_=(()=>{class n extends cn.o{constructor(t,o,_,E,U,H,K,Q){super(Q),this.authStorageService=t,this.dimlessBinaryPipe=o,this.dimlessPipe=_,this.rgwBucketService=E,this.modalService=U,this.urlBuilder=H,this.actionLabels=K,this.ngZone=Q,this.columns=[],this.buckets=[],this.selection=new ot.r}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:"Name",prop:"bid",flexGrow:2},{name:"Owner",prop:"owner",flexGrow:2.5},{name:"Used Capacity",prop:"bucket_size",flexGrow:.6,pipe:this.dimlessBinaryPipe},{name:"Capacity Limit %",prop:"size_usage",cellTemplate:this.bucketSizeTpl,flexGrow:.8},{name:"Objects",prop:"num_objects",flexGrow:.6,pipe:this.dimlessPipe},{name:"Object Limit %",prop:"object_usage",cellTemplate:this.bucketObjectTpl,flexGrow:.8}];const t=()=>this.selection.first()&&`${encodeURIComponent(this.selection.first().bid)}`;this.tableActions=[{permission:"create",icon:q.P.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE,canBePrimary:U=>!U.hasSelection},{permission:"update",icon:q.P.edit,routerLink:()=>this.urlBuilder.getEdit(t()),name:this.actionLabels.EDIT},{permission:"delete",icon:q.P.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:U=>U.hasMultiSelection}],this.setTableRefreshTimeout()}transformBucketData(){R().forEach(this.buckets,t=>{const o=t.bucket_quota.max_size,_=t.bucket_quota.max_objects;t.bucket_size=0,t.num_objects=0,R().isEmpty(t.usage)||(t.bucket_size=t.usage["rgw.main"].size_actual,t.num_objects=t.usage["rgw.main"].num_objects),t.size_usage=o>0?t.bucket_size/o:void 0,t.object_usage=_>0?t.num_objects/_:void 0})}getBucketList(t){this.setTableRefreshTimeout(),this.rgwBucketService.list(!0).subscribe(o=>{this.buckets=o,this.transformBucketData()},()=>{t.error()})}updateSelection(t){this.selection=t}deleteAction(){this.modalService.show(st.M,{itemDescription:this.selection.hasSingleSelection?"bucket":"buckets",itemNames:this.selection.selected.map(t=>t.bid),submitActionObservable:()=>new dt.y(t=>{(0,y.D)(this.selection.selected.map(o=>this.rgwBucketService.delete(o.bid))).subscribe({error:o=>{t.error(o),this.table.refreshBtn()},complete:()=>{t.complete(),this.table.refreshBtn()}})})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(rt.j),e.Y36(gn.$),e.Y36(Pn.n),e.Y36(L.o),e.Y36(Qe.Z),e.Y36(it.F),e.Y36(T.p4),e.Y36(e.R0b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-bucket-list"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Ve.a,7),e.Gf(Ki,7),e.Gf(Qi,7)),2&t){let _;e.iGM(_=e.CRH())&&(o.table=_.first),e.iGM(_=e.CRH())&&(o.bucketSizeTpl=_.first),e.iGM(_=e.CRH())&&(o.bucketObjectTpl=_.first)}},features:[e._Bn([{provide:it.F,useValue:new it.F("rgw/bucket")}]),e.qOj],decls:8,vars:9,consts:function(){let i,t;return i="No Limit",t="No Limit",[["columnMode","flex","selectionType","multiClick","identifier","bid",3,"autoReload","data","columns","hasDetails","status","setExpandedRow","updateSelection","fetchData"],["table",""],[1,"table-actions",3,"permission","selection","tableActions"],["cdTableDetail","",3,"selection"],["bucketSizeTpl",""],["bucketObjectTpl",""],[3,"total","used",4,"ngIf","ngIfElse"],["noSizeQuota",""],[3,"total","used"],i,[3,"total","used","isBinary",4,"ngIf","ngIfElse"],["noObjectQuota",""],[3,"total","used","isBinary"],t]},template:function(t,o){1&t&&(e.TgZ(0,"cd-table",0,1),e.NdJ("setExpandedRow",function(E){return o.setExpandedRow(E)})("updateSelection",function(E){return o.updateSelection(E)})("fetchData",function(E){return o.getBucketList(E)}),e._UZ(2,"cd-table-actions",2)(3,"cd-rgw-bucket-details",3),e.qZA(),e.YNc(4,ji,3,2,"ng-template",null,4,e.W1O),e.YNc(6,n_,3,2,"ng-template",null,5,e.W1O)),2&t&&(e.Q6J("autoReload",!1)("data",o.buckets)("columns",o.columns)("hasDetails",!0)("status",o.tableStatus),e.xp6(2),e.Q6J("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions),e.xp6(1),e.Q6J("selection",o.expandedRow))},dependencies:[g.O5,An.O,Ve.a,ft.K,Yi]}),n})();var __=p(58111),Gn=p(76317),yn=p(61350),r_=p(60351);function s_(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"cd-table-key-value",11),e.NdJ("fetchData",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.getMetaData())}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("data",t.metadata)}}function a_(n,i){if(1&n&&e._UZ(0,"cd-table-performance-counter",12),2&n){const t=e.oxw(2);e.Q6J("serviceId",t.serviceMapId)}}function l_(n,i){if(1&n&&e._UZ(0,"cd-grafana",15),2&n){const t=e.oxw(3);e.Q6J("grafanaPath","rgw-instance-detail?var-rgw_servers=rgw."+t.serviceId)("type","metrics")}}function c_(n,i){1&n&&(e.ynx(0,13),e.TgZ(1,"a",4),e.SDv(2,14),e.qZA(),e.YNc(3,l_,1,2,"ng-template",6),e.BQk())}function u_(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"nav",1,2),e.ynx(3,3),e.TgZ(4,"a",4),e.SDv(5,5),e.qZA(),e.YNc(6,s_,1,1,"ng-template",6),e.BQk(),e.ynx(7,7),e.TgZ(8,"a",4),e.SDv(9,8),e.qZA(),e.YNc(10,a_,1,1,"ng-template",6),e.BQk(),e.YNc(11,c_,4,0,"ng-container",9),e.qZA(),e._UZ(12,"div",10),e.BQk()),2&n){const t=e.MAs(2),o=e.oxw();e.xp6(11),e.Q6J("ngIf",o.grafanaPermission.read),e.xp6(1),e.Q6J("ngbNavOutlet",t)}}let d_=(()=>{class n{constructor(t,o){this.rgwDaemonService=t,this.authStorageService=o,this.serviceId="",this.serviceMapId="",this.grafanaPermission=this.authStorageService.getPermissions().grafana}ngOnChanges(){this.selection&&(this.serviceId=this.selection.id,this.serviceMapId=this.selection.service_map_id)}getMetaData(){R().isEmpty(this.serviceId)||this.rgwDaemonService.get(this.serviceId).subscribe(t=>{this.metadata=t.rgw_metadata})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(z.b),e.Y36(rt.j))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-daemon-details"]],inputs:{selection:"selection"},features:[e.TTD],decls:1,vars:1,consts:function(){let i,t,o,_;return i="D\xE9tails",t="Compteurs de performance",o="D\xE9tails des performances",_="RGW instance details",[[4,"ngIf"],["ngbNav","","cdStatefulTab","rgw-daemon-details",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem","details"],["ngbNavLink",""],i,["ngbNavContent",""],["ngbNavItem","performance-counters"],t,["ngbNavItem","performance-details",4,"ngIf"],[3,"ngbNavOutlet"],[3,"data","fetchData"],["serviceType","rgw",3,"serviceId"],["ngbNavItem","performance-details"],o,["title",_,"uid","x5ARzZtmk","grafanaStyle","one",3,"grafanaPath","type"]]},template:function(t,o){1&t&&e.YNc(0,u_,13,2,"ng-container",0),2&t&&e.Q6J("ngIf",o.selection)},dependencies:[g.O5,Gn.F,yn.b,Tn.m,r_.p,b.uN,b.Pz,b.nv,b.Vx,b.tO,b.Dy]}),n})();function f_(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"cd-table",8),e.NdJ("setExpandedRow",function(_){e.CHM(t);const E=e.oxw();return e.KtG(E.setExpandedRow(_))})("fetchData",function(_){e.CHM(t);const E=e.oxw();return e.KtG(E.getDaemonList(_))}),e._UZ(1,"cd-rgw-daemon-details",9),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("data",t.daemons)("columns",t.columns)("hasDetails",!0),e.xp6(1),e.Q6J("selection",t.expandedRow)}}function p_(n,i){1&n&&e._UZ(0,"cd-grafana",11),2&n&&e.Q6J("grafanaPath","rgw-overview?")("type","metrics")}function g_(n,i){1&n&&(e.ynx(0,2),e.TgZ(1,"a",3),e.SDv(2,10),e.qZA(),e.YNc(3,p_,1,2,"ng-template",5),e.BQk())}function T_(n,i){1&n&&e._UZ(0,"cd-grafana",13),2&n&&e.Q6J("grafanaPath","radosgw-sync-overview?")("type","metrics")}function E_(n,i){1&n&&(e.ynx(0,2),e.TgZ(1,"a",3),e.SDv(2,12),e.qZA(),e.YNc(3,T_,1,2,"ng-template",5),e.BQk())}let R_=(()=>{class n extends cn.o{constructor(t,o,_,E){super(),this.rgwDaemonService=t,this.authStorageService=o,this.cephShortVersionPipe=_,this.rgwSiteService=E,this.columns=[],this.daemons=[],this.updateDaemons=U=>{this.daemons=U}}ngOnInit(){this.grafanaPermission=this.authStorageService.getPermissions().grafana,this.columns=[{name:"ID",prop:"id",flexGrow:2},{name:"Hostname",prop:"server_hostname",flexGrow:2},{name:"Port",prop:"port",flexGrow:1},{name:"Realm",prop:"realm_name",flexGrow:2},{name:"Zone Group",prop:"zonegroup_name",flexGrow:2},{name:"Zone",prop:"zone_name",flexGrow:2},{name:"Version",prop:"version",flexGrow:1,pipe:this.cephShortVersionPipe}],this.rgwSiteService.get("realms").subscribe(t=>this.isMultiSite=t.length>0)}getDaemonList(t){this.rgwDaemonService.list().subscribe(this.updateDaemons,()=>{t.error()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(z.b),e.Y36(rt.j),e.Y36(__.F),e.Y36(k.I))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-daemon-list"]],features:[e.qOj],decls:9,vars:3,consts:function(){let i,t,o,_,E;return i="Gateways List",t="Performance globale",o="RGW overview",_="Sync Performance",E="Radosgw sync overview",[["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],i,["ngbNavContent",""],["ngbNavItem","",4,"ngIf"],[3,"ngbNavOutlet"],["columnMode","flex",3,"data","columns","hasDetails","setExpandedRow","fetchData"],["cdTableDetail","",3,"selection"],t,["title",o,"uid","WAkugZpiz","grafanaStyle","two",3,"grafanaPath","type"],_,["title",E,"uid","rgw-sync-overview","grafanaStyle","two",3,"grafanaPath","type"]]},template:function(t,o){if(1&t&&(e.TgZ(0,"nav",0,1),e.ynx(2,2),e.TgZ(3,"a",3),e.SDv(4,4),e.qZA(),e.YNc(5,f_,2,4,"ng-template",5),e.BQk(),e.YNc(6,g_,4,0,"ng-container",6),e.YNc(7,E_,4,0,"ng-container",6),e.qZA(),e._UZ(8,"div",7)),2&t){const _=e.MAs(1);e.xp6(6),e.Q6J("ngIf",o.grafanaPermission.read),e.xp6(1),e.Q6J("ngIf",o.grafanaPermission.read&&o.isMultiSite),e.xp6(1),e.Q6J("ngbNavOutlet",_)}},dependencies:[g.O5,Gn.F,Ve.a,b.uN,b.Pz,b.nv,b.Vx,b.tO,b.Dy,d_]}),n})();var m_=p(6481),En=p(28211),un=(()=>{return(n=un||(un={})).USERS="users",n.BUCKETS="buckets",n.METADATA="metadata",n.USAGE="usage",n.ZONE="zone",un;var n})();let Ln=(()=>{class n{static getAll(){return Object.values(n.capabilities)}}return n.capabilities=un,n})();function M_(n,i){1&n&&e._UZ(0,"input",22),2&n&&e.Q6J("readonly",!0)}function S_(n,i){1&n&&(e.TgZ(0,"option",17),e.SDv(1,25),e.qZA()),2&n&&e.Q6J("ngValue",null)}function h_(n,i){if(1&n&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function C_(n,i){if(1&n&&(e.TgZ(0,"select",23),e.YNc(1,S_,2,1,"option",24),e.YNc(2,h_,2,2,"option",19),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null!==t.types),e.xp6(1),e.Q6J("ngForOf",t.types)}}function F_(n,i){1&n&&(e.TgZ(0,"span",27),e.SDv(1,28),e.qZA())}function O_(n,i){if(1&n&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function N_(n,i){1&n&&(e.TgZ(0,"span",27),e.SDv(1,29),e.qZA())}const P_=function(n){return{required:n}},A_=function(){return["read","write","*"]};let b_=(()=>{class n{constructor(t,o,_){this.formBuilder=t,this.activeModal=o,this.actionLabels=_,this.submitAction=new e.vpe,this.editing=!0,this.types=[],this.resource="capability",this.createForm()}createForm(){this.formGroup=this.formBuilder.group({type:[null,[r.kI.required]],perm:[null,[r.kI.required]]})}setEditing(t=!0){this.editing=t,this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.ADD}setValues(t,o){this.formGroup.setValue({type:t,perm:o})}setCapabilities(t){const o=[];t.forEach(_=>{o.push(_.type)}),this.types=[],Ln.getAll().forEach(_=>{-1===R().indexOf(o,_)&&this.types.push(_)})}onSubmit(){this.submitAction.emit(this.formGroup.value),this.activeModal.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Pe.O),e.Y36(b.Kz),e.Y36(T.p4))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-user-capability-modal"]],outputs:{submitAction:"submitAction"},decls:29,vars:24,consts:function(){let i,t,o,_,E,U,H;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="Type",o="Autorisation",_="-- S\xE9lectionner une autorisation --",E="-- S\xE9lectionner un type --",U="This field is required.",H="This field is required.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["novalidate","",3,"formGroup"],["frm","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","type",1,"cd-col-form-label",3,"ngClass"],t,[1,"cd-col-form-input"],["id","type","class","form-control","type","text","formControlName","type",3,"readonly",4,"ngIf"],["id","type","class","form-select","formControlName","type","autofocus","",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["for","perm",1,"cd-col-form-label","required"],o,["id","perm","formControlName","perm",1,"form-select"],[3,"ngValue"],_,[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],["id","type","type","text","formControlName","type",1,"form-control",3,"readonly"],["id","type","formControlName","type","autofocus","",1,"form-select"],[3,"ngValue",4,"ngIf"],E,[3,"value"],[1,"invalid-feedback"],U,H]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.ALo(3,"titlecase"),e.ALo(4,"upperFirst"),e.BQk(),e.ynx(5,3),e.TgZ(6,"form",4,5)(8,"div",6)(9,"div",7)(10,"label",8),e.SDv(11,9),e.qZA(),e.TgZ(12,"div",10),e.YNc(13,M_,1,1,"input",11),e.YNc(14,C_,3,2,"select",12),e.YNc(15,F_,2,0,"span",13),e.qZA()(),e.TgZ(16,"div",7)(17,"label",14),e.SDv(18,15),e.qZA(),e.TgZ(19,"div",10)(20,"select",16)(21,"option",17),e.SDv(22,18),e.qZA(),e.YNc(23,O_,2,2,"option",19),e.qZA(),e.YNc(24,N_,2,0,"span",13),e.qZA()()(),e.TgZ(25,"div",20)(26,"cd-form-button-panel",21),e.NdJ("submitActionEvent",function(){return o.onSubmit()}),e.ALo(27,"titlecase"),e.ALo(28,"upperFirst"),e.qZA()()(),e.BQk(),e.qZA()),2&t){const _=e.MAs(7);e.Q6J("modalRef",o.activeModal),e.xp6(4),e.pQV(e.lcZ(3,13,o.action))(e.lcZ(4,15,o.resource)),e.QtT(2),e.xp6(2),e.Q6J("formGroup",o.formGroup),e.xp6(4),e.Q6J("ngClass",e.VKq(21,P_,!o.editing)),e.xp6(3),e.Q6J("ngIf",o.editing),e.xp6(1),e.Q6J("ngIf",!o.editing),e.xp6(1),e.Q6J("ngIf",o.formGroup.showError("type",_,"required")),e.xp6(6),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",e.DdM(23,A_)),e.xp6(1),e.Q6J("ngIf",o.formGroup.showError("perm",_,"required")),e.xp6(2),e.Q6J("form",o.formGroup)("submitText",e.lcZ(27,17,o.action)+" "+e.lcZ(28,19,o.resource))}},dependencies:[g.mk,g.sg,g.O5,Le.z,be.p,ut.U,Ge.o,O.b,l.P,w.V,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u,g.rS,Je.m]}),n})();var pt=p(58039),gt=p(4416);function I_(n,i){1&n&&e._UZ(0,"input",17),2&n&&e.Q6J("readonly",!0)}function G_(n,i){1&n&&(e.TgZ(0,"option",21),e.SDv(1,22),e.qZA()),2&n&&e.Q6J("ngValue",null)}function y_(n,i){if(1&n&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function L_(n,i){if(1&n&&(e.TgZ(0,"select",18),e.YNc(1,G_,2,1,"option",19),e.YNc(2,y_,2,2,"option",20),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null!==t.userCandidates),e.xp6(1),e.Q6J("ngForOf",t.userCandidates)}}function D_(n,i){1&n&&(e.TgZ(0,"span",24),e.SDv(1,25),e.qZA())}function v_(n,i){1&n&&(e.TgZ(0,"div",7)(1,"div",26)(2,"div",27),e._UZ(3,"input",28),e.TgZ(4,"label",29),e.SDv(5,30),e.qZA()()()())}function w_(n,i){1&n&&(e.TgZ(0,"span",24),e.SDv(1,37),e.qZA())}const Rn=function(n){return{required:n}};function W_(n,i){if(1&n&&(e.TgZ(0,"div",7)(1,"label",31),e.SDv(2,32),e.qZA(),e.TgZ(3,"div",10)(4,"div",33),e._UZ(5,"input",34)(6,"button",35)(7,"cd-copy-2-clipboard-button",36),e.qZA(),e.YNc(8,w_,2,0,"span",13),e.qZA()()),2&n){const t=e.oxw(),o=e.MAs(7);e.xp6(1),e.Q6J("ngClass",e.VKq(3,Rn,!t.viewing)),e.xp6(4),e.Q6J("readonly",t.viewing),e.xp6(3),e.Q6J("ngIf",t.formGroup.showError("access_key",o,"required"))}}function $_(n,i){1&n&&(e.TgZ(0,"span",24),e.SDv(1,43),e.qZA())}function U_(n,i){if(1&n&&(e.TgZ(0,"div",7)(1,"label",38),e.SDv(2,39),e.qZA(),e.TgZ(3,"div",10)(4,"div",33),e._UZ(5,"input",40)(6,"button",41)(7,"cd-copy-2-clipboard-button",42),e.qZA(),e.YNc(8,$_,2,0,"span",13),e.qZA()()),2&n){const t=e.oxw(),o=e.MAs(7);e.xp6(1),e.Q6J("ngClass",e.VKq(3,Rn,!t.viewing)),e.xp6(4),e.Q6J("readonly",t.viewing),e.xp6(3),e.Q6J("ngIf",t.formGroup.showError("secret_key",o,"required"))}}let Dn=(()=>{class n{constructor(t,o,_){this.formBuilder=t,this.activeModal=o,this.actionLabels=_,this.submitAction=new e.vpe,this.viewing=!0,this.userCandidates=[],this.resource="S3 Key",this.createForm()}createForm(){this.formGroup=this.formBuilder.group({user:[null,[r.kI.required]],generate_key:[!0],access_key:[null,[oe.hq.requiredIf({generate_key:!1})]],secret_key:[null,[oe.hq.requiredIf({generate_key:!1})]]})}setViewing(t=!0){this.viewing=t,this.action=this.viewing?this.actionLabels.SHOW:this.actionLabels.CREATE}setValues(t,o,_){this.formGroup.setValue({user:t,generate_key:R().isEmpty(o),access_key:o,secret_key:_})}setUserCandidates(t){this.userCandidates=t}onSubmit(){this.submitAction.emit(this.formGroup.value),this.activeModal.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Pe.O),e.Y36(b.Kz),e.Y36(T.p4))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-user-s3-key-modal"]],outputs:{submitAction:"submitAction"},decls:23,vars:24,consts:function(){let i,t,o,_,E,U,H,K,Q;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="Username",o="-- S\xE9lectionner un nom d'utilisateur --",_="This field is required.",E="G\xE9n\xE9rer automatiquement la clef",U="Clef d'acc\xE8s",H="This field is required.",K="Clef secr\xE8te",Q="This field is required.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["novalidate","",3,"formGroup"],["frm","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","user",1,"cd-col-form-label",3,"ngClass"],t,[1,"cd-col-form-input"],["id","user","class","form-control","type","text","formControlName","user",3,"readonly",4,"ngIf"],["id","user","class","form-control","formControlName","user","autofocus","",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"form","submitText","showSubmit","submitActionEvent"],["id","user","type","text","formControlName","user",1,"form-control",3,"readonly"],["id","user","formControlName","user","autofocus","",1,"form-control"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"ngValue"],o,[3,"value"],[1,"invalid-feedback"],_,[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","generate_key","type","checkbox","formControlName","generate_key",1,"custom-control-input"],["for","generate_key",1,"custom-control-label"],E,["for","access_key",1,"cd-col-form-label",3,"ngClass"],U,[1,"input-group"],["id","access_key","type","password","formControlName","access_key",1,"form-control",3,"readonly"],["type","button","cdPasswordButton","access_key",1,"btn","btn-light"],["source","access_key"],H,["for","secret_key",1,"cd-col-form-label",3,"ngClass"],K,["id","secret_key","type","password","formControlName","secret_key",1,"form-control",3,"readonly"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["source","secret_key"],Q]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.ALo(3,"titlecase"),e.ALo(4,"upperFirst"),e.BQk(),e.ynx(5,3),e.TgZ(6,"form",4,5)(8,"div",6)(9,"div",7)(10,"label",8),e.SDv(11,9),e.qZA(),e.TgZ(12,"div",10),e.YNc(13,I_,1,1,"input",11),e.YNc(14,L_,3,2,"select",12),e.YNc(15,D_,2,0,"span",13),e.qZA()(),e.YNc(16,v_,6,0,"div",14),e.YNc(17,W_,9,5,"div",14),e.YNc(18,U_,9,5,"div",14),e.qZA(),e.TgZ(19,"div",15)(20,"cd-form-button-panel",16),e.NdJ("submitActionEvent",function(){return o.onSubmit()}),e.ALo(21,"titlecase"),e.ALo(22,"upperFirst"),e.qZA()()(),e.BQk(),e.qZA()),2&t){const _=e.MAs(7);e.Q6J("modalRef",o.activeModal),e.xp6(4),e.pQV(e.lcZ(3,14,o.action))(e.lcZ(4,16,o.resource)),e.QtT(2),e.xp6(2),e.Q6J("formGroup",o.formGroup),e.xp6(4),e.Q6J("ngClass",e.VKq(22,Rn,!o.viewing)),e.xp6(3),e.Q6J("ngIf",o.viewing),e.xp6(1),e.Q6J("ngIf",!o.viewing),e.xp6(1),e.Q6J("ngIf",o.formGroup.showError("user",_,"required")),e.xp6(1),e.Q6J("ngIf",!o.viewing),e.xp6(1),e.Q6J("ngIf",!o.formGroup.getValue("generate_key")),e.xp6(1),e.Q6J("ngIf",!o.formGroup.getValue("generate_key")),e.xp6(2),e.Q6J("form",o.formGroup)("submitText",e.lcZ(21,18,o.action)+" "+e.lcZ(22,20,o.resource))("showSubmit",!o.viewing)}},dependencies:[g.mk,g.sg,g.O5,Le.z,pt.s,be.p,ut.U,gt.C,Ge.o,O.b,l.P,w.V,r._Y,r.YN,r.Kr,r.Fj,r.Wl,r.EJ,r.JJ,r.JL,r.sg,r.u,g.rS,Je.m]}),n})();class x_{}function Z_(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,30),e.qZA())}function k_(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,31),e.qZA())}function B_(n,i){if(1&n&&(e.TgZ(0,"option",32),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function z_(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,33),e.qZA())}function q_(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,47),e.qZA())}function H_(n,i){if(1&n&&(e.TgZ(0,"div",7)(1,"label",41),e.SDv(2,42),e.qZA(),e.TgZ(3,"div",10)(4,"div",43),e._UZ(5,"input",44)(6,"button",45)(7,"cd-copy-2-clipboard-button",46),e.qZA(),e.YNc(8,q_,2,0,"span",15),e.qZA()()),2&n){const t=e.oxw(2),o=e.MAs(7);e.xp6(8),e.Q6J("ngIf",t.formGroup.showError("secret_key",o,"required"))}}function X_(n,i){if(1&n&&(e.TgZ(0,"fieldset")(1,"legend"),e.SDv(2,34),e.qZA(),e.TgZ(3,"div",7)(4,"div",35)(5,"div",36),e._UZ(6,"input",37),e.TgZ(7,"label",38),e.SDv(8,39),e.qZA()()()(),e.YNc(9,H_,9,1,"div",40),e.qZA()),2&n){const t=e.oxw();e.xp6(9),e.Q6J("ngIf",!t.editing&&!t.formGroup.getValue("generate_secret"))}}const Y_=function(n){return{required:n}},K_=function(){return["read","write"]};let Q_=(()=>{class n{constructor(t,o,_){this.formBuilder=t,this.bsModalRef=o,this.actionLabels=_,this.submitAction=new e.vpe,this.editing=!0,this.subusers=[],this.resource="Subuser",this.createForm()}createForm(){this.formGroup=this.formBuilder.group({uid:[null],subuid:[null,[r.kI.required,this.subuserValidator()]],perm:[null,[r.kI.required]],generate_secret:[!0],secret_key:[null,[oe.hq.requiredIf({generate_secret:!1})]]})}subuserValidator(){const t=this;return o=>t.editing||(0,oe.PE)(o.value)?null:t.subusers.some(E=>R().isEqual(t.getSubuserName(E.id),o.value))?{subuserIdExists:!0}:null}getSubuserName(t){if(R().isEmpty(t))return t;const o=t.match(/([^:]+)(:(.+))?/);return R().isUndefined(o[3])?o[1]:o[3]}setEditing(t=!0){this.editing=t,this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE}setValues(t,o="",_=""){this.formGroup.setValue({uid:t,subuid:this.getSubuserName(o),perm:_,generate_secret:!0,secret_key:null})}setSubusers(t){this.subusers=t}onSubmit(){const t=this.formGroup.value,o=new x_;o.id=`${t.uid}:${t.subuid}`,o.permissions=t.perm,o.generate_secret=t.generate_secret,o.secret_key=t.secret_key,this.submitAction.emit(o),this.bsModalRef.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Pe.O),e.Y36(b.Kz),e.Y36(T.p4))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-user-subuser-modal"]],outputs:{submitAction:"submitAction"},decls:39,vars:26,consts:function(){let i,t,o,_,E,U,H,K,Q,te,Te,pe,de,Oe;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="Username",o="Subuser",_="Autorisation",E="-- S\xE9lectionner une autorisation --",U="lire, \xE9crire",H="complet",K="This field is required.",Q="L'ID d'utilisateur secondaire s\xE9lectionn\xE9 est d\xE9j\xE0 utilis\xE9.",te="This field is required.",Te="Cl\xE9 Swift",pe="G\xE9n\xE9rer automatiquement le secret",de="Clef secr\xE8te",Oe="This field is required.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["novalidate","",3,"formGroup"],["frm","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","uid",1,"cd-col-form-label"],t,[1,"cd-col-form-input"],["id","uid","type","text","formControlName","uid",1,"form-control",3,"readonly"],["for","subuid",1,"cd-col-form-label",3,"ngClass"],o,["id","subuid","type","text","formControlName","subuid","autofocus","",1,"form-control",3,"readonly"],["class","invalid-feedback",4,"ngIf"],["for","perm",1,"cd-col-form-label","required"],_,["id","perm","formControlName","perm",1,"form-select"],[3,"ngValue"],E,[3,"value",4,"ngFor","ngForOf"],["value","read-write"],U,["value","full-control"],H,[4,"ngIf"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],[1,"invalid-feedback"],K,Q,[3,"value"],te,Te,[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","generate_secret","type","checkbox","formControlName","generate_secret",1,"custom-control-input"],["for","generate_secret",1,"custom-control-label"],pe,["class","form-group row",4,"ngIf"],["for","secret_key",1,"cd-col-form-label","required"],de,[1,"input-group"],["id","secret_key","type","password","formControlName","secret_key",1,"form-control"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["source","secret_key"],Oe]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.ALo(3,"titlecase"),e.ALo(4,"upperFirst"),e.BQk(),e.ynx(5,3),e.TgZ(6,"form",4,5)(8,"div",6)(9,"div",7)(10,"label",8),e.SDv(11,9),e.qZA(),e.TgZ(12,"div",10),e._UZ(13,"input",11),e.qZA()(),e.TgZ(14,"div",7)(15,"label",12),e.SDv(16,13),e.qZA(),e.TgZ(17,"div",10),e._UZ(18,"input",14),e.YNc(19,Z_,2,0,"span",15),e.YNc(20,k_,2,0,"span",15),e.qZA()(),e.TgZ(21,"div",7)(22,"label",16),e.SDv(23,17),e.qZA(),e.TgZ(24,"div",10)(25,"select",18)(26,"option",19),e.SDv(27,20),e.qZA(),e.YNc(28,B_,2,2,"option",21),e.TgZ(29,"option",22),e.SDv(30,23),e.qZA(),e.TgZ(31,"option",24),e.SDv(32,25),e.qZA()(),e.YNc(33,z_,2,0,"span",15),e.qZA()(),e.YNc(34,X_,10,1,"fieldset",26),e.qZA(),e.TgZ(35,"div",27)(36,"cd-form-button-panel",28),e.NdJ("submitActionEvent",function(){return o.onSubmit()}),e.ALo(37,"titlecase"),e.ALo(38,"upperFirst"),e.qZA()()(),e.BQk(),e.qZA()),2&t){const _=e.MAs(7);e.Q6J("modalRef",o.bsModalRef),e.xp6(4),e.pQV(e.lcZ(3,15,o.action))(e.lcZ(4,17,o.resource)),e.QtT(2),e.xp6(2),e.Q6J("formGroup",o.formGroup),e.xp6(7),e.Q6J("readonly",!0),e.xp6(2),e.Q6J("ngClass",e.VKq(23,Y_,!o.editing)),e.xp6(3),e.Q6J("readonly",o.editing),e.xp6(1),e.Q6J("ngIf",o.formGroup.showError("subuid",_,"required")),e.xp6(1),e.Q6J("ngIf",o.formGroup.showError("subuid",_,"subuserIdExists")),e.xp6(6),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",e.DdM(25,K_)),e.xp6(5),e.Q6J("ngIf",o.formGroup.showError("perm",_,"required")),e.xp6(1),e.Q6J("ngIf",!o.editing),e.xp6(2),e.Q6J("form",o.formGroup)("submitText",e.lcZ(37,19,o.action)+" "+e.lcZ(38,21,o.resource))}},dependencies:[g.mk,g.sg,g.O5,Le.z,pt.s,be.p,ut.U,gt.C,Ge.o,O.b,l.P,w.V,r._Y,r.YN,r.Kr,r.Fj,r.Wl,r.EJ,r.JJ,r.JL,r.sg,r.u,g.rS,Je.m]}),n})();var vn=p(13472);let wn=(()=>{class n{constructor(t,o){this.activeModal=t,this.actionLabels=o,this.resource="Swift Key",this.action=this.actionLabels.SHOW}setValues(t,o){this.user=t,this.secret_key=o}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.Kz),e.Y36(T.p4))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-user-swift-key-modal"]],decls:23,vars:11,consts:function(){let i,t,o;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="Username",o="Clef secr\xE8te",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],[1,"modal-body"],["novalidate",""],[1,"form-group","row"],["for","user",1,"cd-col-form-label"],t,[1,"cd-col-form-input"],["id","user","name","user","type","text",1,"form-control",3,"readonly","ngModel","ngModelChange"],["for","secret_key",1,"cd-col-form-label"],o,[1,"input-group"],["id","secret_key","name","secret_key","type","password",1,"form-control",3,"ngModel","readonly","ngModelChange"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["source","secret_key"],[1,"modal-footer"],[3,"backAction"]]},template:function(t,o){1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.ALo(3,"titlecase"),e.ALo(4,"upperFirst"),e.BQk(),e.ynx(5,3),e.TgZ(6,"div",4)(7,"form",5)(8,"div",6)(9,"label",7),e.SDv(10,8),e.qZA(),e.TgZ(11,"div",9)(12,"input",10),e.NdJ("ngModelChange",function(E){return o.user=E}),e.qZA()()(),e.TgZ(13,"div",6)(14,"label",11),e.SDv(15,12),e.qZA(),e.TgZ(16,"div",9)(17,"div",13)(18,"input",14),e.NdJ("ngModelChange",function(E){return o.secret_key=E}),e.qZA(),e._UZ(19,"button",15)(20,"cd-copy-2-clipboard-button",16),e.qZA()()()()(),e.TgZ(21,"div",17)(22,"cd-back-button",18),e.NdJ("backAction",function(){return o.activeModal.close()}),e.qZA()(),e.BQk(),e.qZA()),2&t&&(e.Q6J("modalRef",o.activeModal),e.xp6(4),e.pQV(e.lcZ(3,7,o.action))(e.lcZ(4,9,o.resource)),e.QtT(2),e.xp6(8),e.Q6J("readonly",!0)("ngModel",o.user),e.xp6(6),e.Q6J("ngModel",o.secret_key)("readonly",!0))},dependencies:[vn.W,Le.z,pt.s,gt.C,Ge.o,O.b,l.P,r._Y,r.Fj,r.JJ,r.JL,r.On,r.F,g.rS,Je.m]}),n})();var J_=p(17932);function V_(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,55),e.qZA())}function j_(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,56),e.qZA())}function er(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,57),e.qZA())}function tr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,61),e.qZA())}function nr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,62),e.qZA())}function or(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"label",58),e.SDv(2,59),e.qZA(),e.TgZ(3,"div",11),e._UZ(4,"input",60),e.YNc(5,tr,2,0,"span",13),e.YNc(6,nr,2,0,"span",13),e.qZA()()),2&n){e.oxw();const t=e.MAs(2),o=e.oxw();e.xp6(4),e.Q6J("readonly",o.editing),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("tenant",t,"pattern")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("tenant",t,"notUnique"))}}function ir(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,63),e.qZA())}function _r(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,64),e.qZA())}function rr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,65),e.qZA())}function sr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,66),e.qZA())}function ar(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,69),e.qZA())}function lr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,70),e.qZA())}function cr(n,i){if(1&n&&(e.TgZ(0,"div",8),e._UZ(1,"label",67),e.TgZ(2,"div",11),e._UZ(3,"input",68),e.YNc(4,ar,2,0,"span",13),e.YNc(5,lr,2,0,"span",13),e.qZA()()),2&n){e.oxw();const t=e.MAs(2),o=e.oxw();e.xp6(4),e.Q6J("ngIf",o.userForm.showError("max_buckets",t,"required")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("max_buckets",t,"min"))}}function ur(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,81),e.qZA())}function dr(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"label",75),e.SDv(2,76),e.qZA(),e.TgZ(3,"div",11)(4,"div",77),e._UZ(5,"input",78)(6,"button",79)(7,"cd-copy-2-clipboard-button",80),e.qZA(),e.YNc(8,ur,2,0,"span",13),e.qZA()()),2&n){e.oxw(2);const t=e.MAs(2),o=e.oxw();e.xp6(8),e.Q6J("ngIf",o.userForm.showError("access_key",t,"required"))}}function fr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,87),e.qZA())}function pr(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"label",82),e.SDv(2,83),e.qZA(),e.TgZ(3,"div",11)(4,"div",77),e._UZ(5,"input",84)(6,"button",85)(7,"cd-copy-2-clipboard-button",86),e.qZA(),e.YNc(8,fr,2,0,"span",13),e.qZA()()),2&n){e.oxw(2);const t=e.MAs(2),o=e.oxw();e.xp6(8),e.Q6J("ngIf",o.userForm.showError("secret_key",t,"required"))}}function gr(n,i){if(1&n&&(e.TgZ(0,"fieldset")(1,"legend"),e.SDv(2,71),e.qZA(),e.TgZ(3,"div",8)(4,"div",14)(5,"div",15),e._UZ(6,"input",72),e.TgZ(7,"label",73),e.SDv(8,74),e.qZA()()()(),e.YNc(9,dr,9,1,"div",19),e.YNc(10,pr,9,1,"div",19),e.qZA()),2&n){const t=e.oxw(2);e.xp6(9),e.Q6J("ngIf",!t.editing&&!t.userForm.getValue("generate_key")),e.xp6(1),e.Q6J("ngIf",!t.editing&&!t.userForm.getValue("generate_key"))}}function Tr(n,i){1&n&&(e.TgZ(0,"span",98)(1,"span",99),e.SDv(2,100),e.qZA()())}const je=function(n){return[n]};function Er(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"div",77)(2,"span",101),e._UZ(3,"i"),e.qZA(),e._UZ(4,"input",102),e.TgZ(5,"span",101),e._UZ(6,"i"),e.qZA(),e._UZ(7,"input",102),e.TgZ(8,"button",103),e.NdJ("click",function(){const E=e.CHM(t).index,U=e.oxw(3);return e.KtG(U.showSubuserModal(E))}),e._UZ(9,"i",95),e.qZA(),e.TgZ(10,"button",104),e.NdJ("click",function(){const E=e.CHM(t).index,U=e.oxw(3);return e.KtG(U.deleteSubuser(E))}),e._UZ(11,"i",95),e.qZA()(),e._UZ(12,"span",99),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw(3);e.xp6(3),e.Tol(o.icons.user),e.xp6(1),e.s9C("value",t.id),e.xp6(2),e.Tol(o.icons.share),e.xp6(1),e.s9C("value","full-control"===t.permissions?"full":t.permissions),e.xp6(2),e.Q6J("ngClass",e.VKq(10,je,o.icons.edit)),e.xp6(2),e.Q6J("ngClass",e.VKq(12,je,o.icons.destroy))}}function Rr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"fieldset")(1,"legend"),e.SDv(2,88),e.qZA(),e.TgZ(3,"div",89)(4,"div",14),e.YNc(5,Tr,3,0,"span",90),e.YNc(6,Er,13,14,"span",91),e.TgZ(7,"div",92)(8,"div",93)(9,"button",94),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.showSubuserModal())}),e._UZ(10,"i",95),e.ynx(11),e.SDv(12,96),e.ALo(13,"titlecase"),e.ALo(14,"upperFirst"),e.BQk(),e.qZA()()(),e._UZ(15,"span",97),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(5),e.Q6J("ngIf",0===t.subusers.length),e.xp6(1),e.Q6J("ngForOf",t.subusers),e.xp6(4),e.Q6J("ngClass",e.VKq(9,je,t.icons.add)),e.xp6(4),e.pQV(e.lcZ(13,5,t.actionLabels.CREATE))(e.lcZ(14,7,t.subuserLabel)),e.QtT(12)}}function mr(n,i){1&n&&(e.TgZ(0,"span",98)(1,"span",99),e.SDv(2,110),e.qZA()())}function Mr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"div",77)(2,"div",101),e._UZ(3,"i"),e.qZA(),e._UZ(4,"input",102),e.TgZ(5,"button",111),e.NdJ("click",function(){const E=e.CHM(t).index,U=e.oxw(3);return e.KtG(U.showS3KeyModal(E))}),e._UZ(6,"i",95),e.qZA(),e.TgZ(7,"button",112),e.NdJ("click",function(){const E=e.CHM(t).index,U=e.oxw(3);return e.KtG(U.deleteS3Key(E))}),e._UZ(8,"i",95),e.qZA()(),e._UZ(9,"span",99),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw(3);e.xp6(3),e.Tol(o.icons.key),e.xp6(1),e.s9C("value",t.user),e.xp6(2),e.Q6J("ngClass",e.VKq(6,je,o.icons.show)),e.xp6(2),e.Q6J("ngClass",e.VKq(8,je,o.icons.destroy))}}function Sr(n,i){1&n&&(e.TgZ(0,"span",98)(1,"span",99),e.SDv(2,113),e.qZA()())}function hr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"div",77)(2,"span",101),e._UZ(3,"i"),e.qZA(),e._UZ(4,"input",102),e.TgZ(5,"button",114),e.NdJ("click",function(){const E=e.CHM(t).index,U=e.oxw(3);return e.KtG(U.showSwiftKeyModal(E))}),e._UZ(6,"i",95),e.qZA()(),e._UZ(7,"span",99),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw(3);e.xp6(3),e.Tol(o.icons.key),e.xp6(1),e.s9C("value",t.user),e.xp6(2),e.Q6J("ngClass",e.VKq(5,je,o.icons.show))}}function Cr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"fieldset")(1,"legend"),e.SDv(2,105),e.qZA(),e.TgZ(3,"div",8)(4,"label",67),e.SDv(5,106),e.qZA(),e.TgZ(6,"div",11),e.YNc(7,mr,3,0,"span",90),e.YNc(8,Mr,10,10,"span",91),e.TgZ(9,"div",92)(10,"div",93)(11,"button",107),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.showS3KeyModal())}),e._UZ(12,"i",95),e.ynx(13),e.SDv(14,108),e.ALo(15,"titlecase"),e.ALo(16,"upperFirst"),e.BQk(),e.qZA()()(),e._UZ(17,"span",97),e.qZA(),e._UZ(18,"hr"),e.qZA(),e.TgZ(19,"div",8)(20,"label",67),e.SDv(21,109),e.qZA(),e.TgZ(22,"div",11),e.YNc(23,Sr,3,0,"span",90),e.YNc(24,hr,8,7,"span",91),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(7),e.Q6J("ngIf",0===t.s3Keys.length),e.xp6(1),e.Q6J("ngForOf",t.s3Keys),e.xp6(4),e.Q6J("ngClass",e.VKq(11,je,t.icons.add)),e.xp6(4),e.pQV(e.lcZ(15,7,t.actionLabels.CREATE))(e.lcZ(16,9,t.s3keyLabel)),e.QtT(14),e.xp6(7),e.Q6J("ngIf",0===t.swiftKeys.length),e.xp6(1),e.Q6J("ngForOf",t.swiftKeys)}}function Fr(n,i){1&n&&(e.TgZ(0,"span",98)(1,"span",99),e.SDv(2,118),e.qZA()())}function Or(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"div",77)(2,"div",101),e._UZ(3,"i"),e.qZA(),e._UZ(4,"input",102),e.TgZ(5,"button",119),e.NdJ("click",function(){const E=e.CHM(t).index,U=e.oxw(3);return e.KtG(U.showCapabilityModal(E))}),e._UZ(6,"i",95),e.qZA(),e.TgZ(7,"button",120),e.NdJ("click",function(){const E=e.CHM(t).index,U=e.oxw(3);return e.KtG(U.deleteCapability(E))}),e._UZ(8,"i",95),e.qZA()(),e._UZ(9,"span",99),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw(3);e.xp6(3),e.Tol(o.icons.share),e.xp6(1),e.hYB("value","",t.type,":",t.perm,""),e.xp6(2),e.Q6J("ngClass",e.VKq(7,je,o.icons.edit)),e.xp6(2),e.Q6J("ngClass",e.VKq(9,je,o.icons.destroy))}}function Nr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"fieldset")(1,"legend"),e.SDv(2,115),e.qZA(),e.TgZ(3,"div",8)(4,"div",14),e.YNc(5,Fr,3,0,"span",90),e.YNc(6,Or,10,11,"span",91),e.TgZ(7,"div",92)(8,"div",93)(9,"button",116),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.showCapabilityModal())}),e.ALo(10,"pipeFunction"),e.ALo(11,"pipeFunction"),e._UZ(12,"i",95),e.ynx(13),e.SDv(14,117),e.ALo(15,"titlecase"),e.ALo(16,"upperFirst"),e.BQk(),e.qZA()()(),e._UZ(17,"span",97),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(5),e.Q6J("ngIf",0===t.capabilities.length),e.xp6(1),e.Q6J("ngForOf",t.capabilities),e.xp6(3),e.Q6J("disabled",e.xi3(10,7,t.capabilities,t.hasAllCapabilities))("disableTooltip",!e.xi3(11,10,t.capabilities,t.hasAllCapabilities)),e.xp6(3),e.Q6J("ngClass",e.VKq(17,je,t.icons.add)),e.xp6(4),e.pQV(e.lcZ(15,13,t.actionLabels.ADD))(e.lcZ(16,15,t.capabilityLabel)),e.QtT(14)}}function Pr(n,i){1&n&&(e.TgZ(0,"div",8)(1,"div",14)(2,"div",15),e._UZ(3,"input",121),e.TgZ(4,"label",122),e.SDv(5,123),e.qZA()()()())}function Ar(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,127),e.qZA())}function br(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,128),e.qZA())}function Ir(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,129),e.qZA())}function Gr(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"label",124),e.SDv(2,125),e.qZA(),e.TgZ(3,"div",11),e._UZ(4,"input",126),e.YNc(5,Ar,2,0,"span",13),e.YNc(6,br,2,0,"span",13),e.YNc(7,Ir,2,0,"span",13),e.qZA()()),2&n){e.oxw();const t=e.MAs(2),o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.userForm.showError("user_quota_max_size",t,"required")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("user_quota_max_size",t,"quotaMaxSize")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("user_quota_max_size",o.formDir,"pattern"))}}function yr(n,i){1&n&&(e.TgZ(0,"div",8)(1,"div",14)(2,"div",15),e._UZ(3,"input",130),e.TgZ(4,"label",131),e.SDv(5,132),e.qZA()()()())}function Lr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,136),e.qZA())}function Dr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,137),e.qZA())}function vr(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"label",133),e.SDv(2,134),e.qZA(),e.TgZ(3,"div",11),e._UZ(4,"input",135),e.YNc(5,Lr,2,0,"span",13),e.YNc(6,Dr,2,0,"span",13),e.qZA()()),2&n){e.oxw();const t=e.MAs(2),o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.userForm.showError("user_quota_max_objects",t,"required")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("user_quota_max_objects",t,"min"))}}function wr(n,i){1&n&&(e.TgZ(0,"div",8)(1,"div",14)(2,"div",15),e._UZ(3,"input",138),e.TgZ(4,"label",139),e.SDv(5,140),e.qZA()()()())}function Wr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,144),e.qZA())}function $r(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,145),e.qZA())}function Ur(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,146),e.qZA())}function xr(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"label",141),e.SDv(2,142),e.qZA(),e.TgZ(3,"div",11),e._UZ(4,"input",143),e.YNc(5,Wr,2,0,"span",13),e.YNc(6,$r,2,0,"span",13),e.YNc(7,Ur,2,0,"span",13),e.qZA()()),2&n){e.oxw();const t=e.MAs(2),o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.userForm.showError("bucket_quota_max_size",t,"required")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("bucket_quota_max_size",t,"quotaMaxSize")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("bucket_quota_max_size",o.formDir,"pattern"))}}function Zr(n,i){1&n&&(e.TgZ(0,"div",8)(1,"div",14)(2,"div",15),e._UZ(3,"input",147),e.TgZ(4,"label",148),e.SDv(5,149),e.qZA()()()())}function kr(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,153),e.qZA())}function Br(n,i){1&n&&(e.TgZ(0,"span",54),e.SDv(1,154),e.qZA())}function zr(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"label",150),e.SDv(2,151),e.qZA(),e.TgZ(3,"div",11),e._UZ(4,"input",152),e.YNc(5,kr,2,0,"span",13),e.YNc(6,Br,2,0,"span",13),e.qZA()()),2&n){e.oxw();const t=e.MAs(2),o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.userForm.showError("bucket_quota_max_objects",t,"required")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("bucket_quota_max_objects",t,"min"))}}const Wn=function(n){return{required:n}};function qr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"form",2,3)(3,"div",4)(4,"div",5),e.SDv(5,6),e.ALo(6,"titlecase"),e.ALo(7,"upperFirst"),e.qZA(),e.TgZ(8,"div",7)(9,"div",8)(10,"label",9),e.SDv(11,10),e.qZA(),e.TgZ(12,"div",11),e._UZ(13,"input",12),e.YNc(14,V_,2,0,"span",13),e.YNc(15,j_,2,0,"span",13),e.YNc(16,er,2,0,"span",13),e.qZA()(),e.TgZ(17,"div",8)(18,"div",14)(19,"div",15)(20,"input",16),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.updateFieldsWhenTenanted())}),e.qZA(),e.TgZ(21,"label",17),e.SDv(22,18),e.qZA()()()(),e.YNc(23,or,7,3,"div",19),e.TgZ(24,"div",8)(25,"label",20),e.SDv(26,21),e.qZA(),e.TgZ(27,"div",11),e._UZ(28,"input",22),e.YNc(29,ir,2,0,"span",13),e.YNc(30,_r,2,0,"span",13),e.qZA()(),e.TgZ(31,"div",8)(32,"label",23),e.SDv(33,24),e.qZA(),e.TgZ(34,"div",11),e._UZ(35,"input",25),e.YNc(36,rr,2,0,"span",13),e.YNc(37,sr,2,0,"span",13),e.qZA()(),e.TgZ(38,"div",8)(39,"label",26),e.SDv(40,27),e.qZA(),e.TgZ(41,"div",11)(42,"select",28),e.NdJ("change",function(_){e.CHM(t);const E=e.oxw();return e.KtG(E.onMaxBucketsModeChange(_.target.value))}),e.TgZ(43,"option",29),e.SDv(44,30),e.qZA(),e.TgZ(45,"option",31),e.SDv(46,32),e.qZA(),e.TgZ(47,"option",33),e.SDv(48,34),e.qZA()()()(),e.YNc(49,cr,6,2,"div",19),e.TgZ(50,"div",8)(51,"div",14)(52,"div",15),e._UZ(53,"input",35),e.TgZ(54,"label",36),e.SDv(55,37),e.qZA(),e.TgZ(56,"cd-helper"),e.SDv(57,38),e.qZA()()()(),e.TgZ(58,"div",8)(59,"div",14)(60,"div",15),e._UZ(61,"input",39),e.TgZ(62,"label",40),e.SDv(63,41),e.qZA(),e.TgZ(64,"cd-helper"),e.SDv(65,42),e.qZA()()()(),e.YNc(66,gr,11,2,"fieldset",43),e.YNc(67,Rr,16,11,"fieldset",43),e.YNc(68,Cr,25,13,"fieldset",43),e.YNc(69,Nr,18,19,"fieldset",43),e.TgZ(70,"fieldset")(71,"legend"),e.SDv(72,44),e.qZA(),e.TgZ(73,"div",8)(74,"div",14)(75,"div",15),e._UZ(76,"input",45),e.TgZ(77,"label",46),e.SDv(78,47),e.qZA()()()(),e.YNc(79,Pr,6,0,"div",19),e.YNc(80,Gr,8,3,"div",19),e.YNc(81,yr,6,0,"div",19),e.YNc(82,vr,7,2,"div",19),e.qZA(),e.TgZ(83,"fieldset")(84,"legend"),e.SDv(85,48),e.qZA(),e.TgZ(86,"div",8)(87,"div",14)(88,"div",15),e._UZ(89,"input",49),e.TgZ(90,"label",50),e.SDv(91,51),e.qZA()()()(),e.YNc(92,wr,6,0,"div",19),e.YNc(93,xr,8,3,"div",19),e.YNc(94,Zr,6,0,"div",19),e.YNc(95,zr,7,2,"div",19),e.qZA()(),e.TgZ(96,"div",52)(97,"cd-form-button-panel",53),e.NdJ("submitActionEvent",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.onSubmit())}),e.ALo(98,"titlecase"),e.ALo(99,"upperFirst"),e.qZA()()()()()}if(2&n){const t=e.MAs(2),o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.userForm),e.xp6(6),e.pQV(e.lcZ(6,30,o.action))(e.lcZ(7,32,o.resource)),e.QtT(5),e.xp6(3),e.Q6J("ngClass",e.VKq(38,Wn,!o.editing)),e.xp6(3),e.Q6J("readonly",o.editing),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("user_id",t,"required")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("user_id",t,"pattern")),e.xp6(1),e.Q6J("ngIf",!o.userForm.getValue("show_tenant")&&o.userForm.showError("user_id",t,"notUnique")),e.xp6(4),e.Q6J("readonly",!0),e.xp6(3),e.Q6J("ngIf",o.userForm.getValue("show_tenant")),e.xp6(2),e.Q6J("ngClass",e.VKq(40,Wn,!o.editing)),e.xp6(4),e.Q6J("ngIf",o.userForm.showError("display_name",t,"pattern")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("display_name",t,"required")),e.xp6(6),e.Q6J("ngIf",o.userForm.showError("email",t,"email")),e.xp6(1),e.Q6J("ngIf",o.userForm.showError("email",t,"notUnique")),e.xp6(12),e.Q6J("ngIf",1==o.userForm.get("max_buckets_mode").value),e.xp6(17),e.Q6J("ngIf",!o.editing),e.xp6(1),e.Q6J("ngIf",o.editing),e.xp6(1),e.Q6J("ngIf",o.editing),e.xp6(1),e.Q6J("ngIf",o.editing),e.xp6(10),e.Q6J("ngIf",o.userForm.controls.user_quota_enabled.value),e.xp6(1),e.Q6J("ngIf",o.userForm.controls.user_quota_enabled.value&&!o.userForm.getValue("user_quota_max_size_unlimited")),e.xp6(1),e.Q6J("ngIf",o.userForm.controls.user_quota_enabled.value),e.xp6(1),e.Q6J("ngIf",o.userForm.controls.user_quota_enabled.value&&!o.userForm.getValue("user_quota_max_objects_unlimited")),e.xp6(10),e.Q6J("ngIf",o.userForm.controls.bucket_quota_enabled.value),e.xp6(1),e.Q6J("ngIf",o.userForm.controls.bucket_quota_enabled.value&&!o.userForm.getValue("bucket_quota_max_size_unlimited")),e.xp6(1),e.Q6J("ngIf",o.userForm.controls.bucket_quota_enabled.value),e.xp6(1),e.Q6J("ngIf",o.userForm.controls.bucket_quota_enabled.value&&!o.userForm.getValue("bucket_quota_max_objects_unlimited")),e.xp6(2),e.Q6J("form",o.userForm)("submitText",e.lcZ(98,34,o.action)+" "+e.lcZ(99,36,o.resource))}}let $n=(()=>{class n extends ie.E{constructor(t,o,_,E,U,H,K){super(),this.formBuilder=t,this.route=o,this.router=_,this.rgwUserService=E,this.modalService=U,this.notificationService=H,this.actionLabels=K,this.editing=!1,this.submitObservables=[],this.icons=q.P,this.subusers=[],this.s3Keys=[],this.swiftKeys=[],this.capabilities=[],this.showTenant=!1,this.previousTenant=null,this.resource="user",this.subuserLabel="subuser",this.s3keyLabel="S3 Key",this.capabilityLabel="capability",this.editing=this.router.url.startsWith(`/rgw/user/${T.MQ.EDIT}`),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.createForm()}createForm(){this.userForm=this.formBuilder.group({user_id:[null,[r.kI.required,r.kI.pattern(/^[a-zA-Z0-9!@#%^&*()_-]+$/)],this.editing?[]:[oe.hq.unique(this.rgwUserService.exists,this.rgwUserService,()=>this.userForm.getValue("tenant"))]],show_tenant:[this.editing],tenant:[null,[r.kI.pattern(/^[a-zA-Z0-9!@#%^&*()_-]+$/)],this.editing?[]:[oe.hq.unique(this.rgwUserService.exists,this.rgwUserService,()=>this.userForm.getValue("user_id"),!0)]],display_name:[null,[r.kI.required,r.kI.pattern(/^[a-zA-Z0-9!@#%^&*()._ -]+$/)]],email:[null,[oe.hq.email],[oe.hq.unique(this.rgwUserService.emailExists,this.rgwUserService)]],max_buckets_mode:[1],max_buckets:[1e3,[oe.hq.requiredIf({max_buckets_mode:"1"}),oe.hq.number(!1)]],system:[!1],suspended:[!1],generate_key:[!0],access_key:[null,[oe.hq.requiredIf({generate_key:!1})]],secret_key:[null,[oe.hq.requiredIf({generate_key:!1})]],user_quota_enabled:[!1],user_quota_max_size_unlimited:[!0],user_quota_max_size:[null,[oe.hq.composeIf({user_quota_enabled:!0,user_quota_max_size_unlimited:!1},[r.kI.required,this.quotaMaxSizeValidator])]],user_quota_max_objects_unlimited:[!0],user_quota_max_objects:[null,[oe.hq.requiredIf({user_quota_enabled:!0,user_quota_max_objects_unlimited:!1})]],bucket_quota_enabled:[!1],bucket_quota_max_size_unlimited:[!0],bucket_quota_max_size:[null,[oe.hq.composeIf({bucket_quota_enabled:!0,bucket_quota_max_size_unlimited:!1},[r.kI.required,this.quotaMaxSizeValidator])]],bucket_quota_max_objects_unlimited:[!0],bucket_quota_max_objects:[null,[oe.hq.requiredIf({bucket_quota_enabled:!0,bucket_quota_max_objects_unlimited:!1})]]})}ngOnInit(){this.route.params.subscribe(t=>{if(!t.hasOwnProperty("uid"))return void this.loadingReady();const o=decodeURIComponent(t.uid),_=[];_.push(this.rgwUserService.get(o)),_.push(this.rgwUserService.getQuota(o)),(0,y.D)(_).subscribe(E=>{const U=R().clone(this.userForm.value);let H=R().pick(E[0],R().keys(this.userForm.value));switch(H.max_buckets){case-1:H.max_buckets_mode=-1,H.max_buckets="";break;case 0:H.max_buckets_mode=0,H.max_buckets="";break;default:H.max_buckets_mode=1}["user","bucket"].forEach(Q=>{const te=E[1][Q+"_quota"];H[Q+"_quota_enabled"]=te.enabled,te.max_size<0?(H[Q+"_quota_max_size_unlimited"]=!0,H[Q+"_quota_max_size"]=null):(H[Q+"_quota_max_size_unlimited"]=!1,H[Q+"_quota_max_size"]=`${te.max_size} B`),te.max_objects<0?(H[Q+"_quota_max_objects_unlimited"]=!0,H[Q+"_quota_max_objects"]=null):(H[Q+"_quota_max_objects_unlimited"]=!1,H[Q+"_quota_max_objects"]=te.max_objects)}),H=R().merge(U,H),this.userForm.setValue(H),this.subusers=E[0].subusers,this.s3Keys=E[0].keys,this.swiftKeys=E[0].swift_keys;const K={"read, write":"*"};E[0].caps.forEach(Q=>{Q.perm in K&&(Q.perm=K[Q.perm])}),this.capabilities=E[0].caps,this.loadingReady()},()=>{this.loadingError()})})}goToListView(){this.router.navigate(["/rgw/user"])}onSubmit(){let t;if(this.userForm.pristine)return void this.goToListView();const o=this.getUID();if(this.editing){if(this._isGeneralDirty()){const _=this._getUpdateArgs();this.submitObservables.push(this.rgwUserService.update(o,_))}t="Updated Object Gateway user '\n          " + o + "'\n        "}else{const _=this._getCreateArgs();this.submitObservables.push(this.rgwUserService.create(_)),t="Created Object Gateway user '\n          " + o + "'\n        "}if(this._isUserQuotaDirty()){const _=this._getUserQuotaArgs();this.submitObservables.push(this.rgwUserService.updateQuota(o,_))}if(this._isBucketQuotaDirty()){const _=this._getBucketQuotaArgs();this.submitObservables.push(this.rgwUserService.updateQuota(o,_))}(0,m_.z)(...this.submitObservables).subscribe({error:()=>{this.userForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.notificationService.show(J.k.success,t),this.goToListView()}})}updateFieldsWhenTenanted(){this.showTenant=this.userForm.getValue("show_tenant"),this.showTenant?(this.userForm.get("user_id").markAsTouched(),this.previousTenant=this.userForm.get("tenant").value,this.userForm.get("tenant").patchValue(null)):(this.userForm.get("user_id").markAsUntouched(),this.userForm.get("tenant").patchValue(this.previousTenant))}getUID(){let t=this.userForm.getValue("user_id");const o=this.userForm?.getValue("tenant");return o&&o.length>0&&(t=`${this.userForm.getValue("tenant")}$${t}`),t}quotaMaxSizeValidator(t){return(0,oe.PE)(t.value)?null:null===RegExp("^(\\d+(\\.\\d+)?)\\s*(B|K(B|iB)?|M(B|iB)?|G(B|iB)?|T(B|iB)?)?$","i").exec(t.value)||(new En.H).toBytes(t.value)<1024?{quotaMaxSize:!0}:null}setSubuser(t,o){const _={"full-control":"full","read-write":"readwrite"},E=this.getUID();this.submitObservables.push(this.rgwUserService.createSubuser(E,{subuser:t.id,access:t.permissions in _?_[t.permissions]:t.permissions,key_type:"swift",secret_key:t.secret_key,generate_secret:t.generate_secret?"true":"false"})),R().isNumber(o)?this.subusers[o]=t:(this.subusers.push(t),this.swiftKeys.push({user:t.id,secret_key:t.generate_secret?"Apply your changes first...":t.secret_key})),this.userForm.markAsDirty()}deleteSubuser(t){const o=this.subusers[t];this.submitObservables.push(this.rgwUserService.deleteSubuser(this.getUID(),o.id)),this.s3Keys=this.s3Keys.filter(_=>_.user!==o.id),this.swiftKeys=this.swiftKeys.filter(_=>_.user!==o.id),this.subusers.splice(t,1),this.userForm.markAsDirty()}setCapability(t,o){const _=this.getUID();if(R().isNumber(o)){const E=this.capabilities[o];this.submitObservables.push(this.rgwUserService.deleteCapability(_,E.type,E.perm)),this.submitObservables.push(this.rgwUserService.addCapability(_,t.type,t.perm)),this.capabilities[o]=t}else this.submitObservables.push(this.rgwUserService.addCapability(_,t.type,t.perm)),this.capabilities=[...this.capabilities,t];this.userForm.markAsDirty()}deleteCapability(t){const o=this.capabilities[t];this.submitObservables.push(this.rgwUserService.deleteCapability(this.getUID(),o.type,o.perm)),this.capabilities.splice(t,1),this.capabilities=[...this.capabilities],this.userForm.markAsDirty()}hasAllCapabilities(t){return!R().difference(Ln.getAll(),R().map(t,"type")).length}setS3Key(t,o){if(!R().isNumber(o)){const _=t.user.match(/([^:]+)(:(.+))?/),E=_[1],U={subuser:_[2]?_[3]:"",generate_key:t.generate_key?"true":"false"};"false"===U.generate_key&&(R().isNil(t.access_key)||(U.access_key=t.access_key),R().isNil(t.secret_key)||(U.secret_key=t.secret_key)),this.submitObservables.push(this.rgwUserService.addS3Key(E,U)),this.s3Keys.push({user:t.user,access_key:t.generate_key?"Apply your changes first...":t.access_key,secret_key:t.generate_key?"Apply your changes first...":t.secret_key})}this.userForm.markAsDirty()}deleteS3Key(t){const o=this.s3Keys[t];this.submitObservables.push(this.rgwUserService.deleteS3Key(this.getUID(),o.access_key)),this.s3Keys.splice(t,1),this.userForm.markAsDirty()}showSubuserModal(t){const o=this.getUID(),_=this.modalService.show(Q_);if(R().isNumber(t)){const E=this.subusers[t];_.componentInstance.setEditing(),_.componentInstance.setValues(o,E.id,E.permissions)}else _.componentInstance.setEditing(!1),_.componentInstance.setValues(o),_.componentInstance.setSubusers(this.subusers);_.componentInstance.submitAction.subscribe(E=>{this.setSubuser(E,t)})}showS3KeyModal(t){const o=this.modalService.show(Dn);if(R().isNumber(t)){const _=this.s3Keys[t];o.componentInstance.setViewing(),o.componentInstance.setValues(_.user,_.access_key,_.secret_key)}else{const _=this._getS3KeyUserCandidates();o.componentInstance.setViewing(!1),o.componentInstance.setUserCandidates(_),o.componentInstance.submitAction.subscribe(E=>{this.setS3Key(E)})}}showSwiftKeyModal(t){const o=this.modalService.show(wn),_=this.swiftKeys[t];o.componentInstance.setValues(_.user,_.secret_key)}showCapabilityModal(t){const o=this.modalService.show(b_);if(R().isNumber(t)){const _=this.capabilities[t];o.componentInstance.setEditing(),o.componentInstance.setValues(_.type,_.perm)}else o.componentInstance.setEditing(!1),o.componentInstance.setCapabilities(this.capabilities);o.componentInstance.submitAction.subscribe(_=>{this.setCapability(_,t)})}_isGeneralDirty(){return["display_name","email","max_buckets_mode","max_buckets","system","suspended"].some(t=>this.userForm.get(t).dirty)}_isUserQuotaDirty(){return["user_quota_enabled","user_quota_max_size_unlimited","user_quota_max_size","user_quota_max_objects_unlimited","user_quota_max_objects"].some(t=>this.userForm.get(t).dirty)}_isBucketQuotaDirty(){return["bucket_quota_enabled","bucket_quota_max_size_unlimited","bucket_quota_max_size","bucket_quota_max_objects_unlimited","bucket_quota_max_objects"].some(t=>this.userForm.get(t).dirty)}_getCreateArgs(){const t={uid:this.getUID(),display_name:this.userForm.getValue("display_name"),system:this.userForm.getValue("system"),suspended:this.userForm.getValue("suspended"),email:"",max_buckets:this.userForm.getValue("max_buckets"),generate_key:this.userForm.getValue("generate_key"),access_key:"",secret_key:""},o=this.userForm.getValue("email");R().isString(o)&&o.length>0&&R().merge(t,{email:o}),this.userForm.getValue("generate_key")||R().merge(t,{generate_key:!1,access_key:this.userForm.getValue("access_key"),secret_key:this.userForm.getValue("secret_key")});const E=parseInt(this.userForm.getValue("max_buckets_mode"),10);return R().includes([-1,0],E)&&R().merge(t,{max_buckets:E}),t}_getUpdateArgs(){const t={},o=["display_name","email","max_buckets","system","suspended"];for(const E of o)t[E]=this.userForm.getValue(E);const _=parseInt(this.userForm.getValue("max_buckets_mode"),10);return R().includes([-1,0],_)&&(t.max_buckets=_),t}_getUserQuotaArgs(){const t={quota_type:"user",enabled:this.userForm.getValue("user_quota_enabled"),max_size_kb:-1,max_objects:-1};if(!this.userForm.getValue("user_quota_max_size_unlimited")){const o=(new En.H).toBytes(this.userForm.getValue("user_quota_max_size"));t.max_size_kb=(o/1024).toFixed(0)}return this.userForm.getValue("user_quota_max_objects_unlimited")||(t.max_objects=this.userForm.getValue("user_quota_max_objects")),t}_getBucketQuotaArgs(){const t={quota_type:"bucket",enabled:this.userForm.getValue("bucket_quota_enabled"),max_size_kb:-1,max_objects:-1};if(!this.userForm.getValue("bucket_quota_max_size_unlimited")){const o=(new En.H).toBytes(this.userForm.getValue("bucket_quota_max_size"));t.max_size_kb=(o/1024).toFixed(0)}return this.userForm.getValue("bucket_quota_max_objects_unlimited")||(t.max_objects=this.userForm.getValue("bucket_quota_max_objects")),t}_getS3KeyUserCandidates(){let t=[];const o=this.getUID();return R().isString(o)&&!R().isEmpty(o)&&t.push(o),this.subusers.forEach(_=>{t.push(_.id)}),this.s3Keys.forEach(_=>{t.push(_.user)}),t=R().uniq(t),t}onMaxBucketsModeChange(t){"1"===t&&(this.userForm.get("max_buckets").valid||this.userForm.patchValue({max_buckets:1e3}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Pe.O),e.Y36(N.gz),e.Y36(N.F0),e.Y36(D),e.Y36(Qe.Z),e.Y36(fe.g),e.Y36(T.p4))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-user-form"]],features:[e.qOj],decls:1,vars:1,consts:function(){let i,t,o,_,E,U,H,K,Q,te,Te,pe,de,Oe,ge,ve,we,We,Re,$e,Ue,xe,Ze,ke,le,me,Se,qe,he,Fe,Rt,mt,Mt,St,ht,Ct,Ft,Ot,Nt,Pt,At,bt,It,Gt,yt,Lt,Dt,vt,wt,Wt,$t,Ut,xt,Zt,kt,Bt,zt,qt,Ht,Xt,Yt,Kt,Qt,Jt,Vt,jt,en,tn,nn,on,_n,rn,sn;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="User ID",o="Show Tenant",_="Full name",E="Email address",U="Max. buckets",H="Disabled",K="Unlimited",Q="Custom",te="Suspended",Te="Suspending the user disables the user and subuser.",pe="System user",de="System users are distinct from regular users, they are used by the RGW service to perform administrative tasks, manage buckets and objects",Oe="Quota utilisateur",ge="Enabled",ve="Quota de compartiments",we="Enabled",We="This field is required.",Re="La valeur n'est pas valide.",$e="L'ID utilisateur sp\xE9cifi\xE9 est d\xE9j\xE0 utilis\xE9.",Ue="Tenant",xe="La valeur n'est pas valide.",Ze="The chosen user ID exists in this tenant.",ke="La valeur n'est pas valide.",le="This field is required.",me="Ceci n'est pas une adresse \xE9lectronique valide.",Se="L'adresse \xE9lectronique sp\xE9cifi\xE9e est d\xE9j\xE0 utilis\xE9e.",qe="This field is required.",he="The entered value must be >= 1.",Fe="Clef S3",Rt="G\xE9n\xE9rer automatiquement la clef",mt="Clef d'acc\xE8s",Mt="This field is required.",St="Clef secr\xE8te",ht="This field is required.",Ct="Utilisateurs secondaires",Ft="\n          " + "\ufffd0\ufffd" + "\n          " + "\ufffd1\ufffd" + "\n        ",Ot="Il n'y a aucun utilisateur secondaire.",Nt="Edit",Pt="Delete",At="Clefs",bt="S3",It="\n          " + "\ufffd0\ufffd" + "\n          " + "\ufffd1\ufffd" + "\n        ",Gt="Swift",yt="Il n'y a pas de clefs.",Lt="Show",Dt="Delete",vt="Il n'y a pas de clefs.",wt="Show",Wt="Fonctionnalit\xE9s",$t="All capabilities are already added.",Ut="\n          " + "\ufffd0\ufffd" + "\n          " + "\ufffd1\ufffd" + "\n        ",xt="Il n'y a aucune fonctionnalit\xE9.",Zt="Edit",kt="Delete",Bt="Taille illimit\xE9e",zt="Taille max.",qt="This field is required.",Ht="La valeur n'est pas valide.",Xt="Size must be a number or in a valid format. eg: 5 GiB",Yt="Objets illimit\xE9s",Kt="Nombre max. d'objets",Qt="This field is required.",Jt="La valeur saisie doit \xEAtre >= 0.",Vt="Taille illimit\xE9e",jt="Taille max.",en="This field is required.",tn="La valeur n'est pas valide.",nn="Size must be a number or in a valid format. eg: 5 GiB",on="Objets illimit\xE9s",_n="Nombre max. d'objets",rn="This field is required.",sn="La valeur saisie doit \xEAtre >= 0.",[["class","cd-col-form",4,"cdFormLoading"],[1,"cd-col-form"],["novalidate","",3,"formGroup"],["frm","ngForm"],[1,"card"],[1,"card-header"],i,[1,"card-body"],[1,"form-group","row"],["for","user_id",1,"cd-col-form-label",3,"ngClass"],t,[1,"cd-col-form-input"],["id","user_id","type","text","formControlName","user_id",1,"form-control",3,"readonly"],["class","invalid-feedback",4,"ngIf"],[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","show_tenant","type","checkbox","formControlName","show_tenant",1,"custom-control-input",3,"readonly","click"],["for","show_tenant",1,"custom-control-label"],o,["class","form-group row",4,"ngIf"],["for","display_name",1,"cd-col-form-label",3,"ngClass"],_,["id","display_name","type","text","formControlName","display_name",1,"form-control"],["for","email",1,"cd-col-form-label"],E,["id","email","type","text","formControlName","email",1,"form-control"],["for","max_buckets_mode",1,"cd-col-form-label"],U,["formControlName","max_buckets_mode","name","max_buckets_mode","id","max_buckets_mode",1,"form-select",3,"change"],["value","-1"],H,["value","0"],K,["value","1"],Q,["id","suspended","type","checkbox","formControlName","suspended",1,"custom-control-input"],["for","suspended",1,"custom-control-label"],te,Te,["id","system","type","checkbox","formControlName","system",1,"custom-control-input"],["for","system",1,"custom-control-label"],pe,de,[4,"ngIf"],Oe,["id","user_quota_enabled","type","checkbox","formControlName","user_quota_enabled",1,"custom-control-input"],["for","user_quota_enabled",1,"custom-control-label"],ge,ve,["id","bucket_quota_enabled","type","checkbox","formControlName","bucket_quota_enabled",1,"custom-control-input"],["for","bucket_quota_enabled",1,"custom-control-label"],we,[1,"card-footer"],["wrappingClass","text-right",3,"form","submitText","submitActionEvent"],[1,"invalid-feedback"],We,Re,$e,["for","tenant",1,"cd-col-form-label"],Ue,["id","tenant","type","text","formControlName","tenant","autofocus","",1,"form-control",3,"readonly"],xe,Ze,ke,le,me,Se,[1,"cd-col-form-label"],["id","max_buckets","type","number","formControlName","max_buckets","min","1",1,"form-control"],qe,he,Fe,["id","generate_key","type","checkbox","formControlName","generate_key",1,"custom-control-input"],["for","generate_key",1,"custom-control-label"],Rt,["for","access_key",1,"cd-col-form-label","required"],mt,[1,"input-group"],["id","access_key","type","password","formControlName","access_key",1,"form-control"],["type","button","cdPasswordButton","access_key",1,"btn","btn-light"],["source","access_key"],Mt,["for","secret_key",1,"cd-col-form-label","required"],St,["id","secret_key","type","password","formControlName","secret_key",1,"form-control"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["source","secret_key"],ht,Ct,[1,"row"],["class","no-border",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row","my-2"],[1,"col-12"],["type","button",1,"btn","btn-light","float-end","tc_addSubuserButton",3,"click"],[3,"ngClass"],Ft,[1,"help-block"],[1,"no-border"],[1,"form-text","text-muted"],Ot,[1,"input-group-text"],["type","text","readonly","",1,"cd-form-control",3,"value"],["type","button","ngbTooltip",Nt,1,"btn","btn-light","tc_showSubuserButton",3,"click"],["type","button","ngbTooltip",Pt,1,"btn","btn-light","tc_deleteSubuserButton",3,"click"],At,bt,["type","button",1,"btn","btn-light","float-end","tc_addS3KeyButton",3,"click"],It,Gt,yt,["type","button","ngbTooltip",Lt,1,"btn","btn-light","tc_showS3KeyButton",3,"click"],["type","button","ngbTooltip",Dt,1,"btn","btn-light","tc_deleteS3KeyButton",3,"click"],vt,["type","button","ngbTooltip",wt,1,"btn","btn-light","tc_showSwiftKeyButton",3,"click"],Wt,["type","button","ngbTooltip",$t,"triggers","pointerenter:pointerleave",1,"btn","btn-light","float-end","tc_addCapButton",3,"disabled","disableTooltip","click"],Ut,xt,["type","button","ngbTooltip",Zt,1,"btn","btn-light","tc_editCapButton",3,"click"],["type","button","ngbTooltip",kt,1,"btn","btn-light","tc_deleteCapButton",3,"click"],["id","user_quota_max_size_unlimited","type","checkbox","formControlName","user_quota_max_size_unlimited",1,"custom-control-input"],["for","user_quota_max_size_unlimited",1,"custom-control-label"],Bt,["for","user_quota_max_size",1,"cd-col-form-label","required"],zt,["id","user_quota_max_size","type","text","formControlName","user_quota_max_size","cdDimlessBinary","",1,"form-control"],qt,Ht,Xt,["id","user_quota_max_objects_unlimited","type","checkbox","formControlName","user_quota_max_objects_unlimited",1,"custom-control-input"],["for","user_quota_max_objects_unlimited",1,"custom-control-label"],Yt,["for","user_quota_max_objects",1,"cd-col-form-label","required"],Kt,["id","user_quota_max_objects","type","number","formControlName","user_quota_max_objects","min","0",1,"form-control"],Qt,Jt,["id","bucket_quota_max_size_unlimited","type","checkbox","formControlName","bucket_quota_max_size_unlimited",1,"custom-control-input"],["for","bucket_quota_max_size_unlimited",1,"custom-control-label"],Vt,["for","bucket_quota_max_size",1,"cd-col-form-label","required"],jt,["id","bucket_quota_max_size","type","text","formControlName","bucket_quota_max_size","cdDimlessBinary","",1,"form-control"],en,tn,nn,["id","bucket_quota_max_objects_unlimited","type","checkbox","formControlName","bucket_quota_max_objects_unlimited",1,"custom-control-input"],["for","bucket_quota_max_objects_unlimited",1,"custom-control-label"],on,["for","bucket_quota_max_objects",1,"cd-col-form-label","required"],_n,["id","bucket_quota_max_objects","type","number","formControlName","bucket_quota_max_objects","min","0",1,"form-control"],rn,sn]},template:function(t,o){1&t&&e.YNc(0,qr,100,42,"div",0),2&t&&e.Q6J("cdFormLoading",o.loading)},dependencies:[g.mk,g.sg,g.O5,ze.S,pt.s,be.p,ut.U,J_.Q,gt.C,pn.y,Ge.o,O.b,l.P,w.V,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.Wl,r.EJ,r.JJ,r.JL,r.qQ,r.sg,r.u,b._L,g.rS,Je.m,x.i]}),n})();var mn=p(99466),Hr=p(86969),Xr=p(78877);const Yr=["accessKeyTpl"],Kr=["secretKeyTpl"],Qr=function(n){return[n]};function Jr(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"legend"),e.SDv(2,13),e.qZA(),e.TgZ(3,"div")(4,"cd-table",14),e.NdJ("updateSelection",function(_){e.CHM(t);const E=e.oxw(3);return e.KtG(E.updateKeysSelection(_))}),e.TgZ(5,"div",15)(6,"div",16)(7,"button",17),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(3);return e.KtG(_.showKeyModal())}),e._UZ(8,"i",18),e.ynx(9),e.SDv(10,19),e.BQk(),e.qZA()()()()()()}if(2&n){const t=e.oxw(3);e.xp6(4),e.Q6J("data",t.keys)("columns",t.keysColumns),e.xp6(3),e.Q6J("disabled",!t.keysSelection.hasSingleSelection),e.xp6(1),e.Q6J("ngClass",e.VKq(4,Qr,t.icons.show))}}function Vr(n,i){if(1&n&&(e.TgZ(0,"tr")(1,"td",8),e.SDv(2,20),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(4),e.Oqu(t.user.email)}}function jr(n,i){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.AsE(" ",t.id," (",t.permissions,") ")}}function es(n,i){if(1&n&&(e.TgZ(0,"tr")(1,"td",8),e.SDv(2,21),e.qZA(),e.TgZ(3,"td"),e.YNc(4,jr,2,2,"div",22),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(4),e.Q6J("ngForOf",t.user.subusers)}}function ts(n,i){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.AsE(" ",t.type," (",t.perm,") ")}}function ns(n,i){if(1&n&&(e.TgZ(0,"tr")(1,"td",8),e.SDv(2,23),e.qZA(),e.TgZ(3,"td"),e.YNc(4,ts,2,2,"div",22),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(4),e.Q6J("ngForOf",t.user.caps)}}function os(n,i){if(1&n&&(e.TgZ(0,"tr")(1,"td",8),e.SDv(2,24),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"join"),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(4),e.Oqu(e.lcZ(5,1,t.user.mfa_ids))}}function is(n,i){1&n&&(e.TgZ(0,"td"),e._uU(1,"-"),e.qZA())}function _s(n,i){1&n&&(e.TgZ(0,"td"),e.SDv(1,29),e.qZA())}function rs(n,i){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"dimlessBinary"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.user.user_quota.max_size)," ")}}function ss(n,i){1&n&&(e.TgZ(0,"td"),e._uU(1,"-"),e.qZA())}function as(n,i){1&n&&(e.TgZ(0,"td"),e.SDv(1,30),e.qZA())}function ls(n,i){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.user.user_quota.max_objects," ")}}function cs(n,i){if(1&n&&(e.TgZ(0,"div")(1,"legend"),e.SDv(2,25),e.qZA(),e.TgZ(3,"table",2)(4,"tbody")(5,"tr")(6,"td",3),e.SDv(7,26),e.qZA(),e.TgZ(8,"td",5),e._uU(9),e.ALo(10,"booleanText"),e.qZA()(),e.TgZ(11,"tr")(12,"td",8),e.SDv(13,27),e.qZA(),e.YNc(14,is,2,0,"td",0),e.YNc(15,_s,2,0,"td",0),e.YNc(16,rs,3,3,"td",0),e.qZA(),e.TgZ(17,"tr")(18,"td",8),e.SDv(19,28),e.qZA(),e.YNc(20,ss,2,0,"td",0),e.YNc(21,as,2,0,"td",0),e.YNc(22,ls,2,1,"td",0),e.qZA()()()()),2&n){const t=e.oxw(3);e.xp6(9),e.Oqu(e.lcZ(10,7,t.user.user_quota.enabled)),e.xp6(5),e.Q6J("ngIf",!t.user.user_quota.enabled),e.xp6(1),e.Q6J("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_size<=-1),e.xp6(1),e.Q6J("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_size>-1),e.xp6(4),e.Q6J("ngIf",!t.user.user_quota.enabled),e.xp6(1),e.Q6J("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_objects<=-1),e.xp6(1),e.Q6J("ngIf",t.user.user_quota.enabled&&t.user.user_quota.max_objects>-1)}}function us(n,i){1&n&&(e.TgZ(0,"td"),e._uU(1,"-"),e.qZA())}function ds(n,i){1&n&&(e.TgZ(0,"td"),e.SDv(1,35),e.qZA())}function fs(n,i){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"dimlessBinary"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.user.bucket_quota.max_size)," ")}}function ps(n,i){1&n&&(e.TgZ(0,"td"),e._uU(1,"-"),e.qZA())}function gs(n,i){1&n&&(e.TgZ(0,"td"),e.SDv(1,36),e.qZA())}function Ts(n,i){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.user.bucket_quota.max_objects," ")}}function Es(n,i){if(1&n&&(e.TgZ(0,"div")(1,"legend"),e.SDv(2,31),e.qZA(),e.TgZ(3,"table",2)(4,"tbody")(5,"tr")(6,"td",3),e.SDv(7,32),e.qZA(),e.TgZ(8,"td",5),e._uU(9),e.ALo(10,"booleanText"),e.qZA()(),e.TgZ(11,"tr")(12,"td",8),e.SDv(13,33),e.qZA(),e.YNc(14,us,2,0,"td",0),e.YNc(15,ds,2,0,"td",0),e.YNc(16,fs,3,3,"td",0),e.qZA(),e.TgZ(17,"tr")(18,"td",8),e.SDv(19,34),e.qZA(),e.YNc(20,ps,2,0,"td",0),e.YNc(21,gs,2,0,"td",0),e.YNc(22,Ts,2,1,"td",0),e.qZA()()()()),2&n){const t=e.oxw(3);e.xp6(9),e.Oqu(e.lcZ(10,7,t.user.bucket_quota.enabled)),e.xp6(5),e.Q6J("ngIf",!t.user.bucket_quota.enabled),e.xp6(1),e.Q6J("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_size<=-1),e.xp6(1),e.Q6J("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_size>-1),e.xp6(4),e.Q6J("ngIf",!t.user.bucket_quota.enabled),e.xp6(1),e.Q6J("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_objects<=-1),e.xp6(1),e.Q6J("ngIf",t.user.bucket_quota.enabled&&t.user.bucket_quota.max_objects>-1)}}function Rs(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Jr,11,6,"div",0),e.TgZ(2,"legend"),e.SDv(3,1),e.qZA(),e.TgZ(4,"table",2)(5,"tbody")(6,"tr")(7,"td",3),e.SDv(8,4),e.qZA(),e.TgZ(9,"td",5),e._uU(10),e.qZA()(),e.TgZ(11,"tr")(12,"td",3),e.SDv(13,6),e.qZA(),e.TgZ(14,"td",5),e._uU(15),e.qZA()(),e.TgZ(16,"tr")(17,"td",3),e.SDv(18,7),e.qZA(),e.TgZ(19,"td",5),e._uU(20),e.qZA()(),e.TgZ(21,"tr")(22,"td",8),e.SDv(23,9),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.qZA()(),e.YNc(26,Vr,5,1,"tr",0),e.TgZ(27,"tr")(28,"td",8),e.SDv(29,10),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.ALo(32,"booleanText"),e.qZA()(),e.TgZ(33,"tr")(34,"td",8),e.SDv(35,11),e.qZA(),e.TgZ(36,"td"),e._uU(37),e.ALo(38,"booleanText"),e.qZA()(),e.TgZ(39,"tr")(40,"td",8),e.SDv(41,12),e.qZA(),e.TgZ(42,"td"),e._uU(43),e.ALo(44,"map"),e.qZA()(),e.YNc(45,es,5,1,"tr",0),e.YNc(46,ns,5,1,"tr",0),e.YNc(47,os,6,3,"tr",0),e.qZA()(),e.YNc(48,cs,23,9,"div",0),e.YNc(49,Es,23,9,"div",0),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.keys.length),e.xp6(9),e.Oqu(t.user.tenant),e.xp6(5),e.Oqu(t.user.user_id),e.xp6(5),e.Oqu(t.user.uid),e.xp6(5),e.Oqu(t.user.display_name),e.xp6(1),e.Q6J("ngIf",null==t.user.email?null:t.user.email.length),e.xp6(5),e.Oqu(e.lcZ(32,14,t.user.suspended)),e.xp6(6),e.Oqu(e.lcZ(38,16,t.user.system)),e.xp6(6),e.Oqu(e.xi3(44,18,t.user.max_buckets,t.maxBucketsMap)),e.xp6(2),e.Q6J("ngIf",t.user.subusers&&t.user.subusers.length),e.xp6(1),e.Q6J("ngIf",t.user.caps&&t.user.caps.length),e.xp6(1),e.Q6J("ngIf",null==t.user.mfa_ids?null:t.user.mfa_ids.length),e.xp6(1),e.Q6J("ngIf",t.user.user_quota),e.xp6(1),e.Q6J("ngIf",t.user.bucket_quota)}}function ms(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Rs,50,21,"div",0),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.user)}}let Ms=(()=>{class n{constructor(t,o){this.rgwUserService=t,this.modalService=o,this.keys=[],this.keysColumns=[],this.keysSelection=new ot.r,this.icons=q.P}ngOnInit(){this.keysColumns=[{name:"Username",prop:"username",flexGrow:1},{name:"Type",prop:"type",flexGrow:1}],this.maxBucketsMap={"-1":"Disabled",0:"Unlimited"}}ngOnChanges(){this.selection&&(this.user=this.selection,this.user.subusers=R().sortBy(this.user.subusers,"id"),this.user.caps=R().sortBy(this.user.caps,"type"),this.rgwUserService.getQuota(this.user.uid).subscribe(t=>{R().extend(this.user,t)}),this.keys=[],this.user.keys&&this.user.keys.forEach(t=>{this.keys.push({id:this.keys.length+1,type:"S3",username:t.user,ref:t})}),this.user.swift_keys&&this.user.swift_keys.forEach(t=>{this.keys.push({id:this.keys.length+1,type:"Swift",username:t.user,ref:t})}),this.keys=R().sortBy(this.keys,"user"))}updateKeysSelection(t){this.keysSelection=t}showKeyModal(){const t=this.keysSelection.first(),o=this.modalService.show("S3"===t.type?Dn:wn);switch(t.type){case"S3":o.componentInstance.setViewing(),o.componentInstance.setValues(t.ref.user,t.ref.access_key,t.ref.secret_key);break;case"Swift":o.componentInstance.setValues(t.ref.user,t.ref.secret_key)}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(D),e.Y36(Qe.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-user-details"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Yr,5),e.Gf(Kr,5)),2&t){let _;e.iGM(_=e.CRH())&&(o.accessKeyTpl=_.first),e.iGM(_=e.CRH())&&(o.secretKeyTpl=_.first)}},inputs:{selection:"selection"},features:[e.TTD],decls:1,vars:1,consts:function(){let i,t,o,_,E,U,H,K,Q,te,Te,pe,de,Oe,ge,ve,we,We,Re,$e,Ue,xe,Ze,ke,le,me;return i="D\xE9tails",t="Tenant",o="User ID",_="Username",E="Full name",U="Suspended",H="System user",K="Nombre maximal de compartiments",Q="Clefs",te="Show",Te="Email address",pe="Utilisateurs secondaires",de="Fonctionnalit\xE9s",Oe="MFAs(Id)",ge="Quota utilisateur",ve="Enabled",we="Taille maximale",We="Nombre maximal d'objets",Re="Unlimited",$e="Unlimited",Ue="Quota de compartiments",xe="Enabled",Ze="Taille maximale",ke="Nombre maximal d'objets",le="Unlimited",me="Unlimited",[[4,"ngIf"],i,[1,"table","table-striped","table-bordered"],[1,"bold","w-25"],t,[1,"w-75"],o,_,[1,"bold"],E,U,H,K,Q,["columnMode","flex","selectionType","multi","forceIdentifier","true",3,"data","columns","updateSelection"],[1,"table-actions"],["dropdown","",1,"btn-group"],["type","button",1,"btn","btn-accent",3,"disabled","click"],[3,"ngClass"],te,Te,pe,[4,"ngFor","ngForOf"],de,Oe,ge,ve,we,We,Re,$e,Ue,xe,Ze,ke,le,me]},template:function(t,o){1&t&&e.YNc(0,ms,2,1,"ng-container",0),2&t&&e.Q6J("ngIf",o.selection)},dependencies:[g.mk,g.sg,g.O5,Ve.a,Ge.o,bn.T,gn.$,Hr.A,Xr.b]}),n})();const Un=function(){return{exact:!0}};let Ss=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-user-tabs"]],decls:7,vars:4,consts:function(){let i,t;return i="Utilisateurs",t="Roles",[[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/rgw/user","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],i,["routerLink","/rgw/roles","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link",3,"routerLinkActiveOptions"],t]},template:function(t,o){1&t&&(e.TgZ(0,"ul",0)(1,"li",1)(2,"a",2),e.SDv(3,3),e.qZA()(),e.TgZ(4,"li",1)(5,"a",4),e.SDv(6,5),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("routerLinkActiveOptions",e.DdM(2,Un)),e.xp6(3),e.Q6J("routerLinkActiveOptions",e.DdM(3,Un)))},dependencies:[N.rH,N.Od]}),n})();const hs=["userSizeTpl"],Cs=["userObjectTpl"];function Fs(n,i){if(1&n&&e._UZ(0,"cd-usage-bar",8),2&n){const t=e.oxw().row;e.Q6J("total",t.user_quota.max_size)("used",t.stats.size_actual)}}function Os(n,i){1&n&&e.SDv(0,9)}function Ns(n,i){if(1&n&&(e.YNc(0,Fs,1,2,"cd-usage-bar",6),e.YNc(1,Os,1,0,"ng-template",null,7,e.W1O)),2&n){const t=i.row,o=e.MAs(2);e.Q6J("ngIf",t.user_quota.max_size>0&&t.user_quota.enabled)("ngIfElse",o)}}function Ps(n,i){if(1&n&&e._UZ(0,"cd-usage-bar",12),2&n){const t=e.oxw().row;e.Q6J("total",t.user_quota.max_objects)("used",t.stats.num_objects)("isBinary",!1)}}function As(n,i){1&n&&e.SDv(0,13)}function bs(n,i){if(1&n&&(e.YNc(0,Ps,1,3,"cd-usage-bar",10),e.YNc(1,As,1,0,"ng-template",null,11,e.W1O)),2&n){const t=i.row,o=e.MAs(2);e.Q6J("ngIf",t.user_quota.max_objects>0&&t.user_quota.enabled)("ngIfElse",o)}}let Gs=(()=>{class n extends cn.o{constructor(t,o,_,E,U,H){super(H),this.authStorageService=t,this.rgwUserService=o,this.modalService=_,this.urlBuilder=E,this.actionLabels=U,this.ngZone=H,this.columns=[],this.users=[],this.selection=new ot.r}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:"Username",prop:"uid",flexGrow:1},{name:"Tenant",prop:"tenant",flexGrow:1},{name:"Full name",prop:"display_name",flexGrow:1},{name:"Email address",prop:"email",flexGrow:1},{name:"Suspended",prop:"suspended",flexGrow:1,cellClass:"text-center",cellTransformation:mn.e.checkIcon},{name:"Max. buckets",prop:"max_buckets",flexGrow:1,cellTransformation:mn.e.map,customTemplateConfig:{"-1":"Disabled",0:"Unlimited"}},{name:"Capacity Limit %",prop:"size_usage",cellTemplate:this.userSizeTpl,flexGrow:.8},{name:"Object Limit %",prop:"object_usage",cellTemplate:this.userObjectTpl,flexGrow:.8}];const t=()=>this.selection.first()&&`${encodeURIComponent(this.selection.first().uid)}`;this.tableActions=[{permission:"create",icon:q.P.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE,canBePrimary:U=>!U.hasSelection},{permission:"update",icon:q.P.edit,routerLink:()=>this.urlBuilder.getEdit(t()),name:this.actionLabels.EDIT},{permission:"delete",icon:q.P.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:U=>U.hasMultiSelection}],this.setTableRefreshTimeout()}getUserList(t){this.setTableRefreshTimeout(),this.rgwUserService.list().subscribe(o=>{this.users=o},()=>{t.error()})}updateSelection(t){this.selection=t}deleteAction(){this.modalService.show(st.M,{itemDescription:this.selection.hasSingleSelection?"user":"users",itemNames:this.selection.selected.map(t=>t.uid),submitActionObservable:()=>new dt.y(t=>{(0,y.D)(this.selection.selected.map(o=>this.rgwUserService.delete(o.uid))).subscribe({error:o=>{t.error(o),this.table.refreshBtn()},complete:()=>{t.complete(),this.table.refreshBtn()}})})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(rt.j),e.Y36(D),e.Y36(Qe.Z),e.Y36(it.F),e.Y36(T.p4),e.Y36(e.R0b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-user-list"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Ve.a,7),e.Gf(hs,7),e.Gf(Cs,7)),2&t){let _;e.iGM(_=e.CRH())&&(o.table=_.first),e.iGM(_=e.CRH())&&(o.userSizeTpl=_.first),e.iGM(_=e.CRH())&&(o.userObjectTpl=_.first)}},features:[e._Bn([{provide:it.F,useValue:new it.F("rgw/user")}]),e.qOj],decls:9,vars:9,consts:function(){let i,t;return i="No Limit",t="No Limit",[["columnMode","flex","selectionType","multiClick","identifier","uid",3,"autoReload","data","columns","hasDetails","status","setExpandedRow","updateSelection","fetchData"],["table",""],[1,"table-actions",3,"permission","selection","tableActions"],["cdTableDetail","",3,"selection"],["userSizeTpl",""],["userObjectTpl",""],[3,"total","used",4,"ngIf","ngIfElse"],["noSizeQuota",""],[3,"total","used"],i,[3,"total","used","isBinary",4,"ngIf","ngIfElse"],["noObjectQuota",""],[3,"total","used","isBinary"],t]},template:function(t,o){1&t&&(e._UZ(0,"cd-rgw-user-tabs"),e.TgZ(1,"cd-table",0,1),e.NdJ("setExpandedRow",function(E){return o.setExpandedRow(E)})("updateSelection",function(E){return o.updateSelection(E)})("fetchData",function(E){return o.getUserList(E)}),e._UZ(3,"cd-table-actions",2)(4,"cd-rgw-user-details",3),e.qZA(),e.YNc(5,Ns,3,2,"ng-template",null,4,e.W1O),e.YNc(7,bs,3,2,"ng-template",null,5,e.W1O)),2&t&&(e.xp6(1),e.Q6J("autoReload",!1)("data",o.users)("columns",o.columns)("hasDetails",!0)("status",o.tableStatus),e.xp6(2),e.Q6J("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions),e.xp6(1),e.Q6J("selection",o.expandedRow))},dependencies:[g.O5,An.O,Ve.a,ft.K,Ms,Ss]}),n})();var Mn=p(35512),xn=p(13464),Zn=p(46797),at=p(95596),Xe=p(95463),Me=p(43186),lt=p(97937),_t=p(98961);function ys(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,33),e.qZA())}function Ls(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,34),e.qZA())}function Ds(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,35),e.qZA())}function vs(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,36),e.qZA())}function ws(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,37),e.qZA())}function Ws(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,38),e.qZA())}function $s(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,39),e.qZA())}function Us(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,40),e.qZA())}function xs(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,41),e.qZA())}function Zs(n,i){1&n&&(e.TgZ(0,"span",32),e.SDv(1,42),e.qZA())}let ks=(()=>{class n{constructor(t,o,_,E,U,H,K,Q,te){this.activeModal=t,this.actionLabels=o,this.rgwMultisiteService=_,this.rgwZoneService=E,this.notificationService=U,this.rgwZonegroupService=H,this.rgwRealmService=K,this.rgwDaemonService=Q,this.modalService=te,this.endpoints=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{2,4}$/,this.ipv4Rgx=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,this.ipv6Rgx=/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i,this.submitAction=new e.vpe,this.multisiteInfo=[],this.createForm()}createForm(){this.multisiteMigrateForm=new Xe.d({realmName:new r.p4(null,{validators:[r.kI.required,oe.hq.custom("uniqueName",t=>this.realmNames&&-1!==this.zoneNames.indexOf(t))]}),zonegroupName:new r.p4(null,{validators:[r.kI.required,oe.hq.custom("uniqueName",t=>this.zonegroupNames&&-1!==this.zoneNames.indexOf(t))]}),zoneName:new r.p4(null,{validators:[r.kI.required,oe.hq.custom("uniqueName",t=>this.zoneNames&&-1!==this.zoneNames.indexOf(t))]}),zone_endpoints:new r.p4([],{validators:[oe.hq.custom("endpoint",t=>!(R().isEmpty(t)||(t.includes(",")?(t.split(",").forEach(o=>!this.endpoints.test(o)&&!this.ipv4Rgx.test(o)&&!this.ipv6Rgx.test(o)),1):this.endpoints.test(t)||this.ipv4Rgx.test(t)||this.ipv6Rgx.test(t)))),r.kI.required]}),zonegroup_endpoints:new r.p4([],[oe.hq.custom("endpoint",t=>!(R().isEmpty(t)||(t.includes(",")?(t.split(",").forEach(o=>!this.endpoints.test(o)&&!this.ipv4Rgx.test(o)&&!this.ipv6Rgx.test(o)),1):this.endpoints.test(t)||this.ipv4Rgx.test(t)||this.ipv6Rgx.test(t)))),r.kI.required]),access_key:new r.p4(null),secret_key:new r.p4(null)})}ngOnInit(){this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.realmNames=this.realmList.map(t=>t.name),this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zonegroupNames=this.zonegroupList.map(t=>t.name),this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zoneNames=this.zoneList.map(t=>t.name)}submit(){const t=this.multisiteMigrateForm.value;this.realm=new Me.L6,this.realm.name=t.realmName,this.zonegroup=new Me.iG,this.zonegroup.name=t.zonegroupName,this.zonegroup.endpoints=t.zonegroup_endpoints,this.zone=new Me.jb,this.zone.name=t.zoneName,this.zone.endpoints=t.zone_endpoints,this.zone.system_key=new Me.VY,this.zone.system_key.access_key=t.access_key,this.zone.system_key.secret_key=t.secret_key,this.rgwMultisiteService.migrate(this.realm,this.zonegroup,this.zone).subscribe(()=>{this.notificationService.show(J.k.success,"Migration done successfully"),this.submitAction.emit(),this.activeModal.close()},()=>{this.notificationService.show(J.k.error,"Migration failed")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.Kz),e.Y36(T.p4),e.Y36(et.o),e.Y36(lt.g),e.Y36(fe.g),e.Y36(_t.K),e.Y36(at.y),e.Y36(z.b),e.Y36(Qe.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-migrate"]],outputs:{submitAction:"submitAction"},decls:68,vars:14,consts:function(){let i,t,o,_,E,U,H,K,Q,te,Te,pe,de,Oe,ge,ve,we,We;return i="Migrate Single Site to Multi-site " + "\ufffd#3\ufffd" + "" + "\ufffd#4\ufffd" + "Migrate from a single-site deployment with a default zone group and zone to a multi-site system" + "\ufffd/#4\ufffd" + "" + "\ufffd/#3\ufffd" + "",t="Realm Name",o="Rename default zone group",_="Zone group Endpoints ",E="Rename default zone",U="Zone Endpoints ",H="S3 access key " + "\ufffd#47\ufffd" + "" + "\ufffd#48\ufffd" + "To see or copy your S3 access key, go to " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Object Gateway > Users" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + " and click on your user name. In " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Keys" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + ", click " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Show" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + ". View the access key by clicking Show and copy the key by clicking " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Copy to Clipboard" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + "." + "\ufffd/#48\ufffd" + "" + "\ufffd/#47\ufffd" + "",H=e.Zx4(H),K="S3 secret key " + "\ufffd#58\ufffd" + "" + "\ufffd#59\ufffd" + "To see or copy your S3 access key, go to " + "[\ufffd#60\ufffd|\ufffd#61\ufffd|\ufffd#62\ufffd|\ufffd#63\ufffd]" + "Object Gateway > Users" + "[\ufffd/#60\ufffd|\ufffd/#61\ufffd|\ufffd/#62\ufffd|\ufffd/#63\ufffd]" + " and click on your user name. In " + "[\ufffd#60\ufffd|\ufffd#61\ufffd|\ufffd#62\ufffd|\ufffd#63\ufffd]" + "Keys" + "[\ufffd/#60\ufffd|\ufffd/#61\ufffd|\ufffd/#62\ufffd|\ufffd/#63\ufffd]" + ", click " + "[\ufffd#60\ufffd|\ufffd#61\ufffd|\ufffd#62\ufffd|\ufffd#63\ufffd]" + "Show" + "[\ufffd/#60\ufffd|\ufffd/#61\ufffd|\ufffd/#62\ufffd|\ufffd/#63\ufffd]" + ". View the secret key by clicking Show and copy the key by clicking " + "[\ufffd#60\ufffd|\ufffd#61\ufffd|\ufffd#62\ufffd|\ufffd#63\ufffd]" + "Copy to Clipboard" + "[\ufffd/#60\ufffd|\ufffd/#61\ufffd|\ufffd/#62\ufffd|\ufffd/#63\ufffd]" + "." + "\ufffd/#59\ufffd" + "" + "\ufffd/#58\ufffd" + "",K=e.Zx4(K),Q="This field is required.",te="The chosen realm name is already in use.",Te="This field is required.",pe="The chosen zone group name is already in use.",de="This field is required.",Oe="Please enter a valid IP address.",ge="This field is required.",ve="The chosen zone name is already in use.",we="This field is required.",We="Please enter a valid IP address.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","multisiteMigrateForm","novalidate","",3,"formGroup"],["formDir","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","realmName",1,"cd-col-form-label","required"],t,[1,"cd-col-form-input"],["type","text","placeholder","Realm name...","id","realmName","name","realmName","formControlName","realmName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","zonegroupName",1,"cd-col-form-label","required"],o,["type","text","placeholder","Zone group name...","id","zonegroupName","name","zonegroupName","formControlName","zonegroupName",1,"form-control"],["for","zonegroup_endpoints",1,"cd-col-form-label","required"],_,["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zonegroup_endpoints","name","zonegroup_endpoints","formControlName","zonegroup_endpoints",1,"form-control"],["for","zoneName",1,"cd-col-form-label","required"],E,["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],["for","zone_endpoints",1,"cd-col-form-label","required"],U,["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zone_endpoints","name","zone_endpoints","formControlName","zone_endpoints",1,"form-control"],["for","access_key",1,"cd-col-form-label","required"],H,["type","text","placeholder","e.g.","id","access_key","name","access_key","formControlName","access_key",1,"form-control"],K,["type","text","placeholder","e.g.","id","secret_key","name","secret_key","formControlName","secret_key",1,"form-control"],[1,"modal-footer"],[3,"submitText","form","submitActionEvent"],[1,"invalid-feedback"],Q,te,Te,pe,de,Oe,ge,ve,we,We]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.tHW(2,2),e.TgZ(3,"cd-helper"),e._UZ(4,"span"),e.qZA(),e.N_p(),e.BQk(),e.ynx(5,3),e.TgZ(6,"form",4,5)(8,"div",6)(9,"div",7)(10,"label",8),e.SDv(11,9),e.qZA(),e.TgZ(12,"div",10),e._UZ(13,"input",11),e.YNc(14,ys,2,0,"span",12),e.YNc(15,Ls,2,0,"span",12),e.qZA()(),e.TgZ(16,"div",7)(17,"label",13),e.SDv(18,14),e.qZA(),e.TgZ(19,"div",10),e._UZ(20,"input",15),e.YNc(21,Ds,2,0,"span",12),e.YNc(22,vs,2,0,"span",12),e.qZA()(),e.TgZ(23,"div",7)(24,"label",16),e.SDv(25,17),e.qZA(),e.TgZ(26,"div",10),e._UZ(27,"input",18),e.YNc(28,ws,2,0,"span",12),e.YNc(29,Ws,2,0,"span",12),e.qZA()(),e.TgZ(30,"div",7)(31,"label",19),e.SDv(32,20),e.qZA(),e.TgZ(33,"div",10),e._UZ(34,"input",21),e.YNc(35,$s,2,0,"span",12),e.YNc(36,Us,2,0,"span",12),e.qZA()(),e.TgZ(37,"div",7)(38,"label",22),e.SDv(39,23),e.qZA(),e.TgZ(40,"div",10),e._UZ(41,"input",24),e.YNc(42,xs,2,0,"span",12),e.YNc(43,Zs,2,0,"span",12),e.qZA()(),e.TgZ(44,"div",7)(45,"label",25),e.tHW(46,26),e.TgZ(47,"cd-helper")(48,"span"),e._UZ(49,"b")(50,"b")(51,"b")(52,"b"),e.qZA()(),e.N_p(),e.qZA(),e.TgZ(53,"div",10),e._UZ(54,"input",27),e.qZA()(),e.TgZ(55,"div",7)(56,"label",25),e.tHW(57,28),e.TgZ(58,"cd-helper")(59,"span"),e._UZ(60,"b")(61,"b")(62,"b")(63,"b"),e.qZA()(),e.N_p(),e.qZA(),e.TgZ(64,"div",10),e._UZ(65,"input",29),e.qZA()()(),e.TgZ(66,"div",30)(67,"cd-form-button-panel",31),e.NdJ("submitActionEvent",function(){return o.submit()}),e.qZA()()(),e.BQk(),e.qZA()),2&t){const _=e.MAs(7);e.Q6J("modalRef",o.activeModal),e.xp6(6),e.Q6J("formGroup",o.multisiteMigrateForm),e.xp6(8),e.Q6J("ngIf",o.multisiteMigrateForm.showError("realmName",_,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteMigrateForm.showError("realmName",_,"uniqueName")),e.xp6(6),e.Q6J("ngIf",o.multisiteMigrateForm.showError("zonegroupName",_,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteMigrateForm.showError("zonegroupName",_,"uniqueName")),e.xp6(6),e.Q6J("ngIf",o.multisiteMigrateForm.showError("zonegroup_endpoints",_,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteMigrateForm.showError("zonegroup_endpoints",_,"endpoint")),e.xp6(6),e.Q6J("ngIf",o.multisiteMigrateForm.showError("zoneName",_,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteMigrateForm.showError("zoneName",_,"uniqueName")),e.xp6(6),e.Q6J("ngIf",o.multisiteMigrateForm.showError("zone_endpoints",_,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteMigrateForm.showError("zone_endpoints",_,"endpoint")),e.xp6(24),e.Q6J("submitText",o.actionLabels.MIGRATE+" to Multi-site")("form",o.multisiteMigrateForm)}},dependencies:[g.O5,ze.S,Le.z,be.p,Ge.o,O.b,l.P,w.V,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]}),n})();var kn=p(80842);function Bs(n,i){if(1&n&&(e.TgZ(0,"strong",21),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Oqu(t)}}function zs(n,i){1&n&&(e.TgZ(0,"div",22)(1,"cd-alert-panel",23),e.SDv(2,24),e.qZA()())}function qs(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"label",10),e.tHW(2,11),e._UZ(3,"strong"),e.N_p(),e.qZA(),e.TgZ(4,"label",12),e.SDv(5,13),e.qZA(),e.YNc(6,Bs,2,1,"strong",14),e.TgZ(7,"div",15)(8,"div",16)(9,"input",17),e.NdJ("change",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.showDangerText())}),e.qZA(),e.TgZ(10,"label",18),e.SDv(11,19),e.qZA()(),e.YNc(12,zs,3,0,"div",20),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(3),e.pQV(null==t.zone?null:t.zone.name),e.QtT(2),e.xp6(3),e.Q6J("ngForOf",t.includedPools),e.xp6(6),e.Q6J("ngIf",t.displayText)}}let Hs=(()=>{class n{constructor(t,o,_,E,U){this.activeModal=t,this.actionLabels=o,this.notificationService=_,this.rgwZoneService=E,this.poolService=U,this.displayText=!1,this.includedPools=new Set,this.createForm()}ngOnInit(){this.zoneData$=this.rgwZoneService.get(this.zone),this.poolList$=this.poolService.getList()}ngAfterViewInit(){this.updateIncludedPools()}createForm(){this.zoneForm=new Xe.d({deletePools:new r.p4(!1)})}submit(){this.rgwZoneService.delete(this.zone.name,this.zoneForm.value.deletePools,this.includedPools,this.zone.parent).subscribe(()=>{this.notificationService.show(J.k.success,"Zone: '" + this.zone.name + "' deleted successfully"),this.activeModal.close()},()=>{this.zoneForm.setErrors({cdSubmitButton:!0})})}showDangerText(){this.displayText=!this.displayText}updateIncludedPools(){!this.zoneData$||!this.poolList$||this.zoneData$.subscribe(t=>{this.poolList$.subscribe(o=>{for(const _ of o)for(const E of Object.values(t))if("string"==typeof E&&E.includes(_.pool_name))this.includedPools.add(_.pool_name);else if(Array.isArray(E)&&E[0].val)for(const U of E){const H=U.val;H.storage_classes.STANDARD.data_pool===_.pool_name&&this.includedPools.add(H.storage_classes.STANDARD.data_pool),H.data_extra_pool===_.pool_name&&this.includedPools.add(H.data_extra_pool),H.index_pool===_.pool_name&&this.includedPools.add(H.index_pool)}})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.Kz),e.Y36(T.p4),e.Y36(fe.g),e.Y36(lt.g),e.Y36(kn.q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-zone-deletion-form"]],decls:12,vars:6,consts:function(){let i,t,o,_,E,U;return i="Delete Zone",t=" This will delete your " + "\ufffd#8\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#8\ufffd" + " Zone. ",o=" Do you want to delete the associated pools with the " + "\ufffd#3\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#3\ufffd" + " Zone?",_=" This will delete the following pools and any data stored in these pools:",E="Yes, I want to delete the pools.",U=" This will delete all the data in the pools! ",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","zoneForm","novalidate","",3,"formGroup"],[1,"modal-body","ms-4"],t,[4,"ngIf"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],[1,"mt-3"],o,[1,"mb-4"],_,["class","block",4,"ngFor","ngForOf"],[1,"form-group"],[1,"custom-control","custom-checkbox","mt-2"],["type","checkbox","name","deletePools","id","deletePools","formControlName","deletePools",1,"custom-control-input",3,"change"],["for","deletePools",1,"custom-control-label"],E,["class","me-4",4,"ngIf"],[1,"block"],[1,"me-4"],["type","danger"],U]},template:function(t,o){1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.BQk(),e.ynx(3,3),e.TgZ(4,"form",4)(5,"div",5)(6,"label"),e.tHW(7,6),e._UZ(8,"strong"),e.N_p(),e.qZA(),e.YNc(9,qs,13,3,"ng-container",7),e.qZA(),e.TgZ(10,"div",8)(11,"cd-form-button-panel",9),e.NdJ("submitActionEvent",function(){return o.submit()}),e.qZA()()(),e.BQk(),e.qZA()),2&t&&(e.Q6J("modalRef",o.activeModal),e.xp6(4),e.Q6J("formGroup",o.zoneForm),e.xp6(4),e.pQV(null==o.zone?null:o.zone.name),e.QtT(7),e.xp6(1),e.Q6J("ngIf",o.includedPools.size),e.xp6(2),e.Q6J("form",o.zoneForm)("submitText",o.actionLabels.DELETE))},dependencies:[g.sg,g.O5,Le.z,tt.G,be.p,Ge.o,O.b,l.P,w.V,r._Y,r.Wl,r.JJ,r.JL,r.sg,r.u],styles:[".block[_ngcontent-%COMP%]{display:block}#scroll[_ngcontent-%COMP%]{height:100%;max-height:10rem;overflow:auto}"]}),n})();function Xs(n,i){1&n&&(e.ynx(0),e.TgZ(1,"label"),e.SDv(2,21),e.qZA(),e.BQk())}function Ys(n,i){if(1&n&&(e.TgZ(0,"strong",22),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Oqu(t)}}function Ks(n,i){if(1&n&&(e.TgZ(0,"strong",22),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Oqu(t)}}function Qs(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"strong",13),e._uU(2,"Pools:"),e.qZA(),e.TgZ(3,"div",23),e.YNc(4,Ks,2,1,"strong",15),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.includedPools)}}function Js(n,i){1&n&&(e.ynx(0),e.TgZ(1,"label",24),e.SDv(2,25),e.qZA(),e.BQk())}function Vs(n,i){1&n&&(e.TgZ(0,"div",26)(1,"cd-alert-panel",27),e.SDv(2,28),e.qZA()())}function js(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"label",11),e.tHW(2,12),e._UZ(3,"strong"),e.N_p(),e.qZA(),e.YNc(4,Xs,3,0,"ng-container",7),e.TgZ(5,"strong",13),e._uU(6,"Zones:"),e.qZA(),e.TgZ(7,"div",14),e.YNc(8,Ys,2,1,"strong",15),e.qZA(),e.YNc(9,Qs,5,1,"ng-container",7),e.TgZ(10,"div",16)(11,"div",17)(12,"input",18),e.NdJ("change",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.showDangerText())}),e.qZA(),e.YNc(13,Js,3,0,"ng-container",19),e.qZA(),e.YNc(14,Vs,3,0,"div",20),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(),o=e.MAs(13);e.xp6(3),e.pQV(null==t.zonegroup?null:t.zonegroup.name),e.QtT(2),e.xp6(1),e.Q6J("ngIf",t.includedPools.size>0),e.xp6(4),e.Q6J("ngForOf",t.zonesList),e.xp6(1),e.Q6J("ngIf",t.includedPools.size>0),e.xp6(4),e.Q6J("ngIf",t.includedPools.size>0)("ngIfElse",o),e.xp6(1),e.Q6J("ngIf",t.displayText)}}function ea(n,i){1&n&&(e.TgZ(0,"label",24),e.SDv(1,29),e.qZA())}let ta=(()=>{class n{constructor(t,o,_,E,U,H){this.activeModal=t,this.actionLabels=o,this.notificationService=_,this.rgwZonegroupService=E,this.poolService=U,this.rgwZoneService=H,this.zonesPools=[],this.zonesList=[],this.displayText=!1,this.includedPools=new Set,this.createForm()}ngOnInit(){this.zonegroupData$=this.rgwZonegroupService.get(this.zonegroup),this.poolList$=this.poolService.getList()}ngAfterViewInit(){this.updateIncludedPools()}createForm(){this.zonegroupForm=new Xe.d({deletePools:new r.p4(!1)})}submit(){this.rgwZonegroupService.delete(this.zonegroup.name,this.zonegroupForm.value.deletePools,this.includedPools).subscribe(()=>{this.notificationService.show(J.k.success,"Zone: '" + this.zonegroup.name + "' deleted successfully"),this.activeModal.close()})}showDangerText(){this.includedPools.size>0&&(this.displayText=!this.displayText)}updateIncludedPools(){!this.zonegroupData$||!this.poolList$||this.zonegroupData$.subscribe(t=>{for(const o of t.zones)this.zonesList.push(o.name),this.rgwZoneService.get(o).subscribe(_=>{this.poolList$.subscribe(E=>{for(const U of Object.values(_))for(const H of E)if("string"==typeof U&&U.includes(H.pool_name))this.includedPools.add(H.pool_name);else if(Array.isArray(U)&&U[0].val)for(const K of U){const Q=K.val;Q.storage_classes.STANDARD.data_pool===H.pool_name&&this.includedPools.add(Q.storage_classes.STANDARD.data_pool),Q.data_extra_pool===H.pool_name&&this.includedPools.add(Q.data_extra_pool),Q.index_pool===H.pool_name&&this.includedPools.add(Q.index_pool)}})})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.Kz),e.Y36(T.p4),e.Y36(fe.g),e.Y36(_t.K),e.Y36(kn.q),e.Y36(lt.g))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-zonegroup-deletion-form"]],decls:14,vars:6,consts:function(){let i,t,o,_,E,U,H;return i="Delete Zone Group",t=" This will delete your " + "\ufffd#8\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#8\ufffd" + " Zone Group. ",o=" Do you want to delete the associated zones and pools with the " + "\ufffd#3\ufffd" + "" + "\ufffd0\ufffd" + "" + "\ufffd/#3\ufffd" + " Zone Group?",_=" This will delete the following:",E="Yes, I want to delete the zones and their pools.",U=" This will delete all the data in the pools! ",H="Yes, I want to delete the zones.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","zonegroupForm","novalidate","",3,"formGroup"],[1,"modal-body","ms-4"],t,[4,"ngIf"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],["noPoolsConfirmation",""],[1,"mt-3"],o,[1,"mt-3","mb-2","h5","block"],["id","scroll"],["class","block",4,"ngFor","ngForOf"],[1,"form-group"],[1,"custom-control","custom-checkbox","mt-2"],["type","checkbox","name","deletePools","id","deletePools","formControlName","deletePools",1,"custom-control-input",3,"change"],[4,"ngIf","ngIfElse"],["class","me-4",4,"ngIf"],_,[1,"block"],["id","scroll",1,"mb-2"],["for","deletePools",1,"custom-control-label"],E,[1,"me-4"],["type","danger"],U,H]},template:function(t,o){1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.BQk(),e.ynx(3,3),e.TgZ(4,"form",4)(5,"div",5)(6,"label"),e.tHW(7,6),e._UZ(8,"strong"),e.N_p(),e.qZA(),e.YNc(9,js,15,7,"ng-container",7),e.qZA(),e.TgZ(10,"div",8)(11,"cd-form-button-panel",9),e.NdJ("submitActionEvent",function(){return o.submit()}),e.qZA()()(),e.BQk(),e.qZA(),e.YNc(12,ea,2,0,"ng-template",null,10,e.W1O)),2&t&&(e.Q6J("modalRef",o.activeModal),e.xp6(4),e.Q6J("formGroup",o.zonegroupForm),e.xp6(4),e.pQV(null==o.zonegroup?null:o.zonegroup.name),e.QtT(7),e.xp6(1),e.Q6J("ngIf",o.zonesList.length>0),e.xp6(2),e.Q6J("form",o.zonegroupForm)("submitText",o.actionLabels.DELETE))},dependencies:[g.sg,g.O5,Le.z,tt.G,be.p,Ge.o,O.b,l.P,w.V,r._Y,r.Wl,r.JJ,r.JL,r.sg,r.u],styles:[".block[_ngcontent-%COMP%]{display:block}#scroll[_ngcontent-%COMP%]{height:100%;max-height:10rem;overflow:auto}"]}),n})();const na=function(n,i,t){return[n,i,t]};function oa(n,i){if(1&n&&(e.TgZ(0,"span",10),e._UZ(1,"i",11),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.kEZ(1,na,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function ia(n,i){if(1&n&&(e.tHW(0,16,1),e.TgZ(1,"div"),e._UZ(2,"b"),e.qZA(),e.N_p()),2&n){const t=i.$implicit;e.xp6(2),e.pQV(t.realm)(t.token),e.QtT(0)}}function _a(n,i){if(1&n&&(e.TgZ(0,"cd-alert-panel",15),e.tHW(1,16),e.YNc(2,ia,3,2,"div",14),e.N_p(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.realms)}}function ra(n,i){1&n&&e._UZ(0,"hr")}function sa(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",17)(2,"label",18),e.SDv(3,19),e.qZA(),e.TgZ(4,"div",20),e._UZ(5,"input",21),e.qZA()(),e.TgZ(6,"div",17)(7,"label",22),e.SDv(8,23),e.qZA(),e.TgZ(9,"div",20),e._UZ(10,"input",24)(11,"cd-copy-2-clipboard-button",25),e.qZA(),e.YNc(12,ra,1,0,"hr",26),e.qZA()()),2&n){const t=i.$implicit,o=e.oxw(2);e.xp6(5),e.s9C("value",t.realm),e.xp6(5),e.s9C("value",t.token),e.xp6(1),e.s9C("source",t.token),e.Q6J("byId",!1),e.xp6(1),e.Q6J("ngIf",o.realms.length>1)}}function aa(n,i){if(1&n&&(e.TgZ(0,"div",12),e.YNc(1,_a,3,1,"cd-alert-panel",13),e.YNc(2,sa,13,5,"div",14),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.tokenValid),e.xp6(1),e.Q6J("ngForOf",t.realms)}}let la=(()=>{class n{constructor(t,o,_,E,U){this.activeModal=t,this.rgwRealmService=o,this.actionLabels=_,this.notificationService=E,this.changeDetectorRef=U,this.tokenValid=!1,this.loading=!0,this.icons=q.P,this.createForm()}createForm(){this.exportTokenForm=new Xe.d({})}onSubmit(){this.activeModal.close()}ngOnInit(){this.rgwRealmService.getRealmTokens().subscribe(t=>{this.loading=!1,this.realms=t;var o=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$");this.realms.forEach(_=>{this.tokenValid=!!o.test(_.token)})})}ngAfterViewChecked(){this.changeDetectorRef.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.Kz),e.Y36(at.y),e.Y36(T.p4),e.Y36(fe.g),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-export"]],decls:10,vars:4,consts:function(){let i,t,o,_;return i="Export Multi-site Realm Token",t="" + "\ufffd*2:1\ufffd\ufffd#1:1\ufffd" + "" + "\ufffd#2:1\ufffd" + "" + "\ufffd0:1\ufffd" + "" + "\ufffd/#2:1\ufffd" + " - " + "\ufffd1:1\ufffd" + " " + "\ufffd/#1:1\ufffd\ufffd/*2:1\ufffd" + "",o="Realm Name ",_="Token ",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","exportTokenForm",3,"formGroup"],["frm","ngForm"],["class","d-flex justify-content-center",4,"ngIf"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["aria-label","Close",1,"m-2","float-end",3,"backAction"],[1,"d-flex","justify-content-center"],[3,"ngClass"],[1,"modal-body"],["type","warning","class","mx-3",4,"ngIf"],[4,"ngFor","ngForOf"],["type","warning",1,"mx-3"],t,[1,"form-group","row"],["for","realmName",1,"cd-col-form-label"],o,[1,"cd-col-form-input"],["id","realmName","name","realmName","type","text","readonly","",3,"value"],["for","token",1,"cd-col-form-label"],_,["id","realmToken","name","realmToken","type","text","readonly","",1,"me-2","mb-4",3,"value"],[3,"source","byId"],[4,"ngIf"]]},template:function(t,o){1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.BQk(),e.ynx(3,3),e.TgZ(4,"form",4,5),e.YNc(6,oa,2,5,"span",6),e.YNc(7,aa,3,2,"div",7),e.TgZ(8,"div",8)(9,"cd-back-button",9),e.NdJ("backAction",function(){return o.activeModal.close()}),e.qZA()()(),e.BQk(),e.qZA()),2&t&&(e.Q6J("modalRef",o.activeModal),e.xp6(4),e.Q6J("formGroup",o.exportTokenForm),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading))},dependencies:[g.mk,g.sg,g.O5,vn.W,Le.z,tt.G,pt.s,Ge.o,l.P,w.V,r._Y,r.JL,r.sg]}),n})();var Bn=p(7022),ca=p(22120),ua=p(48168),Sn=p(14745),zn=p(79765),da=p(66682),qn=p(54395),Hn=p(87519),fa=p(45435),dn=p(60192);function pa(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,30),e.qZA())}function ga(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,31),e.qZA())}function Ta(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,32),e.qZA())}function Ea(n,i){1&n&&(e.TgZ(0,"div",9)(1,"label",33),e.SDv(2,34),e.qZA(),e.TgZ(3,"div",12)(4,"select",35)(5,"option",36),e.SDv(6,37),e.qZA(),e.TgZ(7,"option",38),e.SDv(8,39),e.qZA()()()())}function Ra(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,43),e.qZA())}function ma(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",9)(1,"label",40),e.SDv(2,41),e.qZA(),e.TgZ(3,"div",12)(4,"input",42),e.NdJ("focus",function(_){e.CHM(t);const E=e.oxw();return e.KtG(E.labelFocus.next(_.target.value))})("click",function(_){e.CHM(t);const E=e.oxw();return e.KtG(E.labelClick.next(_.target.value))}),e.qZA(),e.YNc(5,Ra,2,0,"span",14),e.qZA()()}if(2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(4),e.Q6J("ngbTypeahead",t.searchLabels),e.xp6(1),e.Q6J("ngIf",t.importTokenForm.showError("label",o,"required"))}}function Ma(n,i){if(1&n&&(e.TgZ(0,"div",9)(1,"label",44),e.SDv(2,45),e.qZA(),e.TgZ(3,"div",12),e._UZ(4,"cd-select-badges",46),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("data",t.importTokenForm.controls.hosts.value)("options",t.hosts.options)("messages",t.hosts.messages)}}function Sa(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,51),e.qZA())}function ha(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,52),e.qZA())}function Ca(n,i){if(1&n&&(e.TgZ(0,"div",9)(1,"label",47)(2,"span"),e.SDv(3,48),e.qZA(),e.TgZ(4,"cd-helper"),e.SDv(5,49),e.qZA()(),e.TgZ(6,"div",12),e._UZ(7,"input",50),e.YNc(8,Sa,2,0,"span",14),e.YNc(9,ha,2,0,"span",14),e.qZA()()),2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(8),e.Q6J("ngIf",t.importTokenForm.showError("count",o,"min")),e.xp6(1),e.Q6J("ngIf",t.importTokenForm.showError("count",o,"pattern"))}}function Fa(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,56),e.qZA())}function Oa(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,57),e.qZA())}function Na(n,i){1&n&&(e.TgZ(0,"span",29),e.SDv(1,58),e.qZA())}function Pa(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"div",9)(2,"label",53),e.SDv(3,54),e.qZA(),e.TgZ(4,"div",12),e._UZ(5,"input",55),e.YNc(6,Fa,2,0,"span",14),e.YNc(7,Oa,2,0,"span",14),e.YNc(8,Na,2,0,"span",14),e.qZA()(),e.BQk()),2&n){const t=e.oxw(),o=e.MAs(5);e.xp6(6),e.Q6J("ngIf",t.importTokenForm.showError("rgw_frontend_port",o,"pattern")),e.xp6(1),e.Q6J("ngIf",t.importTokenForm.showError("rgw_frontend_port",o,"min")),e.xp6(1),e.Q6J("ngIf",t.importTokenForm.showError("rgw_frontend_port",o,"max"))}}let Aa=(()=>{class n{constructor(t,o,_,E,U){this.activeModal=t,this.hostService=o,this.rgwRealmService=_,this.actionLabels=E,this.notificationService=U,this.endpoints=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{2,4}$/,this.ipv4Rgx=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,this.ipv6Rgx=/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i,this.multisiteInfo=[],this.zoneList=[],this.labelClick=new zn.xQ,this.labelFocus=new zn.xQ,this.searchLabels=H=>(0,da.T)(H.pipe((0,qn.b)(200),(0,Hn.x)()),this.labelFocus,this.labelClick.pipe((0,fa.h)(()=>!this.typeahead.isPopupOpen()))).pipe((0,ln.U)(K=>this.labels.filter(Q=>Q.toLowerCase().indexOf(K.toLowerCase())>-1).slice(0,10))),this.hosts={options:[],messages:new Bn.a({empty:"There are no hosts.",filter:"Filter hosts"})},this.createForm()}ngOnInit(){this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zoneNames=this.zoneList.map(o=>o.name);const t=new ua.E(()=>{});this.hostService.list(t.toParams(),"false").subscribe(o=>{const _=[];R().forEach(o,E=>{if(R().get(E,"sources.orchestrator",!1)){const U=new Sn.$(!1,R().get(E,"hostname"),"");_.push(U)}}),this.hosts.options=[..._]}),this.hostService.getLabels().subscribe(o=>{this.labels=o})}createForm(){this.importTokenForm=new Xe.d({realmToken:new r.NI("",{validators:[r.kI.required]}),zoneName:new r.NI(null,{validators:[r.kI.required,oe.hq.custom("uniqueName",t=>this.zoneNames&&-1!==this.zoneNames.indexOf(t))]}),rgw_frontend_port:new r.NI(null,{validators:[r.kI.required,r.kI.pattern("^[0-9]*$")]}),placement:new r.NI("hosts"),label:new r.NI(null,[oe.hq.requiredIf({placement:"label",unmanaged:!1})]),hosts:new r.NI([]),count:new r.NI(null,[oe.hq.number(!1)]),unmanaged:new r.NI(!1)})}onSubmit(){const t=this.importTokenForm.value,o={placement:{}};if(!t.unmanaged){switch(t.placement){case"hosts":t.hosts.length>0&&(o.placement.hosts=t.hosts);break;case"label":o.placement.label=t.label}R().isNumber(t.count)&&t.count>0&&(o.placement.count=t.count)}this.rgwRealmService.importRealmToken(t.realmToken,t.zoneName,t.rgw_frontend_port,o).subscribe(()=>{this.notificationService.show(J.k.success,"Realm token import successfull"),this.activeModal.close()},()=>{this.importTokenForm.setErrors({cdSubmitButton:!0})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.Kz),e.Y36(ca.x),e.Y36(at.y),e.Y36(T.p4),e.Y36(fe.g))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-import"]],viewQuery:function(t,o){if(1&t&&e.Gf(b.dR,5),2&t){let _;e.iGM(_=e.CRH())&&(o.typeahead=_.first)}},decls:47,vars:12,consts:function(){let i,t,o,_,E,U,H,K,Q,te,Te,pe,de,Oe,ge,ve,we,We,Re,$e,Ue,xe,Ze,ke;return i="Import Multi-site Token",t="Zone Details",o="Token ",_="Secondary Zone Name",E="Service Details",U="Unmanaged",H="If set to true, the orchestrator will not start nor stop any daemon associated with this service. Placement and all other properties will be ignored.",K="This field is required.",Q="This field is required.",te="The chosen zone name is already in use.",Te="Placement",pe="Serveurs",de="Label",Oe="Label",ge="This field is required.",ve="Serveurs",we="Count",We="Only that number of daemons will be created.",Re="The value must be at least 1.",$e="La valeur entr\xE9e doit \xEAtre un nombre.",Ue="Port",xe="La valeur entr\xE9e doit \xEAtre un nombre.",Ze="The value must be at least 1.",ke="The value cannot exceed 65535.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","importTokenForm",3,"formGroup"],["frm","ngForm"],[1,"modal-body"],["type","info","spacingClass","mb-3"],t,[1,"form-group","row"],["for","realmToken",1,"cd-col-form-label","required"],o,[1,"cd-col-form-input"],["id","realmToken","name","realmToken","type","text","formControlName","realmToken",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","zoneName",1,"cd-col-form-label","required"],_,["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],E,[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","unmanaged","type","checkbox","formControlName","unmanaged",1,"custom-control-input"],["for","unmanaged",1,"custom-control-label"],U,H,["class","form-group row",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],[3,"submitText","form","submitActionEvent"],[1,"invalid-feedback"],K,Q,te,["for","placement",1,"cd-col-form-label"],Te,["id","placement","formControlName","placement",1,"form-select"],["value","hosts"],pe,["value","label"],de,["for","label",1,"cd-col-form-label"],Oe,["id","label","type","text","formControlName","label",1,"form-control",3,"ngbTypeahead","focus","click"],ge,["for","hosts",1,"cd-col-form-label"],ve,["id","hosts",3,"data","options","messages"],["for","count",1,"cd-col-form-label"],we,We,["id","count","type","number","formControlName","count","min","1",1,"form-control"],Re,$e,["for","rgw_frontend_port",1,"cd-col-form-label"],Ue,["id","rgw_frontend_port","type","number","formControlName","rgw_frontend_port","min","1","max","65535",1,"form-control"],xe,Ze,ke]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.BQk(),e.ynx(3,3),e.TgZ(4,"form",4,5)(6,"div",6)(7,"cd-alert-panel",7)(8,"ul")(9,"li"),e._uU(10,"This feature allows you to configure a connection between your primary and secondary Ceph clusters for data replication. By importing a token, you establish a link between the clusters, enabling data synchronization."),e.qZA(),e.TgZ(11,"li"),e._uU(12,"To obtain the token, generate it from your primary Ceph cluster. This token includes encoded information about the primary cluster's endpoint, access key, and secret key."),e.qZA(),e.TgZ(13,"li"),e._uU(14,"The secondary zone represents the destination cluster where your data will be replicated."),e.qZA()()(),e.TgZ(15,"legend"),e.SDv(16,8),e.qZA(),e.TgZ(17,"div",9)(18,"label",10),e.SDv(19,11),e.qZA(),e.TgZ(20,"div",12),e._UZ(21,"input",13),e.YNc(22,pa,2,0,"span",14),e.qZA()(),e.TgZ(23,"div",9)(24,"label",15),e.SDv(25,16),e.qZA(),e.TgZ(26,"div",12),e._UZ(27,"input",17),e.YNc(28,ga,2,0,"span",14),e.YNc(29,Ta,2,0,"span",14),e.qZA()(),e.TgZ(30,"legend"),e.SDv(31,18),e.qZA(),e.TgZ(32,"div",9)(33,"div",19)(34,"div",20),e._UZ(35,"input",21),e.TgZ(36,"label",22),e.SDv(37,23),e.qZA(),e.TgZ(38,"cd-helper"),e.SDv(39,24),e.qZA()()()(),e.YNc(40,Ea,9,0,"div",25),e.YNc(41,ma,6,2,"div",25),e.YNc(42,Ma,5,3,"div",25),e.YNc(43,Ca,10,2,"div",25),e.YNc(44,Pa,9,3,"ng-container",26),e.qZA(),e.TgZ(45,"div",27)(46,"cd-form-button-panel",28),e.NdJ("submitActionEvent",function(){return o.onSubmit()}),e.qZA()()(),e.BQk(),e.qZA()),2&t){const _=e.MAs(5);e.Q6J("modalRef",o.activeModal),e.xp6(4),e.Q6J("formGroup",o.importTokenForm),e.xp6(18),e.Q6J("ngIf",o.importTokenForm.showError("realmToken",_,"required")),e.xp6(6),e.Q6J("ngIf",o.importTokenForm.showError("zoneName",_,"required")),e.xp6(1),e.Q6J("ngIf",o.importTokenForm.showError("zoneName",_,"uniqueName")),e.xp6(11),e.Q6J("ngIf",!o.importTokenForm.controls.unmanaged.value),e.xp6(1),e.Q6J("ngIf",!o.importTokenForm.controls.unmanaged.value&&"label"===o.importTokenForm.controls.placement.value),e.xp6(1),e.Q6J("ngIf",!o.importTokenForm.controls.unmanaged.value&&"hosts"===o.importTokenForm.controls.placement.value),e.xp6(1),e.Q6J("ngIf",!o.importTokenForm.controls.unmanaged.value),e.xp6(1),e.Q6J("ngIf",!o.importTokenForm.controls.unmanaged.value),e.xp6(2),e.Q6J("submitText",o.actionLabels.IMPORT)("form",o.importTokenForm)}},dependencies:[g.O5,ze.S,dn.m,Le.z,tt.G,be.p,Ge.o,O.b,l.P,w.V,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.Wl,r.EJ,r.JJ,r.JL,r.qQ,r.Fd,r.sg,r.u,b.dR]}),n})();var ba=p(72625);function Ia(n,i){1&n&&(e.TgZ(0,"span",20),e.SDv(1,21),e.qZA())}function Ga(n,i){1&n&&(e.TgZ(0,"span",20),e.SDv(1,22),e.qZA())}function ya(n,i){1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.SDv(2,23),e.qZA()())}function La(n,i){if(1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.tHW(2,24),e._UZ(3,"a",25),e.N_p(),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.s9C("href",t.docUrl,e.LSH)}}function Da(n,i){1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.SDv(2,26),e.qZA()())}let va=(()=>{class n{constructor(t,o,_,E,U){this.activeModal=t,this.actionLabels=o,this.rgwRealmService=_,this.notificationService=E,this.docService=U,this.editing=!1,this.multisiteInfo=[],this.realmList=[],this.zonegroupList=[],this.defaultRealmDisabled=!1,this.action=this.editing?this.actionLabels.EDIT+this.resource:this.actionLabels.CREATE+this.resource,this.createForm()}createForm(){this.multisiteRealmForm=new Xe.d({realmName:new r.p4(null,{validators:[r.kI.required,oe.hq.custom("uniqueName",t=>"create"===this.action&&this.realmNames&&-1!==this.realmNames.indexOf(t))]}),default_realm:new r.p4(!1)})}ngOnInit(){this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.realmNames=this.realmList.map(t=>t.name),"edit"===this.action&&(this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.multisiteRealmForm.get("realmName").setValue(this.info.data.name),this.multisiteRealmForm.get("default_realm").setValue(this.info.data.is_default),this.info.data.is_default&&this.multisiteRealmForm.get("default_realm").disable()),this.zonegroupList.forEach(t=>{!0===t.is_master&&t.realm_id===this.info.data.id&&(this.isMaster=!0)}),this.defaultsInfo&&null!==this.defaultsInfo.defaultRealmName&&(this.multisiteRealmForm.get("default_realm").disable(),this.defaultRealmDisabled=!0),this.docUrl=this.docService.urlGenerator("rgw-multisite")}submit(){const t=this.multisiteRealmForm.getRawValue();this.realm=new Me.L6,"create"===this.action?(this.realm.name=t.realmName,this.rgwRealmService.create(this.realm,t.default_realm).subscribe(()=>{this.notificationService.show(J.k.success,"Realm: '" + t.realmName + "' created successfully"),this.activeModal.close()},()=>{this.multisiteRealmForm.setErrors({cdSubmitButton:!0})})):"edit"===this.action&&(this.realm.name=this.info.data.name,this.newRealmName=t.realmName,this.rgwRealmService.update(this.realm,t.default_realm,this.newRealmName).subscribe(()=>{this.notificationService.show(J.k.success,"Realm: '" + t.realmName + "' updated successfully"),this.activeModal.close()},()=>{this.multisiteRealmForm.setErrors({cdSubmitButton:!0})}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.Kz),e.Y36(T.p4),e.Y36(at.y),e.Y36(fe.g),e.Y36(ba.R))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-realm-form"]],decls:27,vars:20,consts:function(){let i,t,o,_,E,U,H,K;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="Realm Name",o="Default",_="This field is required.",E="The chosen realm name is already in use.",U="You cannot unset the default flag.",H="Please consult the " + "\ufffd#3\ufffd" + "documentation" + "\ufffd/#3\ufffd" + " to follow the failover mechanism",K="Default realm already exists.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","multisiteRealmForm","novalidate","",3,"formGroup"],["formDir","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","realmName",1,"cd-col-form-label","required"],t,[1,"cd-col-form-input"],["type","text","placeholder","Realm name...","id","realmName","name","realmName","formControlName","realmName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"custom-control","custom-checkbox"],["id","default_realm","name","default_realm","formControlName","default_realm","type","checkbox",1,"form-check-input"],["for","default_realm",1,"form-check-label"],o,[4,"ngIf"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],[1,"invalid-feedback"],_,E,U,H,[3,"href"],K]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.ALo(3,"titlecase"),e.ALo(4,"upperFirst"),e.BQk(),e.ynx(5,3),e.TgZ(6,"form",4,5)(8,"div",6)(9,"div",7)(10,"label",8),e.SDv(11,9),e.qZA(),e.TgZ(12,"div",10),e._UZ(13,"input",11),e.YNc(14,Ia,2,0,"span",12),e.YNc(15,Ga,2,0,"span",12),e.TgZ(16,"div",13),e._UZ(17,"input",14),e.TgZ(18,"label",15),e.SDv(19,16),e.qZA(),e.YNc(20,ya,3,0,"cd-helper",17),e.YNc(21,La,4,1,"cd-helper",17),e.YNc(22,Da,3,0,"cd-helper",17),e.qZA()()()(),e.TgZ(23,"div",18)(24,"cd-form-button-panel",19),e.NdJ("submitActionEvent",function(){return o.submit()}),e.ALo(25,"titlecase"),e.ALo(26,"upperFirst"),e.qZA()()(),e.BQk(),e.qZA()),2&t){const _=e.MAs(7);e.Q6J("modalRef",o.activeModal),e.xp6(4),e.pQV(e.lcZ(3,12,o.action))(e.lcZ(4,14,o.resource)),e.QtT(2),e.xp6(2),e.Q6J("formGroup",o.multisiteRealmForm),e.xp6(8),e.Q6J("ngIf",o.multisiteRealmForm.showError("realmName",_,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteRealmForm.showError("realmName",_,"uniqueName")),e.xp6(2),e.uIk("disabled","edit"===o.action||null),e.xp6(3),e.Q6J("ngIf","edit"===o.action&&o.info.data.is_default),e.xp6(1),e.Q6J("ngIf","edit"===o.action&&!o.info.data.is_default),e.xp6(1),e.Q6J("ngIf",o.defaultRealmDisabled&&"create"===o.action),e.xp6(2),e.Q6J("form",o.multisiteRealmForm)("submitText",e.lcZ(25,16,o.action)+" "+e.lcZ(26,18,o.resource))}},dependencies:[g.O5,ze.S,Le.z,be.p,Ge.o,O.b,l.P,w.V,r._Y,r.Fj,r.Wl,r.JJ,r.JL,r.sg,r.u,g.rS,Je.m]}),n})();function wa(n,i){if(1&n&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();e.Q6J("value",t.name)("selected",t.name===o.multisiteZoneForm.getValue("selectedZonegroup")),e.xp6(1),e.hij(" ",t.name," ")}}function Wa(n,i){1&n&&(e.TgZ(0,"span",41),e.SDv(1,42),e.qZA())}function $a(n,i){1&n&&(e.TgZ(0,"span",41),e.SDv(1,43),e.qZA())}function Ua(n,i){1&n&&(e.TgZ(0,"span")(1,"cd-helper"),e.SDv(2,44),e.qZA()())}function xa(n,i){1&n&&(e.TgZ(0,"span")(1,"cd-helper"),e.SDv(2,45),e.qZA()())}function Za(n,i){if(1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.tHW(2,46),e._UZ(3,"a",47),e.N_p(),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.s9C("href",t.docUrl,e.LSH)}}function ka(n,i){1&n&&(e.TgZ(0,"span")(1,"cd-helper"),e.SDv(2,48),e.qZA()())}function Ba(n,i){1&n&&(e.TgZ(0,"span")(1,"cd-helper"),e.SDv(2,49),e.qZA()())}function za(n,i){if(1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.tHW(2,50),e._UZ(3,"a",47),e.N_p(),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.s9C("href",t.docUrl,e.LSH)}}function qa(n,i){1&n&&(e.TgZ(0,"span",41),e.SDv(1,51),e.qZA())}function Ha(n,i){1&n&&(e.TgZ(0,"span",41),e.SDv(1,52),e.qZA())}function Xa(n,i){if(1&n&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(3);e.Q6J("value",t.name)("selected",t.name===o.multisiteZoneForm.getValue("placementTarget")),e.xp6(1),e.hij(" ",t.name," ")}}function Ya(n,i){if(1&n&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(3);e.Q6J("value",t.poolname)("selected",t.poolname===o.multisiteZoneForm.getValue("placementDataPool")),e.xp6(1),e.hij(" ",t.poolname," ")}}function Ka(n,i){if(1&n&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(3);e.Q6J("value",t.poolname)("selected",t.poolname===o.multisiteZoneForm.getValue("placementIndexPool")),e.xp6(1),e.hij(" ",t.poolname," ")}}function Qa(n,i){if(1&n&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(3);e.Q6J("value",t.poolname)("selected",t.poolname===o.multisiteZoneForm.getValue("placementDataExtraPool")),e.xp6(1),e.hij(" ",t.poolname," ")}}function Ja(n,i){if(1&n&&(e.TgZ(0,"option",75),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.value," ")}}function Va(n,i){if(1&n&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(3);e.Q6J("value",t.poolname)("selected",t.poolname===o.multisiteZoneForm.getValue("storageDataPool")),e.xp6(1),e.hij(" ",t.poolname," ")}}function ja(n,i){if(1&n&&(e.TgZ(0,"option",75),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function el(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"legend"),e._uU(2,"Placement Targets"),e.qZA(),e.TgZ(3,"div",7)(4,"label",53),e.SDv(5,54),e.qZA(),e.TgZ(6,"div",10)(7,"select",55),e.NdJ("change",function(_){e.CHM(t);const E=e.oxw(2);return e.KtG(E.getZonePlacementData(_.target.value))}),e.YNc(8,Xa,2,3,"option",12),e.qZA()()(),e.TgZ(9,"div",7)(10,"label",56),e.SDv(11,57),e.qZA(),e.TgZ(12,"div",10)(13,"select",58),e.YNc(14,Ya,2,3,"option",12),e.qZA()()(),e.TgZ(15,"div",7)(16,"label",59),e.SDv(17,60),e.qZA(),e.TgZ(18,"div",10)(19,"select",61),e.YNc(20,Ka,2,3,"option",12),e.qZA()()(),e.TgZ(21,"div",7)(22,"label",62),e.SDv(23,63),e.qZA(),e.TgZ(24,"div",10)(25,"select",64),e.YNc(26,Qa,2,3,"option",12),e.qZA()()(),e.TgZ(27,"div")(28,"legend"),e._uU(29,"Storage Classes"),e.qZA(),e.TgZ(30,"div",7)(31,"label",65),e.SDv(32,66),e.qZA(),e.TgZ(33,"div",10)(34,"select",67),e.NdJ("change",function(_){e.CHM(t);const E=e.oxw(2);return e.KtG(E.getStorageClassData(_.target.value))}),e.YNc(35,Ja,2,2,"option",68),e.qZA()()(),e.TgZ(36,"div",7)(37,"label",69),e.SDv(38,70),e.qZA(),e.TgZ(39,"div",10)(40,"select",71),e.YNc(41,Va,2,3,"option",12),e.qZA()()(),e.TgZ(42,"div",7)(43,"label",72),e.SDv(44,73),e.qZA(),e.TgZ(45,"div",10)(46,"select",74),e.YNc(47,ja,2,2,"option",68),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(8),e.Q6J("ngForOf",t.placementTargets),e.xp6(5),e.Q6J("value",t.placementDataPool),e.xp6(1),e.Q6J("ngForOf",t.poolList),e.xp6(6),e.Q6J("ngForOf",t.poolList),e.xp6(6),e.Q6J("ngForOf",t.poolList),e.xp6(9),e.Q6J("ngForOf",t.storageClassList),e.xp6(6),e.Q6J("ngForOf",t.poolList),e.xp6(6),e.Q6J("ngForOf",t.compressionTypes)}}function tl(n,i){if(1&n&&(e.TgZ(0,"div",7),e.YNc(1,el,48,8,"div",21),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","edit"===t.action)}}let nl=(()=>{class n{constructor(t,o,_,E,U,H,K,Q){this.activeModal=t,this.actionLabels=o,this.rgwMultisiteService=_,this.rgwZoneService=E,this.rgwZoneGroupService=U,this.notificationService=H,this.rgwUserService=K,this.modalService=Q,this.endpoints=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{2,4}$/,this.ipv4Rgx=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,this.ipv6Rgx=/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i,this.editing=!1,this.defaultsInfo=[],this.multisiteInfo=[],this.zonegroupList=[],this.zoneList=[],this.poolList=[],this.storageClassList=[],this.disableDefault=!1,this.disableMaster=!1,this.isMetadataSync=!1,this.syncStatusTimedOut=!1,this.createSystemUser=!1,this.compressionTypes=["lz4","zlib","snappy"],this.userListReady=!1,this.action=this.editing?this.actionLabels.EDIT+this.resource:this.actionLabels.CREATE+this.resource,this.createForm()}createForm(){this.multisiteZoneForm=new Xe.d({zoneName:new r.p4(null,{validators:[r.kI.required,oe.hq.custom("uniqueName",t=>"create"===this.action&&this.zoneNames&&-1!==this.zoneNames.indexOf(t))]}),default_zone:new r.p4(!1),master_zone:new r.p4(!1),selectedZonegroup:new r.p4(null),zone_endpoints:new r.p4(null,{validators:[oe.hq.custom("endpoint",t=>!(R().isEmpty(t)||(t.includes(",")?(t.split(",").forEach(o=>!this.endpoints.test(o)&&!this.ipv4Rgx.test(o)&&!this.ipv6Rgx.test(o)),1):this.endpoints.test(t)||this.ipv4Rgx.test(t)||this.ipv6Rgx.test(t)))),r.kI.required]}),access_key:new r.p4("",{}),secret_key:new r.p4("",{}),placementTarget:new r.p4(null),placementDataPool:new r.p4(""),placementIndexPool:new r.p4(null),placementDataExtraPool:new r.p4(null),storageClass:new r.p4(null),storageDataPool:new r.p4(null),storageCompression:new r.p4(null)})}onZoneGroupChange(t){let o=new Me.iG;o.name=t,this.rgwZoneGroupService.get(o).subscribe(_=>{R().isEmpty(_.master_zone)?(this.multisiteZoneForm.get("master_zone").setValue(!0),this.multisiteZoneForm.get("master_zone").disable(),this.disableMaster=!1):!R().isEmpty(_.master_zone)&&"create"===this.action&&(this.multisiteZoneForm.get("master_zone").setValue(!1),this.multisiteZoneForm.get("master_zone").disable(),this.disableMaster=!0)}),this.multisiteZoneForm.getValue("selectedZonegroup")!==this.defaultsInfo.defaultZonegroupName&&(this.disableDefault=!0,this.multisiteZoneForm.get("default_zone").disable())}ngOnInit(){this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zoneNames=this.zoneList.map(t=>t.name),"create"===this.action&&void 0!==this.defaultsInfo.defaultZonegroupName&&(this.multisiteZoneForm.get("selectedZonegroup").setValue(this.defaultsInfo.defaultZonegroupName),this.onZoneGroupChange(this.defaultsInfo.defaultZonegroupName)),"edit"===this.action&&(this.placementTargets=this.info.parent?this.info.parent.data.placement_targets:[],this.rgwZoneService.getPoolNames().subscribe(o=>{this.poolList=o}),this.multisiteZoneForm.get("zoneName").setValue(this.info.data.name),this.multisiteZoneForm.get("selectedZonegroup").setValue(this.info.data.parent),this.multisiteZoneForm.get("default_zone").setValue(this.info.data.is_default),this.multisiteZoneForm.get("master_zone").setValue(this.info.data.is_master),this.multisiteZoneForm.get("zone_endpoints").setValue(this.info.data.endpoints.toString()),this.multisiteZoneForm.get("access_key").setValue(this.info.data.access_key),this.multisiteZoneForm.get("secret_key").setValue(this.info.data.secret_key),this.multisiteZoneForm.get("placementTarget").setValue(this.info.parent.data.default_placement),this.getZonePlacementData(this.multisiteZoneForm.getValue("placementTarget")),this.info.data.is_default&&(this.isDefaultZone=!0,this.multisiteZoneForm.get("default_zone").disable()),this.info.data.is_master&&(this.isMasterZone=!0,this.multisiteZoneForm.get("master_zone").disable()),(new Me.jb).name=this.info.data.name,this.onZoneGroupChange(this.info.data.parent)),this.multisiteZoneForm.getValue("selectedZonegroup")!==this.defaultsInfo.defaultZonegroupName&&(this.disableDefault=!0,this.multisiteZoneForm.get("default_zone").disable())}getZonePlacementData(t){this.zone=new Me.jb,this.zone.name=this.info.data.name,this.placementTargets&&this.placementTargets.forEach(o=>{o.name===t&&(this.storageClassList=Object.entries(o.storage_classes).map(([E,U])=>({key:E,value:U})))}),this.rgwZoneService.get(this.zone).subscribe(o=>{this.zoneInfo=o,this.zoneInfo&&this.zoneInfo.placement_pools&&this.zoneInfo.placement_pools.forEach(_=>{if(_.key===t){let E=_.val.storage_classes,U=E.STANDARD?E.STANDARD.data_pool:"",H=_.val.index_pool,K=_.val.data_extra_pool;this.poolList.push({poolname:U}),this.poolList.push({poolname:H}),this.poolList.push({poolname:K}),this.multisiteZoneForm.get("storageClass").setValue(this.storageClassList[0].value),this.multisiteZoneForm.get("storageDataPool").setValue(U),this.multisiteZoneForm.get("storageCompression").setValue(this.compressionTypes[0]),this.multisiteZoneForm.get("placementDataPool").setValue(U),this.multisiteZoneForm.get("placementIndexPool").setValue(H),this.multisiteZoneForm.get("placementDataExtraPool").setValue(K)}})})}getStorageClassData(t){let o=this.storageClassList.find(_=>_.value==t).value;this.poolList.push({poolname:o.data_pool}),this.multisiteZoneForm.get("storageDataPool").setValue(o.data_pool),this.multisiteZoneForm.get("storageCompression").setValue(o.compression_type)}submit(){const t=this.multisiteZoneForm.getRawValue();"create"===this.action?(this.zonegroup=new Me.iG,this.zonegroup.name=t.selectedZonegroup,this.zone=new Me.jb,this.zone.name=t.zoneName,this.zone.endpoints=t.zone_endpoints,this.zone.system_key=new Me.VY,this.zone.system_key.access_key=t.access_key,this.zone.system_key.secret_key=t.secret_key,this.rgwZoneService.create(this.zone,this.zonegroup,t.default_zone,t.master_zone,this.zone.endpoints).subscribe(()=>{this.notificationService.show(J.k.success,"Zone: '" + t.zoneName + "' created successfully"),this.activeModal.close()},()=>{this.multisiteZoneForm.setErrors({cdSubmitButton:!0})})):"edit"===this.action&&(this.zonegroup=new Me.iG,this.zonegroup.name=t.selectedZonegroup,this.zone=new Me.jb,this.zone.name=this.info.data.name,this.zone.endpoints=t.zone_endpoints,this.zone.system_key=new Me.VY,this.zone.system_key.access_key=t.access_key,this.zone.system_key.secret_key=t.secret_key,this.rgwZoneService.update(this.zone,this.zonegroup,t.zoneName,t.default_zone,t.master_zone,this.zone.endpoints,t.placementTarget,t.placementDataPool,t.placementIndexPool,t.placementDataExtraPool,t.storageClass,t.storageDataPool,t.storageCompression).subscribe(()=>{this.notificationService.show(J.k.success,"Zone: '" + t.zoneName + "' updated successfully"),this.activeModal.close()},()=>{this.multisiteZoneForm.setErrors({cdSubmitButton:!0})}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.Kz),e.Y36(T.p4),e.Y36(et.o),e.Y36(lt.g),e.Y36(_t.K),e.Y36(fe.g),e.Y36(D),e.Y36(Qe.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-zone-form"]],decls:75,vars:29,consts:function(){let i,t,o,_,E,U,H,K,Q,te,Te,pe,de,Oe,ge,ve,we,We,Re,$e,Ue,xe,Ze,ke,le;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="Select Zone Group",o="Zone Name",_="Default",E="Master",U="Endpoints",H="S3 access key " + "\ufffd#47\ufffd" + "" + "\ufffd#48\ufffd" + "To see or copy your S3 access key, go to " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Object Gateway > Users" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + " and click on your user name. In " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Keys" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + ", click " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Show" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + ". View the access key by clicking Show and copy the key by clicking " + "[\ufffd#49\ufffd|\ufffd#50\ufffd|\ufffd#51\ufffd|\ufffd#52\ufffd]" + "Copy to Clipboard" + "[\ufffd/#49\ufffd|\ufffd/#50\ufffd|\ufffd/#51\ufffd|\ufffd/#52\ufffd]" + "." + "\ufffd/#48\ufffd" + "" + "\ufffd/#47\ufffd" + "",H=e.Zx4(H),K="S3 secret key " + "\ufffd#60\ufffd" + "" + "\ufffd#61\ufffd" + "To see or copy your S3 access key, go to " + "[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]" + "Object Gateway > Users" + "[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]" + " and click on your user name. In " + "[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]" + "Keys" + "[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]" + ", click " + "[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]" + "Show" + "[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]" + ". View the secret key by clicking Show and copy the key by clicking " + "[\ufffd#62\ufffd|\ufffd#63\ufffd|\ufffd#64\ufffd|\ufffd#65\ufffd]" + "Copy to Clipboard" + "[\ufffd/#62\ufffd|\ufffd/#63\ufffd|\ufffd/#64\ufffd|\ufffd/#65\ufffd]" + "." + "\ufffd/#61\ufffd" + "" + "\ufffd/#60\ufffd" + "",K=e.Zx4(K),Q="This field is required.",te="The chosen zone name is already in use.",Te="Default zone can only exist in a default zone group. ",pe="You cannot unset the default flag. ",de="Please consult the " + "\ufffd#3\ufffd" + "documentation" + "\ufffd/#3\ufffd" + " to follow the failover mechanism",Oe="Master zone already exists for the selected zone group. ",ge="You cannot unset the master flag. ",ve="Please consult the " + "\ufffd#3\ufffd" + "documentation" + "\ufffd/#3\ufffd" + " to follow the failover mechanism",we="This field is required.",We="Please enter a valid IP address.",Re="Placement target",$e="R\xE9serve de donn\xE9es",Ue="Index pool",xe="Data extra pool",Ze="Storage Class",ke="R\xE9serve de donn\xE9es",le="Compression",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","multisiteZoneForm","novalidate","",3,"formGroup"],["formDir","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","selectedZonegroup",1,"cd-col-form-label"],t,[1,"cd-col-form-input"],["id","selectedZonegroup","formControlName","selectedZonegroup","name","selectedZonegroup",1,"form-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],["for","zonegroupName",1,"cd-col-form-label","required"],o,["type","text","placeholder","Zone name...","id","zoneName","name","zoneName","formControlName","zoneName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"custom-control","custom-checkbox"],["id","default_zone","name","default_zone","formControlName","default_zone","type","checkbox",1,"form-check-input"],["for","default_zone",1,"form-check-label"],_,[4,"ngIf"],["id","master_zone","name","master_zone","formControlName","master_zone","type","checkbox",1,"form-check-input"],["for","master_zone",1,"form-check-label"],E,["for","zone_endpoints",1,"cd-col-form-label","required"],U,["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zone_endpoints","name","zone_endpoints","formControlName","zone_endpoints",1,"form-control"],["for","access_key",1,"cd-col-form-label"],H,[1,"input-group"],["type","password","placeholder","DiPt4V7WWvy2njL1z6aC","id","access_key","name","access_key","formControlName","access_key",1,"form-control"],["type","button","cdPasswordButton","access_key",1,"btn","btn-light"],["for","secret_key",1,"cd-col-form-label"],K,["type","password","placeholder","xSZUdYky0bTctAdCEEW8ikhfBVKsBV5LFYL82vvh","id","secret_key","name","secret_key","formControlName","secret_key",1,"form-control"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],[3,"value","selected"],[1,"invalid-feedback"],Q,te,Te,pe,de,[3,"href"],Oe,ge,ve,we,We,["for","placementTarget",1,"cd-col-form-label"],Re,["id","placementTarget","formControlName","placementTarget","name","placementTarget",1,"form-select",3,"change"],["for","placementDataPool",1,"cd-col-form-label"],$e,["id","placementDataPool","formControlName","placementDataPool","name","placementDataPool",1,"form-select",3,"value"],["for","placementIndexPool",1,"cd-col-form-label"],Ue,["id","placementIndexPool","formControlName","placementIndexPool","name","placementIndexPool",1,"form-select"],["for","placementDataExtraPool",1,"cd-col-form-label"],xe,["id","placementDataExtraPool","formControlName","placementDataExtraPool","name","placementDataExtraPool",1,"form-select"],["for","storageClass",1,"cd-col-form-label"],Ze,["id","storageClass","formControlName","storageClass","name","storageClass",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],["for","storageDataPool",1,"cd-col-form-label"],ke,["id","storageDataPool","formControlName","storageDataPool","name","storageDataPool",1,"form-select"],["for","storageCompression",1,"cd-col-form-label"],le,["id","storageCompression","formControlName","storageCompression","name","storageCompression",1,"form-select"],[3,"value"]]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.ALo(3,"titlecase"),e.ALo(4,"upperFirst"),e.BQk(),e.ynx(5,3),e.TgZ(6,"form",4,5)(8,"div",6)(9,"div",7)(10,"label",8),e.SDv(11,9),e.qZA(),e.TgZ(12,"div",10)(13,"select",11),e.NdJ("change",function(E){return o.onZoneGroupChange(E.target.value)}),e.YNc(14,wa,2,3,"option",12),e.qZA()()(),e.TgZ(15,"div",7)(16,"label",13),e.SDv(17,14),e.qZA(),e.TgZ(18,"div",10),e._UZ(19,"input",15),e.YNc(20,Wa,2,0,"span",16),e.YNc(21,$a,2,0,"span",16),e.TgZ(22,"div",17),e._UZ(23,"input",18),e.TgZ(24,"label",19),e.SDv(25,20),e.qZA(),e.YNc(26,Ua,3,0,"span",21),e.YNc(27,xa,3,0,"span",21),e.YNc(28,Za,4,1,"cd-helper",21),e._UZ(29,"br"),e.qZA(),e.TgZ(30,"div",17),e._UZ(31,"input",22),e.TgZ(32,"label",23),e.SDv(33,24),e.qZA(),e.YNc(34,ka,3,0,"span",21),e.YNc(35,Ba,3,0,"span",21),e.YNc(36,za,4,1,"cd-helper",21),e.qZA()()(),e.TgZ(37,"div",7)(38,"label",25),e.SDv(39,26),e.qZA(),e.TgZ(40,"div",10),e._UZ(41,"input",27),e.YNc(42,qa,2,0,"span",16),e.YNc(43,Ha,2,0,"span",16),e.qZA()(),e.TgZ(44,"div",7)(45,"label",28),e.tHW(46,29),e.TgZ(47,"cd-helper")(48,"span"),e._UZ(49,"b")(50,"b")(51,"b")(52,"b"),e.qZA()(),e.N_p(),e.qZA(),e.TgZ(53,"div",10)(54,"div",30),e._UZ(55,"input",31)(56,"button",32),e.qZA()()(),e.TgZ(57,"div",7)(58,"label",33),e.tHW(59,34),e.TgZ(60,"cd-helper")(61,"span"),e._UZ(62,"b")(63,"b")(64,"b")(65,"b"),e.qZA()(),e.N_p(),e.qZA(),e.TgZ(66,"div",10)(67,"div",30),e._UZ(68,"input",35)(69,"button",36),e.qZA()()(),e.YNc(70,tl,2,1,"div",37),e.qZA(),e.TgZ(71,"div",38)(72,"cd-form-button-panel",39),e.NdJ("submitActionEvent",function(){return o.submit()}),e.ALo(73,"titlecase"),e.ALo(74,"upperFirst"),e.qZA()()(),e.BQk(),e.qZA()),2&t){const _=e.MAs(7);e.Q6J("modalRef",o.activeModal),e.xp6(4),e.pQV(e.lcZ(3,21,o.action))(e.lcZ(4,23,o.resource)),e.QtT(2),e.xp6(2),e.Q6J("formGroup",o.multisiteZoneForm),e.xp6(7),e.uIk("disabled","edit"===o.action||null),e.xp6(1),e.Q6J("ngForOf",o.zonegroupList),e.xp6(6),e.Q6J("ngIf",o.multisiteZoneForm.showError("zoneName",_,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteZoneForm.showError("zoneName",_,"uniqueName")),e.xp6(2),e.uIk("disabled","edit"===o.action||null),e.xp6(3),e.Q6J("ngIf",o.disableDefault&&"create"===o.action),e.xp6(1),e.Q6J("ngIf",o.isDefaultZone),e.xp6(1),e.Q6J("ngIf","edit"===o.action&&!o.isDefaultZone),e.xp6(3),e.uIk("disabled","edit"===o.action||null),e.xp6(3),e.Q6J("ngIf",o.disableMaster),e.xp6(1),e.Q6J("ngIf",o.isMasterZone),e.xp6(1),e.Q6J("ngIf","edit"===o.action&&!o.isMasterZone),e.xp6(6),e.Q6J("ngIf",o.multisiteZoneForm.showError("zone_endpoints",_,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteZoneForm.showError("zone_endpoints",_,"endpoint")),e.xp6(27),e.Q6J("ngIf","edit"===o.action),e.xp6(2),e.Q6J("form",o.multisiteZoneForm)("submitText",e.lcZ(73,25,o.action)+" "+e.lcZ(74,27,o.resource))}},dependencies:[g.sg,g.O5,ze.S,Le.z,be.p,gt.C,Ge.o,O.b,l.P,w.V,r._Y,r.YN,r.Kr,r.Fj,r.Wl,r.EJ,r.JJ,r.JL,r.sg,r.u,g.rS,Je.m]}),n})();var ol=p(36569);function il(n,i){if(1&n&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();e.Q6J("value",t.name)("selected",t.name===o.multisiteZonegroupForm.getValue("selectedRealm")),e.xp6(1),e.hij(" ",t.name," ")}}function _l(n,i){1&n&&(e.TgZ(0,"span",34),e.SDv(1,35),e.qZA())}function rl(n,i){1&n&&(e.TgZ(0,"span",34),e.SDv(1,36),e.qZA())}function sl(n,i){1&n&&(e.TgZ(0,"span")(1,"cd-helper"),e.SDv(2,37),e.qZA()())}function al(n,i){if(1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.tHW(2,38),e._UZ(3,"a",39),e.N_p(),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.s9C("href",t.docUrl,e.LSH)}}function ll(n,i){1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.SDv(2,40),e.qZA()())}function cl(n,i){1&n&&(e.TgZ(0,"span")(1,"cd-helper"),e.SDv(2,41),e.qZA()())}function ul(n,i){if(1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.tHW(2,42),e._UZ(3,"a",39),e.N_p(),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.s9C("href",t.docUrl,e.LSH)}}function dl(n,i){1&n&&(e.TgZ(0,"cd-helper")(1,"span"),e.SDv(2,43),e.qZA()())}function fl(n,i){1&n&&(e.TgZ(0,"span",34),e.SDv(1,44),e.qZA())}function pl(n,i){1&n&&(e.TgZ(0,"span",34),e.SDv(1,45),e.qZA())}function gl(n,i){1&n&&(e.TgZ(0,"span",34),e.SDv(1,49),e.qZA())}function Tl(n,i){if(1&n&&(e.TgZ(0,"div",7)(1,"label",46),e.SDv(2,47),e.qZA(),e.TgZ(3,"div",10),e._UZ(4,"cd-select-badges",48)(5,"br"),e.YNc(6,gl,2,0,"span",18),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("data",t.zonegroupZoneNames)("options",t.labelsOption)("customBadges",!0),e.xp6(2),e.Q6J("ngIf",t.isRemoveMasterZone)}}function El(n,i){1&n&&(e.TgZ(0,"span"),e.SDv(1,68),e.qZA())}function Rl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",55)(2,"div",56),e._uU(3),e.ALo(4,"ordinal"),e.TgZ(5,"span",57),e.NdJ("click",function(){const E=e.CHM(t).index,U=e.oxw(2);return e.KtG(U.removePlacementTarget(E))}),e._uU(6,"\xd7"),e.qZA()(),e.TgZ(7,"div",58)(8,"div",7)(9,"label",59),e.SDv(10,60),e.qZA(),e.TgZ(11,"div",10),e._UZ(12,"input",61),e.TgZ(13,"span",34),e.YNc(14,El,2,0,"span",23),e.qZA()()(),e.TgZ(15,"div",7)(16,"label",62),e.SDv(17,63),e.qZA(),e.TgZ(18,"div",10),e._UZ(19,"input",64),e.qZA()(),e.TgZ(20,"div",7)(21,"label",65),e.SDv(22,66),e.qZA(),e.TgZ(23,"div",10),e._UZ(24,"input",67),e.qZA()()()()()}if(2&n){const t=i.$implicit,o=i.index,_=e.oxw(2),E=e.MAs(6);e.xp6(1),e.Q6J("formGroup",t),e.xp6(2),e.hij(" ",e.lcZ(4,3,o+1)," "),e.xp6(11),e.Q6J("ngIf",_.showError(o,"placement_id",E,"required"))}}const ml=function(n){return[n]};function Ml(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"legend"),e._uU(2,"Placement targets"),e.qZA(),e.ynx(3,50),e.YNc(4,Rl,25,5,"div",51),e.BQk(),e.TgZ(5,"button",52),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.addPlacementTarget())}),e._UZ(6,"i",53),e.ynx(7),e.SDv(8,54),e.BQk(),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.placementTargets.controls)("ngForTrackBy",t.trackByFn),e.xp6(2),e.Q6J("ngClass",e.VKq(3,ml,t.icons.add))}}let Sl=(()=>{class n{constructor(t,o,_,E,U){this.activeModal=t,this.actionLabels=o,this.rgwZonegroupService=_,this.notificationService=E,this.formBuilder=U,this.endpoints=/^((https?:\/\/)|(www.))(?:([a-zA-Z]+)|(\d+\.\d+.\d+.\d+)):\d{2,4}$/,this.ipv4Rgx=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,this.ipv6Rgx=/^(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}$/i,this.icons=q.P,this.editing=!1,this.defaultsInfo=[],this.multisiteInfo=[],this.realmList=[],this.zonegroupList=[],this.isMaster=!1,this.labelsOption=[],this.zoneList=[],this.isRemoveMasterZone=!1,this.disableDefault=!1,this.disableMaster=!1,this.action=this.editing?this.actionLabels.EDIT+this.resource:this.actionLabels.CREATE+this.resource,this.createForm()}createForm(){this.multisiteZonegroupForm=new Xe.d({default_zonegroup:new r.p4(!1),zonegroupName:new r.p4(null,{validators:[r.kI.required,oe.hq.custom("uniqueName",t=>"create"===this.action&&this.zonegroupNames&&-1!==this.zonegroupNames.indexOf(t))]}),master_zonegroup:new r.p4(!1),selectedRealm:new r.p4(null),zonegroup_endpoints:new r.p4(null,[oe.hq.custom("endpoint",t=>!(R().isEmpty(t)||(t.includes(",")?(t.split(",").forEach(o=>!this.endpoints.test(o)&&!this.ipv4Rgx.test(o)&&!this.ipv6Rgx.test(o)),1):this.endpoints.test(t)||this.ipv4Rgx.test(t)||this.ipv6Rgx.test(t)))),r.kI.required]),placementTargets:this.formBuilder.array([])})}ngOnInit(){R().forEach(this.multisiteZonegroupForm.get("placementTargets"),E=>{this.addPlacementTarget().patchValue(E)}),this.placementTargets=this.multisiteZonegroupForm.get("placementTargets"),this.realmList=void 0!==this.multisiteInfo[0]&&this.multisiteInfo[0].hasOwnProperty("realms")?this.multisiteInfo[0].realms:[],this.zonegroupList=void 0!==this.multisiteInfo[1]&&this.multisiteInfo[1].hasOwnProperty("zonegroups")?this.multisiteInfo[1].zonegroups:[],this.zonegroupList.forEach(E=>{!0===E.is_master&&!R().isEmpty(E.realm_id)&&(this.isMaster=!0,this.disableMaster=!0)}),this.isMaster||(this.multisiteZonegroupForm.get("master_zonegroup").setValue(!0),this.multisiteZonegroupForm.get("master_zonegroup").disable()),this.zoneList=void 0!==this.multisiteInfo[2]&&this.multisiteInfo[2].hasOwnProperty("zones")?this.multisiteInfo[2].zones:[],this.zonegroupNames=this.zonegroupList.map(E=>E.name);const _=this.zonegroupList.map(E=>E.zones).reduce((E,U)=>E.concat(U),[]).map(E=>E.name);if(this.allZoneNames=this.zoneList.map(E=>E.name),this.allZoneNames=R().difference(this.allZoneNames,_),"create"===this.action&&null!==this.defaultsInfo.defaultRealmName&&(this.multisiteZonegroupForm.get("selectedRealm").setValue(this.defaultsInfo.defaultRealmName),this.disableMaster&&this.multisiteZonegroupForm.get("master_zonegroup").disable()),"edit"===this.action){this.multisiteZonegroupForm.get("zonegroupName").setValue(this.info.data.name),this.multisiteZonegroupForm.get("selectedRealm").setValue(this.info.data.parent),this.multisiteZonegroupForm.get("default_zonegroup").setValue(this.info.data.is_default),this.multisiteZonegroupForm.get("master_zonegroup").setValue(this.info.data.is_master),this.multisiteZonegroupForm.get("zonegroup_endpoints").setValue(this.info.data.endpoints),this.info.data.is_default&&this.multisiteZonegroupForm.get("default_zonegroup").disable(),!this.info.data.is_default&&this.multisiteZonegroupForm.getValue("selectedRealm")!==this.defaultsInfo.defaultRealmName&&(this.multisiteZonegroupForm.get("default_zonegroup").disable(),this.disableDefault=!0),(this.info.data.is_master||this.disableMaster)&&this.multisiteZonegroupForm.get("master_zonegroup").disable(),this.zonegroupZoneNames=this.info.data.zones.map(U=>U.name),this.zgZoneNames=this.info.data.zones.map(U=>U.name),this.zgZoneIds=this.info.data.zones.map(U=>U.id);const E=new Set(this.allZoneNames);this.labelsOption=Array.from(E).map(U=>({enabled:!0,name:U,selected:!1,description:null})),this.info.data.placement_targets.forEach(U=>{const H=this.addPlacementTarget();let K={placement_id:U.name,tags:U.tags.join(","),storage_class:"string"==typeof U.storage_classes?U.storage_classes:U.storage_classes.join(",")};H.patchValue(K)})}}submit(){const t=this.multisiteZonegroupForm.getRawValue();if("create"===this.action)this.realm=new Me.L6,this.realm.name=t.selectedRealm,this.zonegroup=new Me.iG,this.zonegroup.name=t.zonegroupName,this.zonegroup.endpoints=t.zonegroup_endpoints,this.rgwZonegroupService.create(this.realm,this.zonegroup,t.default_zonegroup,t.master_zonegroup).subscribe(()=>{this.notificationService.show(J.k.success,"Zonegroup: '" + t.zonegroupName + "' created successfully"),this.activeModal.close()},()=>{this.multisiteZonegroupForm.setErrors({cdSubmitButton:!0})});else if("edit"===this.action){this.removedZones=R().difference(this.zgZoneNames,this.zonegroupZoneNames);const o=this.info.data.zones.filter(_=>_.id===this.info.data.master_zone);if(this.isRemoveMasterZone=this.removedZones.includes(o[0].name),this.isRemoveMasterZone)return void this.multisiteZonegroupForm.setErrors({cdSubmitButton:!0});this.addedZones=R().difference(this.zonegroupZoneNames,this.zgZoneNames),this.realm=new Me.L6,this.realm.name=t.selectedRealm,this.zonegroup=new Me.iG,this.zonegroup.name=this.info.data.name,this.newZonegroupName=t.zonegroupName,this.zonegroup.endpoints=t.zonegroup_endpoints.toString(),this.zonegroup.placement_targets=t.placementTargets,this.rgwZonegroupService.update(this.realm,this.zonegroup,this.newZonegroupName,t.default_zonegroup,t.master_zonegroup,this.removedZones,this.addedZones).subscribe(()=>{this.notificationService.show(J.k.success,"Zonegroup: '" + t.zonegroupName + "' updated successfully"),this.activeModal.close()},()=>{this.multisiteZonegroupForm.setErrors({cdSubmitButton:!0})})}}addPlacementTarget(){this.placementTargets=this.multisiteZonegroupForm.get("placementTargets");const t=new Xe.d({placement_id:new r.p4("",{validators:[r.kI.required]}),tags:new r.p4(""),storage_class:new r.p4([])});return this.placementTargets.push(t),t}trackByFn(t){return t}removePlacementTarget(t){this.placementTargets=this.multisiteZonegroupForm.get("placementTargets"),this.placementTargets.removeAt(t)}showError(t,o,_,E){return this.multisiteZonegroupForm.controls.placementTargets.controls[t].showError(o,_,E)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.Kz),e.Y36(T.p4),e.Y36(_t.K),e.Y36(fe.g),e.Y36(r.QS))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-zonegroup-form"]],decls:49,vars:24,consts:function(){let i,t,o,_,E,U,H,K,Q,te,Te,pe,de,Oe,ge,ve,we,We,Re,$e,Ue,xe,Ze,ke;return i="" + "\ufffd0\ufffd" + " Zone Group",t="Select Realm",o="-- Select a realm --",_="Zone Group Name",E="Default",U="Master",H="Endpoints",K="This field is required.",Q="The chosen zone group name is already in use.",te="Zone group doesn't belong to the default realm.",Te="Please consult the " + "\ufffd#3\ufffd" + "documentation" + "\ufffd/#3\ufffd" + " to follow the failover mechanism",pe="You cannot unset the default flag.",de="Multiple master zone groups can't be configured. If you want to create a new zone group and make it the master zone group, you must delete the default zone group.",Oe="Please consult the " + "\ufffd#3\ufffd" + "documentation" + "\ufffd/#3\ufffd" + " to follow the failover mechanism",ge="You cannot unset the master flag.",ve="This field is required.",we="Please enter a valid IP address.",We="Zones",Re="Cannot remove master zone.",$e="Add placement target",Ue="Placement Id",xe="Balises",Ze="Storage Class",ke="This field is required.",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","multisiteZonegroupForm","novalidate","",3,"formGroup"],["formDir","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","selectedRealm",1,"cd-col-form-label"],t,[1,"cd-col-form-input"],["id","selectedRealm","formControlName","selectedRealm","name","selectedRealm",1,"form-select"],["ngValue",""],o,[3,"value","selected",4,"ngFor","ngForOf"],["for","zonegroupName",1,"cd-col-form-label","required"],_,["type","text","placeholder","Zone group name...","id","zonegroupName","name","zonegroupName","formControlName","zonegroupName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"custom-control","custom-checkbox"],["id","default_zonegroup","name","default_zonegroup","formControlName","default_zonegroup","type","checkbox",1,"form-check-input"],["for","default_zonegroup",1,"form-check-label"],E,[4,"ngIf"],["id","master_zonegroup","name","master_zonegroup","formControlName","master_zonegroup","type","checkbox",1,"form-check-input"],["for","master_zonegroup",1,"form-check-label"],U,["for","zonegroup_endpoints",1,"cd-col-form-label","required"],H,["type","text","placeholder","e.g, http://ceph-node-00.com:80","id","zonegroup_endpoints","name","zonegroup_endpoints","formControlName","zonegroup_endpoints",1,"form-control"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],[3,"value","selected"],[1,"invalid-feedback"],K,Q,te,Te,[3,"href"],pe,de,Oe,ge,ve,we,["for","zones",1,"cd-col-form-label"],We,["id","zones",3,"data","options","customBadges"],Re,["formArrayName","placementTargets"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","button","id","add-plc",1,"btn","btn-light","float-end","my-3",3,"click"],[3,"ngClass"],$e,[1,"card",3,"formGroup"],[1,"card-header"],["name","remove_placement_target","ngbTooltip","Remove",1,"float-end","clickable",3,"click"],[1,"card-body"],["for","placement_id",1,"cd-col-form-label","required"],Ue,["type","text","name","placement_id","id","placement_id","formControlName","placement_id","placeholder","eg. default-placement",1,"form-control"],["for","tags",1,"cd-col-form-label"],xe,["type","text","name","tags","id","tags","formControlName","tags","placeholder","comma separated tags, eg. default-placement, ssd",1,"form-control"],["for","storage_class",1,"cd-col-form-label"],Ze,["type","text","name","storage_class","id","storage_class","formControlName","storage_class","placeholder","eg. Standard-tier",1,"form-control"],ke]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.ALo(3,"titlecase"),e.BQk(),e.ynx(4,3),e.TgZ(5,"form",4,5)(7,"div",6)(8,"div",7)(9,"label",8),e.SDv(10,9),e.qZA(),e.TgZ(11,"div",10)(12,"select",11)(13,"option",12),e.SDv(14,13),e.qZA(),e.YNc(15,il,2,3,"option",14),e.qZA()()(),e.TgZ(16,"div",7)(17,"label",15),e.SDv(18,16),e.qZA(),e.TgZ(19,"div",10),e._UZ(20,"input",17),e.YNc(21,_l,2,0,"span",18),e.YNc(22,rl,2,0,"span",18),e.TgZ(23,"div",19),e._UZ(24,"input",20),e.TgZ(25,"label",21),e.SDv(26,22),e.qZA(),e.YNc(27,sl,3,0,"span",23),e.YNc(28,al,4,1,"cd-helper",23),e.YNc(29,ll,3,0,"cd-helper",23),e._UZ(30,"br")(31,"input",24),e.TgZ(32,"label",25),e.SDv(33,26),e.qZA(),e.YNc(34,cl,3,0,"span",23),e.YNc(35,ul,4,1,"cd-helper",23),e.YNc(36,dl,3,0,"cd-helper",23),e.qZA()()(),e.TgZ(37,"div",7)(38,"label",27),e.SDv(39,28),e.qZA(),e.TgZ(40,"div",10),e._UZ(41,"input",29),e.YNc(42,fl,2,0,"span",18),e.YNc(43,pl,2,0,"span",18),e.qZA()(),e.YNc(44,Tl,7,4,"div",30),e.YNc(45,Ml,9,5,"div",23),e.qZA(),e.TgZ(46,"div",31)(47,"cd-form-button-panel",32),e.NdJ("submitActionEvent",function(){return o.submit()}),e.ALo(48,"titlecase"),e.qZA()()(),e.BQk(),e.qZA()),2&t){const _=e.MAs(6);e.Q6J("modalRef",o.activeModal),e.xp6(3),e.pQV(e.lcZ(3,20,o.action)),e.QtT(2),e.xp6(2),e.Q6J("formGroup",o.multisiteZonegroupForm),e.xp6(10),e.Q6J("ngForOf",o.realmList),e.xp6(6),e.Q6J("ngIf",o.multisiteZonegroupForm.showError("zonegroupName",_,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteZonegroupForm.showError("zonegroupName",_,"uniqueName")),e.xp6(2),e.uIk("disabled","edit"===o.action||null),e.xp6(3),e.Q6J("ngIf",o.disableDefault&&"create"===o.action),e.xp6(1),e.Q6J("ngIf","edit"===o.action&&!o.info.data.is_default),e.xp6(1),e.Q6J("ngIf","edit"===o.action&&o.info.data.is_default),e.xp6(2),e.uIk("disabled","edit"===o.action||null),e.xp6(3),e.Q6J("ngIf",o.disableMaster&&"create"===o.action),e.xp6(1),e.Q6J("ngIf","edit"===o.action&&!o.info.data.is_master),e.xp6(1),e.Q6J("ngIf","edit"===o.action&&o.info.data.is_master),e.xp6(6),e.Q6J("ngIf",o.multisiteZonegroupForm.showError("zonegroup_endpoints",_,"required")),e.xp6(1),e.Q6J("ngIf",o.multisiteZonegroupForm.showError("zonegroup_endpoints",_,"endpoint")),e.xp6(1),e.Q6J("ngIf","edit"===o.action),e.xp6(1),e.Q6J("ngIf","edit"===o.action),e.xp6(2),e.Q6J("form",o.multisiteZonegroupForm)("submitText",e.lcZ(48,22,o.action)+" Zone Group")}},dependencies:[g.mk,g.sg,g.O5,ze.S,dn.m,Le.z,be.p,Ge.o,O.b,l.P,w.V,r._Y,r.YN,r.Kr,r.Fj,r.Wl,r.EJ,r.JJ,r.JL,r.sg,r.u,r.CE,b._L,g.rS,ol.f]}),n})();var hl=p(61717),hn=p(76111),Xn=p(32337),Yn=p(34553);class Tt{constructor(i=!1,t){this.customBadges=i,this.data={selected:[],available:[],validators:[r.kI.pattern("[A-Za-z0-9_-]+|\\*"),r.kI.maxLength(50)],messages:new Bn.a({empty:"No zones added",customValidations:{pattern:"Allowed characters '-_a-zA-Z0-9|*'",maxlength:"Maximum length is 50 characters"},filter:"" + t + "",add:"Add zone"})}}}function Cl(n,i){1&n&&(e.TgZ(0,"span",21),e.SDv(1,22),e.qZA())}function Fl(n,i){1&n&&e.GkF(0)}const Ol=function(n){return{name:"zones",zone:n}};function Nl(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"div",7)(2,"label",23),e.ynx(3),e.SDv(4,24),e.BQk(),e.TgZ(5,"cd-helper")(6,"span"),e.SDv(7,25),e.qZA()()(),e.TgZ(8,"div",10),e.YNc(9,Fl,1,0,"ng-container",26),e.qZA()(),e.BQk()),2&n){const t=e.oxw(),o=e.MAs(28);e.xp6(9),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,Ol,t.zones))}}function Pl(n,i){1&n&&e.GkF(0)}function Al(n,i){1&n&&e.GkF(0)}const bl=function(n){return{name:"source_zone",zone:n}},Il=function(n){return{name:"destination_zone",zone:n}};function Gl(n,i){if(1&n&&(e.TgZ(0,"div",7)(1,"label",27),e.SDv(2,28),e.qZA(),e.TgZ(3,"div",10),e.YNc(4,Pl,1,0,"ng-container",26),e.qZA()(),e.TgZ(5,"div",7)(6,"label",29),e.SDv(7,30),e.qZA(),e.TgZ(8,"div",10),e.YNc(9,Al,1,0,"ng-container",26),e.qZA()()),2&n){const t=e.oxw(),o=e.MAs(28);e.xp6(4),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(4,bl,t.sourceZones)),e.xp6(5),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(6,Il,t.destinationZones))}}function yl(n,i){if(1&n&&(e.TgZ(0,"i",33),e.DtL(1,34),e.qZA()),2&n){const t=e.oxw().name,o=e.oxw();e.pQV(null==t?null:t.split("_").join(" ")),e.QtT(1),e.Gre("",o.icons.warning," icon-warning-color")}}function Ll(n,i){if(1&n&&(e.TgZ(0,"span",21),e.SDv(1,35),e.qZA()),2&n){const t=e.oxw().name;e.xp6(1),e.pQV(null==t?null:t.split("_").join(" ")),e.QtT(1)}}function Dl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"cd-select-badges",31),e.NdJ("selection",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.zoneSelection())}),e.qZA(),e.YNc(1,yl,2,4,"i",32),e.YNc(2,Ll,2,1,"span",15)}if(2&n){const t=i.name,o=i.zone,_=e.oxw(),E=e.MAs(7);e.Q6J("id",t)("name",t)("customBadges",o.customBadges)("customBadgeValidators",o.data.validators)("messages",o.data.messages)("data",o.data.selected)("options",o.data.available),e.xp6(1),e.Q6J("ngIf",o.data.selected.length<=0),e.xp6(1),e.Q6J("ngIf",_.currentFormGroupContext.showError(t,E,"required"))}}let vl=(()=>{class n{constructor(t,o,_,E,U,H){this.activeModal=t,this.actionLabels=o,this.notificationService=_,this.rgwDaemonService=E,this.rgwZonegroupService=U,this.rgwMultisiteService=H,this.editing=!1,this.flowType=Me.MK,this.icons=q.P,this.zones=new Tt(!1,"Filter Zones"),this.sourceZones=new Tt(!1,"Filter Zones"),this.destinationZones=new Tt(!0,"Filter or Add Zones")}ngOnInit(){"edit"===this.action&&(this.editing=!0),this.groupType===Me.MK.symmetrical?(this.createSymmetricalFlowForm(),this.currentFormGroupContext=R().cloneDeep(this.syncPolicySymmetricalFlowForm)):this.groupType===Me.MK.directional&&(this.createDirectionalFlowForm(),this.currentFormGroupContext=R().cloneDeep(this.syncPolicyDirectionalFlowForm)),this.currentFormGroupContext.get("bucket_name").disable(),this.editing&&(this.currentFormGroupContext.patchValue({flow_id:this.flowSelectedRow.id,bucket_name:this.groupExpandedRow.bucket||""}),this.currentFormGroupContext.get("flow_id").disable()),this.rgwDaemonService.selectedDaemon$.pipe((0,an.w)(t=>{if(t){const o=new Me.iG;return o.name=t?.zonegroup_name,this.rgwZonegroupService.get(o).pipe((0,h.K)(()=>(0,f.of)([])))}return(0,f.of)([])})).subscribe(t=>{if(t&&t?.zones?.length>0){const o=[];t.zones.forEach(_=>{o.push(new Sn.$(!1,_.name,""))}),this.zones.data.available=[...o],this.sourceZones.data.available=[...o],this.editing&&(this.groupType===Me.MK.symmetrical?this.zones.data.selected=this.flowSelectedRow.zones:(this.destinationZones.data.selected=[this.flowSelectedRow.dest_zone],this.sourceZones.data.selected=[this.flowSelectedRow.source_zone]),this.zoneSelection())}})}createSymmetricalFlowForm(){this.syncPolicySymmetricalFlowForm=new Xe.d({...this.commonFormControls(Me.MK.symmetrical),zones:new r.p4([],{validators:[r.kI.required]})})}createDirectionalFlowForm(){this.syncPolicyDirectionalFlowForm=new Xe.d({...this.commonFormControls(Me.MK.directional),source_zone:new r.p4("",{validators:[r.kI.required]}),destination_zone:new r.p4("",{validators:[r.kI.required]})})}commonFormControls(t){return{bucket_name:new r.p4(this.groupExpandedRow?.bucket),group_id:new r.p4(this.groupExpandedRow?.groupName,{validators:[r.kI.required]}),flow_id:new r.p4("",{validators:[r.kI.required]}),flow_type:new r.p4(t,{validators:[r.kI.required]})}}zoneSelection(){this.currentFormGroupContext.patchValue(this.groupType===Me.MK.symmetrical?{zones:this.zones.data.selected}:{source_zone:this.sourceZones.data.selected,destination_zone:this.destinationZones.data.selected})}submit(){if(!this.currentFormGroupContext.invalid){if(this.currentFormGroupContext.pending)return void this.currentFormGroupContext.setErrors({cdSubmitButton:!0});this.rgwMultisiteService.createEditSyncFlow(this.currentFormGroupContext.getRawValue()).subscribe(()=>{this.notificationService.show(J.k.success,"" + (this.editing ? "Modified" : "Created") + " Sync Flow '" + this.currentFormGroupContext.getValue("flow_id") + "'"),this.activeModal.close("success")},()=>{this.currentFormGroupContext.setErrors({cdSubmitButton:!0}),this.activeModal.dismiss()})}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.Kz),e.Y36(T.p4),e.Y36(fe.g),e.Y36(z.b),e.Y36(_t.K),e.Y36(et.o))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-sync-flow-modal"]],decls:29,vars:17,consts:function(){let i,t,o,_,E,U,H,K,Q,te,Te;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + " Flow",t="Name",o="Bucket Name",_="Bucket Name...",E="The bucket with chosen name does not exist.",U="Zones",H="Flow need to be associated with atleast one zone",K="Source Zone ",Q="Destination Zone",te="Flow should be associated with " + "\ufffd0\ufffd" + "",Te="" + "\ufffd0\ufffd" + " selection is required! ",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","flowForm","novalidate","",3,"formGroup"],["frm","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","flow_id",1,"cd-col-form-label","required"],t,[1,"cd-col-form-input"],["type","text","placeholder","Flow Name...","id","flow_id","name","flow_id","formControlName","flow_id",1,"form-control"],["for","bucket",1,"cd-col-form-label"],o,["id","bucket","name","bucket","type","text","placeholder",_,"formControlName","bucket_name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[4,"ngIf","ngIfElse"],["directionalFlow",""],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],["zoneMultiSelect",""],[1,"invalid-feedback"],E,["for","zones",1,"cd-col-form-label","required"],U,H,[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","source_zone",1,"cd-col-form-label","required"],K,["for","destination_zone",1,"cd-col-form-label","required"],Q,[3,"id","name","customBadges","customBadgeValidators","messages","data","options","selection"],[3,"title","class",4,"ngIf"],[6,"title"],["title",te],Te]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.ALo(3,"titlecase"),e.ALo(4,"upperFirst"),e.BQk(),e.ynx(5,3),e.TgZ(6,"form",4,5)(8,"div",6)(9,"div",7)(10,"label",8),e.SDv(11,9),e.qZA(),e.TgZ(12,"div",10),e._UZ(13,"input",11),e.qZA()(),e.TgZ(14,"div",7)(15,"label",12),e.SDv(16,13),e.qZA(),e.TgZ(17,"div",10),e._UZ(18,"input",14),e.YNc(19,Cl,2,0,"span",15),e.qZA()(),e.YNc(20,Nl,10,4,"ng-container",16),e.YNc(21,Gl,10,8,"ng-template",null,17,e.W1O),e.qZA(),e.TgZ(23,"div",18)(24,"cd-form-button-panel",19),e.NdJ("submitActionEvent",function(){return o.submit()}),e.ALo(25,"titlecase"),e.ALo(26,"upperFirst"),e.qZA()()(),e.BQk(),e.qZA(),e.YNc(27,Dl,3,9,"ng-template",null,20,e.W1O)),2&t){const _=e.MAs(7),E=e.MAs(22);e.Q6J("modalRef",o.activeModal),e.xp6(4),e.pQV(e.lcZ(3,9,o.action))(e.lcZ(4,11,o.groupType)),e.QtT(2),e.xp6(2),e.Q6J("formGroup",o.currentFormGroupContext),e.xp6(13),e.Q6J("ngIf",o.currentFormGroupContext.showError("bucket_name",_,"bucketNameNotAllowed")),e.xp6(1),e.Q6J("ngIf",o.groupType==o.flowType.symmetrical)("ngIfElse",E),e.xp6(4),e.Q6J("form",o.currentFormGroupContext)("submitText",e.lcZ(25,13,o.action)+" "+e.lcZ(26,15,o.groupType)+" Flow")}},dependencies:[g.O5,g.tP,ze.S,dn.m,Le.z,be.p,Ge.o,O.b,l.P,w.V,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,g.rS,Je.m]}),n})();function wl(n,i){1&n&&e.GkF(0)}function Wl(n,i){1&n&&e.GkF(0)}function $l(n,i){if(1&n&&(e.TgZ(0,"i",32),e.DtL(1,33),e.qZA()),2&n){const t=e.oxw().name,o=e.oxw();e.pQV(null==t?null:t.split("_").join(" ")),e.QtT(1),e.Gre("",o.icons.warning," icon-warning-color")}}function Ul(n,i){if(1&n&&(e.TgZ(0,"span",34),e.SDv(1,35),e.qZA()),2&n){const t=e.oxw().name;e.xp6(1),e.pQV(null==t?null:t.split("_").join(" ")),e.QtT(1)}}function xl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"cd-select-badges",29),e.NdJ("selection",function(){const E=e.CHM(t).name,U=e.oxw();return e.KtG(U.onZoneSelection(E))}),e.qZA(),e.YNc(1,$l,2,4,"i",30),e.YNc(2,Ul,2,1,"span",31)}if(2&n){const t=i.name,o=i.zone,_=e.oxw(),E=e.MAs(6);e.s9C("id",t),e.s9C("name",t),e.Q6J("customBadges",o.customBadges)("customBadgeValidators",o.data.validators)("messages",o.data.messages)("data",o.data.selected)("options",o.data.available),e.xp6(1),e.Q6J("ngIf",o.data.selected.length<=0),e.xp6(1),e.Q6J("ngIf",_.pipeForm.showError(t,E,"required"))}}const Zl=function(n){return{name:"source_zones",zone:n}},kl=function(n){return{name:"destination_zones",zone:n}};let Bl=(()=>{class n{constructor(t,o,_,E,U){this.activeModal=t,this.rgwDaemonService=o,this.rgwZonegroupService=_,this.rgwMultisiteService=E,this.notificationService=U,this.sourceZones=new Tt(!1,"Filter Zones"),this.destZones=new Tt(!0,"Filter or Add Zones"),this.icons=q.P}ngOnInit(){this.editing="create"!==this.action,this.pipeForm=new Xe.d({pipe_id:new r.p4("",{validators:[r.kI.required]}),group_id:new r.p4(this.groupExpandedRow?.groupName||"",{validators:[r.kI.required]}),bucket_name:new r.p4(this.groupExpandedRow?.bucket||""),source_bucket:new r.p4(""),source_zones:new r.p4("",{validators:[r.kI.required]}),destination_bucket:new r.p4(""),destination_zones:new r.p4("",{validators:[r.kI.required]})}),this.pipeForm.get("bucket_name").disable(),this.rgwDaemonService.selectedDaemon$.pipe((0,an.w)(t=>{if(t){const o=new Me.iG;return o.name=t.zonegroup_name,this.rgwZonegroupService.get(o).pipe((0,h.K)(()=>(0,f.of)([])))}return(0,f.of)([])})).subscribe(t=>{if(t&&t?.zones?.length>0){let o=[];t.zones.forEach(_=>{o.push(new Sn.$(!1,_.name,""))}),this.sourceZones.data.available=[...o],this.editing&&(this.pipeForm.get("pipe_id").disable(),this.sourceZones.data.selected=this.pipeSelectedRow.source.zones,this.destZones.data.selected=this.pipeSelectedRow.dest.zones,this.pipeForm.patchValue({pipe_id:this.pipeSelectedRow.id,source_zones:this.pipeSelectedRow.source.zones,destination_zones:this.pipeSelectedRow.dest.zones,source_bucket:this.pipeSelectedRow.source.bucket,destination_bucket:this.pipeSelectedRow.dest.bucket}))}})}onZoneSelection(t){this.pipeForm.patchValue("source_zones"===t?{source_zones:this.sourceZones.data.selected}:{destination_zones:this.destZones.data.selected})}submit(){if(!this.pipeForm.invalid){if(this.pipeForm.pending)return void this.pipeForm.setErrors({cdSubmitButton:!0});this.rgwMultisiteService.createEditSyncPipe(this.pipeForm.getRawValue()).subscribe(()=>{this.notificationService.show(J.k.success,"" + (this.editing ? "Modified" : "Created") + " Sync Pipe '" + this.pipeForm.getValue("pipe_id") + "'"),this.activeModal.close("success")},()=>{this.pipeForm.setErrors({cdSubmitButton:!0}),this.activeModal.dismiss()})}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.Kz),e.Y36(z.b),e.Y36(_t.K),e.Y36(et.o),e.Y36(fe.g))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-sync-pipe-modal"]],decls:43,vars:18,consts:function(){let i,t,o,_,E,U,H,K,Q,te,Te,pe;return i="" + "\ufffd0\ufffd" + " Pipe",t="Name",o="Source Zone ",_="Destination Zone",E="Bucket Name",U="Bucket Name...",H="Source Bucket",K="Source Bucket Name...",Q="Destination Bucket",te="Destination Bucket Name...",Te="Pipe should be associated with " + "\ufffd0\ufffd" + "",pe="" + "\ufffd0\ufffd" + " selection is required! ",[[3,"modalRef"],[1,"modal-title"],i,[1,"modal-content"],["name","pipeForm","novalidate","",3,"formGroup"],["frm","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","pipe_id",1,"cd-col-form-label","required"],t,[1,"cd-col-form-input"],["type","text","placeholder","Pipe Name...","id","pipe_id","name","pipe_id","formControlName","pipe_id",1,"form-control",3,"readonly"],["for","source_zone",1,"cd-col-form-label","required"],o,[4,"ngTemplateOutlet","ngTemplateOutletContext"],["for","destination_zone",1,"cd-col-form-label","required"],_,["for","bucket",1,"cd-col-form-label"],E,["id","bucket","name","bucket","type","text","placeholder",U,"formControlName","bucket_name",1,"form-control"],["for","source_bucket",1,"cd-col-form-label"],H,["id","source_bucket","name","source_bucket","type","text","placeholder",K,"formControlName","source_bucket",1,"form-control"],["for","dest_bucket",1,"cd-col-form-label"],Q,["id","dest_bucket","name","dest_bucket","type","text","placeholder",te,"formControlName","destination_bucket",1,"form-control"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],["zoneMultiSelect",""],[3,"id","name","customBadges","customBadgeValidators","messages","data","options","selection"],[3,"title","class",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],[6,"title"],["title",Te],[1,"invalid-feedback"],pe]},template:function(t,o){if(1&t&&(e.TgZ(0,"cd-modal",0),e.ynx(1,1),e.SDv(2,2),e.ALo(3,"titlecase"),e.BQk(),e.ynx(4,3),e.TgZ(5,"form",4,5)(7,"div",6)(8,"div",7)(9,"label",8),e.SDv(10,9),e.qZA(),e.TgZ(11,"div",10),e._UZ(12,"input",11),e.qZA()(),e.TgZ(13,"div",7)(14,"label",12),e.SDv(15,13),e.qZA(),e.TgZ(16,"div",10),e.YNc(17,wl,1,0,"ng-container",14),e.qZA()(),e.TgZ(18,"div",7)(19,"label",15),e.SDv(20,16),e.qZA(),e.TgZ(21,"div",10),e.YNc(22,Wl,1,0,"ng-container",14),e.qZA()(),e.TgZ(23,"div",7)(24,"label",17),e.SDv(25,18),e.qZA(),e.TgZ(26,"div",10),e._UZ(27,"input",19),e.qZA()(),e.TgZ(28,"div",7)(29,"label",20),e.SDv(30,21),e.qZA(),e.TgZ(31,"div",10),e._UZ(32,"input",22),e.qZA()(),e.TgZ(33,"div",7)(34,"label",23),e.SDv(35,24),e.qZA(),e.TgZ(36,"div",10),e._UZ(37,"input",25),e.qZA()()(),e.TgZ(38,"div",26)(39,"cd-form-button-panel",27),e.NdJ("submitActionEvent",function(){return o.submit()}),e.ALo(40,"titlecase"),e.qZA()()(),e.BQk(),e.qZA(),e.YNc(41,xl,3,9,"ng-template",null,28,e.W1O)),2&t){const _=e.MAs(42);e.Q6J("modalRef",o.activeModal),e.xp6(3),e.pQV(e.lcZ(3,10,o.action)),e.QtT(2),e.xp6(2),e.Q6J("formGroup",o.pipeForm),e.xp6(7),e.Q6J("readonly",o.editing),e.xp6(5),e.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",e.VKq(14,Zl,o.sourceZones)),e.xp6(5),e.Q6J("ngTemplateOutlet",_)("ngTemplateOutletContext",e.VKq(16,kl,o.destZones)),e.xp6(17),e.Q6J("form",o.pipeForm)("submitText",e.lcZ(40,12,o.action)+" Pipe")}},dependencies:[g.O5,g.tP,dn.m,Le.z,be.p,Ge.o,O.b,l.P,w.V,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,g.rS]}),n})();const zl=["deleteTpl"];function ql(n,i){1&n&&(e.TgZ(0,"cd-alert-panel",16),e.SDv(1,17),e.qZA())}function Hl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"legend"),e._uU(1," Symmetrical "),e.TgZ(2,"cd-help-text"),e._uU(3," It can define symmetrical data flow, in which multiple zones sync data from each other. "),e.qZA()(),e.TgZ(4,"cd-table",11,12),e.NdJ("updateSelection",function(_){e.CHM(t);const E=e.oxw(2);return e.KtG(E.updateSelection(_,E.flowType.symmetrical))})("fetchData",function(_){e.CHM(t);const E=e.oxw(2);return e.KtG(E.loadData(_))}),e.TgZ(6,"div",13),e._UZ(7,"cd-table-actions",14),e.qZA()(),e.TgZ(8,"legend"),e._uU(9," Directional "),e.TgZ(10,"cd-help-text"),e._uU(11," It can define directional data flow, in which the data moves in one way, from one zone to another. "),e.qZA()(),e.TgZ(12,"cd-table",11,12),e.NdJ("updateSelection",function(_){e.CHM(t);const E=e.oxw(2);return e.KtG(E.updateSelection(_,E.flowType.directional))})("fetchData",function(_){e.CHM(t);const E=e.oxw(2);return e.KtG(E.loadData(_))}),e.TgZ(14,"div",13),e._UZ(15,"cd-table-actions",14),e.qZA()(),e.YNc(16,ql,2,0,"cd-alert-panel",15)}if(2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("autoReload",!1)("data",t.symmetricalFlowData)("columns",t.symmetricalFlowCols)("searchableObjects",!0)("hasDetails",!1)("serverSide",!1)("count",0)("maxLimit",25)("toolHeader",!0),e.xp6(3),e.Q6J("permission",t.permission)("selection",t.symFlowSelection)("tableActions",t.symFlowTableActions),e.xp6(5),e.Q6J("autoReload",!1)("data",t.directionalFlowData)("columns",t.directionalFlowCols)("searchableObjects",!0)("hasDetails",!1)("serverSide",!1)("count",0)("maxLimit",25)("toolHeader",!0),e.xp6(3),e.Q6J("permission",t.permission)("selection",t.dirFlowSelection)("tableActions",t.dirFlowTableActions),e.xp6(1),e.Q6J("ngIf",t.dirFlowSelection.hasSelection)}}function Xl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"legend"),e.tHW(1,18),e._UZ(2,"cd-help-text"),e.N_p(),e.qZA(),e.TgZ(3,"cd-table",19,12),e.NdJ("updateSelection",function(_){e.CHM(t);const E=e.oxw(2);return e.KtG(E.pipeSelection=_)})("fetchData",function(_){e.CHM(t);const E=e.oxw(2);return e.KtG(E.loadData(_))}),e.TgZ(5,"div",13),e._UZ(6,"cd-table-actions",14),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("data",t.pipeData)("columns",t.pipeCols)("searchableObjects",!0)("hasDetails",!1)("serverSide",!1)("toolHeader",!0),e.xp6(3),e.Q6J("permission",t.permission)("selection",t.pipeSelection)("tableActions",t.pipeTableActions)}}function Yl(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"nav",2,3),e.ynx(3,4),e.TgZ(4,"a",5),e.SDv(5,6),e.qZA(),e.YNc(6,Hl,17,25,"ng-template",7),e.BQk(),e.ynx(7,8),e.TgZ(8,"a",5),e.SDv(9,9),e.qZA(),e.YNc(10,Xl,7,9,"ng-template",7),e.BQk(),e.qZA(),e._UZ(11,"div",10),e.BQk()),2&n){const t=e.MAs(2);e.xp6(11),e.Q6J("ngbNavOutlet",t)}}function Kl(n,i){1&n&&(e.TgZ(0,"cd-alert-panel",20),e.SDv(1,21),e.qZA())}let Ql=(()=>{class n{constructor(t,o,_,E){this.actionLabels=t,this.modalService=o,this.rgwMultisiteService=_,this.taskWrapper=E,this.flowType=Me.MK,this.symmetricalFlowData=[],this.directionalFlowData=[],this.pipeData=[],this.symFlowSelection=new ot.r,this.dirFlowSelection=new ot.r,this.pipeSelection=new ot.r,this.symmetricalFlowCols=[{name:"Name",prop:"id",flexGrow:1},{name:"Zones",prop:"zones",flexGrow:1}],this.directionalFlowCols=[{name:"Source Zone",prop:"source_zone",flexGrow:1},{name:"Destination Zone",prop:"dest_zone",flexGrow:1}],this.pipeCols=[{name:"Name",prop:"id",flexGrow:1},{name:"Source Zone",prop:"source.zones",flexGrow:1},{name:"Destination Zone",prop:"dest.zones",flexGrow:1},{name:"Source Bucket",prop:"source.bucket",flexGrow:1},{name:"Destination Bucket",prop:"dest.bucket",flexGrow:1}],this.symFlowTableActions=[{permission:"create",icon:q.P.add,name:this.actionLabels.CREATE,click:()=>this.openModal(Me.MK.symmetrical),canBePrimary:ge=>!ge.hasSelection},{permission:"update",icon:q.P.edit,name:this.actionLabels.EDIT,click:()=>this.openModal(Me.MK.symmetrical,!0)},{permission:"delete",icon:q.P.destroy,disable:()=>!this.symFlowSelection.hasSelection,name:this.actionLabels.DELETE,click:()=>this.deleteFlow(Me.MK.symmetrical),canBePrimary:ge=>ge.hasMultiSelection}],this.dirFlowTableActions=[{permission:"create",icon:q.P.add,name:this.actionLabels.CREATE,click:()=>this.openModal(Me.MK.directional),canBePrimary:ge=>!ge.hasSelection},{permission:"update",icon:q.P.edit,name:this.actionLabels.EDIT,click:()=>this.openModal(Me.MK.directional,!0),disable:()=>!0},{permission:"delete",icon:q.P.destroy,disable:()=>!0,name:this.actionLabels.DELETE,click:()=>this.deleteFlow(Me.MK.directional),canBePrimary:ge=>ge.hasMultiSelection}],this.pipeTableActions=[{permission:"create",icon:q.P.add,name:this.actionLabels.CREATE,click:()=>this.openPipeModal(),canBePrimary:ge=>!ge.hasSelection},{permission:"update",icon:q.P.edit,name:this.actionLabels.EDIT,click:()=>this.openPipeModal(!0)},{permission:"delete",icon:q.P.destroy,disable:()=>!this.pipeSelection.hasSelection,name:this.actionLabels.DELETE,click:()=>this.deletePipe(),canBePrimary:ge=>ge.hasMultiSelection}]}ngOnChanges(t){t.expandedRow.currentValue&&t.expandedRow.currentValue.groupName&&(this.symmetricalFlowData=[],this.directionalFlowData=[],this.loadData())}loadData(t){this.expandedRow&&this.rgwMultisiteService.getSyncPolicyGroup(this.expandedRow.groupName,this.expandedRow.bucket).subscribe(o=>{this.symmetricalFlowData=o.data_flow[Me.MK.symmetrical]||[],this.directionalFlowData=o.data_flow[Me.MK.directional]||[],this.pipeData=o.pipes||[]},()=>{t&&t.error()})}updateSelection(t,o){o===Me.MK.directional?this.dirFlowSelection=t:this.symFlowSelection=t}openModal(t,o=!1){var _=this;return(0,Yn.Z)(function*(){const E=o?"edit":"create",U={groupType:t,groupExpandedRow:_.expandedRow,flowSelectedRow:t===Me.MK.symmetrical?_.symFlowSelection.first():_.dirFlowSelection.first(),action:E};_.modalRef=_.modalService.show(vl,U,{size:"lg"});try{"success"===(yield _.modalRef.result)&&_.loadData()}catch{}})()}deleteFlow(t){let o=this.symFlowSelection;t===Me.MK.directional&&(o=this.dirFlowSelection);const _=o.selected.map(E=>E.id);this.modalService.show(st.M,{itemDescription:o.hasSingleSelection?"Flow":"Flows",itemNames:_,bodyTemplate:this.deleteTpl,submitActionObservable:()=>new dt.y(E=>{this.taskWrapper.wrapTaskAroundCall({task:new hn.R("rgw/multisite/sync-flow/delete",{flow_ids:_}),call:(0,y.D)(o.selected.map(U=>this.rgwMultisiteService.removeSyncFlow(U.id,t,this.expandedRow.groupName,this.expandedRow.bucket)))}).subscribe({error:U=>{E.error(U),this.table.refreshBtn()},complete:()=>{E.complete(),this.table.refreshBtn()}})})})}openPipeModal(t=!1){var o=this;return(0,Yn.Z)(function*(){const _=t?"edit":"create",E={groupExpandedRow:o.expandedRow,pipeSelectedRow:o.pipeSelection.first(),action:_};o.modalRef=o.modalService.show(Bl,E,{size:"lg"});try{"success"===(yield o.modalRef.result)&&o.loadData()}catch{}})()}deletePipe(){const t=this.pipeSelection.selected.map(o=>o.id);this.modalService.show(st.M,{itemDescription:this.pipeSelection.hasSingleSelection?"Pipe":"Pipes",itemNames:t,bodyTemplate:this.deleteTpl,submitActionObservable:()=>new dt.y(o=>{this.taskWrapper.wrapTaskAroundCall({task:new hn.R("rgw/multisite/sync-pipe/delete",{pipe_ids:t}),call:(0,y.D)(this.pipeSelection.selected.map(_=>this.rgwMultisiteService.removeSyncPipe(_.id,this.expandedRow.groupName,this.expandedRow.bucket)))}).subscribe({error:_=>{o.error(_),this.table.refreshBtn()},complete:()=>{o.complete(),this.table.refreshBtn()}})})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.p4),e.Y36(Qe.Z),e.Y36(et.o),e.Y36(Xn.P))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-sync-policy-details"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Ve.a,5),e.Gf(zl,7)),2&t){let _;e.iGM(_=e.CRH())&&(o.table=_.first),e.iGM(_=e.CRH())&&(o.deleteTpl=_.first)}},inputs:{expandedRow:"expandedRow",permission:"permission"},features:[e.TTD],decls:3,vars:1,consts:function(){let i,t,o,_,E,U;return i="Flow",t="Pipe",o="Directional Flow 'edit' & 'delete' actions disabled",_=" Due to some internal dependencies these actions are disabled, it will get enabled once the issue gets resolved. ",E=" Pipe " + "\ufffd#2\ufffd" + " A pipe defines the actual buckets that can use these data flows, and the properties that are associated with it. " + "\ufffd/#2\ufffd" + "",U=" Are you sure you want to delete these Flow? ",[[4,"ngIf"],["deleteTpl",""],["ngbNav","","cdStatefulTab","sync-policy-details",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem","flow"],["ngbNavLink",""],i,["ngbNavContent",""],["ngbNavItem","pipe"],t,[3,"ngbNavOutlet"],["columnMode","flex","selectionType","multiClick",3,"autoReload","data","columns","searchableObjects","hasDetails","serverSide","count","maxLimit","toolHeader","updateSelection","fetchData"],["table",""],[1,"table-actions","btn-toolbar"],[1,"btn-group",3,"permission","selection","tableActions"],["type","info","title",o,4,"ngIf"],["type","info","title",o],_,E,["selectionType","multiClick",3,"data","columns","searchableObjects","hasDetails","serverSide","toolHeader","updateSelection","fetchData"],["type","danger"],U]},template:function(t,o){1&t&&(e.YNc(0,Yl,12,1,"ng-container",0),e.YNc(1,Kl,2,0,"ng-template",null,1,e.W1O)),2&t&&e.Q6J("ngIf",o.expandedRow)},dependencies:[g.O5,tt.G,fn.t,Ve.a,ft.K,Tn.m,b.uN,b.Pz,b.nv,b.Vx,b.tO,b.Dy],styles:["datatable-scroller{width:100%!important}"]}),n})(),Kn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-tabs"]],decls:7,vars:0,consts:function(){let i,t;return i="Configuration",t="Sync Policy",[[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/rgw/multisite/configuration","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link"],i,["routerLink","//rgw/multisite/sync-policy","routerLinkActive","active","ariaCurrentWhenActive","page",1,"nav-link"],t]},template:function(t,o){1&t&&(e.TgZ(0,"ul",0)(1,"li",1)(2,"a",2),e.SDv(3,3),e.qZA()(),e.TgZ(4,"li",1)(5,"a",4),e.SDv(6,5),e.qZA()()())},dependencies:[N.rH,N.Od]}),n})();const Jl=["deleteTpl"];function Vl(n,i){1&n&&(e.TgZ(0,"cd-alert-panel",8),e.SDv(1,9),e.qZA())}const Cn="rgw/multisite/sync-policy";let Qn=(()=>{class n extends cn.o{constructor(t,o,_,E,U,H,K,Q){super(),this.rgwMultisiteService=t,this.titleCasePipe=o,this.actionLabels=_,this.authStorageService=E,this.modalService=U,this.taskWrapper=H,this.router=K,this.rgwDaemonService=Q,this.columns=[],this.syncPolicyData=[],this.selection=new ot.r}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{prop:"uniqueId",isHidden:!0},{name:"Group Name",prop:"groupName",flexGrow:1},{name:"Status",prop:"status",flexGrow:1,cellTransformation:mn.e.tooltip,customTemplateConfig:{map:{Enabled:{class:"badge-success",tooltip:"sync is allowed and enabled"},Allowed:{class:"badge-info",tooltip:"sync is allowed"},Forbidden:{class:"badge-warning",tooltip:"sync (as defined by this group) is not allowed and can override other groups"}}},pipe:this.titleCasePipe},{name:"Zonegroup",prop:"zonegroup",flexGrow:1},{name:"Bucket",prop:"bucket",flexGrow:1}],this.rgwDaemonService.list().subscribe();const t=()=>this.selection.first().groupName&&this.selection.first().bucket?`${T.MQ.EDIT}/${this.selection.first().groupName}/${this.selection.first().bucket}`:`${T.MQ.EDIT}/${this.selection.first().groupName}`;this.tableActions=[{permission:"create",icon:q.P.add,click:()=>this.router.navigate([Cn,{outlets:{modal:T.MQ.CREATE}}]),name:this.actionLabels.CREATE,canBePrimary:U=>!U.hasSelection},{permission:"update",icon:q.P.edit,click:()=>this.router.navigate([Cn,{outlets:{modal:t()}}]),name:this.actionLabels.EDIT},{permission:"delete",icon:q.P.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:U=>U.hasMultiSelection}]}transformSyncPolicyData(t){t&&t.length>0&&(t.forEach(o=>{this.syncPolicyData.push({uniqueId:o.id+(o.bucketName?o.bucketName:""),groupName:o.id,status:o.status,bucket:o.bucketName,zonegroup:""})}),this.syncPolicyData=[...this.syncPolicyData])}updateSelection(t){this.selection=t}getPolicyList(t){this.rgwMultisiteService.getSyncPolicy("","",!0).subscribe(o=>{this.syncPolicyData=[],this.transformSyncPolicyData(o)},()=>{t&&t.error()})}deleteAction(){const t=this.selection.selected.map(o=>o.groupName);this.modalService.show(st.M,{itemDescription:this.selection.hasSingleSelection?"Policy Group":"Policy Groups",itemNames:t,bodyTemplate:this.deleteTpl,submitActionObservable:()=>new dt.y(o=>{this.taskWrapper.wrapTaskAroundCall({task:new hn.R("rgw/multisite/sync-policy/delete",{group_names:t}),call:(0,y.D)(this.selection.selected.map(_=>this.rgwMultisiteService.removeSyncPolicyGroup(_.groupName,_.bucket)))}).subscribe({error:_=>{o.error(_),this.table.refreshBtn()},complete:()=>{o.complete(),this.table.refreshBtn()}})})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(et.o),e.Y36(g.rS),e.Y36(T.p4),e.Y36(rt.j),e.Y36(Qe.Z),e.Y36(Xn.P),e.Y36(N.F0),e.Y36(z.b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-sync-policy"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Ve.a,7),e.Gf(Jl,7)),2&t){let _;e.iGM(_=e.CRH())&&(o.table=_.first),e.iGM(_=e.CRH())&&(o.deleteTpl=_.first)}},features:[e._Bn([{provide:it.F,useValue:new it.F(Cn)}]),e.qOj],decls:12,vars:12,consts:function(){let i,t;return i=" Multisite Sync Policy " + "\ufffd#3\ufffd" + " Multisite bucket-granularity sync policy provides fine grained control of data movement between buckets in different zones. Leveraging the bucket-granularity sync policy is possible for buckets to diverge, and a bucket can pull data from other buckets (ones that don\u2019t share its name or its ID) in different zone. " + "\ufffd/#3\ufffd" + "",t=" Are you sure you want to delete these policy groups? ",[i,["identifier","uniqueId","selectionType","multiClick",3,"autoReload","data","columns","forceIdentifier","searchableObjects","hasDetails","toolHeader","setExpandedRow","fetchData","updateSelection"],["table",""],[1,"table-actions","btn-toolbar"],[1,"btn-group",3,"permission","selection","tableActions"],["cdTableDetail","",3,"expandedRow","permission"],["deleteTpl",""],["name","modal",3,"deactivate"],["type","danger"],t]},template:function(t,o){1&t&&(e._UZ(0,"cd-rgw-multisite-tabs"),e.TgZ(1,"legend"),e.tHW(2,0),e._UZ(3,"cd-help-text"),e.N_p(),e.qZA(),e.TgZ(4,"cd-table",1,2),e.NdJ("setExpandedRow",function(E){return o.setExpandedRow(E)})("fetchData",function(E){return o.getPolicyList(E)})("updateSelection",function(E){return o.updateSelection(E)}),e.TgZ(6,"div",3),e._UZ(7,"cd-table-actions",4),e.qZA(),e._UZ(8,"cd-rgw-multisite-sync-policy-details",5),e.qZA(),e.YNc(9,Vl,2,0,"ng-template",null,6,e.W1O),e.TgZ(11,"router-outlet",7),e.NdJ("deactivate",function(){return o.getPolicyList()}),e.qZA()),2&t&&(e.xp6(4),e.Q6J("autoReload",!1)("data",o.syncPolicyData)("columns",o.columns)("forceIdentifier",!0)("searchableObjects",!0)("hasDetails",!0)("toolHeader",!0),e.xp6(3),e.Q6J("permission",o.permission)("selection",o.selection)("tableActions",o.tableActions),e.xp6(1),e.Q6J("expandedRow",o.expandedRow)("permission",o.permission))},dependencies:[tt.G,fn.t,Ve.a,ft.K,N.lC,Ql,Kn]}),n})();var jl=p(36848),ec=p(7273);const tc=["tree"];function nc(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"cd-alert-panel",15),e.tHW(1,16),e.TgZ(2,"button",17),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.enableRgwModule())}),e.qZA(),e.N_p(),e.qZA()}}function oc(n,i){1&n&&(e.TgZ(0,"cd-alert-panel",18),e.tHW(1,19),e._UZ(2,"a",20),e.N_p(),e.qZA())}const ic=function(n,i,t){return[n,i,t]};function _c(n,i){if(1&n&&e._UZ(0,"i",21),2&n){const t=e.oxw();e.Q6J("ngClass",e.kEZ(1,ic,t.icons.large,t.icons.spinner,t.icons.spin))}}function rc(n,i){if(1&n&&(e.TgZ(0,"span"),e._UZ(1,"i",28),e.qZA()),2&n){const t=e.oxw(2).$implicit,o=e.oxw();e.xp6(1),e.Q6J("title",t.data.warning_message)("ngClass",o.icons.danger)}}function sc(n,i){if(1&n&&(e.TgZ(0,"span",26),e.YNc(1,rc,2,2,"span",27),e._UZ(2,"i",21),e._uU(3),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.data.show_warning),e.xp6(1),e.Q6J("ngClass",t.data.icon),e.xp6(1),e.hij(" ",t.data.name," ")}}function ac(n,i){1&n&&(e.TgZ(0,"span",29),e._uU(1," default "),e.qZA())}function lc(n,i){1&n&&(e.TgZ(0,"span",30),e._uU(1," master "),e.qZA())}function cc(n,i){1&n&&(e.TgZ(0,"span",30),e._uU(1," secondary-zone "),e.qZA())}const Jn=function(n){return[n]};function uc(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"button",33),e.NdJ("click",function(){e.CHM(t);const _=e.oxw().$implicit,E=e.oxw();return e.KtG(E.openModal(_,!0))}),e._UZ(3,"i",21),e.qZA()(),e.TgZ(4,"div",32)(5,"button",34),e.NdJ("click",function(){e.CHM(t);const _=e.oxw().$implicit,E=e.oxw();return e.KtG(E.delete(_))}),e._UZ(6,"i",21),e.qZA()()()}if(2&n){const t=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("title",o.editTitle),e.xp6(1),e.Q6J("disabled",o.getDisable()||t.data.secondary_zone),e.xp6(1),e.Q6J("ngClass",e.VKq(6,Jn,o.icons.edit)),e.xp6(1),e.Q6J("title",o.deleteTitle),e.xp6(1),e.Q6J("disabled",o.isDeleteDisabled(t)||t.data.secondary_zone),e.xp6(1),e.Q6J("ngClass",e.VKq(8,Jn,o.icons.destroy))}}function dc(n,i){if(1&n&&(e.YNc(0,sc,4,3,"span",22),e.YNc(1,ac,2,0,"span",23),e.YNc(2,lc,2,0,"span",24),e.YNc(3,cc,2,0,"span",24),e.YNc(4,uc,7,10,"div",25)),2&n){const t=i.$implicit;e.Q6J("ngIf",t.data.name),e.xp6(1),e.Q6J("ngIf",t.data.is_default),e.xp6(1),e.Q6J("ngIf",t.data.is_master),e.xp6(1),e.Q6J("ngIf",t.data.secondary_zone),e.xp6(1),e.Q6J("ngIf",t.isFocused)}}function fc(n,i){if(1&n&&(e.TgZ(0,"div",35)(1,"legend"),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._UZ(4,"cd-table-key-value",36),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.metadataTitle),e.xp6(2),e.Q6J("data",t.metadata)}}class ct{constructor(i,t,o,_,E,U,H,K,Q,te,Te,pe){this.modalService=i,this.timerService=t,this.authStorageService=o,this.actionLabels=_,this.timerServiceVariable=E,this.router=U,this.rgwRealmService=H,this.rgwZonegroupService=K,this.rgwZoneService=Q,this.rgwDaemonService=te,this.mgrModuleService=Te,this.notificationService=pe,this.sub=new xn.w,this.messages={noDefaultRealm:"Please create a default realm first to enable this feature",noMasterZone:"Please create a master zone for each zone group to enable this feature",noRealmExists:"No realm exists",disableExport:"Please create master zone group and master zone for each of the realms"},this.icons=q.P,this.selection=new ot.r,this.loadingIndicator=!0,this.nodes=[],this.treeOptions={useVirtualScroll:!0,nodeHeight:22,levelPadding:20,actionMapping:{mouse:{click:this.onNodeSelected.bind(this)}}},this.realms=[],this.zonegroups=[],this.zones=[],this.realmIds=[],this.zoneIds=[],this.defaultRealmId="",this.defaultZonegroupId="",this.defaultZoneId="",this.multisiteInfo=[],this.defaultsInfo=[],this.showMigrateAction=!1,this.editTitle="Edit",this.deleteTitle="Delete",this.disableExport=!0,this.restartGatewayMessage=!1,this.rgwModuleData=[],this.permission=this.authStorageService.getPermissions().rgw}openModal(i,t=!1){const o=t?i.data.type:i;this.bsModalRef=this.modalService.show("realm"===o?va:"zonegroup"===o?Sl:nl,{resource:o,action:t?"edit":"create",info:i,defaultsInfo:this.defaultsInfo,multisiteInfo:this.multisiteInfo},{size:"lg"})}openMigrateModal(){this.bsModalRef=this.modalService.show(ks,{multisiteInfo:this.multisiteInfo},{size:"lg"})}openImportModal(){this.bsModalRef=this.modalService.show(Aa,{multisiteInfo:this.multisiteInfo},{size:"lg"})}openExportModal(){this.bsModalRef=this.modalService.show(la,{defaultsInfo:this.defaultsInfo,multisiteInfo:this.multisiteInfo},{size:"lg"})}getDisableExport(){return this.realms.forEach(i=>{this.zonegroups.forEach(t=>{i.id===t.realm_id&&t.is_master&&""!==t.master_zone&&(this.disableExport=!1)})}),!this.rgwModuleStatus||(this.realms.length<1?this.messages.noRealmExists:!!this.disableExport&&this.messages.disableExport)}getDisableImport(){return!this.rgwModuleStatus}ngOnInit(){const _={permission:"read",icon:q.P.exchange,name:this.actionLabels.MIGRATE,click:()=>this.openMigrateModal()},E={permission:"read",icon:q.P.download,name:this.actionLabels.IMPORT,click:()=>this.openImportModal(),disable:()=>this.getDisableImport()},U={permission:"read",icon:q.P.upload,name:this.actionLabels.EXPORT,click:()=>this.openExportModal(),disable:()=>this.getDisableExport()};this.createTableActions=[{permission:"create",icon:q.P.add,name:this.actionLabels.CREATE+" Realm",click:()=>this.openModal("realm")},{permission:"create",icon:q.P.add,name:this.actionLabels.CREATE+" Zone Group",click:()=>this.openModal("zonegroup"),disable:()=>this.getDisable()},{permission:"create",icon:q.P.add,name:this.actionLabels.CREATE+" Zone",click:()=>this.openModal("zone")}],this.migrateTableAction=[_],this.importAction=[E],this.exportAction=[U];const H=[this.rgwRealmService.getAllRealmsInfo(),this.rgwZonegroupService.getAllZonegroupsInfo(),this.rgwZoneService.getAllZonesInfo()];this.sub=this.timerService.get(()=>(0,y.D)(H),2*this.timerServiceVariable.TIMER_SERVICE_PERIOD).subscribe(K=>{this.multisiteInfo=K,this.loadingIndicator=!1,this.nodes=this.abstractTreeData(K)},K=>{}),this.mgrModuleService.list().subscribe(K=>{this.rgwModuleData=K.filter(Q=>"rgw"===Q.name),this.rgwModuleData.length>0&&(this.rgwModuleStatus=this.rgwModuleData[0].enabled)})}ngOnDestroy(){this.sub.unsubscribe()}abstractTreeData(i){let t=[],o={},_={},E=[],U={},H=[];if(this.realms=i[0].realms,this.zonegroups=i[1].zonegroups,this.zones=i[2].zones,this.defaultRealmId=i[0].default_realm,this.defaultZonegroupId=i[1].default_zonegroup,this.defaultZoneId=i[2].default_zone,this.defaultsInfo=this.getDefaultsEntities(this.defaultRealmId,this.defaultZonegroupId,this.defaultZoneId),this.realms.length>0)for(const K of this.realms){const Q=this.rgwRealmService.getRealmTree(K,this.defaultRealmId);o=Q.nodes,this.realmIds=this.realmIds.concat(Q.realmIds);for(const te of this.zonegroups)if(te.realm_id===K.id){_=this.rgwZonegroupService.getZonegroupTree(te,this.defaultZonegroupId,K);for(const Te of te.zones){const pe=this.rgwZoneService.getZoneTree(Te,this.defaultZoneId,this.zones,te,K);U=pe.nodes,this.zoneIds=this.zoneIds.concat(pe.zoneIds),H.push(U),U={}}_.children=H,H=[],E.push(_),_={}}o.children=E,t.push(o),_={},U={},o={},E=[],H=[]}if(this.zonegroups.length>0)for(const K of this.zonegroups)if(!this.realmIds.includes(K.realm_id)){o=this.rgwZonegroupService.getZonegroupTree(K,this.defaultZonegroupId);for(const Q of K.zones){const te=this.rgwZoneService.getZoneTree(Q,this.defaultZoneId,this.zones,K);_=te.nodes,this.zoneIds=this.zoneIds.concat(te.zoneIds),E.push(_),_={}}o.children=E,t.push(o),_={},o={},E=[]}if(this.zones.length>0)for(const K of this.zones)this.zoneIds.length>0&&!this.zoneIds.includes(K.id)&&(o=this.rgwZoneService.getZoneTree(K,this.defaultZoneId,this.zones).nodes,t.push(o),o={});return this.realms.length<1&&this.zonegroups.length<1&&this.zones.length<1?[{name:"No nodes!"}]:(this.realmIds=[],this.zoneIds=[],this.getDisableMigrate(),this.rgwDaemonService.list().subscribe(K=>{const Q=K.map(te=>te.realm_name);""!=this.defaultRealmId&&""!=this.defaultZonegroupId&&""!=this.defaultZoneId&&Q.includes("")&&(this.restartGatewayMessage=!0)}),t)}getDefaultsEntities(i,t,o){const _=this.realms.find(te=>te.id===i),E=this.zonegroups.find(te=>te.id===t),U=this.zones.find(te=>te.id===o);return{defaultRealmName:void 0!==_?_.name:null,defaultZonegroupName:void 0!==E?E.name:null,defaultZoneName:void 0!==U?U.name:null}}onNodeSelected(i,t){Mn.iM.ACTIVATE(i,t,!0),this.metadataTitle=t.data.name,this.metadata=t.data.info,t.data.show=!0}onUpdateData(){this.tree.treeModel.expandAll()}getDisable(){let i=!0;return""===this.defaultRealmId?this.messages.noDefaultRealm:(this.zonegroups.forEach(t=>{R().isEmpty(t.master_zone)&&(i=!1)}),i?(this.editTitle="Edit",!1):(this.editTitle="Please create a master zone for each existing zonegroup to enable this feature",this.messages.noMasterZone))}getDisableMigrate(){return this.showMigrateAction=0===this.realms.length&&1===this.zonegroups.length&&"default"===this.zonegroups[0].name&&1===this.zones.length&&"default"===this.zones[0].name,this.showMigrateAction}isDeleteDisabled(i){let t=!1,o=0;if("realm"===i.data.type&&i.data.is_default&&this.realms.length<2&&(t=!0),"zonegroup"===i.data.type)if(this.zonegroups.length<2)this.deleteTitle="You can not delete the only zonegroup available",t=!0;else if(i.data.is_default)this.deleteTitle="You can not delete the default zonegroup",t=!0;else if(i.data.is_master){for(let _ of this.zonegroups)if(!0===_.is_master&&(o++,o>1))break;o<2&&(this.deleteTitle="You can not delete the only master zonegroup available",t=!0)}return"zone"===i.data.type&&(this.zones.length<2?(this.deleteTitle="You can not delete the only zone available",t=!0):i.data.is_default?(this.deleteTitle="You can not delete the default zone",t=!0):i.data.is_master&&i.data.zone_zonegroup.zones.length<2&&(this.deleteTitle="You can not delete the master zone as there are no more zones in this zonegroup",t=!0)),t||(this.deleteTitle="Delete"),t}delete(i){"realm"===i.data.type?this.modalRef=this.modalService.show(st.M,{itemDescription:"" + i.data.type + " " + i.data.name + "",itemNames:[`${i.data.name}`],submitAction:()=>{this.rgwRealmService.delete(i.data.name).subscribe(()=>{this.modalRef.close(),this.notificationService.show(J.k.success,"Realm: '" + i.data.name + "' deleted successfully")},()=>{this.modalRef.componentInstance.stopLoadingSpinner()})}}):"zonegroup"===i.data.type?this.modalRef=this.modalService.show(ta,{zonegroup:i.data}):"zone"===i.data.type&&(this.modalRef=this.modalService.show(Hs,{zone:i.data}))}enableRgwModule(){let i;const t=()=>{(0,Zn.H)(2e3).subscribe(()=>{this.mgrModuleService.list().subscribe(()=>{this.notificationService.suspendToasties(!1),this.blockUI.stop(),this.notificationService.show(J.k.success,"Enabled RGW Module"),this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate(["/rgw/multisite"])})},()=>{t()})})};this.rgwModuleStatus||(i=this.mgrModuleService.enable("rgw")),i.subscribe(()=>{},()=>{this.notificationService.suspendToasties(!0),this.blockUI.start("Reconnecting, please wait ..."),t()})}}ct.\u0275fac=function(i){return new(i||ct)(e.Y36(Qe.Z),e.Y36(jl.f),e.Y36(rt.j),e.Y36(T.p4),e.Y36(T.eu),e.Y36(N.F0),e.Y36(at.y),e.Y36(_t.K),e.Y36(lt.g),e.Y36(z.b),e.Y36(ec.N),e.Y36(fe.g))},ct.\u0275cmp=e.Xpm({type:ct,selectors:[["cd-rgw-multisite-details"]],viewQuery:function(i,t){if(1&i&&(e.Gf(tc,5),e.Gf(Qn,5)),2&i){let o;e.iGM(o=e.CRH())&&(t.tree=o.first),e.iGM(o=e.CRH())&&(t.syncPolicyComp=o.first)}},decls:19,vars:21,consts:function(){let n,i,t;return n="Topology Viewer",i="In order to access the import/export feature, the rgw module must be enabled " + "\ufffd#2\ufffd" + "Enable" + "\ufffd/#2\ufffd" + "",t="Please restart all Ceph Object Gateway instances in all zones to ensure consistent multisite configuration updates. " + "\ufffd#2\ufffd" + " Cluster->Services" + "\ufffd/#2\ufffd" + "",[["type","info","spacingClass","mb-3","class","d-flex align-items-center",4,"ngIf"],["type","warning","spacingClass","mb-3",4,"ngIf"],[1,"btn-group","mb-4","me-2",3,"permission","selection","tableActions"],[1,"btn-group","mb-4","me-2","secondary",3,"permission","btnColor","selection","tableActions"],[1,"btn-group","mb-4","me-2",3,"permission","btnColor","selection","tableActions"],[1,"card"],[1,"card-header"],n,[1,"row"],[1,"col-sm-6","col-lg-6","tree-container"],[3,"ngClass",4,"ngIf"],[3,"nodes","options","updateData"],["tree",""],["treeNodeTemplate",""],["class","col-sm-6 col-lg-6 metadata",4,"ngIf"],["type","info","spacingClass","mb-3",1,"d-flex","align-items-center"],i,["type","button",1,"btn","btn-light","mx-2",3,"click"],["type","warning","spacingClass","mb-3"],t,["routerLink","/services",1,"text-decoration-underline"],[3,"ngClass"],["class","me-3",4,"ngIf"],["class","badge badge-success me-2",4,"ngIf"],["class","badge badge-warning me-2",4,"ngIf"],["class","btn-group align-inline-btns","role","group",4,"ngIf"],[1,"me-3"],[4,"ngIf"],[1,"text-danger",3,"title","ngClass"],[1,"badge","badge-success","me-2"],[1,"badge","badge-warning","me-2"],["role","group",1,"btn-group","align-inline-btns"],[3,"title"],["type","button",1,"btn","btn-light","dropdown-toggle-split","ms-1",3,"disabled","click"],["type","button",1,"btn","btn-light","ms-1",3,"disabled","click"],[1,"col-sm-6","col-lg-6","metadata"],["cdTableDetail","",3,"data"]]},template:function(i,t){1&i&&(e._UZ(0,"cd-rgw-multisite-tabs"),e.TgZ(1,"div"),e.YNc(2,nc,3,0,"cd-alert-panel",0),e.YNc(3,oc,3,0,"cd-alert-panel",1),e._UZ(4,"cd-table-actions",2)(5,"cd-table-actions",3)(6,"cd-table-actions",4)(7,"cd-table-actions",4),e.qZA(),e.TgZ(8,"div",5)(9,"div",6),e.SDv(10,7),e.qZA(),e.TgZ(11,"div",8)(12,"div",9),e.YNc(13,_c,1,5,"i",10),e.TgZ(14,"tree-root",11,12),e.NdJ("updateData",function(){return t.onUpdateData()}),e.YNc(16,dc,5,5,"ng-template",null,13,e.W1O),e.qZA()(),e.YNc(18,fc,5,2,"div",14),e.qZA()()),2&i&&(e.xp6(2),e.Q6J("ngIf",!t.rgwModuleStatus),e.xp6(1),e.Q6J("ngIf",t.restartGatewayMessage),e.xp6(1),e.Q6J("permission",t.permission)("selection",t.selection)("tableActions",t.createTableActions),e.xp6(1),e.Q6J("permission",t.permission)("btnColor","light")("selection",t.selection)("tableActions",t.migrateTableAction),e.xp6(1),e.Q6J("permission",t.permission)("btnColor","light")("selection",t.selection)("tableActions",t.importAction),e.xp6(1),e.Q6J("permission",t.permission)("btnColor","light")("selection",t.selection)("tableActions",t.exportAction),e.xp6(6),e.Q6J("ngIf",t.loadingIndicator),e.xp6(1),e.Q6J("nodes",t.nodes)("options",t.treeOptions),e.xp6(4),e.Q6J("ngIf",t.metadata))},dependencies:[g.mk,g.O5,tt.G,yn.b,ft.K,Ge.o,N.rH,Mn.qr,Kn],styles:[".tree-container[_ngcontent-%COMP%]{height:calc(100vh - 200px)}.align-inline-btns[_ngcontent-%COMP%]{margin-left:5em}.btn[_ngcontent-%COMP%]:disabled{pointer-events:none}"]}),(0,F.gn)([(0,hl.bH)(),(0,F.w6)("design:type",Object)],ct.prototype,"blockUI",void 0);var pc=p(40267),Vn=p(83357),gc=p(7357),Tc=p(11656),Ec=p(4167),Rc=p(68307),mc=p(47349),Mc=p(79241),Sc=p(98677),hc=p(30490),Cc=p(9219),Fc=p(17401),Oc=p(9024),Nc=p(54740);const Et=function(n,i){return[n,i]};let Pc=(()=>{class n{constructor(){this.icons=q.P}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-sync-primary-zone"]],inputs:{realm:"realm",zonegroup:"zonegroup",zone:"zone"},decls:17,vars:23,consts:[[1,"pb-5"],[1,"pt-2",3,"ngClass"],[1,"badge","badge-info","mt-2"],[1,"mt-2",3,"ngClass"]],template:function(t,o){1&t&&(e.TgZ(0,"ul",0)(1,"li"),e._UZ(2,"i",1),e.qZA(),e.TgZ(3,"li",2),e._uU(4),e.qZA(),e.TgZ(5,"li"),e._UZ(6,"i",3),e.qZA(),e.TgZ(7,"li"),e._UZ(8,"i",3),e.qZA(),e.TgZ(9,"p",2),e._uU(10),e.qZA(),e.TgZ(11,"li"),e._UZ(12,"i",3),e.qZA(),e.TgZ(13,"li"),e._UZ(14,"i",3),e.qZA(),e.TgZ(15,"li",2),e._uU(16),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngClass",e.WLB(8,Et,o.icons.large2x,o.icons.reweight)),e.xp6(2),e.Oqu(o.realm),e.xp6(2),e.Q6J("ngClass",e.WLB(11,Et,o.icons.large2x,o.icons.down)),e.xp6(2),e.Q6J("ngClass",e.WLB(14,Et,o.icons.large2x,o.icons.cubes)),e.xp6(2),e.Oqu(o.zonegroup),e.xp6(2),e.Q6J("ngClass",e.WLB(17,Et,o.icons.large2x,o.icons.down)),e.xp6(2),e.Q6J("ngClass",e.WLB(20,Et,o.icons.large2x,o.icons.deploy)),e.xp6(2),e.Oqu(o.zone))},dependencies:[g.mk],styles:["ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}.align-primary-zone[_ngcontent-%COMP%]{padding-left:4em}"]}),n})();var jn=p(90068);function Ac(n,i){1&n&&(e.TgZ(0,"span")(1,"ul",1)(2,"li")(3,"b"),e._uU(4,"Status:"),e.qZA()(),e.TgZ(5,"li"),e._uU(6,"No Sync"),e.qZA()()())}function bc(n,i){if(1&n&&(e.TgZ(0,"span")(1,"b"),e._uU(2),e.ALo(3,"titlecase"),e.qZA(),e._uU(4),e.ALo(5,"titlecase"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.split(":")[0])),e.xp6(2),e.hij(":",e.lcZ(5,4,t.split(":")[1])," ")}}function Ic(n,i){if(1&n&&(e.TgZ(0,"span")(1,"b"),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,1,t))}}function Gc(n,i){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,bc,6,6,"span",0),e.YNc(2,Ic,4,3,"span",0),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null==t?null:t.includes(":")),e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.includes(":")))}}function yc(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t)," ")}}function Lc(n,i){if(1&n&&(e.TgZ(0,"li"),e.YNc(1,Gc,3,2,"span",0),e.YNc(2,yc,3,3,"span",0),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.includes(o.metadataSyncInfo.syncstatus)||null!=t&&t.includes("failed")||null!=t&&t.includes("error"))),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.includes("failed"))||(null==t?null:t.includes("error")))}}function Dc(n,i){if(1&n&&(e.TgZ(0,"ul",8)(1,"li")(2,"h5")(3,"b"),e._uU(4,"Metadata Sync Status:"),e.qZA()()(),e.YNc(5,Lc,3,2,"li",9),e.qZA()),2&n){const t=e.oxw(2);e.xp6(5),e.Q6J("ngForOf",t.metadataSyncInfo.fullSyncStatus)}}function vc(n,i){1&n&&(e.TgZ(0,"li",10),e._uU(1,"Up to Date"),e.qZA())}function wc(n,i){if(1&n&&(e.TgZ(0,"a",12),e.SDv(1,13),e.ALo(2,"titlecase"),e.qZA()),2&n){e.oxw(2);const t=e.MAs(2),o=e.oxw();e.Q6J("ngbPopover",t),e.xp6(2),e.pQV(e.lcZ(2,2,o.metadataSyncInfo.syncstatus)),e.QtT(1)}}function Wc(n,i){if(1&n&&(e.TgZ(0,"a",12),e.SDv(1,14),e.qZA()),2&n){e.oxw(2);const t=e.MAs(2);e.Q6J("ngbPopover",t)}}function $c(n,i){if(1&n&&(e.YNc(0,wc,3,4,"a",11),e.YNc(1,Wc,2,1,"a",11)),2&n){const t=e.oxw(2);e.Q6J("ngIf","Not Syncing From Zone"!==t.metadataSyncInfo.syncstatus),e.xp6(1),e.Q6J("ngIf","Not Syncing From Zone"===t.metadataSyncInfo.syncstatus)}}const Uc=function(n){return[n]};function xc(n,i){if(1&n&&(e.TgZ(0,"li"),e._UZ(1,"i",15),e.TgZ(2,"a",16),e.SDv(3,17),e.qZA()()),2&n){e.oxw();const t=e.MAs(2),o=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(2,Uc,o.icons.danger)),e.xp6(1),e.Q6J("ngbPopover",t)}}function Zc(n,i){if(1&n&&(e.TgZ(0,"li",18),e._uU(1),e.ALo(2,"relativeDate"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,t.metadataSyncInfo.timestamp))}}function kc(n,i){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,Dc,6,1,"ng-template",null,2,e.W1O),e.TgZ(3,"ul",1),e.YNc(4,vc,2,0,"ng-template",null,3,e.W1O),e.YNc(6,$c,2,2,"ng-template",null,4,e.W1O),e.TgZ(8,"li")(9,"b"),e._uU(10,"Status:"),e.qZA()(),e.YNc(11,xc,4,4,"li",5),e.TgZ(12,"li",6),e._uU(13," Last Synced: "),e.qZA(),e.YNc(14,Zc,3,3,"li",7),e.qZA()()),2&n){const t=e.MAs(5),o=e.MAs(7),_=e.oxw();e.xp6(11),e.Q6J("ngIf",(null==_.metadataSyncInfo.syncstatus?null:_.metadataSyncInfo.syncstatus.includes("failed"))||(null==_.metadataSyncInfo.syncstatus?null:_.metadataSyncInfo.syncstatus.includes("error")))("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",_.metadataSyncInfo.timestamp)("ngIfElse",t)}}let Bc=(()=>{class n{constructor(){this.icons=q.P,this.metadataSyncInfo={}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-sync-metadata-info"]],inputs:{metadataSyncInfo:"metadataSyncInfo"},decls:2,vars:2,consts:function(){let i,t,o;return i="" + "\ufffd0\ufffd" + "",t="Not Syncing",o="Error",[[4,"ngIf"],[1,"me-2"],["metadataSyncPopover",""],["upToDateTpl",""],["showMetadataStatus",""],[4,"ngIf","ngIfElse"],[1,"mt-4","fw-bold"],["class","badge badge-info",4,"ngIf","ngIfElse"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"badge","badge-success"],["class","lead text-primary","placement","top","popoverClass","rgw-overview-card-popover",3,"ngbPopover",4,"ngIf"],["placement","top","popoverClass","rgw-overview-card-popover",1,"lead","text-primary",3,"ngbPopover"],i,t,[1,"text-danger",3,"ngClass"],["placement","top","popoverClass","rgw-overview-card-popover",1,"lead","text-danger",3,"ngbPopover"],o,[1,"badge","badge-info"]]},template:function(t,o){1&t&&(e.YNc(0,Ac,7,0,"span",0),e.YNc(1,kc,15,4,"span",0)),2&t&&(e.Q6J("ngIf","no sync (zone is master)"===o.metadataSyncInfo),e.xp6(1),e.Q6J("ngIf","no sync (zone is master)"!==o.metadataSyncInfo))},dependencies:[g.mk,g.sg,g.O5,b.o8,g.rS,jn.h],styles:["ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}"]}),n})();function zc(n,i){if(1&n&&(e.TgZ(0,"span")(1,"b"),e._uU(2),e.ALo(3,"titlecase"),e.qZA(),e._uU(4),e.ALo(5,"titlecase"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.split(": ")[0])),e.xp6(2),e.hij(":",e.lcZ(5,4,t.split(": ")[1])," ")}}function qc(n,i){if(1&n&&(e.TgZ(0,"span")(1,"b"),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,1,t))}}function Hc(n,i){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,zc,6,6,"span",9),e.YNc(2,qc,4,3,"span",9),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null==t?null:t.includes(":")),e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.includes(":")))}}function Xc(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t)," ")}}function Yc(n,i){if(1&n&&(e.TgZ(0,"li"),e.YNc(1,Hc,3,2,"span",9),e.YNc(2,Xc,3,3,"span",9),e.qZA()),2&n){const t=i.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.includes(o.zone.name)||null!=t&&t.includes(o.zone.syncstatus)||null!=t&&t.includes("failed")||null!=t&&t.includes("error"))),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.includes("failed"))||(null==t?null:t.includes("error")))}}function Kc(n,i){if(1&n&&(e.TgZ(0,"ul",7)(1,"li")(2,"h5")(3,"b"),e._uU(4,"Sync Status:"),e.qZA()()(),e.YNc(5,Yc,3,2,"li",8),e.qZA()),2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.zone.fullSyncStatus)}}function Qc(n,i){1&n&&(e.TgZ(0,"li",10),e._uU(1,"Up to Date"),e.qZA())}function Jc(n,i){if(1&n&&(e.TgZ(0,"a",12),e.SDv(1,13),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=e.oxw(2),o=e.MAs(1);e.Q6J("ngbPopover",o),e.xp6(2),e.pQV(e.lcZ(2,2,t.zone.syncstatus)),e.QtT(1)}}function Vc(n,i){if(1&n&&(e.TgZ(0,"a",12),e.SDv(1,14),e.qZA()),2&n){e.oxw(2);const t=e.MAs(1);e.Q6J("ngbPopover",t)}}function jc(n,i){if(1&n&&(e.YNc(0,Jc,3,4,"a",11),e.YNc(1,Vc,2,1,"a",11)),2&n){const t=e.oxw();e.Q6J("ngIf","Not Syncing From Zone"!==t.zone.syncstatus),e.xp6(1),e.Q6J("ngIf","Not Syncing From Zone"===t.zone.syncstatus)}}const eu=function(n){return[n]};function tu(n,i){if(1&n&&(e.TgZ(0,"li"),e._UZ(1,"i",15),e.TgZ(2,"a",16),e.SDv(3,17),e.qZA()()),2&n){const t=e.oxw(),o=e.MAs(1);e.xp6(1),e.Q6J("ngClass",e.VKq(2,eu,t.icons.danger)),e.xp6(1),e.Q6J("ngbPopover",o)}}function nu(n,i){if(1&n&&(e.TgZ(0,"li",18),e._uU(1),e.ALo(2,"relativeDate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.zone.timestamp))}}let ou=(()=>{class n{constructor(){this.icons=q.P,this.zone={}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-sync-data-info"]],inputs:{zone:"zone"},decls:14,vars:4,consts:function(){let i,t,o;return i="" + "\ufffd0\ufffd" + "",t="Not Syncing",o="Error",[["syncPopover",""],[1,"me-2"],["upToDateTpl",""],["showStatus",""],[4,"ngIf","ngIfElse"],[1,"mt-4","fw-bold"],["class","badge badge-info",4,"ngIf","ngIfElse"],[1,"text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"badge","badge-success"],["class","lead text-primary","placement","top","popoverClass","rgw-overview-card-popover",3,"ngbPopover",4,"ngIf"],["placement","top","popoverClass","rgw-overview-card-popover",1,"lead","text-primary",3,"ngbPopover"],i,t,[1,"text-danger",3,"ngClass"],["placement","top","popoverClass","rgw-overview-card-popover",1,"lead","text-danger",3,"ngbPopover"],o,[1,"badge","badge-info"]]},template:function(t,o){if(1&t&&(e.YNc(0,Kc,6,1,"ng-template",null,0,e.W1O),e.TgZ(2,"ul",1),e.YNc(3,Qc,2,0,"ng-template",null,2,e.W1O),e.YNc(5,jc,2,2,"ng-template",null,3,e.W1O),e.TgZ(7,"li")(8,"b"),e._uU(9,"Status:"),e.qZA()(),e.YNc(10,tu,4,4,"li",4),e.TgZ(11,"li",5),e._uU(12," Last Synced: "),e.qZA(),e.YNc(13,nu,3,3,"li",6),e.qZA()),2&t){const _=e.MAs(4),E=e.MAs(6);e.xp6(10),e.Q6J("ngIf",(null==o.zone.syncstatus?null:o.zone.syncstatus.includes("failed"))||(null==o.zone.syncstatus?null:o.zone.syncstatus.includes("error")))("ngIfElse",E),e.xp6(3),e.Q6J("ngIf",o.zone.timestamp)("ngIfElse",_)}},dependencies:[g.mk,g.sg,g.O5,b.o8,g.rS,jn.h],styles:["ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}"]}),n})();function iu(n,i){if(1&n&&e._UZ(0,"cd-card-row",25),2&n){const t=e.oxw();e.Q6J("data",t.rgwDaemonCount)}}function _u(n,i){if(1&n&&e._UZ(0,"cd-card-row",26),2&n){const t=e.oxw();e.Q6J("data",t.rgwRealmCount)}}function ru(n,i){if(1&n&&e._UZ(0,"cd-card-row",27),2&n){const t=e.oxw();e.Q6J("data",t.rgwZonegroupCount)}}function su(n,i){if(1&n&&e._UZ(0,"cd-card-row",28),2&n){const t=e.oxw();e.Q6J("data",t.rgwZoneCount)}}function au(n,i){if(1&n&&e._UZ(0,"cd-card-row",29),2&n){const t=e.oxw();e.Q6J("data",t.rgwBucketCount)}}function lu(n,i){if(1&n&&e._UZ(0,"cd-card-row",30),2&n){const t=e.oxw();e.Q6J("data",t.UserCount)}}function cu(n,i){if(1&n&&e._UZ(0,"cd-card-row",31),2&n){const t=e.oxw();e.Q6J("data",t.objectCount)}}function uu(n,i){1&n&&(e.TgZ(0,"span",32)(1,"cd-alert-panel",33),e.tHW(2,34),e._UZ(3,"cd-doc",35),e.N_p(),e.qZA()())}const Fn=function(n,i,t){return[n,i,t]};function du(n,i){if(1&n&&(e.TgZ(0,"span",36),e._UZ(1,"i",37),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.kEZ(1,Fn,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function fu(n,i){if(1&n&&(e.TgZ(0,"span",36),e._UZ(1,"i",37),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.kEZ(1,Fn,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function pu(n,i){if(1&n&&(e.TgZ(0,"span",36),e._UZ(1,"cd-rgw-sync-primary-zone",43),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("realm",t.realm)("zonegroup",t.zonegroup)("zone",t.zone)}}function gu(n,i){if(1&n&&(e.TgZ(0,"span",36),e._UZ(1,"i",37),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.kEZ(1,Fn,t.icons.large3x,t.icons.spinner,t.icons.spin))}}function Tu(n,i){if(1&n&&(e.TgZ(0,"span",51),e._UZ(1,"cd-rgw-sync-metadata-info",52),e.qZA()),2&n){const t=e.oxw(6);e.xp6(1),e.Q6J("metadataSyncInfo",t.metadataSyncInfo)}}function Eu(n,i){if(1&n&&(e.TgZ(0,"span",53),e._UZ(1,"cd-rgw-sync-data-info",54),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("zone",t)}}const Ru=function(n){return{"border-left":n}};function mu(n,i){if(1&n&&(e.TgZ(0,"cd-card",48),e.YNc(1,Tu,2,1,"span",49),e.YNc(2,Eu,2,1,"span",50),e.qZA()),2&n){const t=i.$implicit;e.Q6J("cardTitle",t)("ngClass",e.VKq(6,Ru,"Data Sync"===t))("alignItemsCenter",!0)("justifyContentCenter",!0),e.xp6(1),e.Q6J("ngIf","Metadata Sync"===t),e.xp6(1),e.Q6J("ngIf","Data Sync"===t)}}function Mu(n,i){if(1&n&&(e.TgZ(0,"cd-card",45)(1,"div",46),e.YNc(2,mu,3,8,"cd-card",47),e.qZA()()),2&n){const t=i.$implicit,o=e.oxw(4);e.s9C("cardTitle",t.name),e.xp6(2),e.Q6J("ngForOf",o.chartTitles)}}function Su(n,i){if(1&n&&(e.TgZ(0,"div",1),e.YNc(1,Mu,3,2,"cd-card",44),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.replicaZonesInfo)("ngForTrackBy",t.trackByFn)}}function hu(n,i){if(1&n&&(e.TgZ(0,"div",39)(1,"cd-card",40),e.YNc(2,fu,2,5,"span",23),e.YNc(3,pu,2,3,"span",23),e.qZA(),e.TgZ(4,"div",41)(5,"cd-card",42),e.YNc(6,gu,2,5,"span",23),e.YNc(7,Su,2,2,"div",24),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("alignItemsCenter",!0)("justifyContentCenter",!0),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading),e.xp6(3),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading)}}function Cu(n,i){if(1&n&&(e.TgZ(0,"div",1),e.YNc(1,hu,8,6,"div",38),e.qZA()),2&n){const t=e.oxw(),o=e.MAs(30);e.xp6(1),e.Q6J("ngIf",t.showMultisiteCard)("ngIfElse",o)}}const Fu=function(){return["Requests/sec"]},Ou=function(n){return[n]},eo=function(){return["GET","PUT"]},to=function(n,i){return[n,i]};let Nu=(()=>{class n{constructor(t,o,_,E,U,H,K,Q,te,Te){this.authStorageService=t,this.healthService=o,this.refreshIntervalService=_,this.rgwDaemonService=E,this.rgwRealmService=U,this.rgwZonegroupService=H,this.rgwZoneService=K,this.rgwBucketService=Q,this.prometheusService=te,this.rgwMultisiteService=Te,this.icons=q.P,this.interval=new xn.w,this.rgwDaemonCount=0,this.rgwRealmCount=0,this.rgwZonegroupCount=0,this.rgwZoneCount=0,this.rgwBucketCount=0,this.objectCount=0,this.UserCount=0,this.totalPoolUsedBytes=0,this.averageObjectSize=0,this.multisiteInfo=[],this.queriesResults={RGW_REQUEST_PER_SECOND:[],BANDWIDTH:[],AVG_GET_LATENCY:[],AVG_PUT_LATENCY:[]},this.chartTitles=["Metadata Sync","Data Sync"],this.replicaZonesInfo=[],this.showMultisiteCard=!0,this.loading=!0,this.subject=new gc.t,this.syncCardLoading=!0,this.permissions=this.authStorageService.getPermissions()}ngOnInit(){this.interval=this.refreshIntervalService.intervalData$.subscribe(()=>{this.daemonSub=this.rgwDaemonService.list().subscribe(t=>{this.rgwDaemonCount=t.length}),this.HealthSub=this.healthService.getClusterCapacity().subscribe(t=>{this.objectCount=t.total_objects,this.totalPoolUsedBytes=t.total_pool_bytes_used,this.averageObjectSize=t.average_object_size}),this.getSyncStatus()}),this.BucketSub=this.rgwBucketService.getTotalBucketsAndUsersLength().subscribe(t=>{this.rgwBucketCount=t.buckets_count,this.UserCount=t.users_count}),this.realmSub=this.rgwRealmService.list().subscribe(t=>{this.rgwRealmCount=t.realms.length}),this.ZonegroupSub=this.rgwZonegroupService.list().subscribe(t=>{this.rgwZonegroupCount=t.zonegroups.length}),this.ZoneSUb=this.rgwZoneService.list().subscribe(t=>{this.rgwZoneCount=t.zones.length}),this.getPrometheusData(this.prometheusService.lastHourDateObject),this.multisiteSyncStatus$=this.subject.pipe((0,an.w)(()=>this.rgwMultisiteService.getSyncStatus().pipe((0,Rc.b)(t=>{this.loading=!1,this.replicaZonesInfo=t.dataSyncInfo,this.metadataSyncInfo=t.metadataSyncInfo,0===this.replicaZonesInfo.length&&(this.showMultisiteCard=!1,this.syncCardLoading=!1,this.loading=!1),[this.realm,this.zonegroup,this.zone]=t.primaryZoneData}),(0,h.K)(t=>(this.showMultisiteCard=!1,this.syncCardLoading=!1,this.loading=!1,t.preventDefault(),(0,f.of)(!0))))),(0,mc.d)(1))}ngOnDestroy(){this.interval.unsubscribe(),this.daemonSub.unsubscribe(),this.realmSub.unsubscribe(),this.ZonegroupSub.unsubscribe(),this.ZoneSUb.unsubscribe(),this.BucketSub.unsubscribe(),this.HealthSub.unsubscribe(),this.prometheusService.unsubscribe()}getPrometheusData(t){this.queriesResults=this.prometheusService.getPrometheusQueriesData(t,Ec.p,this.queriesResults,!0)}getSyncStatus(){this.subject.next()}trackByFn(t){return t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(rt.j),e.Y36(Mc.z),e.Y36(Sc.s),e.Y36(z.b),e.Y36(at.y),e.Y36(_t.K),e.Y36(lt.g),e.Y36(L.o),e.Y36(Tc.Q),e.Y36(et.o))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-overview-dashboard"]],decls:34,vars:38,consts:function(){let i;return i=" Multi-site needs to be configured in order to see the multi-site sync status. Please consult the " + "\ufffd#3\ufffd" + "" + "\ufffd/#3\ufffd" + " on how to configure and enable the multi-site functionality. ",[[1,"container-fluid"],[1,"row"],["cardTitle","Inventory","aria-label","Inventory card",1,"col-sm-3","px-3","d-flex"],["link","/rgw/daemon","title","Gateway","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/multisite","title","Realm","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/multisite","title","Zone Group","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/multisite","title","Zone","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/bucket","title","Bucket","summaryType","simplified",3,"data",4,"ngIf"],["link","/rgw/user","title","User","summaryType","simplified",3,"data",4,"ngIf"],["title","Object","summaryType","simplified",3,"data",4,"ngIf"],["cardTitle","Performance Statistics","ria-label","Performance Statistics card",1,"col-sm-6","d-flex"],[1,"ms-4","me-4","mt-0"],[3,"selectedTime"],["chartTitle","Requests/sec","dataUnits","",3,"labelsArray","dataArray"],["chartTitle","Latency","dataUnits","ms",3,"labelsArray","dataArray"],["chartTitle","Bandwidth","dataUnits","B",3,"labelsArray","dataArray"],[1,"col-lg-3"],["cardTitle","Used Capacity","aria-label","Used Capacity",1,"col-sm-2","d-flex","w-100","h-50","pb-3",3,"alignItemsCenter","justifyContentCenter"],[1,"ms-4","me-4","text-center"],["cardTitle","Average Object Size","aria-label","Avg Object Size",1,"col-sm-2","d-flex","w-100","h-50","pt-3",3,"alignItemsCenter","justifyContentCenter"],[1,"row","pt-4","pb-4"],["cardTitle","Multi-Site Sync Status"],["notConfigured",""],["class","d-flex justify-content-center",4,"ngIf"],["class","row",4,"ngIf"],["link","/rgw/daemon","title","Gateway","summaryType","simplified",3,"data"],["link","/rgw/multisite","title","Realm","summaryType","simplified",3,"data"],["link","/rgw/multisite","title","Zone Group","summaryType","simplified",3,"data"],["link","/rgw/multisite","title","Zone","summaryType","simplified",3,"data"],["link","/rgw/bucket","title","Bucket","summaryType","simplified",3,"data"],["link","/rgw/user","title","User","summaryType","simplified",3,"data"],["title","Object","summaryType","simplified",3,"data"],[1,"pe-5","ps-5"],["type","info"],i,["section","multisite"],[1,"d-flex","justify-content-center"],[3,"ngClass"],["class","row pt-2",4,"ngIf","ngIfElse"],[1,"row","pt-2"],["cardTitle","Primary Source Zone",1,"col-lg-3","d-flex","justify-content-center","align-primary-zone",3,"alignItemsCenter","justifyContentCenter"],[1,"col-lg-9"],["cardTitle","Source Zones",1,"d-flex","h-100"],[3,"realm","zonegroup","zone"],["cardType","zone","shadowClass","true","class","col-sm-9 col-lg-6 align-replica-zones d-flex pt-4","aria-label","Source Zones Card",3,"cardTitle",4,"ngFor","ngForOf","ngForTrackBy"],["cardType","zone","shadowClass","true","aria-label","Source Zones Card",1,"col-sm-9","col-lg-6","align-replica-zones","d-flex","pt-4",3,"cardTitle"],[1,"row","pb-4","ps-3","pe-3"],["cardType","syncCards","removeBorder","true","class","col-sm-9 col-lg-6","aria-label","Charts Card",3,"cardTitle","ngClass","alignItemsCenter","justifyContentCenter",4,"ngFor","ngForOf"],["cardType","syncCards","removeBorder","true","aria-label","Charts Card",1,"col-sm-9","col-lg-6",3,"cardTitle","ngClass","alignItemsCenter","justifyContentCenter"],["class","me-2 text-center",4,"ngIf"],["class","me-2",4,"ngIf"],[1,"me-2","text-center"],[3,"metadataSyncInfo"],[1,"me-2"],[3,"zone"]]},template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"cd-card",2),e.YNc(3,iu,1,1,"cd-card-row",3),e.YNc(4,_u,1,1,"cd-card-row",4),e.YNc(5,ru,1,1,"cd-card-row",5),e.YNc(6,su,1,1,"cd-card-row",6),e.YNc(7,au,1,1,"cd-card-row",7),e.YNc(8,lu,1,1,"cd-card-row",8),e.YNc(9,cu,1,1,"cd-card-row",9),e.qZA(),e.TgZ(10,"cd-card",10)(11,"div",11)(12,"cd-dashboard-time-selector",12),e.NdJ("selectedTime",function(E){return o.getPrometheusData(E)}),e.qZA(),e._UZ(13,"cd-dashboard-area-chart",13)(14,"cd-dashboard-area-chart",14)(15,"cd-dashboard-area-chart",15),e.qZA()(),e.TgZ(16,"div",16)(17,"cd-card",17)(18,"span",18)(19,"h1"),e._uU(20),e.ALo(21,"dimlessBinary"),e.qZA()()(),e.TgZ(22,"cd-card",19)(23,"span",18)(24,"h1"),e._uU(25),e.ALo(26,"dimlessBinary"),e.qZA()()()()(),e.TgZ(27,"div",20)(28,"cd-card",21),e.YNc(29,uu,4,0,"ng-template",null,22,e.W1O),e.YNc(31,du,2,5,"span",23),e.YNc(32,Cu,2,2,"div",24),e.ALo(33,"async"),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",null!=o.rgwDaemonCount),e.xp6(1),e.Q6J("ngIf",null!=o.rgwRealmCount),e.xp6(1),e.Q6J("ngIf",null!=o.rgwZonegroupCount),e.xp6(1),e.Q6J("ngIf",null!=o.rgwZoneCount),e.xp6(1),e.Q6J("ngIf",null!=o.rgwBucketCount),e.xp6(1),e.Q6J("ngIf",null!=o.UserCount),e.xp6(1),e.Q6J("ngIf",null!=o.objectCount),e.xp6(4),e.Q6J("labelsArray",e.DdM(27,Fu))("dataArray",e.VKq(28,Ou,o.queriesResults.RGW_REQUEST_PER_SECOND)),e.xp6(1),e.Q6J("labelsArray",e.DdM(30,eo))("dataArray",e.WLB(31,to,o.queriesResults.AVG_GET_LATENCY,o.queriesResults.AVG_PUT_LATENCY)),e.xp6(1),e.Q6J("labelsArray",e.DdM(34,eo))("dataArray",e.WLB(35,to,o.queriesResults.GET_BANDWIDTH,o.queriesResults.PUT_BANDWIDTH)),e.xp6(2),e.Q6J("alignItemsCenter",!0)("justifyContentCenter",!0),e.xp6(3),e.Oqu(e.lcZ(21,21,o.totalPoolUsedBytes)),e.xp6(2),e.Q6J("alignItemsCenter",!0)("justifyContentCenter",!0),e.xp6(3),e.Oqu(e.lcZ(26,23,o.averageObjectSize)),e.xp6(6),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",e.lcZ(33,25,o.multisiteSyncStatus$)))},dependencies:[g.mk,g.sg,g.O5,tt.G,hc.K,Cc.A,Fc.e,Oc.S,Nc.M,Pc,Bc,ou,g.Ov,gn.$],styles:["hr[_ngcontent-%COMP%]{margin-bottom:2px;margin-top:2px}.list-group-item[_ngcontent-%COMP%]{border:0}.align-replica-zones[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;padding-left:2em;padding-right:2em}ul[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;list-style-type:none}.align-primary-zone[_ngcontent-%COMP%]{padding-left:4em}.border-left[_ngcontent-%COMP%]{border-left:1px solid rgba(0,0,0,.1254901961)}"]}),n})();var Pu=p(46767),Au=p(2097),no=p(8948),bu=p(69499);function Iu(n,i){1&n&&(e.TgZ(0,"span",27),e.SDv(1,28),e.qZA())}function Gu(n,i){1&n&&(e.TgZ(0,"span",27),e.SDv(1,29),e.qZA())}function yu(n,i){1&n&&(e.TgZ(0,"span",27),e.SDv(1,30),e.qZA())}function Lu(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"form",5,6)(2,"div",7)(3,"div",8)(4,"label",9),e.SDv(5,10),e.qZA(),e.TgZ(6,"div",11),e._UZ(7,"input",12),e.YNc(8,Iu,2,0,"span",13),e.qZA()(),e.TgZ(9,"div",8)(10,"label",14),e.SDv(11,15),e.qZA(),e.TgZ(12,"div",11)(13,"select",16)(14,"option",17),e.SDv(15,18),e.ALo(16,"upperFirst"),e.qZA(),e.TgZ(17,"option",17),e.SDv(18,19),e.ALo(19,"upperFirst"),e.qZA(),e.TgZ(20,"option",17),e.SDv(21,20),e.ALo(22,"upperFirst"),e.qZA()(),e.YNc(23,Gu,2,0,"span",13),e.qZA()(),e.TgZ(24,"div",8)(25,"label",21),e.SDv(26,22),e.qZA(),e.TgZ(27,"div",11),e._UZ(28,"input",23),e.YNc(29,yu,2,0,"span",13),e.qZA()()(),e.TgZ(30,"div",24)(31,"div",25)(32,"cd-form-button-panel",26),e.NdJ("submitActionEvent",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.submit())}),e.ALo(33,"titlecase"),e.ALo(34,"upperFirst"),e.qZA()()()()}if(2&n){const t=e.MAs(1),o=e.oxw();e.Q6J("formGroup",o.syncPolicyForm),e.xp6(7),e.Q6J("readonly",o.editing),e.xp6(1),e.Q6J("ngIf",o.syncPolicyForm.showError("group_id",t,"required")),e.xp6(6),e.s9C("value",o.syncPolicyStatus.ENABLED),e.xp6(2),e.pQV(e.lcZ(16,14,o.syncPolicyStatus.ENABLED)),e.QtT(15),e.xp6(1),e.s9C("value",o.syncPolicyStatus.ALLOWED),e.xp6(2),e.pQV(e.lcZ(19,16,o.syncPolicyStatus.ALLOWED)),e.QtT(18),e.xp6(1),e.s9C("value",o.syncPolicyStatus.FORBIDDEN),e.xp6(2),e.pQV(e.lcZ(22,18,o.syncPolicyStatus.FORBIDDEN)),e.QtT(21),e.xp6(1),e.Q6J("ngIf",o.syncPolicyForm.showError("status",t,"required")),e.xp6(5),e.Q6J("ngbTypeahead",o.bucketDataSource),e.xp6(1),e.Q6J("ngIf",o.syncPolicyForm.showError("bucket_name",t,"bucketNameNotAllowed")),e.xp6(3),e.Q6J("form",o.syncPolicyForm)("submitText",e.lcZ(33,20,o.action)+" "+e.lcZ(34,22,o.resource))}}let On=(()=>{class n extends ie.E{constructor(t,o,_,E,U,H,K){super(),this.router=t,this.route=o,this.actionLabels=_,this.fb=E,this.rgwMultisiteService=U,this.notificationService=H,this.rgwBucketService=K,this.editing=!1,this.syncPolicyStatus=Me.qV,this.bucketDataSource=Q=>Q.pipe((0,qn.b)(200),(0,Hn.x)(),(0,c.zg)(te=>this.getBucketTypeahead(te))),this.editing=this.router.url.includes("(modal:edit"),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource="Sync Policy Group",this.createForm(),this.loadingReady(),this.pageURL="rgw/multisite/sync-policy"}ngOnInit(){this.editing&&this.route.paramMap.subscribe(t=>{const o=t.get("groupName");if(o){const _=t.get("bucketName");this.loadingStart(),this.rgwMultisiteService.getSyncPolicyGroup(o,_).subscribe(E=>{this.loadingReady(),E?(this.syncPolicyForm.get("bucket_name").disable(),this.syncPolicyForm.patchValue({group_id:E.id,status:E.status,bucket_name:_})):this.goToListView()})}})}goToListView(){this.router.navigate([this.pageURL,{outlets:{modal:null},state:{reload:!0}}])}createForm(){this.syncPolicyForm=this.fb.group({group_id:["",r.kI.required],status:[`${this.syncPolicyStatus.ENABLED}`,r.kI.required],bucket_name:["",,this.bucketExistence(!0)]})}submit(){this.syncPolicyForm.pristine?this.goToListView():this.syncPolicyForm.pending?this.syncPolicyForm.setErrors({cdSubmitButton:!0}):this.editing?this.rgwMultisiteService.modifySyncPolicyGroup(this.syncPolicyForm.getRawValue()).subscribe(()=>{this.notificationService.show(J.k.success,"Modified Sync Policy Group '" + this.syncPolicyForm.getValue("group_id") + "'"),this.goToListView()},()=>{this.syncPolicyForm.setErrors({cdSubmitButton:!0})}):this.rgwMultisiteService.createSyncPolicyGroup(this.syncPolicyForm.getRawValue()).subscribe(()=>{this.notificationService.show(J.k.success,"Created Sync Policy Group '" + this.syncPolicyForm.getValue("group_id") + "'"),this.goToListView()},()=>{this.syncPolicyForm.setErrors({cdSubmitButton:!0})})}bucketExistence(t){return o=>o.dirty?(0,Zn.H)(500).pipe((0,bu.c)(this.rgwBucketService.exists(o.value)),(0,ln.U)(_=>_===t?null:{bucketNameNotAllowed:!0})):(0,f.of)(null)}getBucketTypeahead(t){return R().isString(t)&&"/"!==t&&""!==t?this.rgwBucketService.list().pipe((0,ln.U)(o=>o.filter(_=>_.toLowerCase().includes(t)).slice(0,15)),(0,h.K)(()=>(0,f.of)(["Error while retrieving bucket names."]))):(0,f.of)([])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(N.F0),e.Y36(N.gz),e.Y36(T.p4),e.Y36(Pe.O),e.Y36(et.o),e.Y36(fe.g),e.Y36(L.o))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cd-rgw-multisite-sync-policy-form"]],features:[e.qOj],decls:7,vars:8,consts:function(){let i,t,o,_,E,U,H,K,Q,te,Te,pe;return i="" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",t="Group Name",o="Group Name...",_="Status",E="" + "\ufffd0\ufffd" + "",U="" + "\ufffd0\ufffd" + "",H="" + "\ufffd0\ufffd" + "",K="Bucket Name",Q="Bucket Name...",te="This field is required.",Te="This field is required.",pe="The bucket with chosen name does not exist.",[[3,"pageURL"],[1,"modal-title"],i,[1,"modal-content"],["novalidate","",3,"formGroup",4,"cdFormLoading"],["novalidate","",3,"formGroup"],["frm","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","group_id",1,"cd-col-form-label","required"],t,[1,"cd-col-form-input"],["id","group_id","name","group_id","type","text","placeholder",o,"formControlName","group_id",1,"form-control",3,"readonly"],["class","invalid-feedback",4,"ngIf"],["for","status",1,"cd-col-form-label","required"],_,["id","status","name","status","formControlName","status",1,"form-select"],[3,"value"],E,U,H,["for","bucket_name",1,"cd-col-form-label"],K,["id","bucket_name","name","bucket_name","type","text","placeholder",Q,"formControlName","bucket_name",1,"form-control",3,"ngbTypeahead"],[1,"modal-footer"],[1,"text-right"],[3,"form","submitText","submitActionEvent"],[1,"invalid-feedback"],te,Te,pe]},template:function(t,o){1&t&&(e.TgZ(0,"cd-modal",0)(1,"span",1),e.SDv(2,2),e.ALo(3,"titlecase"),e.ALo(4,"upperFirst"),e.qZA(),e.ynx(5,3),e.YNc(6,Lu,35,24,"form",4),e.BQk(),e.qZA()),2&t&&(e.Q6J("pageURL",o.pageURL),e.xp6(4),e.pQV(e.lcZ(3,4,o.action))(e.lcZ(4,6,o.resource)),e.QtT(2),e.xp6(2),e.Q6J("cdFormLoading",o.loading))},dependencies:[g.O5,Le.z,be.p,pn.y,Ge.o,O.b,l.P,w.V,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u,b.dR,g.rS,Je.m]}),n})(),oo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[g.rS],imports:[g.ez,P.m,r.u5,r.UX.withConfig({callSetDisabledState:"whenDisabledForLegacyCode"}),B.B,b.Oz,N.Bz,b.HK,b.dT,x.b,Mn.xc,pc.t,Pu.d,b.ZS]}),n})();const Du=[{path:"",redirectTo:"rbd",pathMatch:"full"},{path:"daemon",component:R_,data:{breadcrumbs:"Gateways"}},{path:"user",data:{breadcrumbs:"Users"},children:[{path:"",component:Gs},{path:T.MQ.CREATE,component:$n,data:{breadcrumbs:T.Qn.CREATE}},{path:`${T.MQ.EDIT}/:uid`,component:$n,data:{breadcrumbs:T.Qn.EDIT}}]},{path:"roles",data:{breadcrumbs:"Roles",resource:"api.rgw.roles@1.0",tabs:[{name:"Users",url:"/rgw/user"},{name:"Roles",url:"/rgw/roles"}]},children:[{path:"",component:d.c},{path:T.MQ.CREATE,component:Vn.U,data:{breadcrumbs:T.Qn.CREATE}},{path:T.MQ.EDIT,component:Vn.U,data:{breadcrumbs:T.Qn.EDIT}}]},{path:"bucket",data:{breadcrumbs:"Buckets"},children:[{path:"",component:i_},{path:T.MQ.CREATE,component:Nn,data:{breadcrumbs:T.Qn.CREATE}},{path:`${T.MQ.EDIT}/:bid`,component:Nn,data:{breadcrumbs:T.Qn.EDIT}}]},{path:"overview",data:{breadcrumbs:"Overview"},children:[{path:"",component:Nu}]},{path:"multisite",data:{breadcrumbs:"Multi-site"},children:[{path:"",redirectTo:"configuration",pathMatch:"full"},{path:"configuration",component:ct},{path:"sync-policy",component:Qn,children:[{path:`${T.MQ.CREATE}`,component:On,outlet:"modal"},{path:`${T.MQ.EDIT}/:groupName`,component:On,outlet:"modal"},{path:`${T.MQ.EDIT}/:groupName/:bucketName`,component:On,outlet:"modal"}]}]},{path:"nfs",canActivateChild:[M.T,v.P],data:{moduleStatusGuardConfig:{uiApiPath:"nfs-ganesha",redirectTo:"error",section:"nfs-ganesha",section_info:"NFS GANESHA",header:"NFS-Ganesha is not configured"},breadcrumbs:"NFS"},children:[{path:"",component:Au.E},{path:T.MQ.CREATE,component:no.D,data:{breadcrumbs:T.Qn.CREATE}},{path:`${T.MQ.EDIT}/:cluster_id/:export_id`,component:no.D,data:{breadcrumbs:T.Qn.EDIT}}]}];let vu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[oo,N.Bz.forChild(Du)]}),n})()},1372:(Y,V,p)=>{"use strict";p.d(V,{B:()=>d});var g=p(64537),r=p(88692),N=p(87925);const b=function(M){return{collapsed:M}},x=function(M){return{show:M}},T=["*"];let d=(()=>{class M{constructor(){this.showAdvanced=!1}}return M.\u0275fac=function(P){return new(P||M)},M.\u0275cmp=g.Xpm({type:M,selectors:[["cd-form-advanced-fieldset"]],ngContentSelectors:T,decls:9,vars:6,consts:function(){let v;return v="Advanced ",[[1,"cd-header"],[1,"accordion","accordion-flush"],["type","button","id","advanced-fieldset","aria-label","toggle advanced mode",1,"accordion-button","cd-form-advanced-fieldset-buttton","p-0",3,"ngClass","click"],v,[1,"accordion-collapse","collapse",3,"ngClass"],[1,"accordion-body"],[1,"card-body"]]},template:function(P,B){1&P&&(g.F$t(),g.TgZ(0,"fieldset")(1,"legend",0)(2,"div",1)(3,"button",2),g.NdJ("click",function(){return B.showAdvanced=!B.showAdvanced}),g.SDv(4,3),g.qZA()()(),g.TgZ(5,"div",4)(6,"div",5)(7,"div",6),g.Hsn(8),g.qZA()()()()),2&P&&(g.xp6(3),g.Q6J("ngClass",g.VKq(2,b,!B.showAdvanced)),g.xp6(2),g.Q6J("ngClass",g.VKq(4,x,B.showAdvanced)))},dependencies:[r.mk,N.o],styles:[".cd-form-advanced-fieldset-buttton[_ngcontent-%COMP%]{--bs-accordion-btn-active-icon: var(--bs-accordion-btn-icon);background-color:inherit;border:hidden;border-color:inherit;box-shadow:none;color:inherit;font-size:inherit;outline:0;text-decoration:none}"]}),M})()},52361:()=>{},94616:()=>{}}]);