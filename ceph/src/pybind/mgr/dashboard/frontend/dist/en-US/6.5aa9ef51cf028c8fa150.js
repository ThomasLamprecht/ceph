(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{OkK6:function(e,t,c){"use strict";c.r(t),c.d(t,"RgwModule",(function(){return Wa})),c.d(t,"RoutedRgwModule",(function(){return Fa}));var a=c("SVse"),i=c("s7LF"),s=c("iInd"),o=c("G0yt"),b=c("zWsK"),n=c("sne2"),r=c("PCNd"),l=c("G6Q+"),u=c("LvDl"),d=c.n(u),f=c("cp0P"),m=c("mrSG"),p=c("IheW"),g=c("LRne"),h=c("5+tZ"),S=c("9xzX"),y=c("xTzq"),_=c("8Y7J");let R=(()=>{let e=class{constructor(e,t){this.http=e,this.rgwDaemonService=t,this.url="api/rgw/bucket"}list(){return this.rgwDaemonService.request(e=>(e=e.append("stats","true"),this.http.get(this.url,{params:e})))}enumerate(){return this.rgwDaemonService.request(e=>this.http.get(this.url,{params:e}))}get(e){return this.rgwDaemonService.request(t=>this.http.get(`${this.url}/${e}`,{params:t}))}create(e,t,c,a,i,s,o,b){return this.rgwDaemonService.request(n=>this.http.post(this.url,null,{params:new p.e({fromObject:{bucket:e,uid:t,zonegroup:c,placement_target:a,lock_enabled:String(i),lock_mode:s,lock_retention_period_days:o,lock_retention_period_years:b,daemon_name:n.get("daemon_name")}})}))}update(e,t,c,a,i,s,o,b,n,r){return this.rgwDaemonService.request(l=>(l=(l=(l=(l=(l=(l=(l=(l=(l=l.append("bucket_id",t)).append("uid",c)).append("versioning_state",a)).append("mfa_delete",i)).append("mfa_token_serial",s)).append("mfa_token_pin",o)).append("lock_mode",b)).append("lock_retention_period_days",n)).append("lock_retention_period_years",r),this.http.put(`${this.url}/${e}`,null,{params:l})))}delete(e,t=!0){return this.rgwDaemonService.request(c=>(c=c.append("purge_objects",t?"true":"false"),this.http.delete(`${this.url}/${e}`,{params:c})))}exists(e){return this.enumerate().pipe(Object(h.a)(t=>{const c=d.a.indexOf(t,e);return Object(g.a)(-1!==c)}))}};return e.\u0275fac=function(t){return new(t||e)(_.dc(p.b),_.dc(S.a))},e.\u0275prov=_.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e=Object(m.b)([y.a,Object(m.d)("design:paramtypes",[p.b,S.a])],e),e})(),k=(()=>{let e=class{constructor(e,t){this.http=e,this.rgwDaemonService=t,this.url="api/rgw/site"}get(e){return this.rgwDaemonService.request(t=>(e&&(t=t.append("query",e)),this.http.get(this.url,{params:t})))}};return e.\u0275fac=function(t){return new(t||e)(_.dc(p.b),_.dc(S.a))},e.\u0275prov=_.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e=Object(m.b)([y.a,Object(m.d)("design:paramtypes",[p.b,S.a])],e),e})();var v=c("P8lu"),w=c("oxzT"),z=c("mtw6"),x=c("spCT"),I=c("2EZI"),M=c("1Ni5"),$=c("9nlD"),q=function(e){return e.ENABLED="Enabled",e.DISABLED="Disabled",e}({}),N=function(e){return e.ENABLED="Enabled",e.SUSPENDED="Suspended",e}({}),T=c("zc8c"),E=c("NwgZ"),A=c("ocLN"),W=c("ANnk"),C=c("f69J"),F=c("IZUe"),O=c("p4Cf"),D=c("6+kj"),j=c("8xTl");function P(e,t){1&e&&(_.Sb(0,"div",9),_.Sb(1,"label",36),_.Wb(2,37),_.Rb(),_.Sb(3,"div",12),_.Nb(4,"input",38),_.Rb(),_.Rb())}function V(e,t){1&e&&(_.Sb(0,"span",39),_.Wb(1,40),_.Rb())}function B(e,t){1&e&&(_.Sb(0,"span",39),_.Wb(1,41),_.Rb())}function L(e,t){1&e&&(_.Sb(0,"span",39),_.Wb(1,42),_.Rb())}function U(e,t){1&e&&(_.Sb(0,"option",43),_.Wb(1,44),_.Rb()),2&e&&_.pc("ngValue",null)}function G(e,t){1&e&&(_.Sb(0,"option",43),_.Wb(1,45),_.Rb()),2&e&&_.pc("ngValue",null)}function K(e,t){if(1&e&&(_.Sb(0,"option",46),_.Oc(1),_.Rb()),2&e){const e=t.$implicit;_.pc("value",e),_.yb(1),_.Pc(e)}}function Q(e,t){1&e&&(_.Sb(0,"span",39),_.Wb(1,47),_.Rb())}function Z(e,t){1&e&&(_.Sb(0,"option",43),_.Wb(1,49),_.Rb()),2&e&&_.pc("ngValue",null)}function Y(e,t){1&e&&(_.Sb(0,"option",43),_.Wb(1,50),_.Rb()),2&e&&_.pc("ngValue",null)}function J(e,t){if(1&e&&(_.Sb(0,"option",46),_.Oc(1),_.Rb()),2&e){const e=t.$implicit;_.pc("value",e.name),_.yb(1),_.Pc(e.description)}}function X(e,t){1&e&&(_.Sb(0,"span",39),_.Wb(1,51),_.Rb())}function H(e,t){if(1&e&&(_.Sb(0,"select",48),_.Mc(1,Z,2,1,"option",19),_.Mc(2,Y,2,1,"option",19),_.Mc(3,J,2,2,"option",20),_.Rb(),_.Mc(4,X,2,0,"span",15)),2&e){_.ic();const e=_.Ac(2),t=_.ic();_.yb(1),_.pc("ngIf",null===t.placementTargets),_.yb(1),_.pc("ngIf",null!==t.placementTargets),_.yb(1),_.pc("ngForOf",t.placementTargets),_.yb(1),_.pc("ngIf",t.bucketForm.showError("placement-target",e,"required"))}}function ee(e,t){1&e&&(_.Qb(0),_.Nb(1,"input",52),_.Pb())}function te(e,t){if(1&e){const e=_.Tb();_.Sb(0,"fieldset"),_.Sb(1,"legend",26),_.Wb(2,53),_.Rb(),_.Sb(3,"div",9),_.Sb(4,"div",28),_.Sb(5,"div",29),_.Sb(6,"input",54),_.gc("change",(function(){return _.Dc(e),_.ic(2).setMfaDeleteValidators()})),_.Rb(),_.Sb(7,"label",55),_.Wb(8,56),_.Rb(),_.Sb(9,"cd-helper"),_.Sb(10,"span"),_.Wb(11,57),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Rb()}}function ce(e,t){1&e&&(_.Sb(0,"span",39),_.Wb(1,66),_.Rb())}function ae(e,t){if(1&e&&(_.Sb(0,"div",9),_.Sb(1,"label",63),_.Wb(2,64),_.Rb(),_.Sb(3,"div",12),_.Nb(4,"input",65),_.Mc(5,ce,2,0,"span",15),_.Rb(),_.Rb()),2&e){_.ic(2);const e=_.Ac(2),t=_.ic();_.yb(5),_.pc("ngIf",t.bucketForm.showError("mfa-token-serial",e,"required"))}}function ie(e,t){1&e&&(_.Sb(0,"span",39),_.Wb(1,70),_.Rb())}function se(e,t){if(1&e&&(_.Sb(0,"div",9),_.Sb(1,"label",67),_.Wb(2,68),_.Rb(),_.Sb(3,"div",12),_.Nb(4,"input",69),_.Mc(5,ie,2,0,"span",15),_.Rb(),_.Rb()),2&e){_.ic(2);const e=_.Ac(2),t=_.ic();_.yb(5),_.pc("ngIf",t.bucketForm.showError("mfa-token-pin",e,"required"))}}function oe(e,t){if(1&e){const e=_.Tb();_.Sb(0,"fieldset"),_.Sb(1,"legend",26),_.Wb(2,58),_.Rb(),_.Sb(3,"div",9),_.Sb(4,"div",28),_.Sb(5,"div",29),_.Sb(6,"input",59),_.gc("change",(function(){return _.Dc(e),_.ic(2).setMfaDeleteValidators()})),_.Rb(),_.Sb(7,"label",60),_.Wb(8,61),_.Rb(),_.Sb(9,"cd-helper"),_.Sb(10,"span"),_.Wb(11,62),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Mc(12,ae,6,1,"div",8),_.Mc(13,se,6,1,"div",8),_.Rb()}if(2&e){const e=_.ic(2);_.yb(12),_.pc("ngIf",e.areMfaCredentialsRequired()),_.yb(1),_.pc("ngIf",e.areMfaCredentialsRequired())}}function be(e,t){1&e&&(_.Sb(0,"div",9),_.Sb(1,"label",71),_.Wb(2,72),_.Rb(),_.Sb(3,"div",12),_.Sb(4,"select",73),_.Sb(5,"option",74),_.Wb(6,75),_.Rb(),_.Sb(7,"option",76),_.Wb(8,77),_.Rb(),_.Rb(),_.Rb(),_.Rb())}function ne(e,t){1&e&&(_.Sb(0,"span",39),_.Wb(1,82),_.Rb())}function re(e,t){1&e&&(_.Sb(0,"span",39),_.Wb(1,83),_.Rb())}function le(e,t){if(1&e&&(_.Sb(0,"div",9),_.Sb(1,"label",78),_.Qb(2),_.Wb(3,79),_.Pb(),_.Sb(4,"cd-helper"),_.Wb(5,80),_.Rb(),_.Rb(),_.Sb(6,"div",12),_.Nb(7,"input",81),_.Mc(8,ne,2,0,"span",15),_.Mc(9,re,2,0,"span",15),_.Rb(),_.Rb()),2&e){_.ic();const e=_.Ac(2),t=_.ic();_.yb(8),_.pc("ngIf",t.bucketForm.showError("lock_retention_period_days",e,"pattern")),_.yb(1),_.pc("ngIf",t.bucketForm.showError("lock_retention_period_days",e,"eitherDaysOrYears"))}}function ue(e,t){1&e&&(_.Sb(0,"span",39),_.Wb(1,88),_.Rb())}function de(e,t){1&e&&(_.Sb(0,"span",39),_.Wb(1,89),_.Rb())}function fe(e,t){if(1&e&&(_.Sb(0,"div",9),_.Sb(1,"label",84),_.Qb(2),_.Wb(3,85),_.Pb(),_.Sb(4,"cd-helper"),_.Wb(5,86),_.Rb(),_.Rb(),_.Sb(6,"div",12),_.Nb(7,"input",87),_.Mc(8,ue,2,0,"span",15),_.Mc(9,de,2,0,"span",15),_.Rb(),_.Rb()),2&e){_.ic();const e=_.Ac(2),t=_.ic();_.yb(8),_.pc("ngIf",t.bucketForm.showError("lock_retention_period_days",e,"pattern")),_.yb(1),_.pc("ngIf",t.bucketForm.showError("lock_retention_period_years",e,"eitherDaysOrYears"))}}const me=function(e){return{required:e}};function pe(e,t){if(1&e){const e=_.Tb();_.Sb(0,"div",1),_.Sb(1,"form",2,3),_.Sb(3,"div",4),_.Sb(4,"div",5),_.Wb(5,6),_.jc(6,"titlecase"),_.jc(7,"upperFirst"),_.Rb(),_.Sb(8,"div",7),_.Mc(9,P,5,0,"div",8),_.Sb(10,"div",9),_.Sb(11,"label",10),_.Wb(12,11),_.Rb(),_.Sb(13,"div",12),_.Sb(14,"input",13),_.Yb(15,14),_.Rb(),_.Mc(16,V,2,0,"span",15),_.Mc(17,B,2,0,"span",15),_.Mc(18,L,2,0,"span",15),_.Rb(),_.Rb(),_.Sb(19,"div",9),_.Sb(20,"label",16),_.Wb(21,17),_.Rb(),_.Sb(22,"div",12),_.Sb(23,"select",18),_.Mc(24,U,2,1,"option",19),_.Mc(25,G,2,1,"option",19),_.Mc(26,K,2,2,"option",20),_.Rb(),_.Mc(27,Q,2,0,"span",15),_.Rb(),_.Rb(),_.Sb(28,"div",9),_.Sb(29,"label",21),_.Wb(30,22),_.Rb(),_.Sb(31,"div",12),_.Mc(32,H,5,4,"ng-template",null,23,_.Nc),_.Mc(34,ee,2,0,"ng-container",24),_.Rb(),_.Rb(),_.Mc(35,te,12,0,"fieldset",25),_.Mc(36,oe,14,2,"fieldset",25),_.Sb(37,"fieldset"),_.Sb(38,"legend",26),_.Wb(39,27),_.Rb(),_.Sb(40,"div",9),_.Sb(41,"div",28),_.Sb(42,"div",29),_.Nb(43,"input",30),_.Sb(44,"label",31),_.Wb(45,32),_.Rb(),_.Sb(46,"cd-helper"),_.Sb(47,"span"),_.Wb(48,33),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Mc(49,be,9,0,"div",8),_.Mc(50,le,10,2,"div",8),_.Mc(51,fe,10,2,"div",8),_.Rb(),_.Rb(),_.Sb(52,"div",34),_.Sb(53,"cd-form-button-panel",35),_.gc("submitActionEvent",(function(){return _.Dc(e),_.ic().submit()})),_.jc(54,"titlecase"),_.jc(55,"upperFirst"),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Rb()}if(2&e){const e=_.Ac(2),t=_.Ac(33),c=_.ic();_.yb(1),_.pc("formGroup",c.bucketForm),_.yb(6),_.ac(_.kc(6,25,c.action))(_.kc(7,27,c.resource)),_.Xb(5),_.yb(2),_.pc("ngIf",c.editing),_.yb(2),_.pc("ngClass",_.uc(33,me,!c.editing)),_.yb(3),_.pc("readonly",c.editing)("autofocus",!c.editing),_.yb(2),_.pc("ngIf",c.bucketForm.showError("bid",e,"required")),_.yb(1),_.pc("ngIf",c.bucketForm.showError("bid",e,"bucketNameInvalid")),_.yb(1),_.pc("ngIf",c.bucketForm.showError("bid",e,"bucketNameExists")),_.yb(5),_.pc("autofocus",c.editing),_.yb(1),_.pc("ngIf",null===c.owners),_.yb(1),_.pc("ngIf",null!==c.owners),_.yb(1),_.pc("ngForOf",c.owners),_.yb(1),_.pc("ngIf",c.bucketForm.showError("owner",e,"required")),_.yb(2),_.pc("ngClass",_.uc(35,me,!c.editing)),_.yb(5),_.pc("ngIf",c.editing)("ngIfElse",t),_.yb(1),_.pc("ngIf",c.editing),_.yb(1),_.pc("ngIf",c.editing),_.yb(13),_.pc("ngIf",c.bucketForm.getValue("lock_enabled")),_.yb(1),_.pc("ngIf",c.bucketForm.getValue("lock_enabled")),_.yb(1),_.pc("ngIf",c.bucketForm.getValue("lock_enabled")),_.yb(2),_.pc("form",c.bucketForm)("submitText",_.kc(54,29,c.action)+" "+_.kc(55,31,c.resource))}}let ge=(()=>{class e extends x.a{constructor(e,t,c,a,i,s,o,b){super(),this.route=e,this.router=t,this.formBuilder=c,this.rgwBucketService=a,this.rgwSiteService=i,this.rgwUserService=s,this.notificationService=o,this.actionLabels=b,this.editing=!1,this.owners=null,this.placementTargets=[],this.isVersioningAlreadyEnabled=!1,this.isMfaDeleteAlreadyEnabled=!1,this.icons=w.a,this.editing=this.router.url.startsWith("/rgw/bucket/"+n.e.EDIT),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.resource="bucket",this.createForm()}get isVersioningEnabled(){return this.bucketForm.getValue("versioning")}get isMfaDeleteEnabled(){return this.bucketForm.getValue("mfa-delete")}createForm(){const e=this,t=M.a.custom("eitherDaysOrYears",()=>{if(!e.bucketForm||!d.a.get(e.bucketForm.getRawValue(),"lock_enabled"))return!1;const t=e.bucketForm.getValue("lock_retention_period_years"),c=e.bucketForm.getValue("lock_retention_period_days");return c>0&&t>0||0===c&&0===t}),c=[0,[M.a.number(!1),t]];this.bucketForm=this.formBuilder.group({id:[null],bid:[null,[i.A.required],this.editing?[]:[this.bucketNameValidator()]],owner:[null,[i.A.required]],"placement-target":[null,this.editing?[]:[i.A.required]],versioning:[null],"mfa-delete":[null],"mfa-token-serial":[""],"mfa-token-pin":[""],lock_enabled:[{value:!1,disabled:this.editing}],lock_mode:["COMPLIANCE"],lock_retention_period_days:c,lock_retention_period_years:c})}ngOnInit(){const e={owners:this.rgwUserService.enumerate()};this.editing||(e.getPlacementTargets=this.rgwSiteService.get("placement-targets")),this.route.params.subscribe(t=>{if(t.hasOwnProperty("bid")){const c=decodeURIComponent(t.bid);e.getBid=this.rgwBucketService.get(c)}Object(f.a)(e).subscribe(e=>{if(this.owners=e.owners.sort(),e.getPlacementTargets){const t=e.getPlacementTargets;this.zonegroup=t.zonegroup,d.a.forEach(t.placement_targets,e=>{e.description=`${e.name} (${"pool"}: ${e.data_pool})`,this.placementTargets.push(e)}),1===this.placementTargets.length&&this.bucketForm.get("placement-target").setValue(this.placementTargets[0].name)}if(e.getBid){const t=e.getBid,c=d.a.clone(this.bucketForm.getRawValue());let a=d.a.pick(t,d.a.keys(c));a["placement-target"]=t.placement_rule,a.versioning=t.versioning===N.ENABLED,a["mfa-delete"]=t.mfa_delete===q.ENABLED,a=d.a.merge(c,a),this.bucketForm.setValue(a),this.editing&&(this.isVersioningAlreadyEnabled=this.isVersioningEnabled,this.isMfaDeleteAlreadyEnabled=this.isMfaDeleteEnabled,this.setMfaDeleteValidators())}this.loadingReady()})})}goToListView(){this.router.navigate(["/rgw/bucket"])}submit(){if(this.bucketForm.pristine)return void this.goToListView();const e=this.bucketForm.value;if(this.editing){const t=this.getVersioningStatus(),c=this.getMfaDeleteStatus();this.rgwBucketService.update(e.bid,e.id,e.owner,t,c,e["mfa-token-serial"],e["mfa-token-pin"],e.lock_mode,e.lock_retention_period_days,e.lock_retention_period_years).subscribe(()=>{this.notificationService.show(z.a.success,"Updated Object Gateway bucket '" + e.bid + "'."),this.goToListView()},()=>{this.bucketForm.setErrors({cdSubmitButton:!0})})}else this.rgwBucketService.create(e.bid,e.owner,this.zonegroup,e["placement-target"],e.lock_enabled,e.lock_mode,e.lock_retention_period_days,e.lock_retention_period_years).subscribe(()=>{this.notificationService.show(z.a.success,"Created Object Gateway bucket '" + e.bid + "'"),this.goToListView()},()=>{this.bucketForm.setErrors({cdSubmitButton:!0})})}bucketNameValidator(){const e=this.rgwBucketService;return t=>new Promise(c=>{if(t.pristine||""===t.value)return void c(null);const a=[];a.push(e=>!M.a.ip()(e)),a.push(e=>d.a.inRange(e.length,3,64)),a.push(e=>{const t=d.a.split(e,".");return d.a.every(t,e=>e===d.a.toLower(e)&&!e.includes("_")&&!!/[0-9a-z-]/.test(e)&&d.a.every([0,e.length],t=>/[a-z]/.test(e[t])||d.a.isInteger(d.a.parseInt(e[t]))))}),d.a.every(a,e=>e(t.value))?e.exists(t.value).subscribe(e=>{c(e?{bucketNameExists:!0}:null)}):c({bucketNameInvalid:!0})})}areMfaCredentialsRequired(){return this.isMfaDeleteEnabled!==this.isMfaDeleteAlreadyEnabled||this.isMfaDeleteAlreadyEnabled&&this.isVersioningEnabled!==this.isVersioningAlreadyEnabled}setMfaDeleteValidators(){const e=this.bucketForm.get("mfa-token-serial"),t=this.bucketForm.get("mfa-token-pin");this.areMfaCredentialsRequired()?(e.setValidators(i.A.required),t.setValidators(i.A.required)):(e.setValidators(null),t.setValidators(null)),e.updateValueAndValidity(),t.updateValueAndValidity()}getVersioningStatus(){return this.isVersioningEnabled?N.ENABLED:N.SUSPENDED}getMfaDeleteStatus(){return this.isMfaDeleteEnabled?q.ENABLED:q.DISABLED}}return e.\u0275fac=function(t){return new(t||e)(_.Mb(s.a),_.Mb(s.e),_.Mb(I.a),_.Mb(R),_.Mb(k),_.Mb(v.a),_.Mb($.a),_.Mb(n.b))},e.\u0275cmp=_.Gb({type:e,selectors:[["cd-rgw-bucket-form"]],features:[_.vb],decls:1,vars:1,consts:function(){return[["class","cd-col-form",4,"cdFormLoading"],[1,"cd-col-form"],["name","bucketForm","novalidate","",3,"formGroup"],["frm","ngForm"],[1,"card"],[1,"card-header"],"" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",[1,"card-body"],["class","form-group row",4,"ngIf"],[1,"form-group","row"],["for","bid",1,"cd-col-form-label",3,"ngClass"],"Name",[1,"cd-col-form-input"],["id","bid","name","bid","type","text","formControlName","bid",1,"form-control",3,"readonly","autofocus",6,"placeholder"],["placeholder","Name..."],["class","invalid-feedback",4,"ngIf"],["for","owner",1,"cd-col-form-label","required"],"Owner",["id","owner","name","owner","formControlName","owner",1,"form-control","custom-select",3,"autofocus"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["for","placement-target",1,"cd-col-form-label",3,"ngClass"],"Placement target",["placementTargetSelect",""],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"cd-header"],"Locking",[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","lock_enabled","formControlName","lock_enabled","type","checkbox",1,"custom-control-input"],["for","lock_enabled",1,"custom-control-label"],"Enabled","Enables locking for the objects in the bucket. Locking can only be enabled while creating a bucket.",[1,"card-footer"],["wrappingClass","text-right",3,"form","submitText","submitActionEvent"],["for","id",1,"cd-col-form-label"],"Id",["id","id","name","id","type","text","formControlName","id","readonly","",1,"form-control"],[1,"invalid-feedback"],"This field is required.","The value is not valid.","The chosen name is already in use.",[3,"ngValue"],"Loading...","-- Select a user --",[3,"value"],"This field is required.",["id","placement-target","name","placement-target","formControlName","placement-target",1,"form-control","custom-select"],"Loading...","-- Select a placement target --","This field is required.",["id","placement-target","name","placement-target","formControlName","placement-target","type","text","readonly","",1,"form-control"],"Versioning",["type","checkbox","id","versioning","name","versioning","formControlName","versioning",1,"custom-control-input",3,"change"],["for","versioning",1,"custom-control-label"],"Enabled","Enables versioning for the objects in the bucket.","Multi-Factor Authentication",["type","checkbox","id","mfa-delete","name","mfa-delete","formControlName","mfa-delete",1,"custom-control-input",3,"change"],["for","mfa-delete",1,"custom-control-label"],"Delete enabled","Enables MFA (multi-factor authentication) Delete, which requires additional authentication for changing the bucket versioning state.",["for","mfa-token-serial",1,"cd-col-form-label"],"Token Serial Number",["type","text","id","mfa-token-serial","name","mfa-token-serial","formControlName","mfa-token-serial",1,"form-control"],"This field is required.",["for","mfa-token-pin",1,"cd-col-form-label"],"Token PIN",["type","text","id","mfa-token-pin","name","mfa-token-pin","formControlName","mfa-token-pin",1,"form-control"],"This field is required.",["for","lock_mode",1,"cd-col-form-label"],"Mode",["formControlName","lock_mode","name","lock_mode","id","lock_mode",1,"form-control","custom-select"],["value","COMPLIANCE"],"Compliance",["value","GOVERNANCE"],"Governance",["for","lock_retention_period_days",1,"cd-col-form-label"],"Days","The number of days that you want to specify for the default retention period that will be applied to new objects placed in this bucket.",["type","number","id","lock_retention_period_days","formControlName","lock_retention_period_days","min","0",1,"form-control"],"The entered value must be a positive integer.","Retention period requires either Days or Years.",["for","lock_retention_period_years",1,"cd-col-form-label"],"Years","The number of years that you want to specify for the default retention period that will be applied to new objects placed in this bucket.",["type","number","id","lock_retention_period_years","formControlName","lock_retention_period_years","min","0",1,"form-control"],"The entered value must be a positive integer.","Retention period requires either Days or Years."]},template:function(e,t){1&e&&_.Mc(0,pe,56,37,"div",0),2&e&&_.pc("cdFormLoading",t.loading)},directives:[T.a,i.C,i.r,E.a,i.k,a.r,A.a,a.p,W.a,i.d,C.a,i.q,i.i,F.a,i.z,a.q,i.b,O.a,D.a,i.u,i.B,i.v],pipes:[a.A,j.a],styles:[""]}),e})();var he=c("HDdC"),Se=c("+fVR"),ye=c("e2NH"),_e=c("0+/T"),Re=c("uIqm"),ke=c("vCyI"),ve=c("Fgil"),we=c("o4+5"),ze=c("aexS"),xe=c("JK/P"),Ie=c("EgGo"),Me=c("S7zO"),$e=c("a0VL"),qe=c("iExv");function Ne(e,t){1&e&&(_.Sb(0,"td"),_.Wb(1,24),_.Rb())}function Te(e,t){if(1&e&&(_.Sb(0,"td"),_.Oc(1),_.jc(2,"dimless"),_.Rb()),2&e){const e=_.ic(3);_.yb(1),_.Qc(" ",_.kc(2,1,e.selection.bucket_quota.max_size)," ")}}function Ee(e,t){1&e&&(_.Sb(0,"td"),_.Wb(1,25),_.Rb())}function Ae(e,t){if(1&e&&(_.Sb(0,"td"),_.Oc(1),_.Rb()),2&e){const e=_.ic(3);_.yb(1),_.Qc(" ",e.selection.bucket_quota.max_objects," ")}}function We(e,t){if(1&e&&(_.Sb(0,"div"),_.Sb(1,"legend"),_.Wb(2,20),_.Rb(),_.Sb(3,"table",1),_.Sb(4,"tbody"),_.Sb(5,"tr"),_.Sb(6,"td",2),_.Wb(7,21),_.Rb(),_.Sb(8,"td",4),_.Oc(9),_.jc(10,"booleanText"),_.Rb(),_.Rb(),_.Sb(11,"tr"),_.Sb(12,"td",5),_.Wb(13,22),_.Rb(),_.Mc(14,Ne,2,0,"td",0),_.Mc(15,Te,3,3,"td",0),_.Rb(),_.Sb(16,"tr"),_.Sb(17,"td",5),_.Wb(18,23),_.Rb(),_.Mc(19,Ee,2,0,"td",0),_.Mc(20,Ae,2,1,"td",0),_.Rb(),_.Rb(),_.Rb(),_.Rb()),2&e){const e=_.ic(2);_.yb(9),_.Pc(_.kc(10,5,e.selection.bucket_quota.enabled)),_.yb(5),_.pc("ngIf",e.selection.bucket_quota.max_size<=-1),_.yb(1),_.pc("ngIf",e.selection.bucket_quota.max_size>-1),_.yb(4),_.pc("ngIf",e.selection.bucket_quota.max_objects<=-1),_.yb(1),_.pc("ngIf",e.selection.bucket_quota.max_objects>-1)}}function Ce(e,t){if(1&e&&(_.Qb(0),_.Sb(1,"tr"),_.Sb(2,"td",5),_.Wb(3,26),_.Rb(),_.Sb(4,"td"),_.Oc(5),_.Rb(),_.Rb(),_.Sb(6,"tr"),_.Sb(7,"td",5),_.Wb(8,27),_.Rb(),_.Sb(9,"td"),_.Oc(10),_.Rb(),_.Rb(),_.Sb(11,"tr"),_.Sb(12,"td",5),_.Wb(13,28),_.Rb(),_.Sb(14,"td"),_.Oc(15),_.Rb(),_.Rb(),_.Pb()),2&e){const e=_.ic(2);_.yb(5),_.Pc(e.selection.lock_mode),_.yb(5),_.Pc(e.selection.lock_retention_period_days),_.yb(5),_.Pc(e.selection.lock_retention_period_years)}}function Fe(e,t){if(1&e&&(_.Qb(0),_.Sb(1,"table",1),_.Sb(2,"tbody"),_.Sb(3,"tr"),_.Sb(4,"td",2),_.Wb(5,3),_.Rb(),_.Sb(6,"td",4),_.Oc(7),_.Rb(),_.Rb(),_.Sb(8,"tr"),_.Sb(9,"td",5),_.Wb(10,6),_.Rb(),_.Sb(11,"td"),_.Oc(12),_.Rb(),_.Rb(),_.Sb(13,"tr"),_.Sb(14,"td",5),_.Wb(15,7),_.Rb(),_.Sb(16,"td"),_.Oc(17),_.Rb(),_.Rb(),_.Sb(18,"tr"),_.Sb(19,"td",5),_.Wb(20,8),_.Rb(),_.Sb(21,"td"),_.Oc(22),_.Rb(),_.Rb(),_.Sb(23,"tr"),_.Sb(24,"td",5),_.Wb(25,9),_.Rb(),_.Sb(26,"td"),_.Oc(27),_.Rb(),_.Rb(),_.Sb(28,"tr"),_.Sb(29,"td",5),_.Wb(30,10),_.Rb(),_.Sb(31,"td"),_.Oc(32),_.Rb(),_.Rb(),_.Sb(33,"tr"),_.Sb(34,"td",5),_.Wb(35,11),_.Rb(),_.Sb(36,"td"),_.Oc(37),_.Rb(),_.Rb(),_.Sb(38,"tr"),_.Sb(39,"td",5),_.Wb(40,12),_.Rb(),_.Sb(41,"td"),_.Oc(42),_.Rb(),_.Rb(),_.Sb(43,"tr"),_.Sb(44,"td",5),_.Wb(45,13),_.Rb(),_.Sb(46,"td"),_.Oc(47),_.Rb(),_.Rb(),_.Sb(48,"tr"),_.Sb(49,"td",5),_.Wb(50,14),_.Rb(),_.Sb(51,"td"),_.Oc(52),_.jc(53,"cdDate"),_.Rb(),_.Rb(),_.Sb(54,"tr"),_.Sb(55,"td",5),_.Wb(56,15),_.Rb(),_.Sb(57,"td"),_.Oc(58),_.Rb(),_.Rb(),_.Sb(59,"tr"),_.Sb(60,"td",5),_.Wb(61,16),_.Rb(),_.Sb(62,"td"),_.Oc(63),_.Rb(),_.Rb(),_.Sb(64,"tr"),_.Sb(65,"td",5),_.Wb(66,17),_.Rb(),_.Sb(67,"td"),_.Oc(68),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Mc(69,We,21,7,"div",0),_.Sb(70,"legend"),_.Wb(71,18),_.Rb(),_.Sb(72,"table",1),_.Sb(73,"tbody"),_.Sb(74,"tr"),_.Sb(75,"td",2),_.Wb(76,19),_.Rb(),_.Sb(77,"td",4),_.Oc(78),_.jc(79,"booleanText"),_.Rb(),_.Rb(),_.Mc(80,Ce,16,3,"ng-container",0),_.Rb(),_.Rb(),_.Pb()),2&e){const e=_.ic();_.yb(7),_.Pc(e.selection.bid),_.yb(5),_.Pc(e.selection.id),_.yb(5),_.Pc(e.selection.owner),_.yb(5),_.Pc(e.selection.index_type),_.yb(5),_.Pc(e.selection.placement_rule),_.yb(5),_.Pc(e.selection.marker),_.yb(5),_.Pc(e.selection.max_marker),_.yb(5),_.Pc(e.selection.ver),_.yb(5),_.Pc(e.selection.master_ver),_.yb(5),_.Pc(_.kc(53,16,e.selection.mtime)),_.yb(6),_.Pc(e.selection.zonegroup),_.yb(5),_.Pc(e.selection.versioning),_.yb(5),_.Pc(e.selection.mfa_delete),_.yb(1),_.pc("ngIf",e.selection.bucket_quota),_.yb(9),_.Pc(_.kc(79,18,e.selection.lock_enabled)),_.yb(2),_.pc("ngIf",e.selection.lock_enabled)}}let Oe=(()=>{class e{constructor(e){this.rgwBucketService=e}ngOnChanges(){this.selection&&this.rgwBucketService.get(this.selection.bid).subscribe(e=>{this.selection=e})}}return e.\u0275fac=function(t){return new(t||e)(_.Mb(R))},e.\u0275cmp=_.Gb({type:e,selectors:[["cd-rgw-bucket-details"]],inputs:{selection:"selection"},features:[_.wb],decls:1,vars:1,consts:function(){return[[4,"ngIf"],[1,"table","table-striped","table-bordered"],[1,"bold","w-25"],"Name",[1,"w-75"],[1,"bold"],"ID","Owner","Index type","Placement rule","Marker","Maximum marker","Version","Master version","Modification time","Zonegroup","Versioning","MFA Delete","Locking","Enabled","Bucket quota","Enabled","Maximum size","Maximum objects","Unlimited","Unlimited","Mode","Days","Years"]},template:function(e,t){1&e&&_.Mc(0,Fe,81,20,"ng-container",0),2&e&&_.pc("ngIf",t.selection)},directives:[a.r],pipes:[$e.a,qe.a,we.a],styles:["table[_ngcontent-%COMP%]{table-layout:fixed}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{word-wrap:break-word}"]}),e})();var De=c("GgAd");const je=["bucketSizeTpl"],Pe=["bucketObjectTpl"];function Ve(e,t){if(1&e&&_.Nb(0,"cd-usage-bar",8),2&e){const e=_.ic().row;_.pc("total",e.bucket_quota.max_size)("used",e.bucket_size)}}function Be(e,t){1&e&&_.Wb(0,9)}function Le(e,t){if(1&e&&(_.Mc(0,Ve,1,2,"cd-usage-bar",6),_.Mc(1,Be,1,0,"ng-template",null,7,_.Nc)),2&e){const e=t.row,c=_.Ac(2);_.pc("ngIf",e.bucket_quota.max_size>0&&e.bucket_quota.enabled)("ngIfElse",c)}}function Ue(e,t){if(1&e&&_.Nb(0,"cd-usage-bar",12),2&e){const e=_.ic().row;_.pc("total",e.bucket_quota.max_objects)("used",e.num_objects)("isBinary",!1)}}function Ge(e,t){1&e&&_.Wb(0,13)}function Ke(e,t){if(1&e&&(_.Mc(0,Ue,1,3,"cd-usage-bar",10),_.Mc(1,Ge,1,0,"ng-template",null,11,_.Nc)),2&e){const e=t.row,c=_.Ac(2);_.pc("ngIf",e.bucket_quota.max_objects>0&&e.bucket_quota.enabled)("ngIfElse",c)}}let Qe=(()=>{class e extends Se.a{constructor(e,t,c,a,i,s,o,b){super(),this.authStorageService=e,this.dimlessBinaryPipe=t,this.dimlessPipe=c,this.rgwBucketService=a,this.modalService=i,this.urlBuilder=s,this.actionLabels=o,this.ngZone=b,this.columns=[],this.buckets=[],this.selection=new ke.a,this.tableStatus=new ye.a}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:"Name",prop:"bid",flexGrow:2},{name:"Owner",prop:"owner",flexGrow:2.5},{name:"Used Capacity",prop:"bucket_size",flexGrow:.6,pipe:this.dimlessBinaryPipe},{name:"Capacity Limit %",prop:"size_usage",cellTemplate:this.bucketSizeTpl,flexGrow:.8},{name:"Objects",prop:"num_objects",flexGrow:.6,pipe:this.dimlessPipe},{name:"Object Limit %",prop:"object_usage",cellTemplate:this.bucketObjectTpl,flexGrow:.8}];const e=()=>this.selection.first()&&""+encodeURIComponent(this.selection.first().bid);this.tableActions=[{permission:"create",icon:w.a.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE,canBePrimary:e=>!e.hasSelection},{permission:"update",icon:w.a.edit,routerLink:()=>this.urlBuilder.getEdit(e()),name:this.actionLabels.EDIT},{permission:"delete",icon:w.a.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:e=>e.hasMultiSelection}],this.timeConditionReached()}transformBucketData(){d.a.forEach(this.buckets,e=>{const t=e.bucket_quota.max_size,c=e.bucket_quota.max_objects;let a=0,i=0;d.a.forEach(e.usage,e=>{a+=e.size_actual,i+=e.num_objects}),e.bucket_size=a,e.num_objects=i,e.size_usage=t>0?a/t:void 0,e.object_usage=c>0?i/c:void 0})}timeConditionReached(){clearTimeout(this.staleTimeout),this.ngZone.runOutsideAngular(()=>{this.staleTimeout=window.setTimeout(()=>{this.ngZone.run(()=>{this.tableStatus=new ye.a("warning","The bucket list data might be stale. If needed, you can manually reload it.")})},1e4)})}getBucketList(e){this.tableStatus=new ye.a,this.timeConditionReached(),this.rgwBucketService.list().subscribe(e=>{this.buckets=e,this.transformBucketData()},()=>{e.error()})}updateSelection(e){this.selection=e}deleteAction(){this.modalService.show(_e.a,{itemDescription:this.selection.hasSingleSelection?"bucket":"buckets",itemNames:this.selection.selected.map(e=>e.bid),submitActionObservable:()=>new he.a(e=>{Object(f.a)(this.selection.selected.map(e=>this.rgwBucketService.delete(e.bid))).subscribe({error:t=>{e.error(t),this.table.refreshBtn()},complete:()=>{e.complete(),this.table.refreshBtn()}})})})}}return e.\u0275fac=function(t){return new(t||e)(_.Mb(ze.a),_.Mb(ve.a),_.Mb(we.a),_.Mb(R),_.Mb(xe.a),_.Mb(Ie.a),_.Mb(n.b),_.Mb(_.A))},e.\u0275cmp=_.Gb({type:e,selectors:[["cd-rgw-bucket-list"]],viewQuery:function(e,t){var c;1&e&&(_.Jc(Re.a,!0),_.Jc(je,!0),_.Jc(Pe,!0)),2&e&&(_.zc(c=_.hc())&&(t.table=c.first),_.zc(c=_.hc())&&(t.bucketSizeTpl=c.first),_.zc(c=_.hc())&&(t.bucketObjectTpl=c.first))},features:[_.xb([{provide:Ie.a,useValue:new Ie.a("rgw/bucket")}]),_.vb],decls:8,vars:9,consts:function(){return[["columnMode","flex","selectionType","multiClick","identifier","bid",3,"autoReload","data","columns","hasDetails","status","setExpandedRow","updateSelection","fetchData"],["table",""],[1,"table-actions",3,"permission","selection","tableActions"],["cdTableDetail","",3,"selection"],["bucketSizeTpl",""],["bucketObjectTpl",""],[3,"total","used",4,"ngIf","ngIfElse"],["noSizeQuota",""],[3,"total","used"],"No Limit",[3,"total","used","isBinary",4,"ngIf","ngIfElse"],["noObjectQuota",""],[3,"total","used","isBinary"],"No Limit"]},template:function(e,t){1&e&&(_.Sb(0,"cd-table",0,1),_.gc("setExpandedRow",(function(e){return t.setExpandedRow(e)}))("updateSelection",(function(e){return t.updateSelection(e)}))("fetchData",(function(e){return t.getBucketList(e)})),_.Nb(2,"cd-table-actions",2),_.Nb(3,"cd-rgw-bucket-details",3),_.Rb(),_.Mc(4,Le,3,2,"ng-template",null,4,_.Nc),_.Mc(6,Ke,3,2,"ng-template",null,5,_.Nc)),2&e&&(_.pc("autoReload",!1)("data",t.buckets)("columns",t.columns)("hasDetails",!0)("status",t.tableStatus),_.yb(2),_.pc("permission",t.permission)("selection",t.selection)("tableActions",t.tableActions),_.yb(1),_.pc("selection",t.expandedRow))},directives:[Re.a,Me.a,Oe,a.r,De.a],styles:[""]}),e})();var Ze=c("IzEk"),Ye=c("85J/"),Je=c("JP8w"),Xe=c("FSuO"),He=c("b5OY"),et=c("insk");function tt(e,t){if(1&e){const e=_.Tb();_.Sb(0,"cd-table-key-value",11),_.gc("fetchData",(function(){return _.Dc(e),_.ic(2).getMetaData()})),_.Rb()}if(2&e){const e=_.ic(2);_.pc("data",e.metadata)}}function ct(e,t){if(1&e&&_.Nb(0,"cd-table-performance-counter",12),2&e){const e=_.ic(2);_.pc("serviceId",e.serviceId)}}function at(e,t){if(1&e&&_.Nb(0,"cd-grafana",15),2&e){const e=_.ic(3);_.pc("grafanaPath","rgw-instance-detail?var-rgw_servers=rgw."+e.serviceId)}}function it(e,t){1&e&&(_.Sb(0,"li",13),_.Sb(1,"a",4),_.Wb(2,14),_.Rb(),_.Mc(3,at,1,1,"ng-template",6),_.Rb())}function st(e,t){if(1&e&&(_.Qb(0),_.Sb(1,"ul",1,2),_.Sb(3,"li",3),_.Sb(4,"a",4),_.Wb(5,5),_.Rb(),_.Mc(6,tt,1,1,"ng-template",6),_.Rb(),_.Sb(7,"li",7),_.Sb(8,"a",4),_.Wb(9,8),_.Rb(),_.Mc(10,ct,1,1,"ng-template",6),_.Rb(),_.Mc(11,it,4,0,"li",9),_.Rb(),_.Nb(12,"div",10),_.Pb()),2&e){const e=_.Ac(2),t=_.ic();_.yb(11),_.pc("ngIf",t.grafanaPermission.read),_.yb(1),_.pc("ngbNavOutlet",e)}}let ot=(()=>{class e{constructor(e,t){this.rgwDaemonService=e,this.authStorageService=t,this.serviceId="",this.grafanaPermission=this.authStorageService.getPermissions().grafana}ngOnChanges(){this.selection&&(this.serviceId=this.selection.id)}getMetaData(){d.a.isEmpty(this.serviceId)||this.rgwDaemonService.get(this.serviceId).subscribe(e=>{this.metadata=e.rgw_metadata})}}return e.\u0275fac=function(t){return new(t||e)(_.Mb(S.a),_.Mb(ze.a))},e.\u0275cmp=_.Gb({type:e,selectors:[["cd-rgw-daemon-details"]],inputs:{selection:"selection"},features:[_.wb],decls:1,vars:1,consts:function(){return[[4,"ngIf"],["ngbNav","","cdStatefulTab","rgw-daemon-details",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem","details"],["ngbNavLink",""],"Details",["ngbNavContent",""],["ngbNavItem","performance-counters"],"Performance Counters",["ngbNavItem","performance-details",4,"ngIf"],[3,"ngbNavOutlet"],[3,"data","fetchData"],["serviceType","rgw",3,"serviceId"],["ngbNavItem","performance-details"],"Performance Details",["uid","x5ARzZtmk","grafanaStyle","one",3,"grafanaPath"]]},template:function(e,t){1&e&&_.Mc(0,st,13,2,"ng-container",0),2&e&&_.pc("ngIf",t.selection)},directives:[a.r,o.p,Je.a,o.r,o.s,o.q,o.u,Xe.a,He.a,et.a],styles:[""]}),e})();function bt(e,t){if(1&e){const e=_.Tb();_.Sb(0,"cd-table",8),_.gc("setExpandedRow",(function(t){return _.Dc(e),_.ic().setExpandedRow(t)}))("fetchData",(function(t){return _.Dc(e),_.ic().getDaemonList(t)})),_.Nb(1,"cd-rgw-daemon-details",9),_.Rb()}if(2&e){const e=_.ic();_.pc("data",e.daemons)("columns",e.columns)("hasDetails",!0),_.yb(1),_.pc("selection",e.expandedRow)}}function nt(e,t){1&e&&_.Nb(0,"cd-grafana",11),2&e&&_.pc("grafanaPath","rgw-overview?")}function rt(e,t){1&e&&(_.Sb(0,"li",2),_.Sb(1,"a",3),_.Wb(2,10),_.Rb(),_.Mc(3,nt,1,1,"ng-template",5),_.Rb())}function lt(e,t){1&e&&_.Nb(0,"cd-grafana",13),2&e&&_.pc("grafanaPath","radosgw-sync-overview?")}function ut(e,t){1&e&&(_.Sb(0,"li",2),_.Sb(1,"a",3),_.Wb(2,12),_.Rb(),_.Mc(3,lt,1,1,"ng-template",5),_.Rb())}let dt=(()=>{class e extends Se.a{constructor(e,t,c,a){super(),this.rgwDaemonService=e,this.authStorageService=t,this.cephShortVersionPipe=c,this.rgwSiteService=a,this.columns=[],this.daemons=[]}ngOnInit(){this.grafanaPermission=this.authStorageService.getPermissions().grafana,this.columns=[{name:"ID",prop:"id",flexGrow:2},{name:"Hostname",prop:"server_hostname",flexGrow:2},{name:"Zone Group",prop:"zonegroup_name",flexGrow:2},{name:"Zone",prop:"zone_name",flexGrow:2},{name:"Version",prop:"version",flexGrow:1,pipe:this.cephShortVersionPipe}],this.rgwSiteService.get("realms").subscribe(e=>this.isMultiSite=e.length>0)}getDaemonList(e){this.rgwDaemonService.daemons$.pipe(Object(Ze.a)(1)).subscribe(e=>{this.daemons=e},()=>{e.error()})}}return e.\u0275fac=function(t){return new(t||e)(_.Mb(S.a),_.Mb(ze.a),_.Mb(Ye.a),_.Mb(k))},e.\u0275cmp=_.Gb({type:e,selectors:[["cd-rgw-daemon-list"]],features:[_.vb],decls:9,vars:3,consts:function(){return[["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],"Daemons List",["ngbNavContent",""],["ngbNavItem","",4,"ngIf"],[3,"ngbNavOutlet"],["columnMode","flex",3,"data","columns","hasDetails","setExpandedRow","fetchData"],["cdTableDetail","",3,"selection"],"Overall Performance",["uid","WAkugZpiz","grafanaStyle","two",3,"grafanaPath"],"Sync Performance",["uid","rgw-sync-overview","grafanaStyle","two",3,"grafanaPath"]]},template:function(e,t){if(1&e&&(_.Sb(0,"ul",0,1),_.Sb(2,"li",2),_.Sb(3,"a",3),_.Wb(4,4),_.Rb(),_.Mc(5,bt,2,4,"ng-template",5),_.Rb(),_.Mc(6,rt,4,0,"li",6),_.Mc(7,ut,4,0,"li",6),_.Rb(),_.Nb(8,"div",7)),2&e){const e=_.Ac(1);_.yb(6),_.pc("ngIf",t.grafanaPermission.read),_.yb(1),_.pc("ngIf",t.grafanaPermission.read&&t.isMultiSite),_.yb(1),_.pc("ngbNavOutlet",e)}},directives:[o.p,o.r,o.s,o.q,a.r,o.u,Re.a,ot,et.a],styles:[""]}),e})();var ft=c("GyhO"),mt=c("aXbf"),pt=function(e){return e.USERS="users",e.BUCKETS="buckets",e.METADATA="metadata",e.USAGE="usage",e.ZONE="zone",e}({});let gt=(()=>{class e{static getAll(){return Object.values(e.capabilities)}}return e.capabilities=pt,e})();var ht=c("ajRT");function St(e,t){1&e&&_.Nb(0,"input",22),2&e&&_.pc("readonly",!0)}function yt(e,t){1&e&&(_.Sb(0,"option",17),_.Wb(1,25),_.Rb()),2&e&&_.pc("ngValue",null)}function _t(e,t){if(1&e&&(_.Sb(0,"option",26),_.Oc(1),_.Rb()),2&e){const e=t.$implicit;_.pc("value",e),_.yb(1),_.Pc(e)}}function Rt(e,t){if(1&e&&(_.Sb(0,"select",23),_.Mc(1,yt,2,1,"option",24),_.Mc(2,_t,2,2,"option",19),_.Rb()),2&e){const e=_.ic();_.yb(1),_.pc("ngIf",null!==e.types),_.yb(1),_.pc("ngForOf",e.types)}}function kt(e,t){1&e&&(_.Sb(0,"span",27),_.Wb(1,28),_.Rb())}function vt(e,t){if(1&e&&(_.Sb(0,"option",26),_.Oc(1),_.Rb()),2&e){const e=t.$implicit;_.pc("value",e),_.yb(1),_.Qc(" ",e," ")}}function wt(e,t){1&e&&(_.Sb(0,"span",27),_.Wb(1,29),_.Rb())}const zt=function(e){return{required:e}},xt=function(){return["read","write","*"]};let It=(()=>{class e{constructor(e,t,c){this.formBuilder=e,this.activeModal=t,this.actionLabels=c,this.submitAction=new _.o,this.editing=!0,this.types=[],this.resource="capability",this.createForm()}createForm(){this.formGroup=this.formBuilder.group({type:[null,[i.A.required]],perm:[null,[i.A.required]]})}setEditing(e=!0){this.editing=e,this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.ADD}setValues(e,t){this.formGroup.setValue({type:e,perm:t})}setCapabilities(e){const t=[];e.forEach(e=>{t.push(e.type)}),this.types=[],gt.getAll().forEach(e=>{-1===d.a.indexOf(t,e)&&this.types.push(e)})}onSubmit(){this.submitAction.emit(this.formGroup.value),this.activeModal.close()}}return e.\u0275fac=function(t){return new(t||e)(_.Mb(I.a),_.Mb(o.a),_.Mb(n.b))},e.\u0275cmp=_.Gb({type:e,selectors:[["cd-rgw-user-capability-modal"]],outputs:{submitAction:"submitAction"},decls:29,vars:24,consts:function(){return[[3,"modalRef"],[1,"modal-title"],"" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",[1,"modal-content"],["novalidate","",3,"formGroup"],["frm","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","type",1,"cd-col-form-label",3,"ngClass"],"Type",[1,"cd-col-form-input"],["id","type","class","form-control","type","text","formControlName","type",3,"readonly",4,"ngIf"],["id","type","class","form-control custom-select","formControlName","type","autofocus","",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["for","perm",1,"cd-col-form-label","required"],"Permission",["id","perm","formControlName","perm",1,"form-control","custom-select"],[3,"ngValue"],"-- Select a permission --",[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],["id","type","type","text","formControlName","type",1,"form-control",3,"readonly"],["id","type","formControlName","type","autofocus","",1,"form-control","custom-select"],[3,"ngValue",4,"ngIf"],"-- Select a type --",[3,"value"],[1,"invalid-feedback"],"This field is required.","This field is required."]},template:function(e,t){if(1&e&&(_.Sb(0,"cd-modal",0),_.Qb(1,1),_.Wb(2,2),_.jc(3,"titlecase"),_.jc(4,"upperFirst"),_.Pb(),_.Qb(5,3),_.Sb(6,"form",4,5),_.Sb(8,"div",6),_.Sb(9,"div",7),_.Sb(10,"label",8),_.Wb(11,9),_.Rb(),_.Sb(12,"div",10),_.Mc(13,St,1,1,"input",11),_.Mc(14,Rt,3,2,"select",12),_.Mc(15,kt,2,0,"span",13),_.Rb(),_.Rb(),_.Sb(16,"div",7),_.Sb(17,"label",14),_.Wb(18,15),_.Rb(),_.Sb(19,"div",10),_.Sb(20,"select",16),_.Sb(21,"option",17),_.Wb(22,18),_.Rb(),_.Mc(23,vt,2,2,"option",19),_.Rb(),_.Mc(24,wt,2,0,"span",13),_.Rb(),_.Rb(),_.Rb(),_.Sb(25,"div",20),_.Sb(26,"cd-form-button-panel",21),_.gc("submitActionEvent",(function(){return t.onSubmit()})),_.jc(27,"titlecase"),_.jc(28,"upperFirst"),_.Rb(),_.Rb(),_.Rb(),_.Pb(),_.Rb()),2&e){const e=_.Ac(7);_.pc("modalRef",t.activeModal),_.yb(4),_.ac(_.kc(3,13,t.action))(_.kc(4,15,t.resource)),_.Xb(2),_.yb(2),_.pc("formGroup",t.formGroup),_.yb(4),_.pc("ngClass",_.uc(21,zt,!t.editing)),_.yb(3),_.pc("ngIf",t.editing),_.yb(1),_.pc("ngIf",!t.editing),_.yb(1),_.pc("ngIf",t.formGroup.showError("type",e,"required")),_.yb(6),_.pc("ngValue",null),_.yb(2),_.pc("ngForOf",_.tc(23,xt)),_.yb(1),_.pc("ngIf",t.formGroup.showError("perm",e,"required")),_.yb(2),_.pc("form",t.formGroup)("submitText",_.kc(27,17,t.action)+" "+_.kc(28,19,t.resource))}},directives:[ht.a,i.C,i.r,E.a,i.k,A.a,a.p,a.r,W.a,i.z,C.a,i.q,i.i,i.u,i.B,a.q,D.a,i.d,F.a],pipes:[a.A,j.a],styles:[""]}),e})();var Mt=c("D4zM"),$t=c("cEzo");function qt(e,t){1&e&&_.Nb(0,"input",17),2&e&&_.pc("readonly",!0)}function Nt(e,t){1&e&&(_.Sb(0,"option",21),_.Wb(1,22),_.Rb()),2&e&&_.pc("ngValue",null)}function Tt(e,t){if(1&e&&(_.Sb(0,"option",23),_.Oc(1),_.Rb()),2&e){const e=t.$implicit;_.pc("value",e),_.yb(1),_.Pc(e)}}function Et(e,t){if(1&e&&(_.Sb(0,"select",18),_.Mc(1,Nt,2,1,"option",19),_.Mc(2,Tt,2,2,"option",20),_.Rb()),2&e){const e=_.ic();_.yb(1),_.pc("ngIf",null!==e.userCandidates),_.yb(1),_.pc("ngForOf",e.userCandidates)}}function At(e,t){1&e&&(_.Sb(0,"span",24),_.Wb(1,25),_.Rb())}function Wt(e,t){1&e&&(_.Sb(0,"div",7),_.Sb(1,"div",26),_.Sb(2,"div",27),_.Nb(3,"input",28),_.Sb(4,"label",29),_.Wb(5,30),_.Rb(),_.Rb(),_.Rb(),_.Rb())}function Ct(e,t){1&e&&(_.Sb(0,"span",24),_.Wb(1,38),_.Rb())}const Ft=function(e){return{required:e}};function Ot(e,t){if(1&e&&(_.Sb(0,"div",7),_.Sb(1,"label",31),_.Wb(2,32),_.Rb(),_.Sb(3,"div",10),_.Sb(4,"div",33),_.Nb(5,"input",34),_.Sb(6,"span",35),_.Nb(7,"button",36),_.Nb(8,"cd-copy-2-clipboard-button",37),_.Rb(),_.Rb(),_.Mc(9,Ct,2,0,"span",13),_.Rb(),_.Rb()),2&e){const e=_.ic(),t=_.Ac(7);_.yb(1),_.pc("ngClass",_.uc(3,Ft,!e.viewing)),_.yb(4),_.pc("readonly",e.viewing),_.yb(4),_.pc("ngIf",e.formGroup.showError("access_key",t,"required"))}}function Dt(e,t){1&e&&(_.Sb(0,"span",24),_.Wb(1,44),_.Rb())}function jt(e,t){if(1&e&&(_.Sb(0,"div",7),_.Sb(1,"label",39),_.Wb(2,40),_.Rb(),_.Sb(3,"div",10),_.Sb(4,"div",33),_.Nb(5,"input",41),_.Sb(6,"span",35),_.Nb(7,"button",42),_.Nb(8,"cd-copy-2-clipboard-button",43),_.Rb(),_.Rb(),_.Mc(9,Dt,2,0,"span",13),_.Rb(),_.Rb()),2&e){const e=_.ic(),t=_.Ac(7);_.yb(1),_.pc("ngClass",_.uc(3,Ft,!e.viewing)),_.yb(4),_.pc("readonly",e.viewing),_.yb(4),_.pc("ngIf",e.formGroup.showError("secret_key",t,"required"))}}let Pt=(()=>{class e{constructor(e,t,c){this.formBuilder=e,this.activeModal=t,this.actionLabels=c,this.submitAction=new _.o,this.viewing=!0,this.userCandidates=[],this.resource="S3 Key",this.createForm()}createForm(){this.formGroup=this.formBuilder.group({user:[null,[i.A.required]],generate_key:[!0],access_key:[null,[M.a.requiredIf({generate_key:!1})]],secret_key:[null,[M.a.requiredIf({generate_key:!1})]]})}setViewing(e=!0){this.viewing=e,this.action=this.viewing?this.actionLabels.SHOW:this.actionLabels.CREATE}setValues(e,t,c){this.formGroup.setValue({user:e,generate_key:d.a.isEmpty(t),access_key:t,secret_key:c})}setUserCandidates(e){this.userCandidates=e}onSubmit(){this.submitAction.emit(this.formGroup.value),this.activeModal.close()}}return e.\u0275fac=function(t){return new(t||e)(_.Mb(I.a),_.Mb(o.a),_.Mb(n.b))},e.\u0275cmp=_.Gb({type:e,selectors:[["cd-rgw-user-s3-key-modal"]],outputs:{submitAction:"submitAction"},decls:23,vars:24,consts:function(){return[[3,"modalRef"],[1,"modal-title"],"" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",[1,"modal-content"],["novalidate","",3,"formGroup"],["frm","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","user",1,"cd-col-form-label",3,"ngClass"],"Username",[1,"cd-col-form-input"],["id","user","class","form-control","type","text","formControlName","user",3,"readonly",4,"ngIf"],["id","user","class","form-control custom-select","formControlName","user","autofocus","",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],[3,"form","submitText","showSubmit","submitActionEvent"],["id","user","type","text","formControlName","user",1,"form-control",3,"readonly"],["id","user","formControlName","user","autofocus","",1,"form-control","custom-select"],[3,"ngValue",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"ngValue"],"-- Select a username --",[3,"value"],[1,"invalid-feedback"],"This field is required.",[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","generate_key","type","checkbox","formControlName","generate_key",1,"custom-control-input"],["for","generate_key",1,"custom-control-label"],"Auto-generate key",["for","access_key",1,"cd-col-form-label",3,"ngClass"],"Access key",[1,"input-group"],["id","access_key","type","password","formControlName","access_key",1,"form-control",3,"readonly"],[1,"input-group-append"],["type","button","cdPasswordButton","access_key",1,"btn","btn-light"],["source","access_key"],"This field is required.",["for","secret_key",1,"cd-col-form-label",3,"ngClass"],"Secret key",["id","secret_key","type","password","formControlName","secret_key",1,"form-control",3,"readonly"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["source","secret_key"],"This field is required."]},template:function(e,t){if(1&e&&(_.Sb(0,"cd-modal",0),_.Qb(1,1),_.Wb(2,2),_.jc(3,"titlecase"),_.jc(4,"upperFirst"),_.Pb(),_.Qb(5,3),_.Sb(6,"form",4,5),_.Sb(8,"div",6),_.Sb(9,"div",7),_.Sb(10,"label",8),_.Wb(11,9),_.Rb(),_.Sb(12,"div",10),_.Mc(13,qt,1,1,"input",11),_.Mc(14,Et,3,2,"select",12),_.Mc(15,At,2,0,"span",13),_.Rb(),_.Rb(),_.Mc(16,Wt,6,0,"div",14),_.Mc(17,Ot,10,5,"div",14),_.Mc(18,jt,10,5,"div",14),_.Rb(),_.Sb(19,"div",15),_.Sb(20,"cd-form-button-panel",16),_.gc("submitActionEvent",(function(){return t.onSubmit()})),_.jc(21,"titlecase"),_.jc(22,"upperFirst"),_.Rb(),_.Rb(),_.Rb(),_.Pb(),_.Rb()),2&e){const e=_.Ac(7);_.pc("modalRef",t.activeModal),_.yb(4),_.ac(_.kc(3,14,t.action))(_.kc(4,16,t.resource)),_.Xb(2),_.yb(2),_.pc("formGroup",t.formGroup),_.yb(4),_.pc("ngClass",_.uc(22,Ft,!t.viewing)),_.yb(3),_.pc("ngIf",t.viewing),_.yb(1),_.pc("ngIf",!t.viewing),_.yb(1),_.pc("ngIf",t.formGroup.showError("user",e,"required")),_.yb(1),_.pc("ngIf",!t.viewing),_.yb(1),_.pc("ngIf",!t.formGroup.getValue("generate_key")),_.yb(1),_.pc("ngIf",!t.formGroup.getValue("generate_key")),_.yb(2),_.pc("form",t.formGroup)("submitText",_.kc(21,18,t.action)+" "+_.kc(22,20,t.resource))("showSubmit",!t.viewing)}},directives:[ht.a,i.C,i.r,E.a,i.k,A.a,a.p,a.r,D.a,W.a,i.d,C.a,i.q,i.i,i.z,F.a,a.q,i.u,i.B,i.b,Mt.a,$t.a],pipes:[a.A,j.a],styles:[""]}),e})();class Vt{}function Bt(e,t){1&e&&(_.Sb(0,"span",29),_.Wb(1,30),_.Rb())}function Lt(e,t){1&e&&(_.Sb(0,"span",29),_.Wb(1,31),_.Rb())}function Ut(e,t){if(1&e&&(_.Sb(0,"option",32),_.Oc(1),_.Rb()),2&e){const e=t.$implicit;_.pc("value",e),_.yb(1),_.Qc(" ",e," ")}}function Gt(e,t){1&e&&(_.Sb(0,"span",29),_.Wb(1,33),_.Rb())}function Kt(e,t){1&e&&(_.Sb(0,"span",29),_.Wb(1,48),_.Rb())}function Qt(e,t){if(1&e&&(_.Sb(0,"div",7),_.Sb(1,"label",41),_.Wb(2,42),_.Rb(),_.Sb(3,"div",10),_.Sb(4,"div",43),_.Nb(5,"input",44),_.Sb(6,"span",45),_.Nb(7,"button",46),_.Nb(8,"cd-copy-2-clipboard-button",47),_.Rb(),_.Rb(),_.Mc(9,Kt,2,0,"span",15),_.Rb(),_.Rb()),2&e){const e=_.ic(2),t=_.Ac(7);_.yb(9),_.pc("ngIf",e.formGroup.showError("secret_key",t,"required"))}}function Zt(e,t){if(1&e&&(_.Sb(0,"fieldset"),_.Sb(1,"legend"),_.Wb(2,34),_.Rb(),_.Sb(3,"div",7),_.Sb(4,"div",35),_.Sb(5,"div",36),_.Nb(6,"input",37),_.Sb(7,"label",38),_.Wb(8,39),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Mc(9,Qt,10,1,"div",40),_.Rb()),2&e){const e=_.ic();_.yb(9),_.pc("ngIf",!e.editing&&!e.formGroup.getValue("generate_secret"))}}const Yt=function(e){return{required:e}},Jt=function(){return["read","write"]};let Xt=(()=>{class e{constructor(e,t,c){this.formBuilder=e,this.bsModalRef=t,this.actionLabels=c,this.submitAction=new _.o,this.editing=!0,this.subusers=[],this.resource="Subuser",this.createForm()}createForm(){this.formGroup=this.formBuilder.group({uid:[null],subuid:[null,[i.A.required,this.subuserValidator()]],perm:[null,[i.A.required]],generate_secret:[!0],secret_key:[null,[M.a.requiredIf({generate_secret:!1})]]})}subuserValidator(){const e=this;return t=>e.editing||Object(M.b)(t.value)?null:e.subusers.some(c=>d.a.isEqual(e.getSubuserName(c.id),t.value))?{subuserIdExists:!0}:null}getSubuserName(e){if(d.a.isEmpty(e))return e;const t=e.match(/([^:]+)(:(.+))?/);return d.a.isUndefined(t[3])?t[1]:t[3]}setEditing(e=!0){this.editing=e,this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE}setValues(e,t="",c=""){this.formGroup.setValue({uid:e,subuid:this.getSubuserName(t),perm:c,generate_secret:!0,secret_key:null})}setSubusers(e){this.subusers=e}onSubmit(){const e=this.formGroup.value,t=new Vt;t.id=`${e.uid}:${e.subuid}`,t.permissions=e.perm,t.generate_secret=e.generate_secret,t.secret_key=e.secret_key,this.submitAction.emit(t),this.bsModalRef.close()}}return e.\u0275fac=function(t){return new(t||e)(_.Mb(I.a),_.Mb(o.a),_.Mb(n.b))},e.\u0275cmp=_.Gb({type:e,selectors:[["cd-rgw-user-subuser-modal"]],outputs:{submitAction:"submitAction"},decls:39,vars:26,consts:function(){return[[3,"modalRef"],[1,"modal-title"],"" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",[1,"modal-content"],["novalidate","",3,"formGroup"],["frm","ngForm"],[1,"modal-body"],[1,"form-group","row"],["for","uid",1,"cd-col-form-label"],"Username",[1,"cd-col-form-input"],["id","uid","type","text","formControlName","uid",1,"form-control",3,"readonly"],["for","subuid",1,"cd-col-form-label",3,"ngClass"],"Subuser",["id","subuid","type","text","formControlName","subuid","autofocus","",1,"form-control",3,"readonly"],["class","invalid-feedback",4,"ngIf"],["for","perm",1,"cd-col-form-label","required"],"Permission",["id","perm","formControlName","perm",1,"form-control","custom-select"],[3,"ngValue"],"-- Select a permission --",[3,"value",4,"ngFor","ngForOf"],["value","read-write"],"read, write",["value","full-control"],"full",[4,"ngIf"],[1,"modal-footer"],[3,"form","submitText","submitActionEvent"],[1,"invalid-feedback"],"This field is required.","The chosen subuser ID is already in use.",[3,"value"],"This field is required.","Swift key",[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","generate_secret","type","checkbox","formControlName","generate_secret",1,"custom-control-input"],["for","generate_secret",1,"custom-control-label"],"Auto-generate secret",["class","form-group row",4,"ngIf"],["for","secret_key",1,"cd-col-form-label","required"],"Secret key",[1,"input-group"],["id","secret_key","type","password","formControlName","secret_key",1,"form-control"],[1,"input-group-append"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["source","secret_key"],"This field is required."]},template:function(e,t){if(1&e&&(_.Sb(0,"cd-modal",0),_.Qb(1,1),_.Wb(2,2),_.jc(3,"titlecase"),_.jc(4,"upperFirst"),_.Pb(),_.Qb(5,3),_.Sb(6,"form",4,5),_.Sb(8,"div",6),_.Sb(9,"div",7),_.Sb(10,"label",8),_.Wb(11,9),_.Rb(),_.Sb(12,"div",10),_.Nb(13,"input",11),_.Rb(),_.Rb(),_.Sb(14,"div",7),_.Sb(15,"label",12),_.Wb(16,13),_.Rb(),_.Sb(17,"div",10),_.Nb(18,"input",14),_.Mc(19,Bt,2,0,"span",15),_.Mc(20,Lt,2,0,"span",15),_.Rb(),_.Rb(),_.Sb(21,"div",7),_.Sb(22,"label",16),_.Wb(23,17),_.Rb(),_.Sb(24,"div",10),_.Sb(25,"select",18),_.Sb(26,"option",19),_.Wb(27,20),_.Rb(),_.Mc(28,Ut,2,2,"option",21),_.Sb(29,"option",22),_.Wb(30,23),_.Rb(),_.Sb(31,"option",24),_.Wb(32,25),_.Rb(),_.Rb(),_.Mc(33,Gt,2,0,"span",15),_.Rb(),_.Rb(),_.Mc(34,Zt,10,1,"fieldset",26),_.Rb(),_.Sb(35,"div",27),_.Sb(36,"cd-form-button-panel",28),_.gc("submitActionEvent",(function(){return t.onSubmit()})),_.jc(37,"titlecase"),_.jc(38,"upperFirst"),_.Rb(),_.Rb(),_.Rb(),_.Pb(),_.Rb()),2&e){const e=_.Ac(7);_.pc("modalRef",t.bsModalRef),_.yb(4),_.ac(_.kc(3,15,t.action))(_.kc(4,17,t.resource)),_.Xb(2),_.yb(2),_.pc("formGroup",t.formGroup),_.yb(7),_.pc("readonly",!0),_.yb(2),_.pc("ngClass",_.uc(23,Yt,!t.editing)),_.yb(3),_.pc("readonly",t.editing),_.yb(1),_.pc("ngIf",t.formGroup.showError("subuid",e,"required")),_.yb(1),_.pc("ngIf",t.formGroup.showError("subuid",e,"subuserIdExists")),_.yb(6),_.pc("ngValue",null),_.yb(2),_.pc("ngForOf",_.tc(25,Jt)),_.yb(5),_.pc("ngIf",t.formGroup.showError("perm",e,"required")),_.yb(1),_.pc("ngIf",!t.editing),_.yb(2),_.pc("form",t.formGroup)("submitText",_.kc(37,19,t.action)+" "+_.kc(38,21,t.resource))}},directives:[ht.a,i.C,i.r,E.a,i.k,A.a,W.a,i.d,C.a,i.q,i.i,a.p,F.a,a.r,i.z,i.u,i.B,a.q,D.a,i.b,Mt.a,$t.a],pipes:[a.A,j.a],styles:[""]}),e})();var Ht=c("Z21x");let ec=(()=>{class e{constructor(e,t){this.activeModal=e,this.actionLabels=t,this.resource="Swift Key",this.action=this.actionLabels.SHOW}setValues(e,t){this.user=e,this.secret_key=t}}return e.\u0275fac=function(t){return new(t||e)(_.Mb(o.a),_.Mb(n.b))},e.\u0275cmp=_.Gb({type:e,selectors:[["cd-rgw-user-swift-key-modal"]],decls:24,vars:11,consts:function(){return[[3,"modalRef"],[1,"modal-title"],"" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + " ",[1,"modal-content"],[1,"modal-body"],["novalidate",""],[1,"form-group","row"],["for","user",1,"cd-col-form-label"],"Username",[1,"cd-col-form-input"],["id","user","name","user","type","text",1,"form-control",3,"readonly","ngModel","ngModelChange"],["for","secret_key",1,"cd-col-form-label"],"Secret key",[1,"input-group"],["id","secret_key","name","secret_key","type","password",1,"form-control",3,"ngModel","readonly","ngModelChange"],[1,"input-group-append"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["source","secret_key"],[1,"modal-footer"],[3,"backAction"]]},template:function(e,t){1&e&&(_.Sb(0,"cd-modal",0),_.Qb(1,1),_.Wb(2,2),_.jc(3,"titlecase"),_.jc(4,"upperFirst"),_.Pb(),_.Qb(5,3),_.Sb(6,"div",4),_.Sb(7,"form",5),_.Sb(8,"div",6),_.Sb(9,"label",7),_.Wb(10,8),_.Rb(),_.Sb(11,"div",9),_.Sb(12,"input",10),_.gc("ngModelChange",(function(e){return t.user=e})),_.Rb(),_.Rb(),_.Rb(),_.Sb(13,"div",6),_.Sb(14,"label",11),_.Wb(15,12),_.Rb(),_.Sb(16,"div",9),_.Sb(17,"div",13),_.Sb(18,"input",14),_.gc("ngModelChange",(function(e){return t.secret_key=e})),_.Rb(),_.Sb(19,"span",15),_.Nb(20,"button",16),_.Nb(21,"cd-copy-2-clipboard-button",17),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Sb(22,"div",18),_.Sb(23,"cd-back-button",19),_.gc("backAction",(function(){return t.activeModal.close()})),_.Rb(),_.Rb(),_.Pb(),_.Rb()),2&e&&(_.pc("modalRef",t.activeModal),_.yb(4),_.ac(_.kc(3,7,t.action))(_.kc(4,9,t.resource)),_.Xb(2),_.yb(8),_.pc("readonly",!0)("ngModel",t.user),_.yb(6),_.pc("ngModel",t.secret_key)("readonly",!0))},directives:[ht.a,i.C,i.r,i.s,A.a,W.a,i.d,C.a,i.q,i.t,Mt.a,$t.a,Ht.a],pipes:[a.A,j.a],styles:[""]}),e})();var tc=c("EmSq");function cc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,50),_.Rb())}function ac(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,51),_.Rb())}function ic(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,52),_.Rb())}function sc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,56),_.Rb())}function oc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,57),_.Rb())}function bc(e,t){if(1&e&&(_.Sb(0,"div",8),_.Sb(1,"label",53),_.Wb(2,54),_.Rb(),_.Sb(3,"div",11),_.Nb(4,"input",55),_.Mc(5,sc,2,0,"span",13),_.Mc(6,oc,2,0,"span",13),_.Rb(),_.Rb()),2&e){_.ic();const e=_.Ac(2),t=_.ic();_.yb(4),_.pc("readonly",t.editing),_.yb(1),_.pc("ngIf",t.userForm.showError("tenant",e,"pattern")),_.yb(1),_.pc("ngIf",t.userForm.showError("tenant",e,"notUnique"))}}function nc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,58),_.Rb())}function rc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,59),_.Rb())}function lc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,60),_.Rb())}function uc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,63),_.Rb())}function dc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,64),_.Rb())}function fc(e,t){if(1&e&&(_.Sb(0,"div",8),_.Nb(1,"label",61),_.Sb(2,"div",11),_.Nb(3,"input",62),_.Mc(4,uc,2,0,"span",13),_.Mc(5,dc,2,0,"span",13),_.Rb(),_.Rb()),2&e){_.ic();const e=_.Ac(2),t=_.ic();_.yb(4),_.pc("ngIf",t.userForm.showError("max_buckets",e,"required")),_.yb(1),_.pc("ngIf",t.userForm.showError("max_buckets",e,"min"))}}function mc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,76),_.Rb())}function pc(e,t){if(1&e&&(_.Sb(0,"div",8),_.Sb(1,"label",69),_.Wb(2,70),_.Rb(),_.Sb(3,"div",11),_.Sb(4,"div",71),_.Nb(5,"input",72),_.Sb(6,"span",73),_.Nb(7,"button",74),_.Nb(8,"cd-copy-2-clipboard-button",75),_.Rb(),_.Rb(),_.Mc(9,mc,2,0,"span",13),_.Rb(),_.Rb()),2&e){_.ic(2);const e=_.Ac(2),t=_.ic();_.yb(9),_.pc("ngIf",t.userForm.showError("access_key",e,"required"))}}function gc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,82),_.Rb())}function hc(e,t){if(1&e&&(_.Sb(0,"div",8),_.Sb(1,"label",77),_.Wb(2,78),_.Rb(),_.Sb(3,"div",11),_.Sb(4,"div",71),_.Nb(5,"input",79),_.Sb(6,"span",73),_.Nb(7,"button",80),_.Nb(8,"cd-copy-2-clipboard-button",81),_.Rb(),_.Rb(),_.Mc(9,gc,2,0,"span",13),_.Rb(),_.Rb()),2&e){_.ic(2);const e=_.Ac(2),t=_.ic();_.yb(9),_.pc("ngIf",t.userForm.showError("secret_key",e,"required"))}}function Sc(e,t){if(1&e&&(_.Sb(0,"fieldset"),_.Sb(1,"legend"),_.Wb(2,65),_.Rb(),_.Sb(3,"div",8),_.Sb(4,"div",14),_.Sb(5,"div",15),_.Nb(6,"input",66),_.Sb(7,"label",67),_.Wb(8,68),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Mc(9,pc,10,1,"div",19),_.Mc(10,hc,10,1,"div",19),_.Rb()),2&e){const e=_.ic(2);_.yb(9),_.pc("ngIf",!e.editing&&!e.userForm.getValue("generate_key")),_.yb(1),_.pc("ngIf",!e.editing&&!e.userForm.getValue("generate_key"))}}function yc(e,t){1&e&&(_.Sb(0,"span",92),_.Sb(1,"span",93),_.Wb(2,94),_.Rb(),_.Rb())}const _c=function(e){return[e]};function Rc(e,t){if(1&e){const e=_.Tb();_.Sb(0,"span"),_.Sb(1,"div",71),_.Sb(2,"div",95),_.Sb(3,"span",96),_.Nb(4,"i"),_.Rb(),_.Rb(),_.Nb(5,"input",97),_.Sb(6,"div",98),_.Sb(7,"span",96),_.Nb(8,"i"),_.Rb(),_.Rb(),_.Nb(9,"input",97),_.Sb(10,"span",73),_.Sb(11,"button",99),_.Yb(12,100),_.gc("click",(function(){_.Dc(e);const c=t.index;return _.ic(3).showSubuserModal(c)})),_.Nb(13,"i",89),_.Rb(),_.Sb(14,"button",101),_.Yb(15,102),_.gc("click",(function(){_.Dc(e);const c=t.index;return _.ic(3).deleteSubuser(c)})),_.Nb(16,"i",89),_.Rb(),_.Rb(),_.Rb(),_.Nb(17,"span",93),_.Rb()}if(2&e){const e=t.$implicit,c=_.ic(3);_.yb(4),_.Ab(c.icons.user),_.yb(1),_.qc("value",e.id),_.yb(3),_.Ab(c.icons.share),_.yb(1),_.qc("value","full-control"===e.permissions?"full":e.permissions),_.yb(4),_.pc("ngClass",_.uc(10,_c,c.icons.edit)),_.yb(3),_.pc("ngClass",_.uc(12,_c,c.icons.destroy))}}function kc(e,t){if(1&e){const e=_.Tb();_.Sb(0,"fieldset"),_.Sb(1,"legend"),_.Wb(2,83),_.Rb(),_.Sb(3,"div",84),_.Sb(4,"div",14),_.Mc(5,yc,3,0,"span",85),_.Mc(6,Rc,18,14,"span",86),_.Sb(7,"div",84),_.Sb(8,"div",87),_.Sb(9,"button",88),_.gc("click",(function(){return _.Dc(e),_.ic(2).showSubuserModal()})),_.Nb(10,"i",89),_.Qb(11),_.Wb(12,90),_.jc(13,"titlecase"),_.jc(14,"upperFirst"),_.Pb(),_.Rb(),_.Rb(),_.Rb(),_.Nb(15,"span",91),_.Rb(),_.Rb(),_.Rb()}if(2&e){const e=_.ic(2);_.yb(5),_.pc("ngIf",0===e.subusers.length),_.yb(1),_.pc("ngForOf",e.subusers),_.yb(4),_.pc("ngClass",_.uc(9,_c,e.icons.add)),_.yb(4),_.ac(_.kc(13,5,e.actionLabels.CREATE))(_.kc(14,7,e.subuserLabel)),_.Xb(12)}}function vc(e,t){1&e&&(_.Sb(0,"span",92),_.Sb(1,"span",93),_.Wb(2,108),_.Rb(),_.Rb())}function wc(e,t){if(1&e){const e=_.Tb();_.Sb(0,"span"),_.Sb(1,"div",71),_.Sb(2,"div",95),_.Sb(3,"div",96),_.Nb(4,"i"),_.Rb(),_.Rb(),_.Nb(5,"input",97),_.Sb(6,"span",73),_.Sb(7,"button",109),_.Yb(8,110),_.gc("click",(function(){_.Dc(e);const c=t.index;return _.ic(3).showS3KeyModal(c)})),_.Nb(9,"i",89),_.Rb(),_.Sb(10,"button",111),_.Yb(11,112),_.gc("click",(function(){_.Dc(e);const c=t.index;return _.ic(3).deleteS3Key(c)})),_.Nb(12,"i",89),_.Rb(),_.Rb(),_.Rb(),_.Nb(13,"span",93),_.Rb()}if(2&e){const e=t.$implicit,c=_.ic(3);_.yb(4),_.Ab(c.icons.key),_.yb(1),_.qc("value",e.user),_.yb(4),_.pc("ngClass",_.uc(6,_c,c.icons.show)),_.yb(3),_.pc("ngClass",_.uc(8,_c,c.icons.destroy))}}function zc(e,t){1&e&&(_.Sb(0,"span",92),_.Sb(1,"span",93),_.Wb(2,113),_.Rb(),_.Rb())}function xc(e,t){if(1&e){const e=_.Tb();_.Sb(0,"span"),_.Sb(1,"div",71),_.Sb(2,"div",95),_.Sb(3,"span",96),_.Nb(4,"i"),_.Rb(),_.Rb(),_.Nb(5,"input",97),_.Sb(6,"span",73),_.Sb(7,"button",114),_.Yb(8,115),_.gc("click",(function(){_.Dc(e);const c=t.index;return _.ic(3).showSwiftKeyModal(c)})),_.Nb(9,"i",89),_.Rb(),_.Rb(),_.Rb(),_.Nb(10,"span",93),_.Rb()}if(2&e){const e=t.$implicit,c=_.ic(3);_.yb(4),_.Ab(c.icons.key),_.yb(1),_.qc("value",e.user),_.yb(4),_.pc("ngClass",_.uc(5,_c,c.icons.show))}}function Ic(e,t){if(1&e){const e=_.Tb();_.Sb(0,"fieldset"),_.Sb(1,"legend"),_.Wb(2,103),_.Rb(),_.Sb(3,"div",8),_.Sb(4,"label",61),_.Wb(5,104),_.Rb(),_.Sb(6,"div",11),_.Mc(7,vc,3,0,"span",85),_.Mc(8,wc,14,10,"span",86),_.Sb(9,"div",84),_.Sb(10,"div",87),_.Sb(11,"button",105),_.gc("click",(function(){return _.Dc(e),_.ic(2).showS3KeyModal()})),_.Nb(12,"i",89),_.Qb(13),_.Wb(14,106),_.jc(15,"titlecase"),_.jc(16,"upperFirst"),_.Pb(),_.Rb(),_.Rb(),_.Rb(),_.Nb(17,"span",91),_.Rb(),_.Nb(18,"hr"),_.Rb(),_.Sb(19,"div",8),_.Sb(20,"label",61),_.Wb(21,107),_.Rb(),_.Sb(22,"div",11),_.Mc(23,zc,3,0,"span",85),_.Mc(24,xc,11,7,"span",86),_.Rb(),_.Rb(),_.Rb()}if(2&e){const e=_.ic(2);_.yb(7),_.pc("ngIf",0===e.s3Keys.length),_.yb(1),_.pc("ngForOf",e.s3Keys),_.yb(4),_.pc("ngClass",_.uc(11,_c,e.icons.add)),_.yb(4),_.ac(_.kc(15,7,e.actionLabels.CREATE))(_.kc(16,9,e.s3keyLabel)),_.Xb(14),_.yb(7),_.pc("ngIf",0===e.swiftKeys.length),_.yb(1),_.pc("ngForOf",e.swiftKeys)}}function Mc(e,t){1&e&&(_.Sb(0,"span",92),_.Sb(1,"span",93),_.Wb(2,120),_.Rb(),_.Rb())}function $c(e,t){if(1&e){const e=_.Tb();_.Sb(0,"span"),_.Sb(1,"div",71),_.Sb(2,"span",95),_.Sb(3,"div",96),_.Nb(4,"i"),_.Rb(),_.Rb(),_.Nb(5,"input",97),_.Sb(6,"span",73),_.Sb(7,"button",121),_.Yb(8,122),_.gc("click",(function(){_.Dc(e);const c=t.index;return _.ic(3).showCapabilityModal(c)})),_.Nb(9,"i",89),_.Rb(),_.Sb(10,"button",123),_.Yb(11,124),_.gc("click",(function(){_.Dc(e);const c=t.index;return _.ic(3).deleteCapability(c)})),_.Nb(12,"i",89),_.Rb(),_.Rb(),_.Rb(),_.Nb(13,"span",93),_.Rb()}if(2&e){const e=t.$implicit,c=_.ic(3);_.yb(4),_.Ab(c.icons.share),_.yb(1),_.sc("value","",e.type,":",e.perm,""),_.yb(4),_.pc("ngClass",_.uc(7,_c,c.icons.edit)),_.yb(3),_.pc("ngClass",_.uc(9,_c,c.icons.destroy))}}function qc(e,t){if(1&e){const e=_.Tb();_.Sb(0,"fieldset"),_.Sb(1,"legend"),_.Wb(2,116),_.Rb(),_.Sb(3,"div",8),_.Sb(4,"div",14),_.Mc(5,Mc,3,0,"span",85),_.Mc(6,$c,14,11,"span",86),_.Sb(7,"div",84),_.Sb(8,"div",87),_.Sb(9,"button",117),_.Yb(10,118),_.gc("click",(function(){return _.Dc(e),_.ic(2).showCapabilityModal()})),_.jc(11,"pipeFunction"),_.jc(12,"pipeFunction"),_.Nb(13,"i",89),_.Qb(14),_.Wb(15,119),_.jc(16,"titlecase"),_.jc(17,"upperFirst"),_.Pb(),_.Rb(),_.Rb(),_.Rb(),_.Nb(18,"span",91),_.Rb(),_.Rb(),_.Rb()}if(2&e){const e=_.ic(2);_.yb(5),_.pc("ngIf",0===e.capabilities.length),_.yb(1),_.pc("ngForOf",e.capabilities),_.yb(3),_.pc("disabled",_.lc(11,7,e.capabilities,e.hasAllCapabilities))("disableTooltip",!_.lc(12,10,e.capabilities,e.hasAllCapabilities)),_.yb(4),_.pc("ngClass",_.uc(17,_c,e.icons.add)),_.yb(4),_.ac(_.kc(16,13,e.actionLabels.ADD))(_.kc(17,15,e.capabilityLabel)),_.Xb(15)}}function Nc(e,t){1&e&&(_.Sb(0,"div",8),_.Sb(1,"div",14),_.Sb(2,"div",15),_.Nb(3,"input",125),_.Sb(4,"label",126),_.Wb(5,127),_.Rb(),_.Rb(),_.Rb(),_.Rb())}function Tc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,131),_.Rb())}function Ec(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,132),_.Rb())}function Ac(e,t){if(1&e&&(_.Sb(0,"div",8),_.Sb(1,"label",128),_.Wb(2,129),_.Rb(),_.Sb(3,"div",11),_.Nb(4,"input",130),_.Mc(5,Tc,2,0,"span",13),_.Mc(6,Ec,2,0,"span",13),_.Rb(),_.Rb()),2&e){_.ic();const e=_.Ac(2),t=_.ic();_.yb(5),_.pc("ngIf",t.userForm.showError("user_quota_max_size",e,"required")),_.yb(1),_.pc("ngIf",t.userForm.showError("user_quota_max_size",e,"quotaMaxSize"))}}function Wc(e,t){1&e&&(_.Sb(0,"div",8),_.Sb(1,"div",14),_.Sb(2,"div",15),_.Nb(3,"input",133),_.Sb(4,"label",134),_.Wb(5,135),_.Rb(),_.Rb(),_.Rb(),_.Rb())}function Cc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,139),_.Rb())}function Fc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,140),_.Rb())}function Oc(e,t){if(1&e&&(_.Sb(0,"div",8),_.Sb(1,"label",136),_.Wb(2,137),_.Rb(),_.Sb(3,"div",11),_.Nb(4,"input",138),_.Mc(5,Cc,2,0,"span",13),_.Mc(6,Fc,2,0,"span",13),_.Rb(),_.Rb()),2&e){_.ic();const e=_.Ac(2),t=_.ic();_.yb(5),_.pc("ngIf",t.userForm.showError("user_quota_max_objects",e,"required")),_.yb(1),_.pc("ngIf",t.userForm.showError("user_quota_max_objects",e,"min"))}}function Dc(e,t){1&e&&(_.Sb(0,"div",8),_.Sb(1,"div",14),_.Sb(2,"div",15),_.Nb(3,"input",141),_.Sb(4,"label",142),_.Wb(5,143),_.Rb(),_.Rb(),_.Rb(),_.Rb())}function jc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,147),_.Rb())}function Pc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,148),_.Rb())}function Vc(e,t){if(1&e&&(_.Sb(0,"div",8),_.Sb(1,"label",144),_.Wb(2,145),_.Rb(),_.Sb(3,"div",11),_.Nb(4,"input",146),_.Mc(5,jc,2,0,"span",13),_.Mc(6,Pc,2,0,"span",13),_.Rb(),_.Rb()),2&e){_.ic();const e=_.Ac(2),t=_.ic();_.yb(5),_.pc("ngIf",t.userForm.showError("bucket_quota_max_size",e,"required")),_.yb(1),_.pc("ngIf",t.userForm.showError("bucket_quota_max_size",e,"quotaMaxSize"))}}function Bc(e,t){1&e&&(_.Sb(0,"div",8),_.Sb(1,"div",14),_.Sb(2,"div",15),_.Nb(3,"input",149),_.Sb(4,"label",150),_.Wb(5,151),_.Rb(),_.Rb(),_.Rb(),_.Rb())}function Lc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,155),_.Rb())}function Uc(e,t){1&e&&(_.Sb(0,"span",49),_.Wb(1,156),_.Rb())}function Gc(e,t){if(1&e&&(_.Sb(0,"div",8),_.Sb(1,"label",152),_.Wb(2,153),_.Rb(),_.Sb(3,"div",11),_.Nb(4,"input",154),_.Mc(5,Lc,2,0,"span",13),_.Mc(6,Uc,2,0,"span",13),_.Rb(),_.Rb()),2&e){_.ic();const e=_.Ac(2),t=_.ic();_.yb(5),_.pc("ngIf",t.userForm.showError("bucket_quota_max_objects",e,"required")),_.yb(1),_.pc("ngIf",t.userForm.showError("bucket_quota_max_objects",e,"min"))}}const Kc=function(e){return{required:e}};function Qc(e,t){if(1&e){const e=_.Tb();_.Sb(0,"div",1),_.Sb(1,"form",2,3),_.Sb(3,"div",4),_.Sb(4,"div",5),_.Wb(5,6),_.jc(6,"titlecase"),_.jc(7,"upperFirst"),_.Rb(),_.Sb(8,"div",7),_.Sb(9,"div",8),_.Sb(10,"label",9),_.Wb(11,10),_.Rb(),_.Sb(12,"div",11),_.Nb(13,"input",12),_.Mc(14,cc,2,0,"span",13),_.Mc(15,ac,2,0,"span",13),_.Mc(16,ic,2,0,"span",13),_.Rb(),_.Rb(),_.Sb(17,"div",8),_.Sb(18,"div",14),_.Sb(19,"div",15),_.Sb(20,"input",16),_.gc("click",(function(){return _.Dc(e),_.ic().updateFieldsWhenTenanted()})),_.Rb(),_.Sb(21,"label",17),_.Wb(22,18),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Mc(23,bc,7,3,"div",19),_.Sb(24,"div",8),_.Sb(25,"label",20),_.Wb(26,21),_.Rb(),_.Sb(27,"div",11),_.Nb(28,"input",22),_.Mc(29,nc,2,0,"span",13),_.Rb(),_.Rb(),_.Sb(30,"div",8),_.Sb(31,"label",23),_.Wb(32,24),_.Rb(),_.Sb(33,"div",11),_.Nb(34,"input",25),_.Mc(35,rc,2,0,"span",13),_.Mc(36,lc,2,0,"span",13),_.Rb(),_.Rb(),_.Sb(37,"div",8),_.Sb(38,"label",26),_.Wb(39,27),_.Rb(),_.Sb(40,"div",11),_.Sb(41,"select",28),_.gc("change",(function(t){return _.Dc(e),_.ic().onMaxBucketsModeChange(t.target.value)})),_.Sb(42,"option",29),_.Wb(43,30),_.Rb(),_.Sb(44,"option",31),_.Wb(45,32),_.Rb(),_.Sb(46,"option",33),_.Wb(47,34),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Mc(48,fc,6,2,"div",19),_.Sb(49,"div",8),_.Sb(50,"div",14),_.Sb(51,"div",15),_.Nb(52,"input",35),_.Sb(53,"label",36),_.Wb(54,37),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Mc(55,Sc,11,2,"fieldset",38),_.Mc(56,kc,16,11,"fieldset",38),_.Mc(57,Ic,25,13,"fieldset",38),_.Mc(58,qc,19,19,"fieldset",38),_.Sb(59,"fieldset"),_.Sb(60,"legend"),_.Wb(61,39),_.Rb(),_.Sb(62,"div",8),_.Sb(63,"div",14),_.Sb(64,"div",15),_.Nb(65,"input",40),_.Sb(66,"label",41),_.Wb(67,42),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Mc(68,Nc,6,0,"div",19),_.Mc(69,Ac,7,2,"div",19),_.Mc(70,Wc,6,0,"div",19),_.Mc(71,Oc,7,2,"div",19),_.Rb(),_.Sb(72,"fieldset"),_.Sb(73,"legend"),_.Wb(74,43),_.Rb(),_.Sb(75,"div",8),_.Sb(76,"div",14),_.Sb(77,"div",15),_.Nb(78,"input",44),_.Sb(79,"label",45),_.Wb(80,46),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Mc(81,Dc,6,0,"div",19),_.Mc(82,Vc,7,2,"div",19),_.Mc(83,Bc,6,0,"div",19),_.Mc(84,Gc,7,2,"div",19),_.Rb(),_.Rb(),_.Sb(85,"div",47),_.Sb(86,"cd-form-button-panel",48),_.gc("submitActionEvent",(function(){return _.Dc(e),_.ic().onSubmit()})),_.jc(87,"titlecase"),_.jc(88,"upperFirst"),_.Rb(),_.Rb(),_.Rb(),_.Rb(),_.Rb()}if(2&e){const e=_.Ac(2),t=_.ic();_.yb(1),_.pc("formGroup",t.userForm),_.yb(6),_.ac(_.kc(6,29,t.action))(_.kc(7,31,t.resource)),_.Xb(5),_.yb(3),_.pc("ngClass",_.uc(37,Kc,!t.editing)),_.yb(3),_.pc("readonly",t.editing),_.yb(1),_.pc("ngIf",t.userForm.showError("user_id",e,"required")),_.yb(1),_.pc("ngIf",t.userForm.showError("user_id",e,"pattern")),_.yb(1),_.pc("ngIf",!t.userForm.getValue("show_tenant")&&t.userForm.showError("user_id",e,"notUnique")),_.yb(4),_.pc("readonly",!0),_.yb(3),_.pc("ngIf",t.userForm.getValue("show_tenant")),_.yb(2),_.pc("ngClass",_.uc(39,Kc,!t.editing)),_.yb(4),_.pc("ngIf",t.userForm.showError("display_name",e,"required")),_.yb(6),_.pc("ngIf",t.userForm.showError("email",e,"email")),_.yb(1),_.pc("ngIf",t.userForm.showError("email",e,"notUnique")),_.yb(12),_.pc("ngIf",1==t.userForm.get("max_buckets_mode").value),_.yb(7),_.pc("ngIf",!t.editing),_.yb(1),_.pc("ngIf",t.editing),_.yb(1),_.pc("ngIf",t.editing),_.yb(1),_.pc("ngIf",t.editing),_.yb(10),_.pc("ngIf",t.userForm.controls.user_quota_enabled.value),_.yb(1),_.pc("ngIf",t.userForm.controls.user_quota_enabled.value&&!t.userForm.getValue("user_quota_max_size_unlimited")),_.yb(1),_.pc("ngIf",t.userForm.controls.user_quota_enabled.value),_.yb(1),_.pc("ngIf",t.userForm.controls.user_quota_enabled.value&&!t.userForm.getValue("user_quota_max_objects_unlimited")),_.yb(10),_.pc("ngIf",t.userForm.controls.bucket_quota_enabled.value),_.yb(1),_.pc("ngIf",t.userForm.controls.bucket_quota_enabled.value&&!t.userForm.getValue("bucket_quota_max_size_unlimited")),_.yb(1),_.pc("ngIf",t.userForm.controls.bucket_quota_enabled.value),_.yb(1),_.pc("ngIf",t.userForm.controls.bucket_quota_enabled.value&&!t.userForm.getValue("bucket_quota_max_objects_unlimited")),_.yb(2),_.pc("form",t.userForm)("submitText",_.kc(87,33,t.action)+" "+_.kc(88,35,t.resource))}}let Zc=(()=>{class e extends x.a{constructor(e,t,c,a,i,s,o){super(),this.formBuilder=e,this.route=t,this.router=c,this.rgwUserService=a,this.modalService=i,this.notificationService=s,this.actionLabels=o,this.editing=!1,this.submitObservables=[],this.icons=w.a,this.subusers=[],this.s3Keys=[],this.swiftKeys=[],this.capabilities=[],this.showTenant=!1,this.previousTenant=null,this.resource="user",this.subuserLabel="subuser",this.s3keyLabel="S3 Key",this.capabilityLabel="capability",this.editing=this.router.url.startsWith("/rgw/user/"+n.e.EDIT),this.action=this.editing?this.actionLabels.EDIT:this.actionLabels.CREATE,this.createForm()}createForm(){this.userForm=this.formBuilder.group({user_id:[null,[i.A.required,i.A.pattern(/^[a-zA-Z0-9!@#%^&*()_-]+$/)],this.editing?[]:[M.a.unique(this.rgwUserService.exists,this.rgwUserService,()=>this.userForm.getValue("tenant"))]],show_tenant:[this.editing],tenant:[null,[i.A.pattern(/^[a-zA-Z0-9!@#%^&*()_-]+$/)],this.editing?[]:[M.a.unique(this.rgwUserService.exists,this.rgwUserService,()=>this.userForm.getValue("user_id"),!0)]],display_name:[null,[i.A.required]],email:[null,[M.a.email],[M.a.unique(this.rgwUserService.emailExists,this.rgwUserService)]],max_buckets_mode:[1],max_buckets:[1e3,[M.a.requiredIf({max_buckets_mode:"1"}),M.a.number(!1),i.A.min(1)]],suspended:[!1],generate_key:[!0],access_key:[null,[M.a.requiredIf({generate_key:!1})]],secret_key:[null,[M.a.requiredIf({generate_key:!1})]],user_quota_enabled:[!1],user_quota_max_size_unlimited:[!0],user_quota_max_size:[null,[M.a.composeIf({user_quota_enabled:!0,user_quota_max_size_unlimited:!1},[i.A.required,this.quotaMaxSizeValidator])]],user_quota_max_objects_unlimited:[!0],user_quota_max_objects:[null,[i.A.min(0),M.a.requiredIf({user_quota_enabled:!0,user_quota_max_objects_unlimited:!1})]],bucket_quota_enabled:[!1],bucket_quota_max_size_unlimited:[!0],bucket_quota_max_size:[null,[M.a.composeIf({bucket_quota_enabled:!0,bucket_quota_max_size_unlimited:!1},[i.A.required,this.quotaMaxSizeValidator])]],bucket_quota_max_objects_unlimited:[!0],bucket_quota_max_objects:[null,[i.A.min(0),M.a.requiredIf({bucket_quota_enabled:!0,bucket_quota_max_objects_unlimited:!1})]]})}ngOnInit(){this.route.params.subscribe(e=>{if(!e.hasOwnProperty("uid"))return void this.loadingReady();const t=decodeURIComponent(e.uid),c=[];c.push(this.rgwUserService.get(t)),c.push(this.rgwUserService.getQuota(t)),Object(f.a)(c).subscribe(e=>{const t=d.a.clone(this.userForm.value);let c=d.a.pick(e[0],d.a.keys(this.userForm.value));switch(c.max_buckets){case-1:c.max_buckets_mode=-1,c.max_buckets="";break;case 0:c.max_buckets_mode=0,c.max_buckets="";break;default:c.max_buckets_mode=1}["user","bucket"].forEach(t=>{const a=e[1][t+"_quota"];c[t+"_quota_enabled"]=a.enabled,a.max_size<0?(c[t+"_quota_max_size_unlimited"]=!0,c[t+"_quota_max_size"]=null):(c[t+"_quota_max_size_unlimited"]=!1,c[t+"_quota_max_size"]=a.max_size+" B"),a.max_objects<0?(c[t+"_quota_max_objects_unlimited"]=!0,c[t+"_quota_max_objects"]=null):(c[t+"_quota_max_objects_unlimited"]=!1,c[t+"_quota_max_objects"]=a.max_objects)}),c=d.a.merge(t,c),this.userForm.setValue(c),this.subusers=e[0].subusers,this.s3Keys=e[0].keys,this.swiftKeys=e[0].swift_keys;const a={"read, write":"*"};e[0].caps.forEach(e=>{e.perm in a&&(e.perm=a[e.perm])}),this.capabilities=e[0].caps,this.loadingReady()},()=>{this.loadingError()})})}goToListView(){this.router.navigate(["/rgw/user"])}onSubmit(){let e;if(this.userForm.pristine)return void this.goToListView();const t=this.getUID();if(this.editing){if(this._isGeneralDirty()){const e=this._getUpdateArgs();this.submitObservables.push(this.rgwUserService.update(t,e))}e="Updated Object Gateway user '" + t + "'"}else{const c=this._getCreateArgs();this.submitObservables.push(this.rgwUserService.create(c)),e="Created Object Gateway user '" + t + "'"}if(this._isUserQuotaDirty()){const e=this._getUserQuotaArgs();this.submitObservables.push(this.rgwUserService.updateQuota(t,e))}if(this._isBucketQuotaDirty()){const e=this._getBucketQuotaArgs();this.submitObservables.push(this.rgwUserService.updateQuota(t,e))}Object(ft.a)(...this.submitObservables).subscribe({error:()=>{this.userForm.setErrors({cdSubmitButton:!0})},complete:()=>{this.notificationService.show(z.a.success,e),this.goToListView()}})}updateFieldsWhenTenanted(){this.showTenant=this.userForm.getValue("show_tenant"),this.showTenant?(this.userForm.get("user_id").markAsTouched(),this.previousTenant=this.userForm.get("tenant").value,this.userForm.get("tenant").patchValue(null)):(this.userForm.get("user_id").markAsUntouched(),this.userForm.get("tenant").patchValue(this.previousTenant))}getUID(){var e;let t=this.userForm.getValue("user_id");const c=null===(e=this.userForm)||void 0===e?void 0:e.getValue("tenant");return c&&c.length>0&&(t=`${this.userForm.getValue("tenant")}$${t}`),t}quotaMaxSizeValidator(e){return Object(M.b)(e.value)?null:null===RegExp("^(\\d+(\\.\\d+)?)\\s*(B|K(B|iB)?|M(B|iB)?|G(B|iB)?|T(B|iB)?)?$","i").exec(e.value)||(new mt.a).toBytes(e.value)<1024?{quotaMaxSize:!0}:null}setSubuser(e,t){const c={"full-control":"full","read-write":"readwrite"},a=this.getUID();this.submitObservables.push(this.rgwUserService.createSubuser(a,{subuser:e.id,access:e.permissions in c?c[e.permissions]:e.permissions,key_type:"swift",secret_key:e.secret_key,generate_secret:e.generate_secret?"true":"false"})),d.a.isNumber(t)?this.subusers[t]=e:(this.subusers.push(e),this.swiftKeys.push({user:e.id,secret_key:e.generate_secret?"Apply your changes first...":e.secret_key})),this.userForm.markAsDirty()}deleteSubuser(e){const t=this.subusers[e];this.submitObservables.push(this.rgwUserService.deleteSubuser(this.getUID(),t.id)),this.s3Keys=this.s3Keys.filter(e=>e.user!==t.id),this.swiftKeys=this.swiftKeys.filter(e=>e.user!==t.id),this.subusers.splice(e,1),this.userForm.markAsDirty()}setCapability(e,t){const c=this.getUID();if(d.a.isNumber(t)){const a=this.capabilities[t];this.submitObservables.push(this.rgwUserService.deleteCapability(c,a.type,a.perm)),this.submitObservables.push(this.rgwUserService.addCapability(c,e.type,e.perm)),this.capabilities[t]=e}else this.submitObservables.push(this.rgwUserService.addCapability(c,e.type,e.perm)),this.capabilities=[...this.capabilities,e];this.userForm.markAsDirty()}deleteCapability(e){const t=this.capabilities[e];this.submitObservables.push(this.rgwUserService.deleteCapability(this.getUID(),t.type,t.perm)),this.capabilities.splice(e,1),this.capabilities=[...this.capabilities],this.userForm.markAsDirty()}hasAllCapabilities(e){return!d.a.difference(gt.getAll(),d.a.map(e,"type")).length}setS3Key(e,t){if(d.a.isNumber(t));else{const t=e.user.match(/([^:]+)(:(.+))?/),c=t[1],a={subuser:t[2]?t[3]:"",generate_key:e.generate_key?"true":"false"};"false"===a.generate_key&&(d.a.isNil(e.access_key)||(a.access_key=e.access_key),d.a.isNil(e.secret_key)||(a.secret_key=e.secret_key)),this.submitObservables.push(this.rgwUserService.addS3Key(c,a)),this.s3Keys.push({user:e.user,access_key:e.generate_key?"Apply your changes first...":e.access_key,secret_key:e.generate_key?"Apply your changes first...":e.secret_key})}this.userForm.markAsDirty()}deleteS3Key(e){const t=this.s3Keys[e];this.submitObservables.push(this.rgwUserService.deleteS3Key(this.getUID(),t.access_key)),this.s3Keys.splice(e,1),this.userForm.markAsDirty()}showSubuserModal(e){const t=this.getUID(),c=this.modalService.show(Xt);if(d.a.isNumber(e)){const a=this.subusers[e];c.componentInstance.setEditing(),c.componentInstance.setValues(t,a.id,a.permissions)}else c.componentInstance.setEditing(!1),c.componentInstance.setValues(t),c.componentInstance.setSubusers(this.subusers);c.componentInstance.submitAction.subscribe(t=>{this.setSubuser(t,e)})}showS3KeyModal(e){const t=this.modalService.show(Pt);if(d.a.isNumber(e)){const c=this.s3Keys[e];t.componentInstance.setViewing(),t.componentInstance.setValues(c.user,c.access_key,c.secret_key)}else{const e=this._getS3KeyUserCandidates();t.componentInstance.setViewing(!1),t.componentInstance.setUserCandidates(e),t.componentInstance.submitAction.subscribe(e=>{this.setS3Key(e)})}}showSwiftKeyModal(e){const t=this.modalService.show(ec),c=this.swiftKeys[e];t.componentInstance.setValues(c.user,c.secret_key)}showCapabilityModal(e){const t=this.modalService.show(It);if(d.a.isNumber(e)){const c=this.capabilities[e];t.componentInstance.setEditing(),t.componentInstance.setValues(c.type,c.perm)}else t.componentInstance.setEditing(!1),t.componentInstance.setCapabilities(this.capabilities);t.componentInstance.submitAction.subscribe(t=>{this.setCapability(t,e)})}_isGeneralDirty(){return["display_name","email","max_buckets_mode","max_buckets","suspended"].some(e=>this.userForm.get(e).dirty)}_isUserQuotaDirty(){return["user_quota_enabled","user_quota_max_size_unlimited","user_quota_max_size","user_quota_max_objects_unlimited","user_quota_max_objects"].some(e=>this.userForm.get(e).dirty)}_isBucketQuotaDirty(){return["bucket_quota_enabled","bucket_quota_max_size_unlimited","bucket_quota_max_size","bucket_quota_max_objects_unlimited","bucket_quota_max_objects"].some(e=>this.userForm.get(e).dirty)}_getCreateArgs(){const e={uid:this.getUID(),display_name:this.userForm.getValue("display_name"),suspended:this.userForm.getValue("suspended"),email:"",max_buckets:this.userForm.getValue("max_buckets"),generate_key:this.userForm.getValue("generate_key"),access_key:"",secret_key:""},t=this.userForm.getValue("email");d.a.isString(t)&&t.length>0&&d.a.merge(e,{email:t}),this.userForm.getValue("generate_key")||d.a.merge(e,{generate_key:!1,access_key:this.userForm.getValue("access_key"),secret_key:this.userForm.getValue("secret_key")});const c=parseInt(this.userForm.getValue("max_buckets_mode"),10);return d.a.includes([-1,0],c)&&d.a.merge(e,{max_buckets:c}),e}_getUpdateArgs(){const e={},t=["display_name","email","max_buckets","suspended"];for(const a of t)e[a]=this.userForm.getValue(a);const c=parseInt(this.userForm.getValue("max_buckets_mode"),10);return d.a.includes([-1,0],c)&&(e.max_buckets=c),e}_getUserQuotaArgs(){const e={quota_type:"user",enabled:this.userForm.getValue("user_quota_enabled"),max_size_kb:-1,max_objects:-1};if(!this.userForm.getValue("user_quota_max_size_unlimited")){const t=(new mt.a).toBytes(this.userForm.getValue("user_quota_max_size"));e.max_size_kb=(t/1024).toFixed(0)}return this.userForm.getValue("user_quota_max_objects_unlimited")||(e.max_objects=this.userForm.getValue("user_quota_max_objects")),e}_getBucketQuotaArgs(){const e={quota_type:"bucket",enabled:this.userForm.getValue("bucket_quota_enabled"),max_size_kb:-1,max_objects:-1};if(!this.userForm.getValue("bucket_quota_max_size_unlimited")){const t=(new mt.a).toBytes(this.userForm.getValue("bucket_quota_max_size"));e.max_size_kb=(t/1024).toFixed(0)}return this.userForm.getValue("bucket_quota_max_objects_unlimited")||(e.max_objects=this.userForm.getValue("bucket_quota_max_objects")),e}_getS3KeyUserCandidates(){let e=[];const t=this.getUID();return d.a.isString(t)&&!d.a.isEmpty(t)&&e.push(t),this.subusers.forEach(t=>{e.push(t.id)}),this.s3Keys.forEach(t=>{e.push(t.user)}),e=d.a.uniq(e),e}onMaxBucketsModeChange(e){"1"===e&&(this.userForm.get("max_buckets").valid||this.userForm.patchValue({max_buckets:1e3}))}}return e.\u0275fac=function(t){return new(t||e)(_.Mb(I.a),_.Mb(s.a),_.Mb(s.e),_.Mb(v.a),_.Mb(xe.a),_.Mb($.a),_.Mb(n.b))},e.\u0275cmp=_.Gb({type:e,selectors:[["cd-rgw-user-form"]],features:[_.vb],decls:1,vars:1,consts:function(){return[["class","cd-col-form",4,"cdFormLoading"],[1,"cd-col-form"],["novalidate","",3,"formGroup"],["frm","ngForm"],[1,"card"],[1,"card-header"],"" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",[1,"card-body"],[1,"form-group","row"],["for","user_id",1,"cd-col-form-label",3,"ngClass"],"User ID",[1,"cd-col-form-input"],["id","user_id","type","text","formControlName","user_id",1,"form-control",3,"readonly"],["class","invalid-feedback",4,"ngIf"],[1,"cd-col-form-offset"],[1,"custom-control","custom-checkbox"],["id","show_tenant","type","checkbox","formControlName","show_tenant",1,"custom-control-input",3,"readonly","click"],["for","show_tenant",1,"custom-control-label"],"Show Tenant",["class","form-group row",4,"ngIf"],["for","display_name",1,"cd-col-form-label",3,"ngClass"],"Full name",["id","display_name","type","text","formControlName","display_name",1,"form-control"],["for","email",1,"cd-col-form-label"],"Email address",["id","email","type","text","formControlName","email",1,"form-control"],["for","max_buckets_mode",1,"cd-col-form-label"],"Max. buckets",["formControlName","max_buckets_mode","name","max_buckets_mode","id","max_buckets_mode",1,"form-control","custom-select",3,"change"],["value","-1"],"Disabled",["value","0"],"Unlimited",["value","1"],"Custom",["id","suspended","type","checkbox","formControlName","suspended",1,"custom-control-input"],["for","suspended",1,"custom-control-label"],"Suspended",[4,"ngIf"],"User quota",["id","user_quota_enabled","type","checkbox","formControlName","user_quota_enabled",1,"custom-control-input"],["for","user_quota_enabled",1,"custom-control-label"],"Enabled","Bucket quota",["id","bucket_quota_enabled","type","checkbox","formControlName","bucket_quota_enabled",1,"custom-control-input"],["for","bucket_quota_enabled",1,"custom-control-label"],"Enabled",[1,"card-footer"],["wrappingClass","text-right",3,"form","submitText","submitActionEvent"],[1,"invalid-feedback"],"This field is required.","The value is not valid.","The chosen user ID is already in use.",["for","tenant",1,"cd-col-form-label"],"Tenant",["id","tenant","type","text","formControlName","tenant","autofocus","",1,"form-control",3,"readonly"],"The value is not valid.","The chosen user ID exists in this tenant.","This field is required.","This is not a valid email address.","The chosen email address is already in use.",[1,"cd-col-form-label"],["id","max_buckets","type","number","formControlName","max_buckets","min","1",1,"form-control"],"This field is required.","The entered value must be >= 1.","S3 key",["id","generate_key","type","checkbox","formControlName","generate_key",1,"custom-control-input"],["for","generate_key",1,"custom-control-label"],"Auto-generate key",["for","access_key",1,"cd-col-form-label","required"],"Access key",[1,"input-group"],["id","access_key","type","password","formControlName","access_key",1,"form-control"],[1,"input-group-append"],["type","button","cdPasswordButton","access_key",1,"btn","btn-light"],["source","access_key"],"This field is required.",["for","secret_key",1,"cd-col-form-label","required"],"Secret key",["id","secret_key","type","password","formControlName","secret_key",1,"form-control"],["type","button","cdPasswordButton","secret_key",1,"btn","btn-light"],["source","secret_key"],"This field is required.","Subusers",[1,"row"],["class","no-border",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-12"],["type","button",1,"btn","btn-light","float-right","tc_addSubuserButton",3,"click"],[3,"ngClass"],"" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "",[1,"help-block"],[1,"no-border"],[1,"form-text","text-muted"],"There are no subusers.",[1,"input-group-prepend"],[1,"input-group-text"],["type","text","readonly","",1,"cd-form-control",3,"value"],[1,"input-group-prepend","border-left-0","border-right-0"],["type","button",1,"btn","btn-light","tc_showSubuserButton",3,"click",6,"ngbTooltip"],["ngbTooltip","Edit"],["type","button",1,"btn","btn-light","tc_deleteSubuserButton",3,"click",6,"ngbTooltip"],["ngbTooltip","Delete"],"Keys","S3",["type","button",1,"btn","btn-light","float-right","tc_addS3KeyButton",3,"click"],"" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "","Swift","There are no keys.",["type","button",1,"btn","btn-light","tc_showS3KeyButton",3,"click",6,"ngbTooltip"],["ngbTooltip","Show"],["type","button",1,"btn","btn-light","tc_deleteS3KeyButton",3,"click",6,"ngbTooltip"],["ngbTooltip","Delete"],"There are no keys.",["type","button",1,"btn","btn-light","tc_showSwiftKeyButton",3,"click",6,"ngbTooltip"],["ngbTooltip","Show"],"Capabilities",["type","button","triggers","pointerenter:pointerleave",1,"btn","btn-light","float-right","tc_addCapButton",3,"disabled","disableTooltip","click",6,"ngbTooltip"],["ngbTooltip","All capabilities are already added."],"" + "\ufffd0\ufffd" + " " + "\ufffd1\ufffd" + "","There are no capabilities.",["type","button",1,"btn","btn-light","tc_editCapButton",3,"click",6,"ngbTooltip"],["ngbTooltip","Edit"],["type","button",1,"btn","btn-light","tc_deleteCapButton",3,"click",6,"ngbTooltip"],["ngbTooltip","Delete"],["id","user_quota_max_size_unlimited","type","checkbox","formControlName","user_quota_max_size_unlimited",1,"custom-control-input"],["for","user_quota_max_size_unlimited",1,"custom-control-label"],"Unlimited size",["for","user_quota_max_size",1,"cd-col-form-label","required"],"Max. size",["id","user_quota_max_size","type","text","formControlName","user_quota_max_size","cdDimlessBinary","",1,"form-control"],"This field is required.","The value is not valid.",["id","user_quota_max_objects_unlimited","type","checkbox","formControlName","user_quota_max_objects_unlimited",1,"custom-control-input"],["for","user_quota_max_objects_unlimited",1,"custom-control-label"],"Unlimited objects",["for","user_quota_max_objects",1,"cd-col-form-label","required"],"Max. objects",["id","user_quota_max_objects","type","number","formControlName","user_quota_max_objects",1,"form-control"],"This field is required.","The entered value must be >= 0.",["id","bucket_quota_max_size_unlimited","type","checkbox","formControlName","bucket_quota_max_size_unlimited",1,"custom-control-input"],["for","bucket_quota_max_size_unlimited",1,"custom-control-label"],"Unlimited size",["for","bucket_quota_max_size",1,"cd-col-form-label","required"],"Max. size",["id","bucket_quota_max_size","type","text","formControlName","bucket_quota_max_size","cdDimlessBinary","",1,"form-control"],"This field is required.","The value is not valid.",["id","bucket_quota_max_objects_unlimited","type","checkbox","formControlName","bucket_quota_max_objects_unlimited",1,"custom-control-input"],["for","bucket_quota_max_objects_unlimited",1,"custom-control-label"],"Unlimited objects",["for","bucket_quota_max_objects",1,"cd-col-form-label","required"],"Max. objects",["id","bucket_quota_max_objects","type","number","formControlName","bucket_quota_max_objects",1,"form-control"],"This field is required.","The entered value must be >= 0."]},template:function(e,t){1&e&&_.Mc(0,Qc,89,41,"div",0),2&e&&_.pc("cdFormLoading",t.loading)},directives:[T.a,i.C,i.r,E.a,i.k,A.a,a.p,W.a,i.d,C.a,i.q,i.i,a.r,i.b,i.z,i.u,i.B,D.a,F.a,i.v,Mt.a,$t.a,a.q,o.D,tc.a],pipes:[a.A,j.a,b.b],styles:[""]}),e})();var Yc=c("x38r"),Jc=c("TJUb");const Xc=["accessKeyTpl"],Hc=["secretKeyTpl"];function ea(e,t){if(1&e&&(_.Sb(0,"tr"),_.Sb(1,"td",15),_.Wb(2,20),_.Rb(),_.Sb(3,"td"),_.Oc(4),_.Rb(),_.Rb()),2&e){const e=_.ic(4);_.yb(4),_.Pc(e.user.email)}}function ta(e,t){if(1&e&&(_.Sb(0,"div"),_.Oc(1),_.Rb()),2&e){const e=t.$implicit;_.yb(1),_.Rc(" ",e.id," (",e.permissions,") ")}}function ca(e,t){if(1&e&&(_.Sb(0,"tr"),_.Sb(1,"td",15),_.Wb(2,21),_.Rb(),_.Sb(3,"td"),_.Mc(4,ta,2,2,"div",22),_.Rb(),_.Rb()),2&e){const e=_.ic(4);_.yb(4),_.pc("ngForOf",e.user.subusers)}}function aa(e,t){if(1&e&&(_.Sb(0,"div"),_.Oc(1),_.Rb()),2&e){const e=t.$implicit;_.yb(1),_.Rc(" ",e.type," (",e.perm,") ")}}function ia(e,t){if(1&e&&(_.Sb(0,"tr"),_.Sb(1,"td",15),_.Wb(2,23),_.Rb(),_.Sb(3,"td"),_.Mc(4,aa,2,2,"div",22),_.Rb(),_.Rb()),2&e){const e=_.ic(4);_.yb(4),_.pc("ngForOf",e.user.caps)}}function sa(e,t){1&e&&(_.Sb(0,"td"),_.Oc(1,"-"),_.Rb())}function oa(e,t){1&e&&(_.Sb(0,"td"),_.Wb(1,28),_.Rb())}function ba(e,t){if(1&e&&(_.Sb(0,"td"),_.Oc(1),_.jc(2,"dimlessBinary"),_.Rb()),2&e){const e=_.ic(5);_.yb(1),_.Qc(" ",_.kc(2,1,e.user.user_quota.max_size)," ")}}function na(e,t){1&e&&(_.Sb(0,"td"),_.Oc(1,"-"),_.Rb())}function ra(e,t){1&e&&(_.Sb(0,"td"),_.Wb(1,29),_.Rb())}function la(e,t){if(1&e&&(_.Sb(0,"td"),_.Oc(1),_.Rb()),2&e){const e=_.ic(5);_.yb(1),_.Qc(" ",e.user.user_quota.max_objects," ")}}function ua(e,t){if(1&e&&(_.Sb(0,"div"),_.Sb(1,"legend"),_.Wb(2,24),_.Rb(),_.Sb(3,"table",9),_.Sb(4,"tbody"),_.Sb(5,"tr"),_.Sb(6,"td",10),_.Wb(7,25),_.Rb(),_.Sb(8,"td",12),_.Oc(9),_.jc(10,"booleanText"),_.Rb(),_.Rb(),_.Sb(11,"tr"),_.Sb(12,"td",15),_.Wb(13,26),_.Rb(),_.Mc(14,sa,2,0,"td",0),_.Mc(15,oa,2,0,"td",0),_.Mc(16,ba,3,3,"td",0),_.Rb(),_.Sb(17,"tr"),_.Sb(18,"td",15),_.Wb(19,27),_.Rb(),_.Mc(20,na,2,0,"td",0),_.Mc(21,ra,2,0,"td",0),_.Mc(22,la,2,1,"td",0),_.Rb(),_.Rb(),_.Rb(),_.Rb()),2&e){const e=_.ic(4);_.yb(9),_.Pc(_.kc(10,7,e.user.user_quota.enabled)),_.yb(5),_.pc("ngIf",!e.user.user_quota.enabled),_.yb(1),_.pc("ngIf",e.user.user_quota.enabled&&e.user.user_quota.max_size<=-1),_.yb(1),_.pc("ngIf",e.user.user_quota.enabled&&e.user.user_quota.max_size>-1),_.yb(4),_.pc("ngIf",!e.user.user_quota.enabled),_.yb(1),_.pc("ngIf",e.user.user_quota.enabled&&e.user.user_quota.max_objects<=-1),_.yb(1),_.pc("ngIf",e.user.user_quota.enabled&&e.user.user_quota.max_objects>-1)}}function da(e,t){1&e&&(_.Sb(0,"td"),_.Oc(1,"-"),_.Rb())}function fa(e,t){1&e&&(_.Sb(0,"td"),_.Wb(1,34),_.Rb())}function ma(e,t){if(1&e&&(_.Sb(0,"td"),_.Oc(1),_.jc(2,"dimlessBinary"),_.Rb()),2&e){const e=_.ic(5);_.yb(1),_.Qc(" ",_.kc(2,1,e.user.bucket_quota.max_size)," ")}}function pa(e,t){1&e&&(_.Sb(0,"td"),_.Oc(1,"-"),_.Rb())}function ga(e,t){1&e&&(_.Sb(0,"td"),_.Wb(1,35),_.Rb())}function ha(e,t){if(1&e&&(_.Sb(0,"td"),_.Oc(1),_.Rb()),2&e){const e=_.ic(5);_.yb(1),_.Qc(" ",e.user.bucket_quota.max_objects," ")}}function Sa(e,t){if(1&e&&(_.Sb(0,"div"),_.Sb(1,"legend"),_.Wb(2,30),_.Rb(),_.Sb(3,"table",9),_.Sb(4,"tbody"),_.Sb(5,"tr"),_.Sb(6,"td",10),_.Wb(7,31),_.Rb(),_.Sb(8,"td",12),_.Oc(9),_.jc(10,"booleanText"),_.Rb(),_.Rb(),_.Sb(11,"tr"),_.Sb(12,"td",15),_.Wb(13,32),_.Rb(),_.Mc(14,da,2,0,"td",0),_.Mc(15,fa,2,0,"td",0),_.Mc(16,ma,3,3,"td",0),_.Rb(),_.Sb(17,"tr"),_.Sb(18,"td",15),_.Wb(19,33),_.Rb(),_.Mc(20,pa,2,0,"td",0),_.Mc(21,ga,2,0,"td",0),_.Mc(22,ha,2,1,"td",0),_.Rb(),_.Rb(),_.Rb(),_.Rb()),2&e){const e=_.ic(4);_.yb(9),_.Pc(_.kc(10,7,e.user.bucket_quota.enabled)),_.yb(5),_.pc("ngIf",!e.user.bucket_quota.enabled),_.yb(1),_.pc("ngIf",e.user.bucket_quota.enabled&&e.user.bucket_quota.max_size<=-1),_.yb(1),_.pc("ngIf",e.user.bucket_quota.enabled&&e.user.bucket_quota.max_size>-1),_.yb(4),_.pc("ngIf",!e.user.bucket_quota.enabled),_.yb(1),_.pc("ngIf",e.user.bucket_quota.enabled&&e.user.bucket_quota.max_objects<=-1),_.yb(1),_.pc("ngIf",e.user.bucket_quota.enabled&&e.user.bucket_quota.max_objects>-1)}}function ya(e,t){if(1&e&&(_.Sb(0,"div"),_.Sb(1,"table",9),_.Sb(2,"tbody"),_.Sb(3,"tr"),_.Sb(4,"td",10),_.Wb(5,11),_.Rb(),_.Sb(6,"td",12),_.Oc(7),_.Rb(),_.Rb(),_.Sb(8,"tr"),_.Sb(9,"td",10),_.Wb(10,13),_.Rb(),_.Sb(11,"td",12),_.Oc(12),_.Rb(),_.Rb(),_.Sb(13,"tr"),_.Sb(14,"td",10),_.Wb(15,14),_.Rb(),_.Sb(16,"td",12),_.Oc(17),_.Rb(),_.Rb(),_.Sb(18,"tr"),_.Sb(19,"td",15),_.Wb(20,16),_.Rb(),_.Sb(21,"td"),_.Oc(22),_.Rb(),_.Rb(),_.Mc(23,ea,5,1,"tr",0),_.Sb(24,"tr"),_.Sb(25,"td",15),_.Wb(26,17),_.Rb(),_.Sb(27,"td"),_.Oc(28),_.jc(29,"booleanText"),_.Rb(),_.Rb(),_.Sb(30,"tr"),_.Sb(31,"td",15),_.Wb(32,18),_.Rb(),_.Sb(33,"td"),_.Oc(34),_.jc(35,"booleanText"),_.Rb(),_.Rb(),_.Sb(36,"tr"),_.Sb(37,"td",15),_.Wb(38,19),_.Rb(),_.Sb(39,"td"),_.Oc(40),_.jc(41,"map"),_.Rb(),_.Rb(),_.Mc(42,ca,5,1,"tr",0),_.Mc(43,ia,5,1,"tr",0),_.Rb(),_.Rb(),_.Mc(44,ua,23,9,"div",0),_.Mc(45,Sa,23,9,"div",0),_.Rb()),2&e){const e=_.ic(3);_.yb(7),_.Pc(e.user.tenant),_.yb(5),_.Pc(e.user.user_id),_.yb(5),_.Pc(e.user.uid),_.yb(5),_.Pc(e.user.display_name),_.yb(1),_.pc("ngIf",null==e.user.email?null:e.user.email.length),_.yb(5),_.Pc(_.kc(29,12,e.user.suspended)),_.yb(6),_.Pc(_.kc(35,14,"true"===e.user.system)),_.yb(6),_.Pc(_.lc(41,16,e.user.max_buckets,e.maxBucketsMap)),_.yb(2),_.pc("ngIf",e.user.subusers&&e.user.subusers.length),_.yb(1),_.pc("ngIf",e.user.caps&&e.user.caps.length),_.yb(1),_.pc("ngIf",e.user.user_quota),_.yb(1),_.pc("ngIf",e.user.bucket_quota)}}function _a(e,t){if(1&e&&_.Mc(0,ya,46,19,"div",0),2&e){const e=_.ic(2);_.pc("ngIf",e.user)}}const Ra=function(e){return[e]};function ka(e,t){if(1&e){const e=_.Tb();_.Sb(0,"cd-table",38),_.gc("updateSelection",(function(t){return _.Dc(e),_.ic(3).updateKeysSelection(t)})),_.Sb(1,"div",39),_.Sb(2,"div",40),_.Sb(3,"button",41),_.gc("click",(function(){return _.Dc(e),_.ic(3).showKeyModal()})),_.Nb(4,"i",42),_.Qb(5),_.Wb(6,43),_.Pb(),_.Rb(),_.Rb(),_.Rb(),_.Rb()}if(2&e){const e=_.ic(3);_.pc("data",e.keys)("columns",e.keysColumns),_.yb(3),_.pc("disabled",!e.keysSelection.hasSingleSelection),_.yb(1),_.pc("ngClass",_.uc(4,Ra,e.icons.show))}}function va(e,t){1&e&&(_.Sb(0,"li",36),_.Sb(1,"a",4),_.Wb(2,37),_.Rb(),_.Mc(3,ka,7,6,"ng-template",6),_.Rb())}function wa(e,t){if(1&e&&(_.Qb(0),_.Sb(1,"ul",1,2),_.Sb(3,"li",3),_.Sb(4,"a",4),_.Wb(5,5),_.Rb(),_.Mc(6,_a,1,1,"ng-template",6),_.Rb(),_.Mc(7,va,4,0,"li",7),_.Rb(),_.Nb(8,"div",8),_.Pb()),2&e){const e=_.Ac(2),t=_.ic();_.yb(7),_.pc("ngIf",t.keys.length),_.yb(1),_.pc("ngbNavOutlet",e)}}let za=(()=>{class e{constructor(e,t){this.rgwUserService=e,this.modalService=t,this.keys=[],this.keysColumns=[],this.keysSelection=new ke.a,this.icons=w.a}ngOnInit(){this.keysColumns=[{name:"Username",prop:"username",flexGrow:1},{name:"Type",prop:"type",flexGrow:1}],this.maxBucketsMap={"-1":"Disabled",0:"Unlimited"}}ngOnChanges(){this.selection&&(this.user=this.selection,this.user.subusers=d.a.sortBy(this.user.subusers,"id"),this.user.caps=d.a.sortBy(this.user.caps,"type"),this.rgwUserService.getQuota(this.user.uid).subscribe(e=>{d.a.extend(this.user,e)}),this.keys=[],this.user.keys&&this.user.keys.forEach(e=>{this.keys.push({id:this.keys.length+1,type:"S3",username:e.user,ref:e})}),this.user.swift_keys&&this.user.swift_keys.forEach(e=>{this.keys.push({id:this.keys.length+1,type:"Swift",username:e.user,ref:e})}),this.keys=d.a.sortBy(this.keys,"user"))}updateKeysSelection(e){this.keysSelection=e}showKeyModal(){const e=this.keysSelection.first(),t=this.modalService.show("S3"===e.type?Pt:ec);switch(e.type){case"S3":t.componentInstance.setViewing(),t.componentInstance.setValues(e.ref.user,e.ref.access_key,e.ref.secret_key);break;case"Swift":t.componentInstance.setValues(e.ref.user,e.ref.secret_key)}}}return e.\u0275fac=function(t){return new(t||e)(_.Mb(v.a),_.Mb(xe.a))},e.\u0275cmp=_.Gb({type:e,selectors:[["cd-rgw-user-details"]],viewQuery:function(e,t){var c;1&e&&(_.Tc(Xc,!0),_.Tc(Hc,!0)),2&e&&(_.zc(c=_.hc())&&(t.accessKeyTpl=c.first),_.zc(c=_.hc())&&(t.secretKeyTpl=c.first))},inputs:{selection:"selection"},features:[_.wb],decls:1,vars:1,consts:function(){return[[4,"ngIf"],["ngbNav","","cdStatefulTab","rgw-user-details",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem","details"],["ngbNavLink",""],"Details",["ngbNavContent",""],["ngbNavItem","keys",4,"ngIf"],[3,"ngbNavOutlet"],[1,"table","table-striped","table-bordered"],[1,"bold","w-25"],"Tenant",[1,"w-75"],"User ID","Username",[1,"bold"],"Full name","Suspended","System","Maximum buckets","Email address","Subusers",[4,"ngFor","ngForOf"],"Capabilities","User quota","Enabled","Maximum size","Maximum objects","Unlimited","Unlimited","Bucket quota","Enabled","Maximum size","Maximum objects","Unlimited","Unlimited",["ngbNavItem","keys"],"Keys",["columnMode","flex","selectionType","multi","forceIdentifier","true",3,"data","columns","updateSelection"],[1,"table-actions"],["dropdown","",1,"btn-group"],["type","button",1,"btn","btn-accent",3,"disabled","click"],[3,"ngClass"],"Show"]},template:function(e,t){1&e&&_.Mc(0,wa,9,2,"ng-container",0),2&e&&_.pc("ngIf",t.selection)},directives:[a.r,o.p,Je.a,o.r,o.s,o.q,o.u,a.q,Re.a,W.a,a.p],pipes:[qe.a,Jc.a,ve.a],styles:[""]}),e})();const xa=["userSizeTpl"],Ia=["userObjectTpl"];function Ma(e,t){if(1&e&&_.Nb(0,"cd-usage-bar",8),2&e){const e=_.ic().row;_.pc("total",e.user_quota.max_size)("used",e.stats.size_actual)}}function $a(e,t){1&e&&_.Wb(0,9)}function qa(e,t){if(1&e&&(_.Mc(0,Ma,1,2,"cd-usage-bar",6),_.Mc(1,$a,1,0,"ng-template",null,7,_.Nc)),2&e){const e=t.row,c=_.Ac(2);_.pc("ngIf",e.user_quota.max_size>0&&e.user_quota.enabled)("ngIfElse",c)}}function Na(e,t){if(1&e&&_.Nb(0,"cd-usage-bar",12),2&e){const e=_.ic().row;_.pc("total",e.user_quota.max_objects)("used",e.stats.num_objects)("isBinary",!1)}}function Ta(e,t){1&e&&_.Wb(0,13)}function Ea(e,t){if(1&e&&(_.Mc(0,Na,1,3,"cd-usage-bar",10),_.Mc(1,Ta,1,0,"ng-template",null,11,_.Nc)),2&e){const e=t.row,c=_.Ac(2);_.pc("ngIf",e.user_quota.max_objects>0&&e.user_quota.enabled)("ngIfElse",c)}}let Aa=(()=>{class e extends Se.a{constructor(e,t,c,a,i,s){super(),this.authStorageService=e,this.rgwUserService=t,this.modalService=c,this.urlBuilder=a,this.actionLabels=i,this.ngZone=s,this.columns=[],this.users=[],this.selection=new ke.a,this.tableStatus=new ye.a}ngOnInit(){this.permission=this.authStorageService.getPermissions().rgw,this.columns=[{name:"Username",prop:"uid",flexGrow:1},{name:"Tenant",prop:"tenant",flexGrow:1},{name:"Full name",prop:"display_name",flexGrow:1},{name:"Email address",prop:"email",flexGrow:1},{name:"Suspended",prop:"suspended",flexGrow:1,cellClass:"text-center",cellTransformation:Yc.a.checkIcon},{name:"Max. buckets",prop:"max_buckets",flexGrow:1,cellTransformation:Yc.a.map,customTemplateConfig:{"-1":"Disabled",0:"Unlimited"}},{name:"Capacity Limit %",prop:"size_usage",cellTemplate:this.userSizeTpl,flexGrow:.8},{name:"Object Limit %",prop:"object_usage",cellTemplate:this.userObjectTpl,flexGrow:.8}];const e=()=>this.selection.first()&&""+encodeURIComponent(this.selection.first().uid);this.tableActions=[{permission:"create",icon:w.a.add,routerLink:()=>this.urlBuilder.getCreate(),name:this.actionLabels.CREATE,canBePrimary:e=>!e.hasSelection},{permission:"update",icon:w.a.edit,routerLink:()=>this.urlBuilder.getEdit(e()),name:this.actionLabels.EDIT},{permission:"delete",icon:w.a.destroy,click:()=>this.deleteAction(),disable:()=>!this.selection.hasSelection,name:this.actionLabels.DELETE,canBePrimary:e=>e.hasMultiSelection}],this.timeConditionReached()}timeConditionReached(){clearTimeout(this.staleTimeout),this.ngZone.runOutsideAngular(()=>{this.staleTimeout=window.setTimeout(()=>{this.ngZone.run(()=>{this.tableStatus=new ye.a("warning","The user list data might be stale. If needed, you can manually reload it.")})},1e4)})}getUserList(e){this.tableStatus=new ye.a,this.timeConditionReached(),this.rgwUserService.list().subscribe(e=>{this.users=e},()=>{e.error()})}updateSelection(e){this.selection=e}deleteAction(){this.modalService.show(_e.a,{itemDescription:this.selection.hasSingleSelection?"user":"users",itemNames:this.selection.selected.map(e=>e.uid),submitActionObservable:()=>new he.a(e=>{Object(f.a)(this.selection.selected.map(e=>this.rgwUserService.delete(e.uid))).subscribe({error:t=>{e.error(t),this.table.refreshBtn()},complete:()=>{e.complete(),this.table.refreshBtn()}})})})}}return e.\u0275fac=function(t){return new(t||e)(_.Mb(ze.a),_.Mb(v.a),_.Mb(xe.a),_.Mb(Ie.a),_.Mb(n.b),_.Mb(_.A))},e.\u0275cmp=_.Gb({type:e,selectors:[["cd-rgw-user-list"]],viewQuery:function(e,t){var c;1&e&&(_.Jc(Re.a,!0),_.Jc(xa,!0),_.Jc(Ia,!0)),2&e&&(_.zc(c=_.hc())&&(t.table=c.first),_.zc(c=_.hc())&&(t.userSizeTpl=c.first),_.zc(c=_.hc())&&(t.userObjectTpl=c.first))},features:[_.xb([{provide:Ie.a,useValue:new Ie.a("rgw/user")}]),_.vb],decls:8,vars:9,consts:function(){return[["columnMode","flex","selectionType","multiClick","identifier","uid",3,"autoReload","data","columns","hasDetails","status","setExpandedRow","updateSelection","fetchData"],["table",""],[1,"table-actions",3,"permission","selection","tableActions"],["cdTableDetail","",3,"selection"],["userSizeTpl",""],["userObjectTpl",""],[3,"total","used",4,"ngIf","ngIfElse"],["noSizeQuota",""],[3,"total","used"],"No Limit",[3,"total","used","isBinary",4,"ngIf","ngIfElse"],["noObjectQuota",""],[3,"total","used","isBinary"],"No Limit"]},template:function(e,t){1&e&&(_.Sb(0,"cd-table",0,1),_.gc("setExpandedRow",(function(e){return t.setExpandedRow(e)}))("updateSelection",(function(e){return t.updateSelection(e)}))("fetchData",(function(e){return t.getUserList(e)})),_.Nb(2,"cd-table-actions",2),_.Nb(3,"cd-rgw-user-details",3),_.Rb(),_.Mc(4,qa,3,2,"ng-template",null,4,_.Nc),_.Mc(6,Ea,3,2,"ng-template",null,5,_.Nc)),2&e&&(_.pc("autoReload",!1)("data",t.users)("columns",t.columns)("hasDetails",!0)("status",t.tableStatus),_.yb(2),_.pc("permission",t.permission)("selection",t.selection)("tableActions",t.tableActions),_.yb(1),_.pc("selection",t.expandedRow))},directives:[Re.a,Me.a,za,a.r,De.a],styles:[""]}),e})(),Wa=(()=>{class e{}return e.\u0275mod=_.Kb({type:e}),e.\u0275inj=_.Jb({factory:function(t){return new(t||e)},imports:[[a.c,r.a,i.m,i.x,l.a,o.t,s.i,o.F,b.a]]}),e})();const Ca=[{path:""},{path:"daemon",component:dt,data:{breadcrumbs:"Daemons"}},{path:"user",data:{breadcrumbs:"Users"},children:[{path:"",component:Aa},{path:n.e.CREATE,component:Zc,data:{breadcrumbs:n.a.CREATE}},{path:n.e.EDIT+"/:uid",component:Zc,data:{breadcrumbs:n.a.EDIT}}]},{path:"bucket",data:{breadcrumbs:"Buckets"},children:[{path:"",component:Qe},{path:n.e.CREATE,component:ge,data:{breadcrumbs:n.a.CREATE}},{path:n.e.EDIT+"/:bid",component:ge,data:{breadcrumbs:n.a.EDIT}}]}];let Fa=(()=>{class e{}return e.\u0275mod=_.Kb({type:e}),e.\u0275inj=_.Jb({factory:function(t){return new(t||e)},imports:[[Wa,s.i.forChild(Ca)]]}),e})()}}]);